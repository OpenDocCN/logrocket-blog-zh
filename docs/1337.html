<html>
<head>
<title>Adding video with Vime.js - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Vime.js - LogRocket博客添加视频</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/adding-video-with-vime-js/#0001-01-01">https://blog.logrocket.com/adding-video-with-vime-js/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<p>Vime.js是一个现代的框架无关的媒体播放器。它支持视频托管服务，如Youtube、Vimeo、Dailymotion、HTML5等。它允许使用<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement" target="_blank" rel="noopener noreferrer"> HTMLMediaElement </a>加载、播放和控制媒体文件。所以它支持添加本地视频文件。</p>
<p>自托管视频有许多缺点，包括性能问题、存储挑战等。网络视频也没有单一的文件格式标准，因此，不同的主流浏览器支持不同的格式。</p>
<p>火狐支持<code>Ogg</code>或<code>WebM</code>视频，但不支持<code>H.264</code>。Safari支持<code>H.264 (MP4)</code>视频，但不支持<code>WebM</code>或<code>Ogg</code>。谢天谢地，Chrome支持所有主要的视频格式。这些可以通过使用YouTube或Vimeo这样的视频共享平台来调和。然而，这种方法也有其局限性。</p>
<p>在我们想要来自多个平台的视频的场景中，我们可能必须为每个平台编写不同的逻辑。因此，我们的代码不是干的。Vime.js解决了这些问题。</p>
<p>它消除了与各种视频托管平台交互的麻烦，给了我们一个易于使用的API。这意味着无论我们想用多少视频托管平台，我们只需要学习Vime.js。</p>
<p>此外，Vime.js处理跨浏览器兼容性问题。而且它的可扩展性、可定制性和可访问性更强。</p>
<p>我们已经看到了Vime.js的重要性以及为什么我们应该立即采用它。有趣的是，我们仅仅触及了它的皮毛。以下是它的一些特点:</p>
<ul>
<li>适用于所有平台的API(学习一个API并将其用于所有平台)</li>
<li>支持多视频托管平台(Youtube、Vimeo、HTML 5、Dailymotion等。)</li>
<li>没有跨浏览器兼容性挑战(解决浏览器差异)</li>
<li>为移动和桌面平台提供支持</li>
<li>轻量级和高性能</li>
<li>可扩展(构建和扩展您的Vime)</li>
<li>CSS模块(允许自定义主题和样式)</li>
<li>用TypeScript构建</li>
<li>React、Vue、Svelte、Stencil和Angular的框架特定绑定</li>
</ul>
<h2>Vime.js入门</h2>
<h3>装置</h3>
<p>首先，Vime.js是一个框架无关的库。你可以把它插入到你的反应、角度、Vue和苗条项目中。这也意味着每个框架的安装是不同的。</p>
<p>这不是问题，因为安装是由<code>npm</code>处理的。然而，必须注意到每个<code>npm script</code>中的细微差别。</p>
<p>在这篇文章中，我将关注两个用例——React和HTML 5。然而，我将把必要的链接留给其他框架上的文档。</p>
<h2>加拿大</h2>
<p>如果你不想处理不同的<code>npm</code>安装脚本的细节，这是使用Vime.js最简单的方法。当使用<code>CDN</code> js <a href="https://www.jsdelivr.com/" target="_blank" rel="noopener noreferrer">时，推荐使用Delivr </a>以获得最佳性能。</p>
<p>只需将这段代码插入HTML 5文档的<code>&lt;head&gt;</code>标签中:</p>
<pre>&lt;!-- Default theme. ~960B --&gt;
&lt;link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@vime/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1e7d716c7b5e">[email protected]</a>^4/themes/default.css"
/&gt;

&lt;!-- Optional light theme (extends default). ~400B --&gt;
&lt;link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@vime/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f3909c8196b3">[email protected]</a>^4/themes/light.css"
/&gt;

&lt;!-- Library and all of its components are lazy loaded, so nothing to sweat about here. ~3kB --&gt;
&lt;script
  type="module"
  src="https://cdn.jsdelivr.net/npm/@vime/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="791a160b1c39">[email protected]</a>^4/dist/vime/vime.esm.js"
&gt;&lt;/script&gt;</pre>
<h2>反应</h2>
<p>首先通过将这些添加到<code>root</code>组件来加载<code>CSS</code>:</p>
<pre>// Default theme. ~960B
import '@vime/core/themes/default.css';

// Optional light theme (extends default). ~400B
import '@vime/core/themes/light.css';</pre>
<p>然后运行:</p>
<pre>npm i @vime/react</pre>
<p>以下是其他框架的链接:</p>

<h2>Vime.js核心</h2>
<p>Vime.js有两个核心组件，它们是播放器、提供者和UI组件。</p>
<p>让我们单独处理它们。</p>
<h3>播放器组件</h3>
<p>这个组件保存玩家的<code>state</code>，比如是<code>autoplay</code>还是<code>show control</code>。还装有<code>media playback</code>的<code>state</code>，如<code>current time</code>或<code>duration</code>。</p>
<p>它作为根组件，包装UI和提供者组件。此外，它还是您将与之交互的主要组件，用于设置播放器的属性、监听事件和调用方法。</p>
<p>在这里获得更多它的属性、事件和方法。</p>
<p>下面是一个简单的播放器组件实现:</p>
<pre>&lt;vime-player&gt;
    &lt;!-- Provider component is placed here. --&gt;
    &lt;!-- UI components are placed here. --&gt;
&lt;/vime-player&gt;</pre>
<h3>提供商组件</h3>
<p>这是播放器组件直接与之交互的唯一组件。它通过使用<code><a href="https://github.com/vime-js/vime/blob/master/packages/core/src/components/providers/MediaProvider.ts#L5" target="_blank" rel="noopener noreferrer">MediaProviderAdapter</a></code>接口来实现这一点。提供商负责加载和控制播放器/媒体。</p>
<p>例如，<code>Youtube Provider</code>将设置<a href="https://developers.google.com/youtube/player_parameters" target="_blank" rel="noopener noreferrer"> YouTube播放器嵌入</a>，并通过它加载视频。然后可以通过播放器组件控制该视频。</p>
<p>请考虑下面<code>Youtube provider</code>的代码示例:</p>
<pre>&lt;vime-player controls&gt;
  &lt;vime-youtube video-id="DyTCOwB0DVw"&gt;&lt;/vime-youtube&gt;
  &lt;!-- ... --&gt;
&lt;/vime-player&gt;</pre>
<p>从上面的例子中，我们可以看到<code>vime-youtube</code>提供者获取了一个名为<code>video-id</code>的属性。该属性保存要加载的视频的资源<code>ID</code>。</p>
<p>了解更多关于vime-youtube的信息。</p>
<h3>UI组件</h3>
<p>这些是媒体播放器上可以交互的可视组件。旋转器就是一个很好的例子。</p>
<p>考虑下面的代码:</p>
<pre>&lt;vime-player&gt;
  &lt;!-- ... --&gt;
  &lt;vime-ui&gt;
    &lt;!-- ... --&gt;
    &lt;vime-spinner&gt;&lt;/vime-spinner&gt;
  &lt;/vime-ui&gt;
&lt;/vime-player&gt;</pre>
<p>上面的代码示例在<code>UI</code>中抛出了一个<code>spinner</code>。这是一个方便的实用程序，用于增强用户体验。</p>
<p>下图显示了当视频为<code>buffering</code>时用作<code>loading indicator</code>的旋转器。</p>
<p><img data-attachment-id="29367" data-permalink="https://blog.logrocket.com/adding-video-with-vime-js/spinnerloadingindicator/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator.jpg" data-orig-size="730,356" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="spinnerloadingindicator" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator-300x146.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator.jpg" decoding="async" class="aligncenter size-full wp-image-29367 jetpack-lazy-image" src="../Images/8df93abadeaac6182f89cbaa27989c23.png" alt="spinner loading indicator " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator-300x146.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29367" data-permalink="https://blog.logrocket.com/adding-video-with-vime-js/spinnerloadingindicator/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator.jpg" data-orig-size="730,356" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="spinnerloadingindicator" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator-300x146.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator.jpg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29367" src="../Images/8df93abadeaac6182f89cbaa27989c23.png" alt="spinner loading indicator " srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator-300x146.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/spinnerloadingindicator.jpg"/></noscript>
<h2>使用Vime.js</h2>
<p>在本节中，我们将使用Vime.js加载并播放一个视频，并将自定义styles.css。</p>
<p>为视频播放器设置一个完整的界面是相当具有挑战性的，所以我们将从一个简单的React.js设置开始。</p>
<p>如前所述，Vime是框架不可知的，因此在本节中，我们将使用React.js。由于Vime.js API在各种框架中是一致的，因此我们可以学习一次，并在任何地方使用它。此外，每个框架实现之间的细微差别非常小，因此人们可以轻松地切换到不同的框架，而不会有任何麻烦。</p>
<h2>使用Vime.js</h2>
<p>考虑下面的代码:</p>
<pre>import "./styles.css";
import React from "react";
import { VimePlayer, VimeYoutube } from "@vime/react";
export default function APP() {
  return (
    &lt;VimePlayer controls&gt;
      &lt;VimeYoutube videoId="1GFbKYQhDMU" /&gt;
      {/* ... */}
    &lt;/VimePlayer&gt;
  );
}</pre>
<p>上面这个虚构的例子使用<code>VimeYoutube</code>提供者从<a href="https://www.youtube.com/c/logrocket" target="_blank" rel="noopener noreferrer"> LogRocket的YouTube </a>频道加载了一个视频。你可以在这里观看演示<a href="https://codesandbox.io/s/fervent-https-5d8ek?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer">。</a></p>
<p>让我们做一些更有趣的事情:</p>
<pre>import React from 'react';
import { VimePlayer, VimeVideo } from '@vime/react';

function Player() {
  return (
    &lt;VimePlayer controls&gt;
      &lt;VimeVideo crossOrigin="" poster="https://media.vimejs.com/poster.png"&gt;
        &lt;source
          data-src="https://media.vimejs.com/720p.mp4"
          type="video/mp4"
        /&gt;
        &lt;track
          default
          kind="subtitles"
          src="https://media.vimejs.com/subs/english.vtt"
          srcLang="en"
          label="English"
        /&gt;
      &lt;/VimeVideo&gt;

      {/* ... */}
    &lt;/VimePlayer&gt;
  );
}</pre>
<p>在上面的例子中，我们使用<code>VimeVideo</code>组件加载图像。该组件允许使用HTML 5 video元素加载、播放和控制视频。在我们的例子中，它有几个类似于<code>crossorigin</code>和<code>poster</code>的属性。这些属性被传递给底层的HTML 5元素。</p>
<p>在上面的例子中，<code>VimeVideo</code>组件有两个子HTML 5媒体元素，它们是<code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/source" target="_blank" rel="noopener noreferrer">source</a></code>元素和<code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track" target="_blank" rel="noopener noreferrer">track</a></code>元素。在HTML 5 <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/source" target="_blank" rel="noopener noreferrer"> source </a>元素中，我们将<code>data-src</code>作为属性传递，这是为了允许<code>lazy-loading</code>；正常的<code>src</code>也可以。</p>
<p>元素用于处理我们视频的字幕。</p>
<p>另外，请注意，我们向该组件传递了一个<code>controls</code>属性。这个属性打开播放器<code>controls</code>，比如播放、音量、全屏等等。你可以在这里查看代码<a href="https://codesandbox.io/s/muddy-haze-vscny?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"/>。</p>
<h2>样式和主题</h2>
<p>Vime.js自带明暗主题。我们可以通过将<code>theme</code>属性传递给播放器组件来在这两者之间进行切换:</p>
<pre>&lt;!-- Default is 'dark'. --&gt;
&lt;vime-player theme="light"&gt;
  &lt;!-- ... --&gt;
&lt;/vime-player&gt;</pre>
<p>对于样式，Vime.js为其组件使用了<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties" target="_blank" rel="noopener noreferrer">自定义CSS属性</a>。以下是可用的<code>selectors</code>列表:</p>
<pre>vime-player.mobile {
  /* Add styles here for when the player is loaded on a mobile device. */
}

vime-player.live {
  /* Add styles here for when the media is a live stream. */
}

vime-player.audio {
  /* Add styles here for when the media is of type `audio`. */
}

vime-player.video {
  /* Add styles here for when the media is of type `video`. */
}

/* You can replace 'light' with 'dark' or any custom theme name you'd like. */
vime-player[theme="light"] {
  /* Add styles here for when the theme is set to `light`.  */
}</pre>
<p>您可以在这里找到更多特定于组件的样式属性<a href="https://vimejs.com/getting-started/styling" target="_blank" rel="noopener noreferrer">。</a></p>
<p>您还可以添加自定义类名或id，以正确地将项目定位到样式，如下图所示:</p>
<p><img data-attachment-id="29375" data-permalink="https://blog.logrocket.com/adding-video-with-vime-js/stylescssforvime/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime.png" data-orig-size="730,363" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="stylescssforvime" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime-300x149.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime.png" decoding="async" class="aligncenter size-full wp-image-29375 jetpack-lazy-image" src="../Images/5203eeb18057e0bb99701f64622409f6.png" alt="styles css for vime" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime-300x149.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29375" data-permalink="https://blog.logrocket.com/adding-video-with-vime-js/stylescssforvime/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime.png" data-orig-size="730,363" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="stylescssforvime" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime-300x149.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29375" src="../Images/5203eeb18057e0bb99701f64622409f6.png" alt="styles css for vime" srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime-300x149.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/stylescssforvime.png"/></noscript>
<p>玩代码<a href="https://codesandbox.io/s/pensive-snyder-vv450?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer">这里</a>。</p>
<h2>结论</h2>
<p>毫无疑问，Vime.js是一个令人惊叹的库。并且可以做比我们讨论的更多的事情。然而，通过这篇文章，你应该可以毫无困难地开始使用Vime.js。对于更高级的东西，我建议查看他们的官方文档。</p><div class="code-block code-block-28">
<div class="blog-plug inline-plug js-libraries-plug"><h2>您是否添加了新的JS库来提高性能或构建新特性？如果他们反其道而行之呢？</h2><p>毫无疑问，前端变得越来越复杂。当您向应用程序添加新的JavaScript库和其他依赖项时，您将需要更多的可见性，以确保您的用户不会遇到未知的问题。</p>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放JavaScript错误，就像它们发生在您自己的浏览器中一样，这样您就可以更有效地对错误做出反应。</p><a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/></noscript></a>
<a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>自信地构建— <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>