<html>
<head>
<title>Build a React Native progress bar - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>构建一个React本地进度条- LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-react-native-progress-bar/#0001-01-01">https://blog.logrocket.com/build-react-native-progress-bar/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:这篇文章最后一次更新是在2021年8月30日，以改进代码、图像和任何过时的信息。但是，它可能仍然包含过时的信息。</em></p>
<p>进度条有时也称为进度指示器，是任务进度的可视化表示。这可能包括下载、文件传输或上传、安装、程序执行或配置文件设置中的完整步骤等操作。</p>
<p>带有集成进度条的UX的软件让用户知道是否有进程正在运行、预期的运行时间以及部分工作何时完成。</p>
<p>进度条可以是确定的，也可以是不确定的。确定的进度条显示已完成和未完成的数据，而不确定的进度条用于无法立即确定指标的情况。</p>
<p><img data-attachment-id="6851" data-permalink="https://blog.logrocket.com/build-react-native-progress-bar/determinatevsindeterminate-nocdn/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/determinatevsindeterminate-nocdn.gif" data-orig-size="600,340" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="determinatevsindeterminate-nocdn" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/determinatevsindeterminate-nocdn-300x170.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/determinatevsindeterminate-nocdn.gif" decoding="async" class="aligncenter wp-image-6851 jetpack-lazy-image" src="../Images/7f5a5172237932afb2ef196b76f60bab.png" alt="Top Animation Shows Determinate Progress Bar Slowly Moving To End, Bottom Animation Shows Indeterminate Progress Bar Moving Without Filling The Whole Bar" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/determinatevsindeterminate-nocdn.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/determinatevsindeterminate-nocdn.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6851" data-permalink="https://blog.logrocket.com/build-react-native-progress-bar/determinatevsindeterminate-nocdn/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/determinatevsindeterminate-nocdn.gif" data-orig-size="600,340" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="determinatevsindeterminate-nocdn" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/determinatevsindeterminate-nocdn-300x170.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/determinatevsindeterminate-nocdn.gif" decoding="async" loading="lazy" class="aligncenter wp-image-6851" src="../Images/7f5a5172237932afb2ef196b76f60bab.png" alt="Top Animation Shows Determinate Progress Bar Slowly Moving To End, Bottom Animation Shows Indeterminate Progress Bar Moving Without Filling The Whole Bar" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/determinatevsindeterminate-nocdn.gif"/></noscript>
<p>在本文中，我们将学习如何为React Native构建一个确定的进度条。</p>
<p>虽然已经有一些针对进度条的React原生包，如<code><a href="https://www.npmjs.com/package/react-native-progress-bar-animated">react-native-progress-bar-animated</a></code>和<code><a href="https://www.npmjs.com/package/react-native-progress">react-native-progress</a></code>，但最终，它归结为个人偏好，并创建一些您可以调整以满足您需求的东西。</p>
<p>React Native还有一个进度条组件，<code>ProgressBarAndroid</code>，只有Android才有。如果你想让你的iOS应用有一个进度条，你必须使用一个现有的npm包或者自己构建一个。</p>
<h2>开始构建进度条</h2>
<p>本文假设你<a href="https://blog.logrocket.com/whats-new-in-react-native-0-64/">熟悉React Native </a>或者至少熟悉React，以及<a href="https://blog.logrocket.com/react-hooks-the-good-the-bad-and-the-ugly/"> React Hooks </a>。</p>
<p>首先，使用Expo CLI或React Native CLI引导您的项目。出于本文的目的，我们将使用<a href="https://snack.expo.io/"> Snack </a>，它允许我们在web浏览器中直接尝试React Native。</p>
<p>我们将在<code>App.js</code>文件中进行修改。让我们清除我们已经拥有的，并将下面的代码添加到<code>App.js</code>:</p>
<pre>import React, { useEffect, useState, useRef } from 'react';
import { Text, View, StyleSheet } from 'react-native';
import Constants from 'expo-constants';
 
 
const App = () =&gt; {
 return (
   &lt;View style={styles.container}&gt;
     &lt;Text&gt;
       We Will Start Here
     &lt;/Text&gt;
   &lt;/View&gt;
 );
}
 
export default App;
 
const styles = StyleSheet.create({
 container: {
   flex: 1,
   justifyContent: 'center',
   alignItems: 'center',
   paddingTop: Constants.statusBarHeight,
   backgroundColor: '#ecf0f1',
   padding: 8,
 },
});</pre>
<p>这将呈现带有一些文本的<code>View</code>组件。设备模拟器应该会自动更新。</p>
<p><img data-attachment-id="66278" data-permalink="https://blog.logrocket.com/build-react-native-progress-bar/starting-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page.png" data-orig-size="331,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Starting page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page-217x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page.png" decoding="async" class="aligncenter size-full wp-image-66278 jetpack-lazy-image" src="../Images/c2b4054b9676f4990408a40bea97bdee.png" alt="Starting Page That Says We Will Start Here" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page.png 331w, https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page-217x300.png 217w" data-lazy-sizes="(max-width: 331px) 100vw, 331px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="66278" data-permalink="https://blog.logrocket.com/build-react-native-progress-bar/starting-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page.png" data-orig-size="331,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Starting page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page-217x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-66278" src="../Images/c2b4054b9676f4990408a40bea97bdee.png" alt="Starting Page That Says We Will Start Here" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page.png 331w, https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page-217x300.png 217w" sizes="(max-width: 331px) 100vw, 331px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/starting-page.png"/></noscript>
<h2>构建进度条</h2>
<p>在我们开始构建进度条之前，我们必须确定进度条的外观以及我们需要显示的内容。一个简单的进度条通常有描述性的文本，比如<strong>加载</strong>，实际的进度条代表操作的进度。</p>
<p>我们还必须添加一些文本来显示操作完成的百分比。让我们创建进度条的框架。在我们的<code>App.js</code>中，将我们的<code>Text</code>组件中的文本更改为<code>Loading.....</code>:</p>
<pre>&lt;Text&gt;
  Loading.....
&lt;/Text&gt;</pre>
<h3>设置React本机进度条的样式</h3>
<p>我们希望<code>Loading.....</code>文本在进度条之上，完成百分比在进度条之下。因此，更改容器样式来对齐列中的子组件。</p>
<p>让我们将<code>flexDirection: 'Column'</code>属性添加到容器样式中。在此之下，向名为<code>progressBar</code>的新<code>styles</code>对象添加以下样式:</p>
<pre>&lt;View style={styles.container}&gt;
  &lt;Text&gt;
    Loading.....
  &lt;/Text&gt;
  &lt;View style={styles.progressBar}&gt;&lt;/View&gt;
&lt;/View&gt;

const styles = StyleSheet.create({
  container: {
   flex: 1,
   flexDirection: "column", //column direction
   justifyContent: 'center',
   alignItems: 'center',
   paddingTop: Constants.statusBarHeight,
   backgroundColor: '#ecf0f1',
   padding: 8,
 },
  progressBar: {
   height: 20,
   width: '100%',
   backgroundColor: 'white',
   borderColor: '#000',
   borderWidth: 2,
   borderRadius: 5
 }
});</pre>
<p>要显示任务执行的当前进度，请在进度条下方添加一个带有完成百分比的文本字段。我们现在可以将它硬编码为50%:</p>
<pre>&lt;View style={styles.container}&gt;
  &lt;Text&gt;
    Loading.....
  &lt;/Text&gt;
  &lt;View style={styles.progressBar}&gt;&lt;/View&gt;
  &lt;Text&gt;50%&lt;/Text&gt;
&lt;/View&gt;</pre>
<p>到目前为止，我们的进度条应该是这样的:</p>
<p><img data-attachment-id="66267" data-permalink="https://blog.logrocket.com/build-react-native-progress-bar/hardcoded-at-50-percent-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1.png" data-orig-size="498,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Hardcoded at 50 percent" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1-205x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1.png" decoding="async" class="aligncenter size-full wp-image-66267 jetpack-lazy-image" src="../Images/af9d04333227da2362cb09ee822b53f1.png" alt="Loading Page Is Hardcoded At 50 Percent But There Is No Loading Bar Yet" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1.png 498w, https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1-205x300.png 205w" data-lazy-sizes="(max-width: 498px) 100vw, 498px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="66267" data-permalink="https://blog.logrocket.com/build-react-native-progress-bar/hardcoded-at-50-percent-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1.png" data-orig-size="498,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Hardcoded at 50 percent" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1-205x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-66267" src="../Images/af9d04333227da2362cb09ee822b53f1.png" alt="Loading Page Is Hardcoded At 50 Percent But There Is No Loading Bar Yet" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1.png 498w, https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1-205x300.png 205w" sizes="(max-width: 498px) 100vw, 498px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/hardcoded-at-50-percent-1.png"/></noscript>
<p>我们现在可以开始制作真正的进度条了。通过在<code>View</code>进度条容器中添加一个孩子<code>View</code>，孩子<code>View</code>显示进度的百分比。因为我们必须在水平面上对齐子节点<code>View</code>，所以进度条容器需要样式属性<code>flexDirection:"Row"</code>。</p>
<p>将该属性添加到<code>progressBar</code>样式中。最后，你的<code>progressBar</code>风格应该是这样的:</p>
<pre>progressBar: {
   height: 20,
   flexDirection: "row",
   width: '100%',
   backgroundColor: 'white',
   borderColor: '#000',
   borderWidth: 2,
   borderRadius: 5
 }
</pre>
<p>我们的目标是拥有一个使用<code>StyleSheet.absoluteFill</code>对象的动画视图。这将创建一个覆盖图，位置<code>absolute</code>为零。</p>
<p>此外，我们必须给<code>View</code>一个填充颜色。我们将使用绿色阴影，并添加50%的宽度:</p>
<pre>&lt;View style={styles.progressBar}&gt;
  &lt;Animated.View style={[StyleSheet.absoluteFill], {backgroundColor: "#8BED4F", width: “50%”}}/&gt;
&lt;/View&gt;</pre>
<p>这里，我们使用了<code>Animated.View</code>组件，这意味着这个元素可以执行动画。</p>
<p>我们的应用程序现在看起来像这样:</p>
<p><img data-attachment-id="66269" data-permalink="https://blog.logrocket.com/build-react-native-progress-bar/progress-bar-loading-bar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar.png" data-orig-size="531,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Progress bar loading bar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar-218x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar.png" decoding="async" class="aligncenter size-full wp-image-66269 jetpack-lazy-image" src="../Images/9289680811cf1fa9545e52b5bae68303.png" alt="Progress Bar Now Has A Green Loading Bar Within It" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar.png 531w, https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar-218x300.png 218w" data-lazy-sizes="(max-width: 531px) 100vw, 531px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="66269" data-permalink="https://blog.logrocket.com/build-react-native-progress-bar/progress-bar-loading-bar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar.png" data-orig-size="531,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Progress bar loading bar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar-218x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-66269" src="../Images/9289680811cf1fa9545e52b5bae68303.png" alt="Progress Bar Now Has A Green Loading Bar Within It" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar.png 531w, https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar-218x300.png 218w" sizes="(max-width: 531px) 100vw, 531px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/progress-bar-loading-bar.png"/></noscript>
<h3>添加进度计数器</h3>
<p>为了让进度条显示变化的完成情况，我们必须添加一个计数器。最简单的方法是使用<code>setInterval</code>:</p>
<pre>const countInterval = useRef(null);
  const [count, setCount] = useState(0);
 
  useEffect(() =&gt; {
    countInterval.current = setInterval(() =&gt; setCount((old) =&gt; old + 5), 1000);
    return () =&gt; {
      clearInterval(countInterval); //when user exits, clear this interval.
    };
  }, []);
</pre>
<p>在这段代码中，我们告诉React每秒钟将<code>count</code>钩子增加5。一旦组件挂载到DOM，就会发生这种情况。</p>
<h2>如何在React Native中制作进度条动画？</h2>
<p>为了开始动画我们的进度条，我们必须使用useRef钩子通过<a href="https://blog.logrocket.com/usestate-vs-useref/">创建一个动画值。这将有助于动画显示我们的装载机价值:</a></p>
<pre>const loaderValue = useRef(new Animated.Value(0)).current;
const load = (count) =&gt; {
    Animated.timing(loaderValue, {
      toValue: count, //final value
      duration: 500, //update value in 500 milliseconds
      useNativeDriver: true,
    }).start();
};
</pre>
<p>在这段代码中，我们使用动画API在半秒钟内将<code>loaderValue</code>的值更改为<code>count</code>。<code>Animated.timing()</code>方法获取动画引用的当前值和一个配置对象。然后通过调用<code>start()</code>运行动画。此外，我们还使用了<code>useNativeDriver</code>属性，它提供了更平滑的用户界面。<br/>接下来，添加以下代码片段:</p>
<pre>useEffect(() =&gt; {
    load(count)
    if (count &gt;= 100) {
      setCount(100);
      clearInterval(countInterval);
    }
  }, [count]);
</pre>
<p>从这段代码中可以得出一些推论:</p>
<ul>
<li>当<code>count</code>的值改变时，调用<code>load</code>方法来运行动画</li>
<li>我们检查了<code>count</code>挂钩是否超过100。如果这个条件为真，React将删除这个间隔，并停止递增状态变量</li>
</ul>
<p>接下来，通过从动画创建插值来设置进度条的宽度:</p>
<pre>const width = animation.current.interpolate({
  inputRange: [0, 100],
  outputRange: ["0%", "100%"],
  extrapolate: "clamp"
})</pre>
<p>属性表示我们从进度中获得的值的范围。<code>outputRange</code>定义了输出值的范围。</p>
<p>通常，插值使用线性插值将输入范围映射到输出范围。默认情况下，它会将曲线外推至给定范围之外。为了确保输出值不会超出所提供的范围，我们将属性extrapolate <code>"clamp"</code>传递给配置对象。</p>
<p>现在，将插值后的宽度传递给动画进度条:</p>
<pre>&lt;View style={styles.progressBar}&gt;
  &lt;Animated.View style={[StyleSheet.absoluteFill], {backgroundColor: "#8BED4F", width }}/&gt;
&lt;/View&gt;</pre>
<p>我们之前硬编码的进度百分比值现在必须与更新进度条相匹配。因为我们的值范围是从0到100，所以让我们使用模板字符串来构造文本:</p>
<pre>&lt;View style={styles.container}&gt;
  ...
  &lt;View style={styles.progressBar}&gt;
    ...
  &lt;/View&gt;
  &lt;Text&gt;{`${progress}%`}&lt;/Text&gt;
&lt;/View&gt;</pre>
<p>这就是我们拥有的。我们的进度条完成了！</p>
<p><a href="https://staging.snack.expo.dev/@hussainarifkl/supportive-soylent"> <img data-attachment-id="66275" data-permalink="https://blog.logrocket.com/build-react-native-progress-bar/final-progress-bar-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/final-progress-bar-animation.gif" data-orig-size="320,467" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final progress bar animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/final-progress-bar-animation-206x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/final-progress-bar-animation.gif" decoding="async" class="aligncenter size-full wp-image-66275 jetpack-lazy-image" src="../Images/9c98727b49ed2215fc479cf0b30d3b04.png" alt="The Final Progress Bar With A Green Loading Bar Animation Increasing The Percentage" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/final-progress-bar-animation.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/final-progress-bar-animation.gif"/> <noscript> <img data-lazy-fallback="1" data-attachment-id="66275" data-permalink="https://blog.logrocket.com/build-react-native-progress-bar/final-progress-bar-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/final-progress-bar-animation.gif" data-orig-size="320,467" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final progress bar animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/final-progress-bar-animation-206x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/final-progress-bar-animation.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-66275" src="../Images/9c98727b49ed2215fc479cf0b30d3b04.png" alt="The Final Progress Bar With A Green Loading Bar Animation Increasing The Percentage" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/final-progress-bar-animation.gif"/> </noscript>在这里找到最终产品。</a></p>
<h2>结论</h2>
<p>这绝不是一个完美的进度条，还有很多可以改进的地方，尤其是在动画方面。为了进一步挑战自己，你可以试着上传一个文件并显示进度。</p>
<p>如果您有任何问题、意见或反馈，请告诉我。你可以在推特上找到我。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>