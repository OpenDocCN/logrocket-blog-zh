<html>
<head>
<title>React Router with Redux: Understanding navigation state - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React路由器与Redux:了解导航状态</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/react-router-with-redux-navigation-state/#0001-01-01">https://blog.logrocket.com/react-router-with-redux-navigation-state/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:这个React路由器和Redux导航状态教程最后一次更新是在2021年3月31日。</em></p>
<p>导航是传统应用程序和单页应用程序(SPAs)的基本组件。简单地说，导航指的是从一个页面移动到另一个页面的能力。</p>
<p>在本React路由器和Redux教程中，我们将向您展示在React/Redux应用程序中导航的细微差别，并演示如何以声明方式进行导航。您还将学习如何跨React应用程序的导航开关维护状态。</p>
<p>我们将讨论以下内容:</p>

<p>要跟随本教程，您应该对Redux的工作原理有一个基本的了解。</p>

<div class="podcast-container">
<div class="podcast-embed">
<h2>我们不只是写Redux，我们也谈论它。现在听着:</h2>
<p>或者以后订阅</p>
<h3>什么是React路由器？</h3>

</div>
</div>
<h2 id="reactrouter">React Router 是React应用程序中一种流行的管理路由的声明方式。它消除了在React应用程序中为所有页面和屏幕手动设置路径所带来的压力。React路由器输出三个主要组件来帮助我们实现路由——路由、链路和浏览器路由器。</h2>
<p><img data-attachment-id="40831" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-diagram/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram.png" data-orig-size="720,486" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Navigation diagram" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram-300x203.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram.png" decoding="async" class="aligncenter size-full wp-image-40831 jetpack-lazy-image" src="../Images/31305baa26337432495c6709d916c7e5.png" alt="React Router and Redux: Navigation Diagram" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram-300x203.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram.png"/></p>
<p>如果您是React路由器的新手，请查看此视频教程以帮助您入门:</p><noscript><img data-lazy-fallback="1" data-attachment-id="40831" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-diagram/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram.png" data-orig-size="720,486" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Navigation diagram" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram-300x203.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40831" src="../Images/31305baa26337432495c6709d916c7e5.png" alt="React Router and Redux: Navigation Diagram" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram-300x203.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-diagram.png"/></noscript>
<p><span class="embed-youtube"> <iframe loading="lazy" class="youtube-player" src="https://www.youtube.com/embed/Law7wfdg_ls?version=3&amp;rel=1&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;fs=1&amp;hl=en-US&amp;autohide=2&amp;wmode=transparent" allowfullscreen="true" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation">视频</iframe> </span></p>
<p>Redux是什么？</p>
<h2 id="redux">Redux是一个可预测的状态容器，旨在帮助您编写跨客户机、服务器和本机环境表现一致且易于测试的JavaScript应用程序。</h2>
<p>虽然它主要用作React的状态管理工具，但是您可以将它用于任何其他JavaScript框架或库。它是轻量级的，只有2KB(包括依赖项)，所以您不必担心它会使您的应用程序的资产变大。</p>
<p>使用Redux，应用程序的状态保存在一个存储中，每个组件都可以从这个存储中访问它需要的任何状态。</p>
<p>如果你刚刚开始使用Redux，下面的视频对初学者来说是一个很好的资源。</p>
<p><span class="embed-youtube"> <iframe loading="lazy" class="youtube-player" src="https://www.youtube.com/embed/CVpUuw9XSjY?version=3&amp;rel=1&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;fs=1&amp;hl=en-US&amp;autohide=2&amp;start=4&amp;wmode=transparent" allowfullscreen="true" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation">视频</iframe> </span></p>
<p>使用Redux示例反应路由器</p>
<h2 id="example">为了使本教程尽可能实用，我设置了一个名为EmojiLand的简单应用程序(不要与同名的百老汇音乐剧混淆)。</h2>
<p>下面是示例应用程序的外观:</p>
<p><img data-attachment-id="40830" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-emojiland-gif/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-gif.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: EmojiLand animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-gif-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-gif.gif" decoding="async" class="aligncenter size-full wp-image-40830 jetpack-lazy-image" src="../Images/d688c3ab9df45e0fa5b779b50ed5d5e8.png" alt="React Router and Redux: EmojiLand Animation" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-gif.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-gif.gif"/></p>
<p>EmojiLand是一个简单的应用程序，但它足以帮助你消化我将在本文中分享的非常重要的提示。</p><noscript><img data-lazy-fallback="1" data-attachment-id="40830" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-emojiland-gif/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-gif.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: EmojiLand animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-gif-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-gif.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40830" src="../Images/d688c3ab9df45e0fa5b779b50ed5d5e8.png" alt="React Router and Redux: EmojiLand Animation" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-gif.gif"/></noscript>
<p>请注意，该应用程序如何停留在当前路线上，但当单击按钮时，它会执行一些假操作，并在假操作完成后重定向到另一条路线。</p>
<p>在现实世界中，这个假动作可能是获取资源的网络请求或任何其他异步动作。</p>
<p>为了让我们达成共识，让我们来探索EmojiLand应用程序是如何构建的。</p>
<p>要跟进，从GitHub 获取应用程序的<a href="https://github.com/ohansemmanuel/nav-state-react-router" target="_blank" rel="noopener noreferrer"> repo。如果你觉得很懒，可以跳过这一步。</a></p>
<p>克隆回购:<code>git clone <a href="https://github.com/ohansemmanuel/nav-state-react-router.git" target="_blank" rel="noopener noreferrer">https://github.com/ohansemmanuel/nav-state-react-router.git</a></code></p>
<p>移到目录中:</p>
<p>安装依赖项:</p>
<pre>cd nav-state-react-router</pre>
<p>或者</p>
<pre>yarn install</pre>
<p>然后运行应用程序:</p>
<pre>npm install</pre>
<p>或者</p>
<pre>yarn start</pre>
<p>该应用程序是一个基本的<a href="https://blog.logrocket.com/when-and-when-not-to-use-redux-41807f29a7fb/" target="_blank" rel="noopener">反应与Redux设置</a>。还包括一个非常简单的<code>react-router</code>设置。</p>
<pre>npm start</pre>
<p>在<code>containers/App.js</code>中，您将找到该应用程序中包含的六条路线。</p>
<p>下面是完整的代码表示:</p>
<p>每条路线都指向一个表情符号组件。<code>/quiet</code>渲染<code>KeepQuiet</code>组件。</p>
<pre>const App = () =&gt; (
  &lt;Router&gt;
    &lt;Switch&gt;
      &lt;Route exact <strong>path="/"</strong> component={AngryDude} /&gt;
      &lt;Route <strong>path="/quiet"</strong> component={<strong>KeepQuiet</strong>} /&gt;
      &lt;Route <strong>path="/smile"</strong> component={SmileLady} /&gt;
      &lt;Route <strong>path="/think"</strong> component={ThinkHard} /&gt;
      &lt;Route <strong>path="/thumbs"</strong> component={ThumbsUp} /&gt;
      &lt;Route <strong>path="/excited"</strong> component={BeExcited} /&gt;
    &lt;/Switch&gt;
  &lt;/Router&gt;
);</pre>
<p>下面是<code>KeepQuiet</code>组件的样子:</p>
<p>它是一个简单的功能组件，呈现一个<code>EmojiLand</code>组件。组件的构造在<code>components/EmojiLand.js</code>中。这很简单。你可以在GitHub 上<a href="https://github.com/ohansemmanuel/nav-state-react-router/blob/master/src/components/EmojiLand.js" target="_blank" rel="noopener noreferrer">看看。</a></p>
<pre>import React from "react";
import EmojiLand from "../components/EmojiLand";
import keepQuietImg from "../Images/keepquiet.png";
import emojiLand from "./emojiLand";

const KeepQuiet = ({ appState, handleEmojiAction }) =&gt; (
    &lt;EmojiLand
      EmojiBg="linear-gradient(120deg, #a6c0fe 0%, #f68084 100%)"
      EmojiImg={keepQuietImg}
      EmojiBtnText="Keep Calm and Stay Quiet."
      HandleEmojiAction={handleEmojiAction}
      appState={appState}
    /&gt;
  );

export default emojiLand(KeepQuiet);</pre>
<p>重要的是，它接受一些道具，如背景渐变、图像和按钮文本。输出的组件更精致。</p>
<p>请看一下上面代码块的最后一行。</p>
<p>更多来自LogRocket的精彩文章:</p><div class="code-block code-block-54">
<hr/>
<h3>右侧有一个高阶分量。它所做的就是确保当你点击任何表情组件中的一个按钮时，<a href="https://github.com/ohansemmanuel/nav-state-react-router/blob/master/src/containers/emojiLand.js" target="_blank" rel="noopener noreferrer">它会模拟一个虚假的动作</a>大约1000毫秒。请记住，实际上这可能是一个网络请求。</h3>

<hr/></div>
<pre><code>export default emojiLand(KeepQuiet);</code></pre>
<p><code>emojiLand</code>高阶组件通过将<code>appState</code>道具传递给表情符号组件来实现这一点。在这个例子中，<code>KeepQuiet</code></p>
<p>当第一次呈现任何表情组件时，<code>appState</code>是空字符串，<code>""</code>。大约1000ms后，<code>appState</code>变为<code>DO_SOMETHING_OVER</code>，其中<code>DO_SOMETHING_OVER</code>表示为常数，如下图所示。</p>
<p>在<code>constants/action-types</code>中:</p>
<p>这就是这个应用程序中每个表情符号组件的工作方式。</p>
<pre>export const DO_SOMETHING_OVER = "DO_SOMETHING_OVER";</pre>
<p>还要记住，在每条路线上，都会呈现一个单独的EmojiLand组件。</p>
<p><img data-attachment-id="40904" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-emojiland-component-angrydude-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1.png" data-orig-size="400,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router Reduct: AndryDude EmojiLand component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1.png" decoding="async" class="aligncenter size-full wp-image-40904 jetpack-lazy-image" src="../Images/f7486df6681222e26fce6887c63951df.png" alt="React Router Reduct: AndryDude EmojiLand Component" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1.png 400w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1-300x167.png 300w" data-lazy-sizes="(max-width: 400px) 100vw, 400px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1.png"/></p>
<p><img data-attachment-id="40848" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-smilelady-component-bequiet/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet.png" data-orig-size="400,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="EmojiLand component: Navigation with React Router and Redux" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet.png" decoding="async" class="aligncenter size-full wp-image-40848 jetpack-lazy-image" src="../Images/7e6e22f89d333e54a00cb29fa8574423.png" alt="EmojiLand Component: Navigation With React Router and Redux" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet.png 400w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet-300x167.png 300w" data-lazy-sizes="(max-width: 400px) 100vw, 400px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="40904" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-emojiland-component-angrydude-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1.png" data-orig-size="400,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router Reduct: AndryDude EmojiLand component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40904" src="../Images/f7486df6681222e26fce6887c63951df.png" alt="React Router Reduct: AndryDude EmojiLand Component" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1.png 400w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1-300x167.png 300w" sizes="(max-width: 400px) 100vw, 400px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-angrydude-1.png"/></noscript>
<figure><img data-attachment-id="40850" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-emojiland-component-beexcited/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited.png" data-orig-size="400,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="EmojiLand component: Navigation with React Router and Redux" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited.png" decoding="async" class="aligncenter size-full wp-image-40850 jetpack-lazy-image" src="../Images/2e8139e90e443131352430cecd9019a2.png" alt="EmojiLand Component: Navigation With React Router and Redux" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited.png 400w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited-300x167.png 300w" data-lazy-sizes="(max-width: 400px) 100vw, 400px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="40850" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-emojiland-component-beexcited/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited.png" data-orig-size="400,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="EmojiLand component: Navigation with React Router and Redux" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40850" src="../Images/2e8139e90e443131352430cecd9019a2.png" alt="EmojiLand Component: Navigation With React Router and Redux" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited.png 400w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited-300x167.png 300w" sizes="(max-width: 400px) 100vw, 400px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-beexcited.png"/></noscript></figure>
<figure><img data-attachment-id="40849" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-emojiland-component-bequiet/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet.png" data-orig-size="400,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="EmojiLand component: Navigation with React Router and Redux" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet.png" decoding="async" class="aligncenter size-full wp-image-40849 jetpack-lazy-image" src="../Images/b56b474daf0d37ab7a738db6a8f1eddf.png" alt="EmojiLand Component: Navigation With React Router and Redux" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet.png 400w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet-300x167.png 300w" data-lazy-sizes="(max-width: 400px) 100vw, 400px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="40849" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-emojiland-component-bequiet/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet.png" data-orig-size="400,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="EmojiLand component: Navigation with React Router and Redux" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40849" src="../Images/b56b474daf0d37ab7a738db6a8f1eddf.png" alt="EmojiLand Component: Navigation With React Router and Redux" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet.png 400w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet-300x167.png 300w" sizes="(max-width: 400px) 100vw, 400px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-emojiland-component-bequiet.png"/></noscript></figure>
<figure class="wp-caption alignnone"><figcaption class="wp-caption-text">AngryDude, BeExcited, &amp; BeQuiet</figcaption></figure>
<p>使用反应路由器和Redux进行重定向</p><noscript><img data-lazy-fallback="1" data-attachment-id="40848" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-smilelady-component-bequiet/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet.png" data-orig-size="400,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="EmojiLand component: Navigation with React Router and Redux" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40848" src="../Images/7e6e22f89d333e54a00cb29fa8574423.png" alt="EmojiLand Component: Navigation With React Router and Redux" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet.png 400w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet-300x167.png 300w" sizes="(max-width: 400px) 100vw, 400px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-smilelady-component-bequiet.png"/></noscript>
<figure><img data-attachment-id="40846" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-thumbsup-component-bequiet/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet.png" data-orig-size="400,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="EmojiLand component: Navigation with React Router and Redux" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet.png" decoding="async" class="aligncenter size-full wp-image-40846 jetpack-lazy-image" src="../Images/d79256a847342ecadfa8b01f1f3a5db2.png" alt="EmojiLand Component: Navigation With React Router and Redux" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet.png 400w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet-300x167.png 300w" data-lazy-sizes="(max-width: 400px) 100vw, 400px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="40846" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-thumbsup-component-bequiet/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet.png" data-orig-size="400,223" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="EmojiLand component: Navigation with React Router and Redux" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40846" src="../Images/d79256a847342ecadfa8b01f1f3a5db2.png" alt="EmojiLand Component: Navigation With React Router and Redux" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet.png 400w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet-300x167.png 300w" sizes="(max-width: 400px) 100vw, 400px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-thumbsup-component-bequiet.png"/></noscript></figure>
<figure class="wp-caption"><figcaption class="wp-caption-text">SmileLady, ThinkHard, and ThumbsUp</figcaption></figure>
<h2 id="redirect">假流程完成后，让我们假设您想要在EmojiLand应用程序中重定向/移动到另一个路由。</h2>
<p>首先，记住在到达回家的路线时，<code>AngryDude</code>组件被渲染。</p>
<p><img data-attachment-id="40832" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-angrydude-component-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2.png" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router Reduct: AndryDude EmojiLand component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2.png" decoding="async" class="aligncenter size-full wp-image-40832 jetpack-lazy-image" src="../Images/bc68f529fc84d31a86a57730795fd0c5.png" alt="React Router Reduct: AndryDude EmojiLand Component" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2-300x168.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2.png"/></p>
<p>处理重定向的更具声明性的方法是使用React-router中的<code>Redirect</code>组件。</p><noscript><img data-lazy-fallback="1" data-attachment-id="40832" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-angrydude-component-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2.png" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router Reduct: AndryDude EmojiLand component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40832" src="../Images/bc68f529fc84d31a86a57730795fd0c5.png" alt="React Router Reduct: AndryDude EmojiLand Component" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2-300x168.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-angrydude-component-2.png"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">The AngryDude component.</figcaption></figure>
<p>让我告诉你怎么做。</p>
<p>因为我们想从<code>AngryDude</code>组件重定向，首先，您在<code>containers/AngryDude.js</code>中导入<code>Redirect</code>组件，如下所示:</p>
<p>为了使重定向工作，它必须像常规组件一样呈现。在我们的特定示例中，当<code>appState</code>持有值<code>DO_SOMETHING_OVER</code>时，我们将进行重定向，即假动作已经完成。</p>
<pre>import { Redirect } from "react-router-dom";</pre>
<p>现在，这是代码:</p>
<p>现在，如果<code>appState</code>等于<code>DO_SOMETHING_OVER</code>，则渲染<code>Redirect</code>组件。</p>
<pre>const AngryDude = ({ appState, handleEmojiAction }) =&gt; {
    return <strong>appState === DO_SOMETHING_OVER ?</strong> (
<strong>&lt;Redirect to="/thumbs" /&gt;</strong>
    ) <strong>: </strong>(
      &lt;EmojiLand
        EmojiBg="linear-gradient(-180deg, #611A51 0%, #10096D 100%)"
        EmojiImg={angryDudeImg}
        EmojiBtnText="I'm so pissed. Click me"
        HandleEmojiAction={this._handleEmojiAction}
        appState={this.props.appState}
 /&gt;</pre>
<p>注意，一个必需的<code>to</code>属性被添加到<code>Redirect</code>组件中。这个道具需要知道重定向到哪里。</p>
<pre>&lt;Redirect <strong>to</strong>="/thumbs" /&gt;</pre>
<p>有了这些，下面是实际操作:</p>
<p><img data-attachment-id="40833" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-redirect-angrydude-thumbsup/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-angrydude-thumbsup.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Redirect to AngryDude and ThumbsUp" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-angrydude-thumbsup-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-angrydude-thumbsup.gif" decoding="async" class="aligncenter size-full wp-image-40833 jetpack-lazy-image" src="../Images/7510572796f4eb436800c718d02e8dc9.png" alt="React Router and Redux: Redirect to AngryDude and ThumbsUp" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-angrydude-thumbsup.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-angrydude-thumbsup.gif"/></p>
<p>如果对其他路由组件执行相同的操作，则可以成功地重定向所有路由:</p><noscript><img data-lazy-fallback="1" data-attachment-id="40833" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-redirect-angrydude-thumbsup/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-angrydude-thumbsup.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Redirect to AngryDude and ThumbsUp" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-angrydude-thumbsup-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-angrydude-thumbsup.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40833" src="../Images/7510572796f4eb436800c718d02e8dc9.png" alt="React Router and Redux: Redirect to AngryDude and ThumbsUp" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-angrydude-thumbsup.gif"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">Redirecting from “Angry” to “Thumbs up”</figcaption></figure>
<p><img data-attachment-id="40834" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-redirect-all-routes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-all-routes.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Redirect all routes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-all-routes-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-all-routes.gif" decoding="async" class="aligncenter size-full wp-image-40834 jetpack-lazy-image" src="../Images/b1c98876c36826b9bf9eab2b21ec8e5a.png" alt="React Router and Redux: Redirect All Routes" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-all-routes.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-all-routes.gif"/></p>
<p>很简单，对吧？</p><noscript><img data-lazy-fallback="1" data-attachment-id="40834" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-redirect-all-routes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-all-routes.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Redirect all routes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-all-routes-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-all-routes.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40834" src="../Images/b1c98876c36826b9bf9eab2b21ec8e5a.png" alt="React Router and Redux: Redirect All Routes" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-redirect-all-routes.gif"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">Redirecting through all the routes!</figcaption></figure>
<p>但是有一点问题，我将在下一节中解决这个问题。</p>
<p>避免因替换历史中的当前路由而导致的重定向</p>
<h3>我将打开一个新的浏览器，点击应用程序，但在某些时候，我会尝试返回，即使用后退浏览器按钮:</h3>
<p><img data-attachment-id="40835" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-go-back-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-go-back-homepage.gif" data-orig-size="720,458" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Navigate back to the homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-go-back-homepage-300x191.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-go-back-homepage.gif" decoding="async" class="aligncenter size-full wp-image-40835 jetpack-lazy-image" src="../Images/cd0422dee5dccdcacfc7e4612b1889bf.png" alt="React Router and Redux: Navigate Back to the Homepage" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-go-back-homepage.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-go-back-homepage.gif"/></p>
<p>请注意，当我单击后退按钮时，它不会返回到以前的路线，而是将我带回浏览器的主页。为什么？</p><noscript><img data-lazy-fallback="1" data-attachment-id="40835" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-go-back-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-go-back-homepage.gif" data-orig-size="720,458" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Navigate back to the homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-go-back-homepage-300x191.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-go-back-homepage.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40835" src="../Images/cd0422dee5dccdcacfc7e4612b1889bf.png" alt="React Router and Redux: Navigate Back to the Homepage" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-go-back-homepage.gif"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">Attempting to go back takes me back to the browser’s homepage</figcaption></figure>
<p>默认情况下，使用<code>Redirect</code>组件将替换浏览器历史堆栈中的当前位置。因此，即使我们循环了多条路线，这些路线也会在浏览器的“记录”中互相替换</p>
<p>对于浏览器，我们只访问了一条路线。因此，点击后退按钮把我带回了主页。这就像有一个数组，但不是推到数组，而是替换数组中的当前值。</p>
<p>不过，有一个解决办法。</p>
<p>组件<code>Redirect</code>可以接受一个<code>push</code>属性来取消这种行为。有了<code>push</code>道具，每条路线都被推到浏览器的历史堆栈中，不会被替换。</p>
<p>这在代码中是这样的:</p>
<p>这是结果。</p>
<pre>return appState === DO_SOMETHING_OVER ? (
    &lt;Redirect <strong>push</strong> to="/thumbs" /&gt;
  ) : (
    &lt;EmojiLand
      EmojiBg="linear-gradient(-180deg, #611A51 0%, #10096D 100%)"
      EmojiImg={angryDudeImg}
      EmojiBtnText="I'm so pissed. Click me"
      HandleEmojiAction={handleEmojiAction}
      appState={appState}
    /&gt;
  );</pre>
<p>请注意我们现在如何导航回以前访问过的路线！</p>
<figure class="wp-caption"><img decoding="async" src="../Images/063044eecd88c42895b3b433ca83ce89.png" data-height="796" data-width="1252" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*VJucGLA-Dw59KhBIMI1jBA.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*VJucGLA-Dw59KhBIMI1jBA.gif"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/063044eecd88c42895b3b433ca83ce89.png" data-height="796" data-width="1252" data-original-src="https://storage.googleapis.com/blog-images-backup/1*VJucGLA-Dw59KhBIMI1jBA.gif"/></noscript><figcaption class="wp-caption-text">Now, clicking the back button works just as expected 🙂</figcaption></figure>
<p>维护导航状态</p>
<h2 id="maintaining">当您从一条路线移动到另一条路线时，前一条路线中的变量不会被带到下一条路线。他们走了！</h2>
<p>是的，走了，除了你做一些工作。</p>
<p>有趣的是,<code>Redirect</code>组件使这变得非常容易。</p>
<p>与将字符串<code>to</code> prop传入<code>Redirect</code>相反，您也可以传入一个对象。</p>
<p><img data-attachment-id="40837" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/pass-object-redirect-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component.png" data-orig-size="720,225" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Passing the object redirect component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component-300x94.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component.png" decoding="async" class="aligncenter size-full wp-image-40837 jetpack-lazy-image" src="../Images/602f5d8f4f3046cb2dc00ea6457008d6.png" alt="Passing the Object Redirect Component" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component-300x94.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component.png"/></p>
<p>有趣的是，有了对象表示，还可以传入一个<code>state</code>对象。</p><noscript><img data-lazy-fallback="1" data-attachment-id="40837" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/pass-object-redirect-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component.png" data-orig-size="720,225" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Passing the object redirect component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component-300x94.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40837" src="../Images/602f5d8f4f3046cb2dc00ea6457008d6.png" alt="Passing the Object Redirect Component" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component-300x94.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/pass-object-redirect-component.png"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">You could also pass in an object to the Redirect component</figcaption></figure>
<p>在<code>state</code>对象中，您现在可以存储任何您希望带到被重定向到的路由的键值对。</p>
<p><img data-attachment-id="40838" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/adding-state-object/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object.png" data-orig-size="720,225" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding the state object" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object-300x94.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object.png" decoding="async" class="aligncenter size-full wp-image-40838 jetpack-lazy-image" src="../Images/66b0ab399cb45edb18dd34275bcb7ac2.png" alt="Adding the State Object" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object-300x94.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object.png"/></p>
<p>让我们看一个代码示例。</p><noscript><img data-lazy-fallback="1" data-attachment-id="40838" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/adding-state-object/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object.png" data-orig-size="720,225" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding the state object" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object-300x94.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40838" src="../Images/66b0ab399cb45edb18dd34275bcb7ac2.png" alt="Adding the State Object" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object-300x94.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/adding-state-object.png"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">Adding a State object within the <code>to</code> prop.</figcaption></figure>
<p>当从<code>AngryDude</code>组件重定向到<code>ThumbsUp</code>时，让我们将一些值传入状态字段。</p>
<p>这是我们之前看到的:</p>
<p>那要改成这样:</p>
<pre>&lt;Redirect push <strong>to="/thumbs"</strong> /&gt;</pre>
<p>现在，我已经传入了3个不同的键值对！<code>humanType</code>、<code>age</code>和<code>sex</code></p>
<pre>&lt;Redirect
      push
<strong>to={{
        pathname: "/thumbs",
        state: {
          humanType: "Cat Person",
          age: 12,
          sex: "none"
        }
      }}</strong>
    /&gt;</pre>
<p>但是在重定向到<code>/thumbs</code>路由时，我如何接收这些值呢？</p>
<p>对于路由组件，react-router提供了一个特定的<code>location</code>属性。在这个<code>location</code>道具中，你可以像这样访问状态对象，<code>location.state</code>或者<code>this.props.location.state</code></p>
<p>注意:路由组件是由反应路由器的<route>组件呈现的组件。他们通常在签名中，<route component="{Component}"/></route></p>
<blockquote><p>这里有一个例子，我记录了在新的route，<code>/thumbs</code>中接收到的状态对象，即在新呈现的<code>Thumbs</code>组件中</p></blockquote>
<p>注意位置道具是如何被解构的，然后就是<code>console.log(location.state)</code></p>
<pre>const ThumbsUp = ({ appState, handleEmojiAction, <strong>location</strong> }) =&gt; {
<strong>console.log(location.state);</strong>
  return appState === DO_SOMETHING_OVER ? (
    &lt;Redirect push to="/quiet" /&gt;
  ) : (
    &lt;EmojiLand
      EmojiBg="linear-gradient(-225deg, #DFFFCD 0%, #90F9C4 48%, #39F3BB 100%)"
      EmojiImg={thumbsUpImg}
      EmojiBtnText="You rock. Thumbs up!"
      HandleEmojiAction={handleEmojiAction}
      appState={appState}
    /&gt;
  );
};</pre>
<p>经过重定向和开发控制台检查后，状态对象确实就在那里！</p>
<p><img data-attachment-id="40844" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-dev-console/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Dev console" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif" decoding="async" class="aligncenter size-full wp-image-40844 jetpack-lazy-image" src="../Images/6dfb9e7354f6a277b981b0c5263656b8.png" alt="React Router and Redux: Dev Console" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif"/></p>
<p>您甚至可以更进一步，基于传入的状态实际呈现一些UI组件。</p><noscript><img data-lazy-fallback="1" data-attachment-id="40844" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-dev-console/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Dev console" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40844" src="../Images/6dfb9e7354f6a277b981b0c5263656b8.png" alt="React Router and Redux: Dev Console" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">The state object received and logged in the new `/thumbs` route!</figcaption></figure>
<p>我是这样做的:</p>
<p><img data-attachment-id="40840" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/values-from-location-state-object/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object.png" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Values from the location state object" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object.png" decoding="async" class="aligncenter size-full wp-image-40840 jetpack-lazy-image" src="../Images/67f2f6abd83aa4f83017f02fc7f5606b.png" alt="Values From the Location State Object" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object-300x168.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object.png"/></p>
<p>通过获取传递到<code>ThumbsUp</code>中的状态，我对其进行了映射，并呈现了按钮下方的值。如果你关心我是如何做到的，看看<code><a href="https://github.com/ohansemmanuel/nav-state-react-router/blob/master/src/components/EmojiLand.js" target="_blank" rel="noopener noreferrer">components/EmojiLand.js</a></code>中的源代码。</p><noscript><img data-lazy-fallback="1" data-attachment-id="40840" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/values-from-location-state-object/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object.png" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Values from the location state object" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40840" src="../Images/67f2f6abd83aa4f83017f02fc7f5606b.png" alt="Values From the Location State Object" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object-300x168.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/values-from-location-state-object.png"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">Have a look at the text below the button. The values have been grabbed from the location state object!</figcaption></figure>
<p>现在我们已经取得了一些不错的进展！</p>
<p>在现实世界中使用React路由器和Redux</p>
<h2 id="realworld">这很酷，但在现实世界中实用吗？</h2>
<p>有许多用例，但一个非常常见的是在表格中呈现结果列表。但是，该表中的每一行都是可单击的，单击某一行时，您会希望显示有关所单击值的更多信息。</p>
<p>您可以使用这里的概念重定向到新路由，还可以将一些值从表行传递到新路由！所有这些都是通过在<code>to</code> prop中使用重定向的状态对象来实现的！</p>
<p>但是等等——还有另一个解决方案！</p>
<p>在开发领域，通常有多种方法来解决一个问题。我希望这篇文章尽可能实用，所以我将向您展示在路线之间导航的另一种可能的方法。</p>
<p>假设我们想在执行某个操作后从<code>/thumbs</code>路由重定向到<code>quiet</code>路由。在这种情况下，我们不想使用<code>Redirect</code>组件。</p>
<p>你会怎么做？</p>
<p>与我们呈现<code>Redirect</code>组件的前一个解决方案不同，您可以使用下面显示的稍微更强制性的方法:</p>
<p>或者</p>
<pre>history.push("/quiet)</pre>
<p>好吧，但是这个<code>history</code>物体是从哪里来的？</p>
<pre>this.props.history.push("/quiet")</pre>
<p>就像前面例子中的<code>location</code>一样，react-router也将一个<code>history</code> prop传递给路由组件。</p>
<p>以下是我们在<code>containers/Thumbs.js</code>中看到的:</p>
<p>现在，我们可以像这样使用<code>history</code>对象:</p>
<pre>const ThumbsUp = ({ appState, handleEmojiAction, location }) =&gt; {
  return appState === DO_SOMETHING_OVER ? (
    &lt;Redirect push to="/quiet" /&gt;
  ) : (
    &lt;EmojiLand
      EmojiBg="linear-gradient(-225deg, #DFFFCD 0%, #90F9C4 48%, #39F3BB 100%)"
      EmojiImg={thumbsUpImg}
      EmojiBtnText="You rock. Thumbs up!"
      HandleEmojiAction={handleEmojiAction}
      appState={appState}
      locationState={location.state}
    /&gt;
  );
};</pre>
<p>现在，结果是一样的:</p>
<pre>const ThumbsUp = ({ appState, handleEmojiAction, location, <strong>history</strong> }) =&gt; {
  if (appState === DO_SOMETHING_OVER) {
<strong>history.push("/quiet");</strong>
  }
  return (
    &lt;EmojiLand
      EmojiBg="linear-gradient(-225deg, #DFFFCD 0%, #90F9C4 48%, #39F3BB 100%)"
      EmojiImg={thumbsUpImg}
      EmojiBtnText="You rock. Thumbs up!"
      HandleEmojiAction={handleEmojiAction}
      appState={appState}
      locationState={location.state}
    /&gt;
  );
};</pre>
<p><img data-attachment-id="40841" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/using-history-prop/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/using-history-prop.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Using the history prop" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/using-history-prop-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/using-history-prop.gif" decoding="async" class="aligncenter size-full wp-image-40841 jetpack-lazy-image" src="../Images/8a65d4a051968a8180de3e28c93be8d3.png" alt="Using the History Prop" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/using-history-prop.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/using-history-prop.gif"/></p>
<p>正如所料，重定向仍然是可能的。</p><noscript><img data-lazy-fallback="1" data-attachment-id="40841" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/using-history-prop/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/using-history-prop.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Using the history prop" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/using-history-prop-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/using-history-prop.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40841" src="../Images/8a65d4a051968a8180de3e28c93be8d3.png" alt="Using the History Prop" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/using-history-prop.gif"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">Using the history prop works just fine</figcaption></figure>
<p>需要注意的是，您也可以像这样传入一些状态值:</p>
<p>只需将第二个对象参数传递给<code>history.push</code>函数。</p>
<pre>history.push("/quiet", <strong>{
 hello: "state value"
}</strong>)</pre>
<p>最棒的是，我们开箱即用。我们不需要做任何多余的工作？</p>
<p>我们所要做的就是学习可用的API。这很好，这解释了为什么<code>react-router</code>和<code>redux</code>开箱即可正常工作。</p>
<p>这个app用的是<code>redux</code>，但这不是问题。</p>
<p>我们的方法有什么问题吗？</p>
<h3>到目前为止，我们讨论的方法没有任何问题。他们工作得很好！然而，有一些注意事项，根据您喜欢的工作方式和您正在进行的项目，这些方法可能适合也可能不适合。</h3>
<p>请注意，我在大型项目中使用过以前的模式，同样，它们工作得很好。也就是说，一些Redux纯粹主义者更喜欢通过调度动作来导航路线，因为这是引发状态变化的主要方式。其他人更喜欢将路由数据与Redux存储同步，即，将路由数据保存在Redux存储中。然后有些人只是想在他们的Redux devtools中享受对时间旅行调试的支持，就像你在各种路线上导航一样。</p>
<p>如果React Router和Redux之间没有更深入的集成，这一切都是不可能的。</p>
<p>让我们来探索如何做到这一点。</p>
<p>什么是<code>conntected-react-router</code>？</p>
<h2 id="connected">在过去，react-router为此提供了库，<a href="https://github.com/reacttraining/react-router/tree/master/packages/react-router-redux" target="_blank" rel="noopener noreferrer"> react-router-redux </a>。然而，在撰写本文时，该项目已被否决，不再维护。</h2>
<p><img data-attachment-id="40842" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-project-depreciated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated.png" data-orig-size="720,420" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Project depreciated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated.png" decoding="async" class="aligncenter size-full wp-image-40842 jetpack-lazy-image" src="../Images/2a4dce95103d849f407e47e9239efbb4.png" alt="React Router and Redux: Project Depreciated" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated-300x175.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated.png"/></p>
<p><code>react-router-redux</code>维护人员建议使用<a href="https://github.com/supasate/connected-react-router" target="_blank" rel="noopener">连接的反应路由器</a>。</p><noscript><img data-lazy-fallback="1" data-attachment-id="40842" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-project-depreciated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated.png" data-orig-size="720,420" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Project depreciated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40842" src="../Images/2a4dce95103d849f407e47e9239efbb4.png" alt="React Router and Redux: Project Depreciated" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated-300x175.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-project-depreciated.png"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">The project is deprecated, as noted on the <a href="https://github.com/reacttraining/react-router/tree/master/packages/react-router-redux" target="_blank" rel="noopener noreferrer">react-router-redux github repo</a>. <span>You can still use it if you want, but you may have some fears using a deprecated library in production.</span></figcaption></figure>
<p><a href="https://github.com/supasate/connected-react-router" target="_blank" rel="noopener">连接的React路由器</a>是React路由器v4和v5的Redux绑定。它通过单向流将路由器状态与Redux store同步，并使用<a href="https://github.com/gaearon/react-hot-loader" target="_blank" rel="noopener"> <code>react-hot-loader</code> </a>来促进功能组件的热重装，同时保留状态。</p>
<p>让我们看看这是如何工作的，以及我们可以从整合到我们的项目Emojiland <em>中学到什么。</em></p>
<p>在你的应用中实现Redux？用LogRocket跟踪Redux状态和动作</p>
<div class="inline-plug cro19">
<h2>调试React应用程序可能很困难，尤其是在有复杂状态的情况下。如果您对监视和跟踪生产中所有用户的Redux状态感兴趣，请尝试LogRocket 。<a class="signup" href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer"><img data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/40b9ce190700766b5f28f13a5f339744.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/8963854-687474703a2f2f692e696d6775722e636f6d2f696147547837412e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/8963854-687474703a2f2f692e696d6775722e636f6d2f696147547837412e706e67.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" loading="lazy" class="alignnone size-full wp-image-46" src="../Images/40b9ce190700766b5f28f13a5f339744.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/8963854-687474703a2f2f692e696d6775722e636f6d2f696147547837412e706e67.png"/></noscript></a><a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a></h2>
<p>LogRocket 就像是网络应用的DVR，记录下你网站上发生的每一件事。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p>
<p>LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p>现代化您调试React应用的方式—<a class="signup" href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p>
<p>集成连接的React路由器</p>
</div>
<h3>首先要做的是Redux商店。</h3>
<p><strong> 1。创建一个历史对象</strong></p>
<p>从技术上讲，有一个DOM history对象用于操纵浏览器的历史会话。</p>
<p>让我们以编程方式自己创建一个。</p>
<p>为此，从<code>history</code>导入<code>createBrowserHistory</code></p>
<p>在<code>store/index.js</code>中:</p>
<p><code>history</code>是<code>react-router-dom</code>包的一个依赖项，当你在应用中使用react-router时，它可能已经安装好了。</p>
<pre>...
import { createBrowserHistory } from 'history' 
...</pre>
<p>导入<code>createBrowserHistory</code>后，创建如下历史对象:</p>
<p>还在<code>store/index.js</code>档。</p>
<pre>..
const history = createBrowserHistory()</pre>
<p>在此之前，<code>store</code>的创建非常简单，就像这样:</p>
<p>这里的<code>reducer</code>指的是<code>reducers/index.js</code>中的一个reducer函数，但这种情况不会很快出现。</p>
<pre>const store = createStore(reducer);</pre>
<p><strong> 2。缠绕根部减速器</strong></p>
<p>从<code>connected-react-router</code>库中导入以下辅助函数</p>
<p>现在必须如下图所示包装根变径管:</p>
<pre>import { connectRouter } from 'connected-react-router'</pre>
<p>现在，缩减器将跟踪路由器的状态。别担心，你马上就会明白这意味着什么。</p>
<pre>const store = createStore(<strong>connectRouter(history)(reducer)</strong>);</pre>
<p>为了查看到目前为止我们所做的效果，在<code>index.js</code>中，我将redux商店导出到全球，如下所示:</p>
<p>现在，在浏览器控制台中，您可以使用<code>store.getState()</code>检查redux状态对象中的内容</p>
<pre>window.store = store;</pre>
<p>这就是实际情况:</p>
<p><img data-attachment-id="40844" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-dev-console/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Dev console" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif" decoding="async" class="aligncenter size-full wp-image-40844 jetpack-lazy-image" src="../Images/6dfb9e7354f6a277b981b0c5263656b8.png" alt="React Router and Redux: Dev Console" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif"/></p>
<p>如您所见，redux商店中现在有了一个<code>router</code>字段！该<code>router</code>字段将始终通过一个位置对象保存当前路线的信息，例如<code>pathname</code>、<code>state</code>等。</p><noscript><img data-lazy-fallback="1" data-attachment-id="40844" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-dev-console/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router and Redux: Dev console" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40844" src="../Images/6dfb9e7354f6a277b981b0c5263656b8.png" alt="React Router and Redux: Dev Console" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-dev-console.gif"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">Looking in the dev console for the <code>router</code> field now in the Redux state</figcaption></figure>
<p>我们还没完。</p>
<p>为了分派路由动作，我们需要从<code>connected-react-router</code>库中应用一个定制的中间件。</p>
<p>这将在下面解释</p>
<p><strong> 3。包括一个定制中间件</strong></p>
<p>要包含用于处理调度动作的定制中间件，从库中导入所需的<code>routerMiddleware</code>中间件:</p>
<p>然后使用redux的<code>applyMiddleware</code>功能:</p>
<pre>...
import { connectRouter, <strong>routerMiddleware</strong> } from 'connected-react-router'</pre>
<p>现在，我们差不多完成了。只差一步了。</p>
<pre>... 
import { createStore, <strong>applyMiddleware</strong> } from "redux";
...</pre>
<pre>const store = createStore(
  connectRouter(history)(reducer),
<strong>applyMiddleware(routerMiddleware(history))</strong>
);</pre>
<p><strong> 4。使用连接的路由器！</strong></p>
<p>记住，react-redux给了我们一个<code>Route</code>组件。然而，我们需要将这些<code>Route</code>组件包装在来自<code>connected-react-router</code>库的<code>ConnectedRouter</code>组件中。</p>
<p>方法如下:</p>
<p>首先，在<code>index.js</code>中导入<code>ConnectedRouter</code>组件。</p>
<p>下面是<code>index.js</code>文件的渲染函数:</p>
<pre>import { ConnectedRouter } from 'connected-react-router' 
...</pre>
<p>记住<code>App</code>在应用中渲染不同的路线。</p>
<pre>render(
  &lt;Provider store={store}&gt;
    &lt;App /&gt;
  &lt;/Provider&gt;,
  document.getElementById("root")
);</pre>
<p>现在，在<code>index.js</code>中，用<code>ConnectedRouter</code>组件包裹<code>App</code>组件。<code>ConnectedRouter</code>组件应仅次于<code>react-router</code>中的<code>Provider</code>组件</p>
<pre>const App = () =&gt; (
  &lt;Router&gt;
    &lt;Switch&gt;
      &lt;Route exact path="/" component={AngryDude} /&gt;
      &lt;Route path="/quiet" component={KeepQuiet} /&gt;
      &lt;Route path="/smile" component={SmileLady} /&gt;
      &lt;Route path="/think" component={ThinkHard} /&gt;
      &lt;Route path="/thumbs" component={ThumbsUp} /&gt;
      &lt;Route path="/excited" component={BeExcited} /&gt;
    &lt;/Switch&gt;
  &lt;/Router&gt;
);</pre>
<p>我的意思是:</p>
<p>还有一件事！</p>
<pre>render(
  &lt;Provider store={store}&gt;
<strong> &lt;ConnectedRouter&gt;</strong>
      &lt;App /&gt;
<strong>&lt;/ConnectedRouter&gt;</strong>
  &lt;/Provider&gt;,
  document.getElementById("root")
);</pre>
<p>现在，应用程序不会像预期的那样工作，因为<code>ConnectedRouter</code>需要一个<code>history</code>道具，即我们之前创建的历史对象。</p>
<p><img data-attachment-id="40845" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error.png" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Error Message produced by React Router and Redux" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error.png" decoding="async" class="aligncenter size-full wp-image-40845 jetpack-lazy-image" src="../Images/a4bd5c7e2dee555dba3071bee45af1ae.png" alt="Error Message Produced By React Router and Redux" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error-300x168.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error.png"/></p>
<p>因为我们在多个地方需要同一个对象，所以我们需要它作为一个导出模块。</p><noscript><img data-lazy-fallback="1" data-attachment-id="40845" data-permalink="https://blog.logrocket.com/react-router-with-redux-navigation-state/react-router-redux-error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error.png" data-orig-size="720,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Error Message produced by React Router and Redux" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-40845" src="../Images/a4bd5c7e2dee555dba3071bee45af1ae.png" alt="Error Message Produced By React Router and Redux" srcset="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error.png 720w, https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error-300x168.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/07/react-router-redux-error.png"/></noscript>
<figure class="wp-caption"><figcaption class="wp-caption-text">The app now throws this error.</figcaption></figure>
<p>快速解决方法是创建一个新文件<code>store/history.js</code></p>
<p>现在，这个导出的<code>history</code>对象将在两个需要它的地方使用。</p>
<pre>import { createBrowserHistory } from "history";
const history = createBrowserHistory();</pre>
<pre><strong>export default history;</strong></pre>
<p>在<code>index.js</code>中是这样导入的:</p>
<p>然后传递给如下所示的<code>ConnectedRouter</code>组件:</p>
<pre>import history from "./store/history";</pre>
<p>这样，设置就完成了，应用程序运行了——没有我们之前看到的讨厌的错误！</p>
<pre>render(
  &lt;Provider store={store}&gt;
    &lt;ConnectedRouter <strong>history={history}</strong>&gt;
      &lt;App /&gt;
    &lt;/ConnectedRouter&gt;
  &lt;/Provider&gt;,
  document.getElementById("root")
);</pre>
<p>请记住，我只设置了<code>connected-react-router</code>，但是我鼓励你查看这个库的更高级的用法。</p>
<p>你可以用<code>connected-react-router</code>库做更多的事情，其中大部分都记录在官方FAQ的<a href="https://github.com/supasate/connected-react-router/blob/master/FAQ.md#how-to-navigate-with-redux-action" target="_blank" rel="noopener noreferrer">中。此外，如果您有一个更健壮的Redux devtools设置和一个日志记录中间件，一定要利用时间旅行和动作日志记录！</a></p>
<p>结论</p>
<h2>我希望这和我一样有趣！</h2>
<p>如果你有任何问题，一定要在评论区提出来，我很乐意帮忙。</p>
<p>去造些牛逼的东西，我一会儿来找你！</p>
<p>Go build something awesome, and I’ll catch you later!</p>
<hr/>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>