<html>
<head>
<title>Introduction to treat - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>treat - LogRocket博客简介</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/introduction-to-treat/#0001-01-01">https://blog.logrocket.com/introduction-to-treat/#0001-01-01</a></blockquote><div><article class="article-post">
<p>自从脸书工程师Christopher Chedeau在2014年推出CSS-in-JS以来，开发人员社区已经广泛采用了CSS-in-JS。CSS-in-JS模式的主要好处是您可以利用JavaScript模块化方法来维护您的CSS文件。</p>
<p>编写可伸缩CSS的一个问题是，您编写的每个规则都将应用于整个项目。这些全局样式规则有时会无意中相互覆盖，这会破坏您的应用程序设计。CSS-in-JS模式使您能够在本地自动确定样式的范围，以确保只有应用程序的相关部分受到影响。</p>
<p>但是CSS-in-JS不是没有代价的。它要求你在运行时执行你的风格，当浏览器下载你的JavaScript包时。它还将样式代码放入捆绑文件中，该文件的大小会随着应用程序的增长而增长。</p>
<p>如果你能在模块级编写CSS，同时将运行时间减少到最低限度——想象一下可能性吧！这就是<a href="https://seek-oss.github.io/treat/" target="_blank" rel="noopener noreferrer">治疗</a>的用武之地。</p>
<h2>什么是款待？</h2>
<p>treat是一个轻量级的CSS-in-JS库，它在构建时执行您的样式代码并将其注入到您的应用程序头中。它消除了在JavaScript包中包含样式代码的需要。更重要的是，treat支持TypeScript和IE 11等传统浏览器的类型安全。</p>
<p>treat是框架不可知的，这意味着你可以将它与任何前端库一起使用，从Angular到Vue，再到React。</p>
<p>只有一个警告:treat要求你为你的模块捆绑器使用webpack。不支持Rollup和包等其他打包程序。</p>
<h2 id="gettingstartedwithtreatinreact">React中的treat入门</h2>
<p>让我们看看treat在React中是如何工作的。为了跟进，您可以使用这个最小的React样板文件。我们将避免使用Create React应用程序进行引导，因为它有一个庞大的webpack配置，编辑起来很混乱。</p>
<p>首先，安装来自NPM的treat包。</p>
<pre>npm install treat
</pre>
<p>接下来，编辑你的webpack配置以包含treat的webpack插件，它会自动处理所有以<code>*.treat.js</code>格式编写的文件，并将它们注入到你的页面中。</p>
<pre>const TreatPlugin = require('treat/webpack-plugin');

module.exports = {
  plugins: [
    new TreatPlugin()
  ]
};
</pre>
<p>这就是你在React应用中使用treat所需的全部内容。让我们通过使用<code>treat.js</code>扩展创建一个样式来测试它。我把这个命名为<code>Button.treat.js</code>。</p>
<pre>import { style } from 'treat';

export const Button = style({
  cursor: 'pointer',
  backgroundColor: 'blue',
  marginLeft: 10,
  height: 28,
  color: 'white',
  borderRadius: 4,
  borderWidth: 0,
  padding: '0 15px',
  ':hover': {
    backgroundColor: 'green'
  },
});
</pre>
<p>在上面的代码中，导入了<code>style</code>函数，以便您可以编写单独的样式规则。</p>
<p><code>Button</code>的样式现在已经可以在React应用程序中使用了，所以让我们编写一个简单的组件来呈现按钮。添加样式作为其<code>className</code>。</p>
<pre>import React from 'react';
import ReactDOM from 'react-dom';
import {Button} from './Button.treat';

function App() {
  return (
    &lt;button className={Button}&gt;Like&lt;/button&gt;
  );
}

ReactDOM.render(&lt;App/&gt;,
  document.querySelector('#root'));
</pre>
<p>现在，用<code>npm run start</code>运行你的React应用，在<a href="http://localhost:8080/" rel="nofollow"> http://localhost:8080/ </a>上打开你的浏览器。您将看到按钮元素是用来自<code>Button.treat.js</code>的样式呈现的。如果您检查HTML，您会看到treat为样式注入了一个自动生成的后缀。</p>
<p><img data-attachment-id="18910" data-permalink="https://blog.logrocket.com/introduction-to-treat/button-style-treat/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat.png" data-orig-size="624,311" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Button element style rendered with treat" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat-300x150.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat.png" decoding="async" class="aligncenter size-full wp-image-18910 jetpack-lazy-image" src="../Images/f94dfea4a1fce78cd905154bd59374ac.png" alt="Button Element Style Rendered With Treat" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat.png 624w, https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat-300x150.png 300w" data-lazy-sizes="(max-width: 624px) 100vw, 624px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="18910" data-permalink="https://blog.logrocket.com/introduction-to-treat/button-style-treat/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat.png" data-orig-size="624,311" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Button element style rendered with treat" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat-300x150.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-18910" src="../Images/f94dfea4a1fce78cd905154bd59374ac.png" alt="Button Element Style Rendered With Treat" srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat.png 624w, https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat-300x150.png 300w" sizes="(max-width: 624px) 100vw, 624px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/button-style-treat.png"/></noscript>
<p>您还可以通过使用<code>mini-css-extract-plugin</code>将样式导出到它自己的静态CSS文件中。</p>
<p>首先，安装webpack插件:</p>
<pre>npm install mini-css-extract-plugin
</pre>
<p>接下来，编辑您的webpack配置并为您的<code>TreatPlugin</code>定义<code>outputLoaders</code>选项以使用<code>MiniCssExtractPlugin.loader</code>。</p>
<pre>const TreatPlugin = require('treat/webpack-plugin');
const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
  plugins: [
    new TreatPlugin({
      outputLoaders: [MiniCssExtractPlugin.loader]
    }),
    new MiniCssExtractPlugin()
  ]
};
</pre>
<p>再次检查页面，您会看到<code>main.css</code>文件是由treat生成的，其中包含了您所有的CSS-in-JS代码。</p>
<p><img data-attachment-id="18909" data-permalink="https://blog.logrocket.com/introduction-to-treat/main-css-file/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file.png" data-orig-size="624,300" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="main.css file" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file-300x144.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file.png" decoding="async" class="aligncenter size-full wp-image-18909 jetpack-lazy-image" src="../Images/406bb23646eacef81dd484c3e3dd4fac.png" alt="main.css File" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file.png 624w, https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file-300x144.png 300w" data-lazy-sizes="(max-width: 624px) 100vw, 624px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="18909" data-permalink="https://blog.logrocket.com/introduction-to-treat/main-css-file/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file.png" data-orig-size="624,300" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="main.css file" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file-300x144.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-18909" src="../Images/406bb23646eacef81dd484c3e3dd4fac.png" alt="main.css File" srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file.png 624w, https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file-300x144.png 300w" sizes="(max-width: 624px) 100vw, 624px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/main-css-file.png"/></noscript>
<p>因为treat不使用任何CSS自定义属性(例如CSS变量)，所以该样式甚至可以在IE 11中运行。如果您的应用程序使用TypeScript，您可以使用<code>*.treat.ts</code>文件格式用TS代码编写CSS。</p>
<h2 id="conclusion">结论</h2>
<p>treat提供了一种独特的方法来解决CSS-in-JS运行时开销，同时提供遗留浏览器支持和类型安全。它在构建过程中生成一个静态CSS文件，并从最终的包中删除CSS-in-JS代码。它还支持伪元素和CSS主题化。最棒的是，treat为React提供了一个专用的API，并支持服务器端渲染和束分裂。</p>
<p>如果你有兴趣了解更多，请查看官方的<a href="https://seek-oss.github.io/treat/" target="_blank" rel="noopener noreferrer"> treat文档</a>。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>