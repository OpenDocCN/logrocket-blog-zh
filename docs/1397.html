<html>
<head>
<title>Introduction to Visx - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Visx - LogRocket博客简介</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/introduction-to-visx/#0001-01-01">https://blog.logrocket.com/introduction-to-visx/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Visx是Airbnb开发的基于React的数据可视化工具集合。Visx代表visualization component，它不是一个可视化库，而是一个原语或组件的集合，可以根据项目的需求混合在一起创建一个自定义的可视化库。</p>
<p>虽然构建在流行的D3可视化库之上，但是Visx将DOM操作工作委托给了React库。同时，D3主要用于计算。这样做的好处是减少了两个库争夺DOM控制权时可能出现的错误。</p>
<p>Visx并不固执己见，这意味着它可以适应任何React应用程序，而不管其架构如何。也是纯React，也就是说简单易学。此外，您可以随时从Visx工具箱中导入您需要的内容，从而保持您的代码库小而高效。</p>
<p>Visx非常稳定可靠。它的开发始于3年多前的Airbnb，唯一的目标是统一整个公司的可视化堆栈。它已经在Airbnb内部使用了2年多。</p>
<h2>与其他可视化库的比较</h2>
<p>根据Airbnb工程团队的说法，Visx的主要目标是性能、可学性和表现力。在撰写本文时，这是一个非常罕见的组合，在任何其他基于React的前端可视化库中都不存在。</p>
<p>虽然D3在React中构建表达可视化方面是个老手，但它有一个非常陡峭的学习曲线。React开发人员不能仅仅根据以前的React经验就开始使用它。还有其他可视化工具可以解决可学性的问题，比如React-vis，但是这是以牺牲表达能力和性能为代价的。因此，Visx不是Airbnb漫无目的的展示工程实力。它实际上为构建可视化应用程序的React工程师解决了一个巨大的问题。</p>
<h3>Visx入门</h3>
<p>开始使用Visx相当容易。您只需熟悉Visx组件及其属性。这些部件是正常的反应部件。</p>
<p>在本例中，我们将构建一个垂直堆积条形图，显示三个欧洲城市(巴黎、伦敦和柏林)14天的日平均气温。该代码可在<a href="https://github.com/EniolaOluwa/visx-chart" target="_blank" rel="noopener"> Github </a>上获得。</p>
<figure id="attachment_30648" aria-describedby="caption-attachment-30648" class="wp-caption aligncenter"><img data-attachment-id="30648" data-permalink="https://blog.logrocket.com/introduction-to-visx/bar-graph/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph.png" data-orig-size="2558,1520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="bar-graph" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-300x178.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-1024x608.png" decoding="async" class="wp-image-30648 jetpack-lazy-image" src="../Images/04ee8cd482004749958f7067fd79a80b.png" alt="Bar chart built with Visx." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph.png 2558w, https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-300x178.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-1024x608.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-768x456.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-1536x913.png 1536w, https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-2048x1217.png 2048w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="30648" data-permalink="https://blog.logrocket.com/introduction-to-visx/bar-graph/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph.png" data-orig-size="2558,1520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="bar-graph" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-300x178.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-1024x608.png" decoding="async" loading="lazy" class="wp-image-30648" src="../Images/04ee8cd482004749958f7067fd79a80b.png" alt="Bar chart built with Visx." srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph.png 2558w, https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-300x178.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-1024x608.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-768x456.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-1536x913.png 1536w, https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph-2048x1217.png 2048w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/bar-graph.png"/></noscript><figcaption id="caption-attachment-30648" class="wp-caption-text">The final bar chart we’ll build with Visx.</figcaption></figure>
<h2>装置</h2>
<p>安装过程的第一步是安装create-react-app样板文件。运行<code>npx create-react-app visx-chart</code>开始。</p>
<p>下一步是安装Visx包。因为Visx是一个原语集合，所以将安装相当多的包，作为我们今天要创建的图表的构建块。</p>
<p>转到项目的根目录，运行下面的命令来安装软件包。如果你使用<code>npm</code>来管理你的应用程序包，记住用<code>npm install</code>替换<code>yarn add</code>。</p>
<pre>yarn add @visx/shape @visx/group @visx/grid @visx/axis @visx/scale @visx/tooltip @visx/legend @visx/responsive</pre>
<p>以下是每个已安装软件包的用途摘要:</p>
<p><code>@visx/shape</code>包含数据可视化中使用的不同形状。对于这个示例项目，堆叠的垂直条将从这个包中获得。</p>
<p><code>@visx/group</code>是SVG <code>&lt;g /&gt;</code>元素的一个更简单的实现，用于对其他SVG对象进行分组。</p>
<p><code>@visx/grid</code>包含用于在图表中创建网格线的组件。</p>
<p><code>@visx/axis</code>包含在为图表绘制轴时使用的组件。它非常灵活，因此可以定制。</p>
<p><code>@visx/scale</code>是一个“帮助您将数据值映射到图形所需的物理像素大小的函数”的集合；根据Visx <a href="https://airbnb.io/visx/docs/scale" target="_blank" rel="noopener">文档</a>。</p>
<p>包含钩子、组件和其他工具来简化可视化工具提示的添加。</p>
<p>用于向可视化添加不同类型图例的组件集合。</p>
<p>软件包安装过程的最后一步是运行<code>yarn add d3-time-format</code>来安装d3-time-format软件包，该软件包有助于将要显示的数据中的日期和时间转换为首选格式。</p>
<p>使可视化反应灵敏。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<h2>图表组件</h2>
<p>图表组件包含所有逻辑和组件，这些逻辑和组件放在一起生成最终的垂直堆叠条形图。在应用程序的<code>src</code>目录中创建一个名为<code>TemperatureBarStack.js</code>的文件，并将下面的代码粘贴到其中:</p>
<pre>import React from "react";
import { BarStack } from "@visx/shape";
import { Group } from "@visx/group";
import { Grid } from "@visx/grid";
import { AxisBottom } from "@visx/axis";
import { scaleBand, scaleLinear, scaleOrdinal } from "@visx/scale";
import { timeFormat, timeParse } from "d3-time-format";
import { useTooltip, useTooltipInPortal, defaultStyles } from "@visx/tooltip";
import { LegendOrdinal } from "@visx/legend";
import "./index.css";

const purple1 = "#6c5efb";
const purple2 = "#c998ff";
const purple3 = "#a44afe";
const background = "#eaedff";
const defaultMargin = { top: 40, right: 0, bottom: 0, left: 0 };
const tooltipStyles = {
  ...defaultStyles,
  minWidth: 60,
  backgroundColor: "rgba(0,0,0,0.9)",
  color: "white"
};

const data = [
  {
    date: "2020-10-01",
    London: "60",
    Paris: "68",
    Berlin: "61"
  },
  {
    date: "2020-10-02",
    London: "57",
    Paris: "58",
    Berlin: "62"
  },
  {
    date: "2020-10-03",
    London: "59",
    Paris: "57",
    Berlin: "72"
  },
  {
    date: "2020-10-04",
    London: "52",
    Paris: "59",
    Berlin: "68"
  },
  {
    date: "2020-10-05",
    London: "63",
    Paris: "57",
    Berlin: "63"
  },
  {
    date: "2020-10-06",
    London: "61",
    Paris: "62",
    Berlin: "61"
  },
  {
    date: "2020-10-07",
    London: "61",
    Paris: "64",
    Berlin: "61"
  },
  {
    date: "2020-10-08",
    London: "64",
    Paris: "66",
    Berlin: "60"
  },
  {
    date: "2020-10-09",
    London: "58",
    Paris: "62",
    Berlin: "60"
  },
  {
    date: "2020-10-10",
    London: "56",
    Paris: "59",
    Berlin: "55"
  },
  {
    date: "2020-10-11",
    London: "57",
    Paris: "58",
    Berlin: "52"
  },
  {
    date: "2020-10-12",
    London: "56",
    Paris: "58",
    Berlin: "54"
  },
  {
    date: "2020-10-13",
    London: "52",
    Paris: "56",
    Berlin: "55"
  },
  {
    date: "2020-10-14",
    London: "58",
    Paris: "57",
    Berlin: "51"
  }
];
const keys = ["London", "Paris", "Berlin"];

const temperatureTotals = data.reduce((allTotals, currentDate) =&gt; {
  const totalTemperature = keys.reduce((dailyTotal, k) =&gt; {
    dailyTotal += Number(currentDate[k]);
    return dailyTotal;
  }, 0);

  allTotals.push(totalTemperature);
  return allTotals;
}, []);

const parseDate = timeParse("%Y-%m-%d");
const format = timeFormat("%b %d");
const formatDate = (date) =&gt; format(parseDate(date));

const getDate = (d) =&gt; d.date;

const dateScale = scaleBand({ domain: data.map(getDate), padding: 0.2 });
const temparatureScale = scaleLinear({
  domain: [0, Math.max(...temperatureTotals)],
  nice: true
});
const colorScale = scaleOrdinal({
  domain: keys,
  range: [purple1, purple2, purple3]
});

let tooltipTimeout;

export default function TemperatureBarStack({
  width,
  height,
  event = false,
  margin = defaultMargin
}) {
  const {
    tooltipOpen,
    tooltipTop,
    tooltipLeft,
    hideTooltip,
    showTooltip,
    tooltipData
  } = useTooltip();

  const { containerRef, TooltipInPortal } = useTooltipInPortal();

  if (width &lt; 10) return null;

  const xMax = width;
  const yMax = height - margin.top - 100;

  dateScale.rangeRound([0, xMax]);
  temparatureScale.range([yMax, 0]);

  return width &lt; 10 ? null : (
    &lt;div style={{ position: "relative" }}&gt;
      &lt;svg ref={containerRef} width={width} height={height}&gt;
        &lt;rect
          x={0}
          y={0}
          width={width}
          height={height}
          fill={background}
          rx={14}
        /&gt;
        &lt;Grid
          top={margin.top}
          left={margin.left}
          xScale={dateScale}
          yScale={temparatureScale}
          width={xMax}
          height={yMax}
          stroke="black"
          strokeOpacity={0.1}
          xOffset={dateScale.bandwidth() / 2}
        /&gt;
        &lt;Group top={margin.top}&gt;
          &lt;BarStack
            data={data}
            keys={keys}
            x={getDate}
            xScale={dateScale}
            yScale={temparatureScale}
            color={colorScale}
          &gt;
            {(barStacks) =&gt;
              barStacks.map((barStack) =&gt;
                barStack.bars.map((bar) =&gt; (
                  &lt;rect
                    key={`bar-stack-${barStack.index}-${bar.index}`}
                    x={bar.x}
                    y={bar.y}
                    height={bar.height}
                    width={bar.width}
                    fill={bar.color}
                    onClick={() =&gt; {
                      if (event) alert(`Clicked: ${JSON.stringify(bar)}`);
                    }}
                    onMouseLeave={() =&gt; {
                      tooltipTimeout = window.setTimeout(() =&gt; {
                        hideTooltip();
                      }, 300);
                    }}
                    onMouseMove={(event) =&gt; {
                      if (tooltipTimeout) clearTimeout(tooltipTimeout);
                      const top = event.clientY - margin.top - bar.height;
                      const left = bar.x + bar.width / 2;
                      showTooltip({
                        tooltipData: bar,
                        tooltipTop: top,
                        tooltipLeft: left
                      });
                    }}
                  /&gt;
                ))
              )
            }
          &lt;/BarStack&gt;
        &lt;/Group&gt;
        &lt;AxisBottom
          top={yMax + margin.top}
          scale={dateScale}
          tickFormat={formatDate}
          stroke={purple3}
          tickStroke={purple3}
          tickLabelProps={() =&gt; ({
            fill: purple3,
            fontSize: 11,
            textAnchor: "middle"
          })}
        /&gt;
      &lt;/svg&gt;
      &lt;div
        style={{
          position: "absolute",
          top: margin.top / 2 - 10,
          width: "100%",
          display: "flex",
          justifyContent: "center",
          fontSize: 14
        }}
      &gt;
        &lt;LegendOrdinal
          scale={colorScale}
          direction="row"
          labelMargin="0 15px 0 0"
        /&gt;
      &lt;/div&gt;
      {tooltipOpen &amp;&amp; tooltipData &amp;&amp; (
        &lt;TooltipInPortal
          key={Math.random()}
          top={tooltipTop}
          left={tooltipLeft}
          style={tooltipStyles}
        &gt;
          &lt;div style={{ color: colorScale(tooltipData.key) }}&gt;
            &lt;strong&gt;{tooltipData.key}&lt;/strong&gt;
          &lt;/div&gt;
          &lt;div&gt;{tooltipData.bar.data[tooltipData.key]}℉&lt;/div&gt;
          &lt;div&gt;
            &lt;small&gt;{formatDate(getDate(tooltipData.bar.data))}&lt;/small&gt;
          &lt;/div&gt;
        &lt;/TooltipInPortal&gt;
      )}
    &lt;/div&gt;
  );
}
</pre>
<p>下面是对上面代码的解释:</p>
<p>预安装的<code>@visx</code>包和可视化的CSS样式被导入。</p>
<pre>import React from "react";
import { BarStack } from "@visx/shape";
import { Group } from "@visx/group";
import { Grid } from "@visx/grid";
import { AxisBottom } from "@visx/axis";
import { scaleBand, scaleLinear, scaleOrdinal } from "@visx/scale";
import { timeFormat, timeParse } from "d3-time-format";
import { useTooltip, useTooltipInPortal, defaultStyles } from "@visx/tooltip";
import { LegendOrdinal } from "@visx/legend";
import "./styles.css";</pre>
<p>这是定义可视化的重要样式属性的地方。</p>
<p>此外，要可视化的数据(即<code>data</code>)与包含每个温度值标签的<code>keys</code>数组一起提供。这些键将被映射到堆叠图表的适当部分，并且也用于创建图表的图例。</p>
<pre>const purple1 = "#6c5efb";
const purple2 = "#c998ff";
const purple3 = "#a44afe";
const background = "#eaedff";
const defaultMargin = { top: 40, right: 0, bottom: 0, left: 0 };
const tooltipStyles = {
  ...defaultStyles,
  minWidth: 60,
  backgroundColor: "rgba(0,0,0,0.9)",
  color: "white"
};

const data = [...];
const keys = ["London", "Paris", "Berlin"];</pre>
<p>这里的数据是为图表准备的。<code>temperatureTotals</code>数组包含三个城市每天的平均温度之和。这三个城市的每日气温总和决定了每天堆积条形图的高度。</p>
<p><code>formatDate()</code>函数会将日期转换成可读性更好的格式——在这个场景中，它会将<code>2020-10-14</code>改为<code>Oct 14</code>。</p>
<pre>const temperatureTotals = data.reduce((allTotals, currentDate) =&gt; {
  const totalTemperature = keys.reduce((dailyTotal, k) =&gt; {
    dailyTotal += Number(currentDate[k]);
    return dailyTotal;
  }, 0);

  allTotals.push(totalTemperature);
  return allTotals;
}, []);

const parseDate = timeParse("%Y-%m-%d");
const format = timeFormat("%b %d");
const formatDate = (date) =&gt; format(parseDate(date));

const getDate = (d) =&gt; d.date;</pre>
<p><code>@visx/scale</code>基于d3级封装。它包含接收数据并返回可视值的函数。下面，<code>scaleBand()</code>负责条的水平属性，即宽度和填充。<code>scaleLinear()</code>负责条形的垂直属性。最后，<code>scaleOrdinal()</code>负责将各个城市映射到一组预定义的颜色。你可以在d3 <a href="https://medium.com/@mbostock/introducing-d3-scale-61980c51545f" target="_blank" rel="noopener">这里</a>阅读更多关于音阶的内容。</p>
<pre>const dateScale = scaleBand({ domain: data.map(getDate), padding: 0.2 });
const temparatureScale = scaleLinear({
  domain: [0, Math.max(...temperatureTotals)],
  nice: true
});
const colorScale = scaleOrdinal({
  domain: keys,
  range: [purple1, purple2, purple3]
});

let tooltipTimeout;</pre>
<p>这是React函数组件，将返回一个垂直堆叠的条形图。几个道具——<code>width</code>、<code>height</code>、<code>event</code>和<code>margin</code>将从<code>ParentSize</code>组件传递给它(稍后将详细介绍)。</p>
<p>另外，<code>useTooltip</code>包含了帮助设置工具提示物理特征显示的属性和功能。此外，我们设置了<code>useTooltipInPortal</code>钩子，它在<a href="https://airbnb.io/visx/docs/tooltip#Portal" target="_blank" rel="noopener">门户</a>中呈现工具提示。</p>
<pre>export default function TemperatureBarStack({
  width,
  height,
  event = false,
  margin = defaultMargin
}) {
  const {
    tooltipOpen,
    tooltipTop,
    tooltipLeft,
    hideTooltip,
    showTooltip,
    tooltipData
  } = useTooltip();

  const { containerRef, TooltipInPortal } = useTooltipInPortal();
  ...
}</pre>
<p>这里，如果宽度不超过10px，组件被设置为返回null。</p>
<p>另外:</p>
<pre>if (width &lt; 10) return null;

  const xMax = width;
  const yMax = height - margin.top - 100;

  dateScale.rangeRound([0, xMax]);
  temparatureScale.range([yMax, 0]);</pre>
<p>这是使用大多数原语的地方。可视化是基于SVG的。因此，我们需要为图表使用一个父元素<code>SVG</code>。元素负责图表的矩形背景。<code>Grid</code>组件负责在图表背景中绘制网格线。</p>
<p>如前所述，<code>Group</code>有助于围绕一组<code>SVG</code>元素创建一个容器。<code>BarStack</code>组件将数据呈现在垂直堆叠的条形图中。它还管理生成的bar订阅的事件。<code>AxisButtom</code>用于自定义图表的底轴。</p>
<p><code>LegendOrdinal</code>用于设置图表图例，最后，<code>TooltipInPortal</code>组件将管理工具提示的显示。</p>
<pre>return width &lt; 10 ? null : (
    &lt;div style={{ position: "relative" }}&gt;
      &lt;svg ref={containerRef} width={width} height={height}&gt;
        &lt;rect
          x={0}
          y={0}
          width={width}
          height={height}
          fill={background}
          rx={14}
        /&gt;
        &lt;Grid
          top={margin.top}
          left={margin.left}
          xScale={dateScale}
          yScale={temparatureScale}
          width={xMax}
          height={yMax}
          stroke="black"
          strokeOpacity={0.1}
          xOffset={dateScale.bandwidth() / 2}
        /&gt;
        &lt;Group top={margin.top}&gt;
          &lt;BarStack
            data={data}
            keys={keys}
            x={getDate}
            xScale={dateScale}
            yScale={temparatureScale}
            color={colorScale}
          &gt;
            {(barStacks) =&gt;
              barStacks.map((barStack) =&gt;
                barStack.bars.map((bar) =&gt; (
                  &lt;rect
                    key={`bar-stack-${barStack.index}-${bar.index}`}
                    x={bar.x}
                    y={bar.y}
                    height={bar.height}
                    width={bar.width}
                    fill={bar.color}
                    onClick={() =&gt; {
                      if (event) alert(`Clicked: ${JSON.stringify(bar)}`);
                    }}
                    onMouseLeave={() =&gt; {
                      tooltipTimeout = window.setTimeout(() =&gt; {
                        hideTooltip();
                      }, 300);
                    }}
                    onMouseMove={(event) =&gt; {
                      if (tooltipTimeout) clearTimeout(tooltipTimeout);
                      const top = event.clientY - margin.top - bar.height;
                      const left = bar.x + bar.width / 2;
                      showTooltip({
                        tooltipData: bar,
                        tooltipTop: top,
                        tooltipLeft: left
                      });
                    }}
                  /&gt;
                ))
              )
            }
          &lt;/BarStack&gt;
        &lt;/Group&gt;
        &lt;AxisBottom
          top={yMax + margin.top}
          scale={dateScale}
          tickFormat={formatDate}
          stroke={purple3}
          tickStroke={purple3}
          tickLabelProps={() =&gt; ({
            fill: purple3,
            fontSize: 11,
            textAnchor: "middle"
          })}
        /&gt;
      &lt;/svg&gt;
      &lt;div
        style={{
          position: "absolute",
          top: margin.top / 2 - 10,
          width: "100%",
          display: "flex",
          justifyContent: "center",
          fontSize: 14
        }}
      &gt;
        &lt;LegendOrdinal
          scale={colorScale}
          direction="row"
          labelMargin="0 15px 0 0"
        /&gt;
      &lt;/div&gt;
      {tooltipOpen &amp;&amp; tooltipData &amp;&amp; (
        &lt;TooltipInPortal
          key={Math.random()}
          top={tooltipTop}
          left={tooltipLeft}
          style={tooltipStyles}
        &gt;
          &lt;div style={{ color: colorScale(tooltipData.key) }}&gt;
            &lt;strong&gt;{tooltipData.key}&lt;/strong&gt;
          &lt;/div&gt;
          &lt;div&gt;{tooltipData.bar.data[tooltipData.key]}℉&lt;/div&gt;
          &lt;div&gt;
            &lt;small&gt;{formatDate(getDate(tooltipData.bar.data))}&lt;/small&gt;
          &lt;/div&gt;
        &lt;/TooltipInPortal&gt;
      )}
    &lt;/div&gt;
  );</pre>
<h3>式样</h3>
<p>用下面的代码替换<code>index.css</code>文件中的CSS代码:</p>
<pre>html,
body,
#root {
  height: 100%;
  line-height: 2em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
    Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
}</pre>
<h3>响应性</h3>
<p>Visx有一些实用程序可以使可视化响应迅速。<code>ParentSize</code>就是其中之一。它将父组件的宽度和高度向下传递给包装的组件。要实现这个项目，用下面的代码替换<code>index.js</code>文件的内容:</p>
<pre>import React from "react";
import ReactDOM from "react-dom";
import ParentSize from "@visx/responsive/lib/components/ParentSize";

import TemperatureBarStack from "./TemperatureBarStack";

ReactDOM.render(
  
    {({ width, height }) =&gt; (
      
    )}
  ,
  document.getElementById("root")
);</pre>
<p>不要忘记使用<code>yarn start</code>运行React应用程序。</p>
<h2>结论</h2>
<p>在数据可视化方面，Visx绝对是React开发人员的游戏规则改变者，因为它具有可学性和表达性。然而，由于用React构建它的决定显然受到了React是Airbnb的主要前端库这一事实的影响，所以可能永远也不会看到类似的可视化包被开发出来。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>