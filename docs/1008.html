<html>
<head>
<title>The latest features in Next.js - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Next.js - LogRocket博客中的最新特性</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/the-latest-features-in-next-js/#0001-01-01">https://blog.logrocket.com/the-latest-features-in-next-js/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<p>在不久前的SSR(服务器端渲染)和静态站点生成的背景下，<a href="http://www.nextjs.org" target="_blank" rel="noopener noreferrer"> Next.js </a>建立了一个我们无法否认的名声。在短短的几年时间里，它已经成为了T2托管静态网站(如登录页面、文档和博客)的首选框架。在本文中，让我们看看作为最新主要发布版本的一部分添加到框架中的主要增强功能，<a href="https://nextjs.org/blog/next-9-3" target="_blank" rel="noopener noreferrer"> Next.js 9.3 </a>和<a href="https://nextjs.org/blog/next-9-4" target="_blank" rel="noopener noreferrer"> Next.js 9.4 </a>。</p>
<h2>优化静态站点生成</h2>
<p>Next.js是一个混合框架，它允许我们在静态生成(SG)或服务器端呈现(SSR)之间进行选择。在Next.js 9.0中，我们看到了自动静态优化的引入，它依赖于数据获取方法<code>getInitialProps()</code>来决定页面是否必须在构建时呈现为HTML。但是现在通过增加两个新的数据获取方法<code>getStaticProps</code> &amp; <code>getServerSideProps</code>，这已经被推到了下一个层次。还引入了一个<code>getStaticPaths</code>来为动态路由生成静态页面。这就是工作原理。</p>
<h3 id="getstaticprops">getStaticProps</h3>
<p>这主要意味着为您的站点启用静态生成，并配置异步数据获取在构建时发生(在服务器上下文中)。只需从您的页面导出一个名为<code>getStaticProps</code>的<code>async</code>函数，并从其中返回一个带有<code>props</code>键的对象，该对象将作为道具传递给页面:</p>
<pre>export async function getStaticProps(context) {
 return {
   props: {} // will be passed to the page component as props
 }
}</pre>
<p>然后，Next.js将在构建时通过在Node.js上下文中调用该函数来预呈现该页面。这里的好处是，我们可以使用任何方法(甚至直接访问数据库)获取数据，因为这些代码永远不会在客户端运行。<br/> <img data-attachment-id="21958" data-permalink="https://blog.logrocket.com/the-latest-features-in-next-js/attachment/staticprops/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps.png" data-orig-size="1262,757" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="staticProps" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps-1024x614.png" decoding="async" class="aligncenter size-full wp-image-21958 jetpack-lazy-image" src="../Images/7b06a20ef05cc90eac99337efb6c0569.png" alt="staticProps" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps.png 1262w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps-300x180.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps-1024x614.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps-768x461.png 768w" data-lazy-sizes="(max-width: 1262px) 100vw, 1262px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21958" data-permalink="https://blog.logrocket.com/the-latest-features-in-next-js/attachment/staticprops/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps.png" data-orig-size="1262,757" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="staticProps" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps-1024x614.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21958" src="../Images/7b06a20ef05cc90eac99337efb6c0569.png" alt="staticProps" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps.png 1262w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps-300x180.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps-1024x614.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps-768x461.png 768w" sizes="(max-width: 1262px) 100vw, 1262px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/staticProps.png"/></noscript>
<h3 id="getstaticpaths">getStaticPaths</h3>
<p>当使用动态路径时，与<code>getStaticProps</code>一起使用，以定义在构建时静态呈现的路径列表。</p>
<p>从包含动态路由的页面中导出一个名为<code>getStaticPaths</code>的<code>async</code>函数，Next.js将静态预呈现它指定的所有路径:</p>
<pre>export async function getStaticPaths() {
 return {
   paths: [
     { params: { ... } }
   ],
   fallback: true // or false
 };
}
</pre>
<p>如果页面使用名为<code>pages/posts/[id].js</code>的动态路由，将<code>[{params:{id:1}},{params:{id:2}}]</code>导出为路径数组将导致在构建时静态生成<code>post/1</code>和<code>posts/2</code>。<br/> <img data-attachment-id="21959" data-permalink="https://blog.logrocket.com/the-latest-features-in-next-js/attachment/staticpaths/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths.png" data-orig-size="1262,757" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="staticPaths" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths-1024x614.png" decoding="async" class="aligncenter size-full wp-image-21959 jetpack-lazy-image" src="../Images/4119e33ae036e85a5781200e3bf27a04.png" alt="static paths " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths.png 1262w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths-300x180.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths-1024x614.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths-768x461.png 768w" data-lazy-sizes="(max-width: 1262px) 100vw, 1262px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21959" data-permalink="https://blog.logrocket.com/the-latest-features-in-next-js/attachment/staticpaths/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths.png" data-orig-size="1262,757" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="staticPaths" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths-1024x614.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21959" src="../Images/4119e33ae036e85a5781200e3bf27a04.png" alt="static paths " srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths.png 1262w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths-300x180.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths-1024x614.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths-768x461.png 768w" sizes="(max-width: 1262px) 100vw, 1262px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/staticPaths.png"/></noscript><br/>
Also, notice the fallback key being passed. If the value of <code>fallback</code> is false, then any path not returned in the <code>getStaticPaths</code> array will result in a <strong>404 page</strong> error.

<p>这在页面中用于在每次提取时呈现页面(SSR)。使用<code>next/link</code>导航时，向服务器发出请求，执行<code>getServerSideProps</code>并将结果返回给前端。返回的结果作为props传递给页面:</p>
<pre>export async function getServerSideProps(context) {
 return {
   props: {} // passed as props to page
 }
}
</pre>
<p><img data-attachment-id="21961" data-permalink="https://blog.logrocket.com/the-latest-features-in-next-js/attachment/serversideprops/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops.png" data-orig-size="1262,757" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="serversideprops" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops-1024x614.png" decoding="async" class="aligncenter size-full wp-image-21961 jetpack-lazy-image" src="../Images/014c45a861a2fbb29bce6379cc84e24c.png" alt="server side props" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops.png 1262w, https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops-300x180.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops-1024x614.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops-768x461.png 768w" data-lazy-sizes="(max-width: 1262px) 100vw, 1262px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21961" data-permalink="https://blog.logrocket.com/the-latest-features-in-next-js/attachment/serversideprops/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops.png" data-orig-size="1262,757" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="serversideprops" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops-1024x614.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21961" src="../Images/014c45a861a2fbb29bce6379cc84e24c.png" alt="server side props" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops.png 1262w, https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops-300x180.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops-1024x614.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops-768x461.png 768w" sizes="(max-width: 1262px) 100vw, 1262px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/serversideprops.png"/></noscript>
<h2>预览模式</h2>
<p>引入<code>getStaticProps</code>和<code>getServerSideProps</code>的一个直接结果是，有条件的按需渲染变得可能。</p>
<p>预览模式的一个用例是，当您使用CMS的草稿版本，并希望预览服务器端呈现的版本，而不是静态生成的输出。</p>
<h2><img data-attachment-id="21962" data-permalink="https://blog.logrocket.com/the-latest-features-in-next-js/attachment/previewmode/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode.png" data-orig-size="1262,757" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="previewMode" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode-1024x614.png" decoding="async" class="aligncenter size-full wp-image-21962 jetpack-lazy-image" src="../Images/30e2b6d96298ed4fb7b120aed87629b1.png" alt="previewMode" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode.png 1262w, https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode-300x180.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode-1024x614.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode-768x461.png 768w" data-lazy-sizes="(max-width: 1262px) 100vw, 1262px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode.png"/> <noscript> <img data-lazy-fallback="1" data-attachment-id="21962" data-permalink="https://blog.logrocket.com/the-latest-features-in-next-js/attachment/previewmode/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode.png" data-orig-size="1262,757" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="previewMode" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode-1024x614.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21962" src="../Images/30e2b6d96298ed4fb7b120aed87629b1.png" alt="previewMode" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode.png 1262w, https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode-300x180.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode-1024x614.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode-768x461.png 768w" sizes="(max-width: 1262px) 100vw, 1262px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/previewMode.png"/> </noscript>支持Sass和组件级样式</h2>

<p>在Next.js 9.3发布之前，开发人员为了使用SASS样式表而使用了<code>next-sass</code>，但是现在，Next.js支持开箱即用的SASS。为了使用它，做<code>npm install sass</code>，然后，创建一个标准。scss文件，然后将其导入到<code>pages/_app.js</code>中。</p>

<p>从Next.js 9.3开始，现在可以用全局SASS和CSS模块的形式定义样式。全局样式可以如上使用，而组件级样式可以通过命名为<code>[name].module.scss</code>来定义。模块通过自动生成唯一的类名来避免类名冲突。</p>
<p><img data-attachment-id="21963" data-permalink="https://blog.logrocket.com/the-latest-features-in-next-js/attachment/scss/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/scss.png" data-orig-size="1262,865" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="scss" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/scss-300x206.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/scss-1024x702.png" decoding="async" class="aligncenter size-full wp-image-21963 jetpack-lazy-image" src="../Images/fa0f7cf2b7bda77b26248fea31492ab1.png" alt="scss" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/scss.png 1262w, https://blog.logrocket.com/wp-content/uploads/2020/07/scss-300x206.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/scss-1024x702.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/scss-768x526.png 768w" data-lazy-sizes="(max-width: 1262px) 100vw, 1262px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/scss.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/scss.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21963" data-permalink="https://blog.logrocket.com/the-latest-features-in-next-js/attachment/scss/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/scss.png" data-orig-size="1262,865" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="scss" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/scss-300x206.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/scss-1024x702.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21963" src="../Images/fa0f7cf2b7bda77b26248fea31492ab1.png" alt="scss" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/scss.png 1262w, https://blog.logrocket.com/wp-content/uploads/2020/07/scss-300x206.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/scss-1024x702.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/scss-768x526.png 768w" sizes="(max-width: 1262px) 100vw, 1262px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/scss.png"/></noscript>
<h3>增强型404页面</h3>
<p>如果没有定义自定义的<code>pages/error.js</code>，Next.js将自动、静态地生成一个404页面，并在任何需要的时候提供服务。如果用户需要定制错误页面，可以通过创建一个定制的<code>pages/404.js</code>来完成，这个定制的页面将在构建时被静态优化。</p>
<h3>快速刷新</h3>
<p>开发人员的经验是任何框架成败的主要原因。在Next.js 9.4中，通过快速刷新、热重新加载体验，Next.js开发人员的开发体验有了很大的改善，现在默认情况下是启用的。</p>
<p>这意味着Next.js现在将只更新被编辑的代码文件，并只重新呈现那个组件，而不会丢失组件状态。其他增强开发人员体验的更新包括:</p>
<ul>
<li>指向产生错误的准确行和列的错误位置</li>
<li>单击打开参考代码片段</li>
<li>修复运行时错误后自动解决这些错误</li>
</ul>
<h3>增强的<code>env</code>变量支持</h3>
<p>在Next.js的早期版本中，开发人员很难知道某个特定的环境变量是仅在Node.js环境中可用，还是也包含在浏览器包中，但Next.js 9.4解决了这个问题。现在，用NEXT_PUBLIC_附加一个环境变量确保它将被内联到浏览器JavaScript包中。还有，Next.js支持<a href="https://nextjs.org/docs/basic-features/environment-variables" target="_blank" rel="noopener noreferrer">。默认环境加载</a>。</p>
<h3>增强的获取支持</h3>
<p>在早期版本中，用于发出REST请求的fetch API是在浏览器环境中填充的。现在，在Next.js 9.4中，<code>fetch()</code>也被polyfilled在Node.js环境中。这意味着，对于在服务器端执行的代码，开发者不再需要包含像<code>node-fetch</code>或<code>isomorphic-fetch</code>这样的第三方库。</p>
<h3>绝对进口</h3>
<p>这是另一个增强功能，目的是让开发人员的生活变得不那么困难。当深入嵌套到一个组件中时，为了使用出现在树中更高位置的任何其他可重用代码，开发人员通常最终使用这种语法:</p>
<pre>import Icon from '../../../../shared/icon'</pre>
<p>如果共享文件夹就在应用程序的根目录中，开发人员应该能够像这样访问它:</p>
<pre>import Icon from 'shared/icon'</pre>
<p>现在使用<code>jsconfig.json</code> / <code>tsconfig.json</code>中的<code>baseUrl</code>属性，Next.js就可以做到这一点。同样在相同的上下文中，现在也可以使用相同的配置文件创建自定义模块别名。这是它的样子:</p>
<pre>// tsconfig.json or jsconfig.json
{
 "compilerOptions": {
   "baseUrl": ".",
   "paths": {
     "@/design-system/*": ["components/design-system/*"]
   }
 }
}
</pre>
<p>之后，可以使用以下语法导入组件:</p>
<pre>import Icon from '@/design-system/icon'
</pre>
<h2>结论</h2>
<p>总之，Next的最新版本。JS 9.3和Next.js 9.4带来了各方面的重大改进。从静态生成、服务器端渲染、条件预览模式等核心性能到表面级别的改进。就SASS支持和开发人员体验改进而言，如快速刷新、env变量支持和绝对导入使这些新版本值得升级。因此，如果您运行的是早期版本，请考虑进行更新。</p>
<div class="code-block code-block-2">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>