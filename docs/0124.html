<html>
<head>
<title>How browser rendering works — behind the scenes - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>浏览器渲染如何工作——幕后——log rocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/#0001-01-01">https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/#0001-01-01</a></blockquote><div><article class="article-post">
<figure/>
<p><em> <strong>编者按:</strong>本文于2021年6月审核更新。</em></p>
<p>本文的目的是用非常简单的术语解释你的浏览器将HTML、CSS和JavaScript转换成你可以与之交互的工作网站的步骤。了解您的浏览器将网站变得生动的过程将使您能够优化您的web应用程序以获得更快的速度和性能。</p>
<p>让我们开始吧。</p>
<h2>浏览器如何渲染网站概述</h2>
<p>浏览器到底是怎么渲染网站的？我将很快解构这个过程，但是首先，重要的是回顾一些基础知识。</p>
<p>web浏览器是一种软件，它从远程服务器(或者本地磁盘)加载文件，并向您显示这些文件，允许用户进行交互。我知道你知道什么是浏览器🙂</p>
<p>然而，在浏览器中，有一个软件可以根据接收到的文件计算出向你显示什么。这就是所谓的浏览器引擎。</p>
<p>浏览器引擎是每一个主流浏览器的核心软件组件，不同的浏览器厂商对其引擎的称呼也不尽相同。火狐的浏览器引擎叫Gecko，Chrome的叫Blink，恰好是WebKit的一个分支。</p>
<p>如果你感兴趣的话，你可以看看各种浏览器引擎的对比。不要让这些名字迷惑了你——它们只是名字。</p>
<p>为了便于说明，让我们假设我们有一个通用的浏览器引擎。这个浏览器引擎将被图形化表示，如下所示。<br/> <img data-attachment-id="61115" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image12-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image12.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="how-browser-rendering-works-engine" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image12-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image12.jpg" decoding="async" class="aligncenter wp-image-61115 size-full jetpack-lazy-image" src="../Images/6abc1b72cd87425a3ae338cf18de4a06.png" alt="Illustration Of Our Fictional Universal Browser Engine" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image12.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image12-300x241.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image12.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image12.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61115" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image12-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image12.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="how-browser-rendering-works-engine" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image12-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image12.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61115 size-full" src="../Images/6abc1b72cd87425a3ae338cf18de4a06.png" alt="Illustration Of Our Fictional Universal Browser Engine" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image12.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image12-300x241.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image12.jpg"/></noscript><br/>
In this article, I use “browser” and “browser engine” interchangeably. Don’t let that confuse you; what’s important is that you know the browser engine is the key software responsible for what we’re discussing.
<h2>向浏览器发送和接收信息</h2>
<p>这不应该是一门计算机科学网络课，但是你可能记得数据是以字节大小的数据包的形式通过互联网发送的。</p>
<figure class="wp-caption"><img data-attachment-id="61118" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image15-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image15.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="how-browser-rendering-works-bytes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image15-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image15.jpg" decoding="async" class="aligncenter wp-image-61118 size-full jetpack-lazy-image" src="../Images/0846bfb99fe364c101e1944dcc03a168.png" alt="How Browser Rendering Works Computers Receive Packets Of Data In Bytes" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image15.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image15-300x241.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image15.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image15.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61118" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image15-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image15.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="how-browser-rendering-works-bytes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image15-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image15.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61118 size-full" src="../Images/0846bfb99fe364c101e1944dcc03a168.png" alt="How Browser Rendering Works Computers Receive Packets Of Data In Bytes" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image15.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image15-300x241.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image15.jpg"/></noscript></figure>
<p>我想说的是，当你写一些HTML、CSS和JS，并试图在浏览器中打开HTML文件时，浏览器会从你的硬盘(或网络)中读取HTML的原始字节。</p>
<figure class="wp-caption"><img data-attachment-id="61119" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image13-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image13.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="how-browser-rendering-works-computer-receiving-data" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image13-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image13.jpg" decoding="async" class="aligncenter wp-image-61119 size-full jetpack-lazy-image" src="../Images/0ddb25a51269f8d8438de2ef4c56316f.png" alt="Computer receiving data" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image13.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image13-300x241.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image13.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image13.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61119" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image13-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image13.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="how-browser-rendering-works-computer-receiving-data" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image13-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image13.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61119 size-full" src="../Images/0ddb25a51269f8d8438de2ef4c56316f.png" alt="Computer receiving data" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image13.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image13-300x241.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image13.jpg"/></noscript></figure>
<p>明白了吗？浏览器读取数据的原始字节，而不是您编写的代码的实际字符。我们继续吧。</p>
<p>浏览器接收数据的字节，但是它不能真正地用它做任何事情；数据的原始字节必须转换成它能理解的形式。这是第一步。</p>
<figure class="wp-caption"><img data-attachment-id="61121" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image16-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image16.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-data-conversion" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image16-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image16.jpg" decoding="async" class="aligncenter wp-image-61121 size-full jetpack-lazy-image" src="../Images/bd5555b15b0ce6ac50e314518a6683f8.png" alt="browser rendering works Data must be converted" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image16.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image16-300x241.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image16.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image16.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61121" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image16-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image16.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-data-conversion" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image16-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image16.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61121 size-full" src="../Images/bd5555b15b0ce6ac50e314518a6683f8.png" alt="browser rendering works Data must be converted" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image16.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image16-300x241.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image16.jpg"/></noscript></figure>
<h2>从HTML的原始字节到DOM</h2>
<p>浏览器对象需要处理的是文档对象模型(DOM)对象。那么，DOM对象是如何派生出来的呢？嗯，很简单。</p>
<p>首先，数据的原始字节被转换成字符。</p>
<figure class="wp-caption"><img data-attachment-id="61125" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image19/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image19.jpg" data-orig-size="730,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-bytes-characters" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image19-300x95.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image19.jpg" decoding="async" class="aligncenter wp-image-61125 size-full jetpack-lazy-image" src="../Images/11e83d3826122d10577d11255c60ada9.png" alt="Bytes are converted to characters" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image19.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image19-300x95.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image19.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image19.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61125" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image19/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image19.jpg" data-orig-size="730,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-bytes-characters" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image19-300x95.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image19.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61125 size-full" src="../Images/11e83d3826122d10577d11255c60ada9.png" alt="Bytes are converted to characters" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image19.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image19-300x95.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image19.jpg"/></noscript></figure>
<p>您可能会从您编写的代码的字符中看到这一点。这种转换是基于HTML文件的字符编码完成的。</p>
<p>此时，浏览器已经从原始数据字节变成了文件中的实际字符。角色很棒，但不是最终的结果。这些字符被进一步解析成称为标记的东西。</p>
<figure class="wp-caption"><img data-attachment-id="61128" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image5-12/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image5.jpg" data-orig-size="730,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-Characters-Converted-tokens" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image5-300x95.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image5.jpg" decoding="async" class="aligncenter wp-image-61128 size-full jetpack-lazy-image" src="../Images/dd985bbfec6908e4afbbfce785ea0a18.png" alt="Characters Are Converted To Tokens" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image5.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image5-300x95.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image5.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image5.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61128" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image5-12/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image5.jpg" data-orig-size="730,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-Characters-Converted-tokens" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image5-300x95.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image5.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61128 size-full" src="../Images/dd985bbfec6908e4afbbfce785ea0a18.png" alt="Characters Are Converted To Tokens" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image5.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image5-300x95.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image5.jpg"/></noscript></figure>
<p>这些代币是什么？</p>
<p>文本文件中的一堆字符对浏览器引擎没什么好处。如果没有这个标记化过程，这一串字符只会产生一串无意义的文本，即HTML代码，而不会产生一个实际的网站。</p>
<p>当你保存一个扩展名为<code>.html</code>的文件时，你向浏览器引擎发出信号，将该文件解释为一个HTML文档。浏览器解释该文件的方式是首先解析它。在解析过程中，尤其是在标记化过程中，文件中的每个开始和结束HTML标记都被考虑在内。</p>
<p>解析器理解尖括号中的每个字符串(例如，<code>&lt;html&gt;</code>、<code>&lt;p&gt;</code>)，并理解适用于每个字符串的规则集。例如，表示锚标记的标记与表示段落标记的标记具有不同的属性。</p>
<p>从概念上讲，您可能会将令牌视为某种数据结构，其中包含有关某个HTML标记的信息。从本质上讲，HTML文件被分解成称为标记的小解析单元。这是浏览器开始理解你写的东西的方式。</p>
<p><img data-attachment-id="61129" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image1-14/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image1.jpg" data-orig-size="730,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="how-browser-rendering-works-Illustration-Token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image1-300x95.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image1.jpg" decoding="async" class="aligncenter wp-image-61129 size-full jetpack-lazy-image" src="../Images/bed6ac10613304a712d2089597c0942e.png" alt="A Conceptual Illustration Of A Token" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image1.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image1-300x95.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image1.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image1.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61129" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image1-14/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image1.jpg" data-orig-size="730,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="how-browser-rendering-works-Illustration-Token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image1-300x95.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image1.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61129 size-full" src="../Images/bed6ac10613304a712d2089597c0942e.png" alt="A Conceptual Illustration Of A Token" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image1.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image1-300x95.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image1.jpg"/></noscript>
<figure class="wp-caption">Tokens are great, but they are also not our final result. After the tokenization is done, the tokens are then converted into nodes. You may think of nodes as distinct objects with specific properties. In fact, a better way to explain this is to see a node as a separate entity within the document object tree.</figure>
<p>节点是伟大的，但是它们仍然不是最终的结果。</p>
<p>现在，这是最后一点。创建这些节点后，这些节点被链接到一个称为DOM的树数据结构中。DOM建立了父子关系、相邻兄弟关系等。每个节点之间的关系都是在这个DOM对象中建立的。</p>
<p>现在，这是我们可以做的事情。</p>
<figure class="wp-caption"><img data-attachment-id="61131" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image18-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1.jpg" data-orig-size="730,371" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-dom-tree" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1-300x152.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1.jpg" decoding="async" class="aligncenter wp-image-61131 size-full jetpack-lazy-image" src="../Images/2141e05a57e3d74a8cafb1819df0b42e.png" alt="An Example DOM Tree Graphic" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1-300x152.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61131" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image18-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1.jpg" data-orig-size="730,371" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-dom-tree" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1-300x152.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61131 size-full" src="../Images/2141e05a57e3d74a8cafb1819df0b42e.png" alt="An Example DOM Tree Graphic" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1-300x152.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image18-1.jpg"/></noscript></figure>
<p>如果你还记得《网页设计101》，你不会在浏览器中打开CSS或JS文件来浏览网页。不——你打开HTML文件，大多数时候是以<code>index.html</code>的形式。这正是你这样做的原因:在任何事情发生之前，浏览器必须将HTML数据的原始字节转换成DOM。</p>
<figure class="wp-caption"><img data-attachment-id="61132" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image9-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image9.jpg" data-orig-size="730,374" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="how-browser-rendering-works-html-first" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image9-300x154.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image9.jpg" decoding="async" class="aligncenter wp-image-61132 size-full jetpack-lazy-image" src="../Images/5be25168e9542072a4bf58db8d35e9e4.png" alt="HTML Goes In First" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image9.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image9-300x154.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image9.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image9.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61132" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image9-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image9.jpg" data-orig-size="730,374" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="how-browser-rendering-works-html-first" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image9-300x154.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image9.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61132 size-full" src="../Images/5be25168e9542072a4bf58db8d35e9e4.png" alt="HTML Goes In First" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image9.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image9-300x154.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image9.jpg"/></noscript></figure>
<p>根据HTML文件的大小，DOM构造过程可能需要一些时间。不管文件有多小，都需要一些时间，不管文件有多大。</p>
<figure class="wp-caption"><img data-attachment-id="61133" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image10-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image10.jpg" data-orig-size="730,229" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-tokens-nodes-dom" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image10-300x94.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image10.jpg" decoding="async" class="aligncenter wp-image-61133 size-full jetpack-lazy-image" src="../Images/afa53e8499b8addcd9437b66101533b7.png" alt="From Tokens To Nodes And The DOM" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image10.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image10-300x94.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image10.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image10.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61133" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image10-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image10.jpg" data-orig-size="730,229" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-tokens-nodes-dom" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image10-300x94.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image10.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61133 size-full" src="../Images/afa53e8499b8addcd9437b66101533b7.png" alt="From Tokens To Nodes And The DOM" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image10.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image10-300x94.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image10.jpg"/></noscript></figure>
<h2>但是等等——获取CSS怎么办？</h2>
<p>DOM已创建。太好了。</p>
<p>带有一些CSS的典型HTML文件将具有如下所示的样式表链接:</p>
<pre class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;link rel="stylesheet" type="text/css" media="screen" href="main.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
    
&lt;/body&gt;
&lt;/html&gt;</pre>
<p>当浏览器接收数据的原始字节并开始DOM构造过程时，它还会请求获取链接的<code>main.css</code>样式表。一旦浏览器开始解析HTML，在找到CSS文件的<code>link</code>标签时，它同时发出获取该标签的请求。</p>
<p>正如您可能已经猜到的，浏览器也接收CSS数据的原始字节，无论是来自互联网还是您的本地磁盘。但是这些CSS数据的原始字节到底是用来做什么的呢？</p>
<h2>从CSS的原始字节到CSSOM</h2>
<p>你看，当浏览器接收到CSS的原始字节时，类似的处理HTML的原始字节的过程也被启动。</p>
<p>换句话说，数据的原始字节被转换成字符，然后被标记化。节点也形成了，最后，树结构形成了。</p>
<p>什么是树形结构？大多数人都知道有个东西叫DOM。同样，也有一个CSS树结构，称为CSS对象模型(CSSOM)。</p>
<p>你看，浏览器不能处理HTML或CSS的原始字节。这必须被转换成它能识别的形式——而这恰好就是这些树形结构。</p>
<figure class="wp-caption"><img data-attachment-id="61135" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image4-13/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image4.jpg" data-orig-size="730,229" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-css-bytes-converted" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image4-300x94.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image4.jpg" decoding="async" class="aligncenter wp-image-61135 size-full jetpack-lazy-image" src="../Images/ee283a953220f6ddaa2feee9c0bf82a1.png" alt="CSS Bytes Are Converted Into The CSSOM" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image4.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image4-300x94.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image4.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image4.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61135" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image4-13/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image4.jpg" data-orig-size="730,229" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-css-bytes-converted" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image4-300x94.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image4.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61135 size-full" src="../Images/ee283a953220f6ddaa2feee9c0bf82a1.png" alt="CSS Bytes Are Converted Into The CSSOM" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image4.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image4-300x94.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image4.jpg"/></noscript></figure>
<p>CSS有一种叫做<a href="https://blog.logrocket.com/how-css-works-understanding-the-cascade-d181cd89a4d8" target="_blank" rel="noopener noreferrer">级联</a>的东西。层叠是浏览器决定将什么样式应用于元素的方式。因为影响元素的样式可能来自父元素(例如，通过继承)，或者已经在元素本身上设置，所以CSSOM树结构变得很重要。</p>
<p>为什么？这是因为浏览器必须递归地遍历CSS树结构，并确定影响特定元素的样式。</p>
<p>一切都好。浏览器有DOM和CSSOM对象。我们现在能把一些东西渲染到屏幕上吗？</p>
<h2>渲染树</h2>
<p>我们现在拥有的是两个独立的树状结构，它们似乎没有共同的目标。</p>
<figure class="wp-caption">
<p><figure id="attachment_61136" aria-describedby="caption-attachment-61136" class="wp-caption aligncenter"><img data-attachment-id="61136" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image14-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image14.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-dom-cssom-tree-structures" data-image-description="" data-image-caption="&lt;p&gt;The DOM and CSSOM are independent tree structures.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image14-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image14.jpg" decoding="async" class="wp-image-61136 size-full jetpack-lazy-image" src="../Images/f568a8c44285ec462bf3cf7d0db78bb9.png" alt="The DOM and CSSOM are independent tree structures" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image14.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image14-300x241.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image14.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image14.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61136" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image14-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image14.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-dom-cssom-tree-structures" data-image-description="" data-image-caption="&lt;p&gt;The DOM and CSSOM are independent tree structures.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image14-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image14.jpg" decoding="async" loading="lazy" class="wp-image-61136 size-full" src="../Images/f568a8c44285ec462bf3cf7d0db78bb9.png" alt="The DOM and CSSOM are independent tree structures" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image14.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image14-300x241.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image14.jpg"/></noscript><figcaption id="caption-attachment-61136" class="wp-caption-text">DOM和CSSOM是独立的树形结构。</figcaption> </figure></p></figure>
<p>DOM和CSSOM树结构是两个独立的结构。DOM包含关于页面HTML元素关系的所有信息，而CSSOM包含关于元素样式的信息。</p>
<p>好了，浏览器现在将DOM和CSSOM树合并成一棵渲染树。</p>
<figure class="wp-caption">
<p><figure id="attachment_61137" aria-describedby="caption-attachment-61137" class="wp-caption aligncenter"><img data-attachment-id="61137" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image22/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image22.jpg" data-orig-size="730,320" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-worksDOM-CSSOM-render-tree" data-image-description="" data-image-caption="&lt;p&gt;DOM + CSSOM = Render tree&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image22-300x132.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image22.jpg" decoding="async" class="wp-image-61137 size-full jetpack-lazy-image" src="../Images/bc984987fdc6ac2566e6ad25a0f715a4.png" alt="DOM-CSSOM-render-tree" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image22.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image22-300x132.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image22.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image22.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61137" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image22/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image22.jpg" data-orig-size="730,320" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-worksDOM-CSSOM-render-tree" data-image-description="" data-image-caption="&lt;p&gt;DOM + CSSOM = Render tree&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image22-300x132.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image22.jpg" decoding="async" loading="lazy" class="wp-image-61137 size-full" src="../Images/bc984987fdc6ac2566e6ad25a0f715a4.png" alt="DOM-CSSOM-render-tree" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image22.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image22-300x132.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image22.jpg"/></noscript><figcaption id="caption-attachment-61137" class="wp-caption-text">DOM+CSSOM =渲染树</figcaption> </figure></p></figure>
<p>呈现树包含页面上所有可见DOM内容的信息，以及不同节点所需的所有CSSOM信息。注意，如果一个元素被CSS隐藏(例如，通过使用<code>display; none</code>)，该节点将不会在渲染树中显示。</p>
<p>隐藏元素将出现在DOM中，但不会出现在呈现树中。这是因为渲染树结合了来自DOM和CSSOM的信息，所以它知道不要在树中包含隐藏元素。</p>
<p>渲染树构建完成后，浏览器进入下一步:布局！</p>
<h3>布局渲染树</h3>
<p>渲染树构建完成后，下一步是执行布局。现在，我们有了屏幕上所有可见内容的内容和样式信息，但是实际上我们还没有向屏幕呈现任何内容。</p>
<p>首先，浏览器必须计算页面上每个对象的确切大小和位置。这就像将页面上要呈现的所有元素的内容和样式信息传递给一个天才的数学家。这位数学家然后用浏览器视窗计算出每个元素的确切位置和大小。</p>
<p><img data-attachment-id="61138" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image2-11/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image2.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-layout-progress" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image2-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image2.jpg" decoding="async" class="aligncenter wp-image-61138 size-full jetpack-lazy-image" src="../Images/087840cd7c16a06615659c446b888107.png" alt="Layout In Progress" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image2.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image2-300x241.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image2.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image2.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61138" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image2-11/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image2.jpg" data-orig-size="730,587" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-layout-progress" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image2-300x241.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image2.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61138 size-full" src="../Images/087840cd7c16a06615659c446b888107.png" alt="Layout In Progress" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image2.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image2-300x241.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image2.jpg"/></noscript>
<figure class="wp-caption">Amazing, right?</figure>
<p>这个布局步骤(您有时会听到称为“reflow”步骤)考虑了从DOM和CSSOM接收的内容和样式，并进行所有必要的布局计算。</p>
<h3>让艺术家出来</h3>
<p>现在已经计算出了每个元素的确切位置，剩下的工作就是将元素“绘制”到屏幕上。想想看:我们已经获得了在屏幕上实际显示元素所需的所有信息。让我们把它展示给用户，好吗？</p>
<p>是啊！这正是这个舞台的意义所在。有了关于内容(DOM)、样式(CSSOM)的信息，以及计算出的元素的确切布局，浏览器现在将单个节点“绘制”到屏幕上。最后，元素现在被渲染到屏幕上！</p>
<h2>渲染阻塞资源</h2>
<p>当你听到渲染阻塞时，你会想到什么？嗯，我的猜测是，“阻止在屏幕上实际绘制节点的东西”。"</p>
<p>如果你那样说，你绝对是对的！</p>
<p>优化网站的第一条规则是尽快将最重要的HTML和CSS交付给客户。DOM和CSSOM必须在成功绘制之前构建，因此HTML和CSS都是渲染阻塞资源。</p>
<p>关键是，你应该尽可能快地把你的HTML和CSS送到客户端，以优化你的应用程序第一次呈现的时间。</p>
<h2>但是等等JavaScript呢？</h2>
<p>一个像样的web应用程序肯定会用到一些JavaScript。那是必然的。JavaScript的“问题”是您可以使用JavaScript修改页面的内容和样式。记得吗？</p>
<p>这意味着，您可以从DOM树中删除和添加元素，也可以通过JavaScript修改元素的CSSOM属性。</p>
<p>这太棒了！然而，这是有代价的。考虑下面的HTML文档:</p>
<pre class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;
    &lt;title&gt;Medium Article Demo&lt;/title&gt;
    &lt;link rel="stylesheet" href="style.css"&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;p id="header"&gt;How Browser Rendering Works&lt;/p&gt;
    &lt;div&gt;&lt;img src="https://i.imgur.com/jDq3k3r.jpg"&gt;
&lt;/body&gt;

&lt;/html&gt;</pre>
<p>这是一份非常简单的文件。</p>
<p><code>style.css</code>样式表有一个声明，如下所示:</p>
<pre class="css">body {
  background: #8cacea;
}</pre>
<p>这样的结果是:</p>
<figure class="wp-caption">
<p><figure id="attachment_61139" aria-describedby="caption-attachment-61139" class="wp-caption aligncenter"> <img data-attachment-id="61139" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image17-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image17.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-basic-HTML-page-rendered" data-image-description="" data-image-caption="&lt;p&gt;A basic HTML page rendered.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image17-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image17.png" decoding="async" class="wp-image-61139 size-full jetpack-lazy-image" src="../Images/be2f07ff0f8ce98b11574137fe2eecdc.png" alt="basic HTML page rendered" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image17.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image17-300x153.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image17.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image17.png"/> <noscript> <img data-lazy-fallback="1" data-attachment-id="61139" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image17-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image17.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-basic-HTML-page-rendered" data-image-description="" data-image-caption="&lt;p&gt;A basic HTML page rendered.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image17-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image17.png" decoding="async" loading="lazy" class="wp-image-61139 size-full" src="../Images/be2f07ff0f8ce98b11574137fe2eecdc.png" alt="basic HTML page rendered" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image17.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image17-300x153.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image17.png"/> </noscript> <figcaption id="caption-attachment-61139" class="wp-caption-text">一个基本的HTML页面呈现。</figcaption> </figure></p></figure>
<p>一个简单的文本和图像呈现在屏幕上。根据前面的解释，浏览器从磁盘(或网络)读取HTML文件的原始字节，并将其转换为字符。</p>
<p>字符被进一步解析成标记。一旦解析器到达带有<code>&lt;link rel="stylesheet" href="style.css"&gt;</code>的行，就发出获取CSS文件的请求，<code>style.css</code>DOM构造继续进行，一旦CSS文件返回一些内容，就开始CSSOM构造。</p>
<p>一旦我们引入JavaScript，这个流程会发生什么变化？嗯，要记住的最重要的事情之一是，每当浏览器遇到一个<code>script</code>标签，DOM构造就会暂停！整个DOM构造过程会暂停，直到脚本执行完毕。</p>
<figure class="wp-caption"><img data-attachment-id="61140" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image3-13/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image3.jpg" data-orig-size="730,241" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-dom-construction" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image3-300x99.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image3.jpg" decoding="async" class="aligncenter wp-image-61140 size-full jetpack-lazy-image" src="../Images/552d9ac8826ceb996aaef334d390f328.png" alt="The DOM Construction Is Halted Until Scripts Finish Executing" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image3.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image3-300x99.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image3.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image3.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61140" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image3-13/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image3.jpg" data-orig-size="730,241" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-dom-construction" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image3-300x99.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image3.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61140 size-full" src="../Images/552d9ac8826ceb996aaef334d390f328.png" alt="The DOM Construction Is Halted Until Scripts Finish Executing" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image3.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image3-300x99.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image3.jpg"/></noscript></figure>
<p>这是因为JavaScript可以改变DOM和CSSOM。因为浏览器不确定这个特定的JavaScript会做什么，所以它采取了预防措施，完全停止了整个DOM构造。</p>
<p>这能有多糟？让我们看一看。</p>
<p>在我之前分享的基本HTML文档中，让我们引入一个带有一些基本JavaScript的<code>script</code>标签:</p>
<pre class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;
    &lt;title&gt;Medium Article Demo&lt;/title&gt;
    &lt;link rel="stylesheet" href="style.css"&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;p id="header"&gt;How Browser Rendering Works&lt;/p&gt;
    &lt;div&gt;&lt;img src="https://i.imgur.com/jDq3k3r.jpg"&gt;
    &lt;script&gt;
        let header = document.getElementById("header");

        console.log("header is: ", header);
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;</pre>
<p>在<code>script</code>标记中，我正在访问带有<code>id</code>和<code>header</code>的节点的DOM，然后将它记录到控制台。</p>
<p>这很好，如下所示:</p>
<figure class="wp-caption">
<p><figure id="attachment_61141" aria-describedby="caption-attachment-61141" class="wp-caption aligncenter"><img data-attachment-id="61141" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image20/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image20.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-dom-successful" data-image-description="" data-image-caption="&lt;p&gt;The DOM operation was successful.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image20-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image20.png" decoding="async" class="wp-image-61141 size-full jetpack-lazy-image" src="../Images/c3538ad256c8bbe40a9428e4dbb796d4.png" alt="The DOM operation was successful." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image20.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image20-300x153.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image20.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image20.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="61141" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image20/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image20.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-dom-successful" data-image-description="" data-image-caption="&lt;p&gt;The DOM operation was successful.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image20-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image20.png" decoding="async" loading="lazy" class="wp-image-61141 size-full" src="../Images/c3538ad256c8bbe40a9428e4dbb796d4.png" alt="The DOM operation was successful." srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image20.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image20-300x153.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image20.png"/></noscript><figcaption id="caption-attachment-61141" class="wp-caption-text">DOM操作成功。</figcaption> </figure></p></figure>
<p>但是，您是否注意到这个<code>script</code>标签被放在了<code>body</code>标签的底部？让我们把它放在头部，看看会发生什么:</p>
<pre class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;
    &lt;title&gt;Medium Article Demo&lt;/title&gt;
    &lt;link rel="stylesheet" href="style.css"&gt;
    &lt;script&gt;
        let header = document.getElementById("header");

        console.log("header is: ", header);
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;p id="header"&gt;How Browser Rendering Works&lt;/p&gt;
    &lt;div&gt;&lt;img src="https://i.imgur.com/jDq3k3r.jpg"&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>一旦我这样做了，头变量就被解析为<code>null</code>。</p>
<figure class="wp-caption">
<p><figure id="attachment_61143" aria-describedby="caption-attachment-61143" class="wp-caption aligncenter"><img data-attachment-id="61143" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image8-5/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image8.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-dom-operation-failed" data-image-description="" data-image-caption="&lt;p&gt;The DOM operation failed ☹️&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image8-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image8.png" decoding="async" class="wp-image-61143 size-full jetpack-lazy-image" src="../Images/85d1494d2849b9ac88fd490ffbc0f1a6.png" alt="The DOM operation failed" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image8.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image8-300x153.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image8.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image8.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="61143" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image8-5/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image8.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-dom-operation-failed" data-image-description="" data-image-caption="&lt;p&gt;The DOM operation failed ☹️&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image8-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image8.png" decoding="async" loading="lazy" class="wp-image-61143 size-full" src="../Images/85d1494d2849b9ac88fd490ffbc0f1a6.png" alt="The DOM operation failed" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image8.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image8-300x153.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image8.png"/></noscript><figcaption id="caption-attachment-61143" class="wp-caption-text">DOM操作失败的☹️ </figcaption> </figure></p></figure>
<p>为什么？很简单。</p>
<p>当HTML解析器在构建DOM的过程中，发现了一个<code>script </code>标签。此时，<code>body</code>标签及其所有内容还没有被解析。DOM构造会暂停，直到脚本执行完毕:</p>
<figure class="wp-caption">
<p><figure id="attachment_61145" aria-describedby="caption-attachment-61145" class="wp-caption aligncenter"><img data-attachment-id="61145" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image21-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1.png" data-orig-size="687,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-DOM-construction-halted" data-image-description="" data-image-caption="&lt;p&gt;Where the DOM construction is halted.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1-300x213.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1.png" decoding="async" class="wp-image-61145 size-full jetpack-lazy-image" src="../Images/e358f0fff1b7acf085125a7364bbb3a8.png" alt="Screenshot of code Where the DOM construction is halted" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1.png 687w, https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1-300x213.png 300w" data-lazy-sizes="(max-width: 687px) 100vw, 687px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="61145" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image21-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1.png" data-orig-size="687,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-works-DOM-construction-halted" data-image-description="" data-image-caption="&lt;p&gt;Where the DOM construction is halted.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1-300x213.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1.png" decoding="async" loading="lazy" class="wp-image-61145 size-full" src="../Images/e358f0fff1b7acf085125a7364bbb3a8.png" alt="Screenshot of code Where the DOM construction is halted" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1.png 687w, https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1-300x213.png 300w" sizes="(max-width: 687px) 100vw, 687px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image21-1.png"/></noscript><figcaption id="caption-attachment-61145" class="wp-caption-text">DOM建设暂停的地方。</figcaption> </figure></p></figure>
<p>当<code>script</code>试图访问一个<code>id</code>为<code>header</code>的DOM节点时，它已经不存在了，因为DOM还没有完成对文档的解析！</p>
<p>这给我们带来了另一个要点:脚本的位置很重要。</p>
<figure class="wp-caption"><img data-attachment-id="61146" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image6-5/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image6.jpg" data-orig-size="730,241" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-location-script-matters" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image6-300x99.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image6.jpg" decoding="async" class="aligncenter wp-image-61146 size-full jetpack-lazy-image" src="../Images/b6a15a50c8a76a2ece41e715bf89afa3.png" alt="The Location Of Your Script Matters" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image6.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image6-300x99.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image6.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image6.jpg"/><noscript><img data-lazy-fallback="1" data-attachment-id="61146" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image6-5/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image6.jpg" data-orig-size="730,241" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-location-script-matters" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image6-300x99.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image6.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61146 size-full" src="../Images/b6a15a50c8a76a2ece41e715bf89afa3.png" alt="The Location Of Your Script Matters" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image6.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image6-300x99.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image6.jpg"/></noscript></figure>
<p>这还不是全部。如果您将内联<code>script</code>提取到一个外部本地文件，行为是一样的。DOM构造仍然处于暂停状态:</p>
<pre class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;
    &lt;title&gt;Medium Article Demo&lt;/title&gt;
    &lt;link rel="stylesheet" href="style.css"&gt;
    &lt;script src="app.js"&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;p id="header"&gt;How Browser Rendering Works&lt;/p&gt;
    &lt;div&gt;&lt;img src="https://i.imgur.com/jDq3k3r.jpg"&gt;
&lt;/body&gt;

&lt;/html&gt;</pre>
<p>同样，这还不是全部！如果这个<code>app.js</code>不是本地的，而是必须通过互联网获取，那该怎么办？</p>
<pre class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;
    &lt;title&gt;Medium Article Demo&lt;/title&gt;
    &lt;link rel="stylesheet" href="style.css"&gt;
    &lt;script src="https://some-link-to-app.js"&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;p id="header"&gt;How Browser Rendering Works&lt;/p&gt;
    &lt;div&gt;&lt;img src="https://i.imgur.com/jDq3k3r.jpg"&gt;
&lt;/body&gt;

&lt;/html&gt;</pre>
<p>如果网络很慢，并且获取<code>app.js</code>需要几千毫秒，那么DOM构造也会停止几千毫秒！这是一个很大的性能问题，<em>还有，</em>这还不是全部。请记住，JavaScript也可以访问CSSOM并对其进行更改。例如，这是有效的JavaScript:</p>
<pre class="javascript">document.getElementsByTagName("body")[0].style.backgroundColor = "red";</pre>
<p>那么，当解析器遇到一个<code>script</code>标签，但是CSSOM还没有准备好的时候会发生什么呢？</p>
<p>答案很简单:Javascript执行将被暂停，直到CSSOM准备好。</p>
<p><img data-attachment-id="61147" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image23/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image23.jpg" data-orig-size="730,241" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-javascript-execution" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image23-300x99.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image23.jpg" decoding="async" class="aligncenter wp-image-61147 size-full jetpack-lazy-image" src="../Images/bf77fb9316e9e06bef0957300119202f.png" alt="JavaScript Execution Will Be Halted Until The CSSOM Is Ready" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image23.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image23-300x99.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image23.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image23.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61147" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image23/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image23.jpg" data-orig-size="730,241" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rendering-javascript-execution" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image23-300x99.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image23.jpg" decoding="async" loading="lazy" class="aligncenter wp-image-61147 size-full" src="../Images/bf77fb9316e9e06bef0957300119202f.png" alt="JavaScript Execution Will Be Halted Until The CSSOM Is Ready" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image23.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image23-300x99.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image23.jpg"/></noscript>
<p>因此，即使DOM构造在遇到一个遇到的<code>script</code>标记之前停止，CSSOM也不会发生这种情况。</p>
<p>对于CSSOM，JS执行等待。没有CSSOM，就没有JS执行。</p>
<h3>异步属性</h3>
<p>默认情况下，每个脚本都是解析器拦截器！DOM构造将总是停止。</p>
<p>不过，有一种方法可以改变这种默认行为。</p>
<p>如果将<code>async</code>关键字添加到<code>script</code>标签中，DOM的构建将不会停止。DOM构造将继续，脚本将在下载完成并准备就绪后执行。</p>
<p>这里有一个例子:</p>
<pre class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;
    &lt;title&gt;Medium Article Demo&lt;/title&gt;
    &lt;link rel="stylesheet" href="style.css"&gt;
    &lt;script src="https://some-link-to-app.js" async&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;p id="header"&gt;How Browser Rendering Works&lt;/p&gt;
    &lt;div&gt;&lt;img src="https://i.imgur.com/jDq3k3r.jpg"&gt;
&lt;/body&gt;

&lt;/html&gt;
</pre>
<h2>关键渲染路径(CRP)</h2>
<p>在这段时间里，我们讨论了接收HTML、CSS和JS字节并将其转化为屏幕上呈现的像素之间的步骤。</p>
<p>这整个过程被称为关键渲染路径(CRP)。优化你的网站性能就是优化CRP。一个优化良好的站点应该进行渐进式渲染，而不是阻塞整个过程。</p>
<p><img data-attachment-id="61148" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image7-4/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image7.png" data-orig-size="730,80" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rending-path" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image7-300x33.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image7.png" decoding="async" class="aligncenter wp-image-61148 size-full jetpack-lazy-image" src="../Images/3a312046ee6b0fec8b95eae9c2bbf67c.png" alt="An Illustration Of The Critical Rendering Path" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image7.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image7-300x33.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image7.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image7.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61148" data-permalink="https://blog.logrocket.com/how-browser-rendering-works-behind-scenes/image7-4/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image7.png" data-orig-size="730,80" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browser-rending-path" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image7-300x33.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/image7.png" decoding="async" loading="lazy" class="aligncenter wp-image-61148 size-full" src="../Images/3a312046ee6b0fec8b95eae9c2bbf67c.png" alt="An Illustration Of The Critical Rendering Path" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/image7.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/image7-300x33.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/image7.png"/></noscript>
<p>这就是一个web应用被认为是慢还是快的区别。</p>
<p>一个经过深思熟虑的CRP优化策略使浏览器能够通过确定加载资源的优先级和加载顺序来尽可能快地加载页面。</p>
<div class="inline-plug cro19">
<h2>跟踪应用程序的渲染方式</h2>
<p>既然您已经知道了浏览器渲染的工作原理，那么确保应用程序中的组件和元素按照您的预期进行渲染就非常重要了。如果你有兴趣监控和跟踪与浏览器渲染相关的问题<em>和</em>看看用户如何与特定组件交互，<a href="https://logrocket.com/signup/">试试LogRocket </a>。<img data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-lazy-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/></noscript><a class="signup" href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer"><img data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" loading="lazy" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a></p>
<p>LogRocket 就像是网络应用的DVR，记录下你网站上发生的每一件事。不用猜测你的应用或网站在特定浏览器中的表现，你可以确切地看到用户体验到了什么。使用LogRocket，您可以了解用户如何与组件进行交互，以及如何处理与元素未正确呈现相关的任何错误。</p>
<p>此外，LogRocket记录Redux存储中的所有操作和状态。LogRocket让你的应用程序记录带有标题和正文的请求/响应。它还记录页面上的HTML和CSS，甚至可以重建最复杂的单页面应用程序的像素级完美视频。现代化您调试React应用的方式— <a class="signup" href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p>
</div>
<h2>结论</h2>
<p>了解了浏览器如何呈现HTML、CSS和JS的基础知识后，我恳请您花时间探索如何利用这些知识来优化页面速度。</p>
<p>一个好的起点是Google Web基础文档的<a href="https://developers.google.com/web/fundamentals/performance/why-performance-matters/" target="_blank" rel="noopener noreferrer">性能部分</a>。</p><div class="code-block code-block-27">
<div class="blog-plug inline-plug vanilla-javascript-cta"><h2>通过理解上下文，更容易地调试JavaScript错误</h2>
<p>调试代码总是一项乏味的任务。但是你越了解你的错误就越容易改正。</p>
<p>LogRocket 让你以新的独特的方式理解这些错误。我们的前端监控解决方案跟踪用户与您的JavaScript前端的互动，让您能够准确找出导致错误的用户行为。</p>
<a href="https://lp.logrocket.com/blg/javascript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/cbfed9be3defcb505e662574769a7636.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reproduce-javascript-errors.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reproduce-javascript-errors.gif"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/cbfed9be3defcb505e662574769a7636.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reproduce-javascript-errors.gif"/></noscript></a>
<p>LogRocket记录控制台日志、页面加载时间、堆栈跟踪、慢速网络请求/响应(带有标题+正文)、浏览器元数据和自定义日志。理解您的JavaScript代码的影响从来没有这么简单过！</p>
<a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>