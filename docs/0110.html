<html>
<head>
<title>Why you should use CSS env() - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>为什么应该使用CSS env() - LogRocket Blog</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/why-you-should-use-css-env-9ee719ce0f24/#0001-01-01">https://blog.logrocket.com/why-you-should-use-css-env-9ee719ce0f24/#0001-01-01</a></blockquote><div><article class="article-post">
<figure><img decoding="async" src="../Images/c02acb84cc3a8bac7f5120daaa6bfa19.png" data-height="700" data-width="1240" data-lazy-src="https://cdn-images-1.medium.com/max/1200/1*gGeiKQHdTkiE7MJWpaDbcw.png?zoom=2&amp;resize=730%2C412&amp;ssl=1&amp;is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://cdn-images-1.medium.com/max/1200/1*gGeiKQHdTkiE7MJWpaDbcw.png?zoom=2&amp;resize=730%2C412&amp;ssl=1"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/c02acb84cc3a8bac7f5120daaa6bfa19.png" data-height="700" data-width="1240" data-original-src="https://cdn-images-1.medium.com/max/1200/1*gGeiKQHdTkiE7MJWpaDbcw.png?zoom=2&amp;resize=730%2C412&amp;ssl=1"/></noscript></figure>
<p>难以保持共享的CSS和JavaScript值更新和同步？更新共享值时，你是否面临看似随机的bug？在本文中，您将了解如何使用即将推出的CSS env()特性和PostCSS插件在CSS和JS之间共享相同的变量，并将它们存储在一个文件中。</p>
<p>这里有一个你可能已经面对过的常见场景:</p>
<ul>
<li><em>你有一个相对复杂、响应迅速的设计来实现</em></li>
<li>单独的CSS选择器和calc()不能影响设计，所以你求助于你信任的朋友JavaScript </li>
<li><em>要解决这个问题，你需要从JavaScript </em>访问CSS值(例如容器尺寸、间距值)</li>
</ul>
<p>您现在面临一个选择，是单独用JavaScript管理变量，还是使用内联样式来应用样式？</p>
<p>或者你在两个地方管理变量，CSS和JS文件？</p>
<p>你进退两难。两种解决方案都不令人满意。</p>
<p>一方面，通过应用内联样式，您放弃了用任何其他方法覆盖样式的机会。现在，您必须始终使用内联样式来覆盖您应用的特定声明。</p>
<p>在下面的例子中，<code>MyComponent</code>将总是“红色”,字体大小为2，因为内联样式优先于应用于组件的类名:</p>
<figure class="wp-caption">
<pre><code>.my-component {
  font-size: 1rem;
  color: blue;
}</code></pre><figcaption class="wp-caption-text">Inline styles take priority</figcaption></figure>
<p>另一方面，管理两个不同文件中的变量会使您面临维护风险。如果需要更改值，就有可能只在其中一个文件中更新值，导致应用程序以奇怪的方式中断。</p>
<p>但是还有一个办法！</p>

<p>一些伪代码展示了在CSS和JS之间共享变量的可能性。来源:<a href="https://twitter.com/HarryNicholls/status/1104790799508819969" target="_blank" rel="noopener noreferrer">哈里·尼科尔斯的推特</a></p>
<p>请允许我介绍一下<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/env" target="_blank" rel="noopener noreferrer"> CSS环境变量</a>，并向您展示如何在CSS和JS之间共享变量，同时将值存储在一个地方。</p>
<p>问题是</p>
<figure><a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer"><img decoding="async" src="../Images/0bf8cb5c46dcdcf8df1d2b095ac23efb.png" data-height="750" data-width="3212" data-lazy-src="https://cdn-images-1.medium.com/max/1200/1*GPjaPKNNUYHU8EsA3Z0JGA.png?zoom=2&amp;resize=730%2C170&amp;ssl=1&amp;is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://cdn-images-1.medium.com/max/1200/1*GPjaPKNNUYHU8EsA3Z0JGA.png?zoom=2&amp;resize=730%2C170&amp;ssl=1"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/0bf8cb5c46dcdcf8df1d2b095ac23efb.png" data-height="750" data-width="3212" data-original-src="https://cdn-images-1.medium.com/max/1200/1*GPjaPKNNUYHU8EsA3Z0JGA.png?zoom=2&amp;resize=730%2C170&amp;ssl=1"/></noscript></a></figure>
<h3>下面是我最近遇到的一个更具体的问题。</h3>
<p>比方说，我正在开发一个名为Color Explorer的应用程序，它允许用户查看颜色列表并选择一个要放大的颜色。</p>
<p>这是最初的版本:</p>
<p>看起来不错，有一个颜色列表，您可以单击小样本来更改大样本中显示的颜色。</p>
<figure class="wp-caption"><img decoding="async" src="../Images/638009ed4f285cafa07ff22a156100e2.png" data-height="1050" data-width="1680" data-lazy-src="https://i0.wp.com/cdn-images-1.medium.com/max/800/0*xYBS6HaB4qfi1YpZ.gif?zoom=2&amp;resize=730%2C456&amp;ssl=1&amp;is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://i0.wp.com/cdn-images-1.medium.com/max/800/0*xYBS6HaB4qfi1YpZ.gif?zoom=2&amp;resize=730%2C456&amp;ssl=1"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/638009ed4f285cafa07ff22a156100e2.png" data-height="1050" data-width="1680" data-original-src="https://i0.wp.com/cdn-images-1.medium.com/max/800/0*xYBS6HaB4qfi1YpZ.gif?zoom=2&amp;resize=730%2C456&amp;ssl=1"/></noscript><figcaption class="wp-caption-text">Color Explorer with overflowing color list</figcaption></figure>
<p>但是我不喜欢你必须向下滚动才能看到所有的颜色，我希望它们被限制在一行中。</p>
<p>最简单的解决方案是对颜色列表应用overflow: hidden:</p>
<p>看起来不错，但是有个问题。</p>
<figure class="wp-caption"><img decoding="async" src="../Images/0cf9734ce6b28bf00fec12e734827125.png" data-height="1467" data-width="2600" data-lazy-src="https://cdn-images-1.medium.com/max/1200/0*9QAMYIJ8SHS3TbUL.png?zoom=2&amp;resize=730%2C412&amp;ssl=1&amp;is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://cdn-images-1.medium.com/max/1200/0*9QAMYIJ8SHS3TbUL.png?zoom=2&amp;resize=730%2C412&amp;ssl=1"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/0cf9734ce6b28bf00fec12e734827125.png" data-height="1467" data-width="2600" data-original-src="https://cdn-images-1.medium.com/max/1200/0*9QAMYIJ8SHS3TbUL.png?zoom=2&amp;resize=730%2C412&amp;ssl=1"/></noscript><figcaption class="wp-caption-text">Color Explorer with overflow: hiddenapplied to the ColorListcomponent</figcaption></figure>
<p>即使溢出的样本在视觉上是隐藏的，我仍然可以使用键盘来访问它们:</p>
<p>这是一个问题。</p>
<figure class="wp-caption"><img decoding="async" src="../Images/81cc85bc37064696bdbd2f6be006a34c.png" data-height="1050" data-width="1680" data-lazy-src="https://cdn-images-1.medium.com/max/1200/0*EdUChZ6GmA4NgEly.gif?zoom=2&amp;resize=730%2C456&amp;ssl=1&amp;is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://cdn-images-1.medium.com/max/1200/0*EdUChZ6GmA4NgEly.gif?zoom=2&amp;resize=730%2C456&amp;ssl=1"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/81cc85bc37064696bdbd2f6be006a34c.png" data-height="1050" data-width="1680" data-original-src="https://cdn-images-1.medium.com/max/1200/0*EdUChZ6GmA4NgEly.gif?zoom=2&amp;resize=730%2C456&amp;ssl=1"/></noscript><figcaption class="wp-caption-text">Visually hidden color swatches can be accessed via the Tab button</figcaption></figure>
<p>我需要我们的朋友JavaScript的一点帮助来解决这个问题。</p>
<p>我要做的是测量颜色列表容器，计算一行可以容纳多少颜色样本，并隐藏和禁用所有其他颜色样本。</p>
<p>要做到这一点，我需要知道颜色列表容器有多宽，每个颜色样本有多宽(包括边距)，以及在颜色列表容器的一行中有多少个颜色样本可以并排放置。</p>
<p>我不能从CSS中这样做，因为颜色列表容器是响应性的:</p>
<p>色板的宽度是固定的，现在它们的宽度是通过CSS设置的，那么我们如何从JS访问这些信息呢？</p>
<figure class="wp-caption"><img decoding="async" src="../Images/5ee1640903e9e2c42d5032edeffe5e1a.png" data-height="1050" data-width="1680" data-lazy-src="https://i0.wp.com/cdn-images-1.medium.com/max/800/0*QyxCp6FcjEtbN59y.gif?zoom=2&amp;resize=730%2C456&amp;ssl=1&amp;is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://i0.wp.com/cdn-images-1.medium.com/max/800/0*QyxCp6FcjEtbN59y.gif?zoom=2&amp;resize=730%2C456&amp;ssl=1"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/5ee1640903e9e2c42d5032edeffe5e1a.png" data-height="1050" data-width="1680" data-original-src="https://i0.wp.com/cdn-images-1.medium.com/max/800/0*QyxCp6FcjEtbN59y.gif?zoom=2&amp;resize=730%2C456&amp;ssl=1"/></noscript><figcaption class="wp-caption-text">Desired responsive behavior of the color palette</figcaption></figure>
<p>解决方案1:冒险的方式</p>
<h3>最容易实现的解决方案是在JS中存储<code>ColorSwatch</code> width变量。</h3>
<p>只需将值复制并粘贴到JS文件中，如下所示:</p>
<p>请看<a href="https://codepen.io"> CodePen </a>上卢克·图比尼斯(<a href="https://codepen.io/lukelogrocket">@卢克·格罗基特</a> ) <br/>的笔<a href="https://codepen.io/lukelogrocket/pen/BEGNwM/"> <br/> CSS ENV </a>。</p>
<p class="codepen" data-height="265" data-theme-id="0" data-default-tab="js,result" data-user="lukelogrocket" data-slug-hash="BEGNwM" data-pen-title="CSS ENV">See the Pen <a href="https://codepen.io/lukelogrocket/pen/BEGNwM/"><br/>
CSS ENV</a> by Luke Tubinis (<a href="https://codepen.io/lukelogrocket">@lukelogrocket</a>)<br/>
on <a href="https://codepen.io">CodePen</a>.</p>
<p>ColorSwatchSelector的初始版本</p>
<p>(<strong>注意:</strong> <code>Measure</code>取自一个名为<a href="https://github.com/souporserious/react-measure" target="_blank" rel="noopener noreferrer"> react-measure </a>的库，<code>onResize</code>事件让你访问被引用的HTML元素的维度，在本例中是<code>&lt;ul&gt;</code>。)</p>
<p>酷！那有效！</p>
<p>这是一个简单的解决方案，但很脆弱。</p>
<p>当您或者您团队中从未处理过组件的其他人不得不更新<code>ColorSwatch</code>宽度时，会发生什么？宽度值只在一个地方更新的风险很大，很可能CSS文件和应用程序会崩溃。开发人员需要一段时间来理解为什么应用程序坏了，以及如何修复它。</p>
<p>您可以通过使用CSS环境变量来避免这种风险。</p>
<p>解决方案2: CSS环境变量</p>
<h3>Enter，CSS env()。</h3>
<p>这是<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/env" target="_blank" rel="noopener noreferrer"> MDN </a>的描述:</p>
<p>env() CSS函数可用于将用户代理定义的环境变量的值插入到CSS中，其方式与var()函数和自定义属性类似</p>
<blockquote><p>本质上，您可以定义全局变量，这些变量可以在属性值可以使用的任何地方使用，包括媒体查询。</p></blockquote>
<p>CSS env()还不是官方CSS规范的一部分，但是<a href="https://drafts.csswg.org/css-env-1/#env-function" target="_blank" rel="noopener noreferrer"> env()规范</a>在“编辑草案”中，并且有<a href="https://caniuse.com/#feat=css-env-function" target="_blank" rel="noopener noreferrer">对它的重要浏览器支持</a>，所以一旦所有的细节最终确定，它将成为CSS规范的一部分。</p>
<p>你可以查看草案规范，但是TL；DR:关于如何在CSS中访问环境变量已经有了共识，但是目前还没有办法定义或加载它们。</p>
<p>然而，现在您可以通过一个简洁的PostCSS插件来使用CSS env()。</p>
<p>首先，你需要添加<a href="https://github.com/postcss/postcss" target="_blank" rel="noopener noreferrer"> PostCSS </a>和<a href="https://github.com/jonathantneal/postcss-env-function" target="_blank" rel="noopener noreferrer"> postcss-env-function </a>插件到你的项目中。</p>
<p>(如果你使用的是create-react-apps，那么PostCSS已经安装好了，在<a href="https://github.com/jonathantneal/postcss-env-function" target="_blank" rel="noopener noreferrer"> postcss-env-function GitHub页面</a>上有特殊的配置说明。)</p>
<p>您还需要创建一个名为css-env-variables.js的文件，如下所示:</p>
<p>这就是你的基本设置！您现在可以开始使用CSS env()，如下所示:</p>
<figure class="wp-caption">
<pre><code>module.exports = {
  environmentVariables: {
    '--color-swatch-size': '10rem'
  }
};</code></pre><figcaption class="wp-caption-text">Storing CSS variables in JS</figcaption></figure>
<p>很简单，是吧？</p>
<figure class="wp-caption">
<pre><code>.color-swatch {
  height: env(--color-swatch-size);
  width: env(--color-swatch-size);
}</code></pre><figcaption class="wp-caption-text">Use env() to access CSS environment variables</figcaption></figure>
<p>您可以添加任何您需要的变量，您在检查器中唯一能看到的是实际值。</p>
<p>即使现在在JavaScript文件中管理CSS变量，它们也没有多大帮助，因为每个值都包含了单位。因此，您仍然需要在两个单独的文件中维护JS和CSS变量。从技术上讲，您可以将CSS env变量导入到组件中。试试看！</p>
<p>要使用它们，你必须弄清楚如何从值中去掉单位，但是你真的认为这是你的应用程序应该担心的事情吗？</p>
<p>没有。</p>
<p>我们将在下一节讨论解决方案。</p>
<p>如何使用JS环境变量</p>
<h3>我和我的团队在当前项目中开始使用的模式是在一个单独的JS文件中定义数值，并将它们导入css-env-variables.js来构造css变量。</h3>
<p>这样，我们可以将JS值直接导入到任何其他需要它们的JS文件中，并使用相同的值来构造CSS环境变量。</p>
<p>我们这里只有数值，单位总是像素，因为它们在JS文件中更容易处理，我们可以将它们直接导入任何JS文件。</p>
<figure class="wp-caption">
<pre><code>module.exports = {
  colorSwatchSize: 160; // px
};</code></pre><figcaption class="wp-caption-text">Extract shared values to a separate JS module</figcaption></figure>
<p>现在我们快到了！</p>
<figure class="wp-caption">
<pre><code>import { colorSwatchSize } from 'path/to/your/js-env-variables';</code></pre><figcaption class="wp-caption-text">Import shared variables just like any other import</figcaption></figure>
<p>您可能已经注意到<code>js-env-variables.js</code>是一个CommonJS模块，而<code>some-other-file.js</code>是一个ES6模块。为什么不同？</p>
<p>因为<code>js-env-variables.js</code>没有传输。PostCSS插件只在构建时使用这个文件，所以我们需要把它写成一个CommonJS模块，这样它才可以使用。</p>
<p>然后，您可以在CSS环境变量文件中使用这些值，如下所示:</p>
<p>厉害！现在你只需要维护一个地方的价值观，真理的源泉。</p>
<figure class="wp-caption">
<pre><code>const { colorSwatchSize } = require('path/to/your/js-env-variables');

module.exports = {
  environmentVariables: {
    '--color-swatch-size': `${colorSwatchSize}px`
  }
};</code></pre><figcaption class="wp-caption-text">Import your JS variables, create CSS variables, and export to access them via env()</figcaption></figure>
<p>这有效地消除了忘记更新该变量的任何实例的风险，因为它只定义了一次。</p>
<p>我们可以做得更好！</p>
<h3>我会给你更好的。</h3>
<p>上面的设置使用了像素，但我最初在CSS中使用的是“rem ”,我想再次使用它。</p>
<p>如果您想设置这个系统为您的JS文件提供像素值，为您的CSS提供rem值，还需要几个额外的步骤:</p>
<p>系统需要知道你的根字体大小</p>
<ol>
<li>你需要一个px到rem的转换函数</li>
<li>您可以用与上述相同的方式定义根字体大小:</li>
</ol>
<p>请确保在您的主CSS文件中应用它:</p>
<figure class="wp-caption">
<pre><code>const {
  colorSwatchSize,
  rootFontSize
} = require('path/to/your/js-env-variables');

module.exports = {
  environmentVariables: {
    '--color-swatch-size': `${colorSwatchSize}px`,
    '--root-font-size': `${rootFontSize}px`
  }
};</code></pre><figcaption class="wp-caption-text">Managing root font size via CSS env()</figcaption></figure>
<p>现在，您可以创建一个px到rem的转换函数，并在CSS env变量文件中使用它:</p>
<figure class="wp-caption">
<pre><code>html {
  font-size: env(--root-font-size);
}</code></pre><figcaption class="wp-caption-text">Don’t forget to set the root font-size using env()</figcaption></figure>
<p>您应该能够看到您的<code>--color-swatch-size</code>变量现在在rem中，并且更改根字体大小值会影响它。</p>
<figure class="wp-caption">
<pre><code>const {
  colorSwatchSize,
  rootFontSize
} = require('path/to/your/js-env-variables');
const { getPxToRem } = require('path/to/your/px-to-rem');

const pxToRem = getPxToRem(rootFontSize);

module.exports = {
  environmentVariables: {
    '--color-swatch-size': pxToRem(colorSwatchSize),
    '--root-font-size': `${rootFontSize}px`
  }
};</code></pre><figcaption class="wp-caption-text">Converting px to rem</figcaption></figure>
<p>这是一个简洁的小设置，可以为您节省许多调试时间。</p>
<p>额外收获:如果我使用的是TypeScript呢？</p>
<h3>如果您使用TypeScript，有几个问题。</h3>
<p>您可能很难将JS环境变量和px-to-rem util导入CSS env变量文件。</p>
<p>您可以通过将这些文件设置为它们自己目录中的独立模块以及类型定义来解决这个问题。</p>
<p>您的目录结构应该如下所示:</p>
<p>您不需要更改JS文件的内容，只需将这些文件添加到<code>/js-env-variables</code>:</p>
<pre><code>src

</code><code>|-css-env-variables.js

</code><code>|-js-env-variables

</code><code>| |-index.d.ts

</code><code>| |-index.js

</code><code>|-px-to-rem

</code><code>|-index.d.ts

</code><code>|-index.js</code></pre>
<p>并将这些添加到<code>/px-to-rem</code>:</p>
<figure class="wp-caption">
<pre><code>export const colorSwatchSize: number;
export const rootFontSize: number;</code></pre><figcaption class="wp-caption-text">The contents of /js-env-variables</figcaption></figure>
<p>确保将<code>js-env-variables.js</code>和<code>px-to-rem.js</code>的名称改为<code>index.js</code>，并将它们放入各自的目录中。TypeScript编译器应该对此感到满意。</p>
<figure class="wp-caption">
<pre><code>export const getPxToRem: (rootFontSize: number) =&gt; (pxValue: number) =&gt; string;</code></pre><figcaption class="wp-caption-text">The contents of /px-to-rem</figcaption></figure>
<p>这样做让编译器知道这些模块的存在，并给它一些关于它们类型的信息。</p>
<p>在Netlify 上试用最终版本的<a href="https://infallible-swartz-e23661.netlify.com/" target="_blank" rel="noopener noreferrer">颜色浏览器。</a></p>
<p>结论</p>
<h3>我们在这里做的是把一个脆弱的、不干燥的系统，变得更干燥、更坚固。</h3>
<p>我们发现需要在CSS和JS之间共享变量，并发现最简单的解决方案(将相同的变量存储在两个不同的文件中)在变量需要改变时可能会失效。</p>
<p>现在，您拥有了在CSS和JS之间共享任何变量的工具，只需在一个地方根据需要更新值。这种解决方案提供了一种更健壮的共享变量的方式，并且当变量值改变时不太可能中断。</p>
<p>我在这里展示了一个简单的解决方案，只有一个共享变量。设置一个简单的应用程序需要花费相当多的精力，但这只是一个例子。在一个更大、更复杂的项目中尝试一下，我想你会发现这是值得的。</p>
<p>不再有寻找和替换的狩猎。不再有忘记更新某处元素高度实例的困扰。而且不会再出现随机bug，至少不会和你这样存储的CSS/JS变量有关。</p>
<p>如果你还不知道，我强烈推荐你在需要的地方使用这个设置来共享CSS和JS变量。未来-你会感激你所做的。</p>
<p><a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>:全面了解您的网络和移动应用</p><div class="code-block code-block-21">
<div class="blog-plug inline-plug typescript-plug"><h2>LogRocket 是一个前端应用程序监控解决方案，可以让您回放问题，就像问题发生在您自己的浏览器中一样。LogRocket不需要猜测错误发生的原因，也不需要向用户询问截图和日志转储，而是让您重放会话以快速了解哪里出错了。它可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。</h2>
<a href="https://lp.logrocket.com/blg/typescript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p>除了记录Redux操作和状态，LogRocket还记录控制台日志、JavaScript错误、堆栈跟踪、带有头+正文的网络请求/响应、浏览器元数据和自定义日志。它还使用DOM来记录页面上的HTML和CSS，甚至为最复杂的单页面和移动应用程序重新创建像素级完美视频。</p>
<p>你的前端是否占用了用户的CPU？</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>随着web前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端CPU使用、内存使用等感兴趣，</h2><p>.</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>LogRocket 就像是网络和移动应用的DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>现代化您调试web和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p><p>.</p></div>
</div>
<a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>