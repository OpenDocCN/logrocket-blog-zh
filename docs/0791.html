<html>
<head>
<title>Introduction to React Native Maps - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React原生地图介绍- LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/react-native-maps-introduction/#0001-01-01">https://blog.logrocket.com/react-native-maps-introduction/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:本帖于2021年10月更新，包含了新信息和更新的例子。</em></p>
<p>拥有关于用户位置的准确信息是增强用户体验的一个好方法。例如，您可以使用这些数据向用户展示他们周围的情况，为他们所在地区的产品和服务提供独家交易，等等。我们将讨论以下主题:</p>

<p>幸运的是，如果您有React应用程序，使用<a href="https://github.com/react-native-maps/react-native-maps" target="_blank" rel="noopener"> <code>react-native-maps</code>库</a>实现地图是轻而易举的事情。</p>
<h2 id="what-is-react-native-maps">什么是React原生地图？</h2>
<p>React Native Maps是一个地图组件系统，附带需要与React Native一起编译的平台本机代码。在本指南中，我们将演示如何将谷歌地图集成到您的React原生应用程序中，并向您介绍基本组件，如<code>&lt;MapView /&gt;</code>和<code>&lt;Marker&gt;</code>。</p>
<p>我们开始吧！</p>
<h3>装置</h3>
<p>在呈现我们的<code>MapView</code>组件之前，我们首先需要获得一个API键，将Google Maps功能整合到我们的应用程序中。为此，使用这些步骤获取您的<a href="https://developers.google.com/maps/documentation/android-sdk/get-api-key" target="_blank" rel="noopener"> API秘密。</a></p>
<p>接下来，在<code>android/app/src/main/AndroidManifest.xml</code>下，添加这段代码:</p>
<pre class="language-xml hljs">&lt;application&gt;
   &lt;!-- You will only need to add this meta-data tag, but make sure it's a child of application --&gt;
   &lt;meta-data
     android:name="com.google.android.geo.API_KEY"
     android:value="YOUR_API_KEY"/&gt; &lt;!-- Your key goes here. --&gt;
 
   &lt;!-- You will also only need to add this uses-library tag --&gt;
   &lt;uses-library android:name="org.apache.http.legacy" android:required="false"/&gt;
&lt;/application&gt;
</pre>
<p>这将把我们的SDK密钥连接到<a href="https://blog.logrocket.com/tag/react-native" target="_blank" rel="noopener"> React本地项目</a>。</p>
<p>接下来，运行以下命令将<code>react-native-maps</code>安装到您的项目中。</p>
<pre class="language-bash hljs">yarn add react-native-maps -E
npm install react-native-maps
#Expo requires a different version of this package.
# so if you are using Expo, run this instead:
expo install react-native-maps
</pre>
<h2 id="setting-up-map-default-view">设置地图默认视图</h2>
<p>从<code>App.js</code>文件中删除所有默认代码，并从<code>react-native-maps</code>导入<code>&lt;MapView /&gt;</code>组件。在组件内部，呈现<code>&lt;MapView /&gt;</code>组件。</p>
<pre class="language-javascript hljs">import React from "react";
import { StyleSheet, Text, View } from "react-native";
import MapView from "react-native-maps";
export default function App() {
  return (
    &lt;View style={styles.container}&gt;
    {/*Render our MapView*/}
      &lt;MapView
        style={styles.map}
        //specify our coordinates.
        initialRegion={{
          latitude: 37.78825,
          longitude: -122.4324,
          latitudeDelta: 0.0922,
          longitudeDelta: 0.0421,
        }}
      /&gt;
    &lt;/View&gt;
  );
}
//create our styling code:
const styles = StyleSheet.create({
  container: {
    ...StyleSheet.absoluteFillObject,
    flex: 1, //the container will fill the whole screen.
    justifyContent: "flex-end",
    alignItems: "center",
  },
  map: {
    ...StyleSheet.absoluteFillObject,
  },
});
</pre>
<p><code>initialRegion</code>属性显示了组件安装时将在地图上显示的区域。<code>initialRegion</code>值在初始化后不能更改。</p>
<p><img data-attachment-id="75575" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/setting-map-default-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/setting-map-default-view.gif" data-orig-size="730,1210" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="setting-map-default-view" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/setting-map-default-view-181x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/setting-map-default-view-618x1024.gif" decoding="async" class="aligncenter size-full wp-image-75575 jetpack-lazy-image" src="../Images/04bd455390132c73b9e7390f4c0530ce.png" alt="Setting the map default view" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/setting-map-default-view.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/setting-map-default-view.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75575" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/setting-map-default-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/setting-map-default-view.gif" data-orig-size="730,1210" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="setting-map-default-view" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/setting-map-default-view-181x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/setting-map-default-view-618x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75575" src="../Images/04bd455390132c73b9e7390f4c0530ce.png" alt="Setting the map default view" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/setting-map-default-view.gif"/></noscript>
<p>不要忘记添加style属性来指定尺寸；否则，你会以白屏结束。值<code>{ flex: 1 }</code>将确保<a href="https://github.com/react-native-community/react-native-maps/blob/master/docs/mapview.md" target="_blank" rel="noopener"> <code>&lt;MapView /&gt;</code> </a>占据整个屏幕。</p>
<p>您需要将一个带有某个区域的纬度、经度和delta值的对象传递给<code>initialRegion</code> prop。<code>latitudeDelta</code>和<code>longitudeDelta</code>属性指定地图上的区域必须缩放多少。要改变区域，使用<code>region</code>道具。</p>
<h2 id="using-react-native-maps-with-usestate-hook">使用带有<code>useState</code>钩子的React原生贴图</h2>
<p>要用<code>useState</code>钩子改变区域，使用<code>onRegionChangeComplete</code>道具将新区域设置为状态。<code>onRegionChangeComplete</code>是一个回调道具，当用户停止在地图上移动时运行。</p>
<pre class="language-javascript hljs">//extra code removed for brevity.
//create a Hook to store our region data.
const [region, setRegion] = useState({
  latitude: 51.5079145,
  longitude: -0.0899163,
  latitudeDelta: 0.01,
  longitudeDelta: 0.01,
});
return (
  &lt;View style={styles.container}&gt;
    &lt;MapView
      style={styles.map}
      initialRegion={{
        latitude: 37.78825,
        longitude: -122.4324,
        latitudeDelta: 0.0922,
        longitudeDelta: 0.0421,
      }}
      //onRegionChangeComplete runs when the user stops dragging MapView
      onRegionChangeComplete={(region) =&gt; setRegion(region)}
    /&gt;
    {/*Display user's current region:*/}
    &lt;Text style={styles.text}&gt;Current latitude: {region.latitude}&lt;/Text&gt;
    &lt;Text style={styles.text}&gt;Current longitude: {region.longitude}&lt;/Text&gt;
  &lt;/View&gt;
);
</pre>
<p><img data-attachment-id="75577" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/using-react-native-maps-with-usestate-hook/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/using-react-native-maps-with-usestate-hook.gif" data-orig-size="730,1454" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="using-react-native-maps-with-usestate-hook" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/using-react-native-maps-with-usestate-hook-151x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/using-react-native-maps-with-usestate-hook-514x1024.gif" decoding="async" class="aligncenter size-full wp-image-75577 jetpack-lazy-image" src="../Images/2b9ed1e58db2836841c113f61e1550ae.png" alt="Using React Native Maps with the useState Hook" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/using-react-native-maps-with-usestate-hook.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/using-react-native-maps-with-usestate-hook.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75577" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/using-react-native-maps-with-usestate-hook/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/using-react-native-maps-with-usestate-hook.gif" data-orig-size="730,1454" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="using-react-native-maps-with-usestate-hook" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/using-react-native-maps-with-usestate-hook-151x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/using-react-native-maps-with-usestate-hook-514x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75577" src="../Images/2b9ed1e58db2836841c113f61e1550ae.png" alt="Using React Native Maps with the useState Hook" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/using-react-native-maps-with-usestate-hook.gif"/></noscript>
<h2 id="adding-marker-react-native-maps">在React原生贴图中添加标记</h2>
<p>从<code>react-native-maps</code>导入<code>Marker</code>开始。</p>
<pre class="language-javascript hljs">import { Marker } from "react-native-maps";
</pre>
<p>接下来，将<code>&lt;Marker /&gt;</code>组件呈现为<code>&lt;MapView /&gt;</code>的子组件。传递<code>coordinate</code>道具中标记的坐标。</p>
<pre class="language-javascript hljs">import { Marker } from "react-native-maps";
const tokyoRegion = {
  latitude: 35.6762,
  longitude: 139.6503,
  latitudeDelta: 0.01,
  longitudeDelta: 0.01,
};
return (
  &lt;View style={styles.container}&gt;
    &lt;MapView
      style={styles.map}
      initialRegion={tokyoRegion} //your region data goes here.
    &gt;
      {/*Make sure the Marker component is a child of MapView. Otherwise it won't render*/}
      &lt;Marker coordinate={tokyoRegion} /&gt;
    &lt;/MapView&gt;
  &lt;/View&gt;
);
</pre>
<p>标记现在应该是可见的，如下所示。</p>
<p><img data-attachment-id="75579" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/marker-visible/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible.png" data-orig-size="730,1063" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="marker-visible" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible-206x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible-703x1024.png" decoding="async" class="aligncenter size-full wp-image-75579 jetpack-lazy-image" src="../Images/7f72b4cd3ecc4bf312709d402beea5b6.png" alt="The marker is now visible" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible-206x300.png 206w, https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible-703x1024.png 703w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75579" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/marker-visible/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible.png" data-orig-size="730,1063" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="marker-visible" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible-206x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible-703x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75579" src="../Images/7f72b4cd3ecc4bf312709d402beea5b6.png" alt="The marker is now visible" srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible-206x300.png 206w, https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible-703x1024.png 703w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-visible.png"/></noscript>
<p>您可以向地图添加<code>n</code>个标记，并将其作为直接子组件传递给<code>&lt;MapView /&gt;</code>组件。</p>
<p>以下是同一个<code>MapView</code>中多个<code>Marker</code>组件的示例:</p>
<pre class="language-javascript hljs">&lt;MapView
  ref={mapRef}
  style={styles.map}
  initialRegion={tokyoRegion}
  onRegionChangeComplete={(region) =&gt; setRegion(region)}
&gt;
  &lt;Marker coordinate={tokyoRegion} /&gt;
  {/*marker to a nearby location */}
  &lt;Marker
    coordinate={{
      latitude: 35.67714827145542,
      longitude: 139.6551462687416,
    }}
  /&gt;
&lt;/MapView&gt;;
</pre>
<p><img data-attachment-id="75581" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/multiple-markers-visible/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible.png" data-orig-size="730,936" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="multiple-markers-visible" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible-234x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible.png" decoding="async" class="aligncenter size-full wp-image-75581 jetpack-lazy-image" src="../Images/8f64f086d90d58742782ca4e3d9871c2.png" alt="Multiple markers are now visible in the map view" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible-234x300.png 234w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75581" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/multiple-markers-visible/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible.png" data-orig-size="730,936" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="multiple-markers-visible" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible-234x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75581" src="../Images/8f64f086d90d58742782ca4e3d9871c2.png" alt="Multiple markers are now visible in the map view" srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible-234x300.png 234w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/multiple-markers-visible.png"/></noscript>
<h2 id="customizing-marker">自定义地图标记</h2>
<h3>改变颜色</h3>
<p>要改变标记的颜色，使用<code>pinColor</code>道具。</p>
<pre class="language-javascript hljs">&lt;Marker
  coordinate={tokyoRegion}
  pinColor="green"
/&gt;
</pre>
<p>这里，我们将大头针的颜色改为<code>green</code>:</p>
<p><img data-attachment-id="75583" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/marker-changed-green/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green.png" data-orig-size="730,884" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="marker-changed-green" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green-248x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green.png" decoding="async" class="aligncenter size-full wp-image-75583 jetpack-lazy-image" src="../Images/c0bbd5edddc65b9781ea950c19461627.png" alt="The marker has been changed to green" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green-248x300.png 248w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75583" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/marker-changed-green/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green.png" data-orig-size="730,884" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="marker-changed-green" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green-248x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75583" src="../Images/c0bbd5edddc65b9781ea950c19461627.png" alt="The marker has been changed to green" srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green-248x300.png 248w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-changed-green.png"/></noscript>
<h3>更改标记图像</h3>
<p>您还可以通过将<code>image</code>属性传递给<code>&lt;Marker /&gt;</code>组件来添加自定义标记图像。</p>
<pre class="language-javascript hljs">&lt;Marker
  coordinate={{ latitude: 52.5200066, longitude: 13.404954 }}
  image={require("./japaneseFlag.png")} //uses relative file path. 
/&gt;
</pre>
<p><img data-attachment-id="75585" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/marker-image-japan-flag/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-image-japan-flag.gif" data-orig-size="730,1454" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="marker-image-japan-flag" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-image-japan-flag-151x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-image-japan-flag-514x1024.gif" decoding="async" class="aligncenter size-full wp-image-75585 jetpack-lazy-image" src="../Images/32df5e5be9eb4dc7b63671ddb92f4e5f.png" alt="The marker image has been changed to the Japanese flag" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-image-japan-flag.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-image-japan-flag.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75585" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/marker-image-japan-flag/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-image-japan-flag.gif" data-orig-size="730,1454" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="marker-image-japan-flag" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-image-japan-flag-151x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-image-japan-flag-514x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75585" src="../Images/32df5e5be9eb4dc7b63671ddb92f4e5f.png" alt="The marker image has been changed to the Japanese flag" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/marker-image-japan-flag.gif"/></noscript>
<h3>更改标记视图</h3>
<p><code>react-native-maps</code>也允许开发者使用自定义标记视图。这在您想要使用符号指示位置的情况下可能会有所帮助。一个例子可能是显示一个<code>Car</code>组件来显示汽车经销商的位置。</p>
<p>为此，首先要编写一些代码来构建一个自定义组件，如下所示:</p>
<pre class="language-javascript hljs">//create our custom marker component.
function CustomMarker() {
  return (
    &lt;View style={styles.marker}&gt;
      &lt;Text style={styles.color}&gt;Tokyo&lt;/Text&gt;
    &lt;/View&gt;
  );
}
//styles for our custom marker.
const styles = StyleSheet.create({
  marker: {
    paddingVertical: 10,
    paddingHorizontal: 30,
    backgroundColor: "#007bff",
    borderColor: "#eee",
    borderRadius: 5,
    elevation: 10,
  },
  text: {
  color: "#fff",   
  },
});
</pre>
<p>接下来，将<code>CustomMarker</code>合并到你的项目中。</p>
<pre class="language-javascript hljs"> export default function App() {
  return (
    &lt;View style={styles.container}&gt;
      &lt;MapView style={styles.map} initialRegion={tokyoRegion}&gt;
        &lt;Marker coordinate={tokyoRegion}&gt;
          {/* CustomMarker has to be a child of Marker*/}
          &lt;CustomMarker /&gt;
        &lt;/Marker&gt;
      &lt;/MapView&gt;
    &lt;/View&gt;
  );
}
</pre>
<p><img data-attachment-id="75587" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/custom-marker-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view.png" data-orig-size="730,985" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-marker-view" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view-222x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view.png" decoding="async" class="aligncenter size-full wp-image-75587 jetpack-lazy-image" src="../Images/3e5e02da8c76c067d12f1052b98fb832.png" alt="The marker view has been customized" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view-222x300.png 222w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75587" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/custom-marker-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view.png" data-orig-size="730,985" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-marker-view" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view-222x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75587" src="../Images/3e5e02da8c76c067d12f1052b98fb832.png" alt="The marker view has been customized" srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view-222x300.png 222w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/custom-marker-view.png"/></noscript>
<h2 id="styling-map">设计地图样式</h2>
<p>从<a href="https://mapstyle.withgoogle.com/" target="_blank" rel="noopener">谷歌样式生成器</a>中生成用于设计地图的JSON对象。接下来，将生成的样式对象传递给<code>&lt;MapView /&gt;</code>组件的<code>customMapStyle</code> prop。</p>
<pre class="language-javascript hljs">import React, { useState, useRef } from "react";
import { StyleSheet, Text, View, Button } from "react-native";
import MapView, { Marker } from "react-native-maps";

const mapStyle = []; //map styles go here!
export default function App() {
  return (
    &lt;View style={styles.container}&gt;
      &lt;MapView
        style={styles.map}
        initialRegion={tokyoRegion}
        customMapStyle={mapStyle} //plug in our custom style into the customMapStyle prop.
      /&gt;
    &lt;/View&gt;
  );
}
</pre>
<p>您可以忽略<code>mapStyle</code>变量——因为我们正在使用生成器生成地图样式，您只需要将生成的JSON对象粘贴到您的代码中，并将其发送到<code>&lt;MapView /&gt;</code>组件。</p>
<p><img data-attachment-id="75590" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/dark-theme-map-styling/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling.png" data-orig-size="730,1253" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="dark-theme-map-styling" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling-175x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling-597x1024.png" decoding="async" class="aligncenter size-full wp-image-75590 jetpack-lazy-image" src="../Images/20f2eacc3077a2e631a343f1a48e7a7a.png" alt="The map style has been changed to a dark theme" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling-175x300.png 175w, https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling-597x1024.png 597w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75590" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/dark-theme-map-styling/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling.png" data-orig-size="730,1253" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="dark-theme-map-styling" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling-175x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling-597x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75590" src="../Images/20f2eacc3077a2e631a343f1a48e7a7a.png" alt="The map style has been changed to a dark theme" srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling-175x300.png 175w, https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling-597x1024.png 597w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/dark-theme-map-styling.png"/></noscript>
<p>正如你所看到的，地图样式从默认的浅色主题变成了深色主题。</p>
<h2 id="getting-current-location-specific-coordinate">获取当前位置或特定坐标</h2>
<p>如果你想动画到一个特定的坐标呢？</p>
<p>首先，使用<code>useRef()</code>钩子创建对<code>&lt;MapView /&gt;</code>的引用:</p>
<pre class="language-javascript hljs">import { useRef } from "react";

const mapRef = useRef(null);
&lt;MapView
  ref={mapRef} //assign our ref to this MapView
  /*further code.. */
/&gt;
</pre>
<p>这意味着我们现在可以执行方法来控制我们的<code>MapView</code>组件。</p>
<p>接下来，添加这个块:</p>
<pre class="language-javascript hljs">//extra code removed for brevity
//destination coordinates
const tokyoRegion = {
  latitude: 35.6762,
  longitude: 139.6503,
  latitudeDelta: 0.01,
  longitudeDelta: 0.01,
};
const goToTokyo = () =&gt; {
  //Animate the user to new region. Complete this animation in 3 seconds
  mapRef.current.animateToRegion(tokyoRegion, 3 * 1000);
};
return (
  &lt;View style={styles.container}&gt;
    &lt;Button onPress={() =&gt; goToTokyo()} title="Go to Tokyo" /&gt;
  &lt;/View&gt;
);
</pre>
<p>下面是这个片段的分解:</p>
<p><code>useRef()</code>钩子返回一个可变的ref对象，它的<code>current</code>属性具有所传递参数的值。如果<code>current</code>属性的值是<code>undefined</code>，这意味着组件还没有安装。现在，您可以使用<code>mapRef.current</code>来访问任何<code>&lt;MapView /&gt;</code>方法。</p>
<p><code>animateToRegion()</code>方法接受任意两个参数:目标坐标(在本例中为<code>tokyoRegion</code>)和以毫秒为单位的动画持续时间。</p>
<p><img data-attachment-id="75592" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/navigate-specific-coordinate/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/navigate-specific-coordinate.gif" data-orig-size="349,695" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="navigate-specific-coordinate" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/navigate-specific-coordinate-151x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/navigate-specific-coordinate.gif" decoding="async" class="aligncenter size-full wp-image-75592 jetpack-lazy-image" src="../Images/3d39597578a20f2d6420fdd682ee8461.png" alt="Navigating to a specific coordinate" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/navigate-specific-coordinate.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/navigate-specific-coordinate.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75592" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/navigate-specific-coordinate/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/navigate-specific-coordinate.gif" data-orig-size="349,695" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="navigate-specific-coordinate" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/navigate-specific-coordinate-151x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/navigate-specific-coordinate.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75592" src="../Images/3d39597578a20f2d6420fdd682ee8461.png" alt="Navigating to a specific coordinate" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/navigate-specific-coordinate.gif"/></noscript>
<p>最后，您的<code>App.js</code>文件中的代码应该是这样的:</p>
<pre class="language-javascript hljs">export default function App() {
  const mapRef = useRef(null);
  const [region, setRegion] = useState({
    latitude: 51.5079145,
    longitude: -0.0899163,
    latitudeDelta: 0.01,
    longitudeDelta: 0.01,
  });
  const tokyoRegion = {
    latitude: 35.6762,
    longitude: 139.6503,
    latitudeDelta: 0.01,
    longitudeDelta: 0.01,
  };
  const goToTokyo = () =&gt; {
    //complete this animation in 3 seconds
    mapRef.current.animateToRegion(tokyoRegion, 3 * 1000);
  };
  return (
    &lt;View style={styles.container}&gt;
      &lt;MapView
        ref={mapRef}
        style={styles.map}
        initialRegion={{
          latitude: 24.8607,
          longitude: 67.0011,
          latitudeDelta: 0.0922,
          longitudeDelta: 0.0421,
        }}
        onRegionChangeComplete={(region) =&gt; setRegion(region)}
      /&gt;
      &lt;Button onPress={() =&gt; goToTokyo()} title="Go to Tokyo" /&gt;
      &lt;Text style={styles.text}&gt;Current latitude{region.latitude}&lt;/Text&gt;
      &lt;Text style={styles.text}&gt;Current longitude{region.longitude}&lt;/Text&gt;
    &lt;/View&gt;
  );
}
const styles = StyleSheet.create({
  container: {
    ...StyleSheet.absoluteFillObject,
    flex: 1,
    justifyContent: "flex-end",
    alignItems: "center",
  },
  map: {
    ...StyleSheet.absoluteFillObject,
  },
  text: {
    fontSize: 20,
    backgroundColor: "lightblue",
  },
});
</pre>
<h2 id="using-polyline-react-native-maps">在React原生贴图中使用<code>&lt;polyline /&gt;</code></h2>
<p>您可以使用<code>react-native-maps</code>库中的<code>&lt;Polyline /&gt;</code>组件在多个坐标之间创建直线。它在其<code>coordinates</code>属性中接受一个坐标数组。你也可以指定额外的道具用于造型目的，比如<code>strokeWidth</code>、<code>strokeColor</code>等。</p>
<p>让我们在东京和千叶之间创造一条道路。</p>
<pre class="language-javascript hljs">import { Polyline } from "react-native-maps";

const tokyoRegion = {
  latitude: 35.6762,
  longitude: 139.6503,
  latitudeDelta: 0.01,
  longitudeDelta: 0.01,
};
const chibaRegion = {
  latitude: 35.6074,
  longitude: 140.1065,
  latitudeDelta: 0.01,
  longitudeDelta: 0.01,
};

return (
  &lt;View style={styles.container}&gt;
    &lt;MapView style={styles.map} initialRegion={tokyoRegion}&gt;
      &lt;Polyline
        coordinates={[tokyoRegion, chibaRegion]} //specify our coordinates
        strokeColor={"#000"}
        strokeWidth={3}
        lineDashPattern={[1]}
      /&gt;
    &lt;/MapView&gt;
  &lt;/View&gt;
);
</pre>
<p>将位置的坐标存储在它们各自的变量中，并以数组的形式传递给<code>&lt;Polyline /&gt;</code>组件的<code>coordinates</code>属性。</p>
<p><img data-attachment-id="75594" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/draw-polyline-two-coordinates/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/draw-polyline-two-coordinates.gif" data-orig-size="730,1454" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="draw-polyline-two-coordinates" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/draw-polyline-two-coordinates-151x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/draw-polyline-two-coordinates-514x1024.gif" decoding="async" class="aligncenter size-full wp-image-75594 jetpack-lazy-image" src="../Images/273befac1529e304428f3cf82ab31203.png" alt="A polyline is drawn between two coordinates" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/draw-polyline-two-coordinates.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/draw-polyline-two-coordinates.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75594" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/draw-polyline-two-coordinates/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/draw-polyline-two-coordinates.gif" data-orig-size="730,1454" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="draw-polyline-two-coordinates" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/draw-polyline-two-coordinates-151x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/draw-polyline-two-coordinates-514x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75594" src="../Images/273befac1529e304428f3cf82ab31203.png" alt="A polyline is drawn between two coordinates" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/draw-polyline-two-coordinates.gif"/></noscript>
<p>如果你看结果，线直接画在这些坐标之间，没有考虑实际的地理路径和道路。为此，您需要使用Google Maps Direction API在源位置和目的地位置之间建立多个坐标，该API会返回两地之间所有可能的路线。</p>
<h2 id="using-google-maps-direction-api">使用谷歌地图方向API</h2>
<p>为了<a href="https://blog.logrocket.com/a-practical-guide-to-integrating-google-maps-in-react/" target="_blank" rel="noopener">使用方向API </a>，你必须首先<a href="https://console.cloud.google.com/apis/library/directions-backend.googleapis.com" target="_blank" rel="noopener">为你的项目</a>启用它。请注意，您需要有一个有效的帐单地址才能使用谷歌云，否则方向功能将无法工作。</p>
<p>首先，创建一个名为<code>getDirections</code>的助手函数。在这里，编写以下代码:</p>
<pre class="language-javascript hljs">import {decode} from "@mapbox/polyline"; //please install this package before running!
const getDirections = async (startLoc, destinationLoc) =&gt; {
  try {
    const KEY = "YOUR GOOGLE API KEY"; //put your API key here.
    //otherwise, you'll have an 'unauthorized' error.
    let resp = await fetch(
      `https://maps.googleapis.com/maps/api/directions/json?origin=${startLoc}&amp;destination=${destinationLoc}&amp;key=${KEY}`
    );
    let respJson = await resp.json();
    let points = decode(respJson.routes[0].overview_polyline.points);
    console.log(points);
    let coords = points.map((point, index) =&gt; {
      return {
        latitude: point[0],
        longitude: point[1]
      };
    });
    return coords;
  } catch (error) {
    return error;
  }
};
</pre>
<p><code>decode()</code>函数将把来自<code>overview_polyline.points</code>属性的编码折线点转换成包含所有坐标的纬度和经度的数组。</p>
<p>因此，这将允许<code>PolyLine</code>组件容易地读取位置坐标。没有它，<code>react-native-maps</code>抛出一个错误。</p>
<pre class="language-javascript hljs">import React, { useState, useEffect } from "react";
import { View, Text } from "react-native";
import MapView, { Polyline } from "react-native-maps";
import { decode } from "@mapbox/polyline";

const App = () =&gt; {
  const [coords, setCoords] = useState([]);

  useEffect(() =&gt; {
    //fetch the coordinates and then store its value into the coords Hook.
    getDirections("52.5200066,13.404954", "50.1109221,8.6821267")
      .then(coords =&gt; setCoords(coords))
      .catch(err =&gt; console.log("Something went wrong"));
  }, []);

  return (
    &lt;&gt;
      &lt;MapView
        style={{ flex: 1 }}
        initialRegion={{
          latitude: 52.5200066,
          longitude: 13.404954,
          latitudeDelta: 0.1,
          longitudeDelta: 0.1
        }}
      &gt;
        {/* finally, render the Polyline component with the coords data */}
        {coords.length &gt; 0 &amp;&amp; &lt;Polyline coordinates={coords} /&gt;}
      &lt;/MapView&gt;
    &lt;/&gt;
  );
};

export default App;
</pre>
<p><img data-attachment-id="75596" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/polyline-rendering-for-directions/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions.png" data-orig-size="301,554" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="polyline-rendering-for-directions" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions-163x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions.png" decoding="async" class="aligncenter size-full wp-image-75596 jetpack-lazy-image" src="../Images/48803a80eccd8eebd72e9b00a8a03ef9.png" alt="The polyline is now properly rendered to provide directions" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions.png 301w, https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions-163x300.png 163w" data-lazy-sizes="(max-width: 301px) 100vw, 301px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="75596" data-permalink="https://blog.logrocket.com/react-native-maps-introduction/polyline-rendering-for-directions/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions.png" data-orig-size="301,554" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="polyline-rendering-for-directions" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions-163x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-75596" src="../Images/48803a80eccd8eebd72e9b00a8a03ef9.png" alt="The polyline is now properly rendered to provide directions" srcset="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions.png 301w, https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions-163x300.png 163w" sizes="(max-width: 301px) 100vw, 301px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/04/polyline-rendering-for-directions.png"/></noscript>
<h2>结论</h2>
<p>现在你应该对如何<a href="https://blog.logrocket.com/react-map-library-comparison/" target="_blank" rel="noopener">实现地图</a>和在<code>react-native-maps</code>库之上构建自定义特性有了基本的了解。您可以在工作中运用这些经验来构建各种类型的应用程序，从出租车服务、餐馆查找器到送货应用程序等等。<code>react-native-maps</code>库使得整合地图变得简单，并且是React本地生态系统中的重要角色。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>