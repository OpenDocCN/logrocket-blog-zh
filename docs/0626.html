<html>
<head>
<title>Creating a website with Next.js and React - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Next.js和React - LogRocket博客创建网站</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/creating-website-next-js-react/#0001-01-01">https://blog.logrocket.com/creating-website-next-js-react/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按:</strong>本帖更新于2021年10月。</em></p>
<p><a href="https://nextjs.org" target="_blank" rel="noopener noreferrer"> Next.js </a>是一个广泛使用的框架，用于构建<a href="https://reactjs.org" target="_blank" rel="noopener noreferrer"> React </a>应用程序，这些应用程序提供服务器端渲染、自动代码分割、静态导出选项和简单的产品构建。</p>
<p>它还减轻了许多与创建生产就绪的React应用程序相关的常见问题。</p>
<p>在本教程中，我们将向您展示如何引导Next.js web应用程序，并添加一些典型网站的基本组件和功能。</p>
<p>通过这个过程，您将了解如何使用这个框架。</p>
<p>我们开始吧！</p>
<h2>使用Next.js和React创建网站的先决条件</h2>
<p>在开始阅读本指南之前，您需要具备以下条件:</p>
<ul>
<li>Node.js安装在本地开发机器上。</li>
</ul>
<p>可以按照<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer"> Node.js官方下载页面</a>上的说明安装Node.js。</p>
<h2>步骤1 —引导Next.js应用程序</h2>
<p>有两种方法可以引导Next.js应用程序。第一种是使用<code>create-next-app</code>命令。像许多流行的框架一样，Next.js现在有了自己的命令，可以快速轻松地建立一个Next.js项目。</p>
<p>首先，我们需要打开一个新的终端窗口(Linux上的<code>Ctrl+Alt+T</code>或Mac上的<code>Command+Space</code>)并运行:</p>
<pre class="language-bash hljs">npx <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="debdacbbbfaabbf3b0bba6aaf3bfaeae9eb2bfaabbadaa">[email protected]</a>
# or
yarn create next-app</pre>
<p>注意:如果我们想要一个TypeScript项目，我们需要在末尾添加一个<code>--typescript</code>标志(即<code>yarn create next-app --typescript</code>)。</p>
<p>该命令将提示我们输入项目名称。一旦完成，我们的新项目将可访问。我们可以通过运行以下命令来运行Next.js项目:</p>
<pre class="language-bash hljs">cd your-project

npm run dev
# or
yarn dev</pre>
<p>打开你最喜欢的浏览器，访问<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>。我们应该看到“欢迎来到Next.js！”显示在我们的屏幕上。</p>
<p>创建Next.js项目的第二种方法是手动完成。首先，我们需要首先创建一个项目目录，并使用npm ( <a href="https://www.npmjs.com" target="_blank" rel="noopener noreferrer"> Node.js包管理器</a>)安装所需的依赖项。</p>
<p>打开一个新的终端窗口(Linux上的<code>Ctrl+Alt+T</code>或Mac上的<code>Command+Space</code>)并执行下面的命令来创建一个新的项目文件夹，该文件夹将存放您的Next.js应用程序(用您的项目名称替换“your-project ”):</p>
<pre>mkdir your-project</pre>
<p>将<code>cd</code>添加到您的新目录:</p>
<pre>cd your-project</pre>
<p>接下来，运行这个命令在项目的根目录下创建一个<code>package.json</code>文件:</p>
<pre class="language-bash hljs">npm init -y
# or
yarn init -y
</pre>
<p>该命令在项目目录的根目录下创建一个<code>package.json</code>文件。</p>
<p><code>-y</code>标志用默认值初始化文件。</p>
<p><code>package.json</code>文件将允许您在项目中轻松安装和使用npm包依赖项。如果你将来想这样做的话，它还会使与其他开发者共享你的项目变得更加容易。</p>
<p>如果你想了解更多关于<code>package.json</code>文件的内容，请查阅<a href="https://docs.npmjs.com/files/package.json" target="_blank" rel="noopener noreferrer"> npm文档</a>。</p>
<p>现在我们已经创建了一个<code>package.json</code>文件，我们可以为您的Next.js网站安装所需的npm包依赖项了。</p>
<p>首先，我们需要<a href="https://www.npmjs.com/package/next" target="_blank" rel="noopener noreferrer">下一个</a>、<a href="https://www.npmjs.com/package/react" target="_blank" rel="noopener noreferrer">反应</a>和<a href="https://www.npmjs.com/package/react-dom" target="_blank" rel="noopener noreferrer">反应-dom </a> npm包。</p>
<p>您可以使用以下命令一次安装所有这些组件:</p>
<pre class="language-bash hljs">npm install next react react-dom
# or 
yarn add next react react-dom</pre>
<p>当这些完成安装后，您会注意到在您的项目中创建了一个新的<code>node_modules</code>目录。</p>
<p>该目录存储项目的所有已安装的依赖项。</p>
<p>如果您查看内部，您会注意到您安装的三个npm包及其所有子依赖项都在那里。</p>
<p>将来当您与他人共享您的代码时，该列表中的所有包都将在应用程序的初始设置中或在install命令运行时安装。</p>
<p>现在我们已经安装了您的依赖项，我们需要一种方法来启动您的应用程序。</p>
<p>打开您的<code>package.json</code>文件，用以下代码替换“脚本”部分:</p>
<pre>[label package.json]

"scripts": {
  "dev": "next dev"
},</pre>
<p><code>"dev"</code>脚本用于在开发模式下运行应用程序。</p>
<p>这意味着您的代码将运行特殊的错误处理、热重载和其他特性，使开发过程更加愉快。</p>
<p>稍后，我们将在这一部分添加更多的脚本来处理应用程序的生产版本。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p>在您的终端中，使用以下命令以开发模式启动应用程序:</p>
<pre>npm run dev</pre>
<p>当您执行该命令时，您会看到一个错误:</p>
<pre>[label Output]

Couldn't find a `pages` directory. Please create one under the project root</pre>
<p>Next.js寻找一个包含你的网站的所有不同路径的<code>/pages</code>目录，当它没有找到时抛出一个错误。</p>
<p>为了修复错误并让您的网站运行，我们需要创建一个名为<code>/pages</code>的新目录，并向其中添加一个Next.js可以呈现的页面。</p>
<p>首先，在项目的根目录下创建一个<code>/pages</code>目录:</p>
<pre>mkdir pages</pre>
<p>使用以下命令将<code>cd</code>添加到其中:</p>
<pre>cd pages</pre>
<p>然后，添加一个名为<code>index.js</code>的新文件:</p>
<pre>touch index.js</pre>
<p>我们需要向您的<code>/pages/index.js</code>文件添加一些代码，以便让Next.js呈现一些内容。<br/>在您最喜欢的文本编辑器中打开<code>/pages/index.js</code>,并将以下代码添加到文件中:</p>
<pre>[label /pages/index.js]

import React, { Component } from 'react'

export default class extends Component {
  render () {
    return (
      &lt;div&gt;Your Next.js App&lt;/div&gt;
    )
  }
}</pre>
<p>上面的代码创建了一个React类组件，并用<code>export default</code>将其导出。</p>
<p>保存对文件的更改，并使用以下命令重新启动应用程序:</p>
<pre>npm run dev</pre>
<p>打开你最喜欢的浏览器，访问<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>。</p>
<p>您应该会看到显示的文本“Your Next.js App”。</p>
<p>恭喜你，你现在已经创建了一个工作的Next.js网站！</p>
<h2>步骤2–了解页面文件夹</h2>
<p><code>/pages</code>目录将保存你网站的所有页面，而<code>index.js</code>文件将作为你在<code>/</code> URL路径的主页。当您的网站被访问时，<code>/pages</code>目录中每个文件的名称将与浏览器中的URL路径相匹配。</p>
<p>例如，路径为<code>/pages/articles.js</code>的文件将有一个在浏览器中显示为<code>/articles</code>的URL。所有这些都由Next.js自动处理。</p>
<p>唯一的例外是<code>index.js</code>文件，它们的URL将以它们所在目录的根目录命名。例如，<code>/pages/index.js</code>文件在<code>/</code>路径下作为主页，<code>/pages/articles/index.js</code>会变成<code>/pages/articles</code>。</p>
<h2>步骤3 —从外部API检索和显示数据</h2>
<p>Next.js很酷的一点是它提供的<a href="https://blog.logrocket.com/ssg-vs-ssr-in-next-js/" target="_blank" rel="noopener">服务器端渲染</a>特性。在网页加载之前，您可以从外部API获取和接收数据。</p>
<p>为了证明这一点，我们将使用NASA的公共API来显示来自他们的<a href="https://apod.nasa.gov/apod/astropix.html" target="_blank" rel="noopener noreferrer">天文图片</a>项目的数据。</p>
<p>他们每天都发布一张宇宙的新照片，并附有一位天文学家写的简要说明。</p>
<p>我们将使用一个名为<a href="https://www.npmjs.com/package/isomorphic-unfetch" target="_blank" rel="noopener noreferrer">同构解锁</a>的npm包发出请求。这个包非常适合Next.js，因为它可以在客户机和服务器环境下工作。</p>
<p>运行此命令在您的项目中安装npm软件包:</p>
<pre class="language-bash hljs">npm install isomorphic-unfetch # or
yarn add isomorphic-unfetch
</pre>
<p>然后，重新打开您的<code>/pages/index.js</code>文件，并用以下代码替换其内容:</p>
<pre>[label /pages/index.js]

import React, { Component } from 'react'
import fetch from 'isomorphic-unfetch'

export default class extends Component {
  render () {
    return (
      &lt;div&gt;
        &lt;div&gt;
          {this.props.title}
        &lt;/div&gt;
        &lt;div&gt;
          &lt;img src={this.props.imageUrl} /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}

export async function getStaticProps() {
  const res = await fetch(
    "https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY"
  );
  const data = await res.json();

  return {
    props: {
      title: data.title,
      imageUrl: data.url,
    },
  };
}

</pre>
<p>您会注意到，我们在React组件的顶部添加了一个名为<code>getStaticProps()</code>的新异步函数。</p>
<p>这是一个内部Next.js函数，允许您在加载页面之前获取数据并通过其props填充React组件。</p>
<p><code>getStaticProps()</code>函数中的代码在服务器上运行，其结果被发送回调用它的页面。</p>
<p>在您的<code>getStaticProps()</code>函数中，我们首先向NASA REST API端点请求当天的<strong>天文图片</strong>，并将数据响应转换为我们可以处理的对象。</p>
<p>使用这些数据，我们用<code>title</code>和<code>imageUrl</code>数据填充React组件的props。</p>
<p>然后，我们为这两个项目添加了一些<code>&lt;div&gt;</code>元素，并使用<code>this.props</code> React方法用数据填充它们。</p>
<p>保存文件并在浏览器中查看更改。</p>
<p>您应该会看到页面上显示的标题和当天的图像。</p>
<h2>步骤4 —为生产构建应用程序</h2>
<p>Next.js使部署过程变得简单而轻松。如果您手工构建了Next.js项目，那么您需要将“构建”和“启动”脚本添加到<code>package.json</code>文件中。</p>
<p>打开您的<code>package.json</code>文件，使“脚本”部分看起来像这样:</p>
<pre>[label package.json]

"scripts": {
  "dev": "next dev",
  "build": "next build",
  "start": "next start"
},</pre>
<p>“构建”脚本会将您的代码编译成服务器和浏览器代码，这些代码将在生产环境中的服务器上运行。“启动”脚本是您如何在生产环境中启动生产代码。</p>
<p>要构建应用程序，请运行命令:</p>
<pre>npm run build</pre>
<p>完成运行需要一些时间。</p>
<p>完成后，请注意创建了一个名为<code>/.next</code>的新目录。Next.js向该目录添加了许多不同的目录和文件。</p>
<p>对于本教程，您只需要知道它是您在开发模式下运行的代码的优化版本。要在生产模式下启动应用程序并运行<code>/.next</code>目录中的代码，请运行以下命令:</p>
<pre>npm start</pre>
<p>网站的生产就绪版本现在应该在<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>运行。</p>
<h2>结论</h2>
<p>现在，您已经使用Next.js和React创建了一个网站。您现在应该能够:</p>
<ul>
<li>引导新的Next.js应用程序</li>
<li>在Next.js应用程序中创建新页面</li>
<li>从外部API获取数据并显示在Next.js页面上</li>
<li>在生产环境中构建并运行Next.js应用程序</li>
</ul>
<p>我们在本教程中建立的网站可以大大扩展。</p>
<p>您可以使用CSS添加定制样式，将更多页面添加到<code>/pages</code>目录，从您或其他人构建的另一个API中获取数据，和/或将应用程序部署到服务器并使其可供世界访问。</p>
<p>这些只是增强Next.js应用程序的几个例子。</p>
<p>祝您探索愉快，编码愉快！</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</h2><p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p><div class="code-block code-block-30">
<div class="blog-plug inline-plug next-plug"><h2><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank"> LogRocket </a>:全面了解生产Next.js应用</h2><p>调试下一个应用程序可能会很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪状态、自动显示JavaScript错误、跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-lazy-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/></noscript></a><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p>LogRocket 就像是网络和移动应用的DVR，记录下你的Next.js应用上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用程序的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p><p>让您调试Next.js应用的方式现代化— <a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div></div>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>