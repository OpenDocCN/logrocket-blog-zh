<html>
<head>
<title>Why you don't need Babel - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>为什么你不需要巴别塔博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/why-you-dont-need-babel/#0001-01-01">https://blog.logrocket.com/why-you-dont-need-babel/#0001-01-01</a></blockquote><div><article class="article-post">
<p>2020年，前端开发者还在过多的工具化上浪费大量时间。巴别塔被一些人视为必需品，但我的目的是向你展示它不是。</p>
<p>看完这篇文章，你会知道:</p>
<ul>
<li>如何根据具体情况确定哪些浏览器确实需要支持</li>
<li>如何用Visual Studio代码lint来避免对Babel的需求</li>
<li>另一个可以更快完成同样工作的软件选择</li>
</ul>
<h2 id="whatisbabelandwhatproblemdoesitsolve">巴别塔是什么，它解决什么问题？</h2>
<p>Babel是一个编译器，它可以将你的现代JavaScript转换成在旧的浏览器上运行。它还可以执行其他工作，如转换JSX语法，但它不是唯一的工具。</p>
<p>随着浏览器的发展，增加了新的API和ECMAScript特性。不同的浏览器发展速度不同，优先考虑不同的功能。这给我们留下了一个棘手的问题要解决:我们如何支持所有这些功能，同时还能使用现代功能？有些会不兼容。</p>
<p>一个常见的解决方案是使用最新的特性编写代码，然后向下转换成浏览器能够理解的老式代码。Transpiling描述了一种特殊类型的编译。在不同的语境中有不同的含义。在我们的例子中，传输也有两个独立的部分。</p>
<h3 id="thedifferencebetweentranspilingandpolyfilling">transpiling和polyfilling的区别</h3>
<p>Transpiling是将旧浏览器无法理解的新语言语法转换成它们可以识别的旧语法的过程。</p>
<p>下面是一个编译<code>let</code>语句的例子:</p>
<pre>// the new syntax `let` was added in ECMAScript 2015 aka ES6
let x = 11;

// `let` transpiles to the old syntax `var` if your transpiler target was ES5
var x = 11;
</pre>
<p>多填充是通过提供您自己版本的缺少的本机代码，将缺少的方法、属性或API添加到旧浏览器的过程。</p>
<p>可以认为是填补空白。例如，以下是<code>isNaN</code>的聚合填充:</p>
<pre>// check if the method `isNaN` exists on the standard built-in `Number` object
if (!Number.isNaN) {
  // if not we add our own version of the native method newer browsers provide
  Number.isNaN = function isNaN(x) {
    return x !== x;
  };
}
</pre>
<p>获得polyfils的最佳途径是通过<a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener noreferrer"> core-js </a>。</p>
<p>Transpiling和polyfilling有时是不可能的，并且会增加很多代码膨胀，如果可能的话，最好完全避免它们。这就是为什么我们要讨论的第一个选择是最好的。</p>
<h2 id="alternativeonedonotsupportancientbrowsers">选择1:不支持旧的浏览器</h2>
<p/>
<p>如果用户升级他们的浏览器，我们可以避免传输文件的麻烦，他们也可以享受新浏览器增强的功能和性能。不幸的是，事情没那么简单。</p>
<p>罪魁祸首是大公司不得不支持遗留软件。典型的例子是Internet Explorer，它从一开始就是web开发的绊脚石。</p>
<p>也就是说，近年来情况已经有了很大改善。现在，大多数浏览器都是常青树，这意味着它们会不断更新。微软现在推广其evergreen Edge浏览器，该浏览器方便地使用了与Chrome相同的V8引擎，这意味着支持的引擎减少了一个。</p>
<p>要确定您是否必须支持特定的浏览器，请问自己以下问题。</p>
<h3 id="1whichbrowsersareyourcustomerscurrentlyusing">1.您的客户目前正在使用哪些浏览器？</h3>
<p>如果你已经有一个服务于相同客户群的网站或应用程序，你可以从分析软件中获得这些信息。以下是我管理的一家英国音响工程网站的一些最新统计数据。如果这是一个JavaScript应用程序，拥有相同的客户群体，我会假设他们会使用相同的浏览器。</p>
<p><img data-attachment-id="21916" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/browsers/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers.png" data-orig-size="309,567" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Browsers" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers-163x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers.png" decoding="async" class="aligncenter size-full wp-image-21916 jetpack-lazy-image" src="../Images/62cbe71b336ea5b3e2044c49f7bb932f.png" alt="List of Browsers" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers.png 309w, https://blog.logrocket.com/wp-content/uploads/2020/07/browsers-163x300.png 163w" data-lazy-sizes="(max-width: 309px) 100vw, 309px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21916" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/browsers/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers.png" data-orig-size="309,567" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Browsers" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers-163x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21916" src="../Images/62cbe71b336ea5b3e2044c49f7bb932f.png" alt="List of Browsers" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers.png 309w, https://blog.logrocket.com/wp-content/uploads/2020/07/browsers-163x300.png 163w" sizes="(max-width: 309px) 100vw, 309px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/browsers.png"/></noscript>
<p/>
<p>如果你没有安装分析软件，你就不知道你需要支持哪些浏览器。你必须做出有根据的猜测。如果你有企业客户，你更有可能需要支持IE11，而不是向精通网络的技术爱好者推销。</p>
<p>当你支持一个浏览器，你就做出了承诺。您真的希望每个版本都有额外的测试、额外的构建工具要配置、额外的依赖要照看吗？</p>
<p>经历这么多麻烦，肯定有明确的经济原因。失去那些无法访问你的网站或应用程序的客户会比支持浏览器的成本更高吗？</p>
<h3 id="2whichmodernbrowserfeaturesdoyouwanttouse">2.你想使用哪些现代浏览器功能？</h3>
<p>使用现代语言功能和浏览器API使得编写代码更容易、更快、更有趣。这也使您的代码更易于维护。</p>
<p>如果你乐于编写ES5和使用<code>XMLHttpRequest()</code>，你肯定不需要Babel，但是你可能需要某种治疗。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>

<p>这些数据可以通过<a href="https://caniuse.com/" target="_blank" rel="noopener noreferrer">我能使用</a>吗？但是手动查找是浪费时间。既然您已经知道了想要支持的浏览器的名称，那么使用awesome <code>Browserlist</code>应用程序就可以自动查找兼容的特性(下一节将详细介绍)。</p>
<h2 id="alternativetwouseeslintplugincompat">备选方案2:使用eslint-plugin-compat</h2>
<p>您可以完全避免整个传输过程，而是让您的代码编辑器在您使用任何对客户的浏览器来说太现代的功能时提醒您。这是最简单的选择，因为它:</p>
<ul>
<li>消除对运输工具的依赖</li>
<li>让您重新获得对生产代码的实际控制</li>
</ul>
<p>如果有一个你离不开的现代功能，你可以手动填充它。否则，您可以在需要时使用旧的语法。</p>
<h3 id="createatest">创建一个测试</h3>
<p>在我们分析利弊之前，我们需要确认我们的巴别塔替代品可以做同样的基本工作。让我们创建一个小测试。</p>
<p>下面是我们希望目标环境支持的现代代码。</p>
<p>运输之后，每个功能都有一个<code>console.assert</code>来验证它是否按预期工作。在<code>eslint-plugin-compat</code>的情况下，我们将检查不兼容的代码是否在林挺中被标记。</p>
<h4><code>test.js</code></h4>
<pre>// test nullish coalescing - return right side when left side null or undefined
const x = null ?? "default string";
console.assert(x === "default string");

const y = 0 ?? 42;
console.assert(y === 0);

// test optional chaining - return undefined on non existent property or method
const adventurer = {
  name: "Alice",
  cat: {
    name: "Dinah",
  },
};

const dogName = adventurer.dog?.name;
console.assert(dogName === undefined);

console.assert(adventurer.someNonExistentMethod?.() === undefined);

// use browser API fetch, to check linting
fetch("https://jsonplaceholder.typicode.com/todos/1")
  .then((response) =&gt; response.json())
  .then((json) =&gt; console.log(json));
</pre>
<h3 id="usingtheeslintenvpropertytogetherwitheslintplugincompat">对eslint-plugin-compat使用eslint <code>env</code>属性</h3>
<p>我们需要一个解决方法，将语言特性和浏览器API结合在一起。</p>
<p>您可以使用eslint来检查语言语法。为此，将<code>es2020</code>的<code>env</code>属性向下更改。</p>
<p>要检查浏览器API兼容性，请使用<code>eslint-plugin-compat</code>。它使用与Babel和其他工具相同的Browserlist配置。</p>
<p>完整的说明可以在<a href="https://github.com/amilajack/eslint-plugin-compat" target="_blank" rel="noopener noreferrer"> eslint-plugin-compat repo </a>中找到。我们将使用browserlist <code>defaults</code>预设来使用默认设置。根据您的分析，用您自己的选择替换它。</p>
<h3 id="whatisbrowserlist">什么是browserlist？</h3>
<p><img data-attachment-id="21927" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/browserlist-logo-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png" data-orig-size="200,200" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Browserlist logo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png" decoding="async" class="alignleft size-full wp-image-21927 jetpack-lazy-image" src="../Images/45505332a67e6ed61cd2f011d3fc474d.png" alt="Browserlist Logo" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png 200w, https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1-150x150.png 150w" data-lazy-sizes="(max-width: 200px) 100vw, 200px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21927" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/browserlist-logo-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png" data-orig-size="200,200" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Browserlist logo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png" decoding="async" loading="lazy" class="alignleft size-full wp-image-21927" src="../Images/45505332a67e6ed61cd2f011d3fc474d.png" alt="Browserlist Logo" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png 200w, https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1-150x150.png 150w" sizes="(max-width: 200px) 100vw, 200px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/browserlist-logo-1.png"/></noscript>Browserlist automatically selects a list of browsers based on various criteria you give it.
<p>看看browserlist 的<code>defaults</code>设置支持的<a href="https://browserl.ist/?q=defaults" target="_blank" rel="noopener noreferrer">浏览器列表。<code>defaults</code>是快捷方式:</a></p>
<ul>
<li>&gt; 0.5%(由全局使用统计选择的浏览器版本)</li>
<li>最后两个版本(每个“没有死”的浏览器)</li>
<li>火狐ESR</li>
<li>没有死(24个月没有官方支持或更新的浏览器)</li>
</ul>
<p>前往<a href="https://github.com/browserslist/browserslist#full-list" target="_blank" rel="noopener noreferrer"> GitHub </a>查看可用于选择您支持的浏览器的完整查询列表。</p>
<h3 id="settingupeslintplugincompatforvisualstudiocode">为Visual Studio代码设置eslint-plugin-compat</h3>
<p>将以下包添加到项目中。</p>
<pre>npm install --save-dev eslint eslint-plugin-compat
</pre>
<p>将以下内容添加到<code>package.json</code>。</p>
<pre>  "browserslist": [
    "defaults"
  ]
</pre>
<p>创建以下<code>.eslintrc.json</code>文件或将这些设置添加到您当前的文件中。</p>
<pre>{
  "extends": ["plugin:compat/recommended"],
  "env": {
    "browser": true,
    "es2020": true
  }
}
</pre>
<p>确保您已经安装了<a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener noreferrer"> VS Code ESLint扩展</a></p>
<p>现在，任何与您的<code>package.json</code>中的<code>browserlist</code>配置不兼容的浏览器API都会显示为林挺错误。您可以使用<code>.eslintrc.json</code>文件中的<code>env</code>属性单独控制您想要支持的ECMAScript版本。</p>
<p>如果<code>eslint-plugin-compat</code>也能自动显示语言特性就好了，但这是目前<a href="https://github.com/amilajack/eslint-plugin-compat/issues/206" target="_blank" rel="noopener noreferrer">未解决的问题</a>。</p>
<p>选择<code>IE 11</code>设置—</p>
<p><img data-attachment-id="21917" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/fetch_config_error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_config_error.png" data-orig-size="193,61" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fetch config error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_config_error.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_config_error.png" decoding="async" class="aligncenter size-full wp-image-21917 jetpack-lazy-image" src="../Images/a0c11c4dfeb346f75d9950ef1e486a74.png" alt="Fetch Config Error" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_config_error.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_config_error.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21917" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/fetch_config_error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_config_error.png" data-orig-size="193,61" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fetch config error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_config_error.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_config_error.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21917" src="../Images/a0c11c4dfeb346f75d9950ef1e486a74.png" alt="Fetch Config Error" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_config_error.png"/></noscript>
<p>—我们的<code>fetch()</code> API被标记。</p>
<p><img data-attachment-id="21918" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/fetch_error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error.png" data-orig-size="697,160" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fetch error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error-300x69.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error.png" decoding="async" class="aligncenter size-full wp-image-21918 jetpack-lazy-image" src="../Images/2cfe6541370da8c7f671127ad8eadda9.png" alt="Fetch Error" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error.png 697w, https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error-300x69.png 300w" data-lazy-sizes="(max-width: 697px) 100vw, 697px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21918" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/fetch_error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error.png" data-orig-size="697,160" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fetch error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error-300x69.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21918" src="../Images/2cfe6541370da8c7f671127ad8eadda9.png" alt="Fetch Error" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error.png 697w, https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error-300x69.png 300w" sizes="(max-width: 697px) 100vw, 697px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/fetch_error.png"/></noscript>
<p>将<code>env</code>属性更改为<code>es6</code>。</p>
<p><img data-attachment-id="21920" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/nullish_coalescing_error_config/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config.png" data-orig-size="413,152" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Nullish coalescing error config" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config-300x110.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config.png" decoding="async" class="aligncenter size-full wp-image-21920 jetpack-lazy-image" src="../Images/788889667e25dadcf3313468c10f9d4e.png" alt="Nullish Coalescing Error Config" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config.png 413w, https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config-300x110.png 300w" data-lazy-sizes="(max-width: 413px) 100vw, 413px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21920" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/nullish_coalescing_error_config/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config.png" data-orig-size="413,152" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Nullish coalescing error config" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config-300x110.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21920" src="../Images/788889667e25dadcf3313468c10f9d4e.png" alt="Nullish Coalescing Error Config" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config.png 413w, https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config-300x110.png 300w" sizes="(max-width: 413px) 100vw, 413px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error_config.png"/></noscript>
<p>尝试使用作为Es2020的一部分发布的<code>nullish coalescing</code>时，您会立即看到一个错误。</p>
<p><img data-attachment-id="21921" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/nullish_coalescing_error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error.png" data-orig-size="730,81" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Nullish coalescing error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error-300x33.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error.png" decoding="async" class="aligncenter size-full wp-image-21921 jetpack-lazy-image" src="../Images/d3ea3b2fe44edf8bb3bff492c9740e66.png" alt="Nullish Coalescing Error" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error-300x33.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21921" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/nullish_coalescing_error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error.png" data-orig-size="730,81" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Nullish coalescing error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error-300x33.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21921" src="../Images/d3ea3b2fe44edf8bb3bff492c9740e66.png" alt="Nullish Coalescing Error" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error-300x33.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/nullish_coalescing_error.png"/></noscript>
<h2 id="alternativethreeuseothersoftwaretoreplacebabel">替代方案3:用其他软件代替巴别塔</h2>
<p>在我们看替代品之前，让我们快速回顾一下如何使用巴别塔。</p>
<h3 id="usingbabeltotranspileandpollyfill">利用巴别塔进行传输和聚合填充</h3>
<p>首先，创建一个迷你项目目录并安装我们需要的依赖项。</p>
<pre>mkdir babel-test
cd babel-test
npm init -y
mkdir src dist
npm install --save-dev @babel/core @babel/cli @babel/preset-env
npm install --save @babel/polyfill
</pre>
<p>将以下内容添加到您的<code>package.json</code>中。</p>
<pre>"browserslist": "defaults",
</pre>
<p>将<code>test.js</code>文件写入<code>src</code>，然后发出以下命令。</p>
<pre>npx babel src --out-dir dist <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f3dede83819680968780ceb3919291969f">[email protected]</a>/env
</pre>
<p>最后，运行该文件以检查测试是否仍然有效。</p>
<pre>node dist/test.js
</pre>
<p>应该没有断言错误，但是它会说<code>fetch is not defined</code>，因为Node.js没有<code>fetch()</code>方法。下面是生成的转换代码。观察所有额外的cruft和膨胀增加。</p>
<pre>"use strict";

var _ref, _, _adventurer$dog, _adventurer$someNonEx;

// test nullish coalescing - return right side when left side null or undefined
var x = (_ref = null) !== null &amp;&amp; _ref !== void 0 ? _ref : "default string";
console.assert(x === "default string");
var y = (_ = 0) !== null &amp;&amp; _ !== void 0 ? _ : 42;
console.assert(y === 0); // test optional chaining - return undefined on non existent property or method

var adventurer = {
  name: "Alice",
  cat: {
    name: "Dinah",
  },
};
var dogName =
  (_adventurer$dog = adventurer.dog) === null || _adventurer$dog === void 0
    ? void 0
    : _adventurer$dog.name;
console.assert(dogName === undefined);
console.assert(
  ((_adventurer$someNonEx = adventurer.someNonExistentMethod) === null ||
  _adventurer$someNonEx === void 0
    ? void 0
    : _adventurer$someNonEx.call(adventurer)) === undefined,
); // use browser API fetch, to check linting

fetch("https://jsonplaceholder.typicode.com/todos/1")
  .then(function (response) {
    return response.json();
  })
  .then(function (json) {
    return console.log(json);
  });
</pre>
<h3 id="theprosandconsofbabel">使用巴别塔的利弊</h3>
<p>优点:</p>
<ul>
<li>这个最基本的设置相对简单</li>
<li>在撰写本文时，Babel有一个庞大的社区来支持和持续更新36.8k GitHub stars</li>
</ul>
<p>缺点:</p>
<ul>
<li>缓慢的编译时间</li>
<li>许多依赖项，即使它们是开发依赖项(安装了269个包)</li>
<li>根据<code>du -sh</code>的报告，使用了39M的磁盘空间</li>
<li>根据<code>find . -type f | wc -l</code>的报告，安装了5728个文件</li>
</ul>
<h3 id="usingswctotranspileandpolyfill">使用swc蒸发和聚合填充</h3>
<p><img data-attachment-id="21931" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/swc-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/swc-1.png" data-orig-size="200,71" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="swc" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/swc-1.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/swc-1.png" decoding="async" class="alignleft size-full wp-image-21931 jetpack-lazy-image" src="../Images/dfe4bee037d01a5705dea102a850ce5f.png" alt="swc Logo" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/swc-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/swc-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21931" data-permalink="https://blog.logrocket.com/why-you-dont-need-babel/swc-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/swc-1.png" data-orig-size="200,71" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="swc" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/swc-1.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/swc-1.png" decoding="async" loading="lazy" class="alignleft size-full wp-image-21931" src="../Images/dfe4bee037d01a5705dea102a850ce5f.png" alt="swc Logo" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/swc-1.png"/></noscript>swc is a new competitor to Babel. It is written in Rust and up to 20 times faster. This can be very important if you find yourself waiting a long time to build your project.
<p>要设置它:</p>
<pre>mkdir swc-test
cd swc-test
npm init -y
mkdir src dist
npm install --save-dev @swc/cli @swc/core browserslist
</pre>
<p>将以下内容添加到您的<code>package.json</code>中。</p>
<pre>"browserslist": "defaults",
</pre>
<p>将<code>.swcrc</code>配置文件写入项目根目录。</p>
<pre>{
  "env": {
    "coreJs": 3
  },
  "jsc": {
    "parser": {
      "syntax": "ecmascript"
    }
  }
}</pre>
<p>将您的测试文件写入<code>src</code>，然后向transpile发出以下命令。</p>
<pre>npx swc src -d dist
</pre>
<p>运行结果文件，检查测试是否仍然有效。</p>
<pre>node dist/test.js
</pre>
<p>生成的SWC-trans filed文件如下所示:</p>
<pre>var ref, ref1;
var ref2;
// test nullish coalescing - return right side when left side null or undefined
var x = (ref2 = null) !== null &amp;&amp; ref2 !== void 0 ? ref2 : "default string";
console.assert(x === "default string");
var ref3;
var y = (ref3 = 0) !== null &amp;&amp; ref3 !== void 0 ? ref3 : 42;
console.assert(y === 0);
// test optional chaining - return undefined on non existent property or method
var adventurer = {
  name: "Alice",
  cat: {
    name: "Dinah",
  },
};
var dogName =
  (ref = adventurer.dog) === null || ref === void 0 ? void 0 : ref.name;
console.assert(dogName === undefined);
console.assert(
  ((ref1 = adventurer.someNonExistentMethod) === null || ref1 === void 0
    ? void 0
    : ref1.call(ref1)) === undefined,
);
// use browser API fetch, to check linting
fetch("https://jsonplaceholder.typicode.com/todos/1")
  .then(function (response) {
    return response.json();
  })
  .then(function (json) {
    return console.log(json);
  });
</pre>
<h3 id="theprosandconsofswc">使用swc的利与弊</h3>
<p>优点:</p>
<ul>
<li>swc比<a href="https://github.com/swc-project/swc#performance" target="_blank" rel="noopener noreferrer">快得多</a></li>
<li>更少的依赖项(安装了43个包)</li>
</ul>
<p>缺点:</p>

<h2 id="otheralternativesgoogleclosurecompilerandtypescript">其他选择:Google Closure编译器和TypeScript</h2>
<p>我没有把<a href="https://developers.google.com/closure/compiler/" target="_blank" rel="noopener noreferrer"> Google Closure编译器</a>作为一个选项，因为它使用起来非常复杂。也就是说，它可以很好地完成传输和聚合填充。如果你有空闲时间，我建议你去看看——特别是如果你重视小文件的话，因为它内置的缩小功能明显更好。</p>
<p>您还可以使用<a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer"> TypeScript </a>来传输文件，使用core-js来手动填充，但是这是一个笨拙的解决方案，很容易产生比它解决的问题更多的问题。</p>
<h2 id="conclusion">结论</h2>
<p>你不需要自动支持旧的浏览器。首先查看您的分析数据以了解您的客户实际上在使用哪些浏览器非常重要。</p>
<p>如有必要，您可以使用林挺来确保向后兼容性。这将省去创建特殊构建步骤和依赖transpilation的麻烦。</p>
<p>如果你选择自动翻译，那么SWC比巴别塔快得多，包含的依赖也少得多。也可以选择使用Google Closure Compiler或TypeScript，但是这需要更多的配置工作。</p><div class="code-block code-block-2">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>