<html>
<head>
<title>A complete guide to React Navigation 5 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>反应导航的完整指南5 - LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/a-complete-guide-to-react-navigation-5/#0001-01-01">https://blog.logrocket.com/a-complete-guide-to-react-navigation-5/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<p>开发移动应用程序涉及许多移动部件。从样式、功能、认证和会话持久性到导航。本文的目标是用必要的技能和知识武装你，让你使用React Navigation 5在React原生应用中构建简单和复杂的导航系统。</p>
<p>React Navigation是一个由组件组成的库，它使得在React Native中构建和连接屏幕变得很容易。了解移动应用程序中的导航是如何工作的，以及基于移动设备的导航和基于网络的导航之间存在哪些主要差异，这一点非常重要。</p>
<p>如果您以前设计和开发过网站，那么通过锚标签<code>&lt;a&gt;</code>可以在不同的网页之间以及同一网页内导航，锚标签由各种属性组成，允许开发人员操作网页中的导航。开发人员不必显式定义页面的行为，因为这可以由浏览器来处理。对于移动应用程序，导航需要在开发的早期阶段被明确地处理和定义。从定义导航类型到嵌套导航，移动应用程序中的导航需要更多的工作，有时可能相当复杂。</p>
<h2>React导航中的导航类型</h2>
<h3>抽屉导航</h3>
<p>这是由导航模式组成的，它要求你从左侧(有时是右侧)使用一个抽屉在屏幕间导航。通常，它由提供在屏幕之间移动的网关的链接组成。这类似于基于web的应用程序中的侧边栏。Twitter是一个利用抽屉导航的流行应用程序。</p>
<h3>标签导航</h3>
<p>这是大多数移动应用程序中最常见的导航形式。可以通过基于选项卡的组件进行导航。它由底部和顶部选项卡组成。Instagram是一个流行的应用程序，它使用基于标签的导航。您可以使用主页屏幕进行底部导航，使用个人资料屏幕进行顶部选项卡导航。</p>
<h3>堆栈导航</h3>
<p>屏幕之间的转换以堆栈的形式成为可能。各种屏幕相互堆叠，屏幕之间的移动包括用一个屏幕替换另一个屏幕。WhatsApp聊天屏幕是一个利用堆栈导航的流行应用。</p>
<p>大多数时候，移动应用程序利用所有类型的导航器来构建应用程序的各种屏幕和功能。这被称为嵌套导航器。利用这一概念的一个流行应用是Twitter。主屏幕包含一个抽屉导航类型，您可以通过它导航到其他屏幕。搜索选项卡包含一个顶部选项卡导航，允许您从直接消息(DMs)屏幕移动到基于所选Tweet的聊天。这是通过堆栈导航实现的。</p>
<p>本文介绍了如何一个接一个地创建这些导航。然后，我们将继续通过嵌套来组合它们。</p>
<h3>先决条件</h3>
<ul>
<li>Nodejs LTS版本或更高版本</li>
<li>博览会(安装在下方)</li>
<li>Mac用户的守夜人</li>
</ul>
<p>出于本教程的目的，我们将使用Expo。Expo使得使用React Native开发移动应用程序变得非常容易。还有很多其他好处，所以你应该在这里查看文档<a href="https://docs.expo.io/get-started/installation/" target="_blank" rel="noopener noreferrer"/>。</p>
<p>使用以下命令安装Expo cli:</p>
<pre>npm install expo-cli --global</pre>
<p>我已经提供了一个GitHub库，其中包含了完成本教程所需的基本设置。我们将一起安装各种React导航包。在这里克隆仓库<a href="https://github.com/themmyloluwaa/reactNavigation5" target="_blank" rel="noopener noreferrer"/>。</p>
<p>使用以下命令安装React导航:</p>
<pre>npm install @react-navigation/native</pre>
<p>使用Expo安装我们的依赖项:</p>
<pre>expo install react-native-gesture-handler react-native-reanimated react-native-screens react-native-safe-area-context @react-native-community/masked-view</pre>
<p>注意:您可以将依赖项安装到一个不基于Expo的项目中。因为我们在使用Expo，所以需要使用Expo来安装这些依赖项。Expo将确保安装的依赖项版本与我们应用程序的React本地版本兼容。对于非Expo应用中的安装，查看<a href="https://reactnavigation.org/docs/getting-started" target="_blank" rel="noopener noreferrer">文档</a>。</p>
<p>让我们花一点时间来理解我们刚刚安装的包。我们安装了<code>react-native-gesture-handler</code>来提供本地驱动的手势管理API，以便在React Native中构建最佳的基于触摸的体验。</p>
<p>我们还安装了<code>react-native-reanimated</code>来处理基于手势的动画，<code>react-native-screens</code>来提供本地导航容器组件，以及<code>react-native-safe-area-context</code>来为我们的组件提供安全区域或边界。</p>
<p>您可以跳过安装，从该过程的第一步开始。在里面，你会找到我们上面安装的所有东西。运行<code>npm</code> i继续。</p>
<h3>项目结构</h3>
<p>首先，您将找到一个App.js文件。这是我们应用程序的入口。</p>
<p>您还将找到一个babel.config.js文件，其中包含Expo Babel配置。你不需要为此烦恼，因为世博会会自动处理这件事。</p>
<p>还将出现一个app.json文件，其中包含我们的应用程序在IOS、Android和其他web平台上的共享配置。在这里，您可以处理闪屏配置、方向、版本等。您应该查看本<a href="https://docs.expo.io/versions/latest/config/app/" target="_blank" rel="noopener noreferrer">指南</a>以获取可用配置的详细列表。</p>
<p>在根目录中，创建一个名为src的新文件夹。</p>
<p><strong> mkdir src </strong></p>
<p>在内部，又创建了3个目录:<code>mkdir {components,screens,navigation}<br/> </code> <br/>组件目录将保存组件，屏幕将保存每个屏幕，导航目录将保存导航配置。</p>
<h2>选项卡导航演示</h2>
<p>在我们继续之前，让我们了解我们需要构建什么。</p>
<p>我们有5个不同导航类型的屏幕:堆栈，标签和抽屉。从表面上看，我们正在组合各种导航类型来创建应用程序。容纳第四和第五个屏幕的抽屉导航，第二个屏幕中组合的顶部和底部标签导航，第一个屏幕的共享底部导航，第三个屏幕的堆栈导航。</p>
<p>现在我们已经了解了我们需要做什么，让我们创建四个文件。三个用于保存我们拥有的三种导航类型，一个索引将作为我们导航的入口，将这三种导航结合在一起。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p>我们的三个文件:</p>
<p><strong>CD src/navigation<br/></strong>T3】touch { index，appStackNavigator，appTabNavigator，appDrawerNavigator}。js<br/><strong>CD—</strong></p>
<p>React Navigation 5中的导航是通过将导航容器中的导航屏幕配置映射到应用程序的特定屏幕来实现的。为了成功地创建导航，我们必须有连接它们的屏幕。</p>
<p>运行以下命令:</p>
<pre>cd src/screens</pre>
<pre>touch {FirstScreen,SecondScreen,ThirdScreen,FourthScreen,FifthScreen}.js</pre>
<p>导航到每个屏幕，粘贴下面的代码。</p>
<p>确保根据文件名定义和导出正确的屏幕:</p>
<pre>import React from 'react'
import { View, Text } from 'react-native'

const FirstScreen = ({navigation, route}) =&gt; {
    return (
        &lt;View&gt;
            &lt;Text&gt;{} Screen&lt;/Text&gt;
        &lt;/View&gt;
    )
}

export default FirstScreen</pre>
<p>让我们将<code>react-native-elements</code>包用于样式和图标。</p>
<pre>npm install react-native-elements</pre>
<p>让我们继续将选项卡导航映射到选项卡屏幕。安装选项卡导航所需的依赖项:</p>
<pre>npm install @react-navigation/material-bottom-tabs react-native-paper @react-navigation/material-top-tabs react-native-tab-view</pre>
<p>接下来，您会发现已经安装了这些包。运行<code>npm i</code>。</p>
<p>我们将同时使用顶部和底部导航器。将它们与第一个和第二个屏幕一起导入到<code>appTabNavigator.js</code>文件中。我们还需要底部标签的图标。我们从随Expo预装的<code>react-native-vector-icons</code>导入吧。我们的底部选项卡导航也使用图标。让我们也从<code>react-native-vector-icons</code>导入图标。</p>
<pre>import React from "react";
import { createMaterialTopTabNavigator } from "@react-navigation/material-top-tabs";
import  { createMaterialBottomTabNavigator } from "@react-navigation/material-bottom-tabs";
import Icon from "react-native-vector-icons/FontAwesome5";

import FirstScreen from "../screens/FirstScreen";
import SecondScreen from "../screens/SecondScreen";</pre>
<p>创建一个<code>materialtoptabnavigator</code>和<code>materialbottomtabnavigator</code>的实例。</p>
<pre>const AppBottomNavigator = createMaterialBottomTabNavigator();
const AppTopNavigator = createMaterialTopTabNavigator();</pre>
<p>第二个屏幕包含顶部的选项卡导航器，让我们来处理它。</p>
<pre>const SecondScreenTopTabNavigator = () =&gt; (
  &lt;AppTopNavigator.Navigator
    initialRouteName="CHATS"
    tabBarOptions={{
      style: { backgroundColor: "#490222" },
      labelStyle: { fontSize: 14, fontWeight: "bold" },
      activeTintColor: "#ffffff",
      indicatorStyle: { height: 3, backgroundColor: "#fff", paddingBottom: 6 },
      inactiveTintColor: "#adadad",
      tabStyle: { height: 100, justifyContent: "flex-end" }
    }}
  &gt;
    &lt;AppTopNavigator.Screen component={SecondScreen} name="CHATS" /&gt;
    &lt;AppTopNavigator.Screen component={SecondScreen} name="REQUESTS" /&gt;
  &lt;/AppTopNavigator.Navigator&gt;
);</pre>
<p>每个导航都是隐式返回的React组件。各种样式和配置可以应用于组件。我们将上面定义的选项卡导航实例提供给我们的屏幕包装在一个navigator组件中，并使用<code>tabBarOptions</code>道具定义样式。导航器包装器具有各种用于样式化和配置导航的配置。</p>
<p>在这里，我们将背景设置为UI的颜色，并更改了每个选项卡的活动和非活动状态。请参考每种导航类型的文档，以查看可用于配置的选项列表。<code>initialRouteName</code>道具是导航组件用来识别我们想要导航到的特定屏幕的东西。这对于所有屏幕都必须是唯一的。</p>
<p>顶部选项卡navigator的实例也为我们提供了一个屏幕组件，它将我们定义的屏幕连接到导航包装器。它可以使用各种道具，其中之一是持有屏幕的组件，以及作为每个屏幕的唯一标识符的名称。有关其他配置选项，请参考文档。</p>
<p>让我们继续创建底部导航。回想一下，我们之前为底部导航创建了一个实例。底部的导航器会有所不同，因为它有图标。</p>
<pre>const AllScreenTabNavigator = () =&gt; (
  &lt;AppBottomNavigator.Navigator
    initialRouteName="First"
    screenOptions={{
      tabBarColor: "#490222"
    }}
  &gt;
    &lt;AppBottomNavigator.Screen
      name="First"
      component={FirstScreen}
      options={{
        tabBarIcon: () =&gt; &lt;Icon name="book-open" size={25} color="#fff" /&gt;
      }}
    /&gt;
    &lt;AppBottomNavigator.Screen
      name="First Two"
      component={FirstScreen}
      options={{
        tabBarIcon: () =&gt; &lt;Icon name="file-alt" size={25} color="#fff" /&gt;
      }}
    /&gt;
    &lt;AppBottomNavigator.Screen
      name="Second"
      children={SecondScreenTopTabNavigator}
      options={{
        tabBarIcon: () =&gt; &lt;Icon name="comment-alt" size={25} color="#fff" /&gt;
      }}
    /&gt;
    &lt;AppBottomNavigator.Screen
      name="Second Two"
      children={SecondScreenTopTabNavigator}
      options={{
        tabBarIcon: () =&gt; &lt;Icon name="user" size={25} color="#fff" /&gt;
      }}
    /&gt;
  &lt;/AppBottomNavigator.Navigator&gt;
);

export { AllScreenTabNavigator };</pre>
<p>我们已经成功完成了选项卡导航。我们通过选项道具使用图标，并通过子道具连接第二个屏幕的顶部选项卡导航器。我们使用子属性而不是组件属性，因为第二个屏幕也包含导航组件，并且是底部导航器的子元素。</p>
<p>转到index.js并粘贴它来查看我们现在拥有的工作演示。我们将重新查看该文件，以了解稍后会发生什么:</p>
<pre>import React from "react";
import { NavigationContainer } from "@react-navigation/native";
import { AllScreenTabNavigator } from "./appTabNavigator";

const RootNavigator = () =&gt; (
  &lt;NavigationContainer&gt;
    &lt;AllScreenTabNavigator /&gt;
  &lt;/NavigationContainer&gt;
);
export default RootNavigator;</pre>
<p>此外，用以下代码替换App.js文件中的代码:</p>
<pre>import "react-native-gesture-handler";
import React from "react";
import { StyleSheet } from "react-native";
import RootNavigator from "./src/navigation/index";

export default function App() {
  return (
    &lt;&gt;
      &lt;RootNavigator /&gt;
    &lt;/&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "#fff",
    alignItems: "center",
    justifyContent: "center"
  }
});</pre>
<p>现在，一旦您使用Expo start运行您的项目，您应该能够看到这一点:</p>
<p><img data-attachment-id="30135" data-permalink="https://blog.logrocket.com/a-complete-guide-to-react-navigation-5/expo-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen.png" data-orig-size="712,1540" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="expo-screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen-473x1024.png" decoding="async" class="aligncenter wp-image-30135 jetpack-lazy-image" src="../Images/978ee22a3e8a88121cf5bf719c135479.png" alt="Our first screen run in Expo." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen.png 712w, https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen-473x1024.png 473w, https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen-710x1536.png 710w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="30135" data-permalink="https://blog.logrocket.com/a-complete-guide-to-react-navigation-5/expo-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen.png" data-orig-size="712,1540" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="expo-screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen-473x1024.png" decoding="async" loading="lazy" class="aligncenter wp-image-30135" src="../Images/978ee22a3e8a88121cf5bf719c135479.png" alt="Our first screen run in Expo." srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen.png 712w, https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen-473x1024.png 473w, https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen-710x1536.png 710w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/expo-screen.png"/></noscript>
<p>转到tab-navigation分支，查看完整的代码。</p>
<h2>抽屉导航演示</h2>
<p>安装抽屉导航包:</p>
<pre>npm install @react-navigation/drawer</pre>
<p>导入所需的包并创建抽屉导航器的实例:</p>
<pre>import React from 'react';
import { createDrawerNavigator } from '@react-navigation/drawer';
import FourthScreen from '../screens/FourthScreen'
import FifthScreen from '../screens/FifthScreen'

const Drawer = createDrawerNavigator();</pre>
<p>我们将选项卡导航器定义为React组件的方式与我们创建抽屉导航器的方式相同:</p>
<pre>const AllDrawerNavigation = () =&gt; (
    &lt;Drawer.Navigator initialRouteName='Fourth'&gt;
        &lt;Drawer.Screen component={FourthScreen} name='Fourth' /&gt;
        &lt;Drawer.Screen component={FifthScreen} name='Fifth' /&gt;
    &lt;/Drawer.Navigator&gt;
)

export default AllDrawerNavigation;</pre>
<p>导出它。</p>
<p>将它导入到navigation/index.js文件中，并将<code>AllScreenTabNavigator</code>替换为<code>AllDrawerNavigation</code>以查看它的运行情况。</p>
<p><img data-attachment-id="30136" data-permalink="https://blog.logrocket.com/a-complete-guide-to-react-navigation-5/fourth-and-fifth-screens/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens.png" data-orig-size="710,1530" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="fourth-and-fifth-screens" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens-475x1024.png" decoding="async" class="aligncenter wp-image-30136 jetpack-lazy-image" src="../Images/ca03f639651e00664436dbf7c0604ad4.png" alt="The fourth and fifth screens in our navigation." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens.png 710w, https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens-475x1024.png 475w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="30136" data-permalink="https://blog.logrocket.com/a-complete-guide-to-react-navigation-5/fourth-and-fifth-screens/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens.png" data-orig-size="710,1530" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="fourth-and-fifth-screens" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens-475x1024.png" decoding="async" loading="lazy" class="aligncenter wp-image-30136" src="../Images/ca03f639651e00664436dbf7c0604ad4.png" alt="The fourth and fifth screens in our navigation." srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens.png 710w, https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens-475x1024.png 475w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/fourth-and-fifth-screens.png"/></noscript>
<p>检查抽屉导航分支，查看完整的代码。</p>
<h2>堆栈导航演示</h2>
<p>最后一个屏幕是堆栈导航器。</p>
<p>安装所需的软件包:</p>
<pre>npm install @react-navigation/stack</pre>
<p>导入所需的依赖项，并创建堆栈导航器的实例:</p>
<pre>import React from 'react'
import { createStackNavigator } from "@react-navigation/stack";

import ThirdScreen from '../screens/ThirdScreen'

const StackNavigator = createStackNavigator();</pre>
<p>通过上面创建的StackNavigator实例连接第三个屏幕，并将其导出:</p>
<pre>const ThirdScreenNavigation = () =&gt; (
  &lt;StackNavigator.Navigator
    initialRouteName="Third"
    screenOptions={{
      header: () =&gt; null
    }}
  &gt;
    &lt;StackNavigator.Screen component={ThirdScreen} name="Third" /&gt;
  &lt;/StackNavigator.Navigator&gt;
);

export default ThirdScreenNavigation;</pre>
<p>用导出的<code>ThirdScreenNavigation</code>替换index.js中的<code>AllDrawerNavigation</code>,查看它的运行情况。</p>
<p>检查堆栈导航分支，看看它是如何工作的。</p>
<p><img data-attachment-id="30137" data-permalink="https://blog.logrocket.com/a-complete-guide-to-react-navigation-5/new-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen.png" data-orig-size="740,1544" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="New-screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen-144x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen-491x1024.png" decoding="async" class="aligncenter wp-image-30137 jetpack-lazy-image" src="../Images/f51181e8220c72f690b4230606089947.png" alt="Our screen after stack navigation." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen.png 740w, https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen-144x300.png 144w, https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen-491x1024.png 491w, https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen-736x1536.png 736w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="30137" data-permalink="https://blog.logrocket.com/a-complete-guide-to-react-navigation-5/new-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen.png" data-orig-size="740,1544" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="New-screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen-144x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen-491x1024.png" decoding="async" loading="lazy" class="aligncenter wp-image-30137" src="../Images/f51181e8220c72f690b4230606089947.png" alt="Our screen after stack navigation." srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen.png 740w, https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen-144x300.png 144w, https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen-491x1024.png 491w, https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen-736x1536.png 736w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/New-screen.png"/></noscript>
<h3>组合导航(嵌套)</h3>
<p>现在让我们结合所有的导航器。这将在index.js文件中完成。在继续之前，让我们对屏幕进行一些重大改进，将它们之间的共享ui导出到一个名为Layout.js的单独组件中。</p>
<p>在组件目录中，创建一个Layout.js文件:</p>
<pre>import React from "react";
import { View, Text } from "react-native";

const Layout = props =&gt; {
  const { name = "" } = props;
  return (
    &lt;View
      style={{
        justifyContent: "center",
        alignItems: "center",
        flex: 1
      }}
    &gt;
      &lt;Text&gt;{name} Screen&lt;/Text&gt;
    &lt;/View&gt;
  );
};

export default Layout;</pre>
<p>我们将屏幕之间的共享UI移到了一个单独的文件中。布局组件应该有一个名称属性。我们从props中析构并传递一个默认值给它，以防没有名字传递给它。</p>
<p>用以下代码替换屏幕中您的退货声明中的所有代码:</p>
<pre>&lt;&gt;
      &lt;Layout /&gt;
 &lt;/&gt;</pre>
<p>现在让我们结合我们所有的导航器。</p>
<p>检查预组合导航分支，从这里跟进。</p>
<p>导入以前在React中创建的所有导航。此外，导入将包装整个应用程序的导航容器。这个导航容器包装了以前创建的整个导航，并充当应用程序的入口:</p>
<pre>import React from "react";
import { NavigationContainer } from "@react-navigation/native";
import { AllScreenTabNavigator } from "./appTabNavigator";
import AllDrawerNavigation from "./appDrawerNavigator";
import ThirdScreenNavigation from "./appStackNavigator";</pre>
<p>我们来思考一下app是如何架构的。第一和第二屏幕是选项卡导航类型，包含第三屏幕的堆栈导航类型的条目。</p>
<p>该屏幕还提供了进入第四和第五屏幕的入口，这是抽屉导航类型。从外观上看，很明显，所有5个屏幕都由一个共同的导航类型连接在一起:堆栈导航。</p>
<p>从标签到堆栈导航再到抽屉导航，需要用一种导航类型替换另一种导航类型。因此，整个应用程序将通过导航容器包装的堆栈导航连接起来。</p>
<p>导入<code>createStackNavigation</code>并粘贴下面的代码:</p>
<pre>const AllAppNavigation = createStackNavigator();

const RootNavigator = () =&gt; (
  &lt;NavigationContainer&gt;
    &lt;AllAppNavigation.Navigator
      initialRouteName="tab"
      screenOptions={{
        header: () =&gt; null
      }}
    &gt;
      &lt;AllAppNavigation.Screen name="tab" children={AllScreenTabNavigator} /&gt;
      &lt;AllAppNavigation.Screen name="stack" children={ThirdScreenNavigation} /&gt;
      &lt;AllAppNavigation.Screen name="drawer" children={AllDrawerNavigation} /&gt;
    &lt;/AllAppNavigation.Navigator&gt;
  &lt;/NavigationContainer&gt;
);
export default RootNavigator;</pre>
<p>转到App.js文件，将其中的代码替换为:</p>
<pre>import "react-native-gesture-handler";
import React from "react";
import { StyleSheet } from "react-native";
import RootNavigator from "./src/navigation/index";

export default function App() {
  return (
    &lt;&gt;
      &lt;RootNavigator /&gt;
    &lt;/&gt;
  );
}</pre>
<p>我们已经命名了每个导航组件，并分别创建了选项卡、堆栈和抽屉组件，以便在需要时能够导航到每个组件。可以使用不同的标签来表示导航子节点，但是为了方便起见，我们使用这些标签。立即查看应用程序。一切都是相互联系和起作用的。</p>
<h3>在屏幕间导航</h3>
<p>在第一个屏幕中，记录从导航包装器传递给我们的导航和路由对象。</p>
<p>navigation对象有方法和事件使屏幕之间的转换成为可能，而route对象包含关于我们的屏幕和屏幕之间共享状态的信息(如果有的话)(params)。</p>
<p><img data-attachment-id="30134" data-permalink="https://blog.logrocket.com/a-complete-guide-to-react-navigation-5/object-code-snippet/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet.png" data-orig-size="1114,854" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="object-code-snippet" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet-300x230.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet-1024x785.png" decoding="async" class="aligncenter wp-image-30134 jetpack-lazy-image" src="../Images/b4c017c18fc539d653f9d091cf45d55b.png" alt="A code snippet for our navigators." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet.png 1114w, https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet-300x230.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet-1024x785.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet-768x589.png 768w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="30134" data-permalink="https://blog.logrocket.com/a-complete-guide-to-react-navigation-5/object-code-snippet/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet.png" data-orig-size="1114,854" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="object-code-snippet" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet-300x230.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet-1024x785.png" decoding="async" loading="lazy" class="aligncenter wp-image-30134" src="../Images/b4c017c18fc539d653f9d091cf45d55b.png" alt="A code snippet for our navigators." srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet.png 1114w, https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet-300x230.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet-1024x785.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet-768x589.png 768w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/object-code-snippet.png"/></noscript>
<p>将route对象上的<code>route.name</code>键传递给布局组件。导航道具将用于移动到其他屏幕。如果您记录这两个对象，您将会看到以下内容。我们不会涵盖所有这些，但我们会涵盖一些我们需要在不同屏幕之间移动。</p>
<p>navigate方法用于移动到另一个屏幕。</p>
<p><code>goBack</code>方法用于移至上一个屏幕。</p>
<p>push方法的工作方式与navigate类似。</p>
<p><code>setParams</code>用于向其他屏幕传递参数。一个例子是传递一篇文章的<code>id</code>以在评论屏幕上获得该文章的评论。</p>
<p>路线上的名称值是赋予屏幕的名称。</p>
<p>在屏幕之间传递的参数可以在route对象上获得。</p>
<p>让我们在第一个屏幕中添加一个按钮，移动到第三个屏幕，在文件的顶部，添加:</p>
<pre>import { Button } from "react-native-elements";</pre>
<p>在布局组件下，添加:</p>
<pre>&lt;Button
        type="solid"
        title="Third Screen"
        containerStyle={{
          justifyContent: "center",
          alignItems: "center",
          height: 200
        }}
        buttonStyle={{
          borderColor: "#490222",
          backgroundColor: "#490222",
          width: 160,
          borderWidth: 1.3
        }}
        titleStyle={{
          color: "#fff"
        }}
        onPress={() =&gt; navigation.navigate("stack")}
      /&gt;</pre>
<p>当将我们的屏幕组合到导航对象上的navigate方法时，我们将赋予第三个屏幕的标签传递给它。</p>
<p>在第三个屏幕中，让我们添加一个按钮来移动到第四个屏幕。重复上面的步骤，但是将按钮的标题改为第四个屏幕，并将抽屉作为参数传递给navigate方法。</p>
<h2>结论</h2>
<p>我们已经成功地介绍了在React Native中创建屏幕和在屏幕之间导航。本指南为您提供了为项目构建简单和复杂导航所需的大部分知识和工具。记住，定义和构建导航应该是你首先要做的事情。</p>
<p>你有什么问题吗？你有什么想让我说的吗？欢迎发表评论。</p>

<p> </p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</h2><p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>