# 微服务时代的团队结构

> 原文：<https://blog.logrocket.com/team-structure-in-the-age-of-microservices/>

博客圈的传教士们已经对单片应用程序的邪恶之处进行了激烈的抨击，这些火与硫磺的说教引起了开发者的共鸣，因为我们已经闻到了那些坏死的仓库中含硫的技术债务。是的，我们祈祷微服务淹没代码库，清洗我们的编辑。微服务当救世主，微服务当乐土！

后来，我们把我们的商业规则装进了一个方舟，当洪水退去，我们把它们释放出来，重新填充我们的软件世界。阿门。

然而，这次航行之后，我们的业务或其编码实践会有根本的不同吗？

很有可能，他们不是。

同样的有缺陷的个人和报告层级随着变更的进行而出现:长颈鹿不会神奇地变成独角兽，就像团队成员不会神奇地变成智囊团一样，他们只是简单地将关注点转移到新的架构范例中。除非向微服务的迁移伴随着专门针对团队结构及其工作方式的更高要求，否则牛顿第一定律“一切照常”将占据主导地位:每个组织都将发现自己或多或少地处于与以前相同的位置，尽管没有在任何*迁移中被剔除的多余行李，无论其目的地或目的如何。*

因此，我们得出了问题的核心真相:架构变更不是组织变更，尽管这两者经常被混为一谈。套用康威定律(Conway's Law)的话来说，一个组织产生的代码的效力将反映在该组织的沟通效力上。选择你想要的任何架构，但是在实践中，糟糕的组织会产生糟糕的代码。

如果您的组织没有强制执行代码必须被测试，那该怎么办？好吧，那么你可能手上有难闻的代码，需要一个超大的 QA 部门的帮助。

它不需要容器化的开发环境？那么你的代码就有只被原作者维护的风险，因为只有他们才能让它工作。

没有种子数据？没有有意义的端到端测试。这样的例子不胜枚举。

转向微服务并不能修复你的团队，但它可能有助于揭示其缺陷。

这对于点击诱饵标题来说是不好的，但是微妙的事实是大多数开发团队更需要解决他们组织结构中的缺点，而不是解决他们的架构范例。对于每一个真正被推到代码底层架构极限的团队来说，一定有很多人因为他们自己的无能和缺乏计划而遭受更多的痛苦。对于他们和他们的经理来说，架构仅仅是一个方便的替罪羊。

组织必须承认他们的应用程序可以承受更大的负载，提供更高的透明度，并允许更快的特性迭代，只要每个团队成员都拥有同样的精通、高标准和对细节的关注。如果管理层允许他们的团队修复他们知道从根本上被破坏的东西就好了。如果委托给有思想的所有者，用过时的框架编写的整体应用程序仍然可以是高性能的、干净的和优雅的。如果一个代码库是臃肿或混乱的，那么这更多地证明了其贡献者缺乏技能和缺乏适当的技术标准。当然，您有有问题的代码，但是它不会自己变成那样:您的组织使它变成那样。

一旦我们认识到团队的组织结构是决定一个开发项目成功机会的关键因素，我们就可以确定该组织的领导层必须承担的最重要的品质。

## 定义和执行标准

这是一个统治他们所有人的原则:所有其他的原则都受它的约束。除非通过规范和标准建立了适当的沟通渠道，否则再多的架构或人员变动也无法解决代码的问题。

一个组织可以做出的最重要的承诺就是在任何开发之前写清楚详细的技术规范。“有效的产品规格是构建优秀软件的关键部分，”Gaurav Oberoi 在他关于撰写技术规格的文章中写道。“它们迫使批判性思维提前，扩大沟通，提高责任感，所有这些都导致更高的质量、更低的进度风险和更少的时间浪费。”

一个来自食品行业的类比浮现在脑海中:你可能会在“[机场](http://www.thatericalper.com/2015/05/04/this-is-what-the-very-first-mcdonalds-restaurant-looked-like/)”用美味的汉堡和薯条赚取丰厚的利润，但直到雷·克洛克出现并写了一本详细的手册，介绍如何衡量和复制餐厅的各个方面，你才拥有了自己的麦当劳特许经营权。机场是一顿美餐，但只有麦当劳能做到。

最有可能的后续问题是谁将编写测试，以及应该如何构建它们？不幸的是，对此没有一个明确的答案；Gaurav 的文章包含了一些有思想的例子，可以作为有用的模板。您可能会在[软件需求规范(SRS)](https://en.wikipedia.org/wiki/Software_requirements_specification) 的描述中找到灵感，但是最终，管理层必须找到一个适合开发人员和利益相关者的解决方案。如果这一指令没有从高层管理人员那里传下来，它被采纳的可能性几乎为零:开发人员将抵制额外的工作和责任，因为对它没有普遍的要求。这可能是一个困难的转变，但是请放心，一旦你已经将你的组织转变为按照技术规范运行，剩下的就只是细枝末节了。

## 测试

测试应该与你的规格说明书携手并进:它们是代码实现规格说明书的真正验证。你会发现单元测试在很大程度上变得次要于集成测试。唯一必要的是您的应用程序履行其规范中定义的义务。小黄瓜或其他语言的[行为驱动开发(BDD)](https://en.wikipedia.org/wiki/Behavior-driven_development) 可能是规范的有用对应物。

拥有一个定义好的规范和测试过程对于给你的软件一个完整的光环大有帮助。

## 推迟

组织总是在与约束作斗争，所以总是会有缩小范围、简化或加快速度的尝试。一个好的管理者必须始终清晰地认识到合法妥协和标准腐败之间的区别。一个特性可能会出现或消失，但是代码标准必须保持神圣不可侵犯。标准是唯一可以保护代码库免受开发人员在截止日期前所做的低劣贡献的东西。许多组织不知何故不能抽出时间来适当地实现一个解决方案，然而不知何故他们找到时间来无休止地修补由糟糕的实现所产生的错误。标准必须是暴风雨中的安全港。

## 微服务如何提供帮助

一旦一个组织有了正确定义的标准和一个有能力的团队，微服务就有可能提供一些吸引人的好处。

**小问题:**一个真正的微服务只关注少量的功能。它可能小到单个 AWS Lambda 函数或一组用于访问资源类型的相关函数，但真正的微服务是严格限定范围的。理想情况下，微服务是如此紧凑，以至于人们可以在一天内完全重写它。

**更简单的外包:**由于范围如此狭窄，微服务更容易外包，这使得团队成员更容易入职。没有必要共享王国的所有钥匙，人们只需要通过集成测试让服务履行其职责。没有规格和测试的外包是一个最好避免的危险习惯。

更简单的测试:测试变得主要集中在集成上，因为唯一真正重要的是微服务在更大的生态系统中完成它的角色。

## 微服务如何帮助

除了重申微服务不能解决长期存在的组织问题这一显而易见的事实之外，还进一步阐明了微服务为什么不能为某些问题提供解决方案。

**不可能的端到端测试:**根据所使用的技术，构建一个代表您整个业务的完整环境几乎是不可能的。一个单一的应用程序可能已经在您的本地机器上愉快地运行了，但是如果没有 DevOps 和专用资源的帮助，尝试加速运行您的整个环境所需的大量容器几乎是不可能的。要么你必须一次开发一个微服务，并在一个更强大的环境中运行任何端到端测试，要么你必须选择像 [Seneca](http://senecajs.org/) 或[elixin](https://elixir-lang.org/)这样的技术，它们可以以精简的方式运行多种服务，并减少需求。

## 结论

微服务很酷，但是团队结构是最重要的。没有一种架构范式可以弥补组织沟通中的不足。微服务可能会使部署和测试变得更容易，您的团队可以接受它们提供的可能性，作为一种跨多个存储库或模块构建代码的方法，以及如何根据特定的用例分离关注点。组织愉快！

## 使用 [LogRocket](https://lp.logrocket.com/blg/signup) 消除传统错误报告的干扰

[![LogRocket Dashboard Free Trial Banner](img/d6f5a5dd739296c1dd7aab3d5e77eeb9.png)](https://lp.logrocket.com/blg/signup)

[LogRocket](https://lp.logrocket.com/blg/signup) 是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket 会告诉您应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。

然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。

LogRocket 自动聚合客户端错误、JS 异常、前端性能指标和用户交互。然后 LogRocket 使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。

关注重要的 bug—[今天就试试 LogRocket】。](https://lp.logrocket.com/blg/signup-issue-free)

* * *