<html>
<head>
<title>Exploring the possibilities of Golang string formatting - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>探索Golang字符串格式化的可能性</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/exploring-the-possibilities-of-golang-string-formatting/#0001-01-01">https://blog.logrocket.com/exploring-the-possibilities-of-golang-string-formatting/#0001-01-01</a></blockquote><div><article class="article-post">
<p>字符串是软件程序中最常用的类型之一。字符串允许开发人员向用户显示值，例如显示对象最重要的属性。然而，我们经常需要额外的功能来将字符串转换成所需的格式。</p>
<p>假设我们要将一个有六个小数位的浮点数转换成人类可读的价格格式，小数点后只有两位数字。字符串格式在这里很方便。在本指南中，我们将探索<a href="https://medium.com/rungo/string-formatting-in-go-dd752ff7f60" target="_blank" rel="noopener noreferrer"> Go字符串格式化</a>的可能性。</p>
<h2>字符串格式:多种可能性</h2>
<p>Golang有丰富的字符串格式选项。最重要的包是内置的<code>fmt</code>包，它提供了各种各样的字符串格式化功能。</p>
<p>这个包提供了两个有趣的方法:</p>
<ol>
<li><code>Printf</code></li>
<li><code>Sprintf</code></li>
</ol>
<p>第一个方法是<code>Printf</code>，它将格式化的字符串打印到<code><a href="https://golang.org/pkg/os/#pkg-variables" target="_blank" rel="noopener noreferrer">os.Stdout</a></code>。但是，您可能希望使用格式化字符串来进一步修改它或将其传递给另一个函数。因此，将格式化字符串存储在变量中会很有用。这正是Sprintf所做的。</p>
<pre>s1 := fmt.Sprintf("a %s", "string")
</pre>
<p>这里，格式化值<code>a string</code>存储在<code>s1</code>变量中。在下一部分，我们将给出Golang <code>fmt</code>包的概述。</p>
<h2><code>fmt</code>套餐</h2>
<p><code>fmt</code>包使您能够将字符串、数字甚至对象转换成特定的字符串格式。下面讨论的所有格式选项都是通过<code>fmt.Printf</code>和<code>fmt.Sprintf</code>函数实现的。</p>
<p>此外，通过所谓的<code>verbs</code>来修改值。动词是指百分号(<code>%</code>)与字母或数字的组合。每个动词以不同的方式格式化一个值。为此，<code>fmt.Printf</code>函数知道如何解释这些特殊的动词。</p>
<p>例如，<code>%d</code>动词使您能够将一个数字格式化为它的十进制字符串表示。</p>
<pre>fmt.Printf("Number %d", 9)
// Output: Number 9
</pre>
<p>你可以使用许多更有趣的动词。让我们探索几种不同的类型，从一般动词开始。</p>
<h2>一般动词</h2>
<p>打印对象最重要的动词是<code>%v</code>动词。它通常用于将对象快速打印为字符串，这对调试应用程序很有帮助。每个Golang开发者都应该知道这个动词。</p>
<p>在下面的例子中，定义了一个<code>Dimension struct</code>。它接受两个参数:<code>height</code>和<code>length</code>。接下来，<code>%v</code>动词打印对象的内容。</p>
<pre>type Dimension struct {
        height, length int
}   

dimension := Dimension{180, 80}
fmt.Printf("%v", dimension)
// Output: {180 80}
</pre>
<p>然而，那些值是毫无意义的。如果你有一个超过五个的结构，这可能会很混乱。然后，您必须查找结构中每个值的顺序，以了解哪个值对应于哪个字段。因此，有一个小技巧也可以打印变量名。下次使用%+v动词打印对象，因为它也打印相关的字段。</p>
<pre>fmt.Printf("%v", dimension)
// Output: {height:180 length:80}
</pre>
<p>对某些人来说，打印出你要传递的参数的类型可能是有用的。动词<code>%T</code>有助于完成这项任务。以下示例打印整数的类型。</p>
<pre>fmt.Printf("%T", 100)
// Output: int
</pre>
<h2>整数动词</h2>
<p>让我们探索整数的不同符号格式。<code>%x</code>动词让您将整数转换成16进制的字符串。例如，值<code>10</code>用16进制格式的字母<code>A</code>表示。</p>
<pre>fmt.Printf("%x", 10)
// Output: a
</pre>
<p>另一个有趣的动词是<code>%U</code>动词，它使您能够将整数转换成Unicode表示。</p>
<pre>fmt.Printf("%U", 10)
// Output: U+000A
</pre>
<h2>浮点格式</h2>
<p>浮点数可以进行多种转换。这些转换通常用于显示价格或小数点后有正确位数的其他数字。</p>
<p>同时，<code>%e</code>动词允许你用科学记数法显示一个数字。当一个介于1和10之间的数乘以10的幂时，这个数就用科学记数法写成了。</p>
<pre>fmt.Printf("%e", 999.35)
// Output: 9.993500e+02
</pre>
<p>您可以使用<code>%f</code>动词将数字转换为浮点数字。默认情况下，浮点数小数点后有六位数字。</p>
<pre>fmt.Printf("%f", 12.3456)
// Output: 12.345600
</pre>
<p>但是，您可以更有效地使用这个函数，例如将浮点数转换成价格标签。您可以传入一个额外的参数来定义小数位数。</p>
<pre>fmt.Printf("%.2f", 12.3456)
// Output: 12.35
</pre>
<p>注意这里的输出:默认情况下，<code>fmt</code>包将最后一位向上舍入。</p>
<p>您还可以将结果字符串的宽度传递给<code>%f</code>动词。请注意，小数点也是字符串总宽度的一部分。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p>在某些情况下，您可能希望格式化浮点的长度一致，或者在字符串中添加前导零。目前，输出<code>12.35</code>的长度是五。让我们将长度设置为6，以便打印一个额外的前导零。</p>
<pre>fmt.Printf("%06.2f", 12.3456)
// Output: 012.35
</pre>
<p>如您所见，我们通过将<code>06</code>作为额外的参数(也称为标志)传递给<code>%f</code>动词，将宽度设置为6。在设置字符串的宽度之前，必须传递一个前导零。例如，如果您想将字符串的宽度设置为10，您需要传递<code>010</code>。</p>
<pre>fmt.Printf("%010.2f", 12.3456)
// Output: 0000012.35
</pre>
<p>甚至可以设置一个负的宽度。不是添加前导零，而是添加尾随零。然而，负宽度并不适合定义精度。</p>
<pre>fmt.Printf("%-010f", 12.3456)
// Output: 12.345600
</pre>
<p>您可以使用更多的标志来修改与<code>%f </code>动词结合的输出。你可以通过阅读<a href="https://golang.org/pkg/fmt/" target="_blank" rel="noopener noreferrer"> <code>fmt</code>文档</a>了解更多。</p>
<h2>字符串格式</h2>
<p>最后，让我们看看两个有用的打印字符串的动词。您可能会遇到类似这样的转义字符串:<code>\mystring\</code>。您可能希望打印不带转义语法的字符串，这样它看起来就像<code>string</code>。为此，你可以使用<code>%s</code>动词。</p>
<pre>fmt.Printf("%s\n", "\"string\"")
// Output: "string"
</pre>
<p>在某些情况下，您可能不想摆脱转义语法。在这些情况下，你可以使用<code>%q</code>动词。</p>
<p>对于基本的字符串打印，使用<code>%s</code>。</p>
<pre>fmt.Printf("%q\n", "\"string\"")
// Output: \"string\"
</pre>
<p>同样对于字符串，我们可以传递标志，比如格式化字符串的宽度。这里，字符串的宽度是通过添加前导空格来创建的。</p>
<pre>fmt.Printf("%10s\n", "five")
// Output:        five
</pre>
<h2>重要注意事项</h2>
<p>在我们结束本指南之前，我应该提一下关于动词的几个要点。</p>
<ul>
<li>如果你想打印一个<code>%</code>，你可以用一个百分号来转义它(你会得到<code>%%</code>)</li>
<li>如果你给一个不需要标志的动词传递一个标志，比如<code>.2</code>，它会忽略这个标志</li>
<li>除了<code>Printf </code>和<code>Sprintf</code>还有很多字符串格式化函数。你可以在<code><a href="https://golang.org/pkg/fmt/" target="_blank" rel="noopener noreferrer">fmt package documentation</a></code>中读到它们</li>
</ul>
<h3>转到字符串文字</h3>
<p>字符串文字使您能够修改字符串值，以确保字符串正确显示。</p>
<p>举个简单的例子，假设您想要显示一个带双引号的值。你可以用一个字符串来表示。反斜线有助于安全地封装双引号。</p>
<pre>`"My double-quoted string"`
</pre>
<p>您还可以做更多事情，例如在字符串中添加换行符。例如，如果您想打印一个项目列表，每个项目在自己的行上，您可以使用<strong> <code>\n</code> </strong>转义字符。</p>
<pre>fmt.Println("Items:\n1. Banana\n2. Apple")
// Output: 
Items:
1. Banana
2.Apple
</pre>
<p>获得相同结果的另一种方法是用反斜杠包围多行文本块。默认情况下，反勾号允许您创建多行字符串。</p>
<pre>fmt.Println(`
    Items:
    1. Banana
    2. Apple
`)
// Output: 
Items:
1. Banana
2.Apple
</pre>
<h2>结论</h2>
<p>Golang提供了一组丰富的函数、动词和标志，用于将任何类型转换为字符串格式。最有用的动词是<code>%+v</code>动词，它使您能够快速打印任何对象作为其字符串表示。这对于调试应用程序非常有用。</p>
<p>就个人而言，我喜欢使用浮点格式选项，因为它们提供了一系列将浮点格式转换为所需字符串格式的可能性。</p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>