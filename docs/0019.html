<html>
<head>
<title>Lazy loading React components - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>惰性加载React组件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/#0001-01-01">https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/#0001-01-01</a></blockquote><div><article class="article-post">
<p>前端开发的世界在不断发展，人们每天都在创建越来越复杂和强大的应用程序和软件。很自然，这导致了大量的代码捆绑，这可能会大大增加应用程序加载的时间，并对用户体验产生负面影响。这就是懒加载的用武之地。</p>
<p>在本教程中，我们将向您展示惰性加载如何在React.js中工作，演示如何使用<code>react.lazy</code>和<code>React.Suspense</code>应用代码分割和惰性加载，并构建一个演示React应用程序来查看这些概念的实际应用。</p>
<p><iframe loading="lazy" title="YouTube video player" src="https://www.youtube.com/embed/R6KGT8Omi7o" frameborder="0" allowfullscreen="allowfullscreen">视频</iframe></p>
<p>我们将详细介绍以下内容:</p>

<h2 id="whatislazyloading">什么是懒装？</h2>
<p><a href="https://blog.logrocket.com/understanding-lazy-loading-in-javascript/" target="_blank" rel="noopener noreferrer">惰性加载</a>是一种优化web和移动应用的设计模式。惰性加载的概念很简单:首先初始化对用户界面很关键的对象，然后悄悄地呈现不重要的项目。</p>
<p>当你访问一个网站或使用一个应用程序时，你很可能没有看到所有可用的内容。根据您导航和使用应用程序的方式，您可能永远不会遇到对某些组件的需求，加载不需要的项目会耗费时间和计算资源。延迟加载使您能够按需呈现元素，使您的应用程序更加高效，并改善用户体验。</p>
<h2 id="howtouselazyloadinginreact">如何在React中使用延迟加载</h2>
<p>React有两个特性，使得对React组件应用代码分割和延迟加载变得非常容易:<a href="https://reactjs.org/docs/code-splitting.html#reactlazy" target="_blank" rel="noopener noreferrer"> <code>React.lazy()</code> </a>和<a href="https://reactjs.org/docs/react-api.html#reactsuspense" target="_blank" rel="noopener noreferrer"> <code>React.Suspense</code> </a>。</p>
<p><code>React.lazy()</code>是一个功能，使您能够将一个<a href="https://blog.logrocket.com/speed-up-react-app-dynamic-imports-route-centric-code-splitting/" target="_blank" rel="noopener noreferrer">动态导入</a>作为一个常规组件。动态导入是代码分割的一种方式，是延迟加载的核心。作为React 16.6的核心特性，<code>React.lazy()</code>消除了使用第三方库如<code>react-loadable</code>的需要。</p>
<p><code>React.Suspense</code>允许您指定加载指示器，以防其下树中的组件尚未准备好进行渲染。</p>
<p>在我们看到运行中的<code>React.lazy</code>和<code>React.Suspense</code>之前，让我们快速回顾一下代码分割和动态导入的概念，解释它们是如何工作的，并分解它们如何促进React中的延迟加载。</p>
<h3 id="codesplittinginreact&quot;">React中的代码拆分</h3>
<p>随着<a href="https://blog.logrocket.com/es-modules-in-browsers-with-import-maps/" target="_blank" rel="noopener noreferrer"> ES模块</a>、transpilers如<a href="https://blog.logrocket.com/whats-coming-in-babel-8/" target="_blank" rel="noopener noreferrer"> Babel </a>以及bundlers如<a href="https://blog.logrocket.com/guide-performance-optimization-webpack/" target="_blank" rel="noopener noreferrer"> webpack </a>和Browserify的出现，你现在可以用完全模块化的模式编写JavaScript应用程序，以方便维护。通常，每个模块被导入并合并到一个称为捆绑包的文件中，然后该捆绑包被包含在网页上以加载整个应用程序。随着应用程序的增长，包的大小也会增加，最终会影响页面加载时间。</p>
<p><a href="https://reactjs.org/docs/code-splitting.html">代码分割</a>是将一大捆代码分割成多个可以动态加载的捆的过程。这有助于避免与过大的包相关的性能问题，而不会实际减少应用程序中的代码量。</p>
<h3 id="dynamicimportsinreact">React中的动态导入</h3>
<p>分割代码的一种方法是使用动态导入，它利用了<code><strong>import()</strong></code>语法。调用<code>import()</code>加载模块依赖于JavaScript承诺。因此，它返回一个承诺，该承诺由已加载的模块来实现，或者如果模块不能被加载，则该承诺被拒绝。</p>
<p>以下是为与webpack捆绑在一起的应用程序动态导入模块的样子:</p>
<p><img data-attachment-id="29697" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/dynamic-import-webpack-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1.png" data-orig-size="720,226" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Dynamic import in webpack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1-300x94.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1.png" decoding="async" class="aligncenter size-full wp-image-29697 jetpack-lazy-image" src="../Images/6cb6448ed02c7bf3d2e4fa84bbf781ad.png" alt="Dynamic Import in webpack" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1-300x94.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29697" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/dynamic-import-webpack-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1.png" data-orig-size="720,226" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Dynamic import in webpack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1-300x94.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29697" src="../Images/6cb6448ed02c7bf3d2e4fa84bbf781ad.png" alt="Dynamic Import in webpack" srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1-300x94.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/dynamic-import-webpack-1.png"/></noscript>
<p>当webpack看到这个语法时，它知道为<code>moment</code>库动态创建一个单独的包文件。</p>
<p>对于React应用来说，如果你使用的是样板文件，比如<code><a href="https://blog.logrocket.com/whats-new-in-create-react-app-4-0-0/" target="_blank" rel="noopener noreferrer">create-react-app</a></code>或<a href="https://blog.logrocket.com/next-js-vs-react-developer-experience/" target="_blank" rel="noopener noreferrer"> Next.js </a>，那么使用动态<code>import()</code>的代码分割会在运行中发生。然而，如果你使用定制的webpack设置，你应该查看<a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="noopener noreferrer"> webpack指南来设置代码分割</a>。对于Babel transpiling，你需要<a href="https://yarnpkg.com/en/package/babel-plugin-syntax-dynamic-import" target="_blank" rel="noopener noreferrer"> <code>babel-plugin-syntax-dynamic-import</code> </a>插件来正确解析动态<code>import()</code>。</p>
<p>事不宜迟，我们来探讨一下如何使用<code>React.lazy()</code>和<code>React.Suspense</code></p>
<h2 id="usingreactlazy">使用<code>React.lazy()</code></h2>
<p><code>React.lazy()</code>使得创建使用动态<code>import()</code>加载的组件变得容易，但是呈现的方式就像普通组件一样。这将在呈现组件时自动加载包含组件的包。</p>
<p><code>React.lazy()</code>将一个函数作为其参数，该函数必须通过调用<code>import()</code>加载组件来返回一个承诺。返回的承诺解析为一个模块，其默认导出包含React组件。</p>
<p>使用<code>React.lazy()</code>看起来像这样:</p>
<p><img data-attachment-id="29698" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-lazy-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1.png" data-orig-size="720,534" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Using React.lazy()" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1-300x223.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1.png" decoding="async" class="aligncenter size-full wp-image-29698 jetpack-lazy-image" src="../Images/61360c1d7266829629cbc862299908a9.png" alt="Using React.lazy()" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1-300x223.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29698" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-lazy-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1.png" data-orig-size="720,534" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Using React.lazy()" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1-300x223.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29698" src="../Images/61360c1d7266829629cbc862299908a9.png" alt="Using React.lazy()" srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1-300x223.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy_-1.png"/></noscript>
<h2 id="usingreactsuspense">使用<code>React.Suspense</code></h2>
<p>使用<code>React.lazy()</code>创建的组件只有在需要渲染时才被加载。因此，您应该在加载惰性组件时显示某种占位符内容，比如加载指示器。这正是<code>React.Suspense</code>的设计目的。</p>
<p><code>React.Suspense</code>是包装懒惰组件的组件。您可以用一个<code>Suspense</code>组件在不同的层次级别包装多个惰性组件。</p>
<p>当加载所有惰性组件时，<code>Suspense</code>组件接受一个<code>fallback</code>属性，该属性接受您希望呈现为占位符内容的React元素。</p>
<p><img data-attachment-id="29699" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-suspense-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1.png" data-orig-size="720,362" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Using React.Suspense" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1-300x151.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1.png" decoding="async" class="aligncenter size-full wp-image-29699 jetpack-lazy-image" src="../Images/3220e85e7f4572615a79f71c16edcdc0.png" alt="Using React.Suspense" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1-300x151.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29699" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-suspense-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1.png" data-orig-size="720,362" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Using React.Suspense" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1-300x151.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29699" src="../Images/3220e85e7f4572615a79f71c16edcdc0.png" alt="Using React.Suspense" srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1-300x151.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react.suspense-1.png"/></noscript>
<p>您可以在惰性组件上方的任何地方放置一个错误边界，以便在惰性组件加载失败时增强用户体验。</p>
<p>我在CodeSandbox 上创建了一个<a href="https://codesandbox.io/s/5ym1vlpmjl" target="_blank" rel="noopener noreferrer">非常简单的演示来演示如何使用<code>React.lazy()</code>和<code>Suspense</code>来延迟加载组件。</a></p>
<p>下面是我们的微型应用程序的代码:</p>
<pre>import React, { Suspense } from "react";
import Loader from "./components/Loader";
import Header from "./components/Header";
import ErrorBoundary from "./components/ErrorBoundary";

const Calendar = React.lazy(() =&gt; {
  return new Promise(resolve =&gt; setTimeout(resolve, 5 * 1000)).then(
    () =&gt;
      Math.floor(Math.random() * 10) &gt;= 4
        ? import("./components/Calendar")
        : Promise.reject(new Error())
  );
});

export default function CalendarComponent() {
  return (
    &lt;div&gt;
      &lt;ErrorBoundary&gt;
        &lt;Header&gt;Calendar&lt;/Header&gt;

        &lt;Suspense fallback={&lt;Loader /&gt;}&gt;
          &lt;Calendar /&gt;
        &lt;/Suspense&gt;
      &lt;/ErrorBoundary&gt;
    &lt;/div&gt;
  );
}</pre>
<p>这里，我们创建了一个简单的<code>Loader</code>组件，作为惰性<code>Calendar</code>组件的后备内容。我们还创建了一个错误边界，在懒惰的<code>Calendar</code>组件加载失败时显示一条消息。</p>
<p>我已经用另一个承诺包装了lazy <code>Calendar</code>导入，以模拟5秒钟的延迟。为了增加<code>Calendar</code>组件加载失败的机会，我还使用了一个条件，要么导入<code>Calendar</code>组件，要么返回一个拒绝的承诺。</p>
<p><img data-attachment-id="29700" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-lazy-calendar-import-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1.png" data-orig-size="720,276" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React.lazy calendar import" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1-300x115.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1.png" decoding="async" class="aligncenter size-full wp-image-29700 jetpack-lazy-image" src="../Images/085e1d7a2187538926da6266ef2e3343.png" alt="React.lazy Calendar Import" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1-300x115.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29700" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-lazy-calendar-import-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1.png" data-orig-size="720,276" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React.lazy calendar import" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1-300x115.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29700" src="../Images/085e1d7a2187538926da6266ef2e3343.png" alt="React.lazy Calendar Import" srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1-300x115.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react.lazy-calendar-import-1.png"/></noscript>
<p>下面的动画展示了使用<code>React.lazy()</code>和<code>React.Suspense</code>渲染时组件的样子。</p>
<p><img data-attachment-id="29680" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-lazy-load-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/10/react-lazy-load-demo.gif" data-orig-size="720,720" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React lazy loading calendar demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/10/react-lazy-load-demo-300x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/10/react-lazy-load-demo.gif" decoding="async" class="aligncenter size-full wp-image-29680 jetpack-lazy-image" src="../Images/41010d80445cb6be94ba3bc90020284b.png" alt="React Lazy Loading Calendar Demo" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/10/react-lazy-load-demo.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/10/react-lazy-load-demo.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29680" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-lazy-load-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/10/react-lazy-load-demo.gif" data-orig-size="720,720" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React lazy loading calendar demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/10/react-lazy-load-demo-300x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/10/react-lazy-load-demo.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29680" src="../Images/41010d80445cb6be94ba3bc90020284b.png" alt="React Lazy Loading Calendar Demo" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/10/react-lazy-load-demo.gif"/></noscript>
<h2 id="namedexportsforreactcomponents">React组件的命名导出</h2>
<p>目前，<a href="https://github.com/reactjs/rfcs/pull/64#issuecomment-431507924" target="_blank" rel="noopener noreferrer"> <code>React.lazy()</code>不支持对React组件使用命名导出</a>。如果您希望使用包含React组件的命名导出，您需要在单独的中间模块中将它们重新导出为默认导出。</p>
<p>例如，假设您在一个模块中有一个命名的导出，您希望使用<code>React.lazy()</code>加载<code>OtherComponent</code>。您将创建一个中间模块来重新导出<code>OtherComponent</code>作为默认导出。</p>
<p><code>Components.js</code>:</p>
<figure><img data-attachment-id="29701" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-lazy-components-js-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1.png" data-orig-size="720,191" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React.lazy() components" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1-300x80.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1.png" decoding="async" class="aligncenter size-full wp-image-29701 jetpack-lazy-image" src="../Images/4c710d4b3e66868ebf2ac7fe3af82c73.png" alt="React.lazy() Components" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1-300x80.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="29701" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-lazy-components-js-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1.png" data-orig-size="720,191" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React.lazy() components" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1-300x80.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29701" src="../Images/4c710d4b3e66868ebf2ac7fe3af82c73.png" alt="React.lazy() Components" srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1-300x80.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-components-js-1.png"/></noscript></figure>
<p><code>OtherComponent.js</code>:</p>
<figure><img data-attachment-id="29702" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-lazy-other-components-js-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1.png" data-orig-size="720,76" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React.lazy loading other-components.js" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1-300x32.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1.png" decoding="async" class="aligncenter size-full wp-image-29702 jetpack-lazy-image" src="../Images/40a051e8283b78f2498b7546639096d6.png" alt="React.lazy Loading other-components.js" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1-300x32.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="29702" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-lazy-other-components-js-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1.png" data-orig-size="720,76" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React.lazy loading other-components.js" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1-300x32.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29702" src="../Images/40a051e8283b78f2498b7546639096d6.png" alt="React.lazy Loading other-components.js" srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1-300x32.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react-lazy-other-components-js-1.png"/></noscript></figure>
<p>现在可以使用<code>React.lazy()</code>从中间模块加载<code>OtherComponent</code>。</p>
<h2 id="routebasedlazyloadinginreact">React中基于路由的延迟加载</h2>
<p><code>React.lazy()</code>和<code>React.Suspense</code>使您能够在不使用外部包的情况下执行基于路由的代码分割。您可以简单地将应用程序的路线组件转换为惰性组件，并用一个<code>Suspense</code>组件包装所有路线。</p>
<p>下面的代码片段显示了使用<a href="https://reach.tech/router" target="_blank" rel="noopener noreferrer"> Reach Router </a>库的基于路由的代码分割。</p>
<pre>import React, { Suspense } from 'react';
import { Router } from '@reach/router';
import Loading from './Loading';

const Home = React.lazy(() =&gt; import('./Home'));
const Dashboard = React.lazy(() =&gt; import('./Dashboard'));
const Overview = React.lazy(() =&gt; import('./Overview'));
const History = React.lazy(() =&gt; import('./History'));
const NotFound = React.lazy(() =&gt; import('./NotFound'));

function App() {
  return (
    &lt;div&gt;
      &lt;Suspense fallback={&lt;Loading /&gt;}&gt;
        &lt;Router&gt;
          &lt;Home path="/" /&gt;
          &lt;Dashboard path="dashboard"&gt;
            &lt;Overview path="/" /&gt;
            &lt;History path="/history" /&gt;
          &lt;/Dashboard&gt;
          &lt;NotFound default /&gt;
        &lt;/Router&gt;
      &lt;/Suspense&gt;
    &lt;/div&gt;
  )
}</pre>
<div class="inline-plug cro19">
<h2 id="trackstateanduserinteractionwithcomponents">跟踪状态和用户与组件的交互</h2>
<p>验证您的production React应用程序中的所有内容是否如预期的那样工作是非常重要的。如果您对监控和跟踪与组件相关的问题感兴趣，并想了解用户如何与特定组件交互，<a href="https://logrocket.com/signup/">请尝试LogRocket </a>。<a class="signup" href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer"><img data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-lazy-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/></noscript></a><a class="signup" href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer"><img data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" loading="lazy" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a></p>
<p>LogRocket 就像是网络应用的DVR，记录下你网站上发生的每一件事。LogRocket React插件允许您搜索用户会话，用户在该会话中单击应用程序中的特定组件。使用LogRocket，您可以了解用户如何与组件交互，并暴露与组件未呈现相关的任何错误。</p>
<p>此外，LogRocket记录Redux存储中的所有操作和状态。LogRocket让你的应用程序记录带有标题和正文的请求/响应。它还记录页面上的HTML和CSS，甚至可以重建最复杂的单页面应用程序的像素级完美视频。让您调试React应用的方式现代化—<a class="signup" href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p>
</div>
<h2 id="serversidecodesplittinginreact">React中的服务器端代码拆分</h2>
<p><code>React.lazy()</code>和<code>Suspense</code>还不能用于服务器端渲染。对于服务器端的代码分割，您仍然应该使用<code><a href="https://github.com/jamiebuilds/react-loadable" target="_blank" rel="noopener noreferrer">react-loadable</a></code>。</p>
<p>一种对React组件进行代码拆分的方法被称为基于路由的代码拆分，它需要将动态<code>import()</code>应用于延迟加载路由组件。<code>react-loadable</code>提供了一个高阶组件(HOC ),利用动态的<code>import()</code>语法加载带有承诺的React组件。</p>
<p>考虑以下名为<code>MyComponent</code>的React组件:</p>
<p><img data-attachment-id="29703" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/server-side-rendering-react-lazy-load-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1.png" data-orig-size="720,334" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Server-side rendering with react-loadable" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1-300x139.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1.png" decoding="async" class="aligncenter size-full wp-image-29703 jetpack-lazy-image" src="../Images/2032db7fc1aa42fd4729a9c2774c8ebe.png" alt="Server-Side Rendering With react-loadable" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1-300x139.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29703" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/server-side-rendering-react-lazy-load-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1.png" data-orig-size="720,334" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Server-side rendering with react-loadable" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1-300x139.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29703" src="../Images/2032db7fc1aa42fd4729a9c2774c8ebe.png" alt="Server-Side Rendering With react-loadable" srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1-300x139.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/server-side-rendering-react-lazy-load-1.png"/></noscript>
<p>这里，<code>OtherComponent</code>直到<code>MyComponent</code>被渲染才被需要。但是，因为我们是静态导入<code>OtherComponent</code>，所以它和<code>MyComponent</code>捆绑在一起。</p>
<p>我们可以使用<code>react-loadable</code>来推迟加载<code>OtherComponent</code>直到我们渲染<code>MyComponent</code>，从而将代码分割成单独的包。</p>
<p>下面是使用<code>react-loadable</code>加载的<code>OtherComponent</code>:</p>
<p><img data-attachment-id="29704" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-loadable-example-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1.png" data-orig-size="720,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-loadable example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1-300x198.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1.png" decoding="async" class="aligncenter size-full wp-image-29704 jetpack-lazy-image" src="../Images/5ca1759dc781d0936103ae5e81c076d7.png" alt="react-loadable Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1-300x198.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29704" data-permalink="https://blog.logrocket.com/lazy-loading-components-in-react-16-6-6cea535c0b52/react-loadable-example-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1.png" data-orig-size="720,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-loadable example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1-300x198.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29704" src="../Images/5ca1759dc781d0936103ae5e81c076d7.png" alt="react-loadable Example" srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1-300x198.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/react-loadable-example-1.png"/></noscript>
<p>使用动态<code>import()</code>语法导入组件，并将其分配给options对象中的<code>loader</code>属性。</p>
<p><code>react-loadable</code>还使用一个<code>loading</code>属性来指定一个在等待实际组件加载时呈现的后备组件。</p>
<h2>结论</h2>
<p>有了<code>React.lazy()</code>和<code>React.Suspense</code>，代码拆分和延迟加载React组件变得前所未有的简单。这些功能使提高React应用程序的性能和改善整体用户体验变得前所未有的容易。</p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>