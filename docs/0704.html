<html>
<head>
<title>How to set up your Gridsome app to use TypeScript - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何设置您的Gridsome应用程序以使用TypeScript - LogRocket Blog</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-set-up-your-gridsome-app-to-use-typescript/#0001-01-01">https://blog.logrocket.com/how-to-set-up-your-gridsome-app-to-use-typescript/#0001-01-01</a></blockquote><div><article class="article-post">
<p>根据该平台的官方<a href="https://gridsome.org/" target="_blank" rel="noopener noreferrer">网站</a>“grid some是一个免费和开源的静态网站生成器，帮助人们建立快速、高性能、可访问的网站和应用程序，并默认优化搜索引擎”。</p>
<p>它是构建在Vue.js框架之上的框架(是的，你没听错。是一个框架的框架)。它利用Vue.js引擎构建静态网站，使用GraphQL作为查询从数据源导入的资源的<a href="https://gridsome.org/docs/data-layer/" target="_blank" rel="noopener noreferrer">数据层</a>。它使用<a href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/" target="_blank" rel="noopener noreferrer"> PRPL架构模式</a>来提高网站的性能。</p>
<p>PRPL的缩写意思是:</p>
<ul>
<li>重新加载—预加载最重要的资源</li>
<li>ender —尽快渲染初始路线</li>
<li><strong> P </strong>重新缓存—预缓存剩余资产</li>
<li><strong> L </strong> azy load —惰性加载其他路线和非关键资产</li>
</ul>
<p>PRPL模式是用于服务渐进式Web应用程序(pwa)的架构模式。</p>
<p><img data-attachment-id="14701" data-permalink="https://blog.logrocket.com/how-to-set-up-your-gridsome-app-to-use-typescript/the-graphql-data-layer/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer.png" data-orig-size="1024,471" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The GraphQL data layer credits: https://gridsome.org" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer.png" decoding="async" class="aligncenter wp-image-14701 size-full jetpack-lazy-image" src="../Images/daf79e3343aec5a9d5d322004e972a46.png" alt="TheGraphQLdatalayer" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer-300x138.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer-768x353.png 768w" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="14701" data-permalink="https://blog.logrocket.com/how-to-set-up-your-gridsome-app-to-use-typescript/the-graphql-data-layer/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer.png" data-orig-size="1024,471" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The GraphQL data layer credits: https://gridsome.org" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer.png" decoding="async" loading="lazy" class="aligncenter wp-image-14701 size-full" src="../Images/daf79e3343aec5a9d5d322004e972a46.png" alt="TheGraphQLdatalayer" srcset="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer-300x138.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer-768x353.png 768w" sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/02/The-GraphQL-data-layer.png"/></noscript>
<p>Gridsome是基于<a href="https://jamstack.org/" target="_blank" rel="noopener noreferrer"> JAMstack工作流</a>的，你所需要的只是静态内容的标记/降价，以及JavaScript的功能和API来帮助完成不那么容易的事情。它受Gatsby.js的影响很大，Gatsby.js是一个基于React的静态站点生成器，但建立在Vue.js之上，Gridsome是Gatsby . js的直接替代物。</p>
<p><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer"> TypeScript </a>是JavaScript的类型化变体。Typescript帮助您编写静态类型的JavaScript，并在构建时向下编译JavaScript(JavaScript的类固醇)。</p>
<h2>先决条件</h2>
<p>本教程假设读者具备以下条件:</p>

<h2>什么是JAMstack？</h2>
<p>JAMstack是构建高速网站和应用的最佳实践、架构模式和工作流的集合，它优先考虑提供更好的性能、更高的安全性、更低的使用成本、可扩展性和更好的开发人员体验。</p>
<blockquote><p>“基于客户端JavaScript、可重用API和预建标记的现代web开发架构”<br/> —马蒂亚斯·比尔曼(Netlify的首席执行官&amp;联合创始人)</p></blockquote>
<p>JAMstack架构利用预渲染文件并直接从CDN提供服务，消除了管理或运行web服务器的需求。内容更新通过WordPress或Drupal等传统CMS推送，代码库使用Git等版本控制系统管理，部署使用Zeit、Netlify等提供CI/CD的服务自动化。</p>
<figure id="attachment_14708" aria-describedby="caption-attachment-14708" class="wp-caption aligncenter"><img data-attachment-id="14708" data-permalink="https://blog.logrocket.com/how-to-set-up-your-gridsome-app-to-use-typescript/jamstack-workflow/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow.png" data-orig-size="537,1375" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="JAMstack workflow" data-image-description="" data-image-caption="&lt;p&gt;The JAMstack workflow credits: https://jamstack.wtf/&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-117x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-400x1024.png" decoding="async" class="wp-image-14708 size-large jetpack-lazy-image" src="../Images/556682afeded69a20e32e8a00f63209d.png" alt="The JAMstack workflow" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-400x1024.png 400w, https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-117x300.png 117w, https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow.png 537w" data-lazy-sizes="(max-width: 400px) 100vw, 400px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-400x1024.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-400x1024.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="14708" data-permalink="https://blog.logrocket.com/how-to-set-up-your-gridsome-app-to-use-typescript/jamstack-workflow/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow.png" data-orig-size="537,1375" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="JAMstack workflow" data-image-description="" data-image-caption="&lt;p&gt;The JAMstack workflow credits: https://jamstack.wtf/&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-117x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-400x1024.png" decoding="async" loading="lazy" class="wp-image-14708 size-large" src="../Images/556682afeded69a20e32e8a00f63209d.png" alt="The JAMstack workflow" srcset="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-400x1024.png 400w, https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-117x300.png 117w, https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow.png 537w" sizes="(max-width: 400px) 100vw, 400px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/02/JAMstack-workflow-400x1024.png"/></noscript><figcaption id="caption-attachment-14708" class="wp-caption-text">The JAMstack workflow credits: <a href="https://jamstack.wtf/" rel="nofollow">https://jamstack.wtf/</a></figcaption></figure>
<h2>如何建立Gridsome项目</h2>
<p>要使用Gridsome，我们必须首先安装Gridsome CLI工具。</p>
<p>这个工具帮助你用一个默认的启动程序动态地引导Gridsome项目。</p>
<p>可以使用Yarn通过以下命令完成安装:</p>
<pre>yarn global add @gridsome/cli</pre>
<p>全局安装Gridsome包使我们能够使用<code>gridsome</code>关键字来执行某些操作。</p>
<p>接下来，我们使用<code>create</code>命令创建一个新项目:</p>
<pre>gridsome create gridsome-typscript</pre>
<p>该命令首先从包含引导您的项目所需的配置文件的<a href="https://github.com/gridsome/gridsome-starter-default" target="_blank" rel="noopener noreferrer">默认启动程序</a>中克隆一个可定制的启动程序项目，然后更新<code>package.json</code>文件并安装项目所需的依赖项。</p>
<p>现在，使用以下命令进入我们项目的目录:</p>
<pre>cd gridsome-typscript</pre>
<h2>了解Gridsome目录结构</h2>
<p>Gridsome starter项目的结构如下:</p>
<pre># gridsome-typescript

├── gridsome.config.js
├── gridsome.server.js
├── package.json
├── README.md
├── src
│    ├── components
│    │      └── README.md
│    ├── favicon.png
│    ├── layouts
│    │   ├── Default.vue
│    │   └── README.md
│    ├── main.js
│    ├── pages/
│    │   ├── About.vue
│    │   ├── Index.vue
│    │   └── README.md
│    └── templates
│         └── README.md
├── static
│   └── README.md
└── yarn.lock</pre>
<p>让我们花点时间来理解文件和文件夹代表什么，以及我们如何使用它们。</p>
<ul>
<li><code>package.json</code> —包含有关项目的信息，如项目中安装了哪些依赖项以及可以运行的脚本</li>
<li><code>gridsome.config.js</code> —站点和所用插件的配置以及<a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer"> webpack </a>在此完成。你可以设置你的网站名称，元数据，图标，网站描述等。你可以在这里了解更多关于配置你的网站的信息<a href="https://gridsome.org/docs/config/" target="_blank" rel="noopener noreferrer"/></li>
<li><code>gridsome.server.js</code> —该文件包含服务器的配置。它提供了使用服务器API来执行操作的访问权限，例如从本地或外部源加载数据、在开发期间配置Express server Gridsome运行以及创建自定义GraphQL模式</li>
<li><code>/src</code> —这个文件夹包含了你在任何项目中编写的大部分代码，它包含了你的应用程序的关键部分，比如组件、模板、页面、布局、自定义实用程序和资产，比如样式表和图像</li>
<li><code>/static</code> —该文件夹包含静态资产，只需要在站点建立后访问，如静态pdf文件和您的robot.txt文件。在构建过程中，该文件夹的内容被复制到<code>dist</code>目录</li>
</ul>
<h2>从。js到。分时（同timesharing）</h2>
<p>为了开始在我们的<code>.vue</code>文件中使用Typescript，我们需要安装<a href="https://www.typescriptlang.org/docs/" target="_blank" rel="noopener noreferrer"> TypeScript </a>，webpack的<a href="https://github.com/TypeStrong/ts-loader" target="_blank" rel="noopener noreferrer"> TypeScript加载器</a>和<code><a href="https://github.com/xerebede/gridsome-plugin-typescript" target="_blank" rel="noopener noreferrer">gridsome-typescript</a></code>插件。</p>
<pre>yarn add -D typescript ts-loader gridsome-plugin-typescript</pre>
<p>接下来，我们需要在<code>gridsome.config.js</code>文件中注册我们的<code>gridsome-typescript</code>插件:</p>
<pre>plugins: [
  {
    use: 'gridsome-plugin-typescript',
  }
]</pre>
<p>然后，我们在项目的基本目录下创建一个<code>tsconfig.json</code>文件，包含以下内容:</p>
<pre>{
    "compilerOptions": {
        "target": "es5",
        "module": "es2015",
        "moduleResolution": "node",
        "noImplicitReturns": true,
        "outDir": "./built/",
        "sourceMap": true,
        "strict": true
    },
    "include": [
        "./src/**/*"
    ]
}</pre>
<p>该文件包含影响我们项目中TypeScript行为的规则和配置集，<code>tsconfig.json</code>文件指定了编译项目所需的根文件和编译器选项。</p>
<p>在您的<code>src</code>文件夹中创建一个包含以下内容的<code>vue-shims.d.ts</code>:</p>
<pre>declare module "*.vue" {
    import Vue from "vue";
    export default Vue;
}</pre>
<p>这个文件帮助TypeScript理解<code>.vue</code>的内容。</p>
<p>现在我们可以在我们的<code>.vue</code>文件中使用TypeScript，所有需要做的就是添加来设置我们的单文件组件中的<code>script</code>标签的语言为<code>ts</code>:</p>
<pre>&lt;script lang="ts"&gt;

&lt;/script&gt;</pre>
<h2>使用一个预制的启动器</h2>
<p>您还可以使用<a href="https://github.com/xerebede/gridsome-starter-typescript" target="_blank" rel="noopener noreferrer">gridsome-typescript</a>starter来引导您的grid some项目。这个启动器被配置为使用typescript，您只需要安装它就可以使用它。</p>
<p>这个初学者利用ESLint来执行某些代码实践和规则，它有助于报告错误和避免bug。ESLint帮助我们提高整体代码质量。</p>
<p>要开始使用它，请创建一个新项目:</p>
<pre>gridsome create gridsome-typescript https://github.com/cleitonper/gridsome-starter-typescript.git</pre>
<p>将目录更改为您的项目文件夹:</p>
<pre>cd gridsome-typescript</pre>
<p>启动您的项目:</p>
<pre>gridsome develop</pre>
<p>在运行<code>gridsome develop</code>命令后，您应该看到您的应用程序在<code><a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080</a></code>上运行。</p>
<h2>结论</h2>
<p>在本文中，我们看到了如何启动Gridsome项目以及如何将TypeScript集成到其中，我们还看到了什么是JAMstack。要了解更多关于Gridsome的信息，请查看他们详细的文档。你可以访问Typescript-eslint <a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/docs/getting-started/linting/README.md" target="_blank" rel="noopener noreferrer">文档</a>来了解如何配置<a href="https://github.com/xerebede/gridsome-starter-typescript" target="_blank" rel="noopener noreferrer">预制启动器</a>，也可以查看JAMStack <a href="https://jamstack.org/" target="_blank" rel="noopener noreferrer">官方网站</a>和这篇<a href="https://blog.logrocket.com/why-you-should-be-using-jamstack/" target="_blank" rel="noopener noreferrer">文章</a>来了解更多关于JAMStack的信息，以及为什么你可能想在下一个项目中采用它。</p>
<p> </p>
<p> </p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的Vue应用</h2><p>调试Vue.js应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的Vue突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Vue应用程序中发生的一切，包括网络请求、JavaScript错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex插件将Vuex突变记录到LogRocket控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试Vue应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p><div class="code-block code-block-21">
<div class="blog-plug inline-plug typescript-plug"><h2><a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>:全面了解您的网络和移动应用</h2>
<a href="https://lp.logrocket.com/blg/typescript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放问题，就像问题发生在您自己的浏览器中一样。LogRocket不需要猜测错误发生的原因，也不需要向用户询问截图和日志转储，而是让您重放会话以快速了解哪里出错了。它可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。</p>
<p>除了记录Redux操作和状态，LogRocket还记录控制台日志、JavaScript错误、堆栈跟踪、带有头+正文的网络请求/响应、浏览器元数据和自定义日志。它还使用DOM来记录页面上的HTML和CSS，甚至为最复杂的单页面和移动应用程序重新创建像素级完美视频。</p>
<a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>
</div>
</div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>