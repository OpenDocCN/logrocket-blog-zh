<html>
<head>
<title>Setting up a monorepo with Lerna for a TypeScript project - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Lerna为TypeScript项目设置monorepo</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/#0001-01-01">https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:本帖于2022年1月31日更新，以使用Lerna和TypeScript的更新版本，改进和更好地组织教程，并为现代实现提供更清晰的说明。</em></p>
<p>使用单个存储库来维护包含所有包的整个项目通常是非常有用的。像谷歌和T2和脸书这样的公司已经在他们的大部分项目中使用了一个内部存储库。当公司使用类似的技术，并且所有项目共享一组公共的依赖项和文件时，这种解决方案会非常方便。</p>
<p>像<a href="https://github.com/angular/angular" target="_blank" rel="noopener"> Angular </a>、<a href="https://github.com/facebook/react" target="_blank" rel="noopener"> React </a>、<a href="https://github.com/meteor/meteor" target="_blank" rel="noopener"> Meteor </a>、<a href="https://github.com/babel/babel" target="_blank" rel="noopener"> Babel </a>、<a href="https://github.com/nestjs/nest" target="_blank" rel="noopener"> Nest.js </a>和其他许多流行的JavaScript项目都使用一个单一的库来存放它们所有的包。事实上，他们中的一些人使用Lerna。</p>
<h3>什么是Lerna？</h3>
<p>Lerna 是一个流行且广泛使用的工具，用JavaScript编写，用于使用npm和Git为Node.js项目设置和管理多包存储库。</p>
<p>Lerna有两种模式:固定和独立。固定模式将所有版本的包保持在同一级别。这种方法现在很流行。你可能在Angular看过。</p>
<p><img data-attachment-id="92347" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/fixed-mode-angular/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular.png" data-orig-size="730,217" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="fixed-mode-angular" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular-300x89.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular.png" decoding="async" class="aligncenter size-full wp-image-92347 jetpack-lazy-image" src="../Images/9b5ea5386531b92e80120758cddbb316.png" alt="Example of fixed mode in Angular" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular-300x89.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="92347" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/fixed-mode-angular/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular.png" data-orig-size="730,217" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="fixed-mode-angular" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular-300x89.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-92347" src="../Images/9b5ea5386531b92e80120758cddbb316.png" alt="Example of fixed mode in Angular" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular-300x89.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/fixed-mode-angular.png"/></noscript>
<p>独立模式允许我们每个包有不同的版本。</p>
<p>如果您有一个大型或复杂的项目，使用一个单一的存储库来存储所有的包有助于组织和维护。谢天谢地，对于Lerna来说这很容易。</p>
<h2>初始设置</h2>
<p>在开始之前，确保你有<a href="https://www.npmjs.com/signup" target="_blank" rel="noopener"> npm </a>和<a href="https://github.com/signup" target="_blank" rel="noopener"> GitHub </a>账户，因为我们将使用它们来托管我们的项目。另外，<a href="https://docs.npmjs.com/creating-an-organization" target="_blank" rel="noopener">创建一个npm组织</a>，这样一旦我们完成了，你就可以发布带有范围包的项目。</p>
<p>完成后，将Lerna作为一个全局依赖项安装:</p>
<pre class="language-bash hljs">npm install -g lerna
</pre>
<p>我们将构建一个简单的项目。我们的项目将由多个包组成，我们称之为<code>hospital-sdk</code>。</p>
<p><img data-attachment-id="92354" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/monorepo-project-setup-visual/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual.png" data-orig-size="730,336" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="monorepo-project-setup-visual" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual.png" decoding="async" class="aligncenter size-full wp-image-92354 jetpack-lazy-image" src="../Images/369dfd1665415f321941d7a0a0304e24.png" alt="A visual of our monorepo setup for this project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="92354" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/monorepo-project-setup-visual/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual.png" data-orig-size="730,336" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="monorepo-project-setup-visual" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-92354" src="../Images/369dfd1665415f321941d7a0a0304e24.png" alt="A visual of our monorepo setup for this project" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/monorepo-project-setup-visual.png"/></noscript>
<p>创建一个名为<code>hospital</code>的文件夹，并在文件夹中初始化Lerna:</p>
<pre class="language-bash hljs">lerna init &amp;&amp; npm install
</pre>
<p>该命令将创建一个带有默认文件夹结构的<code>lerna.json</code>文件。</p>
<p><img data-attachment-id="92358" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/lerna-project-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure.png" data-orig-size="730,357" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="lerna-project-folder-structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure.png" decoding="async" class="aligncenter size-full wp-image-92358 jetpack-lazy-image" src="../Images/a4f08459c266ddb549fe2c1252e1c788.png" alt="Our Lerna project's folder structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure-300x147.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="92358" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/lerna-project-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure.png" data-orig-size="730,357" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="lerna-project-folder-structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-92358" src="../Images/a4f08459c266ddb549fe2c1252e1c788.png" alt="Our Lerna project's folder structure" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure-300x147.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/lerna-project-folder-structure.png"/></noscript>
<p><code>/packages</code>是我们共享包的占位符，<code>lerna.json</code>是一个Lerna配置文件。<code>package.json</code>是我们通常的载货单文件。</p>
<pre class="language-json hljs">{
  "packages": [
    "packages/*"
  ],
  "version": "0.0.0"
}
</pre>
<p>Lerna没有创建一个<code>.gitignore</code>文件，所以我们将创建一个包含以下内容的文件:</p>
<pre class="language-git hljs">node_modules/
lerna-debug.log
npm-debug.log
packages/*/lib
.idea
</pre>
<p>我们将在我们的项目中使用TypeScript，但是正如我们之前提到的，Lerna不支持TypeScript，所以我们将它视为共享依赖。使用以下命令将其添加到您的<code>package.json</code>的顶层:</p>
<pre class="language-json hljs">npm install typescript @types/node — save-dev
</pre>
<p>这是推荐的方法，因为我们希望在我们的包中使用相同的工具。</p>
<h2>准备我们的构建脚本</h2>
<p>除了TypeScript，我们还将为Node.js安装类型声明。由于Lerna旨在用于Node.js，而不是TypeScript，我们需要添加一些配置以使其工作。</p>
<p>我们将在项目的根目录中定义一个公共的<code>tsconfig.json</code>文件。我们的<code>tsconfig.json</code>将会是这样的:</p>
<pre class="language-json hljs">{
 "compilerOptions": {
   "module": "commonjs",
   "declaration": true,
   "noImplicitAny": false,
   "removeComments": true,
   "noLib": false,
   "emitDecoratorMetadata": true,
   "experimentalDecorators": true,
   "target": "es6",
   "sourceMap": true,
   "lib": [
     "es6"
   ]
 },
 "exclude": [
   "node_modules",
   "**/*.spec.ts"
 ]
}
</pre>
<h3>用<code>lerna create</code>构建我们的包</h3>
<p>由于这是一个演示项目，我们将假设我们将有几个模块:<code>patient</code>、<code>doctor</code>和<code>scheduler</code>。</p>
<p>为了创建包，我们将从项目的根目录使用<code>lerna create</code>命令。</p>
<p>命令将引导我们创建一个新的包。它要求您的新包的名称作为参数传递。在这种情况下，它是<code>doctor</code>，导致全称是<code>@hospital-sdk/doctor</code>。</p>
<p><img data-attachment-id="92360" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/executing-command-package-name/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name.png" data-orig-size="730,559" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="executing-command-package-name" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name-300x230.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name.png" decoding="async" class="aligncenter size-full wp-image-92360 jetpack-lazy-image" src="../Images/1d836c63d3f0784aa563c33da5323fdf.png" alt="Executing the command to name the package" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name-300x230.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="92360" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/executing-command-package-name/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name.png" data-orig-size="730,559" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="executing-command-package-name" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name-300x230.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-92360" src="../Images/1d836c63d3f0784aa563c33da5323fdf.png" alt="Executing the command to name the package" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name-300x230.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/executing-command-package-name.png"/></noscript>
<p>我们将对<code>patient</code>和<code>scheduler</code>包重复相同的过程。</p>
<p>生成的文件夹结构现在应该是:</p>
<p><img data-attachment-id="92362" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/updated-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure.png" data-orig-size="730,680" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="updated-folder-structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure-300x279.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure.png" decoding="async" class="aligncenter size-full wp-image-92362 jetpack-lazy-image" src="../Images/04dae821670bdcb3051d2780503d1c00.png" alt="Our updated folder structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure-300x279.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="92362" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/updated-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure.png" data-orig-size="730,680" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="updated-folder-structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure-300x279.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-92362" src="../Images/04dae821670bdcb3051d2780503d1c00.png" alt="Our updated folder structure" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure-300x279.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/updated-folder-structure.png"/></noscript>
<h2>按文件配置TypeScript</h2>
<p>每个单独的包都需要自己的<code>tsconfig.json</code>文件来获得正确的相对路径。其他选项可以从项目的根处的<code>tsconfig.json</code>扩展。</p>
<pre class="language-json hljs">{
 "extends": "../../tsconfig.json",
 "compilerOptions": {
   "outDir": "./lib"
 },
 "include": [
   "./src"
 ]
}
</pre>
<p>在我们为每个包添加了一个<code>tsconfig.json</code>之后，我们将在每个包中创建一个<code>src</code>文件夹，并为该包创建一个TypeScript文件。</p>
<p>我们还需要在每个单独的<code>package.json</code>中注册一个<code>tsc</code>脚本。结果应该是:</p>
<pre class="language-json hljs">{
  "name": "@hospital-sdk/doctor",
  "version": "0.0.0",
  "description": "&gt; TODO: description",
  "author": "Vlado Tesanovic &lt;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d6a0bab7b2b9f8a2b3a5b7b8b9a0bfb596b1bbb7bfbaf8b5b9bb">[email protected]</a>&gt;",
  "homepage": "",
  "license": "ISC",
  "main": "lib/doctor.js",
  "typings": "lib/doctor.d.ts",
  "directories": {
    "lib": "lib",
    "test": "__tests__"
  },
  "files": ["lib"],
  "publishConfig": {
    "access": "public"
  },
  "scripts": {
    "tsc": "tsc",
    "test": "echo \"Error: run tests from root\" &amp;&amp; exit 1"
  }
}
</pre>
<p>我们在每个<code>.ts</code>文件中添加了简单的逻辑。我们可以通过运行以下命令来测试我们的设置:</p>
<pre class="language-bash hljs">lerna run tsc
</pre>
<p>上面的命令将在所有创建的包中运行<code>tsc</code>脚本:</p>
<p><img data-attachment-id="92364" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/run-tsc-script-all-packages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages.png" data-orig-size="730,296" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="run-tsc-script-all-packages" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages-300x122.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages.png" decoding="async" class="aligncenter size-full wp-image-92364 jetpack-lazy-image" src="../Images/cbcaa74049db51265eeed058497cd147.png" alt="Run the tsc script for all packages" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages-300x122.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="92364" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/run-tsc-script-all-packages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages.png" data-orig-size="730,296" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="run-tsc-script-all-packages" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages-300x122.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-92364" src="../Images/cbcaa74049db51265eeed058497cd147.png" alt="Run the tsc script for all packages" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages-300x122.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/run-tsc-script-all-packages.png"/></noscript>
<p>如果一切顺利，我们将把TypeScript文件从<code>src</code>文件夹编译到每个包的<code>lib</code>文件夹中。</p>
<p>查看我们项目中任何包的<code>package.json</code>，您会看到类似<code>directories</code>、<code>files</code>、<code>typings</code>、<code>publishConfig</code>和<code>main</code>的属性:</p>
<pre class="language-json hljs">{
  "name": "@hospital-sdk/doctor",
  "version": "0.0.0",
  "description": "&gt; TODO: description",
  "author": "Vlado Tesanovic &lt;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4b3d272a2f24653f2e382a25243d22280b2c262a222765282426">[email protected]</a>&gt;",
  "homepage": "",
  "license": "ISC",
  "main": "lib/doctor.js",
  "typings": "lib/doctor.d.ts",
  "directories": {
    "lib": "lib",
    "test": "__tests__"
  },
  "files": ["lib"],
  "publishConfig": {
    "access": "public"
  },
  "scripts": {
    "tsc": "tsc",
    "test": "echo \"Error: run tests from root\" &amp;&amp; exit 1"
  }
}
</pre>
<p><code>packages</code>、<code>doctor</code>和<code>package.json</code>文件夹非常重要，因为它们控制着什么将被推送到npm，并且将作为我们库的入口点(<code>main</code>和<code>typings</code>属性)。</p>
<p>我们将为这个项目创建一个<a href="https://github.com/vladotesanovic/hospital-sdk" target="_blank" rel="noopener"> GitHub库</a>,并将所有代码推送到那里。</p>
<h2>链接包</h2>
<p>编译完TypeScript后，让我们创建一个测试<code>integration</code>包，看看Lerna如何处理链接包。</p>
<pre class="language-bash hljs">cd packages
mkdir integration
cd integration
npm init -y
cd ../..
</pre>
<p>要从npm安装必要的依赖项，或者从monorepo链接依赖项，请从项目的根目录使用<code>lerna add</code>命令。在任何命名冲突的情况下，本地包总是优先于远程包。</p>
<pre class="language-bash hljs">lerna add @hospital-sdk/doctor --scope=integration
</pre>
<p><code>--scope</code>参数指定将包添加到哪个模块。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p><code>lerna add</code>命令的不幸限制是它一次只能添加一个包。因此，如果您需要一次安装更多的依赖项，您可以将它们添加到<code>package.json</code>中，然后运行<code>lerna bootstrap</code>命令。</p>
<pre class="language-json hljs">{
  "name": "integration",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "start": "ts-node src/index.ts",
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "ts-node": "^7.0.1",
    "@hospital-sdk/doctor": "^0.0.4",
    "@hospital-sdk/patient": "^0.0.4",
    "@hospital-sdk/scheduler": "^0.0.4"
  }
}
</pre>
<p>安装并链接本地和远程的所有依赖项。使用<code>lerna add</code>时，添加任何新的包时会自动调用<code>lerna bootstrap</code>命令。</p>
<p>要查看包是否链接成功，创建一个包含以下内容的<code>integration/src/index.ts</code>文件:</p>
<pre class="language-typescript hljs">import { Doctor } from "@hospital-sdk/doctor";
import { Patient } from "@hospital-sdk/patient";
import { Scheduler } from "@hospital-sdk/scheduler";

console.log(new Doctor());
console.log(new Scheduler());
console.log(new Patient());
</pre>
<p>然后，在<code>integration/package.json</code>中添加启动脚本。</p>
<pre class="language-json hljs">{
  "scripts": {
   "start": "ts-node src/index.ts" 
  }
}
</pre>
<p>从终端运行脚本应该会产生以下输出:</p>
<pre class="language-plaintext hljs">Doctor {}
Scheduler {}
Patient {}
</pre>
<h2>发布到国家预防机制</h2>
<p>我们的目标是在同一个npm范围或组织下发布所有包。国家防范机制组织也可以是私有的；在这种情况下，您可以控制谁将看到和使用您的包。</p>
<p>早些时候，我们在npmjs.org创建了一个免费的公共组织:</p>
<p><img data-attachment-id="92366" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/free-public-npm-organization/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization.png" data-orig-size="730,219" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="free-public-npm-organization" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization-300x90.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization.png" decoding="async" class="aligncenter size-full wp-image-92366 jetpack-lazy-image" src="../Images/89488b609e81420798230656d3b2dde0.png" alt="Our free, public npm organization" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization-300x90.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="92366" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/free-public-npm-organization/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization.png" data-orig-size="730,219" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="free-public-npm-organization" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization-300x90.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-92366" src="../Images/89488b609e81420798230656d3b2dde0.png" alt="Our free, public npm organization" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization-300x90.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/free-public-npm-organization.png"/></noscript>
<p>从终端登录到组织:</p>
<p><img data-attachment-id="92368" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/login-via-terminal/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal.png" data-orig-size="730,103" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="login-via-terminal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal-300x42.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal.png" decoding="async" class="aligncenter size-full wp-image-92368 jetpack-lazy-image" src="../Images/6499c5c3bcd3fa05882584c46473a160.png" alt="Login to the npm organization via the terminal" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal-300x42.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="92368" data-permalink="https://blog.logrocket.com/setting-up-monorepo-with-lerna-typescript/login-via-terminal/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal.png" data-orig-size="730,103" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="login-via-terminal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal-300x42.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-92368" src="../Images/6499c5c3bcd3fa05882584c46473a160.png" alt="Login to the npm organization via the terminal" srcset="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal.png 730w, https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal-300x42.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2018/09/login-via-terminal.png"/></noscript>
<p>此时，我们已经准备好了我们的组织和构建脚本。让我们从根节点<code>package.json</code>开始，将它们粘合在一个npm脚本下:</p>
<pre class="language-json hljs">{
 "scripts": {
   "publish": "lerna run tsc &amp;&amp; lerna publish"
 }
}
</pre>
<p>从终端运行:</p>
<pre class="language-bash hljs">npm run publish
</pre>
<p>Lerna将指导我们完成发布过程。我们需要选择一个包版本，并将标签推送到GitHub。</p>
<p>如果一切顺利，我们会在最后看到这条消息:<em> lerna成功发布了3个包。</em></p>
<pre class="language-bash hljs"> 
npm run publish
&gt; publish
&gt; lerna run tsc &amp;&amp; lerna publish
lerna notice cli v3.4.0
lerna info Executing command in 3 packages: "npm run tsc"
&gt; @hospital-sdk/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5b2b3a2f323e352f1b6b756b7568">[email protected]</a> tsc
&gt; tsc

&gt; @hospital-sdk/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1f6c7c777a7b6a737a6d5f2f312f312c">[email protected]</a> tsc
&gt; tsc

&gt; @hospital-sdk/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="593d363a2d362b19697769776a">[email protected]</a> tsc
&gt; tsc
lerna success run Ran npm script 'tsc' in 3 packages:
lerna success - @hospital-sdk/doctor
lerna success - @hospital-sdk/patient
lerna success - @hospital-sdk/scheduler
lerna notice cli v3.4.0
lerna info Verifying npm credentials
lerna info current version 0.0.3
lerna info Looking for changed packages since v0.0.3
? Select a new version (currently 0.0.3) Patch (0.0.4)
Changes:
 - @hospital-sdk/doctor: 0.0.3 =&gt; 0.0.4
 - @hospital-sdk/patient: 0.0.3 =&gt; 0.0.4
 - @hospital-sdk/scheduler: 0.0.3 =&gt; 0.0.4
? Are you sure you want to publish these packages? Yes
lerna info git Pushing tags...
lerna info publish Publishing packages to npm...
lerna notice
...                                   
lerna notice 
lerna info published @hospital-sdk/doctor 0.0.4
lerna info published @hospital-sdk/patient 0.0.4
lerna info published @hospital-sdk/scheduler 0.0.4
Successfully published:
 - @hospital-sdk/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="25414a46514a5765150b150b11">[email protected]</a>
 - @hospital-sdk/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f58594819c909b81b5c5dbc5dbc1">[email protected]</a>
 - @hospital-sdk/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="592a3a313c3d2c353c2b19697769776d">[email protected]</a>
lerna success published 3 packages
</pre>
<h2>结论</h2>
<p>为TypeScript设置Lerna需要一些配置，但是从长远来看，将有助于提高您的包的可维护性，包括公共包和私有包。</p>
<p>你可以在我的GitHub上找到这个项目的源代码，T2可以在他们的文档中了解更多关于Lerna的信息。</p><div class="code-block code-block-21">
<div class="blog-plug inline-plug typescript-plug"><h2><a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>:全面了解您的网络和移动应用</h2>
<a href="https://lp.logrocket.com/blg/typescript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放问题，就像问题发生在您自己的浏览器中一样。LogRocket不需要猜测错误发生的原因，也不需要向用户询问截图和日志转储，而是让您重放会话以快速了解哪里出错了。它可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。</p>
<p>除了记录Redux操作和状态，LogRocket还记录控制台日志、JavaScript错误、堆栈跟踪、带有头+正文的网络请求/响应、浏览器元数据和自定义日志。它还使用DOM来记录页面上的HTML和CSS，甚至为最复杂的单页面和移动应用程序重新创建像素级完美视频。</p><div class="code-block code-block-23">
<div class="blog-plug inline-plug node-plug"><h2>200只<img src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> <noscript> <img data-lazy-fallback="1" src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> </noscript>显示器出现故障，生产中网络请求缓慢</h2><p>部署基于节点的web应用程序或网站是容易的部分。确保您的节点实例继续为您的应用程序提供资源是事情变得更加困难的地方。如果您对确保对后端或第三方服务的请求成功感兴趣，</p><a href="https://lp.logrocket.com/blg/node-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer"><img src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/><noscript><img data-lazy-fallback="1" src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/></noscript></a><a href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录下用户与你的应用程序交互时发生的一切。您可以汇总并报告有问题的网络请求，以快速了解根本原因，而不是猜测问题发生的原因。</p><p>LogRocket检测您的应用程序以记录基线性能计时，如页面加载时间、到达第一个字节的时间、慢速网络请求，还记录Redux、NgRx和Vuex操作/状态。</p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a><p>. </p></div>
</div>
<a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>