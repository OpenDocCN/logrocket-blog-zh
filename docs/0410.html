<html>
<head>
<title>Accessing properties globally in Vue.js with prototypes - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用原型在Vue.js中全局访问属性</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/accessing-properties-globally-in-vue-js-with-prototypes/#0001-01-01">https://blog.logrocket.com/accessing-properties-globally-in-vue-js-with-prototypes/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在这篇文章中，你将被介绍使用<a href="https://blog.logrocket.com/how-to-make-your-components-dynamic-in-vue-js/" target="_blank" rel="noopener noreferrer"> Vue.js </a>中的原型来全局访问属性，而不是在你的工作流中使用多个导入。</p>
<h2>开始之前…</h2>
<p>这篇文章适合所有阶段的开发者，包括初学者。在阅读本教程之前，您应该已经掌握了以下一些东西:</p>

<h2>导入如何帮助我们访问文件</h2>
<p>在您的Vue项目中工作时，访问另一个项目或嵌套项目中的新组件的最快方法就是导入所需的组件或资源。</p>
<p>然而，这很容易变得低效，因为您将不得不重复import语句，甚至为每次导入注册组件(如果它们<em>是</em>组件)。幸运的是，Vue提供了一种更有效的方法来处理这种情况，在这种情况下，您已经全局定义了一个数据对象或一个传入的HTTP请求。</p>
<h2><code>Vue.prototype</code></h2>
<p>为了在你的Vue应用中创建一个全局属性，然后通过属性语句而不是导入语句来访问它，Vue提供了一个我们称之为原型的平台。这样，您定义了全局属性或数据对象，告诉Vue记住它，然后只需一行代码就可以在任何组件中访问它。</p>
<h3>原型语法</h3>
<p>主JavaScript文件中Vue原型的定义如下所示:</p>
<pre>Vue.prototype.$blogName = ‘LogRocket’</pre>
<p>这里，<code>blogName</code>是属性或数据名，<code>LogRocket</code>字符串是值。有了这个定义，Vue.js就可以让整个项目中的每个Vue实例使用这个属性(在我们的例子中是博客名),甚至在实例创建之前。</p>
<h3><code>$</code>标志</h3>
<p>在Vue.js中使用<code>$</code>符号来标识可以在任何给定Vue项目的所有可用实例中使用的属性。这种区分是由于与属性名称定义和访问相关的冲突。有了<code>$</code>符号，所有实例可用的属性和全局属性之间就有了明显的区别。</p>
<h3>演示</h3>
<p>要完成这一部分，您必须从头开始阅读这篇文章，从上面的链接下载starter项目，并在VS代码中打开它。为了说明上一节中的语法示例，打开您的<code>main.js</code>文件并添加原型定义，因此整个文件如下所示:</p>
<pre>import Vue from 'vue'
import App from './App.vue'
Vue.config.productionTip = false
Vue.prototype.$blogName = 'LogRocket'
new Vue({
  render: h =&gt; h(App),
}).$mount('#app')</pre>
<p>现在您已经定义了一个属性名，打开您的根组件并复制下面的代码块:</p>
<pre>&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;img alt="Vue logo" src="./assets/logo.png"&gt;
    &lt;Test msg="Welcome to Your Vue.js App"/&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import Test from './components/Test.vue'
export default {
  name: 'app',
  components: {
    Test
  },
   beforeCreate: function() {
    console.log(this.$blogName)
  }
}
&lt;/script&gt;</pre>
<p>这里你可以看到,<code>beforeCreate</code>生命周期钩子方法被用来验证关于Vue原型的实例化声明。如果您在您的开发服务器上运行该应用程序，您将会看到保存的名称(LogRocket)显示在您的浏览器控制台中。</p>
<h2>一些Vue原型用例</h2>
<p>许多数据值、属性和实用程序(如HTTP资源)可以通过Vue原型成为全局属性。在这一节中，我将介绍其中的几个。</p>
<h3>用作原型</h3>
<p>Vue.js不仅允许添加属性，还允许添加方法作为原型。这样，使用原型的每个实例都可以访问原型定义中设置的逻辑。</p>
<p>这包括使用<code>this</code>访问数据、计算属性，甚至项目中任何Vue实例内的其他方法。一个简单的例子就是使用字符串反转函数。在您的<code>main.js</code>文件中，在旧原型下添加新原型:</p>
<pre>Vue.prototype.$reverseString = function(x) {
  this[x] = this[x]
    .split('')
    .reverse()
    .join('')
}</pre>
<p>将下面的代码块复制到您的<code>app.vue</code>文件中:</p>
<pre>&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;img alt="Vue logo" src="./assets/logo.png"&gt;
    &lt;Test msg="Welcome to Your Vue.js App"/&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import Test from './components/Test.vue'
export default {
  name: 'app',
  components: {
    Test
  },
  data() {
    return {
      msg: 'LogRocket'
    }
  },
   beforeCreate: function() {
    console.log(this.$blogName)
  },
  created: function() {
    console.log(this.msg) 
    this.$reverseString('msg')
    console.log(this.msg) 
  }
}
&lt;/script&gt;</pre>
<p>这里，创建的生命周期钩子被用来记录<code>reverseString</code>函数，如果您在dev服务器中运行您的应用程序，您将看到LogRocket被反向打印。</p>
<h3>进口原型</h3>
<p>如果您的应用程序与第三方API通信，您通常必须在您想要发出<code>get</code>请求的每个组件上导入<a href="https://blog.logrocket.com/axios-or-fetch-api/" target="_blank" rel="noopener noreferrer"> Axios </a>。下面是一个简单的例子——在VS代码应用程序中打开一个新的终端并安装Axios:</p>
<pre>npm install axios</pre>
<p>现在，转到您想要发出<code>get</code>请求的<code>app.vue</code>文件，并将这段代码块复制到其中:</p>
<pre>&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;img alt="Vue logo" src="./assets/logo.png"&gt;
    &lt;Test msg="Welcome to Your Vue.js App"/&gt;
    &lt;div v-for="user in users" :key="user.id"&gt;
      &lt;p&gt;{{user.name}}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import Test from './components/Test.vue'
import axios from 'axios'
export default {
  name: 'app',
  components: {
    Test
  },
  data() {
    return {
      msg: 'LogRocket',
      users: []
    }
  },
  created: function (){
      axios.get('https://jsonplaceholder.typicode.com/users')
      .then(res =&gt; {
        this.users = res.data;
      })
  }
  ,
   beforeCreate: function() {
    console.log(this.$blogName)
  }
}
&lt;/script&gt;</pre>
<p>您将会注意到，对于您想要发出get请求的每个组件，您都必须重复这个import语句。为了解决这个问题，Vue允许您使用prototype特性一次性导入项目中的任何Vue实例。</p>
<p>打开您的<code>main.js</code>文件，并将下面的代码块复制到其中:</p>
<pre>import Vue from 'vue'
import App from './App.vue'
import axios from 'axios'
Vue.config.productionTip = false
Vue.prototype.$blogName = 'LogRocket'
Vue.prototype.$reverseString = function(x) {
  this[x] = this[x]
    .split('')
    .reverse()
    .join('')
}
Vue.prototype.$axios = axios
new Vue({
  render: h =&gt; h(App),
}).$mount('#app')</pre>
<p>在您的<code>app.vue</code>文件中，删除import语句并使用您已经创建的<code>$axios</code>别名，如下所示:</p>
<pre>&lt;script&gt;
import Test from './components/Test.vue'
export default {
  name: 'app',
  components: {
    Test
  },
  data() {
    return {
      msg: 'LogRocket',
      users: []
    }
  },
  created: function (){
      this.$axios.get('https://jsonplaceholder.typicode.com/users')
      .then(res =&gt; {
        this.users = res.data;
      })
  }
  ,
   beforeCreate: function() {
    console.log(this.$blogName)
  }
}
&lt;/script&gt;</pre>
<p><img data-attachment-id="4857" data-permalink="https://blog.logrocket.com/accessing-properties-globally-in-vue-js-with-prototypes/completed-list-import/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/completed-list-import-e1565708685861.png" data-orig-size="730,377" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Completed List Import Demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/completed-list-import-300x155.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/completed-list-import-1024x529.png" decoding="async" class="aligncenter size-full wp-image-4857 jetpack-lazy-image" src="../Images/f53298d6ad96e35bfcbeee6ab06a0d78.png" alt="Completed List Import Demo" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/08/completed-list-import-e1565708685861.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/completed-list-import-e1565708685861.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="4857" data-permalink="https://blog.logrocket.com/accessing-properties-globally-in-vue-js-with-prototypes/completed-list-import/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/completed-list-import-e1565708685861.png" data-orig-size="730,377" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Completed List Import Demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/completed-list-import-300x155.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/completed-list-import-1024x529.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-4857" src="../Images/f53298d6ad96e35bfcbeee6ab06a0d78.png" alt="Completed List Import Demo" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/completed-list-import-e1565708685861.png"/></noscript>
<p>你可以在GitHub 上找到本教程<a href="https://github.com/viclotana/vue_prototypes" target="_blank" rel="noopener noreferrer">的完整代码。</a></p>
<h2>结论</h2>
<p>现在，您已经了解了在Vue中使用原型的概念，以使属性对项目中的所有Vue实例全局可用。还向您展示了使用原型的优势，包括但不限于更高效的工作流。黑客快乐！</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的Vue应用</h2><p>调试Vue.js应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的Vue突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Vue应用程序中发生的一切，包括网络请求、JavaScript错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex插件将Vuex突变记录到LogRocket控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试Vue应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>