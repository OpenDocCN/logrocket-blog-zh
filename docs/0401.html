<html>
<head>
<title>How to use props to pass data to child components in Vue 3 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Vue 3 - LogRocket博客中使用props向子组件传递数据</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/use-props-pass-data-child-components-vue-3/#0001-01-01">https://blog.logrocket.com/use-props-pass-data-child-components-vue-3/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:这篇文章最后更新于2022年12月15日<a href="https://blog.logrocket.com/definitive-guide-vue-3-components/">以反映Vue 3 </a>中的更新。</em></p>
<p>Props是Vue中管理父组件和子组件的一个重要特性，但是处理它们可能有些棘手。在本文中，我们将学习如何使用Vue 3中的props将数据从父组件传递到子组件。你可以在GitHub 上找到本教程的<a href="https://github.com/nemo0/vue-props-demo">完整代码。我们开始吧！</a></p>
<h2 id="tableofcontents">目录</h2>

<h2 id="prerequisites">先决条件</h2>
<p>本文适合所有阶段的开发人员，包括初学者。</p>
<p>要阅读本文，您需要安装Node.js版本≥16.x。您可以通过在终端或命令提示符下运行以下命令来验证您是否已经安装了它:</p>
<p>节点v</p>
<p>你还需要一个代码编辑器；我<a href="https://blog.logrocket.com/top-10-vs-code-extensions-2021/">强烈推荐VS代码</a>。最后，您需要在您的计算机上全局安装Vue 3。在撰写本文时，<a href="https://blog.logrocket.com/how-to-use-vue-3-typescript/"> Vue3是最新版本</a>。</p>
<p>在开始之前，继续<a href="https://github.com/nemo0/vue-props-starter">下载一个Vue starter项目</a>。解压缩下载的项目，导航到解压缩后的文件，然后运行下面的命令以保持所有依赖项都是最新的:</p>
<pre>npm install
</pre>
<h2 id="what-props-in-vue">Vue里有哪些道具？</h2>
<p>在Vue中，<a href="https://blog.logrocket.com/vue-js-simplified-components-props-and-slots/"> props </a>是可以在任何组件上注册的定制属性。您可以在父组件上定义数据，并为其赋值。然后，转到需要该数据的子组件，并将值传递给一个适当的属性。因此，数据成为子组件中的一个属性。</p>
<p>在一个<code>&lt;script setup&gt;</code>组件中，语法看起来像下面的代码:</p>
<pre>&lt;script setup&gt;
const props = defineProps(['title'])

console.log(props.title)
&lt;/script&gt;
</pre>
<p>在非<code>&lt;script setup&gt;</code>组件中，语法如下所示:</p>
<pre>export default {
  props: ['title'],
  setup(props) {
    // setup() receives props as the first argument.
    console.log(props.title)
  }
}
</pre>
<p>要从任何需要的组件中动态访问这些数据，可以使用根组件<code>App.vue</code>作为父组件，存储数据，然后注册props。</p>
<h2 id="why-use-props-vue">为什么要在Vue中使用道具？</h2>
<p>假设您有一个数据对象，您希望在两个不同的组件中以非常不同的方式显示，例如，Billboard Top 10 Artists列表。您的第一反应可能是创建这两个独立的组件，将数组添加到数据对象中，然后在模板中显示它们。</p>
<p>这个解决方案最初很棒，但是随着您添加更多组件，它就不再有效了。让我们用您在VS代码中打开的starter项目来演示这一点。打开<code>Test.vue</code>文件，复制下面的代码块:</p>
<pre>&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;Vue Top 20 Artists&lt;/h1&gt;
    &lt;ul&gt;
      &lt;li v-for="(artist, x) in artists" :key="x"&gt;
      &lt;h3&gt;{{artist.name}}&lt;/h3&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'Test',
  data (){
    return {
      artists: [
       {name: 'Davido', genre: 'afrobeats', country: 'Nigeria'},
       {name: 'Burna Boy', genre: 'afrobeats', country: 'Nigeria'},
       {name: 'AKA', genre: 'hiphop', country: 'South-Africa'},
       {name: 'Sarkodie', genre: 'hiphop', country: 'Ghana'},
       {name: 'Stormzy', genre: 'hiphop', country: 'United Kingdom'},
       {name: 'Lil Nas', genre: 'Country', country: 'United States'},
       {name: 'Nasty C', genre: 'hiphop', country: 'South-Africa'},
       {name: 'Shatta-walle', genre: 'Reagae', country: 'Ghana'},
       {name: 'Khalid', genre: 'pop', country: 'United States'},
       {name: 'ed-Sheeran', genre: 'pop', country: 'United Kingdom'}
      ]
    }
  }
}
&lt;/script&gt;
</pre>
<p>在components文件夹中创建一个名为<code>Test2.vue</code>的新文件，并将以下代码块粘贴到其中:</p>
<pre>&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;Vue Top Artist Countries&lt;/h1&gt;
    &lt;ul&gt;
      &lt;li v-for="(artist, x) in artists" :key="x"&gt;
      &lt;h3&gt;{{artist.name}} from {{artist.country}}&lt;/h3&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'Test2',
  data (){
    return {
      artists: [
       {name: 'Davido', genre: 'afrobeats', country: 'Nigeria'},
       {name: 'Burna Boy', genre: 'afrobeats', country: 'Nigeria'},
       {name: 'AKA', genre: 'hiphop', country: 'South-Africa'},
       {name: 'Sarkodie', genre: 'hiphop', country: 'Ghana'},
       {name: 'Stormzy', genre: 'hiphop', country: 'United Kingdom'},
       {name: 'Lil Nas', genre: 'Country', country: 'United States'},
       {name: 'Nasty C', genre: 'hiphop', country: 'South-Africa'},
       {name: 'Shatta-walle', genre: 'Reagae', country: 'Ghana'},
       {name: 'Khalid', genre: 'pop', country: 'United States'},
       {name: 'ed-Sheeran', genre: 'pop', country: 'United Kingdom'}
      ]
    }
  }
}
&lt;/script&gt;
&lt;style scoped&gt;
li{
    height: 40px;
    width: 100%;
    padding: 15px;
    border: 1px solid saddlebrown;
    display: flex;
    justify-content: center;
    align-items: center;
  }  
a {
  color: #42b983;
}
&lt;/style&gt;
</pre>
<p>要注册您刚刚创建的新组件，打开<code>App.vue</code>文件，并将下面的代码复制到其中:</p>
<pre>&lt;template&gt;
  &amp;lt;div id="app"&gt;
    &lt;img alt="Vue logo" src="./assets/logo.png"&gt;
    &lt;Test/&gt;
    &lt;Test2/&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import Test from './components/Test.vue'
import Test2 from './components/Test2.vue'
export default {
  name: 'app',
  components: {
    Test, Test2
  }
}
&lt;/script&gt;
</pre>
<p>在VS代码终端中，使用以下命令在开发环境中提供应用程序:</p>
<pre>npm run dev
</pre>
<p>它应该如下所示:</p>
<p><img data-attachment-id="153179" data-permalink="https://blog.logrocket.com/props-chart-vue-js/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/props-chart-vue-js.gif" data-orig-size="449,394" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="props-chart-vue-js" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/props-chart-vue-js-300x263.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/props-chart-vue-js.gif" decoding="async" class="aligncenter wp-image-153179 size-full jetpack-lazy-image" src="../Images/738e0cc7f16573fcee6faa1b4f3d5302.png" alt="Props Chart Vue JS" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/props-chart-vue-js.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/props-chart-vue-js.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="153179" data-permalink="https://blog.logrocket.com/props-chart-vue-js/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/props-chart-vue-js.gif" data-orig-size="449,394" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="props-chart-vue-js" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/props-chart-vue-js-300x263.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/props-chart-vue-js.gif" decoding="async" loading="lazy" class="aligncenter wp-image-153179 size-full" src="../Images/738e0cc7f16573fcee6faa1b4f3d5302.png" alt="Props Chart Vue JS" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/props-chart-vue-js.gif"/></noscript>
<p>您会注意到，如果您只有大约五个组件，您将不得不继续复制每个组件中的数据。想象一下，有一种方法可以在一个父组件中定义数据，然后通过使用属性名将它带到每个需要它的子组件中。</p>
<h2 id="defining-data-parent-component">在父组件中定义数据</h2>
<p>既然您已经选择了根组件作为您的父组件，那么您首先必须定义您想要在根组件内部动态共享的数据对象。如果您从一开始就遵循了本文，请打开您的<code>App.vue</code>文件，并将数据对象代码块复制到脚本部分中:</p>
<pre>&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;img alt="Vue logo" src="./assets/logo.png" /&gt;
    &lt;Test /&gt;
    &lt;Test2 /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Test from "./components/Test.vue";
import Test2 from "./components/Test2.vue";
export default {
  name: "app",
  components: {
    Test,
    Test2,
  },
  data() {
    return {
      artists: [
        { name: "Davido", genre: "afrobeats", country: "Nigeria" },
        { name: "Burna Boy", genre: "afrobeats", country: "Nigeria" },
        { name: "AKA", genre: "hiphop", country: "South-Africa" },
        { name: "Sarkodie", genre: "hiphop", country: "Ghana" },
        { name: "Stormzy", genre: "hiphop", country: "United Kingdom" },
        { name: "Lil Nas", genre: "Country", country: "United States" },
        { name: "Nasty C", genre: "hiphop", country: "South-Africa" },
        { name: "Shatta-walle", genre: "Reagae", country: "Ghana" },
        { name: "Khalid", genre: "pop", country: "United States" },
        { name: "Ed Sheeran", genre: "pop", country: "United Kingdom" },
      ],
    };
  },
};
&lt;/script&gt;
</pre>
<h2 id="receiving-props-vue">在Vue中接收道具</h2>
<p>在定义数据之后，进入两个测试组件并删除其中的数据对象。要在组件中接收道具，您必须指定您想要在该组件中接收的道具。进入两个测试组件，并在脚本部分添加规范，如下所示:</p>
<pre>&lt;script&gt;
export default {
  name: 'Test',
  props: ['artists']
}   
&lt;/script&gt; 
</pre>
<h2 id="registering-props-vue">在Vue中注册道具</h2>
<p>为了让Vue引擎知道您有想要动态传递给某些子组件的props，您必须在Vue实例中指明它。这是在模板部分完成的，如下所示:</p>
<pre>&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;Test v-bind:artists="artists"/&gt;
    &lt;Test2 v-bind:artists="artists" /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</pre>
<p>在上面的代码中，我们使用<code>v-bind</code>指令来绑定<code>artists</code>，它是脚本部分中数据对象数组的名称，以及<code>artists</code>，它是测试组件中的属性名称，您在上面的部分中已经设置好了。</p>
<p>如果您在没有以下指令的情况下设置它，您将看不到任何输出；Vue编译器甚至ESLint都不会将其标记为错误或警告:</p>
<pre>    &lt;Test artists="artists"/&gt;
    &lt;Test2 artists="artists"/&gt;
</pre>
<p>因此，注意并记住对每个动态绑定使用<code>v-bind</code>是很重要的。</p>
<h2 id="using-props-vue">在Vue中使用道具</h2>
<p>在Vue应用程序中设置了props之后，您可以在组件中使用它们，就像数据是在同一个组件中定义的一样。因此，在我们的演示案例中，您可以设置方法调用并轻松访问<code>this.artists</code>。</p>
<h2 id="strongly-typing-props">强力打字道具</h2>
<p>通过强类型化props，您还可以确保您的组件只接收您希望它接收的数据类型。例如，在我们的演示中，您可以通过如下设置身份验证来确保只有数组传递到您的组件:</p>
<pre>&lt;script&gt;
export default {
  name: 'Test',
  props: {
    artists: {
      type: Array
    }
  }
}
&lt;/script&gt;
</pre>
<p>因此，每当您添加一个错误的类型，比如说一个<code>String</code>，您将在控制台中得到一个警告，告诉您它收到的类型不是它期望的类型:</p>
<p><img data-attachment-id="153181" data-permalink="https://blog.logrocket.com/vue-3-unexpected-error-types/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types.png" data-orig-size="730,174" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vue-3-unexpected-error-types" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types-300x72.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types.png" decoding="async" class="aligncenter wp-image-153181 size-full jetpack-lazy-image" src="../Images/b7a1dd22bbb5bd35507b1011336b8b56.png" alt="Vue 3 Unexpected Error Types" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types-300x72.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="153181" data-permalink="https://blog.logrocket.com/vue-3-unexpected-error-types/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types.png" data-orig-size="730,174" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vue-3-unexpected-error-types" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types-300x72.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types.png" decoding="async" loading="lazy" class="aligncenter wp-image-153181 size-full" src="../Images/b7a1dd22bbb5bd35507b1011336b8b56.png" alt="Vue 3 Unexpected Error Types" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types-300x72.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/vue-3-unexpected-error-types.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>在本文中，我们探索了Vue 3中的props，了解了它们如何通过创建一个重用数据对象的平台来帮助鼓励DRY(不要重复自己)方法。我们还学习了如何在您的Vue项目中设置道具。如需更多信息，请查看<a href="https://vuejs.org/v2/guide/components-props.html"> Vue关于道具</a>的官方文档。编码快乐！</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的Vue应用</h2><p>调试Vue.js应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的Vue突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Vue应用程序中发生的一切，包括网络请求、JavaScript错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex插件将Vuex突变记录到LogRocket控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试Vue应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>