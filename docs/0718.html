<html>
<head>
<title>Handling user authentication with Firebase in your React apps - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在React apps - LogRocket博客中使用Firebase处理用户认证</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/user-authentication-firebase-react-apps/#0001-01-01">https://blog.logrocket.com/user-authentication-firebase-react-apps/#0001-01-01</a></blockquote><div><article class="article-post">
<p><strong> <em>编者按</em> </strong> <em>:这篇博文于2021年8月6日由<a href="https://blog.logrocket.com/author/atharvadeosthale/"> Atharva Deosthale </a>审阅并重写，以包含Firebase的最新特性并澄清原始教程的说明。它于2022年1月10日再次更新，以解决Firebase v9发布后的重大变化。</em></p>
<p>现在的网站和app，安全性非常重要。这主要是为了确保私人数据不会泄露给公众，也不会有人代表你采取行动。</p>
<p>有时，开发人员会制作他们自己的后端，并加入他们自己定制的安全方法。其他开发人员使用各种BaaS(后端即服务)平台，这样他们就不需要担心安全细节，这些平台可以帮助开发人员以最安全的方式验证用户身份。</p>
<p>今天，我们将使用Firebase，它是一个BaaS，可以帮助我们提供各种服务，如数据库认证和云存储。我们将了解如何使用Firebase中的身份验证服务来保护React应用程序。</p>
<h2>react中使用firebase进行身份验证的要求</h2>
<ul>
<li>Node.js已安装</li>
<li>代码编辑器—我更喜欢Visual Studio代码</li>
<li>谷歌账户——我们需要这个来使用Firebase</li>
<li>React的基础知识——我不会向React的完全初学者推荐这个教程</li>
</ul>
<p>如果你在整个教程中遇到任何问题，你可以参考<a href="https://github.com/atharvadeosthale/firebase-auth-article"> GitHub库</a>中的代码。</p>
<h2>设置Firebase</h2>
<p>在我们深入React并开始编写一些好东西之前，我们需要通过<a href="https://console.firebase.google.com/u/0/"> Firebase控制台</a>建立我们自己的Firebase项目。要开始，请在浏览器中导航到Firebase控制台。确保您已登录您的Google帐户。</p>
<p>现在，点击<strong>添加项目</strong>，您将看到以下屏幕:</p>
<p><img data-attachment-id="63987" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/add-project-reaact-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase.png" data-orig-size="730,404" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add a Project in Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase-300x166.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase.png" decoding="async" class="size-full wp-image-63987 aligncenter jetpack-lazy-image" src="../Images/33110eaeeede6126ac33aa12469be067.png" alt="Add a Project in Firebase" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase-300x166.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63987" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/add-project-reaact-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase.png" data-orig-size="730,404" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add a Project in Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase-300x166.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase.png" decoding="async" loading="lazy" class="size-full wp-image-63987 aligncenter" src="../Images/33110eaeeede6126ac33aa12469be067.png" alt="Add a Project in Firebase" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase-300x166.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-project-reaact-firebase.png"/></noscript>
<p>输入项目名称。在我的情况下，我将它命名为<code>firebase-auth-article</code>。</p>
<p>一旦你给它起了一个好听的名字，点击<strong>继续</strong>，你应该会被提示一个选项来启用谷歌分析。对于本教程，我们不需要谷歌分析，但打开它不会有什么坏处，所以如果你想，就打开它吧。</p>
<p>完成所有步骤后，您应该会看到类似如下的仪表板:</p>
<p><img data-attachment-id="64003" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/react-firebase-console-dashboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard.png" data-orig-size="730,403" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Firebase Console dashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard-300x166.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard.png" decoding="async" class="size-full wp-image-64003 aligncenter jetpack-lazy-image" src="../Images/5ec7e8d6b5971f82eb152c6bbe8e82a1.png" alt="Firebase Console Dashboard" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard-300x166.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64003" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/react-firebase-console-dashboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard.png" data-orig-size="730,403" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Firebase Console dashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard-300x166.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard.png" decoding="async" loading="lazy" class="size-full wp-image-64003 aligncenter" src="../Images/5ec7e8d6b5971f82eb152c6bbe8e82a1.png" alt="Firebase Console Dashboard" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard-300x166.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/react-firebase-console-dashboard.png"/></noscript>
<p>首先，让我们设置身份验证。点击侧边栏上的<strong>认证</strong>，点击<strong>入门</strong>启用该模块。现在，您将看到各种身份验证选项:</p>
<p><img data-attachment-id="63989" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/authentication-page-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/authentication-page-firebase-e1629488421142.png" data-orig-size="730,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Authentication page in Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/authentication-page-firebase-300x200.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/authentication-page-firebase-1024x683.png" decoding="async" class="aligncenter wp-image-63989 size-full jetpack-lazy-image" src="../Images/70cbcc17cf07873132593f5039f94a78.png" alt="Authentication Page in Firebase" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/authentication-page-firebase-e1629488421142.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/authentication-page-firebase-e1629488421142.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63989" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/authentication-page-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/authentication-page-firebase-e1629488421142.png" data-orig-size="730,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Authentication page in Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/authentication-page-firebase-300x200.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/authentication-page-firebase-1024x683.png" decoding="async" loading="lazy" class="aligncenter wp-image-63989 size-full" src="../Images/70cbcc17cf07873132593f5039f94a78.png" alt="Authentication Page in Firebase" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/authentication-page-firebase-e1629488421142.png"/></noscript>
<p>首先点击<strong>电子邮件/密码</strong>，启用并保存:</p>
<p><img data-attachment-id="63995" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/email-password-options-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase.png" data-orig-size="730,233" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Email and password options in Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase-300x96.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase.png" decoding="async" class="size-full wp-image-63995 aligncenter jetpack-lazy-image" src="../Images/5e499c5a09e540df88d8d9185ecc7f65.png" alt="Email and Password Options in Firebase" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase-300x96.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63995" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/email-password-options-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase.png" data-orig-size="730,233" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Email and password options in Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase-300x96.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase.png" decoding="async" loading="lazy" class="size-full wp-image-63995 aligncenter" src="../Images/5e499c5a09e540df88d8d9185ecc7f65.png" alt="Email and Password Options in Firebase" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase-300x96.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/email-password-options-firebase.png"/></noscript>
<p>现在按下<strong>谷歌</strong>:</p>
<p><img data-attachment-id="63997" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/google-options-firebase-console/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console.png" data-orig-size="730,498" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Google options in Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console-300x205.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console.png" decoding="async" class="size-full wp-image-63997 aligncenter jetpack-lazy-image" src="../Images/d7a0630b088a8cdd8f8e470f11961afe.png" alt="Google Options in Firebase" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console-300x205.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63997" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/google-options-firebase-console/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console.png" data-orig-size="730,498" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Google options in Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console-300x205.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console.png" decoding="async" loading="lazy" class="size-full wp-image-63997 aligncenter" src="../Images/d7a0630b088a8cdd8f8e470f11961afe.png" alt="Google Options in Firebase" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console-300x205.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/google-options-firebase-console.png"/></noscript>
<p>按“启用”，选择一个项目支持电子邮件地址，然后点击<strong>保存</strong>为我们的应用程序激活谷歌认证。</p>
<p>现在，让我们设置我们将在项目中使用的数据库，即Cloud Firestore。点击侧边栏上的<strong>云火商店</strong>，点击<strong>创建数据库</strong>。您应该会看到以下对话框:</p>
<p><img data-attachment-id="63993" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/cloud-firestore-create-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/cloud-firestore-create-database-e1629488849174.png" data-orig-size="730,492" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create database options in Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/cloud-firestore-create-database-300x202.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/cloud-firestore-create-database-1024x691.png" decoding="async" class="wp-image-63993 size-full aligncenter jetpack-lazy-image" src="../Images/07846a640eca711a50806ef6f63f0441.png" alt="Create Database Options in Firebase" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/cloud-firestore-create-database-e1629488849174.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/cloud-firestore-create-database-e1629488849174.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63993" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/cloud-firestore-create-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/cloud-firestore-create-database-e1629488849174.png" data-orig-size="730,492" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create database options in Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/cloud-firestore-create-database-300x202.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/cloud-firestore-create-database-1024x691.png" decoding="async" loading="lazy" class="wp-image-63993 size-full aligncenter" src="../Images/07846a640eca711a50806ef6f63f0441.png" alt="Create Database Options in Firebase" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/cloud-firestore-create-database-e1629488849174.png"/></noscript>
<p>记住在测试模式下选择<strong>开始。我们使用测试模式，因为在本教程中我们不处理生产级应用程序。生产模式数据库需要配置安全规则，这超出了本教程的范围。</strong></p>
<p>点击<strong>下一个</strong>。选择区域。我会让它保持默认，然后按下<strong>启用</strong>。这应该完全设置好您的云Firestore数据库。</p>
<h2>创建和设置React应用程序</h2>
<p>导航到一个安全的文件夹，并在终端中键入以下命令来创建一个新的React应用程序:</p>
<pre class="language-bash hljs">npx create-react-app appname
</pre>
<p>记得用自己选择的名字替换<code>appname</code>。名称并不真正影响教程的工作方式。React应用程序成功创建后，键入命令安装我们在整个项目中需要的几个npm包:</p>
<pre class="language-bash hljs">npm install firebase react-router-dom react-firebase-hooks
</pre>
<p>这里，我们安装了<code>firebase</code>来与Firebase服务通信，我们还安装了<code><a href="https://blog.logrocket.com/react-router-dom-tutorial-examples/">react-router-dom</a></code>来处理应用程序的路由。我们使用<code>react-firebase-hooks</code>来管理用户的认证状态。</p>
<p>键入以下命令运行React应用程序:</p>
<pre class="language-bash hljs">cd appname &amp;&amp; npm start
</pre>
<p>这将启动您的浏览器，您应该会看到以下屏幕:</p>
<p><img data-attachment-id="64001" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/react-app-beginning-setup-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-app-beginning-setup-firebase-e1629488906934.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Beginning setup for React app with Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-app-beginning-setup-firebase-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-app-beginning-setup-firebase-1024x570.png" decoding="async" class="wp-image-64001 size-full aligncenter jetpack-lazy-image" src="../Images/c1d859e06b84fe26ff6170486db9a80a.png" alt="Beginning Setup for React App with Firebase" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/react-app-beginning-setup-firebase-e1629488906934.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/react-app-beginning-setup-firebase-e1629488906934.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64001" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/react-app-beginning-setup-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-app-beginning-setup-firebase-e1629488906934.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Beginning setup for React app with Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-app-beginning-setup-firebase-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/react-app-beginning-setup-firebase-1024x570.png" decoding="async" loading="lazy" class="wp-image-64001 size-full aligncenter" src="../Images/c1d859e06b84fe26ff6170486db9a80a.png" alt="Beginning Setup for React App with Firebase" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/react-app-beginning-setup-firebase-e1629488906934.png"/></noscript>
<p>现在，让我们做一些清理，以便我们可以继续编码。从<code>src</code>文件夹中删除以下文件:<code>App.test.js</code>、<code>logo.svg</code>和<code>setupTests.js</code>。一旦你删除这些文件，删除<code>App.css</code>的所有内容，你会在React应用上看到一个错误。不用担心；只需移除<code>App.js</code>中的徽标导入并清空<code>div</code>，这样您的<code>App.js</code>看起来就像这样:</p>
<pre>import './App.css';
function App() {
  return (
    &lt;div className="app"&gt;

    &lt;/div&gt;
  );
}
export default App;
</pre>
<h2>将Firebase集成到我们的React应用程序中</h2>
<p>转到Firebase控制台仪表板，点击<strong>项目设置</strong>，向下滚动，您应该会看到类似这样的内容:</p>
<p><img data-attachment-id="63999" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/project-settings-no-app-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase.png" data-orig-size="730,158" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Project Settings with no app for Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase-300x65.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase.png" decoding="async" class="size-full wp-image-63999 aligncenter jetpack-lazy-image" src="../Images/8afd2fc13a9c4d8c530da728037af26d.png" alt="Project Settings with No App for Firebase" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase-300x65.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63999" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/project-settings-no-app-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase.png" data-orig-size="730,158" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Project Settings with no app for Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase-300x65.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase.png" decoding="async" loading="lazy" class="size-full wp-image-63999 aligncenter" src="../Images/8afd2fc13a9c4d8c530da728037af26d.png" alt="Project Settings with No App for Firebase" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase-300x65.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/project-settings-no-app-firebase.png"/></noscript>
<p>点击第三个图标(&gt;)为web配置我们的Firebase项目。输入应用程序名称并点击<strong>继续</strong>。回到项目设置，您现在应该会看到如下配置:</p>
<p><img data-attachment-id="64005" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/web-config-firebase-console/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/web-config-firebase-console-e1629488970325.png" data-orig-size="730,413" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Web config in Firebase console" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/web-config-firebase-console-300x170.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/web-config-firebase-console-1024x579.png" decoding="async" class="wp-image-64005 size-full aligncenter jetpack-lazy-image" src="../Images/db1a301c679d914e6c369c3b8c261658.png" alt="Web Config in Firebase Console" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/web-config-firebase-console-e1629488970325.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/web-config-firebase-console-e1629488970325.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64005" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/web-config-firebase-console/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/web-config-firebase-console-e1629488970325.png" data-orig-size="730,413" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Web config in Firebase console" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/web-config-firebase-console-300x170.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/web-config-firebase-console-1024x579.png" decoding="async" loading="lazy" class="wp-image-64005 size-full aligncenter" src="../Images/db1a301c679d914e6c369c3b8c261658.png" alt="Web Config in Firebase Console" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/web-config-firebase-console-e1629488970325.png"/></noscript>
<p>复制配置。在<code>src</code>文件夹中创建一个名为<code>firebase.js</code>的新文件。让我们首先导入<code>firebase</code>模块，因为Firebase在v9中使用模块化用法::</p>
<pre>import { initializeApp } from "firebase/app";
​​import {
​​  GoogleAuthProvider,
​​  getAuth,
​​  signInWithPopup,
​​  signInWithEmailAndPassword,
​​  createUserWithEmailAndPassword,
​​  sendPasswordResetEmail,
​​  signOut,
​​} from "firebase/auth";
​​import {
​​  getFirestore,
​​  query,
​​  getDocs,
​​  collection,
​​  where,
​​  addDoc,
​​} from "firebase/firestore";
</pre>
<p>现在粘贴我们刚刚复制的配置。让我们初始化我们的应用程序和服务，以便我们可以在整个应用程序中使用Firebase:</p>
<pre>const app = ​​initializeApp(firebaseConfig);
​​const auth = getAuth(app);
​​const db = getFirestore(app);
</pre>
<p>这将使用我们的配置来识别项目并初始化身份验证和数据库模块。</p>
<p>我们将在<code>firebase.js</code>中创建所有重要的认证相关功能。所以先来看看谷歌认证功能:</p>
<pre>const googleProvider = new GoogleAuthProvider();
const signInWithGoogle = async () =&gt; {
  try {
    const res = await signInWithPopup(auth, googleProvider);
    const user = res.user;
    const q = query(collection(db, "users"), where("uid", "==", user.uid));
    const docs = await getDocs(q);
    if (docs.docs.length === 0) {
      await addDoc(collection(db, "users"), {
        uid: user.uid,
        name: user.displayName,
        authProvider: "google",
        email: user.email,
      });
    }
  } catch (err) {
    console.error(err);
    alert(err.message);
  }
};
</pre>
<p>在上面的代码块中，我们使用了一个<code>try…catch</code>块和异步函数，这样我们可以轻松地处理错误并尽可能避免回调。</p>
<p>首先，我们尝试使用Firebase提供的<code>GoogleAuthProvider</code>登录。如果认证失败，则该流被发送到<code>catch</code>块。</p>
<p>然后我们查询数据库，检查这个用户是否在我们的数据库中注册了用户<code>uid</code>。如果没有使用<code>uid</code>的用户，这也意味着该用户是我们应用程序的新用户，我们将在数据库中创建一个新记录，其中包含额外的数据以供将来参考。</p>
<p>现在让我们创建一个使用电子邮件和密码登录的函数:</p>
<pre>const logInWithEmailAndPassword = async (email, password) =&gt; {
  try {
    await signInWithEmailAndPassword(auth, email, password);
  } catch (err) {
    console.error(err);
    alert(err.message);
  }
};
</pre>
<p>这段代码非常简单。因为我们知道用户已经在我们这里注册了，所以我们不需要检查数据库。我们可以马上进行认证。我们只需将email和密码传递给<code>signInWithEmailAndPassword</code>函数，这是Firebase提供给我们的。</p>
<p>现在，让我们创建一个用电子邮件和密码注册用户的函数:</p>
<pre>const registerWithEmailAndPassword = async (name, email, password) =&gt; {
  try {
    const res = await createUserWithEmailAndPassword(auth, email, password);
    const user = res.user;
    await addDoc(collection(db, "users"), {
      uid: user.uid,
      name,
      authProvider: "local",
      email,
    });
  } catch (err) {
    console.error(err);
    alert(err.message);
  }
};
</pre>
<p>因为我们知道用户是我们应用程序的新用户，所以我们为用户创建一个记录，而不检查我们的数据库中是否存在记录。这类似于我们在Google认证中使用的方法，但是没有检查。</p>
<p>创建一个将密码重置链接发送到电子邮件地址的功能:</p>
<pre>const sendPasswordReset = async (email) =&gt; {
  try {
    await sendPasswordResetEmail(auth, email);
    alert("Password reset link sent!");
  } catch (err) {
    console.error(err);
    alert(err.message);
  }
};
</pre>
<p>这段代码很简单。我们只是在Firebase提供的<code>sendPasswordResetEmail</code>函数中传入邮件。密码重置邮件将由Firebase发送。</p>
<p>最后，注销功能:</p>
<pre>const logout = () =&gt; {
  signOut(auth);
};
</pre>
<p>这里没什么，只是从Firebase启动了<code>signOut</code>函数，Firebase就会施展它的魔法，为我们注销用户。</p>
<p>最后，我们导出所有的函数，下面是您的<code>firebase.js</code>最终应该是什么样子:</p>
<pre>import { initializeApp } from "firebase/app";
import {
  GoogleAuthProvider,
  getAuth,
  signInWithPopup,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  sendPasswordResetEmail,
  signOut,
} from "firebase/auth";
import {
  getFirestore,
  query,
  getDocs,
  collection,
  where,
  addDoc,
} from "firebase/firestore";
const firebaseConfig = {
  apiKey: "AIzaSyDIXJ5YT7hoNbBFqK3TBcV41-TzIO-7n7w",
  authDomain: "fir-auth-6edd8.firebaseapp.com",
  projectId: "fir-auth-6edd8",
  storageBucket: "fir-auth-6edd8.appspot.com",
  messagingSenderId: "904760319835",
  appId: "1:904760319835:web:44fd0d957f114b4e51447e",
  measurementId: "G-Q4TYKH9GG7",
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const googleProvider = new GoogleAuthProvider();
const signInWithGoogle = async () =&gt; {
  try {
    const res = await signInWithPopup(auth, googleProvider);
    const user = res.user;
    const q = query(collection(db, "users"), where("uid", "==", user.uid));
    const docs = await getDocs(q);
    if (docs.docs.length === 0) {
      await addDoc(collection(db, "users"), {
        uid: user.uid,
        name: user.displayName,
        authProvider: "google",
        email: user.email,
      });
    }
  } catch (err) {
    console.error(err);
    alert(err.message);
  }
};
const logInWithEmailAndPassword = async (email, password) =&gt; {
  try {
    await signInWithEmailAndPassword(auth, email, password);
  } catch (err) {
    console.error(err);
    alert(err.message);
  }
};
const registerWithEmailAndPassword = async (name, email, password) =&gt; {
  try {
    const res = await createUserWithEmailAndPassword(auth, email, password);
    const user = res.user;
    await addDoc(collection(db, "users"), {
      uid: user.uid,
      name,
      authProvider: "local",
      email,
    });
  } catch (err) {
    console.error(err);
    alert(err.message);
  }
};
const sendPasswordReset = async (email) =&gt; {
  try {
    await sendPasswordResetEmail(auth, email);
    alert("Password reset link sent!");
  } catch (err) {
    console.error(err);
    alert(err.message);
  }
};
const logout = () =&gt; {
  signOut(auth);
};
export {
  auth,
  db,
  signInWithGoogle,
  logInWithEmailAndPassword,
  registerWithEmailAndPassword,
  sendPasswordReset,
  logout,
};
</pre>
<p>接下来，让我们研究实际的功能。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<h2>创建登录页面</h2>
<p>创建两个新文件来创建一个新组件，<code>Login.js</code>和<code>Login.css</code>。我强烈推荐在Visual Studio代码中安装ES7代码片段，这样你就可以开始输入<code>rfce</code>并按回车键来创建一个组件样板文件。</p>
<p>现在，让我们将这个组件分配给一个路由。为此，我们需要配置React路由器。转到<code>App.js</code>并导入以下内容:</p>
<pre>import { BrowserRouter as Router, Route, Routes } from "react-router-dom";
</pre>
<p>然后，在<code>App.js</code>的JSX部分，添加以下配置来为我们的应用程序启用路由:</p>
<pre>&lt;div className="app"&gt;
  &lt;Router&gt;
    &lt;Switch&gt;
      &lt;Route exact path="/" component={Login} /&gt;
    &lt;/Switch&gt;
  &lt;/Router&gt;
&lt;/div&gt;
</pre>
<p>记得导入顶部的<code>Login</code>组件！</p>
<p>转到<code>Login.css</code>并添加以下样式。我们不会把重点放在造型上，所以这里有一些风格供你使用:</p>
<pre>.login {
  height: 100vh;
  width: 100vw;
  display: flex;
  align-items: center;
  justify-content: center;
}
.login__container {
  display: flex;
  flex-direction: column;
  text-align: center;
  background-color: #dcdcdc;
  padding: 30px;
}
.login__textBox {
  padding: 10px;
  font-size: 18px;
  margin-bottom: 10px;
}
.login__btn {
  padding: 10px;
  font-size: 18px;
  margin-bottom: 10px;
  border: none;
  color: white;
  background-color: black;
}
.login__google {
  background-color: #4285f4;
}
.login div {
  margin-top: 7px;
}
</pre>
<p>转到<code>Login.js</code>，让我们看看我们的登录功能是如何工作的:</p>
<pre>import React, { useEffect, useState } from "react";
import { Link, useNavigate } from "react-router-dom";
import { auth, signInWithEmailAndPassword, signInWithGoogle } from "./firebase";
import { useAuthState } from "react-firebase-hooks/auth";
import "./Login.css";
function Login() {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [user, loading, error] = useAuthState(auth);
  const navigate = useNavigate();
  useEffect(() =&gt; {
    if (loading) {
      // maybe trigger a loading screen
      return;
    }
    if (user) navigate("/dashboard");
  }, [user, loading]);
  return (
    &lt;div className="login"&gt;
      &lt;div className="login__container"&gt;
        &lt;input
          type="text"
          className="login__textBox"
          value={email}
          onChange={(e) =&gt; setEmail(e.target.value)}
          placeholder="E-mail Address"
        /&gt;
        &lt;input
          type="password"
          className="login__textBox"
          value={password}
          onChange={(e) =&gt; setPassword(e.target.value)}
          placeholder="Password"
        /&gt;
        &lt;button
          className="login__btn"
          onClick={() =&gt; signInWithEmailAndPassword(email, password)}
        &gt;
          Login
        &lt;/button&gt;
        &lt;button className="login__btn login__google" onClick={signInWithGoogle}&gt;
          Login with Google
        &lt;/button&gt;
        &lt;div&gt;
          &lt;Link to="/reset"&gt;Forgot Password&lt;/Link&gt;
        &lt;/div&gt;
        &lt;div&gt;
          Don't have an account? &lt;Link to="/register"&gt;Register&lt;/Link&gt; now.
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
export default Login;
</pre>
<p>上面的代码可能看起来很长，很难理解，但事实并非如此。我们已经介绍了主要的身份验证部分，现在我们只是在布局中实现它们。</p>
<p>下面是上面代码块中发生的情况。我们使用在<code>firebase.js</code>中创建的函数进行认证。我们还使用<code>react-firebase-hooks</code>和<code>useEffect</code>来跟踪用户的认证状态。因此，如果用户通过身份验证，用户将自动重定向到仪表板，这是我们还没有做到的。</p>
<p>以下是您将在屏幕上看到的内容:</p>
<p><img data-attachment-id="63991" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/basic-login-page-react-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/basic-login-page-react-firebase-e1629489024153.png" data-orig-size="730,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Basic login page React Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/basic-login-page-react-firebase-300x165.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/basic-login-page-react-firebase-1024x564.png" decoding="async" class="wp-image-63991 size-full aligncenter jetpack-lazy-image" src="../Images/c5c2a23fd7bb5016140d1d25a7e16821.png" alt="Basic Login Page React Firebase" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/basic-login-page-react-firebase-e1629489024153.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/basic-login-page-react-firebase-e1629489024153.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63991" data-permalink="https://blog.logrocket.com/user-authentication-firebase-react-apps/basic-login-page-react-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/basic-login-page-react-firebase-e1629489024153.png" data-orig-size="730,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Basic login page React Firebase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/basic-login-page-react-firebase-300x165.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/basic-login-page-react-firebase-1024x564.png" decoding="async" loading="lazy" class="wp-image-63991 size-full aligncenter" src="../Images/c5c2a23fd7bb5016140d1d25a7e16821.png" alt="Basic Login Page React Firebase" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/basic-login-page-react-firebase-e1629489024153.png"/></noscript>
<p>创建一个名为<code>Register</code>的新组件来处理用户注册。以下是<code>Register.css</code>的款式:</p>
<pre>.register {
  height: 100vh;
  width: 100vw;
  display: flex;
  align-items: center;
  justify-content: center;
}
.register__container {
  display: flex;
  flex-direction: column;
  text-align: center;
  background-color: #dcdcdc;
  padding: 30px;
}
.register__textBox {
  padding: 10px;
  font-size: 18px;
  margin-bottom: 10px;
}
.register__btn {
  padding: 10px;
  font-size: 18px;
  margin-bottom: 10px;
  border: none;
  color: white;
  background-color: black;
}
.register__google {
  background-color: #4285f4;
}
.register div {
  margin-top: 7px;
}
</pre>
<p>之后，让我们看看寄存器功能是如何在布局中实现的。在<code>Register.js</code>中使用该布局:</p>
<pre>import React, { useEffect, useState } from "react";
import { useAuthState } from "react-firebase-hooks/auth";
import { Link, useHistory } from "react-router-dom";
import {
  auth,
  registerWithEmailAndPassword,
  signInWithGoogle,
} from "./firebase";
import "./Register.css";
function Register() {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [name, setName] = useState("");
  const [user, loading, error] = useAuthState(auth);
  const history = useHistory();
  const register = () =&gt; {
    if (!name) alert("Please enter name");
    registerWithEmailAndPassword(name, email, password);
  };
  useEffect(() =&gt; {
    if (loading) return;
    if (user) history.replace("/dashboard");
  }, [user, loading]);
  return (
    &lt;div className="register"&gt;
      &lt;div className="register__container"&gt;
        &lt;input
          type="text"
          className="register__textBox"
          value={name}
          onChange={(e) =&gt; setName(e.target.value)}
          placeholder="Full Name"
        /&gt;
        &lt;input
          type="text"
          className="register__textBox"
          value={email}
          onChange={(e) =&gt; setEmail(e.target.value)}
          placeholder="E-mail Address"
        /&gt;
        &lt;input
          type="password"
          className="register__textBox"
          value={password}
          onChange={(e) =&gt; setPassword(e.target.value)}
          placeholder="Password"
        /&gt;
        &lt;button className="register__btn" onClick={register}&gt;
          Register
        &lt;/button&gt;
        &lt;button
          className="register__btn register__google"
          onClick={signInWithGoogle}
        &gt;
          Register with Google
        &lt;/button&gt;
        &lt;div&gt;
          Already have an account? &lt;Link to="/"&gt;Login&lt;/Link&gt; now.
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
export default Register;
</pre>
<p>这里，我们使用的方法与在<code>Login</code>组件中使用的方法相似。我们只是在使用我们之前在<code>firebase.js</code>中创建的函数。同样，这里我们使用<code>useEffect</code>和<code>react-firebase-hooks</code>来跟踪用户认证状态。</p>
<p>让我们看看重置密码。创建一个名为<code>Reset</code>的新组件，下面是<code>Reset.css</code>的样式:</p>
<pre>.reset {
  height: 100vh;
  width: 100vw;
  display: flex;
  align-items: center;
  justify-content: center;
}
.reset__container {
  display: flex;
  flex-direction: column;
  text-align: center;
  background-color: #dcdcdc;
  padding: 30px;
}
.reset__textBox {
  padding: 10px;
  font-size: 18px;
  margin-bottom: 10px;
}
.reset__btn {
  padding: 10px;
  font-size: 18px;
  margin-bottom: 10px;
  border: none;
  color: white;
  background-color: black;
}
.reset div {
  margin-top: 7px;
}
</pre>
<p>这是<code>Reset.js</code>的布局:</p>
<pre>import React, { useEffect, useState } from "react";
import { useAuthState } from "react-firebase-hooks/auth";
import { useNavigate } from "react-router-dom";
import { Link } from "react-router-dom";
import { auth, sendPasswordResetEmail } from "./firebase";
import "./Reset.css";
function Reset() {
  const [email, setEmail] = useState("");
  const [user, loading, error] = useAuthState(auth);
  const navigate = useNavigate();
  useEffect(() =&gt; {
    if (loading) return;
    if (user) navigate("/dashboard");
  }, [user, loading]);
  return (
    &lt;div className="reset"&gt;
      &lt;div className="reset__container"&gt;
        &lt;input
          type="text"
          className="reset__textBox"
          value={email}
          onChange={(e) =&gt; setEmail(e.target.value)}
          placeholder="E-mail Address"
        /&gt;
        &lt;button
          className="reset__btn"
          onClick={() =&gt; sendPasswordResetEmail(email)}
        &gt;
          Send password reset email
        &lt;/button&gt;
        &lt;div&gt;
          Don't have an account? &lt;Link to="/register"&gt;Register&lt;/Link&gt; now.
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
export default Reset;
</pre>
<p>这类似于我们对<code>Login</code>和<code>Register</code>组件所做的。我们只是在使用我们之前创建的函数。</p>
<p>现在，让我们把注意力集中在仪表板上。创建一个名为<code>Dashboard</code>的新组件，下面是<code>Dashboard.css</code>的样式:</p>
<pre>.dashboard {
  height: 100vh;
  width: 100vw;
  display: flex;
  align-items: center;
  justify-content: center;
}
.dashboard__container {
  display: flex;
  flex-direction: column;
  text-align: center;
  background-color: #dcdcdc;
  padding: 30px;
}
.dashboard__btn {
  padding: 10px;
  font-size: 18px;
  margin-top: 10px;
  border: none;
  color: white;
  background-color: black;
}
.dashboard div {
  margin-top: 7px;
}
</pre>
<p>这里是<code>Dashboard.js</code>的布局:</p>
<pre>import React, { useEffect, useState } from "react";
import { useAuthState } from "react-firebase-hooks/auth";
import { useNavigate } from "react-router-dom";
import "./Dashboard.css";
import { auth, db, logout } from "./firebase";
import { query, collection, getDocs, where } from "firebase/firestore";
function Dashboard() {
  const [user, loading, error] = useAuthState(auth);
  const [name, setName] = useState("");
  const navigate = useNavigate();
  const fetchUserName = async () =&gt; {
    try {
      const q = query(collection(db, "users"), where("uid", "==", user?.uid));
      const doc = await getDocs(q);
      const data = doc.docs[0].data();
      setName(data.name);
    } catch (err) {
      console.error(err);
      alert("An error occured while fetching user data");
    }
  };
  useEffect(() =&gt; {
    if (loading) return;
    if (!user) return navigate("/");
    fetchUserName();
  }, [user, loading]);
  return (
    &lt;div className="dashboard"&gt;
       &lt;div className="dashboard__container"&gt;
        Logged in as
         &lt;div&gt;{name}&lt;/div&gt;
         &lt;div&gt;{user?.email}&lt;/div&gt;
         &lt;button className="dashboard__btn" onClick={logout}&gt;
          Logout
         &lt;/button&gt;
       &lt;/div&gt;
     &lt;/div&gt;
  );
}
export default Dashboard;
</pre>
<p>与其他组件不同，我们在这里还做了其他事情。我们正在检查身份验证状态。如果用户没有通过身份验证，我们会将用户重定向到登录页面。</p>
<p>我们还获取数据库，并根据用户的<code>uid</code>检索用户名。最后，我们在屏幕上渲染出一切。</p>
<p>最后，让我们将所有内容添加到路由器中。你的<code>App.js</code>应该是这样的:</p>
<pre>import "./App.css";
import { BrowserRouter as Router, Route, Routes } from "react-router-dom";
import Login from "./Login";
import Register from "./Register";
import Reset from "./Reset";
import Dashboard from "./Dashboard";
function App() {
  return (
    &lt;div className="app"&gt;
      &lt;Router&gt;
        &lt;Routes&gt;
          &lt;Route exact path="/" element={&lt;Login /&gt;} /&gt;
          &lt;Route exact path="/register" element={&lt;Register /&gt;} /&gt;
          &lt;Route exact path="/reset" element={&lt;Reset /&gt;} /&gt;
          &lt;Route exact path="/dashboard" element={&lt;Dashboard /&gt;} /&gt;
        &lt;/Routes&gt;
      &lt;/Router&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>该应用程序功能齐全！</p>
<div class="blog-plug cro21">
<h2>确保您的用户可以无缝登录。尝试使用<a href="https://www2.logrocket.com/react-performance-monitoring"> LogRocket </a>来监控React应用程序中的登录流程</h2>
<p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误、跟踪缓慢的网络请求和组件加载时间感兴趣，请尝试LogRocket 。【T2<img data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-lazy-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/></noscript><a class="signup" href="https://www2.logrocket.com/react-performance-monitoring" target="_blank" rel="noopener noreferrer"><img data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" loading="lazy" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a></p>
<p>LogRocket 就像是网络应用程序的DVR，记录React应用程序上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用程序的性能，报告客户端CPU负载、客户端内存使用等指标。</p>
<p>LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p>现代化您调试React应用的方式— <a class="signup" href="https://www2.logrocket.com/react-performance-monitoring" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p>
</div>
<h2>下一步是什么？</h2>
<p>一旦你完成了这个构建，我希望你能玩玩这个。接下来尝试添加脸书身份验证。GitHub认证呢？我会说继续尝试代码，因为这是你练习和学习的方式。如果你只是不停地复制代码，你就不会理解Firebase的基本原理。</p>
<p>同样，如果你对代码有任何错误或疑问，这里有<a href="https://github.com/atharvadeosthale/firebase-auth-article"> GitHub库</a>供你参考。</p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>