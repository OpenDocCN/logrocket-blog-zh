<html>
<head>
<title>Building lightning-fast APIs with FeathersJS - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用FeathersJS - LogRocket博客构建快如闪电的API</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/lightning-fast-apis-feathersjs/#0001-01-01">https://blog.logrocket.com/lightning-fast-apis-feathersjs/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<p>Feathers是一个轻量级的web框架，构建在用于创建应用程序的Express之上。Feathers可以与JavaScript或TypeScript一起使用。用户说用<a href="http://docs.feathersjs.com/" target="_blank" rel="noopener noreferrer"> FeathersJS </a>可以在几分钟内构建原型应用程序，而生产就绪的应用程序只需几天。</p>
<h2>那么，为什么是费瑟斯？</h2>
<p>对于那些对为什么应该考虑尝试新工具感到好奇的人，这里有几个你应该尝试FeathersJS的理由:</p>
<ul>
<li>它很轻</li>
<li>它可以用于创建实时应用程序</li>
<li>它适用于JavaScript或TypeScript</li>
<li>它可以使用几乎任何后端技术在几乎任何地方工作——它提供了对<a href="https://socket.io/" target="_blank" rel="noopener noreferrer"> Socket.io </a>和<a href="https://github.com/primus/primus" target="_blank" rel="noopener noreferrer"> Primus </a>的开箱即用支持和配置，这取决于您的偏好</li>
<li>它在带有节点的服务器上工作</li>
<li>它支持许多不同的数据库，如Postgres、Mongo、MySql、NeDB、文件系统、LocalStorage、SQLite、MSSQL、Cassandra等。</li>
<li>它通过JavaScript在浏览器上工作，这意味着它也可以与React、Vue.js和Angular一起使用</li>
<li>它在手机上也能工作——谁能想到呢？它可以与React Native、Ionic、Android或iOS一起使用</li>
<li>是的，您可以在几分钟内构建原型应用程序</li>
</ul>
<h2>我们将建造什么</h2>
<p>在本文中，我们将使用FeathersJS和一个名为<a href="https://github.com/louischatriot/nedb" target="_blank" rel="noopener noreferrer"> NeDB </a>的内存数据库，在几分钟内构建一个简单的带身份验证的API原型版本。现在让我们继续，确保我们已经安装了所有的先决条件，这样我们就可以开始有趣的事情了:</p>
<ul>
<li>JavaScript的基础知识</li>
<li>使用Express创建RESTful APIs的知识</li>
<li>您机器上安装的最新版本<a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer"> Node.js </a></li>
<li>像<a href="https://iterm2.com/" target="_blank" rel="noopener noreferrer"> ITerm2 </a> (mac OS)或者<a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer"> Git Bash </a> (Windows)这样的终端</li>
<li>RestAPI客户端如<a href="https://www.postman.com/" target="_blank" rel="noopener noreferrer">邮递员</a>、<a href="https://insomnia.rest/" target="_blank" rel="noopener noreferrer">失眠</a>等。</li>
</ul>
<h3>安装羽毛</h3>
<p>安装和设置FeathersJS的唯一步骤是通过运行以下命令全局安装CLI应用程序:</p>
<pre>npm install -g @feathersjs/cli</pre>
<h3>创建您的API</h3>
<p>通过这些简单的步骤，我们将启动并运行我们的身份验证API:</p>
<pre>mkdir api-app &amp;&amp; cd api-app</pre>
<p>上面的命令基本上创建了一个我们的API所在的文件夹，并将您的当前目录更改为该文件夹:</p>
<pre>feathers generate app</pre>
<p>运行该命令后，将会询问您几个问题，以确定您的API将如何构建以及它将使用什么技术。以下是我的选择:</p>
<p><img data-attachment-id="17938" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/feather-class/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class.png" data-orig-size="730,447" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Feather-class" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class.png" decoding="async" class="aligncenter wp-image-17938 size-full jetpack-lazy-image" src="../Images/564c48ab7129d7716a696a90697790b2.png" alt="The code to build our prototype app." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class-300x184.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17938" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/feather-class/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class.png" data-orig-size="730,447" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Feather-class" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class.png" decoding="async" loading="lazy" class="aligncenter wp-image-17938 size-full" src="../Images/564c48ab7129d7716a696a90697790b2.png" alt="The code to build our prototype app." srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class-300x184.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/Feather-class.png"/></noscript>
<p>瞧啊。我们的API准备好了。</p>
<p>安装完成后，您可以打开首选的REST API客户端并进行测试。运行以下命令启动API服务器:</p>
<pre>npm start</pre>
<p>如果您尝试在REST API客户机中访问基本路由<code>http:localhost:3030</code>，您应该会看到以下响应:</p>
<p><img data-attachment-id="17939" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/untitled-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request.png" data-orig-size="730,435" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="untitled-request" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request.png" decoding="async" class="aligncenter wp-image-17939 size-full jetpack-lazy-image" src="../Images/8a612db447f24fa85768fc8d373a01e3.png" alt="A screenshot of our postman response" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request-300x179.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17939" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/untitled-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request.png" data-orig-size="730,435" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="untitled-request" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request.png" decoding="async" loading="lazy" class="aligncenter wp-image-17939 size-full" src="../Images/8a612db447f24fa85768fc8d373a01e3.png" alt="A screenshot of our postman response" srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request-300x179.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/untitled-request.png"/></noscript>
<p>或者，如果您尝试使用浏览器访问该路线，您会看到以下页面:</p>
<p><img data-attachment-id="17940" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/feathers/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers.png" data-orig-size="730,435" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="feathers" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers.png" decoding="async" class="aligncenter wp-image-17940 size-full jetpack-lazy-image" src="../Images/6f0a16e924fc1f58b924874ed9994977.png" alt="A screenshot of our browser request." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/feathers-300x179.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17940" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/feathers/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers.png" data-orig-size="730,435" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="feathers" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers.png" decoding="async" loading="lazy" class="aligncenter wp-image-17940 size-full" src="../Images/6f0a16e924fc1f58b924874ed9994977.png" alt="A screenshot of our browser request." srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/feathers-300x179.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/feathers.png"/></noscript>
<p>至此，注册、身份验证和授权已经基本完成。您可以通过向<code>/users</code>路线发送包含您的详细信息的帖子请求来注册。</p>
<p>可以通过<code>/authentication</code>路由登录，响应中会返回一个令牌。然后，这个令牌可以用作访问其他路由的授权方法，比如向<code>/users</code>发送GET请求来检索所有用户。</p>
<h3>生成服务</h3>
<p>既然我们已经设置好了身份验证，那么让我们创建一个新的服务来对联系人执行CRUD操作(即创建、读取、更新和删除联系人)。在一个典型的REST API CRUD项目中，我们必须编写每个方法来处理每个CRUD操作。嗯，不是用羽毛。</p>
<p>使用FeathersJS，一个简单的命令就可以创建一个在模型上执行所有CRUD操作的服务，并且代码是抽象的。让我展示给你看。</p>
<p>在您的终端中，运行以下命令:</p>
<pre>feathers generate service</pre>
<p>这里会问你几个问题。出于本文的目的，我选择了以下选项:</p>
<p><img data-attachment-id="17941" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/create-featherjs/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs.png" data-orig-size="730,447" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="create-featherjs" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs.png" decoding="async" class="aligncenter wp-image-17941 size-full jetpack-lazy-image" src="../Images/a08497e9ad1613c60da95f18fd252b52.png" alt="A screenshot of our Feathers generate service." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs-300x184.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17941" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/create-featherjs/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs.png" data-orig-size="730,447" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="create-featherjs" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs.png" decoding="async" loading="lazy" class="aligncenter wp-image-17941 size-full" src="../Images/a08497e9ad1613c60da95f18fd252b52.png" alt="A screenshot of our Feathers generate service." srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs-300x184.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/create-featherjs.png"/></noscript>
<p>一旦安装了所有的包，您就可以通过<code>/contacts</code>路径在<strong> contacts </strong>服务上执行所有的CRUD操作。但在此之前，我们先来看看生成的文件。</p>
<h4>联系模式(<code>/src/models/contacts.model.js</code>)</h4>
<p>在这里，我们将定义我们的模式和模型，以形成我们收集的数据以及这些数据在数据库中的存储方式。另一方面，NeDB不支持模式，所以我们的模型文件如下所示:</p>
<p><img data-attachment-id="17942" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/user-service-module/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="user-service-module" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module.png" decoding="async" class="aligncenter wp-image-17942 size-full jetpack-lazy-image" src="../Images/fab899ebd14ceac382adf874d9d4a82e.png" alt="An image of the contract model." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17942" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/user-service-module/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="user-service-module" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module.png" decoding="async" loading="lazy" class="aligncenter wp-image-17942 size-full" src="../Images/fab899ebd14ceac382adf874d9d4a82e.png" alt="An image of the contract model." srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/user-service-module.png"/></noscript>
<p>在使用支持模式的数据库(比如MongoDB或Postgres)的情况下，这就是要定义的模式。</p>
<h4>联系人类别(<code>/src/services/contact/contacts.class.js</code>)</h4>
<p>这是编写CRUD方法的地方，但是在这种情况下，这个文件几乎是空的。这是因为CRUD方法是抽象的，文件只是实例化了<code>contact</code>类，它扩展了<code>service</code>类。</p>
<p><img data-attachment-id="17943" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/contract-service/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="contract-service" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service.png" decoding="async" class="aligncenter wp-image-17943 size-full jetpack-lazy-image" src="../Images/431513951f1990260abe781fbecaa4ce.png" alt="The code for our contact class in FeatherJS." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17943" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/contract-service/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="contract-service" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service.png" decoding="async" loading="lazy" class="aligncenter wp-image-17943 size-full" src="../Images/431513951f1990260abe781fbecaa4ce.png" alt="The code for our contact class in FeatherJS." srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/contract-service.png"/></noscript>
<h4>触点挂钩(<code>/src/services/contact/contacts.hooks.js</code>):</h4>
<p>这决定了我们CRUD操作的工作流程。这是一个典型的钩子文件的样子:</p>
<p><img data-attachment-id="17944" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/contact-hooks/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="contact-hooks" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks.png" decoding="async" class="aligncenter wp-image-17944 size-full jetpack-lazy-image" src="../Images/8da0e9f73752d5ea539066901fa314df.png" alt="A typical contacts Hook file." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17944" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/contact-hooks/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="contact-hooks" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks.png" decoding="async" loading="lazy" class="aligncenter wp-image-17944 size-full" src="../Images/8da0e9f73752d5ea539066901fa314df.png" alt="A typical contacts Hook file." srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/contact-hooks.png"/></noscript>
<p>我们可以看到<code>before: {all:</code>有<code>authenticate('jwt')</code>。这意味着在对contacts服务执行任何CRUD操作之前，您必须提供一个令牌。换句话说，您必须登录。</p>
<p>钩子函数可以在CRUD操作过程中发生错误之前、之后或之时使用。例如，如果您希望在创建联系人时验证联系人是否包含全名、电子邮件和电话号码，这将在before挂钩中完成，如下所示:</p>
<pre>before: {
  all: [ authenticate('jwt') ],
  find: [],
  get: [],
  create: [ function(context) {
    // perform validation 
    return context;
  }],
  update: [],
  patch: [],
  remove: []
},</pre>
<p>如果您还希望在数据被创建、读取、更新或删除之后做一些事情，那么您必须在钩子之后的中编写该函数。例如，如果您想将邮件发送到联系人的邮箱，它看起来会像这样:</p>
<pre>after: {
  all: [],
  find: [],
  get: [],
  create: [ function(context) {
    // send email function
    return context;
  }],
  update: [],
  patch: [],
  remove: []
},</pre>
<p>如果你想处理一个以某种方式得到的错误，情况也是如此。例如，如果你想使用一个类似于<a href="https://sentry.io/welcome/" target="_blank" rel="noopener noreferrer"> Sentry </a>的错误记录器，那么它将被添加到错误挂钩中。</p>
<h4>联系服务(<code>/src/services/contact/contacts.service.js</code>)</h4>
<p>这是定义单一路由服务、注册挂钩和模型以及初始化服务的地方。它看起来有点像这样:</p>
<p><img data-attachment-id="17945" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/contacts-paginate/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="contacts-paginate" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate.png" decoding="async" class="aligncenter wp-image-17945 size-full jetpack-lazy-image" src="../Images/20c821223cdf365d21e1920a360d5a80.png" alt="Our initialized contacts service." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17945" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/contacts-paginate/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="contacts-paginate" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate.png" decoding="async" loading="lazy" class="aligncenter wp-image-17945 size-full" src="../Images/20c821223cdf365d21e1920a360d5a80.png" alt="Our initialized contacts service." srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/contacts-paginate.png"/></noscript>
<p>代码非常小。这是因为FeathersJS通过抽象的方式在幕后处理了大量的提升工作。</p>
<p>注意，FeathersJS使用不同的策略来处理认证，比如local、JWT、OAuth、Google、GitHub等。当试图向<code>/authentication</code>发出POST请求时，您必须指定策略。</p>
<p>例如，这里有一个对<code>/authentication</code>路由的POST请求来登录(生成一个访问令牌):</p>
<p><img data-attachment-id="17946" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/post-authentication/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication.png" data-orig-size="730,436" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="post-authentication" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication.png" decoding="async" class="aligncenter wp-image-17946 size-full jetpack-lazy-image" src="../Images/546db74fe80921a041781a0c7a8b2693.png" alt="Post authentication using FeatherJS." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication-300x179.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17946" data-permalink="https://blog.logrocket.com/lightning-fast-apis-feathersjs/post-authentication/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication.png" data-orig-size="730,436" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="post-authentication" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication.png" decoding="async" loading="lazy" class="aligncenter wp-image-17946 size-full" src="../Images/546db74fe80921a041781a0c7a8b2693.png" alt="Post authentication using FeatherJS." srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication-300x179.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/post-authentication.png"/></noscript>
<h2>结论</h2>
<p>FeathersJS真的让我们在几分钟内就可以轻松地构建应用程序原型。</p>
<p>为了构建一个生产就绪的应用程序，你可能需要选择一个更健壮的数据库，比如<a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer"> MongoDB </a>或者<a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer"> Postgres </a>而不是NeDB。</p>
<p>你可能还想看看他们写得很好的<a href="https://docs.feathersjs.com/" target="_blank" rel="noopener noreferrer">文档</a>来了解更多关于羽毛的能力和他们的<a href="https://github.com/feathersjs/awesome-feathersjs" target="_blank" rel="noopener noreferrer">令人敬畏的羽毛</a>页面。</p><div class="code-block code-block-28">
<div class="blog-plug inline-plug js-libraries-plug"><h2>您是否添加了新的JS库来提高性能或构建新特性？如果他们反其道而行之呢？</h2><p>毫无疑问，前端变得越来越复杂。当您向应用程序添加新的JavaScript库和其他依赖项时，您将需要更多的可见性，以确保您的用户不会遇到未知的问题。</p>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放JavaScript错误，就像它们发生在您自己的浏览器中一样，这样您就可以更有效地对错误做出反应。</p><a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/></noscript></a>
<a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>自信地构建— <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>