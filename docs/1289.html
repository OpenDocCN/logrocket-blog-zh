<html>
<head>
<title>Deno's standard library: 4 core modules - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Deno的标准库:4个核心模块</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/denos-standard-library-4-core-modules/#0001-01-01">https://blog.logrocket.com/denos-standard-library-4-core-modules/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Deno提供了许多很酷的特性，其中包括一组标准模块，旨在使开发人员的生活更加轻松。这些模块主要受Go和Python等现有语言的启发，是Deno认可的，没有任何外部依赖性。</p>
<h2>Deno的标准库里面有什么？</h2>
<p><a href="https://deno.land/manual/standard_library" target="_blank" rel="noopener noreferrer"> Deno的标准库</a>的意图是提供一个全面的高质量代码集合，所有Deno项目都可以无缝使用。</p>
<p>在本教程中，我们将探索四个核心标准库，它们可以帮助您将Deno应用提升到一个新的水平:</p>
<ol>
<li><a href="#http"> <code>http</code> </a>，用于设置HTTP服务器</li>
<li><a href="#hash"> <code>hash</code> </a>，一个用于Deno的加密库</li>
<li><a href="#fs"> <code>fs</code> </a>，德诺的文件管理系统</li>
<li><a href="#uuid"> <code>uuid</code> </a>，用于生成唯一标识</li>
</ol>
<h2>安装Deno</h2>
<p>在开始之前，让我们快速浏览一下如何在您的本地机器上安装Deno。</p>
<h3>Windows操作系统</h3>
<p>要在我们的windows计算机上安装Deno，请打开终端并运行以下命令:</p>
<pre>iwr https://deno.land/x/install/install.ps1 -useb | iex
</pre>
<p>如果您的计算机上安装了Chocolatey，您还可以运行:</p>
<pre>choco install deno
</pre>
<h3>苹果个人计算机</h3>
<p>您可以通过运行以下命令，使用Homebrew在Mac计算机上安装Deno:</p>
<pre>brew install deno
</pre>
<p>您也可以使用<code>curl</code>安装Deno:</p>
<pre>curl -fsSL https://deno.land/x/install/install.sh | sh
</pre>
<p>如果Deno安装正确，运行上述命令将生成以下输出。</p>
<p><img data-attachment-id="28200" data-permalink="https://blog.logrocket.com/denos-standard-library-4-core-modules/install-deno-mac/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac.png" data-orig-size="720,172" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after successful installation of Deno on Mac" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac-300x72.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac.png" decoding="async" class="aligncenter size-full wp-image-28200 jetpack-lazy-image" src="../Images/5d74f55e8dd33250664975caec078917.png" alt="Output After Successful Installation of Deno on Mac" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac-300x72.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28200" data-permalink="https://blog.logrocket.com/denos-standard-library-4-core-modules/install-deno-mac/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac.png" data-orig-size="720,172" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after successful installation of Deno on Mac" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac-300x72.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-28200" src="../Images/5d74f55e8dd33250664975caec078917.png" alt="Output After Successful Installation of Deno on Mac" srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac-300x72.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/install-deno-mac.png"/></noscript>
<p>安装后，运行以下命令以确认Deno是否正确安装在您的本地计算机上。</p>
<pre>deno run https://deno.land/std/examples/welcome.ts
</pre>
<p>这个非常简单的Deno命令将在终端上打印出<code>Welcome to Deno 🦕</code>。</p>
<p>现在我们已经安装了Deno，让我们放大Deno标准库中最流行和最有用的四个模块。</p>
<h2 id="http">1.<code>http</code></h2>
<p>这个库提供了一种设置服务器的简单方法。</p>
<p>首先，将<code>server</code>实例引入应用程序。然后，使用服务器实例连接到一个<code>PORT</code>。</p>
<pre>import { serve } from "https://deno.land/std/http/server.ts";
const s = serve({ port: 8000 });
for await (const req of s) {
  req.respond({ body: "Hi,I'm Wisdom Ekpot" });
}</pre>
<p>要启动服务器，请运行:</p>
<pre>deno run --allow-net http.ts</pre>
<p>由于Deno的安全性，您需要通过<code>--allow-net</code>标志。</p>
<p>在Deno 中还有其他<a href="https://medium.com/@tomanagle/5-ways-to-build-a-http-server-with-deno-3169389118aa" target="_blank" rel="noopener noreferrer">方法连接到服务器，比如使用Abc，这使您能够使用app方法的单个实例创建链路由。</a></p>
<p>要使用Abc创建服务器，请将其添加到您的<code>http.ts</code>文件中:</p>
<pre>import { Application } from "https://deno.land/x/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="345556577442051a051a04">[email protected]</a>/mod.ts";
const app = new Application();
const PORT = 8000;
let homepage = () =&gt; {
  return "This is the home page";
};
let contactPage = () =&gt; {
  return "You can contact Wisdom Ekpot with this contact Page";
};
app
  .get("/", homepage)
  .get("/contact", contactPage)
  .start({ port: PORT });
console.log(`🔤 Abc server running at http://localhost:${PORT}`);
</pre>
<p>现在，您可以为您的应用程序创建不同的路线。</p>
<p>在撰写本文时，<code><a href="https://deno.land/x/abc@v1.1.0/mod.ts" rel="nofollow">https://deno.land/x/<span class="__cf_email__" data-cfemail="7e1f1c1d3e084f504f504e">[email protected]</span>/mod.ts</a></code>是Abc的最新版本。请务必查看<a href="https://deno.land/x/abc@v1.2.0/README.md" target="_blank" rel="noopener noreferrer">官方文件</a>获取最新版本。</p>
<h2 id="hash">2.<code>hash</code></h2>
<p>就像<a href="https://blog.logrocket.com/building-a-password-hasher-in-node-js/" target="_blank" rel="noopener noreferrer"> Node.js </a>一样，Deno自带哈希库。当您想要实现诸如密码或消息散列之类的事情时,<code>hash</code>模块就派上了用场。</p>
<p>要使用这个模块，您需要导入<code>createHash</code>的实例，然后创建一个变量来存储这个实例。此实例采用一种算法类型:</p>
<pre>import { createHash } from "https://deno.land/std/hash/mod.ts";
const hash = createHash("md5");
hash.update("All You need to know about deno");
const final = hash.digest();
console.log(final);
</pre>
<p>要运行该应用程序，请运行<code>deno run &lt;name of file&gt;</code>。这段代码将以一种<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" target="_blank" rel="noopener noreferrer"> ArrayBuffer </a>格式<em>记录散列数据。</em></p>
<p>您可以将<code>createHash</code>实例中的散列算法作为参数传递。</p>
<h2 id="fs">3.<code>fs</code></h2>
<p>Deno自带文件系统管理器。使用<code>fs</code>模块，你可以写、读、复制和执行任何你想要的文件操作。</p>
<h3 id="readingfilecontent">读取文件内容</h3>
<p>您可以使用<code>Deno.open()</code>方法在Deno中读取文件的内容。这个方法接受一个参数，它是您想要读取的文件的名称(路径)。</p>
<p>创建一个<code>file.txt</code>文件并在那里存储一些虚拟内容。我们将从该文件中读取内容:</p>
<pre>const file = await Deno.open("file.txt");
const decoder = new TextDecoder("utf-8");
const text = decoder.decode(await Deno.readAll(file));
console.log(text);
</pre>
<p><code>Deno.open()</code>方法返回一个承诺。这段代码创建了一个解码器实例，它将数据解码成人类可读的格式，<code>readAll</code>方法返回存储在<code>file.txt</code>文件中的文本。</p>
<p>要启动该应用程序，请运行:</p>
<pre>deno run --allow-read</pre>
<p>没有传递<code>--allow-read</code>标志，Deno不会让你读取文件。</p>
<h3 id="writingtoafile">写入文件</h3>
<p>您可以使用<code>Deno.writeTextFile()</code>方法将文本写入文件。这个方法接受两个参数:要写入的文件的路径和要写入的内容。</p>
<pre>const file_path = "file.txt";
const data = "This is the new content in my filex";
await Deno.writeTextFile(file_path, data);
// Read the file data 
console.log(await Deno.readTextFile(file_path));
</pre>
<p>如果变量中存储的<code>define</code>路径不存在，Deno将自动创建一个文件。</p>
<p>要运行这个程序，您需要传递两个标志——<code>--allow-write</code>和<code>--allow-read</code>——因为您正在写入和读取文件，以查看内容是否实际发生了更改。您可以在<code>writeTextFile</code>方法中添加另一个参数，将数据追加到文件中:</p>
<pre>await Deno.writeTextFile(file_path, data, {"append": true});
</pre>
<p>您还可以做其他事情，例如将文件数据从一个文件复制到另一个文件。您需要从<code>fs</code>模块导入复制实例:</p>
<pre>import { copy } from "https://deno.land/std/fs/mod.ts";
copy("file.txt", "new.txt"); // void
</pre>
<p>要运行代码，首先运行<code>deno run --allow-write --allow-read --unstable fs.ts</code>来创建一个<code>new.txt</code>文件并存储内容。要将文件复制到现有文件中，您需要传递一个参数<code>{ overwrite: true }</code>来覆盖该文件的现有内容。</p>
<pre>import { copy } from "https://deno.land/std/fs/mod.ts";
copy("file.txt", "test.txt", {
  overwrite: true,
});
</pre>
<h2 id="uuid">4.<code>UUID</code></h2>
<p>Deno也有自己的通用唯一标识符。您可以使用这个库来生成和验证惟一的id。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<pre>import { v4 } from "https://deno.land/std/uuid/mod.ts";
const generatedID = v4.generate();
const isValid = v4.validate(generatedID);
console.log(isValid);</pre>
<p>这个方法将在控制台上记录<code>true</code>,因为它是一个有效的UUID。如果您硬编码它，它将在控制台上返回<code>false</code>。</p>
<h2 id="conclusion">结论</h2>
<p>Deno附带了许多很酷的标准库和第三方模块，增强了开发人员的体验。您可以使用这些模块在Deno应用程序中编写复杂的逻辑，比如散列密码和在数据库中生成id。</p>
<p>你最希望在你的下一个项目中使用哪些Deno标准库模块？</p><div class="code-block code-block-1">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>