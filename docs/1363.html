<html>
<head>
<title>GitHub Actions: How to autodeploy your app - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>GitHub Actions:如何自动部署你的应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/#0001-01-01">https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/#0001-01-01</a></blockquote><div><article class="article-post">
<p>如果您曾经使用过一个不断发布变更和修复错误的应用程序，那么您就会知道在将一个拉请求合并到您的生产分支之前，等待预览版本和测试运行是多么痛苦。</p>
<p>在本教程中，我们将向您展示如何使用<a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer"> GitHub动作</a>来自动化该过程。我们将构建一个样例Vue.js应用程序，编写一些测试，然后推送到我们的远程存储库。我们将触发一个操作来运行我们的测试和任何其他检查，然后在所有检查通过时自动合并到生产分支。这将触发生产构建<a href="https://blog.logrocket.com/firebase-vs-netlify-which-one-is-right-for-you/" target="_blank" rel="noopener noreferrer">网络寿命</a>。</p>
<p>我们将详细介绍以下内容:</p>

<h2 id="What-Are-GitHub-Actions">什么是GitHub动作？</h2>
<p>GitHub动作是您在存储库中创建的指令，用于自动化项目中的某些过程。GitHub动作使您能够直接从GitHub构建、测试和部署您的代码。</p>
<p>2019年11月发布的<a href="https://github.blog/2019-08-08-github-actions-now-supports-ci-cd/" target="_blank" rel="noopener noreferrer"> GitHub Actions将自己</a>标榜为“GitHub上因果的API。”它使您能够基于指定的事件(如推送、新发布、问题创建等)自动化工作流。—并将这些工作流放在一个存储库中，以便您可以共享、重用和派生您的软件开发实践。</p>
<h2 id="What-Is-Netlify">什么是Netlify？</h2>
<p>Netlify是一个用于自动化现代web项目的静态部署平台。它的特性包括持续部署、无服务器表单处理、AWS Lambda支持等等。</p>
<p>Netlify通过三个快速步骤让您的web应用程序变得简单:</p>
<ol>
<li>连接您的仓库</li>
<li>配置您的生成设置</li>
<li>部署您的站点</li>
</ol>
<h2 id="Building-A-Vuejs-App">构建Vue.js应用程序</h2>
<p>首先，我们将使用<a href="https://blog.logrocket.com/getting-started-with-the-new-vue-cli-3-43bcbe1ae759/" target="_blank" rel="noopener noreferrer"> Vue CLI </a>搭建应用程序。</p>
<p>我们不会过多关注Vue.js如何工作，或者如何测试Vue应用。要想更深入地了解，请查看我们关于用Vue测试库测试Vue组件的教程<a href="https://blog.logrocket.com/testing-vue-components-with-vue-testing-library/" target="_blank" rel="noopener noreferrer">。</a></p>
<p>使用以下命令安装Vue CLI:</p>
<pre>npm install -g @vue/cli # for NPM
yarn add global @vue/cli # for yarn
</pre>
<p>通过运行<code>vue create auto-deploy</code>并选择以下选项，使用Vue CLI创建一个新项目:</p>
<p><img data-attachment-id="29982" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/options-to-create-new-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project.png" data-orig-size="730,227" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Options to create new project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project-300x93.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project.png" decoding="async" class="aligncenter size-full wp-image-29982 jetpack-lazy-image" src="../Images/54a8ecd3fdb959037289803a0b22663f.png" alt="The Options to Create a New Project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project-300x93.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29982" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/options-to-create-new-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project.png" data-orig-size="730,227" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Options to create new project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project-300x93.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29982" src="../Images/54a8ecd3fdb959037289803a0b22663f.png" alt="The Options to Create a New Project" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project-300x93.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/options-to-create-new-project.png"/></noscript>
<p>在代码编辑器中打开项目文件夹，删除<code>/src/components/HelloWorld.vue</code>组件。对于这个演示，我们将使用<code>/src/App.vue</code>组件构建一个简单的待办事项应用程序并为其编写测试。</p>
<p>在<code>App.vue</code>文件中，用下面的代码片段替换文件的内容:</p>
<pre>&lt;template&gt;
  &lt;div id="app"&gt;
    &lt;img alt="Vue logo" src="./assets/logo.png" /&gt;
    &lt;h1&gt;Todo app&lt;/h1&gt;
    &lt;div id="add-todos"&gt;
      &lt;input v-model="task" type="text" class="task-input" /&gt;
      &lt;button class="add-task-button" @click="addTask"&gt;Add Task&lt;/button&gt;
    &lt;/div&gt;
    &lt;div id="todos"&gt;
      &lt;ul&gt;
        &lt;li v-for="(todo, index) in todos" :key="index" class="todo-item"&gt;
          &lt;span&gt;{{ todo }}&lt;/span&gt;
          &lt;button class="delete-task-button" @click="deleteTask(todo)"&gt;Delete&lt;/button&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: "App",
  data() {
    return {
      task: "",
      todos: []
    };
  },
  methods: {
    addTask() {
      if (this.task !== "") {
        this.todos.push(this.task);
        this.task = "";
      }
    },
    deleteTask(todoItem) {
      this.todos = this.todos.filter(item =&gt; item !== todoItem);
    }
  }
};
&lt;/script&gt;

&lt;style&gt;
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
  padding: 20px;
  max-width: 500px;
  margin: auto;
}
.task-input {
  margin-right: 10px;
}
.todo-item {
  display: flex;
  justify-content: space-between;
  padding: 10px 20px;
  border: 1px solid #b9b9b9;
  margin-top: 4px;
}
&lt;/style&gt;
</pre>
<p>上面的代码片段是一个基本的待办事项应用程序，来自组件中的初始内容。当你在浏览器中访问<code>localhost:8080</code>时，你的应用应该是这样的:</p>
<p><img data-attachment-id="29983" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/todo-app-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view.png" data-orig-size="730,424" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Todo app view" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view-300x174.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view.png" decoding="async" class="aligncenter size-full wp-image-29983 jetpack-lazy-image" src="../Images/2acdad78568ba8dfb3e256cc3ce161fe.png" alt="Todo App Screenshot" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view-300x174.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29983" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/todo-app-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view.png" data-orig-size="730,424" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Todo app view" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view-300x174.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29983" src="../Images/2acdad78568ba8dfb3e256cc3ce161fe.png" alt="Todo App Screenshot" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view-300x174.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/todo-app-view.png"/></noscript>
<p>现在，您可以添加和删除待办事项。</p>
<h2 id="Setting-Up-Unit-Tests-In-Vuejs">在Vue.js中设置单元测试</h2>
<p>因为我们在创建项目时选择了单元测试选项，所以Vue CLI会自动为我们设置配置并安装一个名为<code><a href="https://vue-test-utils.vuejs.org/" target="_blank" rel="noopener noreferrer">vue-test-utils</a></code>的包。这个板条箱提供了类似于Vue中API的实用功能。我们可以使用这些实用函数与组件进行交互。</p>
<p>如果您查看根文件夹中的<code>package.json</code>文件，您应该在<code>scripts</code>键下看到这个命令:</p>
<pre>"test:unit": "vue-cli-service test:unit"
</pre>
<p>这是运行我们的单元测试的命令。如果您此时尝试运行该命令，您将在终端中看到一个预先编写好的测试运行。这是为了确保一切工作正常，我们的测试配置是正确的。</p>
<p>现在，我们将删除<code>/tests/</code>文件夹，并在项目的根目录下创建一个名为<code>__tests__</code>的新文件夹。Jest检查两个文件夹中的测试规范:<code>/tests/unit</code>和<code>__tests__</code>。都是喜好问题。对于本教程，我们将使用<code>__tests__</code>文件夹。</p>
<p>在新创建的文件夹中创建一个<code>App.spec.js</code>文件，并添加以下代码:</p>
<pre>import { mount } from "@vue/test-utils";
import App from "@/App.vue";
describe("App.vue", () =&gt; {
  it("should add a task when button is clicked", async () =&gt; {
    const wrapper = mount(App);
    const task = "Do laundry";
    wrapper.find("input.task-input").setValue(task);
    await wrapper.find("button.add-task-button").trigger("click");
    expect(wrapper.vm.$data.todos.indexOf(task)).toBeGreaterThan(-1);
  });
  it("should render the tasks", () =&gt; {
    const todos = ["pick up groceries", "buy guitar pick"];
    const wrapper = mount(App, {
      data() {
        return {
          todos
        };
      }
    });
    expect(wrapper.find("div#todos&gt;ul").text()).toContain(todos[0]);
  });
  it("should delete a task when the delete button is clicked", async () =&gt; {
    const todos = ["Order pizza for dinner"];
    const wrapper = mount(App, {
      data() {
        return {
          todos
        };
      }
    });
    await wrapper.find("button.delete-task-button").trigger("click");
    expect(wrapper.vm.$data.todos.indexOf(todos[0])).toEqual(-1);
  });
});
</pre>
<p>上面的代码是一个测试套件，用来确保我们的组件完全按照我们想要的方式运行。我们验证了添加新任务和删除任务是可行的，并且任务实际上呈现在页面上。</p>
<p>现在我们已经启动并运行了包含测试的应用程序，让我们在Netlify上部署我们的新应用程序，这样我们就可以从GitHub Actions设置部署。</p>
<p>一定要在GitHub上为你的应用创建一个新的资源库，并推送代码。在本指南的其余部分，我们将使用GitHub。</p>
<h2 id="Deploying-To-Netlify-With-GitHub-Actions">使用GitHub操作部署到Netlify</h2>
<p>进入官方网站创建一个账户，然后登录。</p>
<p>在你的仪表盘上，点击Git的<strong>新站点</strong>按钮，将你的GitHub账户连接到Netlify。</p>
<p>为您的新应用程序选择存储库，并使用下图中的相同配置:</p>
<p><img data-attachment-id="29984" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/configurations-for-new-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app.png" data-orig-size="730,307" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Configurations for new app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app-300x126.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app.png" decoding="async" class="aligncenter size-full wp-image-29984 jetpack-lazy-image" src="../Images/6e8ef278726965fadcb7e297f0c7fda4.png" alt="Configurations for New App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app-300x126.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29984" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/configurations-for-new-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app.png" data-orig-size="730,307" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Configurations for new app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app-300x126.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29984" src="../Images/6e8ef278726965fadcb7e297f0c7fda4.png" alt="Configurations for New App" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app-300x126.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/configurations-for-new-app.png"/></noscript>
<p>点击<strong>部署站点</strong>按钮，等待您的应用程序准备就绪。</p>
<p>您可以使用Netlify自动生成的链接打开您的应用程序。</p>
<h2 id="Prepping-For-Deployment-With-GitHub-Actions">使用Github操作准备部署</h2>
<p>Netlify提供了开箱即用的自动部署特性，但我们不想使用它；我们希望GitHub Actions在运行测试后代表我们处理部署。在某些情况下，您可能不希望在那个时刻部署更改—例如，如果某个功能仍在开发中，还没有准备好推出。</p>
<p>我们希望阻止Netlify在推送时自动构建和部署我们的应用程序，因为Netlify会在构建成功时进行部署。我们还想在我们的测试中考虑这个因素，所以我们将使用GitHub动作来完成这个任务。</p>
<h3>禁用Netlify上的生成</h3>
<p>第一步是停止在Netlify上构建。为此，请转到<strong>您站点的设置&gt;构建&amp;部署&gt;持续部署</strong>。点击<strong>构建设置</strong>部分下的<strong>编辑设置</strong>按钮，停止构建:</p>
<p><img data-attachment-id="29985" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/screenshot-showing-stop-builds-checkbox/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox.png" data-orig-size="730,231" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Stop builds checkbox" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox-300x95.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox.png" decoding="async" class="aligncenter size-full wp-image-29985 jetpack-lazy-image" src="../Images/e7932f73773151b6be214508b45aba28.png" alt="Screenshot Showing Stop Builds Checkbox" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox-300x95.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29985" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/screenshot-showing-stop-builds-checkbox/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox.png" data-orig-size="730,231" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Stop builds checkbox" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox-300x95.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29985" src="../Images/e7932f73773151b6be214508b45aba28.png" alt="Screenshot Showing Stop Builds Checkbox" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox-300x95.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/screenshot-showing-stop-builds-checkbox.png"/></noscript>
<h3>在GitHub上配置网络秘密</h3>
<p>现在我们已经禁用了Netlify上的构建，我们需要设置Netlify提供给我们的一些密钥。这些密钥将允许我们在Netlify之外部署我们的站点。</p>
<p>我们需要的两个主要密钥是个人访问令牌和我们新创建的站点的API ID。</p>
<p>该站点的API ID位于<strong>您的站点设置&gt;常规&gt;站点详情</strong>下:</p>
<p><img data-attachment-id="29986" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/api-id-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view.png" data-orig-size="730,294" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="API ID" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view-300x121.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view.png" decoding="async" class="aligncenter size-full wp-image-29986 jetpack-lazy-image" src="../Images/c3086a10f830ebc460e5ee4a48600c84.png" alt="API ID View" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view-300x121.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29986" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/api-id-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view.png" data-orig-size="730,294" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="API ID" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view-300x121.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29986" src="../Images/c3086a10f830ebc460e5ee4a48600c84.png" alt="API ID View" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view-300x121.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/api-id-view.png"/></noscript>
<p>你需要注意这一点，因为我们将复制并粘贴到GitHub上的应用库。别担心，很安全——你会看到的。</p>
<p>接下来，我们将生成一个个人访问令牌。请遵循以下步骤。</p>
<p>转到您帐户的设置。</p>
<p><img data-attachment-id="29987" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/account-settings-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view.png" data-orig-size="730,497" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Account settings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view-300x204.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view.png" decoding="async" class="aligncenter size-full wp-image-29987 jetpack-lazy-image" src="../Images/ed0fdc1caa36848696a7d161a7386d20.png" alt="Account Settings View" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view-300x204.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29987" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/account-settings-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view.png" data-orig-size="730,497" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Account settings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view-300x204.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29987" src="../Images/ed0fdc1caa36848696a7d161a7386d20.png" alt="Account Settings View" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view-300x204.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/account-settings-view.png"/></noscript>
<p>在<strong>应用&gt;个人访问令牌</strong>下，创建一个新的访问令牌，并给它一个描述性的名称。请确保在离开页面之前复制令牌。</p>
<p><img data-attachment-id="29988" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/how-to-create-new-access-token/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token.png" data-orig-size="730,288" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="How to create new access token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token-300x118.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token.png" decoding="async" class="aligncenter size-full wp-image-29988 jetpack-lazy-image" src="../Images/57007cb58cf655ab2209807e3c2b2398.png" alt="How to Create New Access Token" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token-300x118.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29988" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/how-to-create-new-access-token/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token.png" data-orig-size="730,288" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="How to create new access token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token-300x118.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29988" src="../Images/57007cb58cf655ab2209807e3c2b2398.png" alt="How to Create New Access Token" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token-300x118.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/how-to-create-new-access-token.png"/></noscript>
<p>令牌仅显示一次。如果你忘记复制它们，你将不得不创建新的。</p>
<p>打开你的应用程序库，导航到<strong>设置&gt;秘密</strong>，创建两个秘密。第一个，<code>NETLIFY_AUTH_TOKEN</code>用于您刚刚复制的个人访问令牌。第二个是<code>NETLIFY_SITE_ID</code>，用于您站点的API ID，它位于您站点的信息下面。</p>
<p><img data-attachment-id="29989" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/view-netlify-auth-token-site-id/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id.png" data-orig-size="730,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Netlify auth token and site ID" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id-300x159.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id.png" decoding="async" class="aligncenter size-full wp-image-29989 jetpack-lazy-image" src="../Images/2795fe441aa2244af02752648003e878.png" alt="View of Netlify Auth Token and Site ID" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id-300x159.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29989" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/view-netlify-auth-token-site-id/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id.png" data-orig-size="730,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Netlify auth token and site ID" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id-300x159.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29989" src="../Images/2795fe441aa2244af02752648003e878.png" alt="View of Netlify Auth Token and Site ID" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id-300x159.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/view-netlify-auth-token-site-id.png"/></noscript>
<p>你的秘密应该看起来像上面的截图。您还会注意到，这些秘密的值永远不会公开，对它们的访问也是有限的。</p>
<p>是时候设置GitHub Actions来为我们构建、测试和部署我们的Vue.js应用程序了。</p>
<h2 id="How-To-Use-GitHub-Actions">如何使用GitHub动作</h2>
<p>为了展示如何使用GitHub动作，我们将创建两个工作流。第一个将运行对<code>master</code>分支的pull请求，并构建、测试和合并代码到master。第二个将在对<code>master</code>分支的提交上运行，以构建、测试和部署我们的应用程序。</p>
<p>我之所以将工作流分开，是因为在某些情况下，您可能希望将提交从本地机器直接推送到主分支——热修复程序等等。无论我们做什么，我们都要确保不打破任何东西。</p>
<h3>创建自动部署工作流</h3>
<p>在您的代码编辑器中，在您的项目的根文件夹中创建一个目录结构，如下所示:<code>.github/workflows/</code>，并在<code>/workflows</code>文件夹中添加一个名为<code>autodeploy.yml</code>的文件。</p>
<p>复制下面的片段并粘贴到<code>autodeploy.yml</code>文件中:</p>
<pre>name: Auto Deploy
on:
  push:
    branches: [master] # run on pushes to master
jobs:
  build-and-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="482b202d2b23273d3c083e7a">[email protected]</a> # setup the repository in the runner
      - name: Setup Node.js # setup Node.js in the runner
        uses: actions/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7e0d1b0a0b0e5310111a1b3e084f">[email protected]</a>
        with:
          node-version: '12'
      - uses: actions/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="680b090b000d281e5a">[email protected]</a>
        with:
          path: ~/.npm
          key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
          restore-keys: ${{ runner.os }}-node-
      - run: npm ci # install dependencies
      - run: npm run build --if-present # build the project
      - run: npm run test:unit # run the tests
      # deploy site to netlify using secrets created on repository
      - uses: netlify/actions/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="27444b4e674a4654534255">[email protected]</a> 
        env:
          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
          NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
        with:
          args: deploy --dir=dist --prod
          secrets: '["NETLIFY_AUTH_TOKEN", "NETLIFY_SITE_ID"]'
</pre>
<p>在上面的工作流文件中，我们创建了一个作业<code>build-and-test</code>,其中包含一组要遵循的顺序步骤:</p>
<ol>
<li>在runner中设置我们的存储库</li>
<li>在流道中设置<a href="https://blog.logrocket.com/es-modules-in-node-js-12-from-experimental-to-release/" target="_blank" rel="noopener noreferrer"> Node.js v12 </a></li>
<li>检查是否有任何有效的缓存依赖项(以减少执行时间)</li>
<li>安装任何新的依赖项</li>
<li>尝试构建应用程序</li>
<li>尝试运行测试</li>
<li>如果前两步成功，使用我们生成并存储在存储库中的秘密令牌将应用部署到Netlify</li>
</ol>
<p>将更改提交并推送到GitHub，然后导航到存储库的<strong> Actions </strong>选项卡。您应该会看到工作流正在运行。完成后，您可以在Netlify上检查您站点的仪表板，以确定部署是否成功发布。</p>
<h3>创建自动合并工作流</h3>
<p>构建这个工作流不像前一个那样简单，因为我们必须考虑何时自动合并请求，何时不合并。</p>
<p>在我们开始创建工作流文件之前，我们需要在我们的存储库上再创建一个秘密，以授予action代表我们发出请求的权限。为此，我们需要GitHub上的个人访问令牌。</p>
<p>点击<a href="https://github.com/settings/tokens" target="_blank" rel="noopener noreferrer">这个链接</a>直接进入你的GitHub账户上的访问令牌页面，点击“生成新令牌”按钮，给它一个描述性的注释，比如“自动合并”。</p>
<p>在<strong>范围</strong>部分，只选择repo和workflow范围。</p>
<p><img data-attachment-id="29990" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/repo-checkbox/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox.png" data-orig-size="730,222" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Repo checkbox" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox-300x91.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox.png" decoding="async" class="aligncenter size-full wp-image-29990 jetpack-lazy-image" src="../Images/6969b0bfa2af856cb60d3eba5b1873df.png" alt="The Repo Checkbox" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox-300x91.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29990" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/repo-checkbox/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox.png" data-orig-size="730,222" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Repo checkbox" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox-300x91.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29990" src="../Images/6969b0bfa2af856cb60d3eba5b1873df.png" alt="The Repo Checkbox" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox-300x91.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/repo-checkbox.png"/></noscript>
<p><img data-attachment-id="29991" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/workflow-checkbox/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox.png" data-orig-size="730,186" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Workflow checkbox" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox-300x76.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox.png" decoding="async" class="aligncenter size-full wp-image-29991 jetpack-lazy-image" src="../Images/2cf6fecb9552f2a6be1a7d7320636a93.png" alt="The Workflow Checkbox" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox-300x76.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29991" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/workflow-checkbox/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox.png" data-orig-size="730,186" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Workflow checkbox" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox-300x76.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29991" src="../Images/2cf6fecb9552f2a6be1a7d7320636a93.png" alt="The Workflow Checkbox" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox-300x76.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-checkbox.png"/></noscript>
<p>点击<strong>生成令牌</strong>按钮，在离开页面前复制令牌。</p>
<p>在你的应用库中添加一个名为<code>PERSONAL_TOKEN</code>的新秘密，并返回到你的代码编辑器。</p>
<p>在<code>/workflows</code>文件夹中，创建一个名为<code>automerge.yml</code>的文件，并粘贴以下代码片段的内容:</p>
<pre>name: Auto Merge
on:
  pull_request:
    branches: [master] # run on pull requests to master branch
jobs:
  build-and-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="accfc4c9cfc7c3d9d8ecda9e">[email protected]</a> # setup repository in runner
      - name: Setup Node.js # setup Node.js un runner
        uses: actions/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4d3e2839383d60232229280d3b7c">[email protected]</a>
        with:
          node-version: '12'
      - uses: actions/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="365557555e53764004">[email protected]</a>
        with:
          path: ~/.npm
          key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
          restore-keys: ${{ runner.os }}-node-
      - run: npm ci # install dependencies
      - run: npm run build --if-present # build project
      - run: npm run test:unit # run tests
  mergepal-merge: # merge when build and testing is successful
    runs-on: ubuntu-latest
    needs:
      - build-and-test
    steps:
      - uses: actions/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="01626964626a6e7475417733">[email protected]</a>
      - uses: maxkomarychev/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d5b8b0a7b2b0f8a5b4b9f8b4b6a1bcbabb95a3e5fbe0fbe4">[email protected]</a>
        with:
          token: ${{secrets.PERSONAL_TOKEN}}
</pre>
<p>现在，我们已经成功地创建了自动合并拉请求的工作流，我们需要设置一些适当的条件，以便一切都按预期工作。</p>
<p>在你的应用的根文件夹中创建一个名为<code>.mergepal.yml</code>的文件，并粘贴以下代码片段:</p>
<pre>whitelist:
  - good-to-go
blacklist:
  - wip
method: merge #available options "merge" | "squash" | "rebase"
</pre>
<p>我们刚刚创建的文件是<code><a href="https://github.com/marketplace/actions/merge-pal" target="_blank" rel="noopener noreferrer">mergepal</a></code>的配置文件，这是我们添加到工作流中的一个可重用操作。配置决定了何时以及如何合并拉取请求。</p>
<ul>
<li><code>whitelist</code>可用于在GitHub上列出一些标签，这些标签将导致我们的拉取请求自动合并</li>
<li>在<code>blacklist</code>选项下添加的标签将阻止拉取请求被自动合并</li>
<li><code>method</code>使您能够为pull请求指定合并方法，就像在GitHub上一样</li>
</ul>
<h2 id="Pushing-Your-Repository-To-GitHub">将您的存储库推送到GitHub</h2>
<p>还有两件事要做:在GitHub上创建新标签，并将本地存储库推送到GitHub。</p>
<p>转到存储库的<strong> Pull requests </strong>选项卡，创建一个新表，如下所示:</p>
<p><img data-attachment-id="29992" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/pull-request-tab-new-table/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table.png" data-orig-size="730,304" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pull request tab new table" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table-300x125.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table.png" decoding="async" class="aligncenter size-full wp-image-29992 jetpack-lazy-image" src="../Images/c89ee132fce2d204e30d4d867114bd02.png" alt="Pull Request Tab to Create New Table" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table-300x125.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29992" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/pull-request-tab-new-table/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table.png" data-orig-size="730,304" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pull request tab new table" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table-300x125.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29992" src="../Images/c89ee132fce2d204e30d4d867114bd02.png" alt="Pull Request Tab to Create New Table" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table-300x125.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/pull-request-tab-new-table.png"/></noscript>
<p>最后一步是返回代码编辑器，将项目推送到GitHub存储库。应该已经触发了自动部署工作流。</p>
<p>为了测试automerge，在本地创建一个新的分支，并将这个分支推送到GitHub。创建一个拉取请求，并在提交前测试设置一个新创建的标签。</p>
<p>以下是工作流程的屏幕截图:</p>
<p><img data-attachment-id="29993" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/workflow-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example.png" data-orig-size="730,445" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Workflow example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example-300x183.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example.png" decoding="async" class="aligncenter size-full wp-image-29993 jetpack-lazy-image" src="../Images/fbbe02cdf94080e0ba69d7e66562b91d.png" alt="A Workflow Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example-300x183.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="29993" data-permalink="https://blog.logrocket.com/github-actions-how-to-autodeploy-your-app/workflow-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example.png" data-orig-size="730,445" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Workflow example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example-300x183.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-29993" src="../Images/fbbe02cdf94080e0ba69d7e66562b91d.png" alt="A Workflow Example" srcset="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example-300x183.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/workflow-example.png"/></noscript>
<p>你可以在<a href="https://github.com/Edmund1645/vue-auto-deploy-netlify" target="_blank" rel="noopener noreferrer"> GitHub </a>上访问这个库。</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的Vue应用</h2><p>调试Vue.js应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的Vue突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Vue应用程序中发生的一切，包括网络请求、JavaScript错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex插件将Vuex突变记录到LogRocket控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试Vue应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>