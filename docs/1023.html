<html>
<head>
<title>How to use Chromatic 2.0 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何使用Chromatic 2.0 - LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-use-chromatic-2-0/#0001-01-01">https://blog.logrocket.com/how-to-use-chromatic-2-0/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在过去几年中，前端web开发的复杂性增加了。构建一个可伸缩的、可靠的UI系统，并在各种设备和浏览器上运行，这是一个相当大的挑战。随着UI系统随着新组件、样式变化、新视口断点、覆盖等的扩展，维护变得越来越困难。如果没有可靠和定期的回归测试，bug会逐渐被引入到UI中，对可用性、可访问性、表示和可维护性产生负面影响。这些错误通常在代码发布后的产品中被发现，并在发布后立即被修复。</p>
<p>产品负责人、设计师、QA和其他团队成员通常会在视觉特性的工作完成后，对表示、UX、SEO和可访问性有一些额外的反馈。这些问题通常也是在代码交付生产后解决的。这些场景发生的频率比你想象的要高，甚至到了我们已经习惯了这种工作方式的程度——在将代码发布到产品中之后，逐渐修复、修改和改进UI。第一次就把UI组件做好似乎是一项困难的任务，所有的问题和反馈都要在将代码发布到产品之前解决。</p>
<p>在本文中，我们将找出Chromatic如何帮助我们解决这些让开发团队和产品所有者都头疼的问题。</p>
<h2>CSS和视觉回归测试</h2>
<p>我们正在进行回归测试，以确保我们的代码更改不会在项目的其他地方引起任何问题。由于CSS的<a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance" target="_blank" rel="noopener noreferrer">基本概念</a>(继承、特性和级联)，我们可以看到这是如何应用于CSS的。根据代码的结构，如果我们修改CSS中的一个元素，我们可能会以意想不到的方式影响更多的DOM元素。在过程的早期捕捉那些变化是困难的，因为这些测试和变化最终需要由人来验证。</p>
<p>例如，假设我们正在修改一个通用的<code>button</code> CSS类。假设这些变化适用于网站上的每个按钮是安全的。按钮可以出现在各种布局中，与输入等其他元素一起出现在不同的背景上。浏览所有按钮并检查按钮在所有支持的浏览器和分辨率下是否看起来都不错需要多少小时？</p>
<p>由于时间或预算的限制，我们通常无法可靠地测试那些变更。我们跳过它们，或者只对与任务相关的组件进行快速检查。通过这种方式，我们也逐渐将bug引入到我们的前端代码中，因为它们没有被注意到，并且只有在有人注意到它们出现在实时网站上时才修复它们。</p>
<p>在我们谈论Chromatic如何改进视觉回归测试工作流之前，我们必须先介绍一下Storybook。</p>
<h2>什么是故事书？</h2>
<p>如果您不熟悉Storybook或者没有机会使用它，<a href="https://storybook.js.org/" target="_blank" rel="noopener noreferrer"> Storybook </a>是一个工具，用于在独立于主项目环境的隔离环境中开发、记录和测试单个UI组件(也称为stories)。Storybook支持各种前端框架，如React、Vue、Angular、Svelte等。</p>
<p><img data-attachment-id="22284" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/storybookinstance/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance.png" data-orig-size="730,279" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="storybookinstance" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance-300x115.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance.png" decoding="async" class="aligncenter size-full wp-image-22284 jetpack-lazy-image" src="../Images/9fd564fb718f3025694e0830f3e9552d.png" alt="storybook instance" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance-300x115.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22284" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/storybookinstance/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance.png" data-orig-size="730,279" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="storybookinstance" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance-300x115.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22284" src="../Images/9fd564fb718f3025694e0830f3e9552d.png" alt="storybook instance" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance-300x115.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookinstance.png"/></noscript>
<p>例如，在一个复杂的项目中，开发人员可以在开发API端点时用Storybook中的模拟数据可视化地构建组件和屏幕(不同的状态和变化),并在端点准备就绪时将它们连接起来。此外，Storybook可以用于让新开发人员入门，以便他们可以快速熟悉可用的组件和项目结构。</p>
<p>Storybook还支持各种扩展基本功能的插件，并为开发人员提供更多的选项和控制。其中一个插件是<a href="https://github.com/storybookjs/storybook/tree/next/addons/docs" target="_blank" rel="noopener noreferrer"> docs插件</a>，它为Storybook增加了降价支持。它为Storybook组件提供了一个专用的文档选项卡，开发人员可以使用它来更详细地描述UI组件，而不仅仅是直观地显示它。</p>
<p>在一个隔离的环境中拥有单个UI组件的概述是有用的，但是这仍然没有解决视觉回归测试的主要问题——我们如何捕捉CSS中的变化影响了哪些UI组件和屏幕？此外，产品所有者、设计者和QA通常不能访问现成的故事书环境，因为它是开发环境的一部分。</p>
<h2>输入半音阶2.0</h2>
<p><a href="https://www.chromatic.com/" target="_blank" rel="noopener noreferrer"> Chromatic </a>是Storybook的云服务，旨在为UI开发和测试工作流程带来重大改进。由Storybook核心维护人员开发，它包括以下工具和功能:</p>
<ul>
<li><strong>团队共享故事书实例</strong>–故事书可以由整个团队发布、更新和查看</li>
<li><strong>文档</strong>–Chromatic使用Storybook构建一个UI组件库，它可以直观地概述可用的UI组件，简化测试，并作为团队成员之间反馈和同步的中心</li>
<li><strong>视觉回归测试</strong>——每次新故事书发布，Chromatic都会生成截图，并向整个团队展示修改内容以供审核。这种概述使团队成员能够及早发现并修复视觉错误，并对UI的任何更改提供反馈</li>
<li><strong> Git和CI支持</strong>–Chromatic可以与CI (Travis、CircleCI、Jenkins、Codeship)和Git (GitHub、Bitbucket、GitLab)集成，以改进版本控制和部署工作流</li>
</ul>
<p>除了付费计划，Chromatic还提供了一个免费账户计划，这对于在小规模的创业项目和小团队中尝试Chromatic非常有用。免费帐户计划包括上述所有核心功能，唯一的限制是每月快照数量(每月5，000张快照)，支持单一浏览器(Chrome)。组件快照的数量和支持的浏览器范围(Firefox和IE 11)随着付费计划而增加。</p>
<h2>半音阶2.0设置</h2>
<p>首先，让我们假设我们有一个安装了Storybook的项目，并且所有的Storybook组件都准备好了。我将继续使用GitHub作为我的项目库，并将其与Chromatic连接。在代码示例和截图中，我使用了我的开源React项目，<a href="https://recipe-magic.netlify.com/" target="_blank" rel="noopener noreferrer"> Recipe Magic </a>。我建立了一个故事书，上面有一些组件。</p>
<p>我们还假设故事书没有任何构建错误。为了检查这一点，我们需要确保以下命令不会抛出错误:</p>
<pre>npm run build-storybook</pre>
<p>现在我们准备在我们的项目上设置Chromatic，并准备发布我们的故事书供整个团队查看和评论。</p>
<p>首先，我们必须使用GitHub、Bitbucket或GitLab帐户在Chromatic上设置一个帐户。我不得不称赞Chromatic不需要信用卡就可以注册免费账户计划。<br/> <img data-attachment-id="22207" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/welcomepagechromatic/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic.png" data-orig-size="730,415" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="welcomepagechromatic" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic-300x171.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic.png" decoding="async" class="aligncenter size-full wp-image-22207 jetpack-lazy-image" src="../Images/cf3130f56e7d62c3862732252397f1ab.png" alt="I’ve used GitHub to signup and integrated Chromatic with my project repository" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic-300x171.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22207" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/welcomepagechromatic/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic.png" data-orig-size="730,415" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="welcomepagechromatic" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic-300x171.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22207" src="../Images/cf3130f56e7d62c3862732252397f1ab.png" alt="I’ve used GitHub to signup and integrated Chromatic with my project repository" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic-300x171.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/welcomepagechromatic.png"/></noscript>
<p>注册后，我们准备在我们的项目中设置半音阶:</p>
<pre>npm install --save-dev chromatic</pre>
<p>最后，我们需要发布Storybook实例。以下命令从Storybook运行build命令，将构建推送到Chromatic cloud service，并拍摄各个故事的快照:</p>
<pre>npx chromatic --project-token=&lt;your-project-token&gt;</pre>
<p><img data-attachment-id="22209" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/storybook-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook.png" data-orig-size="730,289" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="storybook" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook-300x119.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook.png" decoding="async" class="aligncenter size-full wp-image-22209 jetpack-lazy-image" src="../Images/185bb235cd611f970832d3a4838719e3.png" alt="Storybook being built and published" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/storybook-300x119.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22209" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/storybook-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook.png" data-orig-size="730,289" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="storybook" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook-300x119.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22209" src="../Images/185bb235cd611f970832d3a4838719e3.png" alt="Storybook being built and published" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/storybook-300x119.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/storybook.png"/></noscript><br/>
Our Storybook instance is now in sync with Chromatic. We can see the builds and snapshots show up on the Chromatic dashboard.
<p><img data-attachment-id="22211" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/storybookbuildsandsnapshotsareshowinguponchromaticdashboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard.png" data-orig-size="730,305" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="StorybookbuildsandsnapshotsareshowinguponChromaticdashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard-300x125.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard.png" decoding="async" class="aligncenter size-full wp-image-22211 jetpack-lazy-image" src="../Images/57cc740c4179b613e256df6838ebd5e1.png" alt="Storybook builds and snapshots are showing up on Chromatic dashboard" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard-300x125.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22211" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/storybookbuildsandsnapshotsareshowinguponchromaticdashboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard.png" data-orig-size="730,305" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="StorybookbuildsandsnapshotsareshowinguponChromaticdashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard-300x125.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22211" src="../Images/57cc740c4179b613e256df6838ebd5e1.png" alt="Storybook builds and snapshots are showing up on Chromatic dashboard" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard-300x125.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/StorybookbuildsandsnapshotsareshowinguponChromaticdashboard.png"/></noscript>
<p>该命令也可以添加到项目<code>package.json</code>文件中，以加速部署过程:</p>
<pre>"scripts": {
  "chromatic": "npx chromatic --project-token="
},</pre>
<h2>共享故事书实例和用户界面库</h2>
<p>Chromatic为每个已发布的版本发布一个现成的故事书实例。这允许团队成员查看单个UI组件并测试它们，而不需要在他们的机器上设置项目。</p>
<p>开箱即用，故事书不提供讨论和反馈的功能。Chromatic扩展了Storybook的基本功能，生成了一个UI库，其中的每个组件都成为讨论和反馈的中心。用户可以发布评论和任务，这些评论和任务可以标记为已解决，因为正在应用所请求的更改或错误修复。<br/> <img data-attachment-id="22214" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/recipemagic/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic.png" data-orig-size="730,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="recipemagic" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic.png" decoding="async" class="aligncenter size-full wp-image-22214 jetpack-lazy-image" src="../Images/faa1e7d361b041c1c63252274da70bc1.png" alt="Project UI Library overview" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic-300x194.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22214" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/recipemagic/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic.png" data-orig-size="730,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="recipemagic" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22214" src="../Images/faa1e7d361b041c1c63252274da70bc1.png" alt="Project UI Library overview" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic-300x194.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/recipemagic.png"/></noscript>
<p><img data-attachment-id="22215" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/storybookhierarchy/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy.png" data-orig-size="730,250" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="storybookhierarchy" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy-300x103.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy.png" decoding="async" class="aligncenter size-full wp-image-22215 jetpack-lazy-image" src="../Images/6e486281c83f8405def00e1f17b5f669.png" alt="UI Library also follows Storybook hierarchy" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy-300x103.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22215" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/storybookhierarchy/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy.png" data-orig-size="730,250" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="storybookhierarchy" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy-300x103.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22215" src="../Images/6e486281c83f8405def00e1f17b5f669.png" alt="UI Library also follows Storybook hierarchy" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy-300x103.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/storybookhierarchy.png"/></noscript>
<p>每个组件都有两个主视图和一个可选视图:</p>
<ul>
<li><strong>画布</strong>–交互式故事书渲染</li>
<li><strong>快照</strong>–在仪表板上发布构建之前由Chromatic捕获的图像</li>
<li><strong>文档(可选)</strong>–故事书文档。故事书需要<a href="https://github.com/storybookjs/storybook/tree/next/addons/docs" target="_blank" rel="noopener noreferrer">文档插件</a></li>
</ul>
<p><img data-attachment-id="22217" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/buttonfeedback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback.png" data-orig-size="730,389" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="buttonfeedback" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback-300x160.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback.png" decoding="async" class="aligncenter size-full wp-image-22217 jetpack-lazy-image" src="../Images/312c56e87edb6640565decb28ad24a4d.png" alt="Providing feedback on a button component" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback-300x160.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22217" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/buttonfeedback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback.png" data-orig-size="730,389" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="buttonfeedback" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback-300x160.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22217" src="../Images/312c56e87edb6640565decb28ad24a4d.png" alt="Providing feedback on a button component" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback-300x160.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonfeedback.png"/></noscript>
<p>我发现Chromatic UI库非常有用，它允许在组件级的构建和Git分支之间切换。它允许用户轻松地在组件的不同版本之间切换，并比较不同Git分支和构建之间的变化。</p>
<p><img data-attachment-id="22219" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/switching-between-individualbranches-andbuildsonacomponentlevel/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel.png" data-orig-size="1176,798" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Switching between individualbranches andbuildsonacomponentlevel" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel-300x204.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel-1024x695.png" decoding="async" class="aligncenter size-full wp-image-22219 jetpack-lazy-image" src="../Images/6d71e2561a4e9ebcc91632a1228baebd.png" alt="Switching between individual branches and builds on a component level" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel.png 1176w, https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel-300x204.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel-1024x695.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel-768x521.png 768w" data-lazy-sizes="(max-width: 1176px) 100vw, 1176px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22219" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/switching-between-individualbranches-andbuildsonacomponentlevel/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel.png" data-orig-size="1176,798" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Switching between individualbranches andbuildsonacomponentlevel" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel-300x204.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel-1024x695.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22219" src="../Images/6d71e2561a4e9ebcc91632a1228baebd.png" alt="Switching between individual branches and builds on a component level" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel.png 1176w, https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel-300x204.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel-1024x695.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel-768x521.png 768w" sizes="(max-width: 1176px) 100vw, 1176px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/Switching-between-individualbranches-andbuildsonacomponentlevel.png"/></noscript>
<h2>视觉回归测试</h2>
<p>视觉回归测试是Chromatic中的一个旗舰特性。它允许用户比较每个构建之间的视觉(表示)变化，检查它们，并提供反馈。每一个新的构建总是与先前接受的(评审的)构建进行比较。</p>
<p><img data-attachment-id="22221" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/publishedbuild/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild.png" data-orig-size="730,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="publishedbuild" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild.png" decoding="async" class="aligncenter size-full wp-image-22221 jetpack-lazy-image" src="../Images/8f382f248a85570352887659dadbc6bd.png" alt="Published build ready for review" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild-300x194.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22221" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/publishedbuild/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild.png" data-orig-size="730,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="publishedbuild" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22221" src="../Images/8f382f248a85570352887659dadbc6bd.png" alt="Published build ready for review" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild-300x194.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/publishedbuild.png"/></noscript>
<p>Chromatic生成单个组件和故事的快照(图像),并比较这些图像以检测变化。它具有各种diff选项，可以直观地比较每个新版本中故事的变化。</p>
<p>这个比较屏幕还显示DOM diff来捕捉标记中的任何变化，以便团队可以解决任何潜在的语法、语义、可访问性和SEO问题。</p>
<p><img data-attachment-id="22223" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/uipreview/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview.png" data-orig-size="730,424" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="uipreview" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview-300x174.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview.png" decoding="async" class="aligncenter size-full wp-image-22223 jetpack-lazy-image" src="../Images/3526fd2d6d0e4c0aa41590307a5b53d5.png" alt="Reviewing individual UI components, with changes marked with color on the right-hand side preview" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview-300x174.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22223" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/uipreview/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview.png" data-orig-size="730,424" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="uipreview" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview-300x174.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22223" src="../Images/3526fd2d6d0e4c0aa41590307a5b53d5.png" alt="Reviewing individual UI components, with changes marked with color on the right-hand side preview" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview-300x174.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/uipreview.png"/></noscript>
<h2>Git和CI集成</h2>
<p>Git和CI集成是任何寻求改进开发工作流的测试自动化工具的必备工具。</p>
<p>Git支持是现成的，可以很容易地从仪表板上启用并连接到Git repo。我在GitHub上测试了这个特性，发现Chromatic只需要一些<a href="https://www.chromatic.com/docs/access" target="_blank" rel="noopener noreferrer">额外的权限</a>(取决于Git平台)就可以访问Pull请求数据。</p>
<p>在给予Chromatic所需的权限后，拉请求状态检查显示Chromatic UI测试和审查状态。</p>
<p><img data-attachment-id="22226" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/chromatic-uiteststatusdisplayed-on-pullrequestongithub/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub.png" data-orig-size="730,370" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Chromatic UIteststatusdisplayed on PullRequestonGitHub" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub.png" decoding="async" class="aligncenter size-full wp-image-22226 jetpack-lazy-image" src="../Images/14b7a27692bf2bfa30eef01ce31e62b4.png" alt="Chromatic UI test status displayed on Pull Request on GitHub" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub-300x152.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22226" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/chromatic-uiteststatusdisplayed-on-pullrequestongithub/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub.png" data-orig-size="730,370" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Chromatic UIteststatusdisplayed on PullRequestonGitHub" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22226" src="../Images/14b7a27692bf2bfa30eef01ce31e62b4.png" alt="Chromatic UI test status displayed on Pull Request on GitHub" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub-300x152.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/Chromatic-UIteststatusdisplayed-on-PullRequestonGitHub.png"/></noscript>
<p>Chromatic提供了一个有用的pull requests overview页面，团队可以在这里获得与每个pull requests相关的UI测试状态的详细概述。例如，团队成员可以查看已审核批准的UI组件变更、已拒绝的UI组件变更、与PR构建相关的注释以及阻止合并拉请求的问题。</p>
<p><img data-attachment-id="22228" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/pullrequeststatus-onchromatic/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic.png" data-orig-size="1456,1064" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="PullRequeststatus onChromatic" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic-300x219.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic-1024x748.png" decoding="async" class="aligncenter size-full wp-image-22228 jetpack-lazy-image" src="../Images/16055ff08effbe743963d48b59552843.png" alt="Pull Request status on Chromatic" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic.png 1456w, https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic-300x219.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic-1024x748.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic-768x561.png 768w" data-lazy-sizes="(max-width: 1456px) 100vw, 1456px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22228" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/pullrequeststatus-onchromatic/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic.png" data-orig-size="1456,1064" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="PullRequeststatus onChromatic" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic-300x219.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic-1024x748.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22228" src="../Images/16055ff08effbe743963d48b59552843.png" alt="Pull Request status on Chromatic" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic.png 1456w, https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic-300x219.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic-1024x748.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic-768x561.png 768w" sizes="(max-width: 1456px) 100vw, 1456px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/PullRequeststatus-onChromatic.png"/></noscript>
<p>Chromatic可以很容易地与几个CI集成，如GitHub Actions、Circle CI、Travis CI和Jenkins，并在<a href="https://www.chromatic.com/docs/ci" target="_blank" rel="noopener noreferrer"> CI集成文档</a>中提供必要的说明和代码片段。</p>
<h2>彩色视觉回归测试</h2>
<p>让我们通过一个简单的场景来看看如何使用Chromatic进行可视化回归测试。</p>
<p>让我们假设QA已经注意到文本较短的按钮(例如“添加”)有一个小的可点击区域，并请求增加按钮宽度。前端开发人员需要确保这些按钮至少有200像素宽，以便可点击的区域更大。</p>
<p>然后，开发人员添加以下代码行，验证这些更改是否显示在这些特定的按钮上，创建一个拉请求，并在Chromatic上发布更新后的故事书。</p>
<pre>button {
    /* ... */
    min-width: 200px;
}</pre>
<p>改进了按钮UX，使其符合要求，这样代码就可以部署了，对吗？让我们看看半音阶对这种变化有什么看法。</p>
<p><img data-attachment-id="22232" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/sevenuicomponents/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents.png" data-orig-size="1328,1212" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="sevenuicomponents" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents-300x274.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents-1024x935.png" decoding="async" class="aligncenter size-full wp-image-22232 jetpack-lazy-image" src="../Images/74f33fa7bc73de97583b3cbf2f4ef47a.png" alt="Seven UI components have been updated for that single line of code" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents.png 1328w, https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents-300x274.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents-1024x935.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents-768x701.png 768w" data-lazy-sizes="(max-width: 1328px) 100vw, 1328px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22232" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/sevenuicomponents/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents.png" data-orig-size="1328,1212" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="sevenuicomponents" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents-300x274.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents-1024x935.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22232" src="../Images/74f33fa7bc73de97583b3cbf2f4ef47a.png" alt="Seven UI components have been updated for that single line of code" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents.png 1328w, https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents-300x274.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents-1024x935.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents-768x701.png 768w" sizes="(max-width: 1328px) 100vw, 1328px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/sevenuicomponents.png"/></noscript>
<figure id="attachment_22233" aria-describedby="caption-attachment-22233" class="wp-caption aligncenter"><img data-attachment-id="22233" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/buttonsarewider/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider.png" data-orig-size="978,700" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="buttonsarewider" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider-300x215.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider.png" decoding="async" class="wp-image-22233 size-medium jetpack-lazy-image" src="../Images/b051f15e9e647037345369dbe780e84b.png" alt="The buttons are indeed wider" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider-300x215.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider-768x550.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider.png 978w" data-lazy-sizes="(max-width: 300px) 100vw, 300px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider-300x215.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider-300x215.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="22233" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/buttonsarewider/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider.png" data-orig-size="978,700" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="buttonsarewider" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider-300x215.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider.png" decoding="async" loading="lazy" class="wp-image-22233 size-medium" src="../Images/b051f15e9e647037345369dbe780e84b.png" alt="The buttons are indeed wider" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider-300x215.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider-768x550.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider.png 978w" sizes="(max-width: 300px) 100vw, 300px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonsarewider-300x215.png"/></noscript><figcaption id="caption-attachment-22233" class="wp-caption-text">The buttons are indeed wider</figcaption></figure>
<p> </p>
<figure id="attachment_22234" aria-describedby="caption-attachment-22234" class="wp-caption aligncenter"><img data-attachment-id="22234" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/buttonandicon/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon.png" data-orig-size="612,626" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="buttonandicon" data-image-description="" data-image-caption="&lt;p&gt;This doesn’t look right&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon-293x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon.png" decoding="async" class="wp-image-22234 size-medium jetpack-lazy-image" src="../Images/eaf214068633a964bb779a05c0a78f6c.png" alt="button misplaced over icon" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon-293x300.png 293w, https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon.png 612w" data-lazy-sizes="(max-width: 293px) 100vw, 293px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon-293x300.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon-293x300.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="22234" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/buttonandicon/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon.png" data-orig-size="612,626" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="buttonandicon" data-image-description="" data-image-caption="&lt;p&gt;This doesn’t look right&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon-293x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon.png" decoding="async" loading="lazy" class="wp-image-22234 size-medium" src="../Images/eaf214068633a964bb779a05c0a78f6c.png" alt="button misplaced over icon" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon-293x300.png 293w, https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon.png 612w" sizes="(max-width: 293px) 100vw, 293px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buttonandicon-293x300.png"/></noscript><figcaption id="caption-attachment-22234" class="wp-caption-text">This doesn’t look right</figcaption></figure>
<p> </p>
<figure id="attachment_22236" aria-describedby="caption-attachment-22236" class="wp-caption aligncenter"><img data-attachment-id="22236" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/blurrybutton/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton.png" data-orig-size="976,576" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="blurrybutton" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton-300x177.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton.png" decoding="async" class="wp-image-22236 size-medium jetpack-lazy-image" src="../Images/b58ffa50659c52a96f75b7bb3258b0ba.png" alt="slider button rendering incorrectly " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton-300x177.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton-768x453.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton.png 976w" data-lazy-sizes="(max-width: 300px) 100vw, 300px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton-300x177.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton-300x177.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="22236" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/blurrybutton/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton.png" data-orig-size="976,576" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="blurrybutton" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton-300x177.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton.png" decoding="async" loading="lazy" class="wp-image-22236 size-medium" src="../Images/b58ffa50659c52a96f75b7bb3258b0ba.png" alt="slider button rendering incorrectly " srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton-300x177.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton-768x453.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton.png 976w" sizes="(max-width: 300px) 100vw, 300px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/blurrybutton-300x177.png"/></noscript><figcaption id="caption-attachment-22236" class="wp-caption-text">This also doesn’t look right</figcaption></figure>
<p>幸运的是，这个pull请求直到有人审查并批准了Chromatic上的更改后才被合并。如前所述，这种情况经常发生在较大规模的项目中——微小的CSS变化可能会导致倒退，而且在将代码部署到生产环境之前，这些变化通常不会被注意到。</p>
<p>QA可以标记被接受的和被拒绝的以及需要修复的组件更改。他们还可以对没有通过回归测试的单个组件提供详细的反馈。这种反馈有助于开发人员理解问题，重现问题，并快速有效地解决问题。</p>
<p><img data-attachment-id="22285" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/buildstatusafterreview/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview.png" data-orig-size="730,408" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="buildstatusafterreview" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview.png" decoding="async" class="aligncenter size-full wp-image-22285 jetpack-lazy-image" src="../Images/5847cfd227b487f7f217608757a33cde.png" alt="Build status after review" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22285" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/buildstatusafterreview/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview.png" data-orig-size="730,408" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="buildstatusafterreview" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22285" src="../Images/5847cfd227b487f7f217608757a33cde.png" alt="Build status after review" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/buildstatusafterreview.png"/></noscript>
<p><img data-attachment-id="22286" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/detailsoncomponents/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents.png" data-orig-size="730,362" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="detailsoncomponents" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents-300x149.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents.png" decoding="async" class="aligncenter size-full wp-image-22286 jetpack-lazy-image" src="../Images/81ad4e99bfc79639419330738ae55df9.png" alt="Providing detailed feedback on individual components that didn’t pass regression tests" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents-300x149.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22286" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/detailsoncomponents/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents.png" data-orig-size="730,362" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="detailsoncomponents" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents-300x149.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22286" src="../Images/81ad4e99bfc79639419330738ae55df9.png" alt="Providing detailed feedback on individual components that didn’t pass regression tests" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents-300x149.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/detailsoncomponents.png"/></noscript>
<p>一些复杂的问题可能需要额外的截图或视频来更容易地理解和再现它们。不幸的是，反馈输入只支持文本评论，没有任何媒体附件选项，所以视频和图像是使用外部文件共享服务的链接添加到反馈中的。</p>
<h2>故事书的彩色配置</h2>
<p>Chromatic为Storybook增加了几个选项，指导Chromatic如何生成快照，如何加载外部资源(字体、图像、外部CSS文件等)。)，它如何处理CSS和JavaScript动画，忽略哪些故事或DOM元素等。</p>
<p>还有一点很重要，不用说太多细节，Chromatic支持各种CLI(命令行界面)标志。这些标志控制Chromatic的行为和处理故事书构建的方式。我们已经提到了<code>--exit-zero-on-changes</code>标志，但是还有更多特定于各种用例的CLI选项。如果你感兴趣，我推荐你查看一下官方的Chromatic文档，找到你需要的CLI选项。正如我们所看到的，Chromatic易于设置，并且开箱即用，只需最少的配置。</p>
<p>让我们看看可以在故事书文件中设置的彩色选项。</p>
<h2>配置范围</h2>
<p>Storybook支持三种配置范围:</p>
<ul>
<li><strong>全局级别</strong>–选项将应用于所有故事</li>
<li><strong>组件级</strong>–选项将应用于故事书中的所有故事</li>
<li><strong>故事级别</strong>–选项将应用于故事书组件中的单个故事</li>
</ul>
<p>需要在一个<code>.storybook/preview.js</code>文件中设置故事书的全局彩色配置。我们只需要将包含<code>chromatic</code>属性的对象传递给<code>addParameters</code>故事书函数。</p>
<pre>import { addParameters } from '@storybook/react';

addParameters({ chromatic: { /* Chromatic config */ });</pre>
<p>要将彩色配置应用到一个故事书文件中的所有故事，我们需要在默认导出中为<code>parameters</code>对象添加<code>chromatic</code>属性:</p>
<pre>export default {
    /* Storybook config */
    parameters: {
        chromatic: { /* Chromatic config */ },
    }
}

/* Storybook Stories */</pre>
<p>我们可以用类似的方式为一个特定的故事设置色彩配置。我们只需要将相同的色度属性应用于各个故事对象的故事属性:</p>
<pre>/* Storybook Stories */
export const MyStory = () =&gt; &lt;Component /* Component props */ /&gt;;

MyStory.story = {
    /* Storybook config */
    parameters: {
        chromatic: { /* Chromatic config */ },
    }
};</pre>
<h2>响应快照</h2>
<p>正如本文介绍中所讨论的，我们正在不同的视口宽度上测试UI。默认情况下，Chromatic在桌面宽度上拍摄快照，但它提供了在不同视口宽度上拍摄组件快照的配置选项。</p>
<pre>parameters: {
    chromatic: { viewports: [320, 768, 1280] }
},</pre>
<p>在Chromatic上发布配置好的故事书后，新的快照会出现在构建中。Chromatic使用这些新快照进行可视化回归测试，其方式与前面的例子相同。</p>
<p><img data-attachment-id="22288" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/twocomponentsatdifferentscreenwidths/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths.png" data-orig-size="1230,988" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="twocomponentsatdifferentscreenwidths" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths-300x241.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths-1024x823.png" decoding="async" class="aligncenter size-full wp-image-22288 jetpack-lazy-image" src="../Images/eaa87f0d8972c3558894be8be6d80ba9.png" alt="Generated snapshots for two components at three different screen widths" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths.png 1230w, https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths-300x241.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths-1024x823.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths-768x617.png 768w" data-lazy-sizes="(max-width: 1230px) 100vw, 1230px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22288" data-permalink="https://blog.logrocket.com/how-to-use-chromatic-2-0/twocomponentsatdifferentscreenwidths/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths.png" data-orig-size="1230,988" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="twocomponentsatdifferentscreenwidths" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths-300x241.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths-1024x823.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22288" src="../Images/eaa87f0d8972c3558894be8be6d80ba9.png" alt="Generated snapshots for two components at three different screen widths" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths.png 1230w, https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths-300x241.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths-1024x823.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths-768x617.png 768w" sizes="(max-width: 1230px) 100vw, 1230px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/twocomponentsatdifferentscreenwidths.png"/></noscript>
<p>请注意，色度会为每个定义的视口宽度生成一个快照，这可能会增加快照的使用，因此请注意您的快照数量限制。</p>
<h2>处理CSS动画</h2>
<p>一些UI元素上可能有一些动画——无论它们是只运行一次还是重复运行的动画，它们都会影响Chromatic拍摄快照和检测变化的方式。</p>
<p>默认情况下，色度暂停第一个动画帧上的所有CSS动画。一些UI元素可以有一个进入动画(例如淡入动画)。如果Chromatic在开始帧暂停动画，DOM元素将不会显示在快照中，导致Chromatic无法检测到生成的组件快照中的任何更改。</p>
<p>我们可以指示半音阶在结束时暂停动画，而不是在开始时。这样，Chromatic会将当前动画帧设置为最后一帧，就像动画已经完成一样，并最终拍摄快照:</p>
<pre>parameters: {
  chromatic: { pauseAnimationAtEnd: true }
}</pre>
<h2>处理JavaScript动画</h2>
<p>尽管CSS动画对于<a href="https://blog.prototyp.digital/improving-css-performance-and-file-size-an-in-depth-guide/#improving-css-animation-performance" target="_blank" rel="noopener noreferrer">在大多数浏览器中获得最佳性能</a>是必不可少的，但CSS只支持简单的动画。如果UI有一个复杂的动画，或者动画需要对用户动作做出反应，该怎么办？在这些情况下，选择之一是使用JavaScript。</p>
<p>Chromatic <code>pauseAnimationAtEnd</code>参数不能影响JavaScript动画，所以我们需要对它们使用不同的方法。根据用例，添加一个简单的<code>delay</code>参数就足够了。例如，一个持续时间为1.5秒的复杂JavaScript淡入动画，我们需要将延迟参数值设置为接近该值的值:</p>
<pre>parameters: {
  chromatic: { delay: 1600 }, /* 1600ms = 1.6s */
},</pre>
<p>延迟的最大值是15000毫秒(15秒)。建议不要过度使用<code>delay</code>参数，这样半音阶的构建会尽可能快。</p>
<p><code>delay</code>参数也可用于确保加载所有外部资源(图像、字体、外部样式)。尽管如此，建议将这些资源添加到故事书测试中(<a href="https://www.chromatic.com/docs/resource-loading" target="_blank" rel="noopener noreferrer">与故事书</a>一起提供)以避免任何问题。例如，服务器可能会延迟响应，静态资源可能会被删除，或者URL可能会更改。</p>
<h2>检测代码是否在色度环境下运行</h2>
<p>出于这样或那样的原因，为JavaScript动画设置一个固定的延迟可能是不可能的。我们还会遇到一些场景，在拍摄快照时，有些用户动作或场景无法用Chromatic模拟。在这些情况下，我们可以检测特定的组件是否运行在Chromatic环境中，从而禁用那些阻止Chromatic可靠地拍摄UI组件快照的效果或功能。</p>
<p>色度模块包括<code>isChromatic</code>函数，该函数根据代码是否运行在色度环境中返回一个布尔值:</p>
<pre>import isChromatic from "chromatic/isChromatic";

export const StoryName = () =&gt; {
  const isChromaticEnv = isChromatic():

  if(isChromaticEnv) { /* ... */ }

  /* UI Component code */  
}
</pre>
<h2>从半音阶构件中排除组件或故事</h2>
<p>并不是故事书里的所有故事都是为了UI测试而设计的，需要包含在色彩构建和UI测试中。开发人员可以使用一个故事来测试或展示特定的过渡或动画，搭建页面或框架屏幕，或者使用它来处理一些尚未完全完成的元素，等等。</p>
<p>色度提供了一个参数，可用于指示色度忽略特定的故事或组件。这样，Chromatic就不会拍摄组件的快照，这将减少快照的使用，并根据情况简化UI测试审查:</p>
<pre>parameters: {
  chromatic: { disable: true }
}</pre>
<h2>忽略特定的DOM元素</h2>
<p>Chromatic还有一个忽略特定DOM元素的选项。例如，该参数可用于指示Chromatic忽略<code>iframe</code>元素、动画GIF图像、带有用于显示由来自API的JavaScript加载的媒体的<code>id</code>的空容器(例如，电子商务网站上的分数徽章)等。</p>
<p>默认情况下，Chromatic将忽略具有<code>chromatic-ignore</code> CSS类名或<code>data-chromatic="ignore"</code> HTML数据属性的DOM和HTML元素。</p>
<h2>彩色故事书配置示例</h2>
<p>在下面的示例中，header组件的Storybook包含两个故事:</p>
<ul>
<li><strong>默认</strong>–带有徽标、导航链接和搜索栏的默认标题</li>
<li><strong>最小</strong>–简化的标题，没有导航链接和搜索栏</li>
</ul>
<p>两个头都有一个进入CSS动画，所以我们使用<code>pauseAnimationAtEnd</code>将其设置为最后一帧。第一个故事在三个断点(最小的移动设备、最小的平板电脑和最小的桌面视窗宽度)具有不同的布局，第二个故事在两个断点(最小的移动设备和最小的平板电脑视窗宽度)具有不同的布局:</p>
<pre>/* header.story.js */

import React from 'react';
import { Header } from 'components';

export default {
    title: 'Header',
    component: Header,
    parameters: {
        chromatic: { 
          viewports: [320, 768, 1280], 
          pauseAnimationAtEnd: true 
        }
    }
};

export const Default = () =&gt; &lt;Header /&gt;;

export const Minimal = () =&gt; &lt;Header minimal /&gt;;

Minimal.story = {
  parameters: {
    chromatic: { viewports: [320, 768] }
  }
}
</pre>
<p>对于每次构建，Chromatic总共拍摄该组件的五个快照(第一个组件在三个视口处，第二个组件在两个视口宽度处)。</p>
<h2>结论</h2>
<p>视觉回归测试对于大型和更复杂的UI代码库是必不可少的。这些测试需要确保可以安全地添加新的UI特性和组件，而不会对当前UI造成任何意外问题。这些测试还需要覆盖组件可能拥有的各种视窗、浏览器和状态。</p>
<p>即使可以为回归测试建立自动化测试，它最终也需要由人来验证。像Chromatic这样的云服务可以通过在用户界面中只显示相关的变化来简化这个过程。</p>
<p>Chromatic看起来是不断增长的UI开发工具箱的一个很好的补充。通过允许团队尽早发现回归，简化和自动化UI测试，提供详细的UI文档和参考，并为整个团队提供一个收集单个UI组件反馈的中心点，它无疑为项目带来了价值。</p>
<p>如果你有兴趣，我会推荐你去试试。一个免费的账户更适合测试一个小项目(或者一个附带项目)的工作流程，并做出进一步的决定。</p>
<h2>参考</h2>
<p><a href="https://baseweb.design/blog/visual-regression-testing/" target="_blank" rel="noopener noreferrer">基础网络–视觉回归测试</a></p>
<p><a href="https://storybook.js.org/docs/basics/introduction/" target="_blank" rel="noopener noreferrer">故事书文档</a></p>
<p><a href="https://www.chromatic.com/docs/" target="_blank" rel="noopener noreferrer">彩色文档</a></p>
<p> </p><div class="code-block code-block-2">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>