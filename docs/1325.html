<html>
<head>
<title>Creating chart components in Vue with Chart.js - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用Chart.js在Vue中创建图表组件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/creating-chart-components-in-vue-with-chart-js/#0001-01-01">https://blog.logrocket.com/creating-chart-components-in-vue-with-chart-js/#0001-01-01</a></blockquote><div><article class="article-post">
<p>几乎不可避免的是，前端开发人员将不得不使用图表。从使用它在仪表板上显示数据分析，到使用它在网站上显示简单信息，您很可能会遇到需要以视觉愉悦的格式显示数据的情况。</p>
<p><a href="https://www.chartjs.org/" target="_blank" rel="noopener noreferrer"> Chart.js </a>是一个JavaScript库，帮助开发者创建简单灵活的图表。</p>
<p>在这个简短的教程中，我将向您展示如何使用Chart.js库为您的Vue应用程序创建图表组件。</p>
<h3>入门指南</h3>
<p>我们将创建一个可以呈现条形图和折线图的图表组件。</p>
<blockquote><p>注意:在我们开始之前，请确保在您的计算机上安装了Node.js、Vue和Vue CLI。你可以从<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer">这里</a>安装Node.js，按照<a href="https://cli.vuejs.org/guide/installation.html" target="_blank" rel="noopener noreferrer">安装Vue CLI </a>的说明进行操作。</p></blockquote>
<p>首先，让我们创建一个新的Vue项目:</p>
<pre>vue create vue-chart</pre>
<p>您可以选择预设或选择任何适合您的选项。<br/>下一步是将Charts.js添加到项目中:</p>
<pre>cd vue-chart
npm install chart.js --save</pre>
<p>要运行项目，请使用以下命令:</p>
<pre>npm run serve</pre>
<p>完成之后，删除<code>src/components</code>中默认的<code>HelloWorld.vue</code>组件，以及<code>App.vue</code>组件中与之相关的所有内容。</p>
<h2>创建我们的图表组件</h2>
<p>要开始创建图表，让我们在components文件夹中创建一个组件。我们可以将组件命名为“Chart.vue”。在你的模板中使用Chart.js所需要的就是canvas元素。</p>
<pre>&lt;template&gt;
   &lt;div&gt;
     &lt;canvas&gt;&lt;/canvas&gt;
   &lt;/div&gt;
&lt;/template&gt;</pre>
<p>通过将Chart.js放入脚本标记中，将其导入到组件中:</p>
<pre>import Chart from "chart.js";</pre>
<p>接下来，我们将为图表创建<code>constructor</code>方法。这个函数的作用是从我们的模板中获取canvas元素，然后创建一个<code>chart</code>类的新实例。然后，它将<code>canvas</code>元素作为第一个参数传递，并将<code>object</code>作为第二个参数传递。我们一会儿将谈到那个物体。</p>
<pre>chartConstructor(chartType, chartData, chartOptions) {
    const chartElement = document.querySelector("canvas");
    const chart = new Chart(chartElement, {
    type: chartType,
    data: chartData,
    options: chartOptions,
  });
},</pre>
<p>您会注意到我们作为第二个参数传递的对象有3个属性:<code>type</code>、<code>data</code>和<code>options</code>，它们的值是函数的参数。</p>
<p>在Chart.js中，对象中需要的3个主要属性就是我上面列出的。</p>
<p><code>Type</code>是一个简单的字符串，告诉你想要创建什么样的图表。例子包括“线”、“甜甜圈”、“条”等。</p>
<p><code>Data</code>是一个具有两个属性或标签的对象，这两个属性或标签是图表值的标签数组。</p>
<p>另一个是<code>datasets</code>，这是一个为每个数据集接收对象的数组。你可以在<a href="https://www.chartjs.org/docs/latest/charts/line.html#dataset-properties" target="_blank" rel="noopener noreferrer">文档</a>中查看它的一些属性。</p>
<p>下面是一个关于折线图中的<code>data</code>对象的示例:</p>
<pre>data: {
    labels: ["Jan1", "Jan2", "Jan3", "Jan4", "Jan5", "Jan6", "Jan7"],
    datasets: [
      {
        label: "This week",
        data:  [12, 19, 10, 17, 6, 3, 7],
        backgroundColor: "rgba(224, 248, 255, 0.4)",
        borderColor: "#5cddff",
        lineTension: 0,
        pointBackgroundColor: "#5cddff",
      },
      {
        label: "Last week",
        data:  [10, 25, 3, 25, 17, 4, 9],
        backgroundColor: "rgba(241, 225, 197, 0.4)",
        borderColor: "#ffc764",
        lineTension: 0,
        pointBackgroundColor: "#ffc764",
      },
    ],
  },</pre>
<p><code>Options</code>用于设置图表的配置，如动画、布局、图例等。</p>
<p>在我们的组件中，我们将创建组件将接收数据并将其传递给图表构造器的道具。</p>
<pre>props:{
  chartType:String,
  chartData:Object,
  chartOptions:Object
},</pre>
<p>让我们在组件挂载时调用图表构造函数，并为其参数提供来自props的数据:</p>
<pre>mounted(){
  let {chartType,chartData,chartOptions} = this;
  this.chartConstructor(chartType, chartData, chartOptions);
}</pre>
<p>这样，我们的图表组件就完成了。我们可以在任何地方导入它，并将必要的数据传递给道具，我们的图表就会变得栩栩如生。</p>
<h3>例子</h3>
<p>这是一个完整的折线图示例。</p>
<p>我们导入我们的图表组件，并用props声明它，如下所示:</p>
<pre>&lt;template&gt;
  &lt;div class="chart"&gt;
    &lt;Chart 
    :chartData="chartData" 
    :chartOptions="chartOptions" 
    :chartType="chartType" /&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre>
<p>在我们的数据中，我们给出了<code>chartData</code>的值:</p>
<pre>chartType: "line",</pre>
<p>我们的<code>chartData</code>看起来是这样的:</p>
<pre>chartData: {
        labels: 
          ["Jan1", "Jan2", "Jan3", "Jan4", "Jan5", "Jan6",  "Jan7"],
        datasets: [
          {
            label: "This week",
            data: [12, 19, 10, 17, 6, 3, 7],
            backgroundColor: "rgba(224, 248, 255, 0.4)",
            borderColor: "#5cddff",
            lineTension: 0,
            pointBackgroundColor: "#5cddff",
          },
          {
            label: "Last week",
            data: [10, 25, 3, 25, 17, 4, 9],
            backgroundColor: "rgba(241, 225, 197, 0.4)",
            borderColor: "#ffc764",
            lineTension: 0,
            pointBackgroundColor: "#ffc764",
          },
        ],
      },</pre>
<p>在一个真实的应用程序中，我们的<code>datasets</code>对象中的数据可能来自一个API。</p>
<p>最后，我们的<code>chartOptions</code>:</p>
<pre>chartOptions: {
        scales: {
          xAxes: [
            {
              stacked: true,
              gridLines: { display: false },
            },
          ],
          yAxes: [
            {
              ticks: {
                stepSize: 1,
                callback: function(value, index, values) {
                  if (value % Math.round(values[0] / 6) == 0) {
                    return value;
                  } else if (value === 0) {
                    return value;
                  }
                },
              },
              // stacked: true
            },
          ],
        },
        maintainAspectRatio: false,
        legend: {
          labels: {
            boxWidth: 10,
          },
          position: "top",
        },
        animation: {
          duration: 2000,
          easing: "easeInOutQuart",
        },
      },</pre>
<blockquote><p>注意:您在这里看到的值只是我的偏好，请随意试验和尝试其他东西。</p></blockquote>
<h2>结论</h2>
<p>我们构建的是一个简单的图表组件。您可以添加更多的内容，使其更加灵活和复杂，这可能会让您有能力接受更多的值。</p>
<p>我希望这能帮助你在你的项目中添加惊人的图表。</p>
<p>要查看所有内容并详细查看其他示例，您可以浏览此<a href="https://github.com/Ajiva-D/vuecharts" target="_blank" rel="noopener noreferrer">回购</a>。</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的Vue应用</h2><p>调试Vue.js应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的Vue突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Vue应用程序中发生的一切，包括网络请求、JavaScript错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex插件将Vuex突变记录到LogRocket控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试Vue应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>