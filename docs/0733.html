<html>
<head>
<title>How to create a custom toast component with React - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何用React - LogRocket博客创建一个定制的toast组件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/#0001-01-01">https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Toast通知是向用户显示信息的类模态元素，通常以按钮或另一种行动号召的形式出现。显示的消息往往很简短，有时会通过用户操作删除或设置为自动过期。最重要的是，toast通知不会干扰用户与您的应用程序的交互，无论他们使用的是桌面还是移动设备。</p>
<p>开发人员通常使用toast通知来显示以下内容:</p>
<ul>
<li>表单提交或API请求成功时的成功消息</li>
<li>API请求失败时的错误消息</li>
<li>聊天信息</li>
</ul>
<p>在本教程中，我将演示如何用React创建一个定制的toast组件。我们将使用React挂钩，如<code>useState</code>和<code>useEffect</code>。在创建了toast组件之后，我们将添加一些简单的按钮来测试并在页面上显示toast。</p>
<p>下面是我们创建并调用toast通知后的样子:</p>
<p><img data-attachment-id="15420" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-notification/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification.png" data-orig-size="452,419" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Completed toast notifications" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification.png" decoding="async" class="aligncenter size-full wp-image-15420 jetpack-lazy-image" src="../Images/6f9f99ddc854a42c01f0f4c63fc0fd66.png" alt="Completed Toast Notifications" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification.png 452w, https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification-300x278.png 300w" data-lazy-sizes="(max-width: 452px) 100vw, 452px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15420" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-notification/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification.png" data-orig-size="452,419" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Completed toast notifications" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15420" src="../Images/6f9f99ddc854a42c01f0f4c63fc0fd66.png" alt="Completed Toast Notifications" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification.png 452w, https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification-300x278.png 300w" sizes="(max-width: 452px) 100vw, 452px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-notification.png"/></noscript>
<p>你可以在<ins> <a href="https://github.com/uzochukwueddie/react-toast" target="_blank" rel="noopener noreferrer"> GitHub repo </a> </ins>中参考本教程的完整源代码。</p>
<p>在我们创建了一些触发toast通知的按钮后，页面应该如下所示:</p>
<p><img data-attachment-id="15423" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/buttons-trigger-toast-notification/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/buttons-trigger-toast-notification.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Buttons to trigger a toast notification" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/buttons-trigger-toast-notification-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/buttons-trigger-toast-notification.gif" decoding="async" class="aligncenter size-full wp-image-15423 jetpack-lazy-image" src="../Images/14d2de324819c7d8bb789560c87fa146.png" alt="Buttons to Trigger a Toast Notification" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/buttons-trigger-toast-notification.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/buttons-trigger-toast-notification.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15423" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/buttons-trigger-toast-notification/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/buttons-trigger-toast-notification.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Buttons to trigger a toast notification" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/buttons-trigger-toast-notification-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/buttons-trigger-toast-notification.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15423" src="../Images/14d2de324819c7d8bb789560c87fa146.png" alt="Buttons to Trigger a Toast Notification" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/buttons-trigger-toast-notification.gif"/></noscript>
<p>最后，我们将演示如何自动删除toast通知。</p>
<p><img data-attachment-id="17629" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/auto-delete-after-three-seconds-2-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-2-2.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Auto-delete after three seconds" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-2-2-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-2-2.gif" decoding="async" class="aligncenter size-full wp-image-17629 jetpack-lazy-image" src="../Images/7cf80509ac16c98c896743232edd4925.png" alt="Auto-Delete After Three Seconds" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-2-2.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-2-2.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17629" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/auto-delete-after-three-seconds-2-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-2-2.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Auto-delete after three seconds" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-2-2-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-2-2.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-17629" src="../Images/7cf80509ac16c98c896743232edd4925.png" alt="Auto-Delete After Three Seconds" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-2-2.gif"/></noscript>
<p>让我们开始吧！</p>
<h2 id="gettingstarted">入门指南</h2>
<p>为了演示如何创建定制的toast组件，我们必须首先创建一个React应用程序。我假设你的电脑上已经安装了<a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer"> Node.js </a>。Node.js附带npm，我们将使用<a href="https://blog.logrocket.com/getting-started-with-create-react-app-d93147444a27/" target="_blank" rel="noopener noreferrer"> <code>create-react-app</code> </a>和npx来构建我们的React应用程序。</p>
<p>打开终端，导航到您想要添加项目的目录，然后键入以下内容。</p>
<pre>npx create-react-app react-toast</pre>
<p>您可以随意命名该项目。我们不会在项目中安装任何其他模块；我们将简单地使用由<code>create-react-app</code>工具添加的模块。</p>
<p>默认的文件夹结构如下。</p>
<p><img data-attachment-id="15446" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-default-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure.png" data-orig-size="374,510" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Default folder structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure-220x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure.png" decoding="async" class="aligncenter size-full wp-image-15446 jetpack-lazy-image" src="../Images/af91ced592569132ed2f8190ec8be57c.png" alt="Default Folder Structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure.png 374w, https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure-220x300.png 220w" data-lazy-sizes="(max-width: 374px) 100vw, 374px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15446" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-default-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure.png" data-orig-size="374,510" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Default folder structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure-220x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15446" src="../Images/af91ced592569132ed2f8190ec8be57c.png" alt="Default Folder Structure" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure.png 374w, https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure-220x300.png 220w" sizes="(max-width: 374px) 100vw, 374px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-default-folder-structure.png"/></noscript>
<p>文件夹是我们完成大部分工作的地方。在<code>src</code>中，创建一个名为<code>components</code>的新文件夹。我们将把我们的toast和button组件添加到这个文件夹中。</p>
<p>在React中，您可以使用类组件，这需要您扩展一个<code>React.Component</code>并创建一个返回React元素的呈现函数，也可以使用函数组件，这只是接受props并返回React元素的普通JavaScript函数。我们将在本教程中使用功能组件。<code>create-react-app</code>默认使用功能组件。</p>
<p>在<code>App.js</code>组件内部，您可以删除header元素的内容，并用<code>className="app-header"</code>将标题更改为div。父元素类应该改为<code>app</code>。我们还会把函数改成箭头函数(这只是我个人的喜好；如果您愿意，可以随意使用默认功能)。</p>
<pre>import React from 'react';

import './App.css';

const App = () =&gt; {
    return (
        &lt;div className="app"&gt;
            &lt;div className="app-header"&gt;

            &lt;/div&gt;
        &lt;/div&gt;
    );
}
export default App;
</pre>
<p>接下来，将CSS样式添加到<code>App.css</code>文件中。删除<code>App.css</code>的内容，并将样式添加到文件中。你可以从<a href="https://github.com/uzochukwueddie/react-toast/blob/master/src/App.css" target="_blank" rel="noopener noreferrer"> GitHub </a>获得CSS样式。</p>
<p>CSS文件中的某些带有样式的元素尚未添加。随着我们的进展，我们将添加这些元素。这些样式由一些简单的CSS属性组成。</p>
<p>删除<code>index.css</code>的内容，增加以下内容。</p>
<pre>@import url('https://fonts.googleapis.com/css?family=Roboto&amp;display=swap');
body {
  margin: 0;
  font-family: 'Roboto', 'sans-serif';
}
</pre>
<h2 id="toastcomponent">创建toast组件</h2>
<p>要创建一个toast组件，在<code>components</code>目录下创建一个名为<code>toast</code>的文件夹，并添加两个文件:<code>Toast.js</code>和<code>Toast.css</code>。我们正在使用。我们的JavaScript文件和CSS的js扩展名——可选地，您可以使用JSX和s CSS文件。</p>
<p><img data-attachment-id="15447" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/create-toast-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/create-toast-component.png" data-orig-size="301,87" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating a toast component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/create-toast-component.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/create-toast-component.png" decoding="async" class="aligncenter size-full wp-image-15447 jetpack-lazy-image" src="../Images/f6c7c5c69c332a68b4f98bda7394df03.png" alt="Creating a Toast Component" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/create-toast-component.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/create-toast-component.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15447" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/create-toast-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/create-toast-component.png" data-orig-size="301,87" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating a toast component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/create-toast-component.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/create-toast-component.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15447" src="../Images/f6c7c5c69c332a68b4f98bda7394df03.png" alt="Creating a Toast Component" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/create-toast-component.png"/></noscript>
<p>在<code>Toast.js</code>文件中，创建一个名为<code>Toast</code>的箭头函数，并将导出函数设置为<code>default</code>。将父元素设置为空标记。</p>
<pre>import React from 'react';
const Toast = () =&gt; {
    return (
        &lt;&gt;

        &lt;/&gt;
    )
}
export default Toast;
</pre>
<p>该函数将始终返回一个React元素。要添加的第一个元素是通知容器，它将包装将要显示的每个toast通知元素。</p>
<pre>&lt;div className="notification-container"&gt;
&lt;/div&gt;
</pre>
<p>稍后，我们将添加一个动态属性来显示通知容器的位置。我们将在容器中添加其他元素来显示按钮、图像、标题和消息。</p>
<pre>&lt;div className="notification toast"&gt;
    &lt;button&gt;
        X
    &lt;/button&gt;
    &lt;div className="notification-image"&gt;
        &lt;img src="" alt="" /&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;p className="notification-title"&gt;Title&lt;/p&gt;
        &lt;p className="notification-message"&gt;Message&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;
</pre>
<p>该按钮将用于关闭特定的烤面包通知。将根据烤面包的类型显示一个图像图标。我们最终将得到四种类型的烤面包:</p>
<ol>
<li>成功</li>
<li>危险</li>
<li>信息</li>
<li>警告</li>
</ol>
<p>将<code>Toast.css</code>文件导入到组件中，并将下面的<code>notification-container</code>CSS样式添加到<code>Toast.css</code>文件中。</p>
<pre>.notification-container {
    font-size: 14px;
    box-sizing: border-box;
    position: fixed;
}
</pre>
<p>吐司元素有四种不同的位置:</p>
<ol>
<li>右上方</li>
<li>右下方</li>
<li>左上角</li>
<li>左下方</li>
</ol>
<p>以下是该职位的CSS样式。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<pre>.top-right {
    top: 12px;
    right: 12px;
    transition: transform .6s ease-in-out;
    animation: toast-in-right .7s;
}

.bottom-right {
    bottom: 12px;
    right: 12px;
    transition: transform .6s ease-in-out;
    animation: toast-in-right .7s;
}

.top-left {
    top: 12px;
    left: 12px;
    transition: transform .6s ease-in;
    animation: toast-in-left .7s;
}

.bottom-left {
    bottom: 12px;
    left: 12px;
    transition: transform .6s ease-in;
    animation: toast-in-left .7s;
}
</pre>
<p>这些位置将根据用户添加到toast组件的<code>position props</code>动态添加。</p>
<p>接下来的CSS样式用于样式化notification类，它包含remove按钮、图像、标题、消息和动画，用于在页面的左侧或右侧滑动toast。从<a href="https://github.com/uzochukwueddie/react-toast/blob/master/src/components/toast/Toast.css" target="_blank" rel="noopener noreferrer"> GitHub repo </a>中复制样式并添加到<code>Toast.css</code>文件中。</p>
<p>为了查看toast组件是什么样子，让我们应用一些属性，比如<code>position</code>，作为<code>props</code>在toast组件中传递。</p>
<p><code>Props</code>或<code>properties</code>，用于在React中将数据从一个组件传递到另一个组件。</p>
<p>toast组件接受两个道具:<code>toastList</code>和<code>position</code>。<code>toastList</code>代表一个包含对象的数组，<code>position</code>决定了通知容器在页面上的位置。让我们给<code>Toast</code>函数添加一个<code>props</code>参数，然后使用ES6对象<code>destructing</code>来获得<code>toastList</code>和<code>position</code>道具。</p>
<pre>const Toast = (props) =&gt; {
    const { toastList, position } = props;

    return (
        &lt;&gt;
            ...
        &lt;/&gt;
    )
}
export default Toast;
</pre>
<p>要使用<code>position</code>道具，将其添加到带有<code>notification-container</code>的<code>className</code>的元素中。从<code>notification-container</code>中删除类，然后添加:</p>
<pre>className={`notification-container ${position}`}
</pre>
<p>接下来，从notification div中删除该类，并添加以下内容。</p>
<pre>className={`notification toast ${position}`}
</pre>
<p>无论position prop被传递到toast组件中，它都将作为一个类被添加到这些元素中(回想一下，我们已经在CSS文件中设置了CSS position属性)。</p>
<p>因为<code>toastList</code>是一个数组，我们可以在HTML中直接循环它，但是我不打算这么做。相反，我将使用<code>useState</code>钩子来创建一个新的属性。<a href="https://reactjs.org/docs/hooks-reference.html#usestate" target="_blank" rel="noopener noreferrer"> <code>useState</code> </a>允许你创建一个有状态变量和一个函数来更新它。</p>
<p>首先，从React导入<code>useState</code>和<code>useEffect</code>钩子，其中<code>useState</code>将用于创建一个变量和一个更新变量的函数。当需要重新渲染时，将调用<code>useEffect</code>钩子。</p>
<pre>import React, { useState, useEffect } from 'react';
</pre>
<p>在道具破坏后加上这个:</p>
<pre>const [list, setList] = useState(toastList);
</pre>
<p>无论<code>toastList</code>数组的默认值是什么，<code>useState</code>列表的默认值将是什么。</p>
<p>添加<code>useEffect</code>方法并使用<code>setList</code>来更新列表属性。</p>
<pre>useEffect(() =&gt; {
    setList(toastList);
}, [toastList, list]);
</pre>
<p><code>useEffect</code>钩子接受一个函数和一个依赖数组。每当一个新的对象被添加到作为道具传递的<code>toastList</code>数组时，<code>setList</code>方法被用来更新列表数组。该数组由依赖项组成，每当这些依赖项的值发生变化时都会被监视。换句话说，当依赖关系数组中的值有更新时，总是会调用<code>useEffect</code>方法。</p>
<p>让我们遍历HTML中的列表数组。我们将使用<code>map</code>方法来遍历数组。</p>
<pre>import React, { useState, useEffect } from 'react';

import './Toast.css';

const Toast = props =&gt; {
    const { toastList, position } = props;
    const [list, setList] = useState(toastList);

    useEffect(() =&gt; {
        setList(toastList);
    }, [toastList, list]);

    return (
        &lt;&gt;
            &lt;div className={`notification-container ${position}`}&gt;
                {
                    list.map((toast, i) =&gt;     
                        &lt;div 
                            key={i}
                            className={`notification toast ${position}`}
                        &gt;
                            &lt;button&gt;
                                X
                            &lt;/button&gt;
                            &lt;div className="notification-image"&gt;
                                &lt;img src={toast.icon} alt="" /&gt;
                            &lt;/div&gt;
                            &lt;div&gt;
                                &lt;p className="notification-title"&gt;{toast.title}&lt;/p&gt;
                                &lt;p className="notification-message"&gt;
                                    {toast.description}
                                &lt;/p&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    )
                }
            &lt;/div&gt;
        &lt;/&gt;
    );
}
</pre>
<p>将被添加到<code>toastList</code>数组的对象的结构如下所示:</p>
<pre>{
    id: 1,
    title: 'Success',
    description: 'This is a success toast component',
    backgroundColor: '#5cb85c',
    icon: ''
}
</pre>
<p>我们将动态添加吐司的背景颜色。为此，我们需要向通知元素添加一个样式属性。在具有类<code>notification toast</code>的元素上，添加一个将使用列表中的<code>backgroundColor</code>的样式属性。在<code>className</code>之后加上它。</p>
<pre>style={{ backgroundColor: toast.backgroundColor }}
</pre>
<p>现在让我们在<code>App</code>组件中使用这个组件。进入<code>App</code>组件并导入<code>toast</code>组件。</p>
<pre>import Toast from './components/toast/Toast';
</pre>
<p>在类名为<code>app-header</code>的div元素之后，添加<code>toast</code>组件。</p>
<pre>&lt;Toast /&gt;
</pre>
<p>现在我们需要将道具传递给<code>toast</code>组件。去<a href="https://github.com/uzochukwueddie/react-toast/tree/master/src/assets" target="_blank" rel="noopener noreferrer"> GitHub repo </a>下载吐司图标的SVG文件。在src文件夹中创建一个名为<code>assets</code>的新目录，并添加所有的SVG文件。</p>
<p>将导入添加到<code>App</code>组件。</p>
<pre>import checkIcon from './assets/check.svg';
import errorIcon from './assets/error.svg';
import infoIcon from './assets/info.svg';
import warningIcon from './assets/warning.svg';
</pre>
<p>每个图标将用于以下一种类型的toast通知:<code>success</code>、<code>danger</code>、<code>info</code>和<code>warning</code>。</p>
<p>为了试验toast组件，将这个数组添加到<code>App</code>组件中(这只是为了测试)</p>
<pre>const testList = [
    {
      id: 1,
      title: 'Success',
      description: 'This is a success toast component',
      backgroundColor: '#5cb85c',
      icon: checkIcon
    },
    {
      id: 2,
      title: 'Danger',
      description: 'This is an error toast component',
      backgroundColor: '#d9534f',
      icon: errorIcon
    },
];
</pre>
<p>将此<code>testList</code>作为道具传递给toast组件，并将位置设置为<code>bottom-right</code>。</p>
<pre>&lt;Toast 
    toastList={testList}
    position="bottom-right"
/&gt;
</pre>
<p>回想一下，<code>toastList</code>和<code>position</code>是我们在toast组件中析构的道具。</p>
<p>在终端中打开项目，运行<code>npm start</code>或<code>yarn start</code>启动服务器。服务器应该运行在端口3000上。这是浏览器上的结果:</p>
<p><img data-attachment-id="15448" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/start-toast-server/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server.png" data-orig-size="452,229" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Success and error prompts upon starting the toast server" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server.png" decoding="async" class="aligncenter size-full wp-image-15448 jetpack-lazy-image" src="../Images/af9983aead2575ef6c5276a73eca3a0a.png" alt="Success and Error Prompts Upon Starting the Toast Server" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server.png 452w, https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server-300x152.png 300w" data-lazy-sizes="(max-width: 452px) 100vw, 452px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15448" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/start-toast-server/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server.png" data-orig-size="452,229" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Success and error prompts upon starting the toast server" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15448" src="../Images/af9983aead2575ef6c5276a73eca3a0a.png" alt="Success and Error Prompts Upon Starting the Toast Server" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server.png 452w, https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server-300x152.png 300w" sizes="(max-width: 452px) 100vw, 452px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/start-toast-server.png"/></noscript>
<p>您可以更改位置来查看祝酒词在页面上的位置。如果您将鼠标悬停在toast元素上，您会看到一些效果。将以下对象添加到<code>testList</code>数组。</p>
<pre>{
    id: 3,
    title: 'Info',
    description: 'This is an info toast component',
    backgroundColor: '#5bc0de',
    icon: infoIcon
},
{
    id: 4,
    title: 'Warning',
    description: 'This is a warning toast component',
    backgroundColor: '#f0ad4e',
    icon: warningIcon
}
</pre>
<p>将其他对象添加到数组后，toast组件应该如下所示:</p>
<p><img data-attachment-id="15449" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-object-added-array/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array.png" data-orig-size="452,419" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toast components after adding objects to the array" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array.png" decoding="async" class="aligncenter size-full wp-image-15449 jetpack-lazy-image" src="../Images/8ae38ff77aee62f7ce2c1fb34d02baac.png" alt="Toast Components After Adding Objects to the Array" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array.png 452w, https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array-300x278.png 300w" data-lazy-sizes="(max-width: 452px) 100vw, 452px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15449" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-object-added-array/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array.png" data-orig-size="452,419" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toast components after adding objects to the array" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15449" src="../Images/8ae38ff77aee62f7ce2c1fb34d02baac.png" alt="Toast Components After Adding Objects to the Array" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array.png 452w, https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array-300x278.png 300w" sizes="(max-width: 452px) 100vw, 452px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-object-added-array.png"/></noscript>
<p>让我们给toast组件添加一些<code>prop-types</code>。React提供了<a href="https://blog.logrocket.com/how-to-build-a-type-safe-react-redux-app/" target="_blank" rel="noopener noreferrer">类型检查特性</a>来验证组件接收了正确类型的道具。<code>PropTypes</code>帮助确保组件获得正确类型的道具。</p>
<p>从React导入<code>prop-types</code>。toast组件需要两个道具<code>toastList</code>和<code>position</code>。</p>
<pre>import PropTypes from 'prop-types';
</pre>
<p>在toast组件箭头函数下面添加以下道具检查。</p>
<pre>Toast.defaultProps = {
    position: 'bottom-right'
}

Toast.propTypes = {
    toastList: PropTypes.array.isRequired,
    position: PropTypes.string
}
</pre>
<p><code>position</code>道具不是必须的道具，但是如果你愿意，你可以把它变成必须的。如果没有设置位置，将使用默认的位置属性。</p>
<h2 id="createbuttoncomponents">添加按钮组件</h2>
<p>现在我们已经构建了一个toast组件，让我们创建一个按钮组件，并使用按钮来触发toast通知。</p>
<p>创建一个名为<code>button</code>的新文件夹，并添加一个名为<code>Button.js</code>的文件。将以下代码粘贴到文件中。</p>
<pre>import React from 'react';
import PropTypes from 'prop-types';

const Button = props =&gt; {
    const { label, className, handleClick } = props;
    return (
        &lt;&gt;
            &lt;button 
                className={className}
                onClick={handleClick}
            &gt;
                {label}
            &lt;/button&gt;
        &lt;/&gt;
    );
}

Button.propTypes = {
    label: PropTypes.string.isRequired,
    className: PropTypes.string.isRequired,
    handleClick: PropTypes.func
}

export default Button;
</pre>
<p>按钮组件内部需要的道具是标签、<code>className</code>和<code>handleClick</code>，这是按钮上的<code>onClick</code>方法。我们需要做的就是将道具传递给按钮组件。</p>
<p>在<code>App</code>组件中，导入<code>Button</code>组件，然后在<code>App</code>箭头函数之前添加一个<code>BUTTON_PROPS</code>数组。</p>
<pre>import Button from './components/button/Button';
</pre>
<pre>const BUTTON_PROPS = [
  {
    id: 1,
    type: 'success',
    className: 'success',
    label: 'Success'
  },
  {
    id: 2,
    type: 'danger',
    className: 'danger',
    label: 'Danger'
  },
  {
    id: 3,
    type: 'info',
    className: 'info',
    label: 'Info'
  },
  {
    id: 4,
    type: 'warning',
    className: 'warning',
    label: 'Warning'
  },
];
</pre>
<p>我们添加这个数组是为了在一个循环中传递具有不同属性的<code>Button</code>组件。</p>
<p>在具有类<code>app-header</code>的div元素内，添加以下内容。</p>
<pre>&lt;p&gt;React Toast Component&lt;/p&gt;
&lt;div className="toast-buttons"&gt;
    {
        BUTTON_PROPS.map(e =&gt; 
            &lt;Button 
                key={e.id}
                className={e.className}
                label={e.label}
                handleClick={() =&gt; showToast(e.type)}
            /&gt;
        )
    }
&lt;/div&gt;
</pre>
<p>我们没有创建四个不同的按钮，而是在一个循环中使用了一个按钮。循环根据<code>BUTTON_PROPS</code>的长度显示按钮的数量。</p>
<p>创建一个名为<code>showToast</code>的函数，并传递一个名为<code>type</code>的参数。</p>
<pre>const showToast = (type) =&gt; {
}
</pre>
<p><img data-attachment-id="15450" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/showtoast-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="showToast function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function.png" decoding="async" class="aligncenter size-full wp-image-15450 jetpack-lazy-image" src="../Images/9404d9219dca8b37c9286f77d511216d.png" alt="showToast Function" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15450" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/showtoast-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="showToast function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15450" src="../Images/9404d9219dca8b37c9286f77d511216d.png" alt="showToast Function" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/showtoast-function.png"/></noscript>
<p>导入<code>useState</code>钩子，然后创建一个名为list的新属性。</p>
<pre>const [list, setList] = useState([]);
</pre>
<p>当点击任何按钮时，应用程序都会根据用户选择的位置显示相应的toast。如果没有选择位置，则使用默认位置。</p>
<p>在<code>showToast</code>方法中，我们将使用JavaScript switch语句将相应的toast对象传递到<code>toastList</code>数组中。</p>
<p>创建一个新变量。</p>
<pre>let toastProperties = null;
</pre>
<p>我们将随机生成每个toast通知的id，因为在添加删除功能时我们将使用这些id。</p>
<p>在<code>showToast</code>方法中，添加以下内容。</p>
<pre>const id = Math.floor((Math.random() * 100) + 1);
</pre>
<p>id将介于1和100之间。switch语句中的每种情况都对应一个按钮。<br/>案例有<code>success</code>、<code>danger</code>、<code>info</code>和<code>warning</code>。</p>
<p>在<code>showToast</code>方法中添加以下开关案例。</p>
<pre>switch(type) {
    case 'success':
        toastProperties = {
            id,
            title: 'Success',
            description: 'This is a success toast component',
            backgroundColor: '#5cb85c',
            icon: checkIcon
        }
        break;
    case 'danger':
        toastProperties = {
            id,
            title: 'Danger',
            description: 'This is an error toast component',
            backgroundColor: '#d9534f',
            icon: errorIcon
        }
        break;
    case 'info':
        toastProperties = {
            id,
            title: 'Info',
            description: 'This is an info toast component',
            backgroundColor: '#5bc0de',
            icon: infoIcon
        }
        break;
    case 'warning':
        toastProperties = {
            id,
            title: 'Warning',
            description: 'This is a warning toast component',
            backgroundColor: '#f0ad4e',
            icon: warningIcon
        }
        break;
    default:
        setList([]);
}
setList([...list, toastProperties]);
</pre>
<p>每种情况下的<code>toastProperties</code>对象都是我们在<code>testList</code>中拥有的相同对象。你可以删除<code>testList</code>数组。如果点击<code>success</code>按钮，<code>toastProperties</code>对象将被添加到列表数组中。</p>
<pre>setList([...list, toastProperties]);
</pre>
<p>列表数组首先使用spread操作符进行析构，然后添加<code>toastProperties</code>对象。<code>setList</code>方法用于更新列表数组。</p>
<p>现在,<code>App</code>组件中的toast组件应该是这样的:</p>
<pre>&lt;Toast 
    toastList={list}
    position="bottom-right"
/&gt;
</pre>
<p><img data-attachment-id="15451" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-update-list-array/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-list-array.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Updating the list array" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-list-array-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-list-array.gif" decoding="async" class="aligncenter size-full wp-image-15451 jetpack-lazy-image" src="../Images/1b2e1bfb0f10aa34fe33dc4922f2e82a.png" alt="Updating the List Array" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-list-array.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-list-array.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15451" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-update-list-array/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-list-array.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Updating the list array" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-list-array-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-list-array.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15451" src="../Images/1b2e1bfb0f10aa34fe33dc4922f2e82a.png" alt="Updating the List Array" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-list-array.gif"/></noscript>
<p>这里，我们使用<code>bottom-right</code>位置来放置toast通知。让我们创建一个select标记，用户可以从下拉列表中选择一个位置。</p>
<p>将这些div添加到<code>App</code>组件中的<code>toast-buttons</code> div下面。</p>
<pre>&lt;div className="select"&gt;
    &lt;select
        name="position"
        value={position}
        onChange={selectPosition}
        className="position-select"
    &gt;
        &lt;option&gt;Select Position&lt;/option&gt;
        &lt;option value="top-right"&gt;Top Right&lt;/option&gt;
        &lt;option value="top-left"&gt;Top Left&lt;/option&gt;
        &lt;option value="bottom-left"&gt;Bottom Left&lt;/option&gt;
        &lt;option value="bottom-right"&gt;Bottom Right&lt;/option&gt;
    &lt;/select&gt;
&lt;/div&gt;
&gt;</pre>
<p><code>select</code>标签具有名称、值和<code>onChange</code>属性。每当选择一个选项时，<code>position</code>属性将被更新并设置为<code>select</code>标签上的<code>value</code>属性。将使用<code>onChange</code>的<code>selectPosition</code>方法中的<code>useState</code>方法更新位置。</p>
<p>添加一个新的<code>useState</code>方法。</p>
<pre>const [position, setPosition] = useState();
</pre>
<p>如您所见，<code>useState</code>没有默认值。这是因为我们为toast组件内部的位置设置了一个默认属性。如果你不想在toast组件中设置默认属性，你可以把默认属性添加到<code>useState</code>中。</p>
<p>创建一个名为<code>selectPosition</code>的函数，它接受一个名为event的参数。在这个方法中，我们将把<code>event.target.value</code>传递给<code>setPosition</code>来根据用户选择的选项更新位置。我们还将传递一个空数组到<code>setList</code>方法中，每当从标签中选择一个新的位置时，该方法总是清除列表数组。</p>
<pre>const selectPosition = (event) =&gt; {
    setPosition(event.target.value);
    setList([]);
}
</pre>
<p><img data-attachment-id="15452" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-update-position/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-position.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Updating the position of the toast component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-position-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-position.gif" decoding="async" class="aligncenter size-full wp-image-15452 jetpack-lazy-image" src="../Images/2d63f792b1653804d161347280dc4381.png" alt="Updating the Position of the Toast Component" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-position.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-position.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15452" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-update-position/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-position.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Updating the position of the toast component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-position-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-position.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15452" src="../Images/2d63f792b1653804d161347280dc4381.png" alt="Updating the Position of the Toast Component" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-update-position.gif"/></noscript>
<p>将toast组件上的position prop设置为<code>useState</code>位置变量后，<code>App</code>组件中的toast组件应该如下所示:</p>
<pre>&lt;Toast 
    toastList={list}
    position={position}
/&gt;
</pre>
<p>如果用户在点击按钮前没有选择位置，将使用在toast组件<code>prop-types</code>上设置的默认位置。</p>
<p>右上角:</p>
<p><img data-attachment-id="15454" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-default-position-top-right/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-right.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toast component set to the top-right position by default" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-right-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-right.gif" decoding="async" class="aligncenter size-full wp-image-15454 jetpack-lazy-image" src="../Images/cee141f9a83270ca68a68fdb61f74272.png" alt="Toast Component Set to the Top-Right Position by Default" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-right.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-right.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15454" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-default-position-top-right/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-right.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toast component set to the top-right position by default" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-right-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-right.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15454" src="../Images/cee141f9a83270ca68a68fdb61f74272.png" alt="Toast Component Set to the Top-Right Position by Default" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-right.gif"/></noscript>
<p>左上角:</p>
<p><img data-attachment-id="15455" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-default-position-top-left/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-left.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toast component set to the top-left position by default" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-left-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-left.gif" decoding="async" class="aligncenter size-full wp-image-15455 jetpack-lazy-image" src="../Images/b04abe5b4cca5a58459ae4a7681d8a7d.png" alt="Toast Component Set to the Top-Left Position by Default" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-left.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-left.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15455" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-default-position-top-left/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-left.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toast component set to the top-left position by default" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-left-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-left.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15455" src="../Images/b04abe5b4cca5a58459ae4a7681d8a7d.png" alt="Toast Component Set to the Top-Left Position by Default" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-top-left.gif"/></noscript>
<p>左下方:</p>
<p><img data-attachment-id="15456" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-default-position-bottom-left/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-left.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toast component set to the bottom-left position by default" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-left-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-left.gif" decoding="async" class="aligncenter size-full wp-image-15456 jetpack-lazy-image" src="../Images/e26fd6985a5cbd6b2ea3cc2dfb94aac0.png" alt="Toast Component Set to the Bottom-Left Position by Default" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-left.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-left.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15456" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-default-position-bottom-left/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-left.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toast component set to the bottom-left position by default" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-left-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-left.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15456" src="../Images/e26fd6985a5cbd6b2ea3cc2dfb94aac0.png" alt="Toast Component Set to the Bottom-Left Position by Default" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-left.gif"/></noscript>
<p>右下方:</p>
<p><img data-attachment-id="15458" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-default-position-bottom-right/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-right.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toast component set to the bottom-right Position by Default" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-right-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-right.gif" decoding="async" class="aligncenter size-full wp-image-15458 jetpack-lazy-image" src="../Images/1a6b1507d1d0335da9982d58fff1ebf1.png" alt="Toast Component Set to the Bottom-Right Position by Default" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-right.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-right.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15458" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/toast-component-default-position-bottom-right/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-right.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toast component set to the bottom-right Position by Default" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-right-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-right.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15458" src="../Images/1a6b1507d1d0335da9982d58fff1ebf1.png" alt="Toast Component Set to the Bottom-Right Position by Default" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/toast-component-default-position-bottom-right.gif"/></noscript>
<h2 id="deletetoastnotification">删除toast通知</h2>
<p>到目前为止，我们已经创建了一个toast组件，并设置了单击按钮时显示的通知。现在是时候添加一个从页面和<code>toastList</code>数组中删除toast的方法了。</p>
<p>我们将使用JavaScript方法<code>findIndex</code>和<code>splice</code>。我们还将使用<code>toastList</code>对象数组中toast的惟一ID来查找对象的索引，并使用<code>splice</code>方法从数组中移除对象，从而从页面中清除特定的toast。</p>
<p>进入你的吐司组件。在按钮上，添加一个带有名为<code>deleteToast</code>的方法的<code>onClick</code>，该方法将一个toast ID作为参数。</p>
<pre>onClick={() =&gt; deleteToast(toast.id)}
</pre>
<p>创建一个<code>deleteToast</code>方法。</p>
<pre>const deleteToast = id =&gt; {
    const index = list.findIndex(e =&gt; e.id === id);
    list.splice(index, 1);
    setList([...list]);
}
</pre>
<p>在列表数组中获得toast对象的索引后，在splice方法中使用该索引，该方法从数组中移除该索引处的属性。数字<code>1</code>让拼接方法知道我们只想删除一个值。</p>
<p>移除toast后，使用spread操作符通过<code>setList</code>方法更新列表数组。这就是删除toast通知所需做的全部工作。</p>
<p><img data-attachment-id="15460" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/delete-toast-notification/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/delete-toast-notification.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Delete toast notification" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/delete-toast-notification-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/delete-toast-notification.gif" decoding="async" class="aligncenter size-full wp-image-15460 jetpack-lazy-image" src="../Images/b8c1ff7157fb4c0dd12307c9dfcea790.png" alt="Delete Toast Notification" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/delete-toast-notification.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/delete-toast-notification.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="15460" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/delete-toast-notification/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/delete-toast-notification.gif" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Delete toast notification" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/delete-toast-notification-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/delete-toast-notification.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-15460" src="../Images/b8c1ff7157fb4c0dd12307c9dfcea790.png" alt="Delete Toast Notification" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/delete-toast-notification.gif"/></noscript>
<p>在<ins> <a href="https://github.com/uzochukwueddie/react-toast" target="_blank" rel="noopener noreferrer"> GitHub repo </a>中查看本教程的完整源代码。</ins></p>
<p>如果你喜欢看我写代码，你可以在YouTube 上看看这个<a href="https://www.youtube.com/watch?v=Zh8qBhnVAWI&amp;t=1s" target="_blank" rel="noopener noreferrer">视频教程。<ins/></a></p>
<h2 id="autodeletetoastnotification">自动删除toast通知</h2>
<p>通过在JavaScript <code>setInterval</code>方法中添加删除功能，可以在一定时间过后自动删除Toast通知。</p>
<p>toast通知组件将采用两个新的<code>props</code>:</p>
<ul>
<li><code>autoDelete</code> —决定是否需要删除通知的布尔值</li>
<li><code>autoDeleteTime</code> —以毫秒为单位的数字</li>
</ul>
<p>将新属性添加到toast组件中的<code>props</code>对象。</p>
<pre>const { ..., autoDelete, autoDeleteTime } = props;
</pre>
<p>您可以向一个功能组件添加多个React <code>useEffect</code>方法，只要您保持它们被调用的顺序。</p>
<p>添加另一个<code>useEffect</code>方法。</p>
<pre>useEffect(() =&gt; {
}, []);
</pre>
<p>在这个<code>useEffect</code>里面，添加<code>setInterval()</code>方法。</p>
<pre>useEffect(() =&gt; {
    const interval = setInterval(() =&gt; {

    }, autoDeleteTime);
}, []);
</pre>
<p><code>setInterval</code>方法的第二个参数是<code>autoDeleteTime</code>，它是一个以毫秒为单位的数字，决定了如何调用<code>setInterval</code>方法。<code>interval</code>变量是一个需要通过调用<code>clearInterval()</code>方法来清除的数字。<code>clearInterval()</code>方法清除用<code>setInterval()</code>方法设置的定时器。间隔在<code>useEffect</code>清理方法中被清除。</p>
<pre>useEffect(() =&gt; {
    const interval = setInterval(() =&gt; {

    }, autoDeleteTime);
    return () =&gt; {
        clearInterval(interval);
    }
}, []);
</pre>
<p>在<code>useEffect</code>方法卸载并启动新的rerender后，调用cleanup方法。如果没有调用<code>clearInterval</code>方法，<code>interval</code>变量将总是保存最后的计时器值，这将导致关于如何调用<code>setInterval</code>方法的问题。</p>
<p>让我们通过从<code>toastList</code>数组中移除条目来更新<code>deleteToast</code>方法。</p>
<pre>const deleteToast = id =&gt; {
    ...
    ...
    const toastListItem = toastList.findIndex(e =&gt; e.id === id);
    toastList.splice(toastListItem, 1);
    ...
}
</pre>
<p>每当从<code>list</code>数组中删除一个项目时，该项目也会从<code>toastList</code>数组中删除。在<code>setInterval()</code>中会调用<code>deleteToast</code>方法。</p>
<p><code>autoDelete</code>属性是一个布尔值，它决定通知是否在某个时间后自动删除。如果属性为<code>true</code>，通知将被自动删除。否则，它们不会自动删除。</p>
<p>在<code>setInterval()</code>中，我们需要检查<code>autoDelete</code>是否为真，以及<code>list</code>和<code>toastList</code>数组中是否有值。回想一下，<code>deleteToast</code>方法需要一个<code>id</code>参数来从数组中移除toast。我们将获取<code>toastList</code>数组中第一项的<code>id</code>，并将其传递给<code>deleteToast</code>方法。</p>
<pre>useEffect(() =&gt; {
    const interval = setInterval(() =&gt; {
        if (autoDelete &amp;&amp; toastList.length &amp;&amp; list.length) {
            deleteToast(toastList[0].id);
        }
    }, autoDeleteTime);
    return () =&gt; {
        clearInterval(interval);
    }
}, []);
</pre>
<p>每次调用<code>setInterval</code>时，索引为0的项的ID被传递给delete方法。如果<code>toastList</code>和列表数组中没有更多的值，则跳过该方法。我们不需要组件内的<code>defaultProps</code>，所以它可以被移除。</p>
<p>将这些添加到道具验证中:</p>
<pre>Toast.propTypes = {
    ...
    autoDelete: PropTypes.bool,
    autoDeleteTime: PropTypes.number
}
</pre>
<p>现在我们已经用新的属性更新了toast组件，让我们从<code>App</code>组件内部将这些值作为道具添加到组件中。出于演示的目的，我将添加一个复选框输入和一个文本输入，这样用户就可以动态地设置道具的值。</p>
<p>在<code>App</code>组件中添加两个<code>useState</code>变量。</p>
<pre>let [checkValue, setCheckValue] = useState(false);
const [autoDeleteTime, setAutoDeleteTime] = useState(0);
</pre>
<p>在select dropdown标记之前，添加以下新元素:</p>
<pre>&lt;div className="select"&gt;
    &lt;input 
    id="auto"
    type="checkbox"
    name="checkbox"
    value={}
    onChange={}
    /&gt;
    &lt;label htmlFor="auto"&gt;Auto Dismiss&lt;/label&gt;
&lt;/div&gt;

&lt;div className="select"&gt;
    &lt;input 
    type="text"
    name="checkbox"
    placeholder="Dismiss time Ex: 3000"
    autoComplete="false"
    onChange={}
    /&gt;
&lt;/div&gt;
</pre>
<p>新元素的CSS样式:</p>
<pre>input[type=checkbox] + label {
  display: block;
  cursor: pointer;
  margin-top: 1em;
}

input[type=checkbox] {
  display: none;
}

input[type=checkbox] + label:before {
  content: "\2714";
  border: 0.1em solid #fff;
  border-radius: 0.2em;
  display: inline-block;
  width: 1em;
  height: 1em;
  padding-top: 0.1em;
  padding-left: 0.2em;
  padding-bottom: 0.3em;
  margin-right: 1em;
  vertical-align: bottom;
  color: transparent;
  transition: .2s;
}

input[type=checkbox] + label:active:before {
  transform: scale(0);
}

input[type=checkbox]:checked + label:before {
  background-color: #4aa1f3;
  border-color: #4aa1f3;
  color: #fff;
}

label {
  font-size: 14px;
}

input[type=text] {
  margin: 15px 0;
    padding: 15px 10px;
    width: 100%;
    outline: none;
    border: 1px solid #bbb;
    border-radius: 5px;
  height: 1px;
  background-color: #282c34;
  font-size: 14px;
  color: #fff;
}

.disabled {
  cursor: none;
  pointer-events: none;
  opacity: 0.5;
}

.btn-disable {
  cursor: none;
  pointer-events: none;
  opacity: 0.6;
}

::-webkit-input-placeholder {
  color: #acabab;
  font-style: italic;
}

:-ms-input-placeholder {
  color: #acabab;
  font-style: italic;
}

::placeholder {
  color: #acabab;
  font-style: italic;
}
</pre>
<p>让我们禁用按钮，直到从选择下拉列表中选择了一个位置，如果未选中自动消除复选框，也禁用输入。为了实现这一点，将字符串<code>Select Position</code>添加到<code>position</code>的<code>useState</code>方法中。</p>
<pre>const [position, setPosition] = useState('Select Position');
</pre>
<p>然后，在按钮<code>className</code>上，添加:</p>
<pre>className={`${position === 'Select Position' ? `${e.className} btn-disable` : `${e.className}`}`}
</pre>
<p>如果位置是字符串<code>Select Position</code>，为每个按钮添加类<code>btn-disable</code>和类名。如果位置不是字符串<code>Select Position</code>，那么只添加按钮类名。</p>
<p>在用于添加自动删除时间的输入文本框中，添加:</p>
<pre>className={`${!checkValue ? 'disabled' : ''}`}
</pre>
<p>除非勾选复选框，否则默认禁用输入。</p>
<p>禁用的按钮和文本输入:</p>
<p><img data-attachment-id="17619" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/disabled-buttons-text-input/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input.png" data-orig-size="720,377" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Disabled buttons and text inputs" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input.png" decoding="async" class="aligncenter size-full wp-image-17619 jetpack-lazy-image" src="../Images/71f50c93262e5559aa0d8790e5e252ac.png" alt="Disabled Buttons and Text Inputs" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input-300x157.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17619" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/disabled-buttons-text-input/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input.png" data-orig-size="720,377" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Disabled buttons and text inputs" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-17619" src="../Images/71f50c93262e5559aa0d8790e5e252ac.png" alt="Disabled Buttons and Text Inputs" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input-300x157.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/disabled-buttons-text-input.png"/></noscript>
<p>启用的按钮和文本输入:</p>
<p><img data-attachment-id="17621" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/enabled-buttons-text-input/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input.png" data-orig-size="720,377" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Disabled buttons and text inputs" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input.png" decoding="async" class="aligncenter size-full wp-image-17621 jetpack-lazy-image" src="../Images/63457b1f12adf2b01f07edb78e494c6c.png" alt="Enabled Buttons and Text Inputs" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input-300x157.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17621" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/enabled-buttons-text-input/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input.png" data-orig-size="720,377" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Disabled buttons and text inputs" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-17621" src="../Images/63457b1f12adf2b01f07edb78e494c6c.png" alt="Enabled Buttons and Text Inputs" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input-300x157.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/enabled-buttons-text-input.png"/></noscript>
<p>更新toast组件。</p>
<pre>&lt;Toast 
    toastList={list}
    position={position}
    autoDelete={checkValue}
    autoDeleteTime={autoDeleteTime}
/&gt;
</pre>
<p>在组件内部创建一个新方法<code>onCheckBoxChange</code>，并将其添加到复选框输入的<code>onChange</code>方法中。</p>
<pre>&lt;input 
    id="auto"
    type="checkbox"
    name="checkbox"
    value={checkValue}
    onChange={onCheckBoxChange}
/&gt;
</pre>
<pre>const onCheckBoxChange = () =&gt; {
    checkValue = !checkValue;
    setCheckValue(checkValue);
    setList([]);
}
</pre>
<p><code>useState</code> <code>checkValue</code>的默认值为<code>false</code>。如果该复选框被点击，该值被改变为相反的值，因为它是一个布尔值，然后用<code>setCheckValue</code>方法更新，并且<code>list</code>数组被重置为空。</p>
<p>向文本输入添加一个<code>onInputChange</code>方法。</p>
<pre>&lt;input 
    className={`${!checkValue ? 'disabled' : ''}`}
    type="text"
    name="checkbox"
    placeholder="Dismiss time Ex: 3000"
    autoComplete="false"
    onChange={onInputChange}
/&gt;
</pre>
<pre>const onInputChange = (e) =&gt; {
    const time = parseInt(e.target.value, 10);
    setAutoDeleteTime(time);
}
</pre>
<p>我们将值从一个字符串转换为一个数字，并将其传递给<code>setAutoDeleteTime</code>方法。下面演示了自动删除toast通知的结果。</p>
<p>两秒钟后自动删除:</p>
<p><img data-attachment-id="17623" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/auto-delete-after-two-seconds/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-two-seconds.gif" data-orig-size="720,383" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Auto-delete after two seconds" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-two-seconds-300x160.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-two-seconds.gif" decoding="async" class="aligncenter size-full wp-image-17623 jetpack-lazy-image" src="../Images/c383be573e31e240f89ffc8047133dc6.png" alt="Auto-Delete After Two Seconds" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-two-seconds.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-two-seconds.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17623" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/auto-delete-after-two-seconds/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-two-seconds.gif" data-orig-size="720,383" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Auto-delete after two seconds" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-two-seconds-300x160.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-two-seconds.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-17623" src="../Images/c383be573e31e240f89ffc8047133dc6.png" alt="Auto-Delete After Two Seconds" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-two-seconds.gif"/></noscript>
<p>三秒后自动删除:</p>
<p><img data-attachment-id="17624" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/auto-delete-after-three-seconds/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds.gif" data-orig-size="720,383" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Auto-delete after three seconds" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-300x160.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds.gif" decoding="async" class="aligncenter size-full wp-image-17624 jetpack-lazy-image" src="../Images/43686ee0c09d3d14290f34faf00d2ca5.png" alt="Auto-Delete After Three Seconds" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="17624" data-permalink="https://blog.logrocket.com/how-to-create-a-custom-toast-component-with-react/auto-delete-after-three-seconds/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds.gif" data-orig-size="720,383" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Auto-delete after three seconds" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds-300x160.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-17624" src="../Images/43686ee0c09d3d14290f34faf00d2ca5.png" alt="Auto-Delete After Three Seconds" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/auto-delete-after-three-seconds.gif"/></noscript>
<h2 id="conclusion">结论</h2>
<p>本教程将让您对如何创建一个能够显示多个通知的简单toast组件有一个坚实的理解。您现在应该知道如何使用流行的React挂钩<code>useState</code>和<code>useEffect</code>，显示和取消toast通知，并根据您的需要定制组件。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>