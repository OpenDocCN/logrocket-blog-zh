<html>
<head>
<title>What's new in Vuex 3.1.1 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Vuex 3.1.1中的新特性- LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/whats-new-in-vuex-3-1-1-d796b0c791bf/#0001-01-01">https://blog.logrocket.com/whats-new-in-vuex-3-1-1-d796b0c791bf/#0001-01-01</a></blockquote><div><article class="article-post">
<p>JavaScript已经成为一个巨大的、多样化的、快速增长的编程世界的母语。一旦一个框架或库得到更新，社区就开始处理与之相关的项目——vue . js及其周围的项目也是如此。</p>
<p>Vuex因以简单直接的方式为州政府提供服务而赢得了声誉。然而，它仍然遵循其著名的父代的路径，这意味着我们有时会在已经使用最新版本Vue.js的环境中看到某些功能的延迟交付。</p>
<p>例如，原生移动应用遍布各处。许多JavaScript项目都有相应的库、框架等。来处理app开发。</p>
<p>Vue也是一样:<a class="markup--anchor markup--p-anchor" href="https://nativescript-vue.org/" target="_blank" rel="noopener noreferrer" data-href="https://nativescript-vue.org/"> NativeScript-Vue </a>是一个<a class="markup--anchor markup--p-anchor" href="https://www.nativescript.org/" target="_blank" rel="noopener noreferrer" data-href="https://www.nativescript.org/"> NativeScript </a>插件，允许你使用Vue来制作你的移动应用。Vuex还可以与NativeScript-Vue集成，用于处理组件的状态机，但它缺乏良好的调试机制。</p>
<p>Vuex的3.1.1 版本已经发布，旨在解决这个问题。除了支持在NativeScript应用程序中调试Vuex，该更新还提供了其他改进，如包含jsDelivr CDN npm包，并修复了模块注册的内存泄漏等问题。这个版本没有突破性的变化，所以你应该放心升级你的项目。</p>
<p>您可以阅读<a class="markup--anchor markup--p-anchor" href="https://github.com/vuejs/vuex/releases/tag/v3.1.1" target="_blank" rel="noopener noreferrer" data-href="https://github.com/vuejs/vuex/releases/tag/v3.1.1"> changelog </a>了解更多关于这些的信息，以及PRs和贡献者提交。让我们仔细看看。</p>
<h3>支持在NativeScript应用程序中调试Vuex</h3>
<p><a class="markup--anchor markup--p-anchor" href="https://github.com/vuejs/vue-devtools/tree/dev/shells/electron" target="_blank" rel="noopener noreferrer" data-href="https://github.com/vuejs/vue-devtools/tree/dev/shells/electron"> Vue-remote-devtools </a>(基于<a class="markup--anchor markup--p-anchor" href="https://electronjs.org/" target="_blank" rel="noopener noreferrer" data-href="https://electronjs.org/">电子</a>)是官方的Vue devtools应用程序，用于使用Vue.js进行NativeScript应用程序开发。它基于Node.js和Chromium，允许您轻松调试您的HTML/CSS/JS应用程序(在本例中为Vue):</p>
<p><img decoding="async" class="progressiveMedia-image js-progressiveMedia-image jetpack-lazy-image" src="../Images/3bfcf325cd1e6c249dbcc8d926cb73d0.png" data-src="https://cdn-images-1.medium.com/max/1440/0*vf16fSsavNGhks6N" data-lazy-src="https://cdn-images-1.medium.com/max/1440/0*vf16fSsavNGhks6N?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://cdn-images-1.medium.com/max/1440/0*vf16fSsavNGhks6N"/></p><noscript><img data-lazy-fallback="1" decoding="async" class="progressiveMedia-image js-progressiveMedia-image" src="../Images/3bfcf325cd1e6c249dbcc8d926cb73d0.png" data-src="https://cdn-images-1.medium.com/max/1440/0*vf16fSsavNGhks6N" data-original-src="https://cdn-images-1.medium.com/max/1440/0*vf16fSsavNGhks6N"/></noscript>
<figure id="6a65" class="graf graf--figure graf-after--p"><figcaption class="imageCaption"><em class="markup--em markup--figure-em">Application example.</em></figcaption></figure>
<p>另一方面，<a class="markup--anchor markup--p-anchor" href="https://github.com/vuejs/vue-devtools" target="_blank" rel="noopener noreferrer" data-href="https://github.com/vuejs/vue-devtools"> vue-devtools </a>，一个用于调试基于web的vue应用程序的浏览器扩展，以与Vuex及其状态管理库无缝集成而闻名，它允许您可视化以前的状态并在它们之间切换。这对于我们所说的时间旅行调试(即，您可以在状态之间来回切换)来说是非常棒的。</p>
<p>然而，对于NativeScript项目，在这个版本之前是不可能的。现在，<a class="markup--anchor markup--p-anchor" href="https://github.com/vuejs/vuex/pull/1404" target="_blank" rel="noopener noreferrer" data-href="https://github.com/vuejs/vuex/pull/1404">您可以在非浏览器环境中检查Vuex状态</a>。如果你不太熟悉Vuex状态管理，你可以<a class="markup--anchor markup--p-anchor" href="https://vuex.vuejs.org/guide/state.html" target="_blank" rel="noopener noreferrer" data-href="https://vuex.vuejs.org/guide/state.html">在这里</a>了解更多。</p>
<h3>为浏览器构建的新的minifier和ES模块</h3>
<p>在<a class="markup--anchor markup--p-anchor" href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/" target="_blank" rel="noopener noreferrer" data-href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/"> ES模块</a>出现之前，开发人员通常会将JavaScript代码导入HTML页面，如下所示:</p>
<pre>&lt;script src="<a class="markup--anchor markup--pre-anchor" href="https://some-cdn.com/vue.js" target="_blank" rel="nofollow noopener noreferrer" data-href="https://some-cdn.com/vue.js">https://some-cdn.com/vue.js</a>"&gt;&lt;/script&gt;
&lt;script&gt;
  new Vue();
&lt;/script&gt;</pre>
<p>众所周知，这种导入JS库的经典方法也有缺点。每次进口的顺序必须正确；如果顺序不正确，一个接一个的脚本就找不到依赖关系。它还向全局名称空间公开对象和函数，因此任何人都可以访问和修改它们。您可能会错误地导入文件两次，这样的例子不胜枚举。</p>
<p>Vue本身就面临这个问题。在2.6版本之前，它的构建过程中没有专门用于在浏览器中加载Vue模块的步骤。所以，这样的代码是行不通的:</p>
<pre>&lt;script type=”module” src=”vue.esm.js”&gt;&lt;/script&gt;</pre>
<p>最后，从2.6版本开始——因为现在每个人都在浏览器中使用es模块——Vue与这个构建步骤捆绑在一起。你可以在这里阅读更多关于Vue如何工作的信息。</p>
<p>反过来，Vuex也面临着同样的问题，这个问题在3.1.1 版本中已经<a class="markup--anchor markup--p-anchor" href="https://github.com/vuejs/vuex/pull/1533" target="_blank" rel="noopener noreferrer" data-href="https://github.com/vuejs/vuex/pull/1533">修复。如果您想将Vuex直接导入浏览器，只需使用:</a></p>
<pre>&lt;script type=”module” src=”vuex.esm.browser.js”&gt;&lt;/script&gt;
// Or below for the min version
&lt;script type=”module” src=”vuex.esm.browser.min.js”&gt;&lt;/script&gt;</pre>
<p>此外，这个版本还包括一个新的迷你器，<a class="markup--anchor markup--p-anchor" href="https://github.com/terser-js/terser" target="_blank" rel="noopener noreferrer" data-href="https://github.com/terser-js/terser"> Terser </a>。这是因为之前的minifier UglifyJS是<a class="markup--anchor markup--p-anchor" href="https://github.com/mishoo/UglifyJS2/issues/3156#issuecomment-392943058" target="_blank" rel="noopener noreferrer" data-href="https://github.com/mishoo/UglifyJS2/issues/3156#issuecomment-392943058">不再维护</a>，只支持ECMAScript 5，而Terser支持ES6+。</p>
<p>实际上，对于开发人员来说，这不会改变任何事情。另一方面，因为Terser是UglifyJS的一个分支，所以它保持了对API和CLI兼容uglify-es和<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="8cf9ebe0e5eaf5a1e6ffccbfa2">【电子邮件保护】</a>的支持</p>
<h3>支持jsDelivr</h3>
<p>JsDelivr确实比大多数cdn更快。<a class="markup--anchor markup--p-anchor" href="https://github.com/vuejs/vuex/pull/1496" target="_blank" rel="noopener noreferrer" data-href="https://github.com/vuejs/vuex/pull/1496">现在</a>，你也可以<a class="markup--anchor markup--p-anchor" href="https://cdn.jsdelivr.net/npm/vuex@3.1.1/dist/vuex.js" target="_blank" rel="noopener noreferrer" data-href="https://cdn.jsdelivr.net/npm/vuex@3.1.1/dist/vuex.js">从这个CDN </a>导入Vuex。</p>
<h3>使用register module/unregister module时的内存泄漏修复</h3>
<p><a class="markup--anchor markup--p-anchor" href="https://vuex.vuejs.org/guide/modules.html" target="_blank" rel="noopener noreferrer" data-href="https://vuex.vuejs.org/guide/modules.html">模块</a>是将我们的商店分成更小、更可控的部分的好方法，因为整个状态包含在Vuex的一个大对象中。为了在商店中添加或删除模块，我们只需分别调用<code>store.registerModule</code>或<code>store.unregisterModule</code>。</p>
<p>然而，在大型应用程序中控制如何管理浏览器的堆内存可能有点棘手。这里有一个已知的问题,涉及到一个应用程序添加数百个模块，然后立即取消注册，这导致堆内存没有被清除。你可以想象接下来会发生什么…内存泄漏。</p>
<p><a class="markup--anchor markup--p-anchor" href="https://github.com/vuejs/vuex/pull/1508" target="_blank" rel="noopener noreferrer" data-href="https://github.com/vuejs/vuex/pull/1508">修复</a>包括简单地对函数<code>resetStoreVM</code>中的<code>oldVm</code>实例进行垃圾收集，该函数负责在剧烈活动后恢复虚拟机。</p>
<h3>结论</h3>
<p>你可以在这里找到<a class="markup--anchor markup--p-anchor" href="https://github.com/vuejs/vuex/releases" target="_blank" rel="noopener noreferrer" data-href="https://github.com/vuejs/vuex/releases">所有的变化，亲自看看Vuex在最新版本和之前的版本中有什么改进。或者，如果你想了解更多关于Vuex的信息，考虑深入了解他们的官方</a><a class="markup--anchor markup--p-anchor" href="https://vuex.vuejs.org/guide/" target="_blank" rel="noopener noreferrer" data-href="https://vuex.vuejs.org/guide/">入门指南</a>。</p>
<p>社区是任何开源项目成功的关键——你也是其中的一部分。如果您发现最新改进有任何问题，<a class="markup--anchor markup--p-anchor" href="https://github.com/vuejs/vuex/issues" target="_blank" rel="noopener noreferrer" data-href="https://github.com/vuejs/vuex/issues">请前往报告</a>。</p>
<p>如果您尚未升级到最新版本，以下命令将帮助您升级:</p>
<pre>npm install — save — save-exact <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="156360706d55263b243b24">[email protected]</a>
// or via yarn
yarn add — exact <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="582e2d3d20186b76697669">[email protected]</a></pre>
<p>好好学习！</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的Vue应用</h2><p>调试Vue.js应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的Vue突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Vue应用程序中发生的一切，包括网络请求、JavaScript错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex插件将Vuex突变记录到LogRocket控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试Vue应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>
<hr/>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>