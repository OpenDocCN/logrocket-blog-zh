<html>
<head>
<title>Intro to Three.js for game developers - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>面向游戏开发者的Three.js简介- LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/intro-to-three-js-for-game-developers/#0001-01-01">https://blog.logrocket.com/intro-to-three-js-for-game-developers/#0001-01-01</a></blockquote><div><article class="article-post">
<p>游戏产业的收入比音乐和电影产业加起来还要多。难怪游戏产量在上升，Xbox和PlayStation等游戏机销售疯狂。</p>
<p>随着游戏开发领域多年来的发展，游戏开始转向浏览器领域。今天，我们在PC和游戏机上玩的许多游戏也是为了在浏览器中运行而构建的。这在一定程度上要归功于无数的游戏引擎，它们可以帮助开发者更高效地创建网络3D游戏。</p>
<p>在本教程中，我们将向您展示如何开始使用最流行的JavaScript库之一Three.js来创建令人惊叹的3D动画。</p>
<h2 id="threejs">Three.js是什么？</h2>
<p><a href="https://threejs.org/" target="_blank" rel="noopener noreferrer"> Three.js </a>是一个强大的创建三维模型和游戏的库。只需几行JavaScript，您就可以创建任何东西，从简单的3D图案到逼真的实时场景。您可以构建简单和复杂的3D几何图形，通过逼真的场景制作动画和移动对象，等等。</p>
<p>Three.js使您能够将纹理和材质应用于对象。它还提供了各种光源来照亮场景，高级后处理效果，自定义着色器等。您可以从3D建模软件加载对象，以便在游戏中使用。</p>
<p>由于这些原因，Three.js是我构建JavaScript游戏的首选库。</p>
<h2 id="gettingstarted">入门指南</h2>
<p>首先下载<a href="https://threejs.org/build/three.min.js" target="_blank" rel="noopener noreferrer"> Three.js文件</a>。</p>
<p>接下来，创建一个文件夹，<code>threejs-prj</code>。在文件夹中，再创建两个文件夹:<code>src</code>和<code>libs</code>。</p>
<pre>threejs-prj
    - /src
    - /libs
</pre>
<p>在根文件夹下创建一个<code>index.html</code>文件，在<code>src</code>文件夹下创建一个<code>main.js</code>文件。然后，将<code>three.min.js</code>复制到<code>libs</code>文件夹中。</p>
<pre>threejs-prj
    - /src
        - main.js
    - /libs
        - three.min.js
    - index.html
</pre>
<p><code>main.js</code>将包含您的游戏代码。<code>three.min.js</code>是缩小版的Three.js框架，<code>index.html</code>是Three.js渲染你的对象的主页面。</p>
<p>打开<code>index.html</code>并粘贴以下代码。</p>
<pre>&lt;!-- index.html --&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Three.js demo&lt;/title&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;style&gt;
            body {
                background-color: #ffffff;
                margin: 0;
                overflow: hidden;
            }
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;script src="./libs/three.min.js"&gt;&lt;/script&gt;
        &lt;script src="./src/main.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>这只是基本的代码设置。我们移除了页边空白，隐藏了任何溢出的内容。</p>
<p>在下一节中，我们将带您了解如何在Three.js中创建基本的对象和场景。</p>
<h2 id="thebasics">基础知识</h2>
<p>在我们开始之前，让我们后退一步，回顾一下3D游戏中的基本场景是什么样子的。为了跟上进度，您应该熟悉一些常用术语，包括场景、几何体、材质、相机和渲染器。</p>
<h3 id="scene">事件</h3>
<p>一个场景从一个坐标系开始。它可以包含对象，如立方体、金字塔、汽车、房子等。——基本上，你能想象到的任何东西——就像电影里的一个场景。</p>
<p>首先，声明一个<code>scene</code>变量。</p>
<pre>&lt;script&gt; 
    var scene
&lt;/script&gt;
</pre>
<p>使用<code>Scene</code>类创建一个场景。</p>
<pre>scene = new THREE.Scene();
</pre>
<p><code>scene</code>变量现在保存一个<code>Scene</code>对象。我们可以使用<code>add()</code>方法给我们的场景添加物体。</p>
<h3 id="geometry">几何学</h3>
<p>几何是指我们创造的形状——立方体、正方形、金字塔等。Three.js提供了基本的、原始的形状，您可以修改这些形状的表面和顶点来创建您自己的更复杂的形状。</p>
<p>要创建一个业务对象，使用<code>THREE</code>变量中的<code>BoxGeometry</code>类。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<pre>var boxGeometry = new THREE.BoxGeometry(10, 10, 10);
</pre>
<p>这将创建一个长10个单位、宽10个单位、厚10个单位的立方体。</p>
<pre>isoGeometry = new THREE.IcosahedronGeometry(200, 1);
</pre>
<p>这将创建一个二十面体形状。</p>
<h3 id="meshandmaterial">网格和材料</h3>
<p>灯光和材质通过应用颜色、纹理等来设置对象的样式。材质用于将纹理和颜色应用于形状。</p>
<p>要创建颜色和纹理的材质，使用<code>THREE.MeshBasicMaterial</code>类。这将通过我们的自定义色调和纹理。</p>
<pre>var basicMaterial = new THREE.MeshBasicMaterial({
    color: 0x0095DD
});
</pre>
<p>在这里，我们创建了一个颜色为<code>0095DD</code>的物体。</p>
<pre>material = new THREE.MeshBasicMaterial({ 
    color: 0x000000, 
    wireframe: true, 
    wireframeLinewidth: 2
});
</pre>
<p>我们通过传递更多的属性创建了一个基本材质。这一次，我们希望对象是一个线框形状，线框线的宽度是两个单位。</p>
<p>我们只是用了基本材料。Three.js中使用的预定义材质更多，如Phong、Lambert等。</p>
<p>网格用于将材质应用于对象。<code>THREE.Mesh</code>类处理这个问题。</p>
<p>将<code>basicMaterial</code>应用于<code>boxGeometry</code>:</p>
<pre>var cubeMesh = new THREE.Mesh(boxGeometry, basicMaterial);
</pre>
<p><code>cubeMesh</code>将是一个10x10x10的盒子，其尺寸被涂上颜色<code>0095DD</code>。</p>
<h3 id="camera">照相机</h3>
<p>相机是观察场景中物体的眼睛。一个场景必须至少有一个摄像机。</p>
<p>Three.js中的相机控制着你从某个视角在场景中能看到什么。你可以移动相机四处看看。就像在现实世界中一样，你可以从各种角度观察环境。</p>
<p>Three.js有很多类型的相机，但基本的是<code>THREE.PerspectiveCamera</code>。一个<code>THREE.PerspectiveCamera</code>实例从空间中的一个点显示世界，就像你的眼睛一样。还有<code>THREE.OrthographicCamera</code>级，就像从飞机上往外看一样。</p>
<pre>camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 1, 1000);

camera.position.z = 500;
</pre>
<p>让我们在这里分解论点。</p>
<ul>
<li>第一个参数是视野(以度为单位)。它控制相机镜头的宽度</li>
<li>第二个是纵横比，即画布的宽度与高度之比</li>
<li>第三个参数是近平面截锥。这控制了一个物体离相机有多近而仍然能被看到</li>
<li>最后一个参数是远平面截锥。这控制了一个对象可以离相机多远，并且仍然可以被渲染</li>
</ul>
<p>在上面的例子中，我们使用了一个相机空间坐标系来将相机沿z轴向前移动500个单位。</p>
<p>我们也可以使用<code>camera.position.y</code>和<code>camera.position.x</code>分别上下左右移动相机。</p>
<h3 id="renderer">渲染器</h3>
<p>渲染器在浏览器上绘制场景和相机。Three.js提供了几个渲染引擎，包括基于WebGL的渲染器、Canvas、SVG、CSS和DOM。</p>
<p>使用WebGL渲染器时，使用<code>THREE.WebGLRenderer</code>。</p>
<pre>var renderer = new THREE.WebGLRenderer({
    antialias:true
});
renderer.setSize(window.innerWidth, window.innerHeight);

document.body.appendChild(renderer.domElement);
</pre>
<p>我们正在创建WebGL渲染器。传递给WebGLRenderer对象的对象上的<code>antialias</code>属性被设置为<code>true</code>，这将导致WebGL平滑地呈现我们的对象。<code>setSize</code>方法将浏览器上的渲染窗口设置为浏览器的全宽和全高。最后，渲染器的<code>domElement</code>属性中的DOM被附加到DOM中。这将使我们的场景在浏览器中可见。</p>
<h3 id="lights">光</h3>
<p>灯光用于照亮场景中的特定区域。把它想象成一个指向特定方向的火炬。</p>
<p>Three.js中有很多光源可用，包括<code>Point</code>、<code>Ambient</code>、<code>Directional</code>、<code>Hemisphere</code>、<code>Spot</code>。所有这些都是<code>Light</code>对象的实例。</p>
<p>让我们更深入地研究每个光源，正如艾萨克·苏金的《用Three.js  开发游戏》中所描述的。</p>
<h4><code>Ambient</code></h4>
<p><code>Ambient</code>同等影响场景中所有照亮的对象。</p>
<pre>THREE.AmbientLight(color) 
</pre>
<h4><code>Directional</code></h4>
<p>对于这种类型，所有的光都是平行的，来自给定的方向，好像光源非常远。</p>
<pre>THREE.DirectionalLight(color, intensity = 1)
</pre>
<h4><code>Hemisphere</code></h4>
<p><code>Hemisphere</code>模拟来自太阳的折射照明。把它想象成两个相对的方向灯。</p>
<pre>THREE.HemisphereLight(skyColor, groundColor, intensity = 1)
</pre>
<h4><code>Point</code></h4>
<p>这种光源从空间中的特定点发出，就像灯泡一样。它只照亮半径范围内的物体。</p>
<pre>THREE.PointLight(color, intensity = 1, radius = 0)
</pre>
<h4><code>Spot</code></h4>
<p>这是从空间中特定的点向特定的方向发出的。它照亮指向其旋转方向的锥形物体，在半径范围内呈指数下降。</p>
<pre>THREE.SpotLight(color, intensity, radius = 0, coneAngle = Math.PI / 3, falloff = 10)
</pre>
<h3 id="animation">动画</h3>
<p>动画使场景中的物体栩栩如生。您可以在对象的空间坐标系中向任意方向移动对象。</p>
<p><code>Geometry</code>和<code>Camera</code>类具有可以用来缩放、移动和旋转对象的方法和属性。</p>
<p>要缩放对象，请使用<code>scale</code>属性。</p>
<pre>boxGeometry.scale = 2
boxGeometry.scale = 1
</pre>
<p>这会放大和缩小<code>boxGeometry</code>对象。</p>
<p>接下来，使用<code>position</code>属性沿着x、y和z轴移动<code>boxGeometry</code>对象。</p>
<pre>boxGeometry.position.x = 4
</pre>
<p>这将左右移动<code>boxGeometry</code>对象。</p>
<pre>boxGeometry.position.y = 2
</pre>
<p>这将上下移动<code>boxGeometry</code>对象。</p>
<pre>boxGeometry.position.z = 1
</pre>
<p>这将向前和向后移动<code>boxGeometry</code>对象。</p>
<p>要旋转对象，请使用<code>rotation</code>属性。</p>
<pre>boxGeometry.rotation.x += 0.01
</pre>
<p>这将沿<code>x</code>方向旋转<code>boxGeometry</code>对象。</p>
<pre>boxGeometry.rotation.y += 0.01
boxGeometry.rotation.z += 0.01
</pre>
<p>这将沿<code>y</code>和<code>z</code>方向旋转<code>boxGeometry</code>对象。</p>
<h2 id="bringingeverythingtogether">将这一切结合在一起</h2>
<p>打开<code>main.js</code>文件并粘贴以下内容。</p>
<pre>// ./src/main.js
var scene = new THREE.Scene();

var boxGeometry = new THREE.BoxGeometry(10, 10, 10);

var basicMaterial = new THREE.MeshBasicMaterial({
    color: 0x0095DD
});

var cubeMesh = new THREE.Mesh(boxGeometry, basicMaterial);
cubeMesh.rotation.set(0.4, 0.2, 0);

var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);
camera.position.z = 50;

scene.add(camera)
scene.add(cubeMesh)

var renderer = new THREE.WebGLRenderer({
    antialias:true
});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.render(scene, camera);

document.body.appendChild(renderer.domElement);
</pre>
<p>您应该看到以下内容。</p>
<pre>scene.add(camera)
scene.add(cubeMesh)
</pre>
<p>使用<code>add()</code>方法将摄像机和<code>cubeMesh</code>添加到场景中。如果不这样做，当文件在浏览器中运行时，将不会呈现任何多维数据集。</p>
<pre>cubeMesh.rotation.set(0.4, 0.2, 0);
</pre>
<p>以上将分别沿x、y和z轴旋转<code>cubeMesh</code> 0.4、0.2和0。这将使我们看到立方体的三维形式。如果不只是立方体x，y轴会被看到。</p>
<p>在浏览器中加载<code>index.html</code>。您将在浏览器上看到一个浅蓝色立方体。</p>
<p><img data-attachment-id="26642" data-permalink="https://blog.logrocket.com/intro-to-three-js-for-game-developers/threejscube/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube.png" data-orig-size="720,405" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Blue 3D cube created with Three.js" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube.png" decoding="async" class="aligncenter size-full wp-image-26642 jetpack-lazy-image" src="../Images/a55213a7b99cef02e1e3250679fd7da1.png" alt="Blue 3D Cube Created With Three.js" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube-300x169.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="26642" data-permalink="https://blog.logrocket.com/intro-to-three-js-for-game-developers/threejscube/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube.png" data-orig-size="720,405" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Blue 3D cube created with Three.js" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-26642" src="../Images/a55213a7b99cef02e1e3250679fd7da1.png" alt="Blue 3D Cube Created With Three.js" srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube-300x169.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscube.png"/></noscript>
<h2 id="wireframecube">Wireframe cube</h2>
<p>要制作线框立方体，请添加以下内容。</p>
<pre>var wireframeBasicMaterial = new THREE.MeshBasicMaterial({
    color: 0x0095DD,
    wireframe: true,
    wireframeLinewidth: 2
});
</pre>
<p>然后，编辑以下内容:</p>
<p><code>var cubeMesh = new THREE.Mesh(boxGeometry, basicMaterial);</code></p>
<p>…到下面。</p>
<pre>// var cubeMesh = new THREE.Mesh(boxGeometry, basicMaterial);
var cubeMesh = new THREE.Mesh(boxGeometry, wireframeBasicMaterial);
</pre>
<p>重新加载<code>index.html</code>，你应该会看到一个线框立方体。</p>
<p><img data-attachment-id="26643" data-permalink="https://blog.logrocket.com/intro-to-three-js-for-game-developers/threejscubewireframe/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe.png" data-orig-size="720,405" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Wireframe cube created with Three.js" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe.png" decoding="async" class="aligncenter size-full wp-image-26643 jetpack-lazy-image" src="../Images/cfae5bca36725103b8e8fd397adc640b.png" alt="Wireframe Cube Created With Three.js" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe-300x169.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="26643" data-permalink="https://blog.logrocket.com/intro-to-three-js-for-game-developers/threejscubewireframe/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe.png" data-orig-size="720,405" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Wireframe cube created with Three.js" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-26643" src="../Images/cfae5bca36725103b8e8fd397adc640b.png" alt="Wireframe Cube Created With Three.js" srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe-300x169.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/threejscubewireframe.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>这只是你可以用Three.js做的事情的开始，事实上，它是如此强大，以至于我会把它比作BlenderThree.js几乎能做Blender能做的一切。</p>
<p>如果你对此有任何问题，或者我应该添加，纠正或删除的任何内容，请随时评论，发电子邮件或发短信给我。</p>
<p>谢谢！！！</p>
<h2 id="references">参考</h2>

<p>通过理解上下文，更容易地调试JavaScript错误</p><div class="code-block code-block-27">
<div class="blog-plug inline-plug vanilla-javascript-cta"><h2>调试代码总是一项单调乏味的任务。但是你越了解自己的错误，就越容易改正。</h2>
<p>LogRocket 让你以新的独特的方式理解这些错误。我们的前端监控解决方案跟踪用户与您的JavaScript前端的互动，让您能够准确找出导致错误的用户行为。</p>
<p>LogRocket记录控制台日志、页面加载时间、堆栈跟踪、慢速网络请求/响应(带有标题+正文)、浏览器元数据和自定义日志。理解您的JavaScript代码的影响从来没有这么简单过！</p>
<a href="https://lp.logrocket.com/blg/javascript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/cbfed9be3defcb505e662574769a7636.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reproduce-javascript-errors.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reproduce-javascript-errors.gif"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/cbfed9be3defcb505e662574769a7636.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reproduce-javascript-errors.gif"/></noscript></a>
<p>.</p>
<a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>