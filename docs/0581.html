<html>
<head>
<title>Learn React Portals by example - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>通过示例学习React门户- LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/learn-react-portals-example/#0001-01-01">https://blog.logrocket.com/learn-react-portals-example/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按:</strong>这篇React门户教程最近一次更新是在2022年11月1日，它包括了React门户的信息和React门户使用React钩子的例子。有关React钩子的更多信息，请查看我们的<a href="https://blog.logrocket.com/react-reference-guide-hooks-api/"> React钩子参考指南</a>和<a href="https://blog.logrocket.com/react-hooks-cheat-sheet-unlock-solutions-to-common-problems-af4caf699e70/">备忘单</a>。</em></p>
<p>模态窗口非常适合吸引用户的注意力。此外，它们也有助于收集用户信息或要求用户输入。然而，在React世界中，它们的构建非常复杂。这是因为它涉及到编写复杂的<a href="https://blog.logrocket.com/tag/css/"> CSS代码</a>和跟踪DOM层次结构。在大型应用程序中，这不是一件小事。幸运的是，React为这个用例引入了一个名为React Portals 的<a href="https://reactjs.org/docs/portals.html">概念。</a></p>
<p>在本文中，我们将查看React门户的真实示例，并解释它如何帮助解决工具提示示例中的<code>overflow: a hidden</code>问题:</p>
<p><img data-attachment-id="141973" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example.png" data-orig-size="730,583" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example-300x240.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example.png" decoding="async" class="aligncenter size-full wp-image-141973 jetpack-lazy-image" src="../Images/862378424649b19e04b0ea155636f523.png" alt="React Portal Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example-300x240.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="141973" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example.png" data-orig-size="730,583" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example-300x240.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-141973" src="../Images/862378424649b19e04b0ea155636f523.png" alt="React Portal Example" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example-300x240.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-example.png"/></noscript>
<p><em>向前跳转:</em></p>

<h2 id="react-portals">什么是React门户？</h2>
<p>React门户是一个先进的概念，它允许开发人员<a href="https://blog.logrocket.com/react-render-props-vs-custom-hooks/">在React层次结构树之外呈现他们的元素</a>，而不包含组件之间的父子关系。</p>
<p>通常，典型的React组件位于<a href="https://blog.logrocket.com/what-virtual-dom-react/"> DOM </a>中。这意味着您可能很难呈现模态或弹出窗口。</p>
<p>例如，看看下面的代码:</p>
<pre class="language-javascript hljs">export default function App() {
  const [visibility, setVisibility] = useState("hidden");
  const handleClick = () =&gt; {
    if (visibility === "hidden") {
      //if the visibility state is 'hidden'
      setVisibility("visible"); //then set it to 'visible'
    } else {
      setVisibility("hidden"); //otherwise, make it 'hidden'
    }
  };
  return (
    &lt;div className="App"&gt;
      &lt;button onClick={() =&gt; handleClick()}&gt;Show/Hide&lt;/button&gt;
      {/*The visibility of the modal*/}
      &lt;div style={{ visibility }}&gt;
        &lt;p&gt;This is a modal&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
</pre>
<p><img data-attachment-id="141994" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-modal-example-gif/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-example-gif.gif" data-orig-size="729,267" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal modal example GIF" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-example-gif-300x110.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-example-gif.gif" decoding="async" class="aligncenter size-full wp-image-141994 jetpack-lazy-image" src="../Images/18ee92d1dba0ef88ba5c24213ec2c240.png" alt="React Portal Modal Example GIF" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-example-gif.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-example-gif.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="141994" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-modal-example-gif/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-example-gif.gif" data-orig-size="729,267" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal modal example GIF" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-example-gif-300x110.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-example-gif.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-141994" src="../Images/18ee92d1dba0ef88ba5c24213ec2c240.png" alt="React Portal Modal Example GIF" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-example-gif.gif"/></noscript>
<p>如您所见，我们的代码是有效的。然而，这看起来一点也不像模态窗口。我们希望我们的组件突出来，而不是与网页的其余部分融为一体。</p>
<p>这是web开发中经常出现的一个普遍问题:你想构建一些工具提示或下拉菜单，但它被父元素<code>overflow: hidden</code>样式所剪切:</p>
<p><img data-attachment-id="141996" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-tooltip-hidden/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden.png" data-orig-size="730,305" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal hidden tooltip" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden-300x125.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden.png" decoding="async" class="aligncenter size-full wp-image-141996 jetpack-lazy-image" src="../Images/71feb69aa83a24100c8b4bd1edc82027.png" alt="React Portal Hidden Tooltip" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden-300x125.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="141996" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-tooltip-hidden/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden.png" data-orig-size="730,305" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal hidden tooltip" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden-300x125.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-141996" src="../Images/71feb69aa83a24100c8b4bd1edc82027.png" alt="React Portal Hidden Tooltip" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden-300x125.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-tooltip-hidden.png"/></noscript>
<p>在上面的截图中，<code>overflow:hidden</code>样式的父容器用红色标记，用于定位的元素用绿色标记。由于这个样式属性，呈现模式窗口不是一件容易的事情。那么我们如何解决这个问题呢？</p>
<p>这就是React门户的用武之地。这个概念允许开发人员在元素的父DOM节点之外呈现元素。尽管如此，React仍然保留了组件在组件层次结构中的位置。</p>
<p>换句话说，组件仍然可以保持它在<a href="https://blog.logrocket.com/comparing-react-tree-components/">反应树</a>中继承的属性和行为。在本文后面的代码示例中，您将了解到更多这方面的内容。</p>
<h2 id="react-portals-use">React门户是用来做什么的？</h2>
<p>门户非常适合您希望在彼此之上呈现元素的地方。我在下面列举了一些常见的例子:</p>
<ul>
<li>个人资料卡片:无需点击用户页面即可快速获得用户个人资料信息:</li>
</ul>
<p><img data-attachment-id="141998" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-use/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use.gif" data-orig-size="729,437" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal profile card information GIF" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-300x180.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use.gif" decoding="async" class="aligncenter size-full wp-image-141998 jetpack-lazy-image" src="../Images/922f8baaaed807cbeda1b29cce2945f1.png" alt="React Portal Profile Card Information GIF" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="141998" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-use/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use.gif" data-orig-size="729,437" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal profile card information GIF" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-300x180.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-141998" src="../Images/922f8baaaed807cbeda1b29cce2945f1.png" alt="React Portal Profile Card Information GIF" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use.gif"/></noscript>
<ul>
<li>加载屏幕:当一个任务在后台运行时(例如，一个获取请求)，显示一个加载屏幕是明智的。因此，这会阻止用户与应用程序进行交互</li>
<li>Cookie提醒:为用户提供选项，让他们选择在web浏览器中允许哪些cookie:</li>
</ul>
<p><img data-attachment-id="142000" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-use-cookies/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies.png" data-orig-size="730,307" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal cookie example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies-300x126.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies.png" decoding="async" class="aligncenter size-full wp-image-142000 jetpack-lazy-image" src="../Images/7f398d92112a99eb128e0bdab51e1c2f.png" alt="React Portal Cookie Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies-300x126.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142000" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-use-cookies/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies.png" data-orig-size="730,307" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal cookie example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies-300x126.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142000" src="../Images/7f398d92112a99eb128e0bdab51e1c2f.png" alt="React Portal Cookie Example" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies-300x126.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-use-cookies.png"/></noscript>
<p>前面，我们讨论了React通常显示DOM中的元素。我们可以用下面的代码来证明这一点:</p>
<pre class="language-javascript hljs">return (
  &lt;div className="App"&gt;
    {/*Display within DOM node*/}
    &lt;div className="exists"&gt;
      &lt;p&gt;This is within the DOM node&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
);
</pre>
<p><img data-attachment-id="142003" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-dom/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom.png" data-orig-size="730,217" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal elements with DOM" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom-300x89.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom.png" decoding="async" class="aligncenter size-full wp-image-142003 jetpack-lazy-image" src="../Images/ec2c307ee4c1a65742343459e14e7a57.png" alt="React Portal Elements With DOM" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom-300x89.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142003" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-dom/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom.png" data-orig-size="730,217" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal elements with DOM" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom-300x89.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142003" src="../Images/ec2c307ee4c1a65742343459e14e7a57.png" alt="React Portal Elements With DOM" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom-300x89.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-dom.png"/></noscript>
<p>如您所见，我们的组件出现在<code>root</code> <code>div</code>元素中。然而，当涉及到模态和对话窗口时，我们希望我们的组件在<code>root</code>组件之外呈现。</p>
<p>我们可以通过创建一个React门户元素来解决这个问题:</p>
<pre class="language-javascript hljs">function App() {
  return (
    &lt;div className="App"&gt;
      {/*Render a modal*/}
      &lt;MyModal /&gt;
    &lt;/div&gt;
  );
}
//create a modal
function MyModal() {
  //to create a portal, use the createPortal function:
  return ReactDOM.createPortal(
    &lt;div className="modal"&gt;
      &lt;p&gt;This is part of the modal&lt;/p&gt;
    &lt;/div&gt;,
    document.body
  );
}
</pre>
<p>这一次，注意React不会在DOM中呈现这个函数:</p>
<p><img data-attachment-id="142005" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-modal-dom/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom.png" data-orig-size="730,336" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal modal DOM example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom.png" decoding="async" class="aligncenter size-full wp-image-142005 jetpack-lazy-image" src="../Images/836cbe4aa057018bb407371d496430ae.png" alt="React Portal Modal DOM Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142005" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-modal-dom/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom.png" data-orig-size="730,336" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal modal DOM example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142005" src="../Images/836cbe4aa057018bb407371d496430ae.png" alt="React Portal Modal DOM Example" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-modal-dom.png"/></noscript>
<p>正如您所看到的，这证明了在开发人员希望呈现某些元素以吸引用户注意力的用例中，门户是至关重要的。</p>
<p> </p>
<h2 id="css-html">查看CSS/HTML解决方案</h2>
<p>解决这个问题最简单的方法就是简单地去掉<code>overflow</code>样式:</p>
<pre class="language-css hljs">div {
  /*'Hidden' hides the element*/
  overflow: hidden; /* remove this line of code */
  /*When 'overflow' is set to 'visible', CSS will render this to the UI*/
  /* Further styles.. */
} 
</pre>
<p>这告诉程序将我们的模态转换到屏幕上:</p>
<p><img data-attachment-id="141980" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-no-padding/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding.png" data-orig-size="730,630" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal with no padding" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding-300x259.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding.png" decoding="async" class="aligncenter size-full wp-image-141980 jetpack-lazy-image" src="../Images/a62c9821340fa03b6d0c95f61c6b335b.png" alt="React Portal With No Padding" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding-300x259.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="141980" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-no-padding/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding.png" data-orig-size="730,630" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal with no padding" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding-300x259.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-141980" src="../Images/a62c9821340fa03b6d0c95f61c6b335b.png" alt="React Portal With No Padding" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding-300x259.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-padding.png"/></noscript>
<p>工具提示现在完全可见，一切看起来都很好，但当出现以下任何情况时，它就变成了一个非常脆弱的解决方案:</p>
<ol>
<li>有人可能会意外地将overflow: hidden再次添加到父节点中(并且忘记单击带有工具提示的按钮进行测试！)</li>
<li>有人可以在它周围添加另一个父包装器，例如，在某些情况下引入一些额外的样式</li>
<li>也有可能溢出:隐藏是有原因的，例如，裁剪图像</li>
</ol>
<p>这里有一个禁用<code>overflow: hidden</code>的副作用的例子:</p>
<figure id="attachment_142007" aria-describedby="caption-attachment-142007" class="wp-caption aligncenter"><img data-attachment-id="142007" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-parent-styling/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling.png" data-orig-size="730,207" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal parent styling example" data-image-description="" data-image-caption="&lt;p&gt;Before image is inside the bounds of the card&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling-300x85.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling.png" decoding="async" class="size-full wp-image-142007 jetpack-lazy-image" src="../Images/3a02e0f0c16f775a3e4d0f4467bc489e.png" alt="React Portal Parent Styling Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling-300x85.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="142007" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-parent-styling/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling.png" data-orig-size="730,207" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal parent styling example" data-image-description="" data-image-caption="&lt;p&gt;Before image is inside the bounds of the card&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling-300x85.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling.png" decoding="async" loading="lazy" class="size-full wp-image-142007" src="../Images/3a02e0f0c16f775a3e4d0f4467bc489e.png" alt="React Portal Parent Styling Example" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling-300x85.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-styling.png"/></noscript><figcaption id="caption-attachment-142007" class="wp-caption-text">Before image is inside the bounds of the card</figcaption></figure>
<p>之后(图像已扩展到标有绿色的卡片之外):</p>
<figure id="attachment_142011" aria-describedby="caption-attachment-142011" class="wp-caption aligncenter"><img data-attachment-id="142011" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-green-square/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square.png" data-orig-size="730,316" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal green square example" data-image-description="&lt;p&gt;After image has expanded far outside of the card marked with green&lt;/p&gt;&#10;" data-image-caption="&lt;p&gt;After image has expanded far outside of the card marked with green&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square-300x130.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square.png" decoding="async" class="size-full wp-image-142011 jetpack-lazy-image" src="../Images/8841179606218477cfd0b60ba2781b55.png" alt="React Portal Green Square Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square-300x130.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="142011" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-green-square/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square.png" data-orig-size="730,316" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal green square example" data-image-description="&lt;p&gt;After image has expanded far outside of the card marked with green&lt;/p&gt;&#10;" data-image-caption="&lt;p&gt;After image has expanded far outside of the card marked with green&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square-300x130.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square.png" decoding="async" loading="lazy" class="size-full wp-image-142011" src="../Images/8841179606218477cfd0b60ba2781b55.png" alt="React Portal Green Square Example" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square-300x130.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-green-square.png"/></noscript><figcaption id="caption-attachment-142011" class="wp-caption-text">After image has expanded far outside of the card marked with green</figcaption></figure>
<h2 id="react-portal-action">React门户网站正在运行</h2>
<p>有一种方法可以解决整个应用程序因溢出而中断<code>tooltip/dropdown</code>的所有问题，并重用代码，而不需要开发人员花费时间去尝试和测试。</p>
<p>解决方法是直接在文档正文中追加工具提示或下拉菜单，设置position: fixed style，并在<code>tooltip/dropdown</code>应该出现的地方提供<code>screenX</code>和<code>screenY</code>坐标。</p>
<p>现在，我们需要做两件事:</p>
<ol>
<li>将<code>tooltip/dropdown</code>附加到React挂载根之外的文档体</li>
<li>获取放置<code>tooltip/dropdown</code>的坐标(例如，使用<code>useRef</code>反应钩)</li>
</ol>
<p>让我们从React的外部挂载开始。对于JQuery/ <a href="https://podrocket.logrocket.com/vanilla-javascript"> Vanilla JS </a> <span>代码库来说，这是一项简单的任务。尽管如此，对于React开发人员来说，这可能听起来很有挑战性，因为React应用程序通常只有一个DOM挂载点。比如有些div带</span> <code>id = "root"</code> <span>。</span></p>
<p>幸运的是，React团队引入了另一种挂载组件的方式:React Portal。使用React Portal，开发人员可以方便地从JSX访问tooltip/dropdown组件:所有的props都传递和处理事件，但同时，Portal被安装到React挂载根之外的文档正文中。</p>
<p>我们要使用的最终<a href="https://blog.logrocket.com/million-js-build-apps-jsx-faster-react-preact/"> JSX </a>如下:</p>
<pre class="language-javascript hljs">&lt;Portal&gt;
           &lt;TooltipPopover coords={coords}&gt;
              Awesome content that will never be cut off again!
           &lt;/TooltipPopover&gt;
        &lt;/Portal&gt;
</pre>
<p>在上面的代码片段中，<code>&lt;Portal /&gt;</code>包装器组件负责在React外部安装，<code>&lt;TooltipPopover/&gt;</code>根据传递给它的坐标放置。最终外观如下:</p>
<p><img data-attachment-id="142014" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-content-wrapper/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper.png" data-orig-size="730,300" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal content wrapper" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper-300x123.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper.png" decoding="async" class="aligncenter size-full wp-image-142014 jetpack-lazy-image" src="../Images/a00e7fe82dae7b30939c0928d5b5cde0.png" alt="React Portal Content Wrapper" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper-300x123.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142014" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-content-wrapper/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper.png" data-orig-size="730,300" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal content wrapper" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper-300x123.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142014" src="../Images/a00e7fe82dae7b30939c0928d5b5cde0.png" alt="React Portal Content Wrapper" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper-300x123.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-wrapper.png"/></noscript>
<p>就是这样！你有一个通用的解决方案来处理任何应该在父类之外弹出而不会被切断的内容。但是<code>&lt;Portal/&gt;</code>包装组件对我们来说是一个“黑盒”,所以让我们改变它，看看它的内部是什么。</p>
<h2 id="building-react-portal-wrapper">构建门户包装器</h2>
<p>通过遵循门户网站的<a href="https://reactjs.org/docs/portals.html"> React文档，我们可以通过几个步骤从头开始构建我们自己的定制<code>&lt;Portal/&gt;</code>包装器组件:</a></p>
<h3 id="step-1-react-portal">步骤1:在<code>react-root</code>之外的<code>DOM</code>中添加一个额外的挂载点</h3>
<pre class="language-html hljs">&lt;html&gt;
    &lt;body&gt;
        &lt;div id="react-root"&gt;&lt;/div&gt; // [ 1 ]
        &lt;div id="portal-root"&gt;&lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>在这段代码中，我将React挂载点元素ID命名为<code>"react-root"</code>，所有的<code>tooltips/dropdowns</code>都应该使用<code>"portal-root"</code>中的React门户来挂载。</p>
<h3 id="step-2-react-portal">步骤2:在React中使用<code>createPortal</code>构建一个可重用的React门户包装组件</h3>
<p>下面是用React钩子编写的简化的<code>&lt;Portal/&gt;</code>包装器组件代码:</p>
<pre class="language-javascript hljs">import { useEffect } from "react";
import { createPortal } from "react-dom";

const Portal = ({children}) =&gt; {
  const mount = document.getElementById("portal-root");
  const el = document.createElement("div");

  useEffect(() =&gt; {
    mount.appendChild(el);
    return () =&gt; mount.removeChild(el);
  }, [el, mount]);

  return createPortal(children, el)
};

export default Portal;
</pre>
<p>如您所见，<code>mount</code>需要一个带有<code>id = "portal-root"</code>的<code>DOM</code>元素，它来自前面的HTML代码片段，可以在其中追加一个元素。这个包装器组件做的核心事情是为传递到组件中的任何React子组件创建一个门户。</p>
<p>这里使用的<code>useEffect</code> React钩子负责在正确的时间装载元素，并在组件卸载时进行清理。</p>
<h3 id="step-3-react-portal">步骤3:使用React钩子将按钮坐标传递给工具提示进行定位</h3>
<p>为了获得全功能的工具提示组件，我们需要做的最后一件事是将按钮坐标传递给工具提示进行定位。多亏了React钩子，这并不是一个困难的任务，它可以通过如下方式实现:</p>
<pre class="language-javascript hljs">const App = () =&gt; {
  const [coords, setCoords] = useState({}); // takes current button coordinates
  const [isOn, setOn] = useState(false); // toggles button visibility

  return &lt;Card style={{...styles.card, overflow: "hidden"}}&gt; // [ 2 ]
      &lt;Button
        onClick={e =&gt; {
          const rect = e.target.getBoundingClientRect();
          setCoords({
            left: rect.x + rect.width / 2,
            top: rect.y + window.scrollY
          });
          setOn(!isOn); // [ 3 ]
        }}
      &gt;
        Click me
      &lt;/Button&gt;
      {
        isOn &amp;&amp;
        &lt;Portal&gt;
          &lt;TooltipPopover coords={coords}&gt;
            &lt;div&gt;Awesome content that is never cut off by its parent container!&lt;/div&gt;
          &lt;/TooltipPopover&gt;
        &lt;/Portal&gt;
      }
  &lt;/Card&gt;
}
</pre>
<p>在这段代码中，按钮组件有一个<code>onClick</code>事件处理程序，它使用<code>DOM</code>元素的标准<a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect"> getBoundingClientRect()方法</a>从<code>e.target</code>对象获取按钮的当前屏幕坐标。</p>
<p>此外，还提供了一个按钮可见性切换工具，帮助我们切换工具提示。</p>
<p>请注意，我有意保留了<code>Card</code>组件，以展示门户解决方案运行良好。</p>
<p>请随意查看<a href="https://codesandbox.io/s/github/supromikali/react-portals-example"> codesandbox上的现场演示和完整代码。</a></p>
<h3 id="bonus-react-portal">额外好处:防止工具提示在页面内容改变时跳转</h3>
<p>有一件事与工具提示定位比与门户网站更相关，但值得一提。如果按钮的位置取决于窗口的右边缘(例如，<code>display: flex; margin-left: auto</code>样式)，它的位置可能会受到窗口滚动的影响(例如，当新内容加载到页面底部时)。让我们来看一个例子:</p>
<figure id="attachment_142016" aria-describedby="caption-attachment-142016" class="wp-caption aligncenter"><img data-attachment-id="142016" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-no-scroll/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll.png" data-orig-size="730,277" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal no scroll example" data-image-description="" data-image-caption="&lt;p&gt;Before: The window has no scroll, and the tooltip is centered relative to the button&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll-300x114.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll.png" decoding="async" class="size-full wp-image-142016 jetpack-lazy-image" src="../Images/927aaf29c5cfee1ce53051e9a46aba51.png" alt="React Portal No Scroll Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll-300x114.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="142016" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-no-scroll/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll.png" data-orig-size="730,277" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal no scroll example" data-image-description="" data-image-caption="&lt;p&gt;Before: The window has no scroll, and the tooltip is centered relative to the button&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll-300x114.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll.png" decoding="async" loading="lazy" class="size-full wp-image-142016" src="../Images/927aaf29c5cfee1ce53051e9a46aba51.png" alt="React Portal No Scroll Example" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll-300x114.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-no-scroll.png"/></noscript><figcaption id="caption-attachment-142016" class="wp-caption-text">Before: The window has no scroll, and the tooltip is centered relative to the button</figcaption></figure>
<figure id="attachment_142018" aria-describedby="caption-attachment-142018" class="wp-caption aligncenter"><img data-attachment-id="142018" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-parent-company-styling/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling.png" data-orig-size="730,263" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal parent company styling example" data-image-description="" data-image-caption="&lt;p&gt;After: The window scroll has appeared, and the tooltip is a bit off-center (exactly the same amount of pixels as the scroll added)&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling-300x108.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling.png" decoding="async" class="size-full wp-image-142018 jetpack-lazy-image" src="../Images/248bd671637e06abdf1f0e76c2ccb17c.png" alt="React Portal Parent Company Styling Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling-300x108.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="142018" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-parent-company-styling/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling.png" data-orig-size="730,263" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal parent company styling example" data-image-description="" data-image-caption="&lt;p&gt;After: The window scroll has appeared, and the tooltip is a bit off-center (exactly the same amount of pixels as the scroll added)&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling-300x108.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling.png" decoding="async" loading="lazy" class="size-full wp-image-142018" src="../Images/248bd671637e06abdf1f0e76c2ccb17c.png" alt="React Portal Parent Company Styling Example" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling-300x108.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-parent-company-styling.png"/></noscript><figcaption id="caption-attachment-142018" class="wp-caption-text">After: The window scroll has appeared, and the tooltip is a bit off-center (exactly the same amount of pixels as the scroll added)</figcaption></figure>
<p> </p>
<p>有几种方法可以解决这个问题。您可以使用一些应用于整个页面的调整大小检测包，如<code>react-resize-detector</code>，它将在内容高度变化时触发一些事件。</p>
<p>然后，我们可以测量滚动宽度，并纠正工具提示的位置。</p>
<p>幸运的是，在我们的例子中，有一个更简单的纯CSS解决方案:</p>
<pre class="language-css hljs">html {
    overflow-x: hidden;
    width: 100vw;
}
</pre>
<p>向页面添加这个小代码片段可以防止页面内容在窗口滚动<code>appear/hide</code>时发生意外跳转，因为<code>&lt;html/&gt;</code>宽度被设置为等于<code>100vw</code>(窗口宽度)，这是一个常数，不受窗口滚动的影响。</p>
<p>同时，<code>100% &lt;html/&gt;</code>宽度不包括滚动，所以应用程序不再关心滚动是开还是关。<code>Tooltip</code>会一直居中。</p>
<p>您可以在<a href="https://xshnz.csb.app/">演示</a>上通过调整窗口高度大小来测试结果。使用一个名为<a href="https://www.npmjs.com/package/react-custom-scrollbars"> react-custom-scrollbars </a>的包也可以做同样的事情，但是跨浏览器滚动条看起来更好。</p>
<p>要让它工作，你需要安装软件包，并将整个应用程序打包成一个<code>Scrollbars</code>组件，如下所示:</p>
<pre class="language-javascript hljs">import { Scrollbars } from 'react-custom-scrollbars';

ReactDOM.render(
  &lt;Scrollbars style={{ width: "100vw", height: "100vh" }}&gt;
    &lt;App /&gt;
  &lt;/Scrollbars&gt;, 
  document.getElementById("react-root")
);
</pre>
<p>以下是快速预览(注意滚动条外观):</p>
<figure id="attachment_142020" aria-describedby="caption-attachment-142020" class="wp-caption aligncenter"><img data-attachment-id="142020" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-content-scrollbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar.png" data-orig-size="730,250" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal content scrollbar" data-image-description="" data-image-caption="&lt;p&gt;Note: The Scrollbar appearance&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar-300x103.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar.png" decoding="async" class="size-full wp-image-142020 jetpack-lazy-image" src="../Images/8706aa614b25397e5246efee5246c1b0.png" alt="React Portal Content Scrollbar" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar-300x103.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="142020" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-content-scrollbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar.png" data-orig-size="730,250" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal content scrollbar" data-image-description="" data-image-caption="&lt;p&gt;Note: The Scrollbar appearance&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar-300x103.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar.png" decoding="async" loading="lazy" class="size-full wp-image-142020" src="../Images/8706aa614b25397e5246efee5246c1b0.png" alt="React Portal Content Scrollbar" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar-300x103.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-content-scrollbar.png"/></noscript><figcaption id="caption-attachment-142020" class="wp-caption-text">Note: The Scrollbar appearance</figcaption></figure>
<h2 id="using-react-hooks-react-portal">在React门户中使用React挂钩</h2>
<p>在这一节中，我们将更深入地将<a href="https://reactjs.org/docs/hooks-intro.html"> React Hooks </a>与门户结合起来。当你想写可重用的代码时，React钩子非常有用。这意味着我们可以<a href="https://blog.logrocket.com/create-your-own-custom-react-hooks/">创建一个自定义钩子</a>，这将允许我们相对容易地渲染我们的模态。因此，这给表格带来了更干净、更可读和更健壮的代码。</p>
<h3 id="creating-custom-react-hook">创建我们的自定义React挂钩</h3>
<p>我们甚至可以创建一个自定义的React挂钩来构建一个门户:</p>
<pre class="language-javascript hljs">//file name: usePortal.js
// The complete breakdown of this code is in the comments
import { useState, useCallback, useEffect } from "react";
import ReactDOM from "react-dom";
const usePortal = (el) =&gt; {
  const [portal, setPortal] = useState({
    render: () =&gt; null,
    remove: () =&gt; null,
  });

  const createPortal = useCallback((el) =&gt; {
    //render a portal at the given DOM node:
    const Portal = ({ children }) =&gt; ReactDOM.createPortal(children, el);
    //delete the portal from memory:
    const remove = () =&gt; ReactDOM.unmountComponentAtNode(el);
    return { render: Portal, remove };
  }, []);

  useEffect(() =&gt; {
    //if there is an existing portal, remove the new instance.
    //is prevents memory leaks
    if (el) portal.remove();
    //otherwise, create a new portal and render it
    const newPortal = createPortal(el);
    setPortal(newPortal);
    //when the user exits the page, delete the portal from memory.
    return () =&gt; newPortal.remove(el);
  }, [el]);

  return portal.render;
};
export default usePortal; //link this Hook with the project
</pre>
<p>在这段代码中，我们定义了一个<code>usePortal</code>钩子，它允许用户在给定的HTML选择器中显示一个<code>Portal</code>元素。</p>
<p>为了查看这个钩子的运行情况，在您的<code>App.js</code>模块中编写以下代码块:</p>
<pre class="language-javascript hljs">//import our custom Hook into the project.
import usePortal from "./usePortal";
function App() {
  //render our portal within the element which has the class of 'me'
  const Portal = usePortal(document.querySelector(".me"));
  return (
    &lt;div className="App"&gt;
      &lt;Portal&gt;Hi, world&lt;/Portal&gt;
    &lt;/div&gt;
  );
}
</pre>
<p>这将是结果:</p>
<p><img data-attachment-id="142023" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-react-hooks/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks.png" data-orig-size="730,398" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal with React Hooks" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks.png" decoding="async" class="aligncenter size-full wp-image-142023 jetpack-lazy-image" src="../Images/0270cd35b10faa8f8b6f6aee7c74e97b.png" alt="React Portal with React Hooks" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-300x164.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142023" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-react-hooks/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks.png" data-orig-size="730,398" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal with React Hooks" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142023" src="../Images/0270cd35b10faa8f8b6f6aee7c74e97b.png" alt="React Portal with React Hooks" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-300x164.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks.png"/></noscript>
<p>请注意，React没有呈现我们的门户。这是因为，在我们的代码中，我们告诉编译器将组件绘制到一个名为<code>me</code>的节点中。然而，在我们的<code>index.html</code>文件中，我们还没有创建一个<code>me</code>元素。</p>
<p>要解决这个问题，将这行代码添加到<code>index.html</code>:</p>
<pre class="language-html hljs">&lt;!-- Create a div with a className of 'me'. Our portal will be rendered here ---&gt;
&lt;div class="me"&gt;&lt;/div&gt;
&lt;!-- Further code.... --&gt;
</pre>
<p><img data-attachment-id="142025" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-react-hooks-complete/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete.png" data-orig-size="730,483" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal with React Hooks complete" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete-300x198.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete.png" decoding="async" class="aligncenter size-full wp-image-142025 jetpack-lazy-image" src="../Images/8002f699db061168dd15ce5a14590048.png" alt="React Portal with React Hooks Complete" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete-300x198.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142025" data-permalink="https://blog.logrocket.com/learn-react-portals-example/attachment/react-portal-react-hooks-complete/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete.png" data-orig-size="730,483" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Portal with React Hooks complete" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete-300x198.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142025" src="../Images/8002f699db061168dd15ce5a14590048.png" alt="React Portal with React Hooks Complete" srcset="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete-300x198.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/react-portal-react-hooks-complete.png"/></noscript>
<h2>结论</h2>
<p>我们已经一步一步地介绍了React Portal最常见的用例，解释了它如何在一个真实的例子中从头开始开发工具提示组件。此外，我们还讨论了使用React钩子和门户来帮助我们构建定制钩子。</p>
<p>当然，一般化不可能没有它的权衡。门户工具提示的复杂性比纯粹的CSS/HTML解决方案更大，这取决于开发人员在正确的时间选择正确的方法。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>