<html>
<head>
<title>The quiet revolution: How JSON displaced XML - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>安静的革命:JSON如何取代XML - LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/the-quiet-revolution-how-json-displaced-xml-1e1f3e8552f7/#0001-01-01">https://blog.logrocket.com/the-quiet-revolution-how-json-displaced-xml-1e1f3e8552f7/#0001-01-01</a></blockquote><div><article class="article-post">
<p><img decoding="async" class="graf-image jetpack-lazy-image" src="../Images/5e75d1368207a4cc0981f8dd2f911cb1.png" data-image-id="1*L3a36IrkMQJmPGuOkiEaQg.jpeg" data-width="770" data-height="577" data-is-featured="true" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*L3a36IrkMQJmPGuOkiEaQg.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://storage.googleapis.com/blog-images-backup/1*L3a36IrkMQJmPGuOkiEaQg.jpeg"/></p><noscript><img data-lazy-fallback="1" decoding="async" class="graf-image" src="../Images/5e75d1368207a4cc0981f8dd2f911cb1.png" data-image-id="1*L3a36IrkMQJmPGuOkiEaQg.jpeg" data-width="770" data-height="577" data-is-featured="true" data-original-src="https://storage.googleapis.com/blog-images-backup/1*L3a36IrkMQJmPGuOkiEaQg.jpeg"/></noscript>
<p>我的一位计算机科学教授曾经说过，“为了让我理解你的代码，给我看你的数据。”数据设计是代码设计的核心。它可以塑造代码的特征。架构决策可以对程序执行期间使用的数据量和数据类型进行评估。</p>
<p>虽然在软件应用程序中从关系数据库甚至是包含数据列的平面文件(CSV或TSV)中读取数据并不罕见，但通常需要更优雅的结构来表达数据之间更复杂的关系。这就是XML和JSON被广泛使用的地方。XML已经使用了很多年，但是JSON逐渐成为许多应用程序选择的数据格式。</p>
<p>XML和JSON都有一些反映计算机应用程序中数据组织方式的基本特性:</p>
<ul>
<li>具有属性的数据对象</li>
<li>表达数据对象之间从属关系的层次结构</li>
<li>数组在一个地方收集尽可能多的相似数据对象</li>
</ul>
<p><strong>带属性的数据</strong>是计算机科学中的一个基本概念。这是面向对象编程的核心特性，在C和C++有结构之前，Lisp有关联列表和属性。属性捕捉数据的特征。一个代表客户的数据对象会有名字、姓氏、年龄、性别等细节。具有属性的数据对象也可以表示字典，即从一组数据值映射到另一组数据值的结构(就像月份名称到月份号的映射，“一月”是1，“二月”是2，等等)。这是一种在软件中编码一些智能的强大方法，定义了反映数据之间含义的关联。</p>
<p><strong>层级</strong>是表达相关对象之间关系的常用方式。客户可能有一个地址，该地址又有一些属性，如街道名称、城市、国家和邮政编码。层次结构可能还涉及分组，比如客户未完成的产品订单列表。</p>
<p><strong>数组</strong>提供了一种在一个地方收集多个数据实例的方法，提供了在一个简单的代码循环结构中处理数据的机会。同一个编程循环可以处理任意数量的数据，无论是500还是5，000，000，并且是创建能够灵活处理任意大量数据的强大代码的关键。</p>
<h2>XML的诞生</h2>
<p>20世纪90年代中期，软件开发人员开始使用<a href="https://en.wikipedia.org/wiki/XML" target="_blank" rel="noopener noreferrer"> XML </a>来定义结构化数据。HTML已经被非常成功地用来标记web文档的元素，以指定它们的外观。XML使用非常相似的标记符号来指定数据的各个部分及其重要性。HTML是为网页浏览器阅读和解释而设计的。XML被设计成主要由应用软件读取。</p>
<p>下面是一个XML语法的例子，表示关于客户及其最近订单的一些数据，展示了属性、层次结构和数组:</p>
<pre>&lt;customers&gt;
  &lt;customer firstName="Pat" lastName="Smith"&gt;
    &lt;address&gt;
      &lt;city&gt;Anytown&lt;/city&gt;
      &lt;country&gt;United States&lt;/country&gt;
      &lt;state&gt;Missouri&lt;/state&gt;
      &lt;street&gt;123 Main Street&lt;/street&gt;
    &lt;/address&gt;
    &lt;orders&gt;
      &lt;order&gt;
        &lt;orderDate&gt;20180901&lt;/orderDate&gt;
        &lt;orderId&gt;11111111&lt;/orderId&gt;
        &lt;price&gt;159.99&lt;/price&gt;
        &lt;productName&gt;Floating Bluetooth Speaker&lt;/productName&gt;
        &lt;quantity&gt;1&lt;/quantity&gt;
        &lt;sku&gt;123123123&lt;/sku&gt;
      &lt;/order&gt;
      &lt;order&gt;
        &lt;orderDate&gt;20180915&lt;/orderDate&gt;
        &lt;orderId&gt;22222222&lt;/orderId&gt;
        &lt;price&gt;39.95&lt;/price&gt;
        &lt;productName&gt;Quad Copter&lt;/productName&gt;
        &lt;quantity&gt;1&lt;/quantity&gt;
        &lt;sku&gt;456456456&lt;/sku&gt;
      &lt;/order&gt;
    &lt;/orders&gt;
  &lt;/customer&gt;
&lt;/customers&gt;</pre>
<p>(为了可读性，这里的例子被很好地格式化和缩进。在实际应用中，换行符和缩进很可能会被去掉——即使人类看不到，计算机仍然可以读取。)</p>
<p>XML作为在所谓的“多层”应用程序中在客户端和服务器端之间交换数据的一种方式变得非常流行，并且还通常用于定义许多应用程序的配置文件的格式。开发了软件标准和工具来指定、验证和操作XML结构的数据。<a href="https://en.wikipedia.org/wiki/Document_type_definition" target="_blank" rel="noopener noreferrer">dtd(数据类型定义)</a>以及后来的<a href="https://en.wikipedia.org/wiki/XML_schema" target="_blank" rel="noopener noreferrer"> XSchema </a>来表达XML数据的结构，<a href="https://en.wikipedia.org/wiki/XSLT" target="_blank" rel="noopener noreferrer"> XSLT </a>将XML数据从一种格式转换成另一种格式——这些格式本身都以XML格式编码(在dtd的情况下类似于XML)。</p>
<p>但是XML的流行也伴随着B2B应用的增长。XML开始被用来在大大小小的合作公司之间传递业务关键数据，像Aruba和T2 Commerce One这样的初创公司在这个时候出现，为数据交换提供平台和工具包。</p>
<p>SOAP(“简单对象访问协议”)是作为基于XML的交换协议而引入的:一个XML报头的公共“信封”,它提供了一种指定寻址/路由和安全性的方法，以及“有效负载”部分，它承载了要从一台计算机发送到另一台计算机的特定于应用程序的数据。其他标准是在B2B应用的“电子数据交换”(EDI)的大框架下开发的。</p>
<h2>XML——好的、坏的、丑陋的</h2>
<p>XML是一个强大的数据处理和交换标准。但是它有一些怪癖和局限性。</p>
<p>它可能非常冗长。XML元素开始处的前导标记定义了机器处理的内容，以便人们能够阅读。当您将“Customer”视为XML元素的开头时，您就知道该元素包含哪种数据。尾随标签稍微提高了人们的可读性，但并没有真正增加机器的可读性。取消XML元素的结束标记，采用更简单的方式来终止内容，可以显著减少数据的大小。</p>
<p>此外，XML中没有数组元素的显式表示。打算作为一个组来处理的相似对象的集合被简单地放在一个公共元素下。但是在XML数据中没有明确指出这种意图。可以在DTD或XSchema中创建一个规范来定义这一点，从阅读处理数据的代码中可以清楚地看到，代码正在循环处理重复的XML元素。</p>
<p>但是XML没有提供数据数组的可视指示器。可以通过使用包装元素(比如一组<code>&lt;order&gt;</code>元素周围的<code>&lt;orders&gt;</code>元素)来<strong class="markup--strong markup--p-strong">创建</strong>这样的指示器，但是这种语法在XML中不是必需的。</p>
<p>XML确实支持命名空间，命名空间是元素名称的前缀，表示它属于某个相关标记组，很可能是由一个单独的组织发起的，并由一个不同的XML模式管理。它对计算机的组织和验证很有用(特别是对数据交换的各个部分进行划分/分类:SOAP信封与有效负载，等等)。)，但是增加了XML解析的复杂性以及读者的视觉混乱。</p>
<p>接下来是软件工程中一个经典的争论话题(就在那里，用“同一行或下一行的花括号”):<a href="https://www.ibm.com/developerworks/xml/library/x-eleatt/index.html" target="_blank" rel="noopener noreferrer">属性或元素应该用于数据对象的属性</a>？XML将这种选择留给了实现者。关于客户对象的详细信息同样可以使用XML属性来指定:</p>
<pre>&lt;customers&gt;
  &lt;customer firstName="Pat" lastName="Smith"&gt;
  ...</pre>
<p>…或者使用XML数据对象的子元素:</p>
<pre>&lt;customers&gt;
  &lt;customer&gt;
    &lt;firstName&gt;Pat&lt;/firstName&gt;
    &lt;lastName&gt;Smith&lt;/lastName&gt;
    ...</pre>
<p>元素的属性名必须是唯一的，不能超过一个。但是在任何给定的元素下，可以有多个具有相同标记名的子元素。</p>
<p>子元素有一个隐含的顺序，可以被生产和消费代码视为有意义的(没有任何视觉提示)。属性没有明确的顺序。</p>
<p>有一种观点认为属性应该表达与XML元素的“是-是”关系，而子元素表达的是“有-是”关系，但是在很多情况下，这个决定是一个灰色区域。</p>
<h2 id="d2f4" class="graf graf--h3 graf-after--p">JSON到达现场</h2>
<p>在21世纪初，提出了一种替代格式:JavaScript对象表示法，又名JSON。JSON作为ECMAScript规范早期版本的一部分出现，由<a href="http://crockford.com/" target="_blank" rel="noopener noreferrer">道格拉斯·克洛克福特</a>(《JavaScript:精彩部分》的作者)倡导。2006年，克罗克福德创建了json.org的<a href="http://www.json.org/" target="_blank" rel="noopener noreferrer">网站</a>来赞美JSON的优点，称JSON是“一种轻量级的数据交换格式”。对人类来说，读和写很容易。机器很容易解析生成。它基于JavaScript编程语言的一个子集”。</p>
<p>下面是一个相同的客户数据示例，格式为JSON:</p>
<pre>{"customers": [{
    "customer": {
        "lastName": "Smith",
        "firstName": "Pat",
        "address": {
            "city": "Anytown",
            "country": "United States",
            "state": "Missouri",
            "street": "123 Main Street"
        },
    "orders": [
            {
        "orderDate": "20180901",
        "orderId": "11111111",
        "price": 159.99,
        "productName": "Floating Bluetooth Speaker",
        "quantity": 1,
        "sku": "123123123"
            },
            {
        "orderDate": "20180915",
        "orderId": "22222222",
        "price": 39.95,
        "productName": "Quad Copter",
        "quantity": 1,
        "sku": "456456456"
            }
    ]
    }
}]}</pre>
<p>JSON显式地表示对象(字典)和数组。它本质上是一种字典类型的数据表示。XML层次结构是用XML中的嵌套元素表示的，而在JSON中，它是用父对象的一个属性(或者用JavaScript术语来说，一个属性)来表示的，父对象的值是子对象(注意上面例子中的“address”或“orders”属性)。数组也是用方括号显式表示的，可以保存基本类型，如字符串或数字以及对象。</p>
<p>与XML格式相比，JSON大大简化了事情。JSON中唯一可以表达的关联是属性。层次结构由嵌套的花括号表示，其中每个花括号括起来的对象都与其父对象的一个属性相关联。在层次结构的每一层都没有终止名称或标签，只有一个右花括号，这使得JSON比XML更简单、更简洁地编码数据集合。</p>
<p>这与JavaScript语言有着密切的联系:JSON本质上是JavaScript对象文字的表示，对象文字是JavaScript的核心特性之一。</p>
<p>JSON当然是作为JavaScript发展的一部分成长起来的，成为今天卓越的软件开发语言。随着Angular和React等越来越复杂的JavaScript框架的出现(还有grunt、gulp、web pack……这个列表还在继续),同构开发的概念已经深入人心:到处都在使用JavaScript。</p>
<p>有几本书是关于<a href="https://www.mongodb.com/blog/post/the-modern-application-stack-part-1-introducing-the-mean-stack" target="_blank" rel="noopener noreferrer">“MEAN”开发</a>的，使用MongoDB、Express、Angular和Node作为web应用程序的所有层(用您选择的前端框架代替Angular)。JSON是服务器端和前端之间数据交换格式的自然选择。</p>
<p>这是在MongoDB中存储数据的自然格式(MongoDB是用C++实现的，但以类似JSON的格式存储数据，这种格式被称为BSON，是JSON的二进制序列化)。MongoDB查询中的条件使用JavaScript对象文字表示，JavaScript代码可用于解释MongoDB查询的JSON结果。</p>
<p>解析XML需要使用API——某种用编程语言编写的库。JSON也是如此，除了在JavaScript中:<code>JSON.parse()</code>函数(从ES6开始支持)将JSON从字符串形式转换成本地JavaScript对象、数组和散列。一旦JSON被解析，它就可以作为常规的JavaScript数据结构被遍历。</p>
<p>这是JSON让JavaScript中的同构编程大获成功的另一种方式！其他软件开发语言(Python、PHP、Ruby、Java)确实提供了现成的JSON解析支持，使JSON成为在用不同语言编写的应用程序之间交换数据的一种方式。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<h2>回到未来:JSON数据表示的先驱</h2>
<p>JSON数据看起来如此像JavaScript对象字面语法可能不是偶然的。</p>
<p>JavaScript的创始人布伦丹·艾希(Brendan Eich)从JavaScript的语言<a href="https://en.wikipedia.org/wiki/Scheme_%28programming_language%29" target="_blank" rel="noopener noreferrer">计划</a>和<a class="markup--anchor markup--p-anchor" href="https://en.wikipedia.org/wiki/Self_%28programming_language%29" target="_blank" rel="noopener noreferrer" data-href="https://en.wikipedia.org/wiki/Self_(programming_language)">自我</a>中借鉴了一些想法。Scheme是<a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29" target="_blank" rel="noopener noreferrer"> Lisp </a>的一种方言，Lisp的语法是“<a href="https://en.wikipedia.org/wiki/Homoiconicity" target="_blank" rel="noopener noreferrer">同音</a>”——代码和数据以完全相同的方式表示，使用非常简单的嵌套括号语法。Lisp中的所有代码和数据都是一个列表(就像一个数组)。字典可以用嵌套列表来表示。</p>
<p>下面是Lisp中表示的相同客户数据的一个示例:</p>
<pre>(setq customer
      '((firstName "Pat")
    (lastName "Smith")
    (address (street "123 Main Street")
         (city "Anytown")
         (state "Missouri")
         (country "United States"))
    (orders ((order (orderId "11111111")
            (orderDate "20180901")
            (productName "Floating Bluetooth Speaker")
            (quantity 1)
            (sku "123123123")
            (price 159.99))
         (order (orderId "22222222")
            (orderDate "20180915")
            (productName "Quad Copter")
            (quantity 1)(sku "456456456")
            (price 39.95)) )) ))</pre>
<p>下面是一个解释数据的简单Lisp函数:</p>
<pre>(defun find-orders (customer)
  (assoc 'orders customer))</pre>
<p>…以及功能和数据如何协同工作的演示:</p>
<pre>&gt; (find-orders customer)
(orders ((order (orderId "11111111") (orderDate "20180901") ...)))</pre>
<p>Lisp列表中的第一个元素很重要。在代码中，它是可执行的“形式”(一个函数)的开始，但在数据中，它通常作为一个标签，以某种方式与列表中的后续元素相关联。如上面的代码所示，“assoc”函数通过测试每个子列表的第一个元素来查找数据。这相当于其他编程语言中的字典查找。</p>
<p>这种数据和代码的等价性在很大程度上延续到了JavaScript。JSON不仅与JavaScript对象文字的表示非常相似(但不完全相同),而且它还是可解析的JavaScript代码。几年前，使用内置的JavaScript <code>eval()</code>函数来计算JSON数据并将其转换为对象文字是很常见的。</p>
<p><code>eval()</code>函数在Lisp中也是标准的。它可能是第一种使用REPL或读取-评估-打印循环的编程语言。如今，对从外部来源提交的任意数据使用<code>eval()</code>被认为是一种安全风险，但是更新的(也更安全的)<code>JSON.parse()</code>方法符合这个目的。还有一个function对象，它提供了一种将字符串转换成JavaScript函数的方法——这再次体现了代码和数据的双重性，这种双重性始于Lisp，延续到今天的JavaScript中。</p>
<h2>我们今天在哪里</h2>
<p>JSON使用更简单的语法来表示软件开发中两种最基本的数据结构:字典和数组。它与JavaScript语法的紧密结合使其成为许多应用程序数据格式的理想选择。解析JSON数据非常简单，只需使用<code>JSON.parse()</code>将其转换成JavaScript，然后将结果作为常规的JavaScript对象进行遍历。</p>
<p>它在语法上比XML更简单，元素对元素，占用更少的空间来捕获数据集合，使标记不那么密集，更容易让人阅读。JSON的特性，如显式数组和将数据对象属性明确表示为JavaScript属性，促进了更简单、更清晰的语法。</p>
<p>然而，XML今天并没有消亡。使用RSS的网站聚合仍然被广泛使用(这是WordPress的一个基本特性，它驱动了今天的许多网站)，最近的一篇文章暗示它可能会卷土重来。电子数据交换(EDI)仍然被大公司广泛使用。</p>
<p>最近一篇关于NotPetya勒索软件攻击的报道讲述了国际航运公司马士基(Maersk)如何在他们的航运和物流EDI不再运行时关闭数日，导致集装箱卡车在航运码头排队，世界各地的交付停滞。</p>
<p>但是将对象之间的关联表示为嵌套层次结构并不适合某些应用程序领域。一个例子是社交网络数据，GraphQL(由脸书倡导，仍然使用类似JSON的表示)通常是一种选择。</p>
<p><a href="https://www.w3.org/RDF/" target="_blank" rel="noopener noreferrer"> RDF </a>(由<a href="https://www.w3.org/standards/semanticweb/" target="_blank" rel="noopener noreferrer"> W3C语义网组</a>开发的基于XML的表示)也使用“(主语、谓语、宾语)”三元组来表示数据的非层次图，其中“宾语”部分可以是对另一个三元组的引用，以定义数据之间关系的一般图。它被用于<a href="https://en.wikipedia.org/wiki/Resource_Description_Framework" target="_blank" rel="noopener noreferrer">许多网络项目</a>。</p>
<p>最初在XML中使用的命名空间现在也出现在HTML的标记数据中(例如，像twitter和脸书卡片标记中的“Twitter:”和“og:”命名空间这样的语义标记)。</p>
<p>但是，对于许多应用程序来说，JSON极大地简化了基于互联网的软件系统的实现。这是一个JavaScript世界，JSON扮演着重要的角色！</p><div class="code-block code-block-2">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>