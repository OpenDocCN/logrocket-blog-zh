<html>
<head>
<title>Introduction to Preact : A smaller, faster React alternative - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Preact简介:一个更小、反应更快的替代博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/introduction-to-preact-a-smaller-faster-react-alternative-ad5532eb6d79/#0001-01-01">https://blog.logrocket.com/introduction-to-preact-a-smaller-faster-react-alternative-ad5532eb6d79/#0001-01-01</a></blockquote><div><div class="section-inner sectionLayout--insetColumn">
<p id="6c9b" class="graf graf--p graf-after--figure">Preact是一个JavaScript库，它将自己描述为一个快速的3kB替代方案，用于与相同的ES6 API进行交互。作为react的经常用户，我一直想尝试Preact，看看它提供了什么，以及Preact和React之间的区别。在本文中，我将介绍Preact、它的关键概念以及Preact和react之间的区别。</p>
<p id="458b" class="graf graf--p graf-after--p">我还将通过构建一个Preact应用程序来展示Preact如何与外部API一起工作，该应用程序显示来自<a class="markup--anchor markup--p-anchor" href="http://dribbble.com" target="_blank" rel="noopener noreferrer" data-href="http://dribbble.com"> Dribbble </a>的最新出道镜头。</p>
<h3 id="99f1" class="graf graf--h3 graf-after--p">Preact简介</h3>
<p id="290e" class="graf graf--p graf-after--h3">如上所述，Preact是由<a class="markup--anchor markup--p-anchor" href="https://github.com/developit" target="_blank" rel="noopener noreferrer" data-href="https://github.com/developit">杰森·米勒</a>和一群<a class="markup--anchor markup--p-anchor" href="https://github.com/developit/preact/graphs/contributors" target="_blank" rel="noopener noreferrer" data-href="https://github.com/developit/preact/graphs/contributors">贡献者</a>开发的react的3kb替代品。Preact的开发目标是构建一个小型的JavaScript框架，同时提供与React ships相同的API和特性。</p>
<p id="ea1b" class="graf graf--p graf-after--p">总大小为3kb，这意味着您不必担心您的JavaScript库/框架会占用应用程序总JavaScript大小的大部分。</p>
<p id="e6fe" class="graf graf--p graf-after--p">Preact速度很快，不仅仅是因为它的大小。得益于简单且可预测的diff实现，它是最快的虚拟DOM库之一。</p>
<p id="e7fd" class="graf graf--p graf-after--p">Preact旨在实现几个<a class="markup--anchor markup--p-anchor" href="https://preactjs.com/about/project-goals" target="_blank" rel="noopener noreferrer" data-href="https://preactjs.com/about/project-goals">关键目标</a>:</p>
<ul class="postList">
<li id="eea1" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">性能:</strong>渲染迅速&amp;高效</li>
<li id="b32f" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">尺寸:</strong>体积小，重量轻</li>
<li id="445f" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">效率:</strong>有效内存使用率</li>
<li id="ee1a" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">可理解性:</strong>理解代码库不会超过几个小时</li>
<li id="4fe0" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">兼容性:</strong> Preact的目标是<em class="markup--em markup--li-em">在很大程度上兼容</em>React API。preact-compat 试图实现与react尽可能多的兼容性。稍后会有更多关于<code>preact-compat</code>的内容。</li>
</ul>
<p id="ddc3" class="graf graf--p graf-after--li">Preact在浏览器上运行良好(支持所有浏览器)，尽管它可能需要一些用于IE7和IE8的polyfills。Preact也通过大量的<a class="markup--anchor markup--p-anchor" href="https://preactjs.com/about/libraries-addons" target="_blank" rel="noopener noreferrer" data-href="https://preactjs.com/about/libraries-addons">插件</a>被社区广泛采用，公司现在开始转向JavaScript库。</p>
</div>
<div class="section-inner sectionLayout--insetColumn">
<p id="043e" class="graf graf--p graf-after--figure">Preact现在被Lyft、Housing.com和m.uber.com这样的公司使用。优步的工程团队最近写了一篇<a class="markup--anchor markup--p-anchor" href="https://eng.uber.com/m-uber/" target="_blank" rel="noopener noreferrer" data-href="https://eng.uber.com/m-uber/">文章</a>，强调了Preact如何用于构建移动版的优步，这反过来又导致了更好的性能，这主要是因为它的尺寸非常小。</p>
<figure id="21d0" class="graf graf--figure graf--iframe graf-after--p">

<p/></figure>
<h3 id="4544" class="graf graf--h3 graf-after--figure">Preact和react有什么不同？</h3>
<p id="8070" class="graf graf--p graf-after--h3">这是许多React开发人员在考虑Preact时会问的问题。React已经是一个相当不错的JavaScript库，重约45kb。那么你为什么会考虑用Preact构建应用呢？</p>
<blockquote id="83d0" class="graf graf--blockquote graf-after--p"><p>Preact本身并不是react的重新实现。有区别。这些差异中有许多是微不足道的，或者可以通过使用<a class="markup--anchor markup--blockquote-anchor" href="https://github.com/developit/preact-compat" target="_blank" rel="noopener noreferrer" data-href="https://github.com/developit/preact-compat"> preact-compat </a>来完全消除，这是preact上的一个薄层，试图实现与react的100%兼容性。—Preactjs.com</p></blockquote>
<p id="d80f" class="graf graf--p graf-after--blockquote"><strong class="markup--strong markup--p-strong">文件大小</strong></p>
<p id="f2d5" class="graf graf--p graf-after--p">首先，文件大小有一个巨大的鸿沟。Preact的3kb对react的45kb是显而易见的。Preact没有试图包含react的每一个特性的原因是为了保持小巧和专注<strong class="markup--strong markup--p-strong">。</strong></p>
<p id="3af6" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">类与类名</strong></p>
<p id="8258" class="graf graf--p graf-after--p">当使用React时，如果你想给一个<code>div</code>添加一个类，你必须这样做。</p>
<pre id="3add" class="graf graf--pre graf-after--p"># React code
&lt;div className="class-here"&gt;Content Here&lt;/div&gt;</pre>
<p id="6a9b" class="graf graf--p graf-after--pre">在Preact中，你可以对CSS类使用<code>class</code>。仍然支持<code>className</code>，但是Preact鼓励你使用<code>class</code>。</p>
<pre id="9759" class="graf graf--pre graf-after--p"># Preact code
&lt;div class="class-here"&gt;Content Here&lt;/div&gt;</pre>
<p id="0352" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong"> render() </strong></p>
<p id="35eb" class="graf graf--p graf-after--p">在Preact中，<code>this.props</code>和<code>this.state</code>被传给<code>render()</code>给你。这是什么意思？看看下面的代码。</p>
<figure id="e2a2" class="graf graf--figure graf--iframe graf-after--p"/>
<p id="65d6" class="graf graf--p graf-after--figure">正如你在上面看到的，在Preact中，我们可以通过移除<code>this</code>使代码看起来更干净，如果你想更进一步，你可以使用析构。参见下面的示例。</p>
<figure id="b6af" class="graf graf--figure graf--iframe graf-after--p"/>
<p id="c0c7" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">移除支柱类型</strong></p>
<p id="82c4" class="graf graf--p graf-after--p">不是每个人都使用PropTypes，所以它们不是Preact核心的一部分，因此从Preact中移除。如果您仍然想在您的项目中使用PropTypes，您可以在<code>preact-compat</code>的帮助下这样做，或者手动使用它们。</p>
<h3 id="660b" class="graf graf--h3 graf-after--p">使用preact-compat实现preact和react之间的兼容性</h3>
<p id="183f" class="graf graf--p graf-after--h3">preact有一个名为“<a class="markup--anchor markup--p-anchor" href="http://npm.im/preact-compat" target="_blank" rel="noopener noreferrer" data-href="http://npm.im/preact-compat"> <strong class="markup--strong markup--p-strong"> preact-compat </strong> </a>的包，作为Preact和react之间的兼容层。使用<code>preact-compat</code>可以很容易地从反应切换到预反应。切换到Preact可以像在代码中安装和别名<code>preact-compat</code>一样简单。</p>
<p id="282b" class="graf graf--p graf-after--p">这使您可以继续编写React/ReactDOM代码，而无需对工作流或代码库进行任何更改。为您提供支持npm上绝大多数现有React模块的优势。那么如何将<code>preact-compat</code>添加到现有的React代码中呢？</p>
<p id="a8cf" class="graf graf--p graf-after--p">用npm安装<code>preact-compat</code>。</p>
<pre id="3937" class="graf graf--pre graf-after--p">npm i preact-compat</pre>
<p id="f079" class="graf graf--p graf-after--pre">下一步是别名preact-compat。您可以通过将以下resolve.alias配置添加到您的<code>webpack.config.js</code>中来实现这一点</p>
<pre id="2392" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">{
  "resolve": {
    "alias": {
      "react": "preact-compat",
      "react-dom": "preact-compat"
    }
  }
}</code></pre>
<p id="a6ac" class="graf graf--p graf-after--pre">上面的代码块基本上解释为——如果我试图导入一个名为React或ReactDOM的模块，不要给我这些模块，而是给我右边提供的模块。</p>
<h3 id="24f2" class="graf graf--h3 graf-after--p">Preact入门</h3>
<p id="5838" class="graf graf--p graf-after--h3">Preact API和开发人员的体验在很大程度上类似于react，但是开发人员应该知道一些重要的区别。</p>
<p id="d092" class="graf graf--p graf-after--p">为了演示这些，我构建了一个简单的应用程序，使用Dribbble API显示最近的设计。在这里可以看到live app<a class="markup--anchor markup--p-anchor" href="https://build-yjnahwkwzs.now.sh/" target="_blank" rel="noopener noreferrer" data-href="https://build-yjnahwkwzs.now.sh/">，在它的Github </a><a class="markup--anchor markup--p-anchor" href="https://github.com/yomete/preactdribbble" target="_blank" rel="noopener noreferrer" data-href="https://github.com/yomete/preactdribbble"> repo </a>可以看到app的源代码。</p>
<p id="1e07" class="graf graf--p graf-after--p">在这里，我将指出开发人员在使用Preact进行构建时应该注意的一些关键区别。</p>
<figure id="ddfb" class="graf graf--figure graf-after--p">
<figcaption class="imageCaption">PreactDribbble</figcaption></figure>
<p id="9316" class="graf graf--p graf-after--figure">为了构建Preact应用程序，我们将使用<a class="markup--anchor markup--p-anchor" href="https://github.com/developit/preact-cli" target="_blank" rel="noopener noreferrer" data-href="https://github.com/developit/preact-cli"> Preact CLI </a>。Preact CLI是Preact团队的一个项目，帮助开发人员轻松开始使用Preact。Preact CLI可帮助您生成渐进式Web应用程序，并附带以下功能:</p>
<ul class="postList">
<li id="48d1" class="graf graf--li graf-after--p">由<a class="markup--anchor markup--li-anchor" href="https://github.com/GoogleChrome/sw-precache" target="_blank" rel="noopener noreferrer" data-href="https://github.com/GoogleChrome/sw-precache"> sw-precache </a>支持的自动生成的<a class="markup--anchor markup--li-anchor" href="https://developers.google.com/web/fundamentals/getting-started/primers/service-workers" target="_blank" rel="noopener noreferrer" data-href="https://developers.google.com/web/fundamentals/getting-started/primers/service-workers">服务工作者</a>用于离线缓存</li>
<li id="a96c" class="graf graf--li graf-after--li">路线的自动代码分割。</li>
<li id="db82" class="graf graf--li graf-after--li"><a class="markup--anchor markup--li-anchor" href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/" target="_blank" rel="noopener noreferrer" data-href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/"> PRPL </a>模式支持高效装载。</li>
<li id="94f3" class="graf graf--li graf-after--li">支持CSS模块，LESS，Sass，手写笔；使用Autoprefixer。</li>
<li id="2d53" class="graf graf--li graf-after--li">自动安装应用程序，调试助手和热模块更换。</li>
<li id="1041" class="graf graf--li graf-after--li">零配置预渲染/服务器端渲染水合</li>
</ul>
<p id="e6ee" class="graf graf--p graf-after--li"><code>preact-cli</code>工具旨在帮助您在很少或没有构建配置的情况下开始编写Preact代码。通过运行下面的命令在您的计算机上安装<code>preact-cli</code>。</p>
<pre id="d845" class="graf graf--pre graf-after--p">npm install -g preact-cli</pre>
<p id="e0af" class="graf graf--p graf-after--pre">成功安装CLI后，在您的终端中运行以下命令，创建一个新的应用程序。<code>preactdribbble</code>是要创建的应用程序的名称，可以称为任何名称，应用程序的名称不必以<code>preact</code>为前缀。</p>
<pre id="f569" class="graf graf--pre graf-after--p">preact create preactdribbble</pre>
<p id="996a" class="graf graf--p graf-after--pre">这将创建一个名为<code>preactdribble</code>的新文件夹，其中包含Preact应用程序所需的所有文件。导航到<code>preactdribbble</code>文件夹，因为我们现在将从那里开始工作。让我们启动应用程序，看看它是什么样子的。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<pre id="f6b5" class="graf graf--pre graf-after--p"># start a live-reload/HMR dev server:
npm start</pre>
<p id="b10d" class="graf graf--p graf-after--pre graf--trailing">这将在http://0 . 0 . 0 . 0:8080或http://localhost:8080上启动一个带有<strong class="markup--strong markup--p-strong">H</strong>ot<strong class="markup--strong markup--p-strong">M</strong>module<strong class="markup--strong markup--p-strong">R</strong>e loading(HMR)的开发服务器。</p>
</div>
</div>    
</body>
</html>