<html>
<head>
<title>Mimic WhatsApp stories using React Native and Firestore - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用React Native和Firestore - LogRocket博客模仿WhatsApp的故事</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/#0001-01-01">https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/#0001-01-01</a></blockquote><div><article class="article-post">
<p>故事现在是大多数社交媒体应用程序的趋势特征，包括WhatsApp、Snapchat、Instagram等。此功能为我们提供了另一种途径，以图像、视频和文本的形式与您的联系人或朋友共享媒体，并让您知道谁查看了您的故事。故事更吸引人的一个方面是它们是短暂的——它们通常只有24小时可以观看。</p>
<p><img data-attachment-id="5714" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/yeah-i-know/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/yeah-i-know.gif" data-orig-size="478,268" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Yeah I know" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/yeah-i-know-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/yeah-i-know.gif" decoding="async" class="aligncenter size-full wp-image-5714 jetpack-lazy-image" src="../Images/2fbabd5df6261875d0668a28078c8060.png" alt="Yeah I Know GIF" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/yeah-i-know.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/yeah-i-know.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="5714" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/yeah-i-know/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/yeah-i-know.gif" data-orig-size="478,268" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Yeah I know" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/yeah-i-know-300x168.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/yeah-i-know.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-5714" src="../Images/2fbabd5df6261875d0668a28078c8060.png" alt="Yeah I Know GIF" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/yeah-i-know.gif"/></noscript>
<p>如果你知道，为什么你会在这里？</p>
<p>哦！我明白了。你需要关于如何使用<a href="https://blog.logrocket.com/the-state-of-react-native-web-in-2019-6ab67ac5c51e/" target="_blank" rel="noopener noreferrer"> React Native </a>和Firestore开发你自己的故事功能的教程！让我们开始吧。</p>
<p>我已经用React导航、Redux和Firebase身份验证以及Firestore数据库配置了基本的项目设置。在继续之前，让我们回顾一下数据库结构！</p>
<p><code>users</code> → <code>&lt;userIds&gt;</code> → <code>&lt;userData&gt;</code></p>
<p><img data-attachment-id="5717" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/users-collection-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The users collection in our database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database.png" decoding="async" class="aligncenter size-full wp-image-5717 jetpack-lazy-image" src="../Images/2e8e3f6d8008d5f425669d96cb3d345a.png" alt="The Users Collection In Our Database" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="5717" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/users-collection-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The users collection in our database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-5717" src="../Images/2e8e3f6d8008d5f425669d96cb3d345a.png" alt="The Users Collection In Our Database" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/users-collection-database.png"/></noscript>
<p><code>users</code> → <code>&lt;userId&gt;</code> → <code>stories</code> → <code>&lt;storyId&gt;</code> → <code>&lt;storyData&gt;</code></p>
<p><img data-attachment-id="5718" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/stories-collection-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database.png" data-orig-size="730,336" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The stories collection in our database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database.png" decoding="async" class="aligncenter size-full wp-image-5718 jetpack-lazy-image" src="../Images/1641f2a489045fad2c33d1912a9a0efb.png" alt="The Stories Collection In Our Database" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="5718" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/stories-collection-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database.png" data-orig-size="730,336" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The stories collection in our database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-5718" src="../Images/1641f2a489045fad2c33d1912a9a0efb.png" alt="The Stories Collection In Our Database" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/stories-collection-database.png"/></noscript>
<h2>开始吧！</h2>
<p>现在，我们必须实现三个目标:</p>
<ol>
<li>添加您的故事/状态</li>
<li>列出用户的所有状态</li>
<li>查看用户的所有状态</li>
</ol>
<p>所以先说第一点！</p>
<h3>1.)添加您的故事/状态</h3>
<p>让我们首先从Expo的<a href="https://docs.expo.io/versions/latest/sdk/imagepicker/">图像拾取器</a>中拾取一些图像，并将它们转换成blob，以便上传到Firebase存储，并将记录上传/添加到Firestore收藏中。</p>
<h4>AddStory.js</h4>
<pre>  _handleSelectImage = async () =&gt; {
    let result = await ImagePicker.launchImageLibraryAsync({
      mediaTypes: "Images"
    });
    if (!result.cancelled) {
      this.setState({ image: result.uri });
    }
  };

  _handleSubmit = async () =&gt; {
    const { userId } = this.props;
    const { image, title } = this.state;

    if (image) {
        try {
          // Converting image to blob
          const image = await blobMaker(image);

          // Uploading image in Firebase storage
          const tempImage = await firebase
            .storage()
            .ref()
            .child(`images/${new Date().getTime()}.jpg`)
            .put(image);
          const imageURL = await tempImage.ref.getDownloadURL();
          const createdAt = firebase.firestore.Timestamp.now().toMillis();
          // Preparing object to be pushed in Firestore
          const payload = {
            image: imageURL,
            viewedBy: [],
            createdAt
          };
          if (title) {
            payload.title = title;
          }
          // Pushing story data into `stories` subcollection of collection `users`
          await firebase
            .firestore()
            .collection("users")
            .doc(userId)
            .collection("stories")
            .add(payload);
          // And updating the last story time in user's document, this will help us to sort by latest story in the list screen
          await firebase
            .firestore()
            .collection("users")
            .doc(userId)
            .set(
              {
                updatedAt: createdAt
              },
              { merge: true }
            );

          this.props.navigation.navigate("Stories")
        } catch (error) {

          this.setState({ loading: false });
        }
      }
    }
  };

  render() {
    &lt;ScrollView contentContainerStyle={styles.container}&gt;
        {/* Title View */}
        &lt;View style={styles.inputContainer}&gt;
            &lt;Text&gt;Title (Optional)&lt;/Text&gt;
            &lt;TextInput
              style={styles.input}
              value={title}
              onChangeText={title =&gt; this.setState({ title })}
            /&gt;
        &lt;/View&gt;
        {/* Image View */}
        &lt;View style={styles.buttonContainer}&gt;
            &lt;Button
              title={image ? "Change Image" : "Select Image"}
              style={styles.button}
              onPress={this._handleSelectImage}
            /&gt;
            {image &amp;&amp; &lt;Image source={{uri: image}} style={styles.image}/&gt;}
        &lt;/View&gt;
        {/* Submit View */}
        &lt;View style={styles.buttonContainer}&gt;
            &lt;Button
              title="Submit"
              style={styles.button}
              onPress={this._handleSubmit}
            /&gt;
        &lt;/View&gt;
    &lt;/ScrollView&gt;
}</pre>
<p><img data-attachment-id="5720" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/adding-image-to-story/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story.png" data-orig-size="612,646" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding an image to our story" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story-284x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story.png" decoding="async" class="aligncenter size-full wp-image-5720 jetpack-lazy-image" src="../Images/d41ebb1afcbe9eab2a5a03c72e51e4db.png" alt="Adding An Image To Our Story" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story.png 612w, https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story-284x300.png 284w" data-lazy-sizes="(max-width: 612px) 100vw, 612px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="5720" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/adding-image-to-story/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story.png" data-orig-size="612,646" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding an image to our story" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story-284x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-5720" src="../Images/d41ebb1afcbe9eab2a5a03c72e51e4db.png" alt="Adding An Image To Our Story" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story.png 612w, https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story-284x300.png 284w" sizes="(max-width: 612px) 100vw, 612px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/adding-image-to-story.png"/></noscript><br/>
Congratulations! We are done with uploading our very first image/story to Firebase storage and updating the record in Firestore. Now let’s move to the second target.
<h3>2.)列出用户的所有状态</h3>
<p>因此，我们向Firestore用户集合中添加了记录。现在我们去拿那些记录。首先，我们需要使用快照对所有用户集合进行Firebase查询。你会问，为什么要快照？因为我们需要所有用户的实时数据。</p>
<h4>AllStories.js</h4>
<pre>listenAllUsers = async () =&gt; {
    const { userId } = this.props;
    try {
      // Listening to users collections
      await firebase
        .firestore()
        .collection("users")
        .onSnapshot(snapshot =&gt; {
          if (!snapshot.empty) {
            let user;
            let allUsers = [];

            snapshot.forEach(snap =&gt; {
              const data = { ...snap.data(), _id: snap.id };
              if(data._id === userId) {
                user = data;
              }
              else {
                allUsers.push(data);
              }
            });
            this.setState({ allUsers, user });
          }
        });
    } catch (error) {
      console.log("listenAllUsers-&gt; error", error);
    }
  };</pre>
<p>现在我们已经有了所有的用户，让我们通过更新状态来保存它们。我们的目标是找到所有在过去24小时内有故事的用户——那么我们应该怎么做呢？</p>
<p>我们必须用一个间隔循环来过滤来自所有用户的消息，该循环将重新运行函数，以便我们获得最新的故事状态。</p>
<pre>componentDidMount() {
    // Listening for all users
    this.listenAllUsers();
    // Interval
    this.timeIntervalSubscription = setInterval(() =&gt; {
      if (this.state.allUsers.length) {
        // Filtering all users 
        this.filterUsers();
      }
    }, 500);
}  

filterUsers = () =&gt; {
    const { allUsers } = this.state;
    const filterUsers = allUsers.filter(user =&gt; dateIsWithin24Hours(user.updatedAt));

    this.setState({ filterUsers });
};</pre>
<p>现在我们只需要渲染这些东西。我已经创建了自己的样式组件(<code>AvatarWithStory</code>)来渲染它们——您可以尝试自己的样式组件！</p>
<pre>  render() {
    const { user, filterUsers, allUsers } = this.state;
    return (
      &lt;ScrollView contentContainerStyle={styles.container}&gt;
        {/* My story */}
        &lt;View style={styles.containerWithPadding}&gt;
            &lt;AvatarWithStory
              hasStories={dateIsWithin24Hours(user.updatedAt)}
              user={{ ...user, time: dateFormatter(user.updatedAt) }}
            /&gt;
          )}
        &lt;/View&gt;
        &lt;HrWithText text={`Other Users (${filterUsers.length})`} /&gt;
        {/* All users */}
        &lt;View style={styles.containerWithPadding}&gt;
          {filterUsers &amp;&amp;
            filterUsers.map(user =&gt; (
             &lt;AvatarWithStory
                user={{ ...user, time: dateFormatter(user.updatedAt) }}
             /&gt;
            ))}
        &lt;/View&gt;
      &lt;/ScrollView&gt;
    );
  }
}</pre>
<p><img data-attachment-id="5721" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/list-user-stories/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories.png" data-orig-size="608,594" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="List of user stories" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories-300x293.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories.png" decoding="async" class="aligncenter size-full wp-image-5721 jetpack-lazy-image" src="../Images/63d1ec755e510c248a7f5f38b6c467fb.png" alt="List Of User Stories" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories.png 608w, https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories-300x293.png 300w" data-lazy-sizes="(max-width: 608px) 100vw, 608px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="5721" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/list-user-stories/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories.png" data-orig-size="608,594" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="List of user stories" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories-300x293.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-5721" src="../Images/63d1ec755e510c248a7f5f38b6c467fb.png" alt="List Of User Stories" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories.png 608w, https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories-300x293.png 300w" sizes="(max-width: 608px) 100vw, 608px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/list-user-stories.png"/></noscript>
<p>恭喜你。我们刚刚达到了第二个目标。现在我们来看最后一个目标。</p>
<h3>3.)查看用户的所有状态/经历</h3>
<p>现在，我们处于应用程序的最后阶段:我们需要呈现选定的用户故事/状态。考虑到我们从props或所选用户的导航参数中获取用户ID，我们需要做的就是查询并从其子集合中获取数据。</p>
<p>对于滑动图像，我使用<a href="https://github.com/f111fei/react-native-banner-carousel">react-native-banner-carousel</a>。</p>
<h4>故事. js</h4>
<pre>componentDidMount() {
    // Listening for the selected user story
    this.fetchSelectUserStory();
}  

fetchSelectUserStory = async () =&gt; {
    // Updating currentIndex from -1 to 0 in order to start stories
    this.setState(pre =&gt; ({ ...pre, currentIndex: pre.currentIndex + 1 }));
    // Previous 24 hours server time
    const currentTimeStamp =
      firebase.firestore.Timestamp.now().toMillis() - 24 * 60 * 60 * 1000;
    try {
      // Listening for selected users sub-collections of stories where createdAt is greater than currentTimeStamp
      const tempStories = await firebase
        .firestore()
        .collection("users")
        .doc(this.props.navigation.state.params.id) // Here considering userId is from navigation props
        .collection("stories")
        .orderBy("createdAt", "asc")
        .where("createdAt", "&gt;", currentTimeStamp)
        .get();
      if (!tempStories.empty) {
        const stories = [];
        tempStories.forEach(story =&gt; {
          stories.push({
            ...story.data(),
            id: story.id
          });
        });
        // Updating state according to fetched stories
        this.setState({ stories });
        // Changing slide 
        this.interval();
      }
    } catch (error) {
      console.log("fetchSelectUserStory -&gt; error", error);
    }
  };</pre>
<p>像WhatsApp一样，我们可以检查谁看过我的故事，这是一个非常棒的功能！因此，让我们在应用程序中也加入这一点。当用户查看我的故事时，我们需要做的就是用这些用户的id更新Firestore子集合。</p>
<pre>// Will run on page change
onPageChanged = async index =&gt; {
    const { stories } = this.state;
    const { userId } = this.props;
    // Getting active story from state 
    const activeStory = stories[index];
    // Updating currentIndex 
    this.setState({ currentIndex: index });
    // Changing slide
    this.interval();
    // Checking whether user already viewed the story
    const alreadyViewed = activeStory.viewedBy.filter(
      user =&gt; user === userId
    );
    // If already viewed, return from function
    if (alreadyViewed.length) {
      return;
    }
    // If not, then update record in Firestore 
    try {
      await firebase
        .firestore()
        .collection("users")
        .doc(this.props.id)
        .collection("stories")
        .doc(activeStory.id)
        .set(
          {
            viewedBy: [...activeStory.viewedBy, this.props.userId]
          },
          { merge: true }
        );
    } catch (error) {
      console.log("TCL: Story -&gt; error", error);
    }
  };</pre>
<p>让我们在故事中加入<a href="https://blog.logrocket.com/how-to-make-tinder-like-card-animations-with-react-native/" target="_blank" rel="noopener noreferrer">自动滑动</a>来获得更自然的感觉。10s呢？我认为那太多了——让我们坚持6s吧。</p>
<pre>interval = () =&gt; {
    // Clearing timeout if previous is in subscription
    if (this.clearTimeOut) clearTimeout(this.clearTimeOut);

    // New subscription for current slide
    this.clearTimeOut = setTimeout(() =&gt; {
      const { currentIndex, stories} = this.state;
      // If current slide is the last slide, then remove subscription
      if (Number(currentIndex) === Number(stories.length) - 1) {
        clearTimeout(this.clearTimeOut);
      } else {
        // Updating current slide by 1
        this.setState({ currentIndex: currentIndex + 1 });
        // Checking if carousel exists (ref: check &lt;Carousel /&gt; in render())
        if (this._carousel) {
          const { currentIndex} = this.state;
          // If yes, then move to next slide
          this._carousel.gotoPage(currentIndex);
        }

      }
    }, 6000);
  };</pre>
<p>看看我们的<code>render</code>功能:</p>
<pre>  // Render single slide
  renderPage = (story, index) =&gt; {
    // Changing slide on press 
    const onPress = () =&gt; 
      {
          this.setState(pre =&gt; ({
            ...pre,
            currentIndex:
              pre.currentIndex === pre.stories.length ? 0 : pre.currentIndex + 1
          }));
          this._carousel.gotoPage(this.state.currentIndex);
          this.interval();
        }
      return (
        &lt;TouchableOpacity
          onPress={onPress}
        &gt;
          &lt;View key={index}&gt;
            &lt;Image source={{ uri: story.image }} /&gt;
            {story.title &amp;&amp; (
              &lt;View&gt;
                &lt;Text style={styles.overlayText} numberOfLines={3}&gt;
                  {story.title}
                &lt;/Text&gt;
              &lt;/View&gt;
            )}
          &lt;/View&gt;
        &lt;/TouchableOpacity&gt;
      );
    };
  // Pause slider function
  pauseSlider = () =&gt; clearTimeout(this.clearTimeOut);
  // Go back to screen
  goBack = () =&gt; this.props.navigation.navigate("StoriesScreen");
  // Close modal
  closeModal =() =&gt; 
    {
      this.setState({ modalVisible: false });
      this.interval();
    }
  render() {   
    const { currentIndex, stories, isLoading, stories } = this.state;

    return (
        &lt;View style={styles.container}&gt;
        {/* Header View */}
          &lt;View style={styles.topContainer}&gt;
            {/* Progress Bars on the top of story. See the component below */}
            &lt;TopBar
              index={currentIndex}
              totalStories={stories.length}
              isLast={currentIndex === stories.length- 1}
            /&gt;
            &lt;Header
              goBack={this.goBack}
              user={this.props.user}
              views={
                stories[currentIndex] &amp;&amp; stories[currentIndex].viewedBy.length
              }
              viewsOnPress={this.setModalVisible}
            /&gt;
          &lt;/View&gt;
          {/* Carousel Images View */}
          &lt;View style={styles.bottomContainer}&gt;
            &lt;Carousel
              ref={ref =&gt; (this._carousel = ref)}
              autoplay={false}
              loop={false}
              pageSize={BannerWidth}
              onPageChanged={this.onPageChanged}
              index={currentIndex === -1 ? 0 : currentIndex}
              showsPageIndicator={false}
            &gt;
              {stories.map((story, index) =&gt; this.renderPage(story, index))}
            &lt;/Carousel&gt;
          &lt;/View&gt;
        &lt;/View&gt;
        {/* Viewed By View */}
        &lt;Modal
          animationType="slide"
          transparent={false}
          visible={this.state.modalVisible}
          onRequestClose={() =&gt; {
            this.setState({ modalVisible: false });
            this.interval();
          }}
        &gt;
          &lt;ScrollView&gt;
            &lt;View style={styles.viewedBy}&gt;
              &lt;Text&gt;Viewed By&lt;/Text&gt;
              &lt;TouchableOpacity
                onPress={this.closeModal}
              &gt;
                &lt;Text&gt;Close&lt;/Text&gt;
              &lt;/TouchableOpacity&gt;
            &lt;/View&gt;
            {this.state.storiesViewedBy.map(user =&gt; (
              &lt;AvatarWithStory user={{ ...user }} /&gt;
            ))}
          &lt;/ScrollView&gt;
        &lt;/Modal&gt;
    );
  }</pre>
<figure id="attachment_5722" aria-describedby="caption-attachment-5722" class="wp-caption aligncenter"><img data-attachment-id="5722" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/viewing-story/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story.png" data-orig-size="730,1298" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Viewing a user story" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story-169x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story-576x1024.png" decoding="async" class="wp-image-5722 size-full jetpack-lazy-image" src="../Images/eaabe469cc6ae1669497256a9a1b8352.png" alt="Viewing A User Story" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story-169x300.png 169w, https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story-576x1024.png 576w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="5722" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/viewing-story/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story.png" data-orig-size="730,1298" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Viewing a user story" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story-169x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story-576x1024.png" decoding="async" loading="lazy" class="wp-image-5722 size-full" src="../Images/eaabe469cc6ae1669497256a9a1b8352.png" alt="Viewing A User Story" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story-169x300.png 169w, https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story-576x1024.png 576w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/viewing-story.png"/></noscript><figcaption id="caption-attachment-5722" class="wp-caption-text">Viewing a user story</figcaption></figure>
<figure id="attachment_5724" aria-describedby="caption-attachment-5724" class="wp-caption aligncenter"><img data-attachment-id="5724" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/viewed-by-modal/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal.png" data-orig-size="612,420" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The viewed by modal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal-300x206.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal.png" decoding="async" class="wp-image-5724 size-full jetpack-lazy-image" src="../Images/d9616c4cf9b9b508edc9aaa0ef58861a.png" alt="The &quot;Viewed By&quot; Modal" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal.png 612w, https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal-300x206.png 300w" data-lazy-sizes="(max-width: 612px) 100vw, 612px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="5724" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/viewed-by-modal/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal.png" data-orig-size="612,420" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The viewed by modal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal-300x206.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal.png" decoding="async" loading="lazy" class="wp-image-5724 size-full" src="../Images/d9616c4cf9b9b508edc9aaa0ef58861a.png" alt="The &quot;Viewed By&quot; Modal" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal.png 612w, https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal-300x206.png 300w" sizes="(max-width: 612px) 100vw, 612px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/viewed-by-modal.png"/></noscript><figcaption id="caption-attachment-5724" class="wp-caption-text">Our viewed-by modal</figcaption></figure>
<p>这是故事顶部的进度条组件:</p>
<h4>TopBar.js</h4>
<pre>  // Setting current index of stories &amp; number of stories to state 
  static getDerivedStateFromProps(nextProps, prevState) {
      return {
        currentIndex: nextProps.index,
        noOfStories: nextProps.totalStories
      };
  }

  componentDidMount() {
    this.updateNoOfProgress();
  }

  componentDidUpdate(prevProps, prevState) {
    // Checking if slide changed
    if (prevProps.index !== this.props.index) {
      // If yes, then clear interval
      if (this.interVal) clearInterval(this.interVal);
      // Reset and update progress bar
      this.updateNoOfProgress();
    }
  }

  // Resetting progress bar 
  updateNoOfProgress = () =&gt; {
      const duration = 60;
      this.setState({ noOfProgress: 0 });
      this.interval = setInterval(() =&gt; {
        const { noOfProgress } = this.state;
        // If progress bar is complete, then clear interval
        if (noOfProgress === 100) {
          clearInterval(this.interval);
        } else {
          // Otherwise, keep updating progress bar by 1
          this.setState(pre =&gt; ({ ...pre, noOfProgress: pre.noOfProgress + 1 }));
        }
      }, duration);
  };

  render() {
    const { currentIndex, noOfStories, noOfProgress } = this.state;

    return (
      &lt;View style={styles.container}&gt;
        {[...Array(noOfStories)].map((story, index) =&gt; (
          &lt;View
            style={[
              styles.single,
              { width: Math.floor(width / noOfStories) - noOfStories }
            ]}
            key={index}
          &gt;
            &lt;ProgressBarAndroid
              styleAttr="Horizontal"
              indeterminate={false}
              progress={
                !(index &gt;= currentIndex)
                  ? 1
                  : index === currentIndex
                  ? noOfProgress / 100
                  : 0
              }
              style={styles.bar}
              color="#fff"
            /&gt;
          &lt;/View&gt;
        ))}
      &lt;/View&gt;
    );
  }

const styles = StyleSheet.create({
  container: {
    marginTop: StatusBar.currentHeight,
    width,
    height: height * 0.03,
    paddingTop: height * 0.01,
    flexDirection: "row",
    justifyContent: "space-evenly"
  },
  bar: { transform: [{ scaleX: 1.0 }, { scaleY: 1 }], height: height * 0.01 },
  single: { marginLeft: 1 }
});</pre>
<h2>演示和总结</h2>
<p>终于！我们已经实现了第三个也是最后一个目标。查看下面的演示，也可以查看<a href="https://github.com/Expertizo/rn-stories"> GitHub repo </a>以了解更多细节和工作代码。也可以通过<a href="https://expo.io/@hamsahmedansari/expertizo-rn-kit"> Expo </a>直接经营。</p>
<p><img data-attachment-id="5728" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/completed-story-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/completed-story-demo.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Completed story demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/completed-story-demo-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/completed-story-demo.gif" decoding="async" class="aligncenter size-full wp-image-5728 jetpack-lazy-image" src="../Images/db27342541fcf6a148f78bf9bc08c715.png" alt="Completed Story Demo" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/completed-story-demo.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/completed-story-demo.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="5728" data-permalink="https://blog.logrocket.com/whatsapp-stories-using-react-native-firestore/completed-story-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/completed-story-demo.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Completed story demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/completed-story-demo-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/completed-story-demo.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-5728" src="../Images/db27342541fcf6a148f78bf9bc08c715.png" alt="Completed Story Demo" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/completed-story-demo.gif"/></noscript>
<p>感谢您阅读帖子！希望它有助于满足您的需求！</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>