<html>
<head>
<title>What’s new in Safari 13.1 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Safari 13.1的新功能-日志火箭博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/whats-new-in-safari-13-1/#0001-01-01">https://blog.logrocket.com/whats-new-in-safari-13-1/#0001-01-01</a></blockquote><div><article class="article-post">
<p>苹果发布了Safari浏览器的<a href="https://webkit.org/blog/10247/new-webkit-features-in-safari-13-1/" target="_blank" rel="noopener noreferrer">最新版本</a>，适用于macOS Catalina、iPadOS、iOS和watchOS的Safari 13.1。这个版本带来了跨越苹果平台的网络的几个改进。这个版本的重点是提高用户的隐私，优化浏览器的性能，并改善开发人员使用浏览器的体验。</p>
<p>在本帖中，我们将看看浏览器最新版本中的一些最新更新和功能。这些功能包括(但不限于):</p>

<h2>智能跟踪预防</h2>
<p><a href="https://webkit.org/blog/7675/intelligent-tracking-prevention/" target="_blank" rel="noopener noreferrer">智能跟踪预防</a>(2017年推出)是<a href="https://webkit.org/" target="_blank" rel="noopener noreferrer"> WebKit </a>的一项功能，旨在通过阻止第三方cookies和阻止网站获取用户数据来减少跨站点跟踪，无论是在桌面上还是在移动设备上。</p>
<p>这个新的更新带来了智能跟踪预防的几个新的增强功能，包括全面的第三方cookie阻止和在Safari使用七天后非cookie网站数据的过期，这是如何做到的在苹果工程师<a href="https://twitter.com/johnwilander?" target="_blank" rel="noopener noreferrer">约翰·威兰德</a>的<a href="https://webkit.org/blog/10218/full-third-party-cookie-blocking-and-more/" target="_blank" rel="noopener noreferrer">这篇博客文章</a>中有解释。</p>
<h3>完全第三方cookie阻止</h3>
<p>默认情况下，跨站点资源的Cookies现在会被全面阻止。这一更新极大地改善了用户在Safari浏览器上的隐私，并使跟踪用户的行为变得更加困难。</p>
<p>完整的第三方cookie拦截通过确保没有ITP状态可以通过cookie拦截行为检测来消除cookie拦截中的状态，它还禁用“登录指纹”，这使得网站无法检测到您注册或登录到哪个平台。</p>
<p>在任何没有完全阻止第三方cookie的浏览器中，都可以检测您登录的平台。使用这个<a href="https://robinlinus.github.io/socialmedia-leak/" target="_blank" rel="noopener noreferrer">现场演示</a>来测试您的浏览器的登录指纹。</p>
<h3>所有浏览器存储选项的7天限制</h3>
<p>除了现有的客户端cookie限制，ITP还将开始删除网站上所有可写脚本的存储空间，如果用户在网站上使用Safari七天没有互动的话。</p>
<p>这些可写脚本的存储形式包括:</p>
<ul>
<li>索引数据库</li>
<li>本地存储</li>
<li>媒体键</li>
<li>会话存储</li>
<li>服务工作人员注册和缓存</li>
</ul>
<p>这一更新意味着每次用户访问您的网站时，它都会将数据保存到localStorage等存储形式中，如果用户在接下来的七天内没有访问您的网站，但继续使用Safari浏览器访问其他网站，则所有保存的数据都会被删除。如果用户根本不使用Safari或在指定的七天内访问您的网站，数据会保留在储存形式中。</p>
<h2>定制的AR快速外观</h2>
<p>用户可以从web上启动AR体验，内容作者可以定制覆盖AR视图的横幅。可以定制:</p>
<ul>
<li>Apple Pay按钮样式</li>
<li>动作按钮标签</li>
<li>项目标题</li>
<li>项目副标题</li>
<li>价格</li>
</ul>
<p><img data-attachment-id="18398" data-permalink="https://blog.logrocket.com/whats-new-in-safari-13-1/applepaybuttons/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons.png" data-orig-size="531,1039" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="applepaybuttons" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons-153x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons-523x1024.png" decoding="async" class="aligncenter size-full wp-image-18398 jetpack-lazy-image" src="../Images/4097002a016f98a97182575b0524155b.png" alt="Apple Pay button styles" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons.png 531w, https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons-153x300.png 153w, https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons-523x1024.png 523w" data-lazy-sizes="(max-width: 531px) 100vw, 531px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="18398" data-permalink="https://blog.logrocket.com/whats-new-in-safari-13-1/applepaybuttons/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons.png" data-orig-size="531,1039" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="applepaybuttons" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons-153x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons-523x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-18398" src="../Images/4097002a016f98a97182575b0524155b.png" alt="Apple Pay button styles" srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons.png 531w, https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons-153x300.png 153w, https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons-523x1024.png 523w" sizes="(max-width: 531px) 100vw, 531px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/applepaybuttons.png"/></noscript>
<p>或者，作者可以使用HTML创建完全自定义的横幅:</p>
<pre>https://example.com/example.usdz#custom=https://example.com/customBanner.html</pre>
<p>有关更多信息，请阅读关于在AR Quick Look 中添加<a href="https://developer.apple.com/documentation/arkit/adding_an_apple_pay_button_or_a_custom_action_in_ar_quick_look" target="_blank" rel="noopener noreferrer"> Apple Pay按钮或自定义操作的信息。</a></p>
<h2>JavaScript和CSS附加功能</h2>
<p>这个版本还包括对JavaScript <code><a href="https://v8.dev/features/string-replaceall" target="_blank" rel="noopener noreferrer">replaceAll(</a>)</code>方法的支持；用于替换字符串中出现的所有字符，该版本还支持ES2020中提供的nullish合并运算符(<code>??</code>)。</p>
<p><code>String.prototype.replaceAll()</code>方法用提供的替换值替换字符串中出现的所有字符:</p>
<pre>"My name is jola".replaceAll(" ", "-");

//My-name-is-jola</pre>
<p>从<a href="https://github.com/tc39/proposal-string-replaceall" target="_blank" rel="noopener noreferrer">string . prototype . replace all proposal</a>中了解有关此方法的更多信息。</p>
<p>根据<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" target="_blank" rel="noopener noreferrer"> MDN单据</a>:</p>
<blockquote><p>无效合并运算符(<code>??</code>)是一种逻辑运算符，当其左侧操作数为<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer">null</a></code>或<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer">undefined</a></code>时，返回其右侧操作数，否则返回其左侧操作数。</p></blockquote>
<pre>const nullValue = null;
const resultWithNull = nullValue ?? "default";        // "default"

const nonNullValue = 0;
const resultWithNonNull = nonNullValue ?? "default";  // 0</pre>
<p>更多细节参见JavaScript提案的<a href="https://github.com/tc39/proposal-nullish-coalescing" target="_blank" rel="noopener noreferrer"> nullish合并，你也可以在这里</a>了解关于这个操作符<a href="https://blog.logrocket.com/optional-chaining-and-nullish-coalescing-in-javascript/" target="_blank" rel="noopener noreferrer">的更多信息。</a></p>
<h2>CSS附加内容</h2>
<p>在这个版本中还提供了一些字体关键字，这些关键字使得使用特定于平台的字体成为可能，例如<code>ui-serif</code>、<code>ui-sans-serif</code>、<code>ui-monospace</code>和<code>ui-rounded</code>。</p>
<p>这次更新还包括对<code>line-break: anywhere</code>值的支持，根据MDN 的说法，这个<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/line-break" target="_blank" rel="noopener noreferrer">在每个印刷字符单元周围添加了软换行，包括任何标点符号或单词中间保留的空格，它甚至忽略了对换行符的限制。</a></p>
<p>它还支持<code>dynamic-range</code>媒体查询，允许作者创建特定于显示功能的样式:</p>
<pre>@media (dynamic-range: standard) {
    .example {
        /* Styles for displays not capable of HDR. */
        color: rgb(255, 0, 0);
    }
}

@media (dynamic-range: high) {
    .example {
        /* Styles for displays capable of HDR. */
        color: color(display-p3 1 0 0);
    }
}</pre>
<h2>resize观察者</h2>
<p>根据<a href="https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver" target="_blank" rel="noopener noreferrer"> MDN文档</a>，“Resize Observer API提供了一种性能机制，通过这种机制，代码可以监视元素的大小变化，每次大小变化时都会向观察者发送通知。”</p>
<p>WebKit中添加的<code>ResizeObserver</code>使开发人员能够设计响应容器而不仅仅是视口的组件。您不再需要将一个<code>resize</code>事件监听器附加到一个元素上，就可以得到关于视窗尺寸变化的通知。</p>
<p>该API允许开发人员观察元素布局大小的变化，它允许更灵活的响应设计，其中容器可以对窗口大小的变化、方向的变化和布局中新元素的添加做出反应。</p>
<p>您创建了一个<code>ResizeObserver</code>对象的实例，并向构造函数传递了一个回调。回调将被赋予一个数组<code>ResizeObserverEntries</code>——每个被观察的元素一个条目——它包含元素的新维度:</p>
<pre>var ro = new ResizeObserver( entries =&gt; {
  for (let entry of entries) {
    const cr = entry.contentRect;
    console.log('Element:', entry.target);
    console.log(`Element size: ${cr.width}px x ${cr.height}px`);
    console.log(`Element padding: ${cr.top}px ; ${cr.left}px`);
  }
});

// Observe one or multiple elements
ro.observe(someElement);</pre>
<h2>网络动画API</h2>
<p>该版本还支持Web Animations API，根据<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Web_Animations_API_Concepts" target="_blank" rel="noopener noreferrer"> MDN文档</a>:“该API允许开发人员访问浏览器的动画引擎，并描述了动画应该如何跨浏览器实现”，它旨在弥合CSS(动画和过渡)和JavaScript动画之间的差距。</p>
<p>这是在网络上制作动画最有效的方式之一，让浏览器在没有黑客或强制的情况下进行内部优化。</p>
<p>有了这个API，开发人员可以创建、查询和控制动画，它为编程动画、CSS动画和过渡提供了一个方便的统一模型。现在可以直接控制它们暂停、恢复、搜索或改变速度和方向，减少人工计算。此外，Web Inspector已经更新，可以在媒体和动画时间线中显示它们的条目。</p>
<p><img data-attachment-id="18409" data-permalink="https://blog.logrocket.com/whats-new-in-safari-13-1/webinspectormedia-andanimationstimeline/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline.png" data-orig-size="730,500" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="webinspectormedia andanimationstimeline" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline-300x205.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline.png" decoding="async" class="aligncenter size-full wp-image-18409 jetpack-lazy-image" src="../Images/04cb9bbb1dc22077de6fd201fe7ed90b.png" alt="Web Inspector Media and Animations Timeline" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline-300x205.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="18409" data-permalink="https://blog.logrocket.com/whats-new-in-safari-13-1/webinspectormedia-andanimationstimeline/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline.png" data-orig-size="730,500" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="webinspectormedia andanimationstimeline" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline-300x205.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-18409" src="../Images/04cb9bbb1dc22077de6fd201fe7ed90b.png" alt="Web Inspector Media and Animations Timeline" srcset="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline-300x205.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/05/webinspectormedia-andanimationstimeline.png"/></noscript>
<p>阅读更多关于WebKit 中的<a href="https://webkit.org/blog/8343/web-animations-in-webkit/" target="_blank" rel="noopener noreferrer">网页动画和Safari 13.1 </a>中的<a href="https://webkit.org/blog/10266/web-animations-in-safari-13-1/" target="_blank" rel="noopener noreferrer">网页动画。</a></p>
<h2>结论</h2>
<p>Safari浏览器的更新是巨大的，将改善浏览器的使用体验。还有更多惊人的特性没有在本文中介绍。有关更新的完整列表，请阅读<a href="https://webkit.org/blog/10247/new-webkit-features-in-safari-13-1/" target="_blank" rel="noopener noreferrer">发行说明</a>。</p>
<p>一些更新，如所有脚本可写存储的7天上限，引发了一些反应，而<a href="https://ionicframework.com/blog/is-apple-trying-to-kill-pwas/" target="_blank" rel="noopener noreferrer">一些人称赞</a>对隐私的关注，<a href="https://andregarzia.com/2020/03/private-client-side-only-pwas-are-hard-but-now-apple-made-them-impossible.html" target="_blank" rel="noopener noreferrer">其他</a>并没有接受它，因为它被认为是反PWA的。</p>
<p>你怎么想呢?哪些新功能让你印象深刻？请在评论区告诉我。</p>
<div class="code-block code-block-2">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>