<html>
<head>
<title>A complete guide to React default props - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>反应默认道具的完整指南</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/complete-guide-react-default-props/#0001-01-01">https://blog.logrocket.com/complete-guide-react-default-props/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:本文最后更新于2022年6月6日，旨在解决一个不再有效维护的包。</em></p>
<p>React是一个非常强大的基于组件的JavaScript库，用于构建可以在不同平台上运行的可伸缩应用程序，如服务器、web、移动和桌面。如今，在这些平台上运行的数千个应用程序都是基于React构建的。</p>
<p>在本文中，我们将讨论为React组件设置默认属性。本指南中的截图显示了使用一些基本的Bootstrap 4 CSS样式呈现的视图。为了获得类似的结果，您必须运行带有一些附加引导样式的代码片段。我们开始吧！</p>

<h2 id="what-react-component">什么是React组件？</h2>
<p>React应用程序通常由几个独立的组件组成，这些组件构成了应用程序的UI。React组件只是一个JavaScript函数，它接受一个称为props的任意输入对象，并返回React元素，这些元素描述了应该在UI上呈现的内容:</p>
<pre class="language-javascript">// Simple React Component
function ReactHeader(props) {
  return &lt;h1&gt;React {props.version} Documentation&lt;/h1&gt;
}
</pre>
<p>上面的例子定义了一个非常简单的<code>ReactHeader</code>组件，该组件呈现一个包含指定React版本文档标题的<code>&lt;h1&gt;</code>元素。它使用JSX语法以声明的方式创建组件的DOM元素层次结构。你可以在官方文档中了解更多关于使用<a href="https://reactjs.org/docs/introducing-jsx.html"> JSX和React </a>的信息。</p>
<p>如果没有JSX，前面的代码片段将如下所示:</p>
<pre class="language-javascript">// Simple React Component (without JSX)
function ReactHeader(props) {
  return React.createElement('h1', null, `React ${props.version} Documentation`);
}
</pre>
<p>使用React不需要JSX。例如，如果您打算在没有任何形式的编译的情况下使用React，那么JSX就不是合适的选择。事实上，React组件中的每一个JSX在组件呈现之前都会被编译成它的<code>createElement</code>等价物。然而，在本指南中，我们将尽可能在所有组件中使用JSX。</p>
<p>从前面的代码片段来看，很明显,<code>ReactHeader</code>组件需要向其传递一个<code>version</code>属性。<code>ReactHeader</code>组件可以呈现在DOM上的任意元素中，如下所示:</p>
<pre class="language-javascript">// Render a React Component
ReactDOM.render(, document.getElementById('root'));
</pre>
<p>请注意，<code>ReactHeader</code>组件已经被渲染，并且<code>version</code>属性被设置为<code>16</code>。目前，在<code>ReactHeader</code>组件中一切似乎都工作正常，如下面的截图所示:</p>
<p><img data-attachment-id="114621" data-permalink="https://blog.logrocket.com/react-header-version-prop/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop.png" data-orig-size="730,147" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-header-version-prop" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-300x60.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop.png" decoding="async" class="aligncenter wp-image-114621 size-full jetpack-lazy-image" src="../Images/2e040e53e31ea8d41ba5fa3cbd52c9a6.png" alt="React Header Version Prop" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-300x60.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="114621" data-permalink="https://blog.logrocket.com/react-header-version-prop/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop.png" data-orig-size="730,147" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-header-version-prop" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-300x60.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop.png" decoding="async" loading="lazy" class="aligncenter wp-image-114621 size-full" src="../Images/2e040e53e31ea8d41ba5fa3cbd52c9a6.png" alt="React Header Version Prop" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-300x60.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop.png"/></noscript>
<h2 id="using-default-props-react">React中的默认道具是什么？</h2>
<p>当<code>ReactHeader</code>组件在没有<code>version</code>属性的情况下被渲染时，<code>version</code>属性不会被传递:</p>
<pre class="language-javascript">// Render the ReactHeader Component
ReactDOM.render(, document.getElementById('root'));
</pre>
<p>因此，组件中对<code>props.version</code>的引用是<code>undefined</code>，如下图所示:</p>
<p><img data-attachment-id="114623" data-permalink="https://blog.logrocket.com/react-header-version-prop-not-passed/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed.png" data-orig-size="730,144" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-header-version-prop-not passed" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed-300x59.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed.png" decoding="async" class="aligncenter wp-image-114623 size-full jetpack-lazy-image" src="../Images/fd3e388e61c3095017c3f816cdc9857d.png" alt="React Header Version Prop Not Passed" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed-300x59.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="114623" data-permalink="https://blog.logrocket.com/react-header-version-prop-not-passed/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed.png" data-orig-size="730,144" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-header-version-prop-not passed" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed-300x59.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed.png" decoding="async" loading="lazy" class="aligncenter wp-image-114623 size-full" src="../Images/fd3e388e61c3095017c3f816cdc9857d.png" alt="React Header Version Prop Not Passed" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed-300x59.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/react-header-version-prop-not-passed.png"/></noscript>
<p>你可以通过<a href="https://blog.logrocket.com/conditional-rendering-in-react-c6b0e5af381e/">应用条件渲染</a>来处理这个问题。每当所需的属性未被传递或无效时，您可以阻止组件进行渲染，而不进行任何渲染:</p>
<pre class="language-javascript">// Simple React Component
function ReactHeader(props) {
  return (
    Number.isFinite(props.version)
      ? &lt;h1&gt;React {props.version} Documentation&lt;/h1&gt;
      : null
  );
}
</pre>
<p>或者，您可以为组件设置默认属性。默认属性是为组件不需要的属性提供默认值的一种方式。例如，如果您有一个接受用户名的组件，您可以使用一个默认属性来提供一个名称，如果该用户没有该属性的话:</p>
<pre class="language-javascript">const UserName = ({ name = 'User' }) =&gt; &lt;h3 className="username"&gt;{name}&lt;/h3&gt;
</pre>
<p>默认属性可用于定义您想要为组件设置的任何属性，不管值是否实际上是从父组件传入的。使用默认属性时，当您从父组件传入值时，仍然可以覆盖默认属性对象中指定的值。</p>
<p>例如，<code>&lt;UserName name="John Doe" /&gt;</code>将呈现<code>John Doe</code>，即使默认值被指定为<code>User</code>。从父组件传递的值优先于默认值。</p>
<p>根据<a href="https://reactjs.org/docs/react-component.html"> React文档</a>，<code>defaultProps</code>可以定义为组件类本身上的一个属性来设置该类的默认属性。在我们前面的例子中，只要没有传递，您就可以调整组件来使用默认的<code>version</code>属性值:</p>
<pre class="language-javascript">// With JSX
function ReactHeader(props) {
  return &lt;h1&gt;React {props.version || 16} Documentation&lt;/h1&gt;
}

// OR
// Without JSX
function ReactHeader(props) {
  return React.createElement('h1', null, `React ${props.version || 16} Documentation`);
}
</pre>
<p>逻辑<code>OR</code>操作符<code>||</code>用于在<code>version</code>道具未通过时设置回退值。<code>version</code>道具的默认值为<code>16</code>。有了这个改变，现在一切都按预期工作了。</p>
<h2 id="how-set-default-prop">如何在React中设置默认道具</h2>
<p>如果渲染组件时没有指定属性，那么将使用默认属性。设置默认道具的一种方法是析构props对象，如下所示:</p>
<pre class="language-javascript">const Text = (props) =&gt; {
  const {fontSize = "20px"} = props;
  return &lt;p style={{ fontSize }}&gt;{props.children}&lt;/p&gt;
}
</pre>
<p>当你想在用户没有指定的情况下有一个后备道具时，缺省道具是有用的。例如，您可能希望段落组件具有默认字体大小。如果用户没有指定字体大小，那么文本的字体大小将回到默认值。</p>
<p>在本指南中，我们将介绍为不同类型的React组件设置默认属性的三种方式。</p>
<h2 id="using-react-create-class-react">在React中使用<code>React.createClass()</code></h2>
<p>在React中，类最适合于构建有状态组件，在这种情况下，您需要在组件内部维护状态，或者在您希望利用组件的生命周期方法的情况下。</p>
<p>React最初发布时，类还没有成为JavaScript中的一个东西。然而，React提供了用于创建类组件的<code>React.createClass()</code> API。随着时间的推移，这个API被弃用，并最终从React中移除以支持ES6类。</p>
<p>如果您使用的是早于15.5.0的React版本，您可以使用<code>React.createClass()</code> API创建一个简单的React组件，如下所示:</p>
<pre class="language-javascript">import React from 'react';

/**
 * ThemedButton Component
 * Using React.createClass()
 *
 * Renders a Bootstrap themed button element.
 */

const ThemedButton = React.createClass({

  // Component display name
  displayName: 'ThemedButton',

  // render() method
  render() {
    const { theme, label, ...props } = this.props;
    return { label }
  }

});
</pre>
<p>上面的代码片段使用<code>React.createClass()</code> API创建了一个非常简单的<code>ThemedButton</code>组件。<code>ThemedButton</code>组件基本上根据传递给它的道具呈现一个引导主题的按钮。</p>
<p>为了让<code>ThemedButton</code>组件正确呈现按钮，<span>需要传递一个</span> <code>theme</code> <span>道具和一个</span> <code>label</code> <span>道具。现在，您可以在React应用程序中渲染一组主题按钮，如下所示:</span></p>
<pre class="language-javascript">import React from 'react';
import ReactDOM from 'react-dom';

// [...ThemedButton component here]

function App(props) {
  return (
    &lt;div&gt;
      &lt;ThemedButton theme="danger" label="Delete Item" /&gt;
      &lt;ThemedButton theme="primary" label="Create Item" /&gt;
      &lt;ThemedButton theme="success" label="Update Item" /&gt;
      &lt;ThemedButton theme="warning" label="Add to Cart" /&gt;
      &lt;ThemedButton /&gt;
    &lt;/div&gt;
  );
}

const rootElement = document.getElementById('root');
ReactDOM.render(&lt;App /&gt;, rootElement);
</pre>
<p>请注意，<code>ThemedButton</code>组件已经在应用程序中呈现了五次。第五次，<code>ThemedButton</code>没有通过任何道具。该应用程序看起来像下面的截图:</p>
<p><img data-attachment-id="114625" data-permalink="https://blog.logrocket.com/themed-button-not-passed-props/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props.png" data-orig-size="730,132" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="themed-button-not-passed-props" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props-300x54.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props.png" decoding="async" class="aligncenter wp-image-114625 size-full jetpack-lazy-image" src="../Images/1bc73d155efa9ccb60e6bb0a72f7b022.png" alt="Themed Button Not Passed Props" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props-300x54.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="114625" data-permalink="https://blog.logrocket.com/themed-button-not-passed-props/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props.png" data-orig-size="730,132" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="themed-button-not-passed-props" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props-300x54.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props.png" decoding="async" loading="lazy" class="aligncenter wp-image-114625 size-full" src="../Images/1bc73d155efa9ccb60e6bb0a72f7b022.png" alt="Themed Button Not Passed Props" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props-300x54.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/themed-button-not-passed-props.png"/></noscript>
<p>从上面的截图中，您会注意到第五个按钮没有在视图中显示出来，因为它没有使用<code>theme</code>和<code>label</code>道具。因此，我们需要为<code>ThemedButton</code>组件设置默认道具。</p>
<p>对于使用<code>React.createClass()</code> API创建的组件，您可以通过向对象文字添加一个名为<code>getDefaultProps</code>的方法来设置默认属性。<code>getDefaultProps()</code>方法应该返回一个代表组件默认属性集的对象:</p>
<pre class="language-javascript">const ThemedButton = React.createClass({

  // Component display name
  displayName: 'ThemedButton',

  // render() method
  render() {
    const { theme, label, ...props } = this.props;
    return &lt;button className={`btn btn-${theme}`} {...props}&gt;{ label }&lt;/button&gt;
  },

  // Set default props
  getDefaultProps() {
    return {
      theme: "secondary",
      label: "Button Text"
    };
  }

})
</pre>
<p>在上面的代码片段中，已经为<code>ThemedButton</code>组件设置了默认属性。<code>theme</code>道具不通过默认为<code>"secondary"</code>，而<code>label</code>道具默认为<code>"Button Text"</code>。使用默认的道具设置，应用程序现在应该看起来像下面的截图:</p>
<p><img data-attachment-id="114628" data-permalink="https://blog.logrocket.com/default-props-set-themed-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button.png" data-orig-size="730,113" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="default-props-set-themed-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button-300x46.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button.png" decoding="async" class="aligncenter wp-image-114628 size-full jetpack-lazy-image" src="../Images/d86baced581ffe115e26bf311b5481c6.png" alt="Default Props Set Themed Button" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button-300x46.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="114628" data-permalink="https://blog.logrocket.com/default-props-set-themed-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button.png" data-orig-size="730,113" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="default-props-set-themed-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button-300x46.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button.png" decoding="async" loading="lazy" class="aligncenter wp-image-114628 size-full" src="../Images/d86baced581ffe115e26bf311b5481c6.png" alt="Default Props Set Themed Button" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button-300x46.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/default-props-set-themed-button.png"/></noscript>
<h2 id="using-class-components">React类组件中的默认属性</h2>
<p>在React 15 . 5 . 0以后的版本中，您可以通过利用ES6类语法来创建类组件。使用ES6类语法，<code>ThemedButton</code>组件将如下所示:</p>
<pre class="language-javascript">import React, { Component } from 'react';

class ThemedButton extends Component {

  // render() method
  render() {
    const { theme, label, ...props } = this.props;
    return &lt;button className={`btn btn-${theme}`} {...props}&gt;{ label }&lt;/button&gt;
  }

}
</pre>
<p>对于使用ES6类语法创建的React组件，您可以通过向component类添加一个名为<code>defaultProps</code>的静态属性来设置默认属性。静态属性应该被设置为一个代表组件默认属性的对象。您可以通过在类体之外的组件类本身上定义<code>defaultProps</code>来做到这一点，如下面的代码片段所示:</p>
<pre class="language-javascript">class ThemedButton extends React.Component {
  render() {
    // ...implement render method
  }
}

// Set default props
ThemedButton.defaultProps = {
  theme: "secondary",
  label: "Button Text"
};
</pre>
<p>通过将静态类属性和方法添加到ECMAScript规范中，您可以选择指定<code>defaultProps</code>，如以下代码所示:</p>
<pre class="language-javascript">class ThemedButton extends React.Component {
  render() {
    // ...implement render method
  }

  // Set default props
  static defaultProps = {
    theme: "secondary",
    label: "Button Text"
  }
}
</pre>
<h2 id="functional-components-react">React功能组件中的默认属性</h2>
<p>在React中，函数语法适用于只呈现元素而不跟踪其状态或生命周期的组件。这些组件通常被称为功能组件或无状态功能组件。</p>
<p>当被重写为无状态功能组件时，<code>ThemedButton</code>组件将类似于下面的代码:</p>
<pre class="language-javascript">import React from 'react';

function ThemedButton(props) {
  const { theme, label, ...restProps } = props;
  return &lt;button className={`btn btn-${theme}`} {...restProps}&gt;{ label }&lt;/button&gt;
}
</pre>
<p>与类组件一样，通过向组件函数本身添加一个名为<code>defaultProps</code>的静态属性，可以在功能组件上设置默认属性:</p>
<pre class="language-javascript">function ThemedButton(props) {
  // ...render component
}

// Set default props
ThemedButton.defaultProps = {
  theme: "secondary",
  label: "Button Text"
};
</pre>
<p>或者，使用ES6对象析构语法，您可以用默认值析构功能组件的属性。对于析构的props，<code>ThemedButton</code>组件看起来像下面的代码:</p>
<pre class="language-javascript">import React from 'react';

// METHOD 1:
// Default Props with destructuring
function ThemedButton(props) {
  const { theme = 'secondary', label = 'Button Text', ...restProps } = props;
  return &lt;button className={`btn btn-${theme}`} {...restProps}&gt;{ label }&lt;/button&gt;
}

// METHOD 2:
// More compact destructured props
function ThemedButton({ theme = 'secondary', label = 'Button Text', ...restProps }) {
  return &lt;button className={`btn btn-${theme}`} {...restProps}&gt;{ label }&lt;/button&gt;
}
</pre>
<h2 id="conclusion">结论</h2>
<p>默认属性是使React组件可重用且更易于维护的好方法。在本指南中，我们已经介绍了什么是默认属性，探索了为不同类型的React组件设置默认属性的三种方法。</p>
<p>我们还学习了如何使用默认属性为可选属性提供后备值。记住这些提示，您应该能够在自己的React项目中充分利用默认道具。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>