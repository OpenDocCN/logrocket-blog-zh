<html>
<head>
<title>Creating Canvas Graphics in React - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在React - LogRocket博客中创建画布图形</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/creating-canvas-graphics-in-react-cad70cd5b210/#0001-01-01">https://blog.logrocket.com/creating-canvas-graphics-in-react-cad70cd5b210/#0001-01-01</a></blockquote><div><div class="mainheading">
  

<h1 class="posttitle">在React中创建画布图形</h1>
<h2 class="post-subtitle"/>
<p><span class="post-date"><time class="post-date">2017年7月5日</time> </span> <span class="dot"/> <span class="readingtime"> 1分钟阅读</span> <span class="wordcount"> 462 </span> <span class="logrocket_editor"/></p>
</div>
<article class="article-post">
<figure><img decoding="async" src="../Images/123fb1601781417d56d39d752507fc70.png" data-height="668" data-width="1995" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*HlYBCP_4RmcbgyRoadZ5KA.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*HlYBCP_4RmcbgyRoadZ5KA.jpeg"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/123fb1601781417d56d39d752507fc70.png" data-height="668" data-width="1995" data-original-src="https://storage.googleapis.com/blog-images-backup/1*HlYBCP_4RmcbgyRoadZ5KA.jpeg"/></noscript></figure>
<p>HTML5 Canvas是在web应用程序中嵌入高性能、交互式图形的强大工具。它拥有广泛的浏览器支持和用于绘制形状、图像和文本的内置API。还有许多构建在Canvas之上的助手库，如<a href="https://konvajs.github.io/" target="_blank" rel="noopener noreferrer"> Konva </a>帮助处理事件和动画。</p>
<p>然而，Canvas API是完全必要的。它使用了像<code>ctx.fillRect(10, 10, 100, 100)</code>和<code>ctx.fillStyle = ‘green’</code>这样的方法，对于一个被reactive DOM的魔力宠坏的React开发人员来说，这些方法感觉相当过时。当构建复杂的插图时，很容易看到复杂性快速增长。</p>
<h3>反应车队</h3>
<p><code>react-konva</code>是一个使用React创建画布插图的库。它是作为Konva Canvas库的React包装器构建的，允许您通过React组件接口与Konva API进行交互。</p>
<p>让我们直接进入代码，感受一下它是如何工作的。</p>
<figure><img decoding="async" src="../Images/26f484f9a8e2d9b9bafaa6ed1317644a.png" data-height="402" data-width="1142" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*Aw1EievRIsf1lkyWi5LJ4g.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*Aw1EievRIsf1lkyWi5LJ4g.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/26f484f9a8e2d9b9bafaa6ed1317644a.png" data-height="402" data-width="1142" data-original-src="https://storage.googleapis.com/blog-images-backup/1*Aw1EievRIsf1lkyWi5LJ4g.png"/></noscript></figure>
<p>不要太担心舞台和图层，它们是Konva布局的基本组成部分。重要的部分是<code>&lt;Rect /&gt;</code>组件。用<code>react-konva</code>形状表示为组件。您使用道具来描述每个形状的颜色、大小和其他属性。当道具改变时，<code>react-konva</code>更新底层画布图形。这就像使用DOM节点一样，只是元素被渲染到画布上！</p>
<h4>事件处理/互动</h4>
<figure><img decoding="async" src="../Images/d94c118f9e2c60b21bd7e4095dfda8ed.png" data-height="272" data-width="1002" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*kJF67yncsCEbzHYUF0I5UA.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*kJF67yncsCEbzHYUF0I5UA.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/d94c118f9e2c60b21bd7e4095dfda8ed.png" data-height="272" data-width="1002" data-original-src="https://storage.googleapis.com/blog-images-backup/1*kJF67yncsCEbzHYUF0I5UA.png"/></noscript></figure>
<p><code>react-konva</code>支持类似于DOM中的事件处理API。您可以为形状附加处理程序，用于单击、拖动和其他交互事件。它内置了许多图形组件，如圆形、椭圆形、楔形、直线、箭头、正多边形等等。您还可以使用预构建的组件将图像和文本呈现到画布上。</p>
<h3>警告</h3>
<p>使用Canvas的一个原因是，您可以绘制数千个对象而不会导致内存损失，因为当您“绘制”某个对象时，它不会在内存中创建一个实际的对象，而只是改变画布上的像素。这是<code>react-konva</code>的一个限制，因为库创建React组件来管理每个形状的生命周期。如果在画布上绘制数百个形状，那么在React中创建许多DOM节点会有类似的内存开销。因此，<code>react-konva</code>不太适合需要在画布上呈现大量元素的应用程序。</p>
<p>如果您需要这样做，您可以像这样直接使用Konva API(没有React包装):</p>
<figure><img decoding="async" src="../Images/053e08f6dc2b1350dd25eab9efe76340.png" data-height="1224" data-width="1534" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*mOO5gYnf6RQEL95T4SsIOQ.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*mOO5gYnf6RQEL95T4SsIOQ.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/053e08f6dc2b1350dd25eab9efe76340.png" data-height="1224" data-width="1534" data-original-src="https://storage.googleapis.com/blog-images-backup/1*mOO5gYnf6RQEL95T4SsIOQ.png"/></noscript></figure>
<h3>演示！</h3>
<p>在这里，我用JSBin构建了一个简单的演示，这样你就可以感受一下如何使用<code>react-konva</code>。尝试更改&lt;星形/ &gt;的参数，或者在插图中添加其他形状/交互。</p>
<blockquote class="embedly-card" data-card-controls="1" data-card-align="center" data-card-theme="light">

<p>一个用于HTML、CSS &amp; JavaScript和一系列处理器的实时pastebin，包括SCSS、CoffeeScript、Jade等等…</p>
</blockquote>
<p>资源</p>
<h3>反应+画布=爱情。使用React绘制复杂画布图形的JavaScript库。–GitHub–konva js/React-konva:React+Canvas = Love。使用React绘制复杂画布图形的JavaScript库。</h3>
<blockquote class="embedly-card" data-card-controls="1" data-card-align="center" data-card-theme="light">

<p>React + Canvas = Love. JavaScript library for drawing complex canvas graphics using React. – GitHub – konvajs/react-konva: React + Canvas = Love. JavaScript library for drawing complex canvas graphics using React.</p>
</blockquote>
<p> </p>
<p>要用Konva创建矩形，我们可以实例化一个Konva。Rect()对象。有关属性和方法的完整列表，请查看Konva。Rect文档。您可以为Konva.Rect定义拐角半径。它可以是简单的数字或数字数组[topLeft，topRight，bottomRight，bottomLeft]。</p>
<blockquote class="embedly-card" data-card-controls="1" data-card-align="center" data-card-theme="light">

<p>To create a rectangle with Konva, we can instantiate a Konva.Rect() object. For a full list of attributes and methods, check out the Konva.Rect documentation. You can define corner radius for Konva.Rect. It can be simple number or array of numbers [topLeft, topRight, bottomRight, bottomLeft].</p>
</blockquote>
<p> </p>
<p> </p>
<p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</h2><p>. </p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p>LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p vwo-el-id="28675660750">现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
<p vwo-el-id="28675661060">Modernize how you debug your React apps —
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">start monitoring for free</a>.
</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>