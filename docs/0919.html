<html>
<head>
<title>Integrating Google Maps with React - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>整合谷歌地图和React - LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/integrating-google-maps-react/#0001-01-01">https://blog.logrocket.com/integrating-google-maps-react/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:本帖于2021年11月5日审核更新。</em></p>
<p>引用英国科幻作家亚瑟·查理斯·克拉克的一句话，“任何足够先进的技术都和魔法没什么区别。”</p>
<p>我们可能认为这是理所当然的，但谷歌地图在许多方面都是一个现代奇迹。它允许的可能性是无限的，可以为您的企业和用户提供真正的价值。从显示你的办公室位置到显示包裹递送的路线，<a href="https://blog.logrocket.com/react-native-maps-introduction/" target="_blank" rel="noopener">谷歌地图足够灵活和强大，可以处理各种各样的用例</a>。</p>
<h2>在React中使用谷歌地图</h2>
<p>事实上，有很多原因可以让你选择将谷歌地图集成到React应用中，我们来看看其中最受欢迎的一个:显示你的公司地址。如果您愿意，您可以将此作为其他更复杂案例的基础。</p>
<p>因为谷歌地图是如此的强大和复杂，我们需要一个名副其实的<a href="https://www.npmjs.com/package/google-map-react" target="_blank" rel="noopener"> google-map-react </a>包来帮助我们将其集成到react应用中。这个包是一个在Google Maps API上编写的组件，它允许你在Google Map上呈现任何React组件。它得到了积极的维护，使用起来非常简单，是我在React项目中集成谷歌地图的默认选择。</p>
<p>然而，在我们开始构建之前，这里有一些你可能想把谷歌地图放在你的网站(或网络应用)上的原因:</p>
<ul>
<li>提供到您公司地址的方向</li>
<li>显示活动路线(如音乐会或会议)</li>
<li>提供运输物品位置的实时更新</li>
<li>展示世界各地有趣的地方</li>
</ul>
<p>这只是Google Maps API提供的一小部分功能，您可能还有其他业务需求。对于本指南，我们将构建一个包含显示企业地址的地图的联系页面，因为这是我遇到的最常见的用例。google-map-react团队提供了一份<a href="https://github.com/google-map-react/google-map-react#examples">示例清单</a>，如果你需要更高级的东西，你可以浏览一下。</p>
<h2>将谷歌地图添加到React应用程序的要求</h2>
<p>如果你想和我一起编码，你需要以下:</p>
<ol>
<li>React应用程序设置</li>
<li>谷歌地图API密钥(免费)</li>
<li>十分钟的时间</li>
</ol>
<p>我已经建立了一个示例存储库，您可以按照它进行克隆。运行以下命令将存储库克隆到您的本地计算机:</p>
<pre>git clone https://github.com/ovieokeh/contact-page-with-google-maps.git</pre>
<p>克隆完成后，运行<code>npm install</code>安装所有的项目依赖项，然后运行<code>npm run start</code>在新的选项卡中打开项目。您应该会看到一个没有集成谷歌地图的样本联系页面。在本教程的其余部分，我们将创建一个React组件来保存Google地图并将其嵌入到联系人页面中。</p>
<p>至于谷歌地图API密匙，你可以按照谷歌地图文档上的说明免费获得一个。请注意，您将需要设置一个计费帐户，以摆脱随之而来的限制和水印。</p>
<p>一旦你把这些都准备好，我们就可以开始建造了。我们将构建的最终版本如下所示:</p>
<p><img data-attachment-id="77756" data-permalink="https://blog.logrocket.com/integrating-google-maps-react/integrate-google-maps-react-finished-product/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product.png" data-orig-size="730,820" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="integrate-google-maps-react-finished-product" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product-267x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product.png" decoding="async" class="aligncenter wp-image-77756 size-full jetpack-lazy-image" src="../Images/c4d9f4c8a466ff1a168d33865543ec25.png" alt="Integrate Google Maps with React How Our Finished Sample Project Should Look" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product-267x300.png 267w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="77756" data-permalink="https://blog.logrocket.com/integrating-google-maps-react/integrate-google-maps-react-finished-product/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product.png" data-orig-size="730,820" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="integrate-google-maps-react-finished-product" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product-267x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product.png" decoding="async" loading="lazy" class="aligncenter wp-image-77756 size-full" src="../Images/c4d9f4c8a466ff1a168d33865543ec25.png" alt="Integrate Google Maps with React How Our Finished Sample Project Should Look" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product-267x300.png 267w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-finished-product.png"/></noscript>
<h2 id="integratinggooglemaps">将谷歌地图集成到React中</h2>
<p>再次重申，我不会查看联系人页面的所有代码，因为本文主要关注的是将Google Map集成到React项目中。以下是我们将要遵循的步骤:</p>
<ol>
<li>创建一个React组件来保存地图(<code>Map.jsx</code>)</li>
<li>创建另一个React组件来标记地图上的地址(<code>LocationPin.jsx</code>)</li>
<li>将地图组件嵌入联系人页面</li>
</ol>
<h3><code>Map.jsx</code></h3>
<pre>mkdir src/components/map &amp;&amp; touch src/components/Map.jsx</pre>
<p>运行上面的命令，在<code>/components</code>文件夹中创建一个新文件。在这个文件中，我们将编写地图组件和地址pin的代码。但是，在我们开始编写任何代码之前，我们必须通过运行以下命令来安装google-map-react包:</p>
<pre>yarn add google-map-react</pre>
<p>安装完软件包后，我们还需要其他东西:我们公司地址的坐标。这意味着可以在谷歌上快速搜索你公司地址的经度和纬度值。我使用的是谷歌的圆形剧场地址，所以我做了一个快速搜索，得到了以下值:</p>
<pre>const location = {
  address: '1600 Amphitheatre Parkway, Mountain View, california.',
  lat: 37.42216,
  lng: -122.08427,
}</pre>
<p>当然，您的地址的值会有所不同。如上所示将值存储在对象中，我们将这些值传递给<code>Map</code>组件，这样我们就可以在地图上呈现一个大头针。因此，概括一下，您需要以下数据:</p>
<ol>
<li>谷歌地图API密钥</li>
<li><code>google-map-react</code>已安装</li>
<li>您公司地址的经度和纬度值</li>
</ol>
<p>因为我们有了所有这些数据，所以我们可以开始构建<code>Map</code>组件。如果您想看到最终的代码，可以查看您之前克隆的repo上的<code>add-map</code>分支，否则，继续学习教程，学习如何自己构建它。</p>
<p>还在<code>src/components/map/Map.jsx</code>里面，导入React，<code>google-map-package</code>，以及相应的CSS，像这样:</p>
<pre>import React from 'react'
import GoogleMapReact from 'google-map-react'
import './map.css'</pre>
<p>你可以从这里的回购中获取<code>map.css</code> <a href="https://github.com/ovieokeh/contact-page-with-google-maps/blob/add-map/src/components/map/map.css">的内容。</a></p>
<p>创建一个新的<code>Map</code>组件，它接受两个道具:</p>
<pre>const Map = ({ location, zoomLevel }) =&gt; (
  &lt;div className="map"&gt;
    &lt;h2 className="map-h2"&gt;Come Visit Us At Our Campus&lt;/h2&gt;

    &lt;div className="google-map"&gt;
      &lt;GoogleMapReact
        bootstrapURLKeys={{ key: '' }}
        defaultCenter={location}
        defaultZoom={zoomLevel}
      &gt;
        &lt;LocationPin
          lat={location.lat}
          lng={location.lng}
          text={location.address}
        /&gt;
      &lt;/GoogleMapReact&gt;
    &lt;/div&gt;
  &lt;/div&gt;
)</pre>
<p>你能猜出<code>location</code>道具是什么吗？它是我们之前创建的保存位置的地址、纬度和经度值的对象。<code>zoomLevel</code>是一个从0到20的整数，它决定了<a href="https://developers.google.com/maps/documentation/javascript/interaction#zoom">地图在屏幕上渲染时的比例</a>。</p>
<p>您会注意到<code>GoogleMapReact</code>组件接受一个子组件<code>LocationPin</code>，但是请注意它可以接受任意数量的子组件。<code>LocationPin</code>会在我们用<code>lat</code>和<code>lng</code>道具指定的位置将<code>text</code>道具渲染到地图上方。我们将在下一节创建这个组件。</p>
<p>现在让我们检查一下传递给<code>GoogleMapReact</code>组件的道具，以了解每个道具的作用:</p>
<ol>
<li><code>bootstrapURLKeys</code>是一个对象，保存着您从Google控制台复制的API密钥。现在，您可以在这里硬编码密钥，但是对于提交给GitHub或者可以公开访问的代码，不建议这样做。你可以查看<a href="https://www.freecodecamp.org/forum/t/keeping-api-key-hidden-using-react/272539">这篇关于如何在客户端保护你的API密匙的讨论</a></li>
<li>第一次加载时，<code>defaultCenter</code>只是地图的中心</li>
<li><code>defaultZoom</code>定义地图的初始比例</li>
</ol>
<p>仅这一点就足以在屏幕上呈现一个基本的地图，但是在我们可以呈现这个组件之前，我们需要做一些其他的事情。我们需要为<code>LocationPin</code>写代码。</p>
<h3><code>LocationPin</code></h3>
<figure id="attachment_77758" aria-describedby="caption-attachment-77758" class="wp-caption aligncenter"><img data-attachment-id="77758" data-permalink="https://blog.logrocket.com/integrating-google-maps-react/integrate-google-maps-react-locationpin/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin.png" data-orig-size="730,407" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="integrate-google-maps-react-locationpin" data-image-description="" data-image-caption="&lt;p&gt;LocationPin can mark wherever we want on the map.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin.png" decoding="async" class="size-full wp-image-77758 jetpack-lazy-image" src="../Images/bcbaa622c07ee06ba2399d3b507f0d64.png" alt="Integrate Google Maps React Here's how to mark with LocationPin" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin-300x167.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="77758" data-permalink="https://blog.logrocket.com/integrating-google-maps-react/integrate-google-maps-react-locationpin/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin.png" data-orig-size="730,407" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="integrate-google-maps-react-locationpin" data-image-description="" data-image-caption="&lt;p&gt;LocationPin can mark wherever we want on the map.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin.png" decoding="async" loading="lazy" class="size-full wp-image-77758" src="../Images/bcbaa622c07ee06ba2399d3b507f0d64.png" alt="Integrate Google Maps React Here's how to mark with LocationPin" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin-300x167.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/integrate-google-maps-react-locationpin.png"/></noscript><figcaption id="caption-attachment-77758" class="wp-caption-text">LocationPin can mark wherever we want on the map.</figcaption></figure>
<p>我们想要一种方法来将用户的注意力吸引到地图上的特定位置。因为google-map-react允许我们在地图上呈现任何react组件，所以我们可以创建一个显示大头针图标和文本的简单组件。</p>
<p>对于图标，我将使用Iconify库，这是一个免费SVG图标的集合。仍然在我们一直在工作的同一个文件中，像这样导入下面的包:</p>
<pre>import { Icon } from '@iconify/react'
import locationIcon from '@iconify/icons-mdi/map-marker'</pre>
<p>然后继续定义<code>LocationPin</code>组件，如下所示:</p>
<pre>const LocationPin = ({ text }) =&gt; (
  &lt;div className="pin"&gt;
    &lt;Icon icon={locationIcon} className="pin-icon" /&gt;
    &lt;p className="pin-text"&gt;{text}&lt;/p&gt;
  &lt;/div&gt;
)</pre>
<p>我确信这个组件是不言自明的。请注意，<code>LocationPin</code>的样式已经包含在<code>map.css</code>中，但是您可以随心所欲地对其进行样式化。</p>
<p>我们实际上已经完成了这个教程。我们现在需要做的就是导出<code>Map</code>组件，并将其包含在联系人页面中。在文件的底部，导出<code>Map</code>组件:</p>
<pre>export default Map</pre>
<h3>使用<code>Map</code>组件</h3>
<p>因为<code>Map</code>组件只是一个React组件，我们可以在任何我们喜欢的地方使用它。打开<code>src/App.jsx</code>，导入地图组件，将其包含在<code>ContactSection</code>和<code>DisclaimerSection</code>之间，像这样:</p>
<pre>import React from 'react'

import IntroSection from './components/intro/Intro'
import ContactSection from './components/contact-section/ContactSection'
import MapSection from './components/map/Map' // import the map here
import DisclaimerSection from './components/disclaimer/Disclaimer'
import FooterSection from './components/footer/Footer'

import './app.css'

const location = {
  address: '1600 Amphitheatre Parkway, Mountain View, california.',
  lat: 37.42216,
  lng: -122.08427,
} // our location object from earlier

const App = () =&gt; (
  &lt;div className="App"&gt;
    &lt;IntroSection /&gt;
    &lt;ContactSection /&gt;
    &lt;MapSection location={location} zoomLevel={17} /&gt; {/* include it here */}
    &lt;DisclaimerSection /&gt;
    &lt;FooterSection /&gt;
  &lt;/div&gt;
)

export default App</pre>
<p>现在，通过在您的终端中运行<code>yarn start</code>并导航到<code>localhost:3000</code>来启动项目。你应该会看到你的联系页面，上面有一张漂亮的地图，标明了你的公司地址。很漂亮，对吧？</p>
<h2>结论</h2>
<p>用不到100行代码，我们已经能够集成谷歌地图来显示我们的办公室位置，以及一个视觉标记来精确定位地址。这是一个你可以用谷歌地图反应完成的基本例子。</p>
<p>他们的文档中有更多比这个相当简单的用例更高级的例子。希望这篇教程对你有所帮助，祝❤.编码快乐</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>