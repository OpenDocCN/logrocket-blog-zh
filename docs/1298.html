<html>
<head>
<title>Stitches: A modern, server-rendered CSS-in-JS library - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Stitches:一个现代的、服务器渲染的CSS-in-JS库- LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/stitches-server-rendered-css-in-js/#0001-01-01">https://blog.logrocket.com/stitches-server-rendered-css-in-js/#0001-01-01</a></blockquote><div><article class="article-post">
<p>使用<a href="https://cssinjs.org/?v=v10.4.0" target="_blank" rel="noopener noreferrer"> CSS-in-JS </a>设计组件的样式于2014年首次推出，并持续流行。开发人员社区对该模式的广泛采用帮助库制作者确定了什么概念对CSS-in-JS库是重要的。</p>
<p>例如，<a href="https://stitches.dev/" target="_blank" rel="noopener noreferrer"> Stitches </a>是一个CSS-in-JS库，它采用了最新的组件样式趋势，例如为组件重用和服务器端渲染创建变体，作为其核心特性。这是一个完全类型化的CSS-in-JS库，侧重于基于组件的架构和开发人员体验。</p>
<p>像其他CSS-in-JS库一样，Stitches具有关键CSS注入和自动供应商前缀的常见优点。但是与其他CSS-in-JS库相比，Stitches由于以下优势而脱颖而出:</p>
<h3>表演</h3>
<p>Stitches避免了运行时不必要的适当插值，使它比其他样式库更具性能</p>
<h3>服务器端渲染</h3>
<p>Stitches支持跨浏览器的服务器端渲染，甚至是响应性的样式和变体</p>
<h3>变体</h3>
<p>变体拥有一流的支持，使您能够设计可组合的组件API</p>
<h3>主题</h3>
<p>用CSS变量定义多个主题，然后通过定义类名在组件中使用它们</p>
<h3>特征</h3>
<p>由于其原子输出，特异性问题已成为过去</p>
<h3>开发者体验</h3>
<p>它有一个非常有用的配置文件，包含标记感知属性、断点助手和自定义实用程序。缝线提供了一个有趣和直观的DX</p>
<p>虽然Stitches被设计成与框架无关，但在撰写本文时，它只支持React，并支持Vue in progress。</p>
<h2>开始缝针</h2>
<p>要开始在React中使用Stitches，您需要在软件包管理器中安装这个库:</p>
<pre># With npm
npm install @stitches/react

# With yarn
yarn add @stitches/react
</pre>
<p>然后，您需要创建一个配置文件，并为您的设计系统定义配置。创建一个<code>stitches.config.ts</code>文件(如果不使用<a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">类型脚本</a>，则创建<code>.js</code>，并从库中导入<code>createStyled</code>函数。</p>
<p><code>createStyled</code>函数的工作方式类似于React钩子函数。它接收具有以下可选属性的配置对象:</p>
<ul>
<li>为所有的类名使用前缀以避免冲突</li>
<li><code>tokens</code>:可以定义并应用为CSS值的特殊变量</li>
<li>创建响应断点来帮助你编写响应风格</li>
<li>创建自定义函数，作为编写CSS属性的速记</li>
</ul>
<p>并根据您的样式需求返回两个函数:</p>
<ul>
<li><code>styled</code>:创建带有样式的React组件的功能</li>
<li><code>css</code>:创建主题和SSR风格的功能</li>
</ul>
<pre>// stitches.config.ts
import { createStyled } from '@stitches/react';export const { styled, css } = createStyled({
prefix: '',
tokens: {},
breakpoints: {},
utils: {},
});</pre>
<p>我们稍后将查看配置属性。现在，让我们把重点放在实现缝合和呈现样式化的组件上。</p>
<p>需要将<code>stitches.config</code>文件导入到您的组件中，所以如果您正在使用<a href="https://create-react-app.dev/" target="_blank" rel="noopener noreferrer"> Create-React-App </a>，不要忘记将它放在<code>src/</code>目录中。</p>
<p>让我们创建一个样式化的按钮组件来测试针脚。创建一个新的组件文件，并从顶部的配置中导入<code>styled</code>:</p>
<pre>// Change the import to where you put your stitches.config file
import { styled } from '../stitches.config';
</pre>
<p>现在为你的按钮写样式。与在styled-components中使用模板字符串语法不同，Stitches选择使用普通对象语法来实现样式模式，以减小包的大小:</p>
<pre>import { styled } from '../stitches.config';

const Button = styled('button', {
  color: '#fff',
  backgroundColor: '#007bff',
  borderRadius: '10px',
  fontSize: '16px',
  fontWeight: 400,
  paddingTop: '10px',
  paddingBottom: '10px',
  paddingLeft: '16px',
  paddingRight: '16px',
  '&amp;:hover': {
    backgroundColor: '#0069d9',
  },
});

export default Button;
</pre>
<p>现在，您需要导入您的组件以呈现它:</p>
<pre>import React from 'react';
import ReactDOM from 'react-dom';
import Button from './components/Button'

function App() {
  return (
    &lt;Button&gt;This button is styled using Stitches&lt;/Button&gt;
  );
}

ReactDOM.render(
  &lt;App /&gt;,
  document.getElementById('root')
);
</pre>
<p>仅此而已。现在，屏幕上呈现了一个Stitches按钮组件:</p>
<figure id="attachment_28402" aria-describedby="caption-attachment-28402" class="wp-caption aligncenter"><img data-attachment-id="28402" data-permalink="https://blog.logrocket.com/stitches-server-rendered-css-in-js/button-component-styled-stitches/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-component-styled-stitches-e1604592650283.png" data-orig-size="730,502" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-component-styled-stitches" data-image-description="" data-image-caption="&lt;p&gt;Here’s a button component styled using Stitches&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-component-styled-stitches-300x206.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-component-styled-stitches-e1604592650283.png" decoding="async" class="size-full wp-image-28402 jetpack-lazy-image" src="../Images/092fff37218c0355b7331d4b6daca520.png" alt="" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/button-component-styled-stitches-e1604592650283.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/button-component-styled-stitches-e1604592650283.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="28402" data-permalink="https://blog.logrocket.com/stitches-server-rendered-css-in-js/button-component-styled-stitches/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-component-styled-stitches-e1604592650283.png" data-orig-size="730,502" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-component-styled-stitches" data-image-description="" data-image-caption="&lt;p&gt;Here’s a button component styled using Stitches&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-component-styled-stitches-300x206.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-component-styled-stitches-e1604592650283.png" decoding="async" loading="lazy" class="size-full wp-image-28402" src="../Images/092fff37218c0355b7331d4b6daca520.png" alt="" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/button-component-styled-stitches-e1604592650283.png"/></noscript><figcaption id="caption-attachment-28402" class="wp-caption-text">Here’s a button component styled using Stitches.</figcaption></figure>
<p>接下来让我们了解如何创建组件的不同版本。</p>
<h2>缝线内置变体支持</h2>
<p>Stitches的一个关键特性是它支持编写同一个组件的多个变体作为一流的API。您可以直接在样式对象语法中编写变量，这些变量将被编译为该组件的道具。这是同样的按钮组件，但有<code>color</code>的变化:</p>
<pre>const Button = styled('button', {
  color: '#fff',
  backgroundColor: '#007bff',
  borderRadius: '10px',
  fontSize: '16px',
  fontWeight: 400,
  paddingTop: '10px',
  paddingBottom: '10px',
  paddingLeft: '16px',
  paddingRight: '16px',
  '&amp;:hover': {
    backgroundColor: '#0069d9',
  },
  variants: {
    color: {
      violet: {
        backgroundColor: 'blueviolet',
        ':hover': {
          backgroundColor: 'darkviolet',
        },
      },
      gray: {
        color: '#000',
        backgroundColor: 'gainsboro',
        ':hover': {
          backgroundColor: 'lightgray',
        },
      },
    },
  }
});
</pre>
<p>当你渲染按钮时，你只需要指定颜色作为它的道具:</p>
<pre>&lt;div style={{ display: 'flex', gap: '20px' }}&gt;
  &lt;Button color="violet"&gt;Violet button&lt;/Button&gt;
  &lt;Button color="gray"&gt;Gray button&lt;/Button&gt;
&lt;/div&gt;
</pre>
<p>并且它将被相应地呈现:</p>
<figure id="attachment_28403" aria-describedby="caption-attachment-28403" class="wp-caption aligncenter"><img data-attachment-id="28403" data-permalink="https://blog.logrocket.com/stitches-server-rendered-css-in-js/button-styled-component-color-stitches/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-styled-component-color-stitches-e1604592770477.png" data-orig-size="730,502" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-styled-component-color-stitches" data-image-description="" data-image-caption="&lt;p&gt;Variations of the same button component&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-styled-component-color-stitches-300x206.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-styled-component-color-stitches-e1604592770477.png" decoding="async" class="size-full wp-image-28403 jetpack-lazy-image" src="../Images/a784c3966c459d58020a76a819056100.png" alt="button styled component color stitches" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/button-styled-component-color-stitches-e1604592770477.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/button-styled-component-color-stitches-e1604592770477.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="28403" data-permalink="https://blog.logrocket.com/stitches-server-rendered-css-in-js/button-styled-component-color-stitches/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-styled-component-color-stitches-e1604592770477.png" data-orig-size="730,502" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-styled-component-color-stitches" data-image-description="" data-image-caption="&lt;p&gt;Variations of the same button component&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-styled-component-color-stitches-300x206.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/button-styled-component-color-stitches-e1604592770477.png" decoding="async" loading="lazy" class="size-full wp-image-28403" src="../Images/a784c3966c459d58020a76a819056100.png" alt="button styled component color stitches" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/button-styled-component-color-stitches-e1604592770477.png"/></noscript><figcaption id="caption-attachment-28403" class="wp-caption-text">Variations of the same button component.</figcaption></figure>
<p>欲了解更多信息，请查看<a href="https://stitches.dev/docs/variants" target="_blank" rel="noopener noreferrer">缝线的变体文档</a>。现在您已经了解了变体支持，让我们继续了解配置属性。</p>
<h2>缝合中的配置属性</h2>
<p>正如我们之前看到的，在调用<code>createStyled</code>函数时，您可以设置四个配置属性:</p>
<ul>
<li>前缀</li>
<li>代币</li>
<li>断点</li>
<li>实用工具</li>
</ul>
<p>让我们了解这些配置如何改善您的开发人员体验。</p>
<h3>1.前缀配置</h3>
<p>前缀配置将简单地为每个由Stitches生成的类名添加一个前缀，以避免任何可能的CSS冲突:</p>
<pre>export const { styled, css } = createStyled({
  prefix: 'zxc',
  tokens: {},
  breakpoints: {},
  utils: {},
});
</pre>
<p>您可以通过在浏览器中检查元素来查看前缀。结果将如下所示:</p>
<pre>&lt;button class="zxc__initial_bc_hiMOlA zxc__initial_bc_cfnJEG zxc__initial_c_kFTTvV zxc__initial_bblr_eEqHhd zxc__initial_btlr_fAvRqR zxc__initial_btrr_hGRUya zxc__initial_bbrr_iAiVRy zxc__initial_fs_kBiqwx zxc__initial_fw_cftqkj zxc__initial_pt_keBEHr zxc__initial_pb_ddiFNf zxc__initial_pl_frIgGZ zxc__initial_pr_eOnNpm scid-bZicNS"&gt;
  Violet button
&lt;/button&gt;
</pre>
<h3>2.令牌配置</h3>
<p>令牌配置允许您编写可重用的设计令牌，作为保存CSS值的变量。下面是如何定义<code>colors</code>和<code>fontSizes</code>令牌类型的示例:</p>
<pre>export const { styled, css } = createStyled({
  tokens: {
    colors: {
      $gray500: 'hsl(206,10%,76%)',
      $blue500: 'hsl(206,100%,50%)',
      $purple500: 'hsl(252,78%,60%)',
      $green500: 'hsl(148,60%,60%)',
      $red500: 'hsl(352,100%,62%)',
    },
    fontSizes: {
      $1: '12px',
      $2: '13px',
      $3: '15px',
    },
  },
});
</pre>
<p>您可以在组件中直接使用令牌:</p>
<pre>const Button = styled('button', {
  color: '#fff',
  backgroundColor: '$red500',
  borderRadius: '10px',
  fontSize: '$3',
  fontWeight: 400,
  paddingTop: '10px',
  paddingBottom: '10px',
  paddingLeft: '16px',
  paddingRight: '16px',
  '&amp;:hover': {
    backgroundColor: '$blue500',
  },
});
</pre>
<p>Stitches提供了14种标记类型，你可以在你的配置文件中定义它们。</p>
<h3>3.断点配置</h3>
<p>断点配置允许您在某些断点期间将样式应用到组件中。您可以自由定义自己的断点属性名。例如:</p>
<pre># using bp1, bp2, bp3 and bp4
export const { styled, css } = createStyled({
  breakpoints: {
    bp1: (rule) =&gt; `@media (min-width: 640px) { ${rule} }`,
    bp2: (rule) =&gt; `@media (min-width: 768px) { ${rule} }`,
    bp3: (rule) =&gt; `@media (min-width: 1024px) { ${rule} }`,
    bp4: (rule) =&gt; `@media (min-width: 1280px) { ${rule} }`,
  },
});

#or using sm, md, lg, xl
export const { styled, css } = createStyled({
  breakpoints: {
    sm: (rule) =&gt; `@media (min-width: 640px) { ${rule} }`,
    md: (rule) =&gt; `@media (min-width: 768px) { ${rule} }`,
    lg: (rule) =&gt; `@media (min-width: 1024px) { ${rule} }`,
    xl: (rule) =&gt; `@media (min-width: 1280px) { ${rule} }`,
  },
});
</pre>
<p>然后，您可以将断点属性作为组件样式的一部分来应用:</p>
<pre>const Button = styled('button', {
  height: '35px',
  // apply styles to the `bp1` breakpoint
  bp1: {
    height: '45px'
  }
});
</pre>
<p>或者，如果您想避免覆盖样式模式，您可以使用结合断点属性的变体API。首先将变体写入您的风格:</p>
<pre>const Button = styled('button', {
  height: '35px',
  // variants for height
  variants: {
    height: {
      small: {
        height: '25px'
      },
      normal: {
        height: '45px'
      },
      large: {
        height: '75px'
      },
    }
  }
});
</pre>
<p>接下来，定义在每个断点应用哪个变量。在应用任何断点之前，必须使用<code>initial</code>断点来声明初始变量:</p>
<pre>&lt;Button height={{ initial: 'small', bp2: 'normal', bp3: 'large' }}&gt;
  Responsive button
&lt;/Button&gt;
</pre>
<h3>4. utils config</h3>
<p>utils配置允许您编写自定义函数，在定义您的风格时作为快捷方式。例如，让我们编写一个<code>m</code> util函数作为编写边距属性的快捷方式:</p>
<pre>export const { styled, css } = createStyled({
  utils: {
    m: (config) =&gt; (value) =&gt; ({
      marginTop: value,
      marginBottom: value,
      marginLeft: value,
      marginRight: value,
    }),
  }
});
</pre>
<p>接下来，在组件中使用util:</p>
<pre>const Button = styled('button', {
  height: '35px',
  m: '20px'
});
</pre>
<p>请注意，呈现的按钮在所有边上都有<code>20px</code>边距。你可以根据需要定义任意多的实用函数T2。</p>
<h2>结论</h2>
<p>除了其出色的性能和对组件架构的关注，Stitches是最新的CSS-in-JS，最终为变体提供了内置的一流支持。variants API的设计允许您更改组件的可视化表示，而无需覆盖基于props的样式，也无需按照传统方式编写多个类。</p>
<p>这个库还有一个功能强大的配置文件，您可以在其中定义自定义标记、断点和util函数，使组件的样式化变得有趣而简单。请务必查看缝线<a href="https://stitches.dev/docs/introduction" target="_blank" rel="noopener noreferrer">文档，了解更多信息</a>。</p><div class="code-block code-block-1">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

 </div>    
</body>
</html>