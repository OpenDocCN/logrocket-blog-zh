<html>
<head>
<title>How to use SVGs in React - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在React - LogRocket博客中使用SVGs</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-use-svgs-react/#0001-01-01">https://blog.logrocket.com/how-to-use-svgs-react/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:这篇文章最后一次更新是在2022年12月12日，增加了一节关于如何使用react-svg组件将svg注入DOM，以及确保与react-svg最新版本(撰写本文时为12.1.13)兼容的内容。</em></p>
<p>SVG是基于<a href="https://en.wikipedia.org/wiki/XML"> XML </a>的矢量图形图像格式。SVG代表可缩放矢量图形。它是在20世纪90年代末开发的，<a href="https://www.sitepoint.com/svg-101-what-is-svg/">直到2016年左右才得到支持</a>。</p>
<p>今天，图标库的巨大比例，如Flaticon，字体真棒，材料图标等。，完全支持SVG。Twitter、YouTube、Udacity、网飞等品牌在它们的一些图像和图标中使用SVG。</p>
<p>我们将讨论以下内容:</p>

<h2 id="use-svg-over-other-image-formats">为什么要使用SVG而不是其他图像格式？</h2>
<p>与SVG相比，您可能更熟悉JPEG、gif和PNG等图像格式。然而，有很多原因可以解释为什么你想使用SVG而不是其他格式。让我们看看SVG相对于其他图像格式的一些优势:</p>
<ul>
<li><strong>可伸缩性和分辨率</strong>:这是SVG相对于其他格式的最大优势。SVG使用形状、数字和坐标，而不是像其他图像格式那样使用像素网格。这使得在不损失质量的情况下放大和缩小SVG图像成为可能，并赋予SVG无限缩放的能力</li>
<li><strong>小文件大小</strong> : SVG文件与其他文件格式相比通常较小，并且易于压缩，这使得它们的大小甚至更小</li>
<li><strong>高性能和高速度</strong>:由于SVG图像的尺寸很小，所以浏览器渲染起来非常容易和快速。与渲染其他图像格式的像素和颜色相比，这就像渲染文本一样。此外，如果在代码中使用内联SVG，浏览器就不必请求获取图像，并像文件中的所有其他代码一样呈现图像。在这种情况下，没有提出任何请求。但是如果你有一个复杂的图像SVG文件，比如<a href="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg/687px-Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg">蒙娜丽莎</a>的照片，我建议使用PNGs或JPEGs，因为SVG的加载时间和性能会大幅下降</li>
<li><strong>类似DOM，可样式化，可编辑</strong> : SVG图像就像代码，所以这意味着它们可以像DOM元素一样被导航，也可以被样式化。有些属性会有不同的名称。然而，举例来说，你可能想要使用<code>fill</code>而不是<code>color</code>。也可以用CSS来设计SVG的样式。同样，因为SVG类似于DOM，所以可以用任何文本编辑器来创建、编辑和制作SVG动画</li>
<li><strong>可制作动画</strong>:SVG可以制作动画。这可以通过Web动画API、WebGL、CSS动画等工具来完成。在这篇详细的文章中阅读更多关于用CSS 制作SVG动画的<a href="https://blog.logrocket.com/animating-svg-with-css-83e8e27d739c/"/></li>
<li>易于集成:SVG可以以多种方式使用:它们可以显示徽标图像和图标、图形、动画、效果等等</li>
<li><strong>可访问性和SEO</strong>:SVG包含文本，这提高了可访问性。这也意味着它们可以被搜索、索引、编写脚本等。</li>
</ul>
<h2 id="use-svgs-react">如何在React中使用SVG</h2>
<p><img data-attachment-id="153055" data-permalink="https://blog.logrocket.com/how-to-use-svgs-react/attachment/react-svg-logo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo.png" data-orig-size="730,227" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React SVG logo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo-300x93.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo.png" decoding="async" class="aligncenter size-full wp-image-153055 jetpack-lazy-image" src="../Images/01cf5fff6a121526f55a0c13333d3dcb.png" alt="React SVG Logo" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo-300x93.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo.png"/></p>
<p>下面我们将介绍在网页上使用或渲染React SVG徽标的各种方法。<br/>值得注意的是，Create React App内置了处理SVG的配置。本文中需要修改webpack设置的一些示例只适用于使用webpack作为捆绑器的自定义React项目。</p><noscript><img data-lazy-fallback="1" data-attachment-id="153055" data-permalink="https://blog.logrocket.com/how-to-use-svgs-react/attachment/react-svg-logo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo.png" data-orig-size="730,227" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React SVG logo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo-300x93.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-153055" src="../Images/01cf5fff6a121526f55a0c13333d3dcb.png" alt="React SVG Logo" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo-300x93.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/react-svg-logo.png"/></noscript>
<p>如果您的自定义React项目不使用webpack，您可能需要不同的插件。</p>
<p>对静态SVG使用<code>&lt;img&gt;</code>标签</p>
<h3 id="using-img-tag">为了在<code>&lt;img&gt;</code>标签中使用SVGs或任何其他图像格式，我们必须在我们使用的任何模块捆绑器中设置一个文件加载器系统。在这里，如果你已经使用webpack作为捆绑器，我将向你展示如何通过几个步骤来设置它。</h3>
<p>如果您使用的是webpack 4，首先用命令<code>$ npm install file-loader --save-dev</code>安装文件加载器库。这将安装它作为一个开发依赖。</p>
<p>您可以使用以下代码更新webpack配置文件规则:</p>
<p>然而，如果您使用webpack 5，文件加载器库<a href="https://v4.webpack.js.org/loaders/file-loader/">已被弃用</a>。使用<a href="https://webpack.js.org/guides/asset-modules/">资产模块</a>代替。使用资产模块，您可以在项目设置中使用资产文件，而无需安装额外的加载程序。更新webpack配置文件的规则字段，以包括以下内容:</p>
<pre class="language-javascript hljs">const webpack = require('webpack');

module.exports = {
  entry: './src/index.js',
  module: {
    rules: [
      //...
      {
        test: /\.(png|jp(e*)g|svg|gif)$/,
        use: [
          {
            loader: 'file-loader',
            options: {
              name: 'images/[hash]-[name].[ext]',
            },
          },
        ],
      },
    ],
  },
  //...
};
</pre>
<p>现在，您可以导入您的SVG并将其用作变量，如下所示:</p>
<pre class="language-javascript hljs">module.exports = {
  entry: "./src/index.js",
  module: {
    rules: [
      //...
      {
        test: /\.(png|jp(e*)g|svg|gif)$/,
        type: "asset/resource",
      },
    ],
  },
  //...
};
</pre>
<p>使用<code>&lt;svg&gt;</code>元素</p>
<pre class="language-javascript hljs">import React from 'react';
{/*images*/}
import ReactLogo from './logo.svg';

const App = () =&gt; {
  return (
    &lt;div className="App"&gt;
      &lt;img src={ReactLogo} alt="React Logo" /&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<h3 id="using-svg-element">使用上面相同的webpack设置，我们可以通过将<code>.svg</code>文件的内容复制并粘贴到我们的代码中来使用<code>&lt;svg&gt;</code>元素。下面是一个示例用例:</h3>
<p>您可能已经看到了使用这种方法的缺点。当图像更复杂时，SVG文件变得更大，因为SVG存储在文本中，这意味着我们的代码中有一大堆文本。</p>
<pre class="language-javascript hljs">import React from 'react';

const App = () =&gt; {
  return (
    &lt;div className="App"&gt;
      &lt;svg  viewBox="0 0 841.9 595.3"&gt;
        &lt;g fill="#61DAFB"&gt;
          &lt;path d="M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"/&gt;
          &lt;circle cx="420.9" cy="296.5" r="45.7"/&gt;
          &lt;path d="M520.5 78.1z"/&gt;
        &lt;/g&gt;
      &lt;/svg&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>使用SVG作为组件</p>
<h3 id="using-svg-component">SVG可以被导入，并在React代码中直接用作React组件。图像不是作为单独的文件加载的；相反，它是和HTML一起呈现的。一个示例用例如下所示:</h3>
<p>请注意，这种方法仅适用于Create React App。CRA在幕后使用SVGR，使得将SVG作为React组件进行转换和导入成为可能。如果你没有使用Create React App，我建议你使用其他方法。</p>
<pre class="language-javascript hljs">import React from 'react';
import {ReactComponent as ReactLogo} from './logo.svg';

const App = () =&gt; {
  return (
    &lt;div className="App"&gt;
      &lt;ReactLogo /&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>使用SVGR</p>
<h3 id="using-svgr">SVGR是一个很棒的工具，可以将SVG转换成React组件。那么我们如何设置它呢？</h3>
<p>首先，通过运行命令<code>$ npm install @svgr/webpack --save-dev</code>安装软件包。然后，更新您的webpack配置规则，以便将SVGR用于SVG:</p>
<p>现在，您可以导入SVG图像作为React组件，并在我们的代码中使用它们，如下所示:</p>
<pre class="language-javascript hljs">const webpack = require('webpack');

module.exports = {
  entry: './src/index.js',
  module: {
    rules: [
      //...
      {
        test: /\.svg$/,
        use: ['@svgr/webpack'],
      },
    ],
  },
  //...
};
</pre>
<p>使用SVG作为数据URL</p>
<pre class="language-javascript hljs">import React from 'react';
import ReactLogo from './logo.svg';

const App = () =&gt; {
  return (
    &lt;div className="App"&gt;
      &lt;ReactLogo /&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<h3 id="using-svg-data-url">数据URL是以<code>data:</code>方案为前缀的URL，它允许内容创建者在文档中内嵌小文件。您可以在<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs"> MDN网络文档</a>中了解更多信息。这种方法允许我们像使用内嵌元素一样使用SVG图像。</h3>
<p>你如何实现这一点？首先，如果你使用webpack，你需要一个合适的加载器。对于这个用例，我将使用<code>svg-url-loader</code>。您可以通过运行命令<code>$ npm install svg-url-loader --save-dev</code>将其添加到您的项目中。</p>
<p>然后，用以下内容更新webpack配置文件规则部分:</p>
<p>现在，您可以导入SVG文件，并在React组件中使用它，如下所示:</p>
<pre class="language-javascript hljs">const webpack = require('webpack');

module.exports = {
  entry: './src/index.js',
  module: {
    rules: [
      //...
      {
        test: /\.svg$/,
        use: [
          {
            loader: 'svg-url-loader',
            options: {
              limit: 10000,
            },
          },
        ],
      },
    ],
  },
  //...
};
</pre>
<p>这通常会在DOM中产生类似这样的结果:</p>
<pre class="language-javascript hljs">import ReactLogo from './logo.svg';

const App = () =&gt; {
  return (
    &lt;div className="App"&gt;
      &lt;img src={ReactLogo} alt="React Logo" /&gt;
    &lt;/div&gt;
  );
}

&lt;img src="data:image/svg+xml,%3csvg..." alt="React Logo" /&gt;
</pre>
<p>使用<code>react-svg</code>将SVG注入DOM</p>
<pre class="language-html hljs">&lt;img src="data:image/svg+xml,%3csvg..." alt="React Logo" /&gt;
</pre>
<h3 id="injecting-svg-dom-react-svg">直接在React组件中添加SVG标记会增加其文件大小，使其难以维护。尽管有这个限制，使用内联SVG也有它的优点。与使用<code>img</code>标签相比，内嵌嵌入时可以很容易地将CSS样式应用于SVG标记。</h3>
<p>为了充分利用内嵌SVG的好处而不用担心组件的可维护性，可以使用<code>react-svg</code>包。它异步获取SVG并内嵌它。</p>
<p>您可以从NPM软件包注册表中安装它，如下所示:</p>
<p>然后，您可以导入<code>ReactSVG</code>组件，并在React应用程序中呈现它。<code>ReactSVG</code>组件将SVG的URL作为<code>src</code>属性的值。它还需要几个可选的属性，您可以在文档中查找:</p>
<pre class="language-bash hljs">npm install react-svg
</pre>
<p>如何在React中制作SVG动画</p>
<pre class="language-javascript hljs">import { ReactSVG } from "react-svg";

&lt;ReactSVG src="icon.svg" /&gt;
</pre>
<h3 id="animate-svgs-react">正如介绍中提到的，使用SVG优于其他图像格式的一个好处是SVG可以动画化。你可以使用<a href="https://blog.logrocket.com/how-to-animate-svg-css-tutorial-examples/"> CSS </a>或者像<a href="https://blog.logrocket.com/framer-motion-tutorial/">成帧器动作</a>和<a href="https://blog.logrocket.com/animations-with-react-spring/">反应弹簧</a>这样的反应动画库来<a href="https://blog.logrocket.com/build-svg-circular-progress-component-react-hooks/">制作</a>SVG动画。</h3>
<p>需要注意的事项:</p>
<p><strong>复杂的图像</strong>:图像越复杂，SVG文件就越大——我们在尝试使用<code>&lt;svg&gt;</code>元素时看到了这一点。在这里，我会推荐你使用PNG或JPEG图像</p>
<ul>
<li>web上的向后支持 : SVG没有向后浏览器支持，这意味着大多数旧版本的浏览器都不支持SVG。因此，对于仍在使用这些版本的用户来说，SVG可能无法正确显示。如果您的目标是旧版本的浏览器，SVG可能不是您的首选图像格式</li>
<li>结论</li>
</ul>
<h2 id="conclusion">SVG在今天的网络图像中占据了相当大的比例。如上所述，SVG比其他图像格式的文件更小。您可以在不损失图像质量的情况下调整它们的大小，并且它们是可动画化的。</h2>
<p>虽然在HTML中它的用法很简单，但是在React这样的前端框架中使用SVG还需要额外的工具和配置。大多数流行的React project starter工具集，如Create React App、Vite和Astro，都带有现成的配置来处理静态资产，如图像，包括SVG。</p>
<p>正如文章中所暗示的，Create React App在幕后使用了SVGR webpack loader，<code>@svgr/webpack</code>。因此，您可以用一个<code>import</code>语句导入一个SVG，并在您的应用程序中呈现它。您也可以内嵌SVG标记。然而，内联呈现SVG会使组件难以维护。</p>
<p>对于使用webpack作为捆绑器的自定义React项目，可以配置<code>@svgr/webpack</code>加载器来加载SVG，类似于Create React App。</p>
<p>当您使用SVG时，值得一提的是复杂的图像可能有很大的SVG文件，特别是当您想要内联SVG时。尽管大多数流行的现代浏览器完全支持SVG，但是有些浏览器，尤其是移动浏览器，并不完全支持某些SVG特性。</p>
<p>As you use SVGs, it is worth mentioning that complex images can have large SVG files, especially if you want to inline the SVG. Though most popular modern browsers fully support SVGs, some browsers, especially mobile browsers, do not have full support for certain SVG features.</p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>