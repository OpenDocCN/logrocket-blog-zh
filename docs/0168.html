<html>
<head>
<title>How to make any website faster - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何让任何网站更快</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-make-any-website-faster-65111ced2923/#0001-01-01">https://blog.logrocket.com/how-to-make-any-website-faster-65111ced2923/#0001-01-01</a></blockquote><div><article class="article-post">
<figure><img decoding="async" src="../Images/47899f8d38191fdcfb42ecd437885530.png" data-height="910" data-width="1250" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*-77Q1XGOCHgqz2uFh4lgzQ.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*-77Q1XGOCHgqz2uFh4lgzQ.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/47899f8d38191fdcfb42ecd437885530.png" data-height="910" data-width="1250" data-original-src="https://storage.googleapis.com/blog-images-backup/1*-77Q1XGOCHgqz2uFh4lgzQ.png"/></noscript></figure>
<h4>介绍</h4>
<p>几年前，当我开始接触编程时，我真的对我可以抓住的无限机会感到兴奋。</p>
<p>当我那时开发网站的时候，我记得它们没有我今天构建的网络“应用程序”做得多。</p>
<figure class="wp-caption"><img decoding="async" src="../Images/7edb4ca34e36be4f872e6846465ecf8c.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*pWr-0F3ArF6eNyCBxTDZJQ.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*pWr-0F3ArF6eNyCBxTDZJQ.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/7edb4ca34e36be4f872e6846465ecf8c.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*pWr-0F3ArF6eNyCBxTDZJQ.png"/></noscript><figcaption class="wp-caption-text"><em>The web can do that. More features, please.</em></figcaption></figure>
<p>如今，网络做得更多，其功能超出了之前的预期。</p>
<p>而且这还没有结束。</p>
<p>现在，大多数网络应用程序都在移动设备上使用，连接速度慢且不可靠，而且可以从世界上任何一个国家访问。从尼日利亚到印度。</p>
<figure><img decoding="async" src="../Images/a8f017e875e686bd950f26ba1b1c2d03.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*RF6wnkD9d8cOU4sPCeNP6g.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*RF6wnkD9d8cOU4sPCeNP6g.jpeg"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/a8f017e875e686bd950f26ba1b1c2d03.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*RF6wnkD9d8cOU4sPCeNP6g.jpeg"/></noscript></figure>
<p>作为一个生活在尼日利亚的人，一个第三世界国家，为她的人民开发产品，确保我开发的应用程序是快速的并不是一种奢侈。这不是什么技术幻想。这是我每天都要面对的现实。</p>
<p>现在，我不再只考虑如何建立网页，我也关心如何让网页更快。</p>
<p>你知道吗？</p>
<figure class="wp-caption"><img decoding="async" src="../Images/e27e237d9d703b916858a494b06d590d.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*h-5rwaIh6F3RROQ0duSMfQ.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*h-5rwaIh6F3RROQ0duSMfQ.jpeg"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/e27e237d9d703b916858a494b06d590d.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*h-5rwaIh6F3RROQ0duSMfQ.jpeg"/></noscript><figcaption class="wp-caption-text">Ship fast, make it work, make it fast?</figcaption></figure>
<p>多沉重的负担啊。</p>
<p>你看，我分享的故事不仅仅是我要讲的。大多数web开发人员会告诉你同样的事情。</p>
<p>大多数人从构建能够正常工作的应用程序开始他们的职业生涯，然后他们开始关心如何让它们变得更快。</p>
<p>这种关注催生了web性能领域。</p>
<hr/>
<p>Web性能非常重要。事实上，你网站的表现可以决定你是继续经营还是赔钱。</p>
<p>那么，如何构建持续快速运行的web应用程序呢？</p>
<p>这是有答案的！</p>
<p>在这篇文章中，我将提供一些你可以马上使用的技巧，让任何一个网站都变得更快。不管它是建立在什么技术之上的，都有让<em>任何</em>网站快速运行的普遍原则。</p>
<blockquote><p>免责声明:您不必应用我在这里讨论的每一种技术。无论你选择应用哪一个，都一定会提高你网站的速度——这是必然的。此外，web性能是一个广阔的领域——我不可能解释所有的技术。但是，我相信我已经很好地提炼了它们。</p></blockquote>
<p>如果你准备好了，我也准备好了！</p>
<h4>这篇文章的结构</h4>
<p>本文中的所有技术都用简单易懂的语言进行了解释。然而，为了吸引不同技能水平的工程师，我将这些技术分成了三个不同的部分——初级、中级和高级技术。</p>
<p>你会在下面找到相应的标题。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p>如果您是web性能的新手，或者很难真正理解web性能是如何工作的，那么您肯定应该从第一组技术开始。</p>
<p>对于中级和高级开发人员，我有一些有趣的考虑。随意浏览你熟悉的技术。</p>
<h3>初级技术</h3>
<p>这不是一个问题，以新的艺术来改善您的网站的性能。其实大家都是从初学者开始的！</p>
<p>不管你的技能水平如何，都有一些简单的技巧你可以马上尝试——对你网站的加载速度有显著的影响。</p>
<p>首先，让我解释一下您应该如何看待web性能。</p>
<h4>作为初学者如何看待web性能</h4>
<p>为了让你的网络应用更快，你必须理解每次用户访问你的网站时不断发生的“对话”。</p>
<p>每当用户访问您的网站时，他们都会向您的服务器请求某些资源，例如用于您的web应用程序的<code>HTML</code>、<code>CSS</code>和<code>JS</code>文件。</p>
<figure class="wp-caption"><img decoding="async" src="../Images/7540ddc109714bf10e137aa7709a2b59.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*5vSLXIEHpju5WjQ6r5ptsg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*5vSLXIEHpju5WjQ6r5ptsg.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/7540ddc109714bf10e137aa7709a2b59.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*5vSLXIEHpju5WjQ6r5ptsg.png"/></noscript><figcaption class="wp-caption-text">Assets required from your server</figcaption></figure>
<p>你就像一个厨师，要为很多饥饿的人服务。</p>
<p>作为一名厨师，你必须关心你给每个人提供多少食物。如果你端的太多，他们的盘子会满满的溢出来。</p>
<p>你还必须注意你端食物的方式。如果你做得不对，你会把食物洒得到处都是。</p>
<p>最后，你必须关心你提供的是什么食物。这食物加香料了吗？盐太多了？</p>
<p>要想在构建高性能的web应用程序方面取得成功，您必须学会成为一名优秀的厨师。</p>
<p>你必须关心<strong>你发送给用户多少</strong>资产、<strong>你如何发送</strong>这些资产、<strong>这些资产被“烹饪”得有多好</strong>。</p>
<p>如果这听起来含糊不清，它真的很简单。让我们从学习减少发送给用户的资产数量的技巧开始。</p>
<h4>1.消除不必要的资源，并保持残忍</h4>
<p>大多数应用程序都很臃肿，因为其中有太多“无用”的代码。这些被更恰当地称为<em>不必要的资源</em>。例如，您可能不需要所有的jQuery，只是因为您想要查询DOM。移除jQuery，并使用浏览器特定的API，如<code>document.querySelector</code></p>
<p>另一个很好的例子是，如果你真的不需要Bootstrap，那就不要放在那里。CSS本身是一个<a href="https://blog.logrocket.com/how-browser-rendering-works-behind-the-scenes-6782b0e8fb10?source=user_profile---------6------------------&amp;gi=b21b157832e8" target="_blank" rel="noopener noreferrer">渲染阻塞资源</a>，引导模块会让你下载很多你可能最终不会用到的CSS。拥抱<a href="https://medium.com/flexbox-and-grids" target="_blank" rel="noopener noreferrer"> Flexbox和CSS网格</a>进行布局。尽可能使用好的旧CSS。</p>
<p>问自己的问题是:</p>
<p>(I)资源是否真的提供了如此多的价值？例如，我并不总是使用Bootstrap，尽管我写了一份关于这个主题的详尽指南。</p>
<p>(ii)我是否可以使用相同的资源，但将其分解为我正在使用的确切模块？例如，您可以导入一个<a href="https://stackoverflow.com/questions/35250500/correct-way-to-import-lodash" target="_blank" rel="noopener noreferrer">子集</a>，而不是导入整个<code>Lodash</code>包。</p>
<p>(iii)我可以一起替换资源吗？例如，只需移除<code>JQuery</code>并使用特定于浏览器的API来查询DOM。</p>
<p>这些问题可能会继续下去，但前提是不变的。列出你的网络应用的资源清单，确定它们是否提供了足够的价值，并痛苦地坦诚它是如何影响你的网站性能的。</p>
<figure/>
<h4>2.永远缩减你的资产</h4>
<p>即使在去除了应用程序中不必要的资源之后，还是会有一些资源是你不可或缺的。一个很好的例子就是你app的一些文本内容，即<code>HTML</code>、<code>CSS</code>和<code>JS</code>。</p>
<p>消除你网站上所有的<code>HTML</code>、<code>CSS</code>和<code>JS</code>会让你的网站不存在。那不是要走的路线。不过，我们还是可以做点什么。</p>
<p>考虑下面显示的简单的<code>HTML</code>文档:</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;!-- comment: this is some important meta stuff here --&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
  &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;!-- Note to self 3 weeks from now: Here's the body --&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>本文档包含注释、有效的<code>HTML</code>字符、适当的缩进和间距以适应可读性。</p>
<p>将上面的文档与下面的缩略版本进行比较:</p>
<pre><code>&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt; &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;/body&gt;&lt;/html&gt;</code></pre>
<p>您可能已经注意到，文档的缩小版去掉了注释和空格。你看起来不可读，但计算机可以阅读和理解这个。</p>
<p>简单来说，缩小意味着在不改变文本用途的情况下，删除文本中的空白和不必要的字符。</p>
<p>作为一个经验法则，你的生产应用应该总是把它们的<code>HTML</code>、<code>CSS</code>和<code>JS</code>文件缩小。全部都是。</p>
<p>在这个虚构的例子中，缩小的<code>HTML</code>文档是263字节，未缩小的版本是367字节。文件大小减少了28%!</p>
<p>你可以想象这对一个拥有许多不同文件的大型项目的影响——这些文件有<code>HTML</code>、<code>CSS</code>和<code>JS</code>。</p>
<p>对于这个例子，我使用了一个简单的<a href="https://www.willpeavy.com/minifier/" target="_blank" rel="noopener noreferrer">基于网络的迷你器</a>。然而，对于一个足够大的应用程序来说，这是一个繁琐的过程。那么，这个过程可以自动化吗？</p>
<p>耶！绝对的。</p>
<p>如果你曾经用<code>React</code>或<code>Vue</code>(或者任何其他现代前端框架)构建过一个应用程序，你很可能会在他们的配置/设置工具中内置一个构建发布周期，比如<code>create-react-app</code>和<code>vue-cli</code>。</p>
<p>这些工具会自动为你处理文件缩小。如果你正在从头开始建立一个新项目，你应该考虑使用一个现代的构建工具，比如<a href="https://webpack.js.org" target="_blank" rel="noopener noreferrer"> Webpack </a>或者<a href="https://parceljs.org" target="_blank" rel="noopener noreferrer"> Parcel </a>。</p>
<p>你的<code>HTML</code>、<code>CSS</code>或<code>JS</code>中的每一个角色都必须从服务器下载到浏览器中，这可不是一件小事。通过缩小你的<code>HTML</code>、<code>CSS</code>和<code>JS</code>，你已经减少了下载这些资源的开销。</p>
<p>这是一个好厨师会做的。</p>
<h4>3.通过Gzip进一步压缩文本资源</h4>
<p>你已经做了一件很棒的工作，在你的网络应用程序(<code>HTML</code>、<code>CSS</code>和<code>JS</code>)中缩小你的文本内容</p>
<p>缩减资源后，让我们假设您继续将应用程序部署到某个服务器上。</p>
<p>当用户访问您的应用程序时，他们从服务器请求这些资源，服务器响应，并开始下载到浏览器。</p>
<p>如果在整个过程中，服务器可以在向客户机发送资源之前执行更多的压缩，那会怎么样呢？</p>
<p>这就是<code>Gzip</code>的用武之地。</p>
<p>奇怪的名字，是吧？</p>
<p>我第一次听到<code>Gzip</code>这个词的时候，似乎除了我，每个人都知道它的意思。</p>
<p>简单来说，<code>Gzip</code>指的是最初为GNU项目编写的数据压缩程序。同样，你可以通过一个在线程序或一个现代捆绑包，如<code>Wepback</code>或<code>Rollup</code>，<code>Gzip</code>来缩小资产，这也是一个数据压缩程序。</p>
<p>值得注意的是，即使是缩小的文件也可以通过<code>Gzip</code>进一步压缩。记住这一点很重要。</p>
<p>如果您想亲自查看，请将以下内容复制、粘贴并保存到名为<code>small.html</code>的文件中</p>
<pre><code>&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt; &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;/body&gt;&lt;/html&gt;</code></pre>
<p>这代表了我们一直在处理的缩小的<code>HTML</code>文档。</p>
<p>打开您的终端，将工作目录切换到<code>small.html</code>文档所在的位置，然后运行以下命令:</p>
<pre><code>gzip small.html</code></pre>
<p>如果你用的是Mac，这个<code>gzip</code>程序会自动安装在你的电脑上。</p>
<p>如果你做的正确，现在你会有一个名为<code>small.html.gz</code>的压缩文件</p>
<p>如果您想知道通过<code>Gzip</code>进一步压缩我们节省了多少数据，请运行以下命令:</p>
<pre><code>ls -lh small.html.gz</code></pre>
<p>这将显示文件的详细信息，包括其大小。</p>
<figure><img decoding="async" src="../Images/1c9cc90a7112ad536e2856136cae0916.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*gJh-1DUCSOioHoA2jg_LrQ.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*gJh-1DUCSOioHoA2jg_LrQ.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/1c9cc90a7112ad536e2856136cae0916.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*gJh-1DUCSOioHoA2jg_LrQ.png"/></noscript></figure>
<p>这个文件现在大小为201字节！</p>
<p>让我正确地看待这件事。我们已经从<strong> 367 </strong>字节发展到<strong> 263 </strong>字节，现在<strong> 201 </strong>字节。</p>
<p>这比已经缩小的文件又减少了24%。事实上，如果你考虑到文件的原始大小(缩小前)，我们已经达到了超过45%的大小减少。</p>
<p>对于较大的文件，<code>gzip</code>可以实现高达70%的压缩！</p>
<p>下一个逻辑问题是，我如何在服务器上设置一个<code>gzip</code>压缩？</p>
<p>如果您是一名前端工程师，在部署您的前端应用程序时，您可以设置一个简单的node/express服务器来服务您的客户端文件。</p>
<p>对于一个express应用程序，使用<code>gzip</code>压缩只需要两行代码:</p>
<pre><code>const compression = require('compression');
const app = express();
app.use(compression());</code></pre>
<p>不管怎样，<code>compression</code>模块是来自express后面的同一个团队的<a href="https://github.com/expressjs/compression" target="_blank" rel="noopener noreferrer">包</a>。</p>
<p>不管你的服务器设置如何，一个简单的谷歌搜索“如何在XXX服务器上通过gzip压缩”将会把你引向正确的方向。</p>
<p>值得一提的是，并不是所有的资源都值得被gzip。对于文本内容，如<code>HTML</code>、<code>CSS</code>和<code>JS</code>文档，您将获得最佳结果。</p>
<p>如果用户在现代浏览器上，浏览器会在下载后自动解压缩gzipped文件。所以，你不用担心这个。我发现这个<a href="https://stackoverflow.com/questions/32172704/is-gzip-automatically-decompressed-by-browser" target="_blank" rel="noopener noreferrer">很有启发性，所以如果你想知道答案的话。</a></p>
<p>记住，通过Gzip在服务器上缩小和进一步压缩你的文本内容是很棒的。明白了吗？</p>
<h4>4.优雅地处理图像。</h4>
<p>图像的问题在于它们占据了大量的视觉空间。如果一个图像坏了，或者不能快速加载，这通常是很明显的。更不用说图片也是网页上下载量最大的部分了。不注意形象优化几乎是一种犯罪。</p>
<p>那么，你能做些什么来优化你的形象呢？</p>
<h4>(a)完全删除图像？</h4>
<p>如果你所寻求的效果可以通过使用CSS效果来实现，比如渐变和阴影，你应该明确地考虑不要使用图像来实现这样的效果。您可以在CSS中用图像文件所需的一小部分字节完成同样的事情。</p>
<h4>(b)选择正确的图像类型</h4>
<p>这可能很棘手，但随着时间的推移，你会习惯于更快地做出决定。如果你需要插图，几何形状等。无论如何，您应该选择一个SVG。对于其他一切，光栅图形是你最好的选择。</p>
<p>即使光栅图形也有许多不同的风格。GIF，PNG，JPEG，WebP？</p>
<p>如果您需要PNG提供的透明度，请选择它，否则，同一图像文件的大多数JPEGs往往会比PNG文件小。好吧，你知道什么时候你需要gif，但是有一个问题，你将在下面看到。</p>
<h4>(d)用视频取代gif</h4>
<p>我建过一些网站，在这些网站上，为动画内容和小视频放一张GIF图片要容易得多。尽管很方便，但问题是gif文件的尺寸通常比视频文件要大。有时候要大很多！</p>
<p>这不是一条永远正确的铁定规则。</p>
<p>例如，下面是我曾经制作的一个截屏:</p>
<figure><img decoding="async" src="../Images/96965ba9d1a1b9e1f5d509e927a16499.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*hMo_3PECV7enwyUQXm9KOw.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*hMo_3PECV7enwyUQXm9KOw.gif"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/96965ba9d1a1b9e1f5d509e927a16499.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*hMo_3PECV7enwyUQXm9KOw.gif"/></noscript></figure>
<p>GIF的大小是2.2mb。然而，将截屏导出为视频会产生同样大小的文件，2.2mb！</p>
<p>根据GIF的质量、帧速率和长度，你必须自己测试。</p>
<p>要将GIF转换成视频，你可以使用一个在线转换器或者用一个T2 CLI解决方案。</p>
<h4>(e)压缩所有图像</h4>
<p>请记住，图像占用了大量的互联网带宽——主要是因为它们的文件大小。图像压缩可能还需要15分钟才能真正解释清楚，我怀疑你会等得够久。</p>
<p>Addy Osmani提供的<a href="https://images.guide" target="_blank" rel="noopener noreferrer">图片指南</a>是一个很好的资源。然而，如果你不想在这方面花太多心思，你可以使用在线工具，比如<a href="https://tinypng.com" target="_blank" rel="noopener noreferrer"> TinyPNG </a>来压缩你的光栅图像。对于SVG，考虑从命令行使用<a href="https://github.com/svg/svgo" target="_blank" rel="noopener noreferrer"> SVGO </a>，或者web界面，Jake Archibald的<a href="https://jakearchibald.github.io/svgomg/" target="_blank" rel="noopener noreferrer"> SVGOMG </a>。</p>
<p>这些工具将保留您的图像质量，但大大减少了它们的大小！</p>
<figure class="wp-caption"><img decoding="async" src="../Images/96115ac10d80d842877efdc1b37ab4e6.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*rQRovns2ganSMs5A-1v2Ww.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*rQRovns2ganSMs5A-1v2Ww.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/96115ac10d80d842877efdc1b37ab4e6.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*rQRovns2ganSMs5A-1v2Ww.png"/></noscript><figcaption class="wp-caption-text">TinyPNG is use here.</figcaption></figure>
<h4>(e)提供合适的图像尺寸</h4>
<p>如果您为计算机和较小的设备提供相同的超大图像，这就是性能漏洞！一个更容易理解的例子是从服务器加载一个大图片作为缩略图。这几乎没有任何意义。</p>
<p>在大多数情况下，您可以通过使用<code>HTML</code>图像<code>srcset</code>和<code>sizes</code>属性来避免这种情况。</p>
<p>首先，让我给你看看我们正在努力解决的问题。<code>img</code>元素的默认用法如下:</p>
<pre><code>&lt;img src="cute-kitten-800w.jpg" alt="A pretty cute kitten"/&gt;</code></pre>
<p><code>img</code>标签具有<code>src</code>和<code>alt</code>属性。<code>src</code>指向宽度为<code>800px</code>的单幅图像。这意味着，移动设备和更大的屏幕都将使用相同的大图像。你会同意这不是最有效的解决方案。</p>
<p>但是，请考虑以下情况:</p>
<pre><code>&lt;img srcset="cute-kitten-320w.jpg 320w,
             cute-kitten-480w.jpg 480w,
             cute-kitten-800w.jpg 800w"
     sizes="(max-width: 320px) 280px
            (max-width: 480px) 440px
            800px"
     src="cute-kitten-800w.jpg" alt="A pretty cute kitten" /&gt;</code></pre>
<p>你能理解吗？</p>
<p>嗯，<code>srcset</code>就像一个可供浏览器选择的图像大小的桶。<code>srcset</code>值是一个用逗号分隔的字符串。</p>
<p><code>sizes</code>是决定选项桶中哪个图像分配给哪个设备尺寸的属性。</p>
<p>例如，<code>sizes</code>值中的初始声明为，<em>如果设备宽度为320px或更小，则使用宽度最接近280px的任何图像，即检查我们的选项桶</em></p>
<p>这很容易推理。通常，较小的图像意味着图像的尺寸较小。这意味着用户在较小的屏幕上使用较小的带宽。每个人都赢了。</p>
<p>如果作为一个初学者，你应用了这些原则，你一定会拥有一个比以前更快的web应用程序。Web性能是一个不断变化的目标。不要让你对题目的了解到此为止。如果你对更多的技术感兴趣，请看下面我分享的中级技术。</p>
<h3>中间技术</h3>
<p>作为一名中级开发人员，我认为你对一些基本的web性能技术有经验。那么，你能做些什么来让你的知识更上一层楼呢？</p>
<h4>作为一个中级开发人员如何看待web性能</h4>
<p>当你不再是一个制作更快的web应用程序的新手时，你对web性能的心态就会改变。</p>
<p>以下是一些需要考虑的事项:</p>
<h4>1.加载速度快是好事。越快越好。</h4>
<p>人们普遍认为，用户花费大部分时间等待网站对他们的输入做出响应，而不是等待网站加载，但这还不是全部。</p>
<p>我的观点是:用户会等待你的网站加载，但是如果你的网站在初次加载后运行缓慢，他们就没有耐心了。</p>
<p>那是有争议的，不是吗？</p>
<p>我在可怕的网络连接上浏览过互联网。我见过加载网站需要几十秒钟。这已经没什么大不了的了。我会等的。然而，当你的网站加载时，我希望它能“快速工作”。那对我来说是交易的破坏者。</p>
<p>不要误解我。对于你的网络应用来说，快速加载是非常重要的，但是，我的观点仍然成立。从心理学上来说，当你的网页加载时，用户会比实际使用你的网站时更加关注你。用户希望你的网站能够流畅地互动。</p>
<p>在你开发思维的某个地方，开始考虑不仅要让你的web应用加载得更快，还要让你的工作和感觉更快。</p>
<h4>2.测试驱动性能，赢得胜利</h4>
<p>在测试驱动的性能中，不像TDD，你不“写测试”。该过程如下图所示。</p>
<figure class="wp-caption"><img decoding="async" src="../Images/8c366d636dd903cd98b7017ac59c9587.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*xNX0DgmupQUmx3MeJCJiEQ.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*xNX0DgmupQUmx3MeJCJiEQ.jpeg"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/8c366d636dd903cd98b7017ac59c9587.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*xNX0DgmupQUmx3MeJCJiEQ.jpeg"/></noscript><figcaption class="wp-caption-text">The test driven performance cycle</figcaption></figure>
<p>当构建web应用程序时，通常我会对我正在做的任何项目执行“通用”性能技术，但会测量<em>实际用户性能</em>以找到特定的瓶颈，因为所有的web应用程序本质上都是不同的。</p>
<p>那么，如何最好地衡量绩效呢？</p>
<p>当你第一次开始测量性能时，你最好的选择是使用一些工具，比如Chrome dev工具。这很好，直到您选择从真实世界的用户那里获取更加多样和精确的度量。</p>
<p>以下是我对此的看法。</p>
<p>初学者通常会在开发应用程序时测量性能。他们将借助现有的浏览器开发工具(如Chrome DevTools)来完成这项工作。</p>
<p>中级开发人员明白，仅仅在他们的计算机上测量性能并不能完全代表实际用户感受到的性能，因此他们通过进行<strong>实际用户测量</strong>将事情做得更好。</p>
<p>要做到这一点有点棘手，但概念很简单。</p>
<p>您可以编写一个应用程序附带的测量脚本。当用户加载你的网页时，脚本开始读取某些测量指标，并将它们发送到分析服务，如谷歌分析(GA)。它不一定是GA——但是GA是一个非常受欢迎的选择。</p>
<p>关于如何测量真实用户的性能指标的实际例子，请查看这个<a href="https://codelabs.developers.google.com/codelabs/performance-analytics/index.html?index=..%2F..%2Findex#0" target="_blank" rel="noopener noreferrer"> Google CodeLab </a>。</p>
<p>在您的分析服务器上，您将看到来自不同地区的多个用户在不同的网络条件和不同的计算机处理能力下的分布式性能测量。这就是真实用户测量非常强大的原因。</p>
<p>应用程序的加载时间是不同用户在不同条件下的加载时间的总和。永远记住这一点。</p>
<h4>3.游戏心理学和感知速度目标</h4>
<p>用户是人类，人类往往有一些共同的行为。有趣的是，对这些行为的了解有助于你构建更能引起人类共鸣的应用。</p>
<p>“人类”的说法已经说得够多了，下面是我的意思的一个例子。</p>
<p>你有没有想过为什么很多电梯都有镜子？仔细想想这个。</p>
<p>我想到的是，它们允许人们在30层以上的楼层上旅行，而不会感觉到他们已经等了很久！</p>
<p>同样的事情也可以在网上进行。当你的目标是感知速度时，你可以让你的网站“看起来”加载得更快！</p>
<p>在这样做的时候，一定要记住实际速度仍然很重要。</p>
<p>可以尝试的一些技巧包括:</p>
<h4>(一)懒加载内容</h4>
<figure class="wp-caption"><img decoding="async" src="../Images/41e9b1fe6e96c3c73dc0887ba0c58994.png" alt="https://blog.iamsuleiman.com/stop-using-loading-spinner-theres-something-better/" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*JIph8aM2PyQb-o_RJhnmnQ.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*JIph8aM2PyQb-o_RJhnmnQ.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/41e9b1fe6e96c3c73dc0887ba0c58994.png" alt="https://blog.iamsuleiman.com/stop-using-loading-spinner-theres-something-better/" data-original-src="https://storage.googleapis.com/blog-images-backup/1*JIph8aM2PyQb-o_RJhnmnQ.png"/></noscript><figcaption class="wp-caption-text"><a href="https://blog.iamsuleiman.com/stop-using-loading-spinner-theres-something-better/" target="_blank" rel="noopener noreferrer">Source</a></figcaption></figure>
<p>就像Medium lazy加载图像一样，lazy加载图像的症结(作为一个例子)是首先在页面上显示一个占位符图像。当这个图像加载时，它以不同的阶段显示，从模糊到清晰。类似的概念可以用于文本内容，而不仅仅是图像。</p>
<h4>(b)当用户导航到一个页面时，他们正在寻找视觉反馈。给他们一个！</h4>
<p>一种常见的技术是尽快向用户显示页面中最重要的部分。一旦他们导航到一个页面，向他们展示一些东西——最好是有用的东西。如果你做得好，用户可能几秒钟都不会注意到页面的其余部分。</p>
<p>通常所做的是在页面上显示最顶端的可见内容，即用户设备的初始视窗上的内容。这可以更好地描述为<em>之上的</em>内容。</p>
<p>此时不会加载文件夹下的内容。然而，您已经快速地向用户提供了重要的信息。这就引出了下一个技巧。</p>
<h4>优先考虑上面的内容</h4>
<p>如果你要首先向用户展示上面的内容，那么你就必须对内容进行优先排序。</p>
<p>通常所做的是在你的<code>HTML</code>文档中嵌入上面的内容。这样就不需要服务器往返。如果你使用像<a href="https://www.gatsbyjs.org" target="_blank" rel="noopener noreferrer">盖茨比</a>这样的静态网站生成器来开发静态网站，那么你是幸运的，因为它们有助于自动化这个过程。如果你选择自己做这件事，你需要考虑优化上面的内容(文本或图形)，例如通过缩小，同时选择一个工具<a href="https://github.com/addyosmani/critical" target="_blank" rel="noopener noreferrer">自动化过程</a>。</p>
<h3>先进的技术</h3>
<p>你已经阅读了文档，有了多年的经验，你非常自信你可以快速制作任何网站。</p>
<p>太棒了。</p>
<h4>作为一名高级开发人员，如何看待web性能</h4>
<p>作为一名高级开发人员，大多数性能技术都不会让您感到困惑。你知道它们是如何工作的，以及它们为什么重要。</p>
<p>即使在这个层面上，我也有一些有趣的想法给你。</p>
<h4>如果我们都错了呢？</h4>
<p>考虑一下我们都是如何对待加载性能的。用户在非常慢的网络上访问您的web应用程序，而不是让他们痛苦地一次接收所有字节的资源，您首先显示页面最重要的部分。</p>
<p>实现这一点的技术包括优先考虑页面上的折叠内容，并使第一次有意义的绘画计数。</p>
<p>这很棒，也很有效——就目前而言，但并非没有瑕疵。</p>
<p>这里的问题是，我们已经(在很大程度上)假设了页面上向用户展示的最重要的部分(尽管他们可怜的互联网很糟糕，或者为什么他们在低端CPU机器上)是上面的内容。</p>
<p>这是一个假设，但它有多真实呢？</p>
<p>大多数时候这可能是真的，但是假设本身就有缺陷。</p>
<p>让我给你举一个我如何使用Medium的例子。</p>
<p>首先，我每天都访问Medium。它就在我最常访问的网站中。</p>
<figure class="wp-caption"><img decoding="async" src="../Images/555ffc951cb108c1fe1e1706a54ca647.png" data-height="337" data-width="1111" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*7fhLs31LoBQrMAAbAnJG4w.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*7fhLs31LoBQrMAAbAnJG4w.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/555ffc951cb108c1fe1e1706a54ca647.png" data-height="337" data-width="1111" data-original-src="https://storage.googleapis.com/blog-images-backup/1*7fhLs31LoBQrMAAbAnJG4w.png"/></noscript><figcaption class="wp-caption-text">My list of frequently visited sites. See Medium?</figcaption></figure>
<p>每次我访问medium，我都会访问位于<a href="http://www.medium.com." target="_blank" rel="noopener noreferrer"><em>【www.medium.com】</em>的主页。</a></p>
<p>所以，这就是当你用慢速连接访问时会发生的情况。</p>
<figure class="wp-caption"><img decoding="async" src="../Images/b3c72888cf94c5631dfec97540c01364.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*AYRpvpYjOrTPLRrxfRV19g.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*AYRpvpYjOrTPLRrxfRV19g.gif"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/b3c72888cf94c5631dfec97540c01364.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*AYRpvpYjOrTPLRrxfRV19g.gif"/></noscript><figcaption class="wp-caption-text">Medium loading…</figcaption></figure>
<p>他们确实采取了值得称赞的性能措施来确保加载时间不会永远拖延。</p>
<p>如果你没有注意到，这里是他们在主页上逐渐呈现内容的实际顺序。</p>
<figure class="wp-caption"><img decoding="async" src="../Images/525af7af06b2cd86e213c4cae5a01d58.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*3llZI_nknQmAldLJ2VkuaQ.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*3llZI_nknQmAldLJ2VkuaQ.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/525af7af06b2cd86e213c4cae5a01d58.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*3llZI_nknQmAldLJ2VkuaQ.png"/></noscript><figcaption class="wp-caption-text">The order in which content is loaded. Note that this order isn’t always the same. For the most part, 1 and 2 get loaded before any other content</figcaption></figure>
<p>正如所料，上面的内容优先。最初的文章集是媒体成员预览，然后我的通知计数出现，然后来自我的网络的新文章被呈现，最后是由编辑挑选的文章。</p>
<p>那么，这种看似完美的渐进式渲染有什么坏处呢？</p>
<p>主要问题是，呈现这些项目的顺序是如何确定的？充其量这是基于研究“大多数”用户的假设。这不是一个个人的解决方案，只是另一个通用的解决方案吗？</p>
<p>如果有任何想法被用来研究实际的日常行为，那么随着时间的推移，其中的一些就会变得显而易见:</p>
<h4>1.我从不在主页上阅读我的通知</h4>
<figure><img decoding="async" src="../Images/21893d12fa176c7af7215a9324c92b2f.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*y-LjPHvJtkTk6vRP5dbXXg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*y-LjPHvJtkTk6vRP5dbXXg.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/21893d12fa176c7af7215a9324c92b2f.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*y-LjPHvJtkTk6vRP5dbXXg.png"/></noscript></figure>
<p>我收到很多通知。我不可能坐着看完成百上千的通知。我相信重要的通知会发到我的邮箱里，我只回复那些。我唯一一次点击通知徽章是为了去掉那里的任何数字。所以它又从零开始计数。</p>
<p>虽然这个放在折叠上方，但对我来说真的不重要。</p>
<h4>2.我几乎从不阅读会员专用的预览版文章</h4>
<figure><img decoding="async" src="../Images/35561993deb54fbfe833641d372c091a.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*0cgm-hIsZEWltbddlQ87eg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*0cgm-hIsZEWltbddlQ87eg.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/35561993deb54fbfe833641d372c091a.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*0cgm-hIsZEWltbddlQ87eg.png"/></noscript></figure>
<p>这是我看到的第一个内容(在一个超级慢的网络上),但我几乎从来没有看过。</p>
<p>你会问为什么？</p>
<p>我写和读了很多媒体的文章。当Medium开始允许作者在平台上付费时，我试着注册了，但我办不到。这与我的国家没有被这个项目接受有关。所以，我放弃了。</p>
<p>当时，我想如果他们不让我作为作者获得报酬，为什么他们会让我付钱给他们成为高级读者呢？</p>
<p>这就是我不是高级媒体用户的原因。如果他们解决了这个问题，我会考虑订阅。出于这个原因，我一个月不能阅读超过3篇仅限会员的文章(除非我以匿名浏览模式打开它们)。</p>
<p>随着时间的推移，我已经训练我的眼睛和头脑去阅读主页顶部吸引人的标题，并且完全忽略它们。</p>
<p>以上内容对我来说不是最有用的。</p>
<h4>3.我总是从我的网络上阅读新文章</h4>
<p>几乎最后呈现的内容似乎是我几乎每次点击主页都要寻找的内容。我想知道我的网络有什么新消息。我浏览并阅读了至少一篇有趣的文章。</p>
<figure><img decoding="async" src="../Images/4da519aabefc08fefc67ff4d030cf68d.png" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*SLNpb__ztKbcGesg8ujBzg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*SLNpb__ztKbcGesg8ujBzg.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/4da519aabefc08fefc67ff4d030cf68d.png" data-original-src="https://storage.googleapis.com/blog-images-backup/1*SLNpb__ztKbcGesg8ujBzg.png"/></noscript></figure>
<p>本质上，对我有意义的内容恰好是最后出现的。言外之意是，除了发出视觉反馈信号之外，第一幅有意义的画对我来说没什么用。</p>
<p>这种行为在手机上更加糟糕。加载时第一个充满整个屏幕的内容对我来说并不重要，我必须向下滚动才能找到来自我的网络的新文章——对我来说有意义的实际资源。</p>
<h4>那么，我们能弥补吗？</h4>
<p>每个问题都有解决方法。这只是我的一个想法，我正在努力实现它。问题的关键有点简单。有必要进一步应用机器学习，而不仅仅是个性化用户故事、反馈和建议。我们还可以提高网络性能。</p>
<p>作为一个用户，我更希望第一幅有意义的画能够个性化，真正有价值。个性化展示对我来说最重要的东西。是的，我。不是一般的结果。</p>
<p>如果你和我一样，对新的主题有很多疑问，我会回答你对这个提议的方法的一些担忧。</p>
<h4>我们目前优化折叠以上内容的方法有什么优点？</h4>
<p>我们目前的解决方案(如Medium的)优化折叠以上的内容是伟大的。确实有效。</p>
<p>用户只需等待几秒钟，但与此同时，他们会得到内容正在加载的视觉提示。这已经够好了，但是它很棒吗？这是我们作为一个社区所能做的最好的事情吗？</p>
<h4>额外的技术责任值得吗？</h4>
<p>如果采用一种个性化的方法来绘制第一幅有意义的画，并优化上面的内容，这将是一个技术责任太大而收益太少的问题吗？</p>
<p>也许不是。那么值得吗？</p>
<p>是的，从用户的角度来看。尤其是如果你服务于全球用户群，用户遍布世界各地，而不仅仅是那些人们吹嘘拥有高速互联网的地区。</p>
<p>你最终将获得个性化的表现——这种“产品”非常了解我的感觉。</p>
<p>这也为更好的性能技术打开了大门，比如在用户发起请求之前准确地预加载和预取资源。基于用户的重复使用，你现在可以使用机器学习做出近乎准确的决定。</p>
<h4>我对高级开发人员的结论</h4>
<p>我确实认为作为一个社区，我们在web性能方面做得很好。我认为也有改进的余地。我也认为我们需要这样思考才能得到真正进步的结果。</p>
<p>未来5年、10年，网络性能会是怎样的？变味还是更好？</p>
<p>不管你的技术水平如何，去开发快速的web应用程序吧。</p><div class="code-block code-block-2">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>
<hr/>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>