<html>
<head>
<title>Getting started with PostCSS - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>PostCSS - LogRocket博客入门</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/getting-started-with-postcss-in-2019-484262a4d725/#0001-01-01">https://blog.logrocket.com/getting-started-with-postcss-in-2019-484262a4d725/#0001-01-01</a></blockquote><div><article class="article-post">
<figure><img decoding="async" src="../Images/ac49e1400d3455f6b06b7892b5babeb9.png" data-height="3557" data-width="5335" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*jZHK_7MHJA7-2FqQeSnzIQ.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*jZHK_7MHJA7-2FqQeSnzIQ.jpeg"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/ac49e1400d3455f6b06b7892b5babeb9.png" data-height="3557" data-width="5335" data-original-src="https://storage.googleapis.com/blog-images-backup/1*jZHK_7MHJA7-2FqQeSnzIQ.jpeg"/></noscript></figure>
<p>如果您曾经想在代码中尝试新的、实验性的或非标准的CSS属性，那么您知道浏览器供应商要求您添加前缀以使它们工作，直到它们完全标准化。</p>
<pre>.some-element {
 box-sizing: border-box;
 -webkit-box-sizing: border-box;  // chrome, safari prefix
 -moz-box-sizing: border-box;     // firefox
 -o-box-sizing: border-box;       // old opera versions
 -ms-box-sizing: border-box;      // IE, Microsoft Edge
}</pre>
<p>您必须监视不同的CSS属性，以了解浏览器供应商何时开始支持它们，此时您可以删除相应的前缀。</p>
<p>谢天谢地，现在我们有了<a href="https://github.com/postcss/autoprefixer" target="_blank" rel="noopener noreferrer">自动修复程序</a>。这是一个来自<a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer"> npm </a>的CLI工具，它扫描你的代码，并使用来自<a href="https://caniuse.com" target="_blank" rel="noopener noreferrer">我可以使用吗</a>的值将供应商前缀添加到CSS规则中。Autoprefixer是众多PostCSS插件中的一个，它抓住了PostCSS的精髓。</p>
<h3>到底什么是PostCSS？</h3>
<p>PostCSS是一个用JavaScript插件转换CSS的工具。它通过其广泛的<a href="https://www.postcss.parts/" target="_blank" rel="noopener noreferrer">插件生态系统</a>提供功能来帮助改善你的CSS编写体验。你可以选择你需要的插件，甚至为自己写一个定制的。</p>
<p>一般来说，PostCSS插件允许你像平常一样编写普通的CSS，一旦被调用，它们会扫描代码来执行所需的转换。</p>
<p>但是，请注意，有些PostCSS插件并不转换普通的CSS，而是基于类似Sass的语法进行操作。一个例子是<a href="https://github.com/postcss/postcss-simple-vars" target="_blank" rel="noopener noreferrer"> PostCSS简单变量</a>插件，它允许您实现可以在整个代码中重用的变量(就像在Sass中一样),如下所示。</p>
<pre>$color-brand: darkgrey;
$font-size: 1em;
body {
 color: $color-brand;
 font-size: $font-size;
}</pre>
<p>这个特性在这个时候不是特别相关，因为<em> /CSS variables/ </em>已经作为CSS中的一个固有特性发布了，PostCSS可以将最新的CSSNext语法转换成旧浏览器可以理解的友好CSS。</p>
<figure><a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer"><img decoding="async" src="../Images/e18e0769df17c13e116ad4fd8dfd8166.png" data-height="560" data-width="2400" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*wV7zU6J05BL3bphzMlB2rA.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*wV7zU6J05BL3bphzMlB2rA.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/e18e0769df17c13e116ad4fd8dfd8166.png" data-height="560" data-width="2400" data-original-src="https://storage.googleapis.com/blog-images-backup/1*wV7zU6J05BL3bphzMlB2rA.png"/></noscript></a></figure>
<h3>为什么使用PostCSS？</h3>
<p>让我们通过PostCSS插件的强大功能来看看它的一些用例。</p>
<h4>自动修复</h4>
<p>如前所述，Autoprefixer插件将使用Can I Use中的值向CSS属性添加供应商前缀。这减少了代码中的混乱，提高了可读性。例如，此输入:</p>
<pre>:fullscreen {
}</pre>
<p>给出以下输出:</p>
<pre>:-webkit-:full-screen {}
:-moz-:full-screen {}
:full-screen {}</pre>
<h4>使用浏览器理解的CSSNext特性</h4>
<p>使用<a href="https://github.com/csstools/postcss-preset-env" target="_blank" rel="noopener noreferrer"> PostCSS Preset Env </a>插件，您可以编写未来的CSS语法，插件将通过制定必要的polyfill将其转换为浏览器可以理解的CSS。例如，此输入:</p>
<pre><a title="Twitter profile for @custom" href="https://twitter.com/custom" target="_blank" rel="noopener noreferrer">@custom</a>-media --med (width &lt;= 50rem);</pre>
<pre><a title="Twitter profile for @media" href="https://twitter.com/media" target="_blank" rel="noopener noreferrer">@media</a> (--med) {
  a { 
    &amp;:hover {
      color: color-mod(black alpha(54%));
    }
  }
}</pre>
<p>给出以下输出:</p>
<pre><a title="Twitter profile for @media" href="https://twitter.com/media" target="_blank" rel="noopener noreferrer">@media</a> (max-width: 50rem) {
  a:hover  { 
    color: rgba(0, 0, 0, 0.54);
  }
}</pre>
<h4>避免CSS中的错误</h4>
<p>stylelint插件指出你的CSS代码中的错误。它支持最新的CSS语法。例如，此输入:</p>
<pre>a { 
  color: #d3;
}</pre>
<p>给出以下输出:</p>
<pre>app.css
2:10 Invalid hex color</pre>
<h4>使用本地范围的CSS类名</h4>
<p>使用<a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener noreferrer"> CSS模块</a>插件，你可以编写局部作用于组件的CSS，这意味着无论你的CSS类名有多普通，它们之间都不会有任何冲突。例如，此输入:</p>
<pre>.name {
  color: grey;
}</pre>
<p>给出以下输出:</p>
<pre>.Logo__name__SVK0g {
  color: gray;
}</pre>
<h4>创建令人惊叹的网格</h4>
<p><a href="https://github.com/peterramsing/lost" target="_blank" rel="noopener noreferrer"> LostGrid </a>插件使用<em> calc() </em>根据你定义的分数创建网格，而不需要传递很多选项。例如，此输入:</p>
<pre>div {
  lost-column: 1/3 
}</pre>
<p>给出以下输出:</p>
<pre>div {
  width: calc(99.9% * 1/3 -  
  (30px - 30px * 1/3)); 
}
div:nth-child(1n) {
  float: left; 
  margin-right: 30px; 
  clear: none; 
}
div:last-child {
  margin-right: 0; 
}
div:nth-child(3n) {
  margin-right: 0; 
  float: right; 
}
div:nth-child(3n + 1) {
  clear: both; 
}</pre>
<h3>PostCSS、Sass和Less之间的区别</h3>
<p>postscs可以做和Sass、Less、Stylus等预处理程序一样的工作，但是postscs是模块化的，而且以我的经验来看，速度更快。</p>
<p>PostCSS和CSS预处理程序的主要区别在于你可以选择你需要的特性。Sass和Less为您提供了许多您可能使用也可能不使用的特性，并且您无法扩展这些特性。</p>
<p>如果你想在当前堆栈中保留Sass、Less或Stylus，但仍想让PostCSS执行Sass不能执行的其他功能(例如，自动修复或林挺)，<a href="https://webdesign.tutsplus.com/tutorials/using-postcss-together-with-sass-stylus-or-less--cms-24591" target="_blank" rel="noopener noreferrer">本文</a>详细介绍了如何做。</p>
<p>还有像<a href="https://www.npmjs.com/package/postcss-sass" target="_blank" rel="noopener noreferrer"> PostCSS Sass </a>和<a href="https://github.com/jonathantneal/precss" target="_blank" rel="noopener noreferrer"> PreCSS </a>这样的PostCSS插件，本质上是Sass的完全替代。这意味着你可以用PostCSS编写你自己的预处理器。</p>
<h3>使用Codepen快速PostCSS设置</h3>
<p>首先登录Codepen.io，并执行以下步骤:</p>
<ol>
<li>创建新钢笔。</li>
<li>点击窗口顶部的<strong>设置</strong>，显示设置面板。</li>
</ol>
<figure><img decoding="async" src="../Images/3d7f27d317f352f15f77afb34deea9c7.png" data-height="308" data-width="970" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*v0HUjCr8ooPxCztI3-1Qvw.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*v0HUjCr8ooPxCztI3-1Qvw.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/3d7f27d317f352f15f77afb34deea9c7.png" data-height="308" data-width="970" data-original-src="https://storage.googleapis.com/blog-images-backup/1*v0HUjCr8ooPxCztI3-1Qvw.png"/></noscript></figure>
<p>3.从顶部选项卡中选择<strong> CSS </strong>以显示CSS设置。</p>
<figure><img decoding="async" src="../Images/87396ee053f516a244dbdc358ad183c3.png" data-height="234" data-width="1044" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*Bfve9nrfgCzWw0PD1LUiGw.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*Bfve9nrfgCzWw0PD1LUiGw.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/87396ee053f516a244dbdc358ad183c3.png" data-height="234" data-width="1044" data-original-src="https://storage.googleapis.com/blog-images-backup/1*Bfve9nrfgCzWw0PD1LUiGw.png"/></noscript></figure>
<p>4.选择<strong> CSS处理器</strong>下拉菜单，然后从下拉菜单中选择<strong>邮政CSS </strong>。</p>
<figure><img decoding="async" src="../Images/29c063002033da9d310b9003a034351d.png" data-height="598" data-width="1028" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*AjqFdTO2UeexWMmZL2guyQ.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*AjqFdTO2UeexWMmZL2guyQ.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/29c063002033da9d310b9003a034351d.png" data-height="598" data-width="1028" data-original-src="https://storage.googleapis.com/blog-images-backup/1*AjqFdTO2UeexWMmZL2guyQ.png"/></noscript></figure>
<p>5.点击<strong>需要一个附加组件吗？</strong>显示出来的徽章。将显示一个插件列表，您可以从中搜索并选择所需的插件。让我们<strong>添加</strong>这个<strong> postcss-simple-vars </strong>插件来试验变量。选择<strong>保存&amp;关闭</strong>。</p>
<figure><img decoding="async" src="../Images/1e08516b8104e0f90bd7b3543c102489.png" data-height="668" data-width="1014" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*RitserMyV2SRaqRROuIb-w.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*RitserMyV2SRaqRROuIb-w.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/1e08516b8104e0f90bd7b3543c102489.png" data-height="668" data-width="1014" data-original-src="https://storage.googleapis.com/blog-images-backup/1*RitserMyV2SRaqRROuIb-w.png"/></noscript></figure>
<p>回到CSS窗口，你会注意到插件已经被引用使用。我们现在可以自由访问它的所有功能。</p>
<pre><a title="Twitter profile for @use" href="https://twitter.com/use" target="_blank" rel="noopener noreferrer">@use</a> postcss-simple-vars;</pre>
<p>在CSS窗口中使用变量插入HTML和CSS示例:</p>
<figure><img decoding="async" src="../Images/ee758a48f6d95701eb7bdd896090272e.png" data-height="728" data-width="2268" data-lazy-src="https://storage.googleapis.com/blog-images-backup/1*njYh2LLr36VG_09r1OVGvA.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://storage.googleapis.com/blog-images-backup/1*njYh2LLr36VG_09r1OVGvA.png"/><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/ee758a48f6d95701eb7bdd896090272e.png" data-height="728" data-width="2268" data-original-src="https://storage.googleapis.com/blog-images-backup/1*njYh2LLr36VG_09r1OVGvA.png"/></noscript></figure>
<h4>演示</h4>
<p class="codepen" data-height="265" data-theme-id="0" data-default-tab="css,result" data-user="emmyyusufu" data-slug-hash="ywLLeK" data-pen-title="Really simple PostCSS example">见<a href="https://codepen.io/emmyyusufu/pen/ywLLeK/"> <br/>笔真简单PostCSS例</a>由伊曼纽尔·优素福(<a href="https://codepen.io/emmyyusufu"> @emmyyusufu </a> ) <br/>上<a href="https://codepen.io">笔码</a>。</p>
<p>其他设置方法</p>
<h3>使用<a href="https://github.com/postcss/postcss#gulp" target="_blank" rel="noopener noreferrer"> Gulp </a>、<a href="https://github.com/postcss/postcss#webpack" target="_blank" rel="noopener noreferrer"> Webpack </a>或<a href="https://github.com/postcss/postcss#parcel" target="_blank" rel="noopener noreferrer">package</a>等构建工具有<a href="https://github.com/postcss/postcss#usage" target="_blank" rel="noopener noreferrer">几种方式</a>来设置PostCSS。在这篇文章中，我将重点介绍如何使用<a href="https://github.com/postcss/postcss-cli" target="_blank" rel="noopener noreferrer"> PostCSS CLI </a>。</h3>
<h3>PostCSS CLI</h3>
<p>安装了<strong> npm </strong>后，在命令行上运行以下命令:</p>
<h4>或者用<strong>纱</strong>:</h4>
<p>您还可以使用npm向项目添加插件。例如:</p>
<pre>npm install -g postcss-cli</pre>
<p>在我们的项目中，我们通常可以这样用PostCSS插件来转换CSS:</p>
<pre>yarn global add postcss-cli</pre>
<p>上面的命令将运行Autoprefixer遍历包含在<em> /css/ </em>文件夹中的所有文件，并将转换后的css输出到<em> main.css </em>中。您还可以通过将别名添加到您的<em> package.json </em>文件中的<strong>脚本</strong>来使用别名运行命令:</p>
<pre>yarn add --dev autoprefixer postcss-nested postcss-cli</pre>
<p>创建React应用程序和Vue</p>
<pre>postcss --use autoprefixer -o main.css css/*.css</pre>
<p>值得一提的是，搭建的React和Vue项目如<a href="https://reactjs.org/blog/2018/10/01/create-react-app-v2.html" target="_blank" rel="noopener noreferrer"> Create React App </a>和<a href="https://cli.vuejs.org/guide/css.html#postcss" target="_blank" rel="noopener noreferrer"> VueCLI </a>在内部使用PostCSS。还要注意，内部PostCSS是用几个精选插件设置的；你可以用<a href="https://github.com/facebook/create-react-app/issues/5843#issuecomment-439662008" target="_blank" rel="noopener noreferrer">更多配置</a>添加更多插件。</p>
<pre>{
...
"scripts": {
 "start": "node index.js",
 "postcss": "postcss --use autoprefixer -o main.css css/*.css"
  }
...
}</pre>
<h4>结论</h4>
<p>PostCSS是一个非常有用的工具，已经存在一段时间了。它鼓励你编写更多的普通CSS，并允许你使用或编写自己的强大插件来转换它。学习这个工具，或者至少更加了解它的用途，会在2019年改善你的前端工作流程。</p>
<h3>如果你想更深入地研究PostCSS，我强烈推荐这个<a href="https://webdesign.tutsplus.com/series/postcss-deep-dive--cms-889" target="_blank" rel="noopener noreferrer">教程系列</a>。感谢阅读🙏。</h3>
<p>你的前端是否占用了用户的CPU？</p>
<p>随着web前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端CPU使用、内存使用等感兴趣，</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>.</h2><p>LogRocket 就像是网络和移动应用的DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>现代化您调试web和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">LogRocket</a> is like a DVR for web and mobile apps, recording everything that happens in your web app or site. Instead of guessing why problems happen, you can aggregate and report on key frontend performance metrics, replay user sessions along with application state, log network requests, and automatically surface all errors.</p><p>Modernize how you debug web and mobile apps — <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>