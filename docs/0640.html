<html>
<head>
<title>What’s new in Next.js 9.2 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Next.js 9.2中的新特性- LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/whats-new-in-next-js-9-2/#0001-01-01">https://blog.logrocket.com/whats-new-in-next-js-9-2/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在本文中，我们将分析最新版本的Next.js附带的所有新的闪亮特性。</p>
<h2 id="whatisnextjs">Next.js是什么？</h2>
<p>Next.js 自我标榜为React框架，用于静态页面、渐进式web应用、移动web应用、SEO友好页面，尤其是服务器端渲染。它只需要一行命令就可以实现静态导出，并且附带了一个名为JSX的CSS-in-JS库。它还包括代码分割、通用渲染和热重装等功能。</p>
<p>根据最新的“<a href="https://blog.logrocket.com/state-of-javascript-what-are-the-most-in-demand-frontend-frameworks-in-2020/" target="_blank" rel="noopener noreferrer">JavaScript状态</a>”调查，Next.js社区在过去12个月里大规模增长，留存率从6%飙升到24%<a href="https://2019.stateofjs.com/back-end/nextjs/" target="_blank" rel="noopener noreferrer">。愿意学习Next.js的新人数量也增加了近10%。</a></p>
<p>让我们来详细看看框架最新版本附带的一些最值得注意的新特性:<a href="https://nextjs.org/blog/next-9-2" target="_blank" rel="noopener noreferrer"> Next.js 9.2 </a>。</p>
<h2 id="builtincsssupportforglobalstylesheets">对全局样式表的内置CSS支持</h2>
<p>版本5.0中提供了使用扩展Next.js行为的<code>next-css</code>插件导入CSS的功能。随着时间的推移，下一个团队从使用该框架的公司那里得到了很多关于<code>next-css</code>插件的反馈。</p>
<p>作为回应，该团队决定将该插件作为核心Next产品的一部分。尽管该插件以前在处理导入时受到限制——例如导入的文件决定了整个应用程序的全局样式，而不是局限于组件级别——但下一个团队开发了一个解决方法。要开始在您的应用程序中使用CSS导入，您可以在<code>pages/_app.js</code>中导入CSS文件。</p>
<p>考虑下面的样式表，名为<code>styles.css</code>，位于项目的根中。</p>
<pre>body {
  padding: 20px 20px 60px;
  margin: 0;
}
</pre>
<p>如果不存在，创建一个<code><a href="https://nextjs.org/docs/advanced-features/custom-app" target="_blank" rel="noopener noreferrer">pages/_app.js</a></code>文件。然后，导入<code>styles.css</code>文件。</p>
<pre>import '../styles.css'
// This default export is required in a new `pages/_app.js` file.
export default function MyApp({ Component, pageProps }) {
  return &lt;Component {...pageProps} /&gt;
}
</pre>
<p>由于样式表本质上是全局的，所以必须将它们导入到自定义的<a href="https://nextjs.org/docs/advanced-features/custom-app" target="_blank" rel="noopener noreferrer"> <code>&lt;App&gt;</code> </a>组件中，以避免全局样式的类名和排序冲突。这使得当您在开发环境中编辑它们时，您的样式可以反映在您的应用程序中。</p>
<p>在生产中，所有的样式表将被缩小成一个<code>.css</code>文件，并通过下一个服务的<code>index.html</code>文件中的链接标签加载。这个特性是向后兼容的，如果您已经用另一个库实现了这个特性，这个特性在默认情况下是禁用的，以避免冲突。</p>
<h2 id="builtincssmodulesupportforcomponentlevelstyles">对组件级样式的内置CSS模块支持</h2>
<p>旧的<code>next-css</code>插件的另一个问题是，所有的<code>.css</code>文件要么被处理为全局样式，要么被处理为局部样式，并且没有同时启用这两种样式的选项。在这个新版本中，现在支持CSS模块，因此您可以同时使用全局CSS和CSS模块。</p>
<p>使用CSS模块，您可以通过类名在本地确定CSS的范围，并将其导入到应用程序中的任何位置，以实现范围或组件级样式。例如，考虑一下<code>components/</code>文件夹中的一个可重用的<code>Button</code>组件。</p>
<p>首先，用下面的内容创建<code>components/Button.module.css</code>。</p>
<pre>/*
You do not need to worry about .error {} colliding with any other `.css` or
`.module.css` files!
*/
.error {
  color: white;
  background-color: red;
}
</pre>
<p>然后，创建<code>components/Button.js</code>，导入并使用上面的CSS文件。</p>
<pre>import styles from './Button.module.css'
export function Button() {
  return (
    &lt;button
      type="button"
      // Note how the "error" class is accessed as a property on the imported
      // `styles` object.
      className={styles.error}
    &gt;
      Destroy
    &lt;/button&gt;
  )
}
&gt;</pre>
<p>在这个版本中，CSS模块是选择性加入的，只对扩展名为<code>.module.css</code>的文件启用；仍然支持普通的链接样式表和全局CSS文件。这个特性是向后兼容的，如果您已经用另一个库实现了这个特性，那么这个特性在默认情况下是禁用的，以避免冲突。</p>
<h2 id="improvedcodesplittingstrategy">改进的代码分割策略</h2>
<p>要加载Next.js应用程序，必须加载五个固定的JavaScript包来启动React:主js文件、一个公共JS文件、下一个运行时包、Webpack运行时包和动态导入。代码分割有助于优化加载所有这些文件的过程。</p>
<p>下一个团队最初采用的代码分割策略是针对commons bundle的。这是一个使用率启发式策略，以确保如果一个模块在超过一半的页面中被使用，它将被标记为一个模块；否则，它将被捆绑。虽然该团队发现这种方法是有益的，但随着时间的推移，他们意识到它可以进一步优化流程。</p>
<p>新策略允许您优化多个文件的公共块，包括当涉及许多页面类型时。这是从这个版本开始的默认流程。</p>
<p>新的分块实现利用<a href="https://developers.google.com/web/fundamentals/performance/http2" target="_blank" rel="noopener noreferrer"> HTTP/2 </a>来提供更多更小的块。在新的启发下，无数的组块被创建用于各种目的:</p>
<ul>
<li>每页的最小块</li>
<li>包含React、ReactDOM、React的调度器等的框架块。</li>
<li>超过160kb的任何<code>node_module</code>依赖项的库块(pre-minify/gzip)</li>
<li>所有页面使用的代码的公共块</li>
<li>尽可能多的共享块(由两个或更多页面使用)，优化应用程序的整体大小和初始加载速度</li>
<li>Next.js客户端运行时</li>
<li>Webpack运行时</li>
</ul>
<h2 id="catchalldynamicroutes">包罗万象的动态路线</h2>
<p>在下一个9.0版本中引入了动态路段。目标是在不使用定制服务器的情况下简化Next.js中的动态段。这个特性已经被广泛采用，下一个团队一直在尝试尽可能地优化它。</p>
<p>以前，动态路由并不涵盖所有路由。在新版本中，您现在可以通过使用<code>[...name]</code>语法来使用无所不包的路由。当您拥有由内容源(如CMS)定义的嵌套结构时，这尤其有用。</p>
<p>例如，<code>pages/post/[...slug].js</code>将匹配<code>/post/a</code>、<code>/post/a/b</code>、<code>/post/a/b/c</code>等等。</p>
<p><code>slug</code>在路由器查询对象中作为单个路径部分的数组提供。所以对于路径<code>post/foo/bar</code>，查询对象将是<code>{ slug: ['foo', 'bar'] }</code></p>
<h2 id="howtogetstartedusingnextjs92">如何开始使用Next.js 9.2</h2>
<p>通过升级当前版本，您可以立即开始使用新版本。</p>
<pre>npm i <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="99f7fce1edd9f5f8edfceaed">[email protected]</a> <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e29087838196a28e8396879196">[email protected]</a> <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e19384808295cc858e8ca18d8095849295">[email protected]</a>
</pre>
<h2 id="conclusion">结论</h2>
<p>Next社区已经显示出令人印象深刻的增长数字，其近900名贡献者、<a href="https://github.com/zeit/next.js" target="_blank" rel="noopener noreferrer"> 44，000多名GitHub明星</a>、大量<a href="https://github.com/zeit/next.js/tree/canary/examples" target="_blank" rel="noopener noreferrer">示例目录</a>和13，800名成员的<a href="https://spectrum.chat/next-js?tab=posts" target="_blank" rel="noopener noreferrer">频谱论坛</a>就是证明。随着团队继续专注于改善开发人员体验和优化下一个产品，这些数字将稳步增长。</p>
<p>Next 9.2你最喜欢的功能是什么？</p><div class="code-block code-block-30">
<div class="blog-plug inline-plug next-plug"><h2><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank"> LogRocket </a>:全面了解生产Next.js应用</h2><p>调试下一个应用程序可能会很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪状态、自动显示JavaScript错误、跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-lazy-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/></noscript></a><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p>LogRocket 就像是网络和移动应用的DVR，记录下你的Next.js应用上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用程序的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p><p>让您调试Next.js应用的方式现代化— <a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>