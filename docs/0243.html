<html>
<head>
<title>Automatically generate React components with Plop.js - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Plop.js - LogRocket博客自动生成React组件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/automatically-generate-react-components-plop-js/#0001-01-01">https://blog.logrocket.com/automatically-generate-react-components-plop-js/#0001-01-01</a></blockquote><div><article class="article-post">
<p><strong> <em>编者按</em> </strong>:本帖2021年10月28日。它可能仍然包含过时的信息。</p>
<p>您是否经常发现自己复制并粘贴旧组件作为新组件的模板？我知道我有。</p>
<p>以前和Angular一起工作过，我对没有与<a href="https://angular.io/cli"> Angular CLI的generate API </a>等价的React感到沮丧。对于那些不熟悉它的人来说，Angular CLI提供了从命令行生成组件、路由、服务和管道的工具。</p>
<p>然后，我开始思考，为什么没有React等价物？我突然想到，React生态系统不像Angular生态系统那样标准化。</p>
<p>一款新的React应用并没有搭载太多功能；目录结构和依赖关系很大程度上取决于开发人员。这可能很好，但是React应用程序之间缺乏一致性使得React组件生成器之类的工具更难处理。</p>
<p>经过一番调查，我偶然发现了一个名为Plop.js的库。</p>
<h2>什么是扑通. js？</h2>
<p>Plop.js库可以与React一起使用，并允许您定义自己的参数化代码模板，这些模板可以注入到您的源代码中，以生成样板代码，否则您将不得不自己编写。</p>
<p>Plop的优点在于它提供了一个相当高级的API，同时还非常具有可定制性。我们不仅仅局限于组件；我们可以生成容器、服务、挂钩、缩减器、动作、实用程序、文档、自述文件等等。</p>
<h2>Plop.js项目结构</h2>
<p>在我们能够自动生成样板代码之前，我们必须知道我们想要生成的样板。</p>
<p>使用下面的React应用程序结构，让我们用这个结构来构建我们的生成器。</p>
<p><img data-attachment-id="65027" data-permalink="https://blog.logrocket.com/automatically-generate-react-components-plop-js/plop-js-project-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure.png" data-orig-size="730,477" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Plop.js project structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure.png" decoding="async" class="aligncenter size-full wp-image-65027 jetpack-lazy-image" src="../Images/2889af1ed9e5b98a103c9a65536cb9d3.png" alt="Plop.js Project Structure In Code" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure-300x196.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65027" data-permalink="https://blog.logrocket.com/automatically-generate-react-components-plop-js/plop-js-project-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure.png" data-orig-size="730,477" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Plop.js project structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-65027" src="../Images/2889af1ed9e5b98a103c9a65536cb9d3.png" alt="Plop.js Project Structure In Code" srcset="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure-300x196.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/04/plop-js-project-structure.png"/></noscript>
<p>关于此设置，需要注意以下几点:</p>

<h2>构建CLI界面</h2>
<p>现在我们知道了我们想要如何构建代码，我们可以将注意力集中在我们想要构建的CLI界面上。出于本文的目的，我们将生成组件、页面、挂钩和服务。</p>
<p>为了简单起见，我们必须为每个变量提供的唯一参数是一个<code>name</code>:</p>
<pre># Generate a single-use component
npm run generate page &lt;name&gt;
# Generate page called Home
npm run generate page Home

# Generate a reusable component
npm run generate component &lt;name&gt;
# Generate a component called DogCard
npm run generate component DogCard

# Generate a custom hook
npm run generate hook &lt;name&gt;
# Generate a hook called useAsync
npm run generate hook useAsync

# Generate a service
npm run generate service &lt;name&gt;
# Generate a service called petApi
npm run generate service petApi
</pre>
<h2>构建组件生成器</h2>
<h3>配置Plop.js</h3>
<p>让我们创建一个新的React应用程序并配置Plop.js:</p>
<pre># Create new react app
npx create-react-app react-starter-cli
# Change working directory to root of app
cd react-starter-cli
# Install plop as a dev-dependency
npm install --save-dev plop
# Make a directory for our templates
mkdir plop-templates
# Create a plopfile to hold our cli logic
touch plopfile.js
</pre>
<p>一旦我们运行了这些命令，我们必须修改<code>plopfile.js</code>以包含以下内容:</p>
<pre>module.exports = plop =&gt; {
  plop.setGenerator('component', {
    description: 'Create a component',
    // User input prompts provided as arguments to the template
    prompts: [
      {
        // Raw text input
        type: 'input',
        // Variable name for this input
        name: 'name',
        // Prompt to display on command line
        message: 'What is your component name?'
      },
    ],
    actions: [
      {
        // Add a new file
        type: 'add',
        // Path for the new file
        path: 'src/components/{{pascalCase name}}.js',
        // Handlebars template used to generate content of new file
        templateFile: 'plop-templates/Component.js.hbs',
      },
    ],
  });
};
</pre>
<p>我们还需要一个组件模板来指定我们生成的组件的内容。我们可以在<code>plop-templates/Component.js.hbs</code>下创建它(<code>.hbs</code>扩展表示这是一个<a href="https://handlebarsjs.com/"> Handlebars.js </a>模板)。</p>
<pre>import React from 'react';

const {{pascalCase name}} = props =&gt; {
  return (
    &lt;div&gt;
      {{pascalCase name}}
    &lt;/div&gt;
  );
};

export default {{pascalCase name}};
</pre>
<p>最后，让我们添加一个脚本到我们的<code>package.json</code>中，为扑通命令创建一个别名:</p>
<pre>{
  /* ... */
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject",
    "generate": "plop"
  },
  /* ... */
}
</pre>
<p>这是这种配置的结果:</p>
<p><img data-attachment-id="65029" data-permalink="https://blog.logrocket.com/automatically-generate-react-components-plop-js/plop-js-configuration-result/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Plop-js-configuration-result.gif" data-orig-size="730,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Plop.js Configuration Result" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Plop-js-configuration-result-300x188.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Plop-js-configuration-result.gif" decoding="async" class="aligncenter size-full wp-image-65029 jetpack-lazy-image" src="../Images/61dbf7f7ae2b6ba60d04a36dac419016.png" alt="Plop.js Configuration Result In Code" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/04/Plop-js-configuration-result.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/04/Plop-js-configuration-result.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65029" data-permalink="https://blog.logrocket.com/automatically-generate-react-components-plop-js/plop-js-configuration-result/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Plop-js-configuration-result.gif" data-orig-size="730,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Plop.js Configuration Result" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Plop-js-configuration-result-300x188.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Plop-js-configuration-result.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-65029" src="../Images/61dbf7f7ae2b6ba60d04a36dac419016.png" alt="Plop.js Configuration Result In Code" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/04/Plop-js-configuration-result.gif"/></noscript>
<p>您可以看到，当我们试图在命令行上生成一个组件时，我们的提示出现了，要求用户输入组件名。然后，它使用该值来填充我们的车把模板中的<code>name</code>参数。</p>
<p><code>pascalCase</code>修饰符确保<code>name</code>在<a href="http://wiki.c2.com/?PascalCase"> PascalCase中格式化，这是通过连接大写单词</a>来创建单词。这里是可用模板助手的<a href="https://github.com/amwmedia/plop#built-in-helpers">完整列表</a>。</p>
<h3>添加Plop.js操作</h3>
<p>我们正朝着正确的方向前进，但这仍然很无力。让我们增强我们的扑通文件，以提供一些真正酷的功能和行动:</p>
<pre>module.exports = plop =&gt; {
  plop.setGenerator('component', {
    description: 'Create a reusable component',
    prompts: [
      {
        type: 'input',
        name: 'name',
        message: 'What is your component name?'
      },
    ],
    actions: [
      {
        type: 'add',
        // Plop will create directories for us if they do not exist
        // so it's okay to add files in nested locations.
        path: 'src/components/{{pascalCase name}}/{{pascalCase name}}.js',
        templateFile:
          'plop-templates/Component/Component.js.hbs',
      },
      {
        type: 'add',
        path: 'src/components/{{pascalCase name}}/{{pascalCase name}}.test.js',
        templateFile:
          'plop-templates/Component/Component.test.js.hbs',
      },
      {
        type: 'add',
        path:
          'src/components/{{pascalCase name}}/{{pascalCase name}}.module.css',
        templateFile:
          'plop-templates/Component/Component.module.css.hbs',
      },
      {
        type: 'add',
        path: 'src/components/{{pascalCase name}}/index.js',
        templateFile: 'plop-templates/Component/index.js.hbs',
      },
      {
        // Adds an index.js file if it does not already exist
        type: 'add',
        path: 'src/components/index.js',
        templateFile: 'plop-templates/injectable-index.js.hbs',
        // If index.js already exists in this location, skip this action
        skipIfExists: true,
      },
      {
        // Action type 'append' injects a template into an existing file
        type: 'append',
        path: 'src/components/index.js',
        // Pattern tells plop where in the file to inject the template
        pattern: `/* PLOP_INJECT_IMPORT */`,
        template: `import {{pascalCase name}} from './{{pascalCase name}}';`,
      },
      {
        type: 'append',
        path: 'src/components/index.js',
        pattern: `/* PLOP_INJECT_EXPORT */`,
        template: `t{{pascalCase name}},`,
      },
    ],
  })
}
</pre>
<p>因为我们不希望我们生成的组件仅仅被表示为单个文件，所以我们将它们表示为打包了测试、样式等等的目录。</p>
<p>我们还添加了为每个新组件创建新目录的操作，并指示Plop不仅将我们的组件文件添加到目录中，还将测试、样式和索引的文件作为组件目录的接口。</p>
<p>此外，我们还添加了几个动作来添加到现有文件<code>components/index.js</code>中。该文件将所有组件打包到一个简洁的小模块中，因此我们可以使用以下命令将它们导入到其他地方:</p>
<pre>import { Foo, Bar } from './components'.
</pre>
<p>使用<code>type: 'append'</code>的扑通动作在文件中搜索模式，并在<code>pattern</code>匹配位置后注入渲染模板。</p>
<p>出于这个原因，我们必须确保在<code>components/index.js</code>处存在一个文件，然后我们可以在文件内的扑通注入挂钩位置附加渲染模板。</p>
<h3>更新Plop.js模板</h3>
<p>让我们看看更新后的模板:</p>
<pre>/* PLOP_INJECT_IMPORT */

export {
  /* PLOP_INJECT_EXPORT */
}
</pre>
<p>在上面的模板中，我们看到了前面提到的扑通钩。请注意，这些钩子完全是任意的，我们只需要文件中的一些东西来匹配我们的扑通动作中定义的模式。</p>
<p>模板的其余部分非常简单，因为它们没有引入任何新概念:</p>
<pre>import React from 'react';
import PropTypes from 'prop-types';
import styles from './{{pascalCase name}}.module.css';

const {{pascalCase name}} = props =&gt; {
  return (
    &lt;div className={styles.root}&gt;
    &lt;/div&gt;
  );
};

{{pascalCase name}}.defaultProps = {

};

{{pascalCase name}}.propTypes = {

};

export default {{pascalCase name}};&lt;/pre&gt;
&lt;pre&gt;.root {

}
import React from 'react';
import {{pascalCase name}} from './{{pascalCase name}}';

describe('{{pascalCase name}}', () =&gt; {
   it('renders without error', () =&gt; {

   });
});
import {{pascalCase name}} from './{{pascalCase name}}';

export default {{pascalCase name}};
</pre>
<p>尽管在这个例子中这不是问题，但是要注意模板内容和手柄之间的语法可能会冲突。</p>
<p>例如，如果有一个包含<code>&lt;div style={{ height: 100 }}/&gt;</code>的模板，Handlebars会错误地将花括号解释为表达式。如果发生这种情况，您必须按如下方式对大括号进行转义:</p>
<pre>&lt;div style={{ height: 100 }}/&gt;
</pre>
<p>随着我们的更新扑通文件，我们的发电机看起来相当光滑。</p>
<p><img data-attachment-id="65031" data-permalink="https://blog.logrocket.com/automatically-generate-react-components-plop-js/component-generator-code/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Component-generator-code.gif" data-orig-size="730,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Component generator code" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Component-generator-code-300x188.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Component-generator-code.gif" decoding="async" class="aligncenter size-full wp-image-65031 jetpack-lazy-image" src="../Images/46ebdfc7eca940d9caff229b5b5ec243.png" alt="Component Generator Running Code" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/04/Component-generator-code.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/04/Component-generator-code.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65031" data-permalink="https://blog.logrocket.com/automatically-generate-react-components-plop-js/component-generator-code/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Component-generator-code.gif" data-orig-size="730,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Component generator code" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Component-generator-code-300x188.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Component-generator-code.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-65031" src="../Images/46ebdfc7eca940d9caff229b5b5ec243.png" alt="Component Generator Running Code" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/04/Component-generator-code.gif"/></noscript>
<h2>为页面、挂钩和服务构建生成器</h2>
<p>既然我们已经构建了组件生成器，我们也可以为页面、挂钩和服务构建生成器。构建这些其他生成器并没有引入任何新概念，所以我将直接展示我们最终的扑通文件:</p>
<pre>module.exports = plop =&gt; {
  plop.setGenerator('component', {
    description: 'Create a reusable component',
    prompts: [
      {
        type: 'input',
        name: 'name',
        message: 'What is your component name?',
      },
    ],
    actions: [
      {
        type: 'add',
        path: 'src/components/{{pascalCase name}}/{{pascalCase name}}.js',
        templateFile:
          'plop-templates/Component/Component.js.hbs',
      },
      {
        type: 'add',
        path: 'src/components/{{pascalCase name}}/{{pascalCase name}}.test.js',
        templateFile:
          'plop-templates/Component/Component.test.js.hbs',
      },
      {
        type: 'add',
        path:
          'src/components/{{pascalCase name}}/{{pascalCase name}}.module.css',
        templateFile:
          'plop-templates/Component/Component.module.css.hbs',
      },
      {
        type: 'add',
        path: 'src/components/{{pascalCase name}}/index.js',
        templateFile: 'plop-templates/Component/index.js.hbs',
      },
      {
        type: 'add',
        path: 'src/components/index.js',
        templateFile: 'plop-templates/injectable-index.js.hbs',
        skipIfExists: true,
      },
      {
        type: 'append',
        path: 'src/components/index.js',
        pattern: `/* PLOP_INJECT_IMPORT */`,
        template: `import {{pascalCase name}} from './{{pascalCase name}}';`,
      },
      {
        type: 'append',
        path: 'src/components/index.js',
        pattern: `/* PLOP_INJECT_EXPORT */`,
        template: `t{{pascalCase name}},`,
      },
    ],
  })

  plop.setGenerator('page', {
    description: 'Create a page',
    prompts: [
      {
        type: 'input',
        name: 'name',
        message: 'What is your page name?',
      },
    ],
    actions: [
      {
        type: 'add',
        path: 'src/pages/{{pascalCase name}}/{{pascalCase name}}.js',
        templateFile:
          'plop-templates/Page/Page.js.hbs',
      },
      {
        type: 'add',
        path: 'src/pages/{{pascalCase name}}/{{pascalCase name}}.test.js',
        templateFile:
          'plop-templates/Page/Page.test.js.hbs',
      },
      {
        type: 'add',
        path:
          'src/pages/{{pascalCase name}}/{{pascalCase name}}.module.css',
        templateFile:
          'plop-templates/Page/Page.module.css.hbs',
      },
      {
        type: 'add',
        path: 'src/pages/{{pascalCase name}}/index.js',
        templateFile: 'plop-templates/Page/index.js.hbs',
      },
      {
        type: 'add',
        path: 'src/pages/index.js',
        templateFile: 'plop-templates/injectable-index.js.hbs',
        skipIfExists: true,
      },
      {
        type: 'append',
        path: 'src/pages/index.js',
        pattern: `/* PLOP_INJECT_IMPORT */`,
        template: `import {{pascalCase name}} from './{{pascalCase name}}';`,
      },
      {
        type: 'append',
        path: 'src/pages/index.js',
        pattern: `/* PLOP_INJECT_EXPORT */`,
        template: `t{{pascalCase name}},`,
      },
    ],
  })

  plop.setGenerator('service', {
    description: 'Create service',
    prompts: [
      {
        type: 'input',
        name: 'name',
        message: 'What is your service name?',
      },
    ],
    actions: [
      {
        type: 'add',
        path: 'src/services/{{camelCase name}}.js',
        templateFile: 'plop-templates/service.js.hbs',
      },
      {
        type: 'add',
        path: 'src/services/index.js',
        templateFile: 'plop-templates/injectable-index.js.hbs',
        skipIfExists: true,
      },
      {
        type: 'append',
        path: 'src/services/index.js',
        pattern: `/* PLOP_INJECT_IMPORT */`,
        template: `import {{camelCase name}} from './{{camelCase name}}';`,
      },
      {
        type: 'append',
        path: 'src/services/index.js',
        pattern: `/* PLOP_INJECT_EXPORT */`,
        template: `t{{camelCase name}},`,
      }
    ],
  })

  plop.setGenerator('hook', {
    description: 'Create a custom react hook',
    prompts: [
      {
        type: 'input',
        name: 'name',
        message: 'What is your hook name?',
      },
    ],
    actions: [
      {
        type: 'add',
        path: 'src/hooks/{{camelCase name}}.js',
        templateFile: 'plop-templates/hook.js.hbs',
      },
      {
        type: 'add',
        path: 'src/hooks/index.js',
        templateFile: 'plop-templates/injectable-index.js.hbs',
        skipIfExists: true,
      },
      {
        type: 'append',
        path: 'src/hooks/index.js',
        pattern: `/* PLOP_INJECT_IMPORT */`,
        template: `import {{camelCase name}} from './{{camelCase name}}';`,
      },
      {
        type: 'append',
        path: 'src/hooks/index.js',
        pattern: `/* PLOP_INJECT_EXPORT */`,
        template: `t{{camelCase name}},`,
      }
    ],
  })
}
</pre>
<p>这就是了。这个扑通文件让我们生成组件、页面、钩子和服务。上面的代码引用了很多模板文件；我认为它们太多了，无法一一展示，但是您可以在<a href="https://github.com/malerba118/react-starter-cli"> react-starter-cli资源库</a>中查看它们。</p>
<p>这是最后一个应用程序:</p>
<p><img data-attachment-id="65034" data-permalink="https://blog.logrocket.com/automatically-generate-react-components-plop-js/final-plop-js-component-generator/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Final-plop-js-component-generator.gif" data-orig-size="730,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final Plop.js component generator" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Final-plop-js-component-generator-300x188.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Final-plop-js-component-generator.gif" decoding="async" class="aligncenter size-full wp-image-65034 jetpack-lazy-image" src="../Images/3d05433750a92d922af04b2b81c23412.png" alt="Final Plop.js Component Generator Running Code" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/04/Final-plop-js-component-generator.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/04/Final-plop-js-component-generator.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65034" data-permalink="https://blog.logrocket.com/automatically-generate-react-components-plop-js/final-plop-js-component-generator/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Final-plop-js-component-generator.gif" data-orig-size="730,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final Plop.js component generator" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Final-plop-js-component-generator-300x188.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/04/Final-plop-js-component-generator.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-65034" src="../Images/3d05433750a92d922af04b2b81c23412.png" alt="Final Plop.js Component Generator Running Code" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/04/Final-plop-js-component-generator.gif"/></noscript>
<h2>结论</h2>
<p>这就是如何构建一个自动生成React组件的Plop.js应用程序。</p>
<p>然而，有了这个高度个性化的React CLI，接下来会发生什么呢？以下是一些扩展这种扑通配置的方法:</p>
<ul>
<li>添加一个提示来指定组件应该是类组件还是功能组件</li>
<li>添加一个提示，动态输入应该创建组件的目录</li>
<li>验证用户输入(例如，最小长度要求)</li>
<li>通过提示填充<code>propTypes</code>和/或<code>defaultProps</code></li>
<li>为动作类型、动作和缩减器添加生成器</li>
<li>与其他框架一起使用plop，而不仅仅是React</li>
</ul>
<p>希望这对您有所帮助，祝您编码愉快！</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</h2><p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

 <p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>