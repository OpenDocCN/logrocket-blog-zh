<html>
<head>
<title>How to create a React admin panel - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何创建React管理面板- LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/create-react-admin-panel/#0001-01-01">https://blog.logrocket.com/create-react-admin-panel/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:本帖最后更新于2021年8月12日。它可能仍然包含过时的信息。</em></p>
<p>许多web应用程序已经从仅仅显示内容的静态网站发展到用户访问内容并与之交互的动态网页。这些内容通常由发送和接收数据的API提供支持。</p>
<p>通常，管理页面会对这些数据进行排序和处理，通常是通过构建一个接口，并通过向API发送请求来连接每个端点。在引入<code>react-admin</code>之前，这是一个繁琐的过程。</p>
<p>在这篇博文中，我们将了解<code>react-admin</code>如何为React应用搭建管理界面。</p>
<h2>什么是<code>react-admin</code>？</h2>
<p><code>react-admin</code>是一个通过消费API来构建管理界面的框架，包括RESET、GraphQL或custom。我们也不需要担心样式格式，因为<code>react-admin</code>是以<a href="https://blog.logrocket.com/using-material-ui-in-react-native/"> Material-UI为主题的，这是一个用来设计应用程序界面</a>的React库。</p>
<h2>开始使用<code>react-admin</code></h2>
<p>让我们首先创建一个<code>new-react-admin</code>文件夹，并将<code>package.json</code>、<code>concurrently</code>和<code>json-server</code>安装在一个新的<code>server</code>文件夹中:</p>
<pre># install package.json, concurrently &amp; json-server

npm init -y
npm install json-server
npm install concurrently
</pre>
<p>我们将为它创建一个npm脚本，而不是全局安装<code>json-server</code>。打开<code>package.json</code>文件，替换<code>scripts</code>对象的默认值:</p>
<pre>// /new-react-admin/server/package.json
# - "test": "echo \"Error: no test specified \" &amp;&amp; exit 1"

+ "server": "json-server --watch db.json --port 5000",
+ "client": "npm start --prefix admin-demo",
+ "dev": "concurrently \"npm run server\" \"npm run client\""

# "admin-demo" will be the name of our react app
</pre>
<p>在上面的代码块中，我们希望运行<code>json-server</code>并观察一个名为<code>db.json</code>的文件，该文件保存了我们将使用的伪REST API生成的数据。默认情况下，它运行在端口3000上，这阻止了我们的React应用程序运行。相反，我们将它设置为端口5000。</p>
<p><a href="https://www.npmjs.com/package/concurrently"> Concurrently是一个框架</a>，使API和React app能够同时运行，而不是分别在不同的终端运行。如上所示，<code>client</code>脚本被分配来启动React应用程序，<code>dev</code>脚本同时运行<code>server</code>和<code>client</code>脚本。</p>
<p>现在，我们可以在一个名为<code>admin-demo</code>的新文件夹中创建一个React项目，并在其目录中安装<code>react-admin</code>:</p>
<pre>npx create-react-app admin-demo
cd admin-demo
# install react-admin
npm install react-admin 
</pre>
<p>然后，在React app的<code>package.json</code>文件中添加一个<code>proxy</code>；将<code>proxy</code>设置为<code>server</code>脚本url:</p>
<pre>// /new-react-admin/admin-demo/package.json
"proxy": "http://localhost:5000" 
</pre>
<p>接下来，我们需要用一些数据填充<code>db.json</code>文件。以下是我们将使用的数据示例:</p>
<pre>// /new-react-admin/server/db.json

{
"users": [
    {
      "id": "1",
      "name": "Klaus Huntelaar",
      "username": "Kanaar",
      "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0c6d7c7c606e637f7f4c6b616d6560226f6361">[email protected]</a>",
      "phone": 37802223,
      "company": "Hunters Mobile Co."
    },
    {
      "id": "2",
      "name": "Peggy Sonaya",
      "username": "Peggaya",
      "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="cdbea2a3acb4acbda8aa8daaa0aca4a1e3aea2a0">[email protected]</a>",
      "phone": 4402673,
      "company": "Peggy's Drycleaning"
    },
    {
      "id": "3",
      "name": "Joseph Maguire",
      "username": "Joemag",
      "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="387257525709010d0e785f55595154165b5755">[email protected]</a>",
      "phone": 224423045,
      "company": "Jojo's Pot"
    },
    {
      "id": "4",
      "name": "Jon Hanus",
      "username": "Hanuson",
      "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="cb81a4aea3aaa5beb8fafa8baca6aaa2a7e5a8a4a6">[email protected]</a>",
      "phone": 89354033,
      "company": "Joe's Funeral Home"
    },
    {
      "id": "5",
      "name": "Ron Burgundy",
      "username": "Colorburgundy",
      "email": "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e5b78a8b82908b819ca58288848c89cb868a88">[email protected]</a>",
      "phone": 23455,
      "company": "Color Burgundy"
    }
]
}
</pre>
<h2>使用guessers修改和过滤数据</h2>
<p>对于一个管理页面来说，拥有<a href="https://blog.logrocket.com/crud-react-graphql-examples/"> CRUD功能</a>是非常必要的。我们将使用数据提供者来展示<code>react-admin</code>是如何做到这一点的。<a href="https://www.npmjs.com/package/ra-data-simple-rest"> Simple </a> <a href="https://www.npmjs.com/package/ra-data-simple-rest"> REST </a>是一个数据提供者，它使用简单的GET参数来适应REST APIs，这些参数用于过滤和排序。</p>
<p>我们首先需要在我们的<code>react-admin</code>应用程序中安装简单的REST:</p>
<pre>// /new-react-admin/admin-demo
npm install ra-data-simple-rest
</pre>
<p>我们试试用<code>db.json</code>取数据。为此，<code>react-admin</code>使用它的根组件<code>&lt;Admin&gt;</code>来提供API和应用程序之间的数据交换。用以下内容替换<code>src/App.js</code>中的默认语法:</p>
<pre>import React from 'react'
import { Admin} from 'react-admin'
import restProvider from 'ra-data-simple-rest'

const dataProvider = restProvider('http://localhost:3000');

function App() {
  return (
      &lt;Admin dataProvider={dataProvider} /&gt;
    );
  }
export default App;
</pre>
<p>现在，将目录从React应用程序更改到主文件夹<code>cd ..</code>，并在此时运行<code>npm</code> <code>dev</code>，应该会在浏览器中呈现一个带有确认消息的应用程序:</p>
<p><img data-attachment-id="64694" data-permalink="https://blog.logrocket.com/create-react-admin-panel/react-admin-default-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page.png" data-orig-size="730,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React-admin default page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page-300x188.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page.png" decoding="async" class="aligncenter size-full wp-image-64694 jetpack-lazy-image" src="../Images/1ec86cf23ad874992ad5b9f6321abd1d.png" alt="React-admin default page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page-300x188.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64694" data-permalink="https://blog.logrocket.com/create-react-admin-panel/react-admin-default-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page.png" data-orig-size="730,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React-admin default page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page-300x188.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-64694" src="../Images/1ec86cf23ad874992ad5b9f6321abd1d.png" alt="React-admin default page" srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page-300x188.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/React-admin-default-page.png"/></noscript>
<p>为了显示来自<code>db.json</code>文件的数据，API服务器需要有一个内容范围值，以防止它抛出错误。在中间件的帮助下，我们将创建一个名为<code>range.js</code>的文件，该文件具有设置要显示的内容数量的功能:</p>
<pre>// /new-react-admin/server/range.js
module.exports = (req, res, next) =&gt; {
    res.header('Content-Range', 'posts 0-20/20')
    next()
}
</pre>
<p>为了运行中间件功能，我们必须将<code>--middlewares ./range.js</code>添加到<code>package.json</code>文件的<code>server</code>脚本中。</p>
<h3>如何在React中使用猜测</h3>
<p>虽然仍在开发中，<code>react-admin</code>通过“猜测者”创建管理界面猜测者从API接收数据，确定数据的种类，并决定数据应该以何种格式显示。</p>
<p>让我们尝试通过应用guessers来显示用户列表:</p>
<pre>import React from 'react'
import { Admin, Resource,ListGuesser } from 'react-admin'
import restProvider from 'ra-data-simple-rest'

const dataProvider = restProvider('http://localhost:3000');

function App() {
    return (
      &lt;Admin dataProvider={dataProvider}&gt;
        &lt;Resource name="users" list={ListGuesser} /&gt;
      &lt;/Admin&gt;
    );
  }
export default App;
</pre>
<p>在上面的代码块中，<code>&lt;resource&gt;</code>元素负责将<code>name</code>属性映射到API中的一个端点。这里<code>&lt;resource&gt;</code>将<code>users</code>值附加到我们的API，并从API获取用户数据。</p>
<h3>使用<code>&lt;ListGuesser&gt;</code>组件</h3>
<p><code>list</code>属性使用<code>&lt;ListGuesser&gt;</code>组件将这些数据显示为用户列表。</p>
<p><img data-attachment-id="64696" data-permalink="https://blog.logrocket.com/create-react-admin-panel/user-data-displayed-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list.jpeg" data-orig-size="730,371" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="User data displayed list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list-300x152.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list.jpeg" decoding="async" class="aligncenter size-full wp-image-64696 jetpack-lazy-image" src="../Images/b699ba79d68606d19e59fa71b756b592.png" alt="User Data Displayed In List" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list-300x152.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64696" data-permalink="https://blog.logrocket.com/create-react-admin-panel/user-data-displayed-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list.jpeg" data-orig-size="730,371" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="User data displayed list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list-300x152.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-64696" src="../Images/b699ba79d68606d19e59fa71b756b592.png" alt="User Data Displayed In List" srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list-300x152.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/User-data-displayed-list.jpeg"/></noscript>
<p><code>&lt;ListGuesser&gt;</code>不能用于生产，因此必须用定制组件替换。guessers的一个很棒的特性是在浏览器的控制台上显示从API中检索到的数据的源代码。</p>
<p>让我们来看看<code>&lt;ListGuesser&gt;</code>显示了什么:</p>
<p><img data-attachment-id="64698" data-permalink="https://blog.logrocket.com/create-react-admin-panel/listguesser-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list.png" data-orig-size="730,407" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ListGuesser list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list.png" decoding="async" class="aligncenter size-full wp-image-64698 jetpack-lazy-image" src="../Images/c69ba4ea04b70ac07a622055fea7d2fd.png" alt="ListGuesser Showing Users In A List" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list-300x167.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64698" data-permalink="https://blog.logrocket.com/create-react-admin-panel/listguesser-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list.png" data-orig-size="730,407" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ListGuesser list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-64698" src="../Images/c69ba4ea04b70ac07a622055fea7d2fd.png" alt="ListGuesser Showing Users In A List" srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list-300x167.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/ListGuesser-list.png"/></noscript>
<p>这向我们展示了应该如何创建用户列表。让我们在应用程序中复制这些数据。在项目的<code>src</code>文件夹中，创建一个文件，并将其命名为<code>User.js</code>:</p>
<pre>/src/components/User.js
import React from 'react';
import { List, Datagrid, TextField, EmailField, EditButton, DeleteButton } from 'react-admin';

export const UserList = (props) =&gt; {
    return (
        &lt;List {...props}&gt;
            &lt;Datagrid&gt;
            &lt;TextField source="id" /&gt;
                &lt;TextField source="name" /&gt;
                &lt;TextField source="username" /&gt;
                &lt;EmailField source="email" /&gt;
                &lt;TextField source="phone" /&gt;
                &lt;TextField source="company" label="Company" /&gt;
                &lt;EditButton basePath="/users" /&gt;
                &lt;DeleteButton basePath="/users" /&gt;
            &lt;/Datagrid&gt;
        &lt;/List&gt;
    )
}
</pre>
<p>在上面的代码块中，做了一些修改。首先，我们使用了<code>&lt;EmailField&gt;</code>元素使电子邮件栏上的链接可点击。然后，我们在company列中添加了一个<code>label</code>属性，使它们的标题更加美观。</p>
<p>让我们导航到<code>App.js</code>，用<code>UserList</code>替换<code>ListGuesser</code>:</p>
<pre>/src/App.js
import React, { Component } from "react";
import { Admin, Resource } from "react-admin";
import { UserList } from './components/User';
import restProvider from 'ra-data-simple-rest';

const dataProvider = restProvider('http://localhost:3000')
function App() {
  return (
      &lt;Admin dataProvider={dataProvider}&gt;
        &lt;Resource name="users" list={UserList} /&gt;
      &lt;/Admin&gt;
    );
  }
export default App;
</pre>
<h3>使用<code>EditGuesser</code>组件</h3>
<p>管理页面应该能够编辑，删除和创建数据。<code>react-admin</code>也是通过使用guessers来实现的。在<code>UserList</code>中添加这一行新代码:</p>
<pre>// /src/components/User.js  
import {EditButton, DeleteButton} from 'react-admin'              
&lt;EditButton basePath="/users" /&gt;
&lt;DeleteButton basePath="/users" /&gt;
</pre>
<p>编辑管理页面的数据。在<code>App.js</code>中，从<code>react-admin</code>导入<code>EditGuesser</code>:</p>
<pre>src/App.js
import React from 'react';
import { Admin, Resource, EditGuesser } from "react-admin";
import { UserList } from './components/User';
import restProvider from 'ra-data-simple-rest';

const dataProvider = restProvider('http://localhost:3000')
function App() {
  return (
      &lt;Admin dataProvider={dataProvider}&gt;
        &lt;Resource
          name="users"
          list={UserList}
          edit={EditGuesser}
        /&gt;
      &lt;/Admin&gt;
    );
  }
}
</pre>
<p>现在，我们可以在管理界面上编辑用户详细信息:</p>
<p><span class="embed-youtube"> <iframe loading="lazy" class="youtube-player" src="https://www.youtube.com/embed/X-VNSgeLh7M?version=3&amp;rel=1&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;fs=1&amp;hl=en-US&amp;autohide=2&amp;wmode=transparent" allowfullscreen="true" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation">视频</iframe> </span></p>
<p> </p>
<p>需要注意的一件重要事情是，我们用于伪API的数据提供者simple REST具有编辑和创建功能。这里发生的情况是，<code>react-admin</code>显示了在向<code>db.json</code>文件中的数据发送更新查询时所做的更改。</p>
<p>与列出用户类似，查看我们的控制台可以让我们知道应该输入什么作为标记。下面是我们使用<code>EditGuesser</code>后的结果:</p>
<p><img data-attachment-id="64700" data-permalink="https://blog.logrocket.com/create-react-admin-panel/list-after-using-editguesser/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser.png" data-orig-size="730,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="List after using EditGuesser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser-300x165.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser.png" decoding="async" class="aligncenter size-full wp-image-64700 jetpack-lazy-image" src="../Images/429f546ad7485df92c68660a483fdfd9.png" alt="List after using EditGuesser, Shows List In Vertical Column With Code On The Right Side" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser-300x165.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64700" data-permalink="https://blog.logrocket.com/create-react-admin-panel/list-after-using-editguesser/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser.png" data-orig-size="730,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="List after using EditGuesser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser-300x165.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-64700" src="../Images/429f546ad7485df92c68660a483fdfd9.png" alt="List after using EditGuesser, Shows List In Vertical Column With Code On The Right Side" srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser-300x165.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/List-after-using-EditGuesser.png"/></noscript>
<p>现在，让我们在应用程序中复制控制台的标记。在<code>users.js</code>中追加下面的代码示例:</p>
<pre>//src/components/User.js
import React from 'react';
import { Edit, SimpleForm, TextInput } from 'react-admin';

export const UserEdit = (props) =&gt; {
    return (
        &lt;Edit title='Edit User' {...props}&gt;
            &lt;SimpleForm&gt;
            &lt;TextInput disabled source="id" /&gt;
                &lt;TextInput source="name" /&gt;
                &lt;TextInput source="username" /&gt;
                &lt;TextInput source="email" /&gt;
                &lt;TextInput source="phone" /&gt;
                &lt;TextInput source="company"/&gt;
            &lt;/SimpleForm&gt;
        &lt;/Edit&gt;
    )
}
</pre>
<p><code>TextInput</code>元素中的<code>disabled</code>属性防止敏感属性被编辑。在<code>App.js</code>中，将<code>EditGuesser</code>替换为<code>UserEdit</code>:</p>
<pre>//src/App.js
import React, { Component } from "react";
import { Admin, Resource } from "react-admin";
import  { UserList, UserEdit }  "./components/authProvider";
import jsonServerProvider from "ra-data-json-server";

const dataProvider = restProvider('http://localhost:3000')
function App() {
  return (
      &lt;Admin dataProvider={dataProvider}&gt;
        &lt;Resource name="users" list={UserList} edit={UserEdit} /&gt;
      &lt;/Admin&gt;
    );
  }
}
export default App;
</pre>
<h3>添加新用户</h3>
<p>创建新用户的过程与编辑几乎相同，除了我们必须在<code>db.json</code>文件中创建一个新的集合。在<code>users.js</code>中，复制下面的代码示例:</p>
<pre>//src/components/User.js
import React from 'react';
import { Create, SimpleForm, TextInput } from 'react-admin';

export const UserCreate = (props) =&gt; {
    return (
        &lt;Create title='Create User' {...props}&gt;
            &lt;SimpleForm&gt;
            &lt;TextInput type="number" source="id" /&gt;
                &lt;TextInput source="name" /&gt;
                &lt;TextInput source="username" /&gt;
                &lt;TextInput source="email" /&gt;
                &lt;TextInput source="phone" /&gt;
                &lt;TextInput source="company"/&gt;
            &lt;/SimpleForm&gt;
        &lt;/Create&gt;
    )
}
</pre>
<p>现在，在<code>App.js</code>中，添加<code>UserCreate</code>组件:</p>
<pre>//src/App.js
import React, { Component } from "react";
import { Admin, Resource } from "react-admin";
import  { UserList, UserEdit, UserCreate }  from './components/User';
const dataProvider = restProvider('http://localhost:3000')
function App() {
  return (
    &lt;Admin dataProvider={dataProvider}&gt;
      &lt;Resource name="users" list={UserList} create={UserCreate} edit={UserEdit} /&gt;
    &lt;/Admin&gt;
  );
}
export default App;
</pre>
<p>在我们的界面上，让我们尝试创建一个新用户:</p>
<p><span class="embed-youtube"> <iframe loading="lazy" class="youtube-player" src="https://www.youtube.com/embed/da6RASqHDCE?version=3&amp;rel=1&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;fs=1&amp;hl=en-US&amp;autohide=2&amp;wmode=transparent" allowfullscreen="true" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation">视频</iframe> </span></p>
<p> </p>
<p>与我们试图编辑用户的详细信息时发生的情况类似，乐观呈现也会发生。这解释了为什么在上面代码片段的最后几秒，我们新创建的用户在消息<code>NOT FOUND</code>出现之前显示了一会儿。</p>
<h2><code>react-admin</code>认证</h2>
<p>每个管理页面都需要一个认证过程。它可以是基本的，也可以稍微复杂一点，比如<a href="https://blog.logrocket.com/jwt-authentication-best-practices/"> JSON Web Tokens (JWT) </a>或者<a href="https://blog.logrocket.com/implementing-oauth-2-0-in-node-js/"> OAuth </a>。</p>
<p>尽管默认情况下，<code>react-admin</code>应用程序不需要认证就能运行，但是将认证集成到管理页面中仍然是最佳实践。</p>
<p>让我们灵活地实施认证。Simple REST没有认证模型，所以我们将创建一个伪认证过程，它接受任何值作为<code>username</code>和<code>password</code>，并将这些值存储在<code>localStorage</code>中。</p>
<p>在我们的<code>src</code>文件夹中，创建一个名为<code>authProvider</code>的文件:</p>
<pre>// src/components/authProvider.js
import { AUTH_LOGIN, AUTH_LOGOUT, AUTH_ERROR, AUTH_CHECK } from 'react-admin';

   export const authProvider = (type, params) =&gt; {
    // when a user tries to log in 
    if (type === AUTH_LOGIN) {
     const { username } = params;
     localStorage.setItem('username', username)
     return Promise.resolve();
    }
    // when a user tries to logout
    if (type === AUTH_LOGOUT) {
        localStorage.removeItem('username');
     return Promise.resolve();
    }
    // when the API throws an error
    if (type === AUTH_ERROR) {
     const { status } = params;
     if (status === 401 || status === 403) {
      localStorage.removeItem('username');
      return Promise.reject()
     }
     return Promise.resolve()
    }
    // when a user navigates to a new location
    if (type === AUTH_CHECK) {
     return localStorage.getItem('username') ?
      Promise.resolve() :
      Promise.reject();
    }
    return Promise.reject('Unknown Method');
   };
</pre>
<p>然后转到<code>App.js</code>并传递<code>&lt;Admin&gt;</code>组件中的<code>authProvider</code>属性:</p>
<pre>//src/App.js
import React from 'react'
import { Admin, Resource } from 'react-admin'
import restProvider from 'ra-data-simple-rest'
import { authProvider } from "./components/authProvider";
import { UserList, UserEdit, UserCreate} from './components/User';

const dataProvider = restProvider('http://localhost:3000')
function App() {
  return (
    &lt;Admin dataProvider={dataProvider} authProvider={authProvider}&gt;
      &lt;Resource name="users" list={UserList} create={UserCreate} edit={UserEdit} /&gt;
    &lt;/Admin&gt;
  );
}
export default App;
</pre>
<p>现在，当我们重新启动应用程序时，我们首先进入一个登录页面:</p>
<p><span class="embed-youtube"> <iframe loading="lazy" class="youtube-player" src="https://www.youtube.com/embed/s-oLKoEp5gA?version=3&amp;rel=1&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;fs=1&amp;hl=en-US&amp;autohide=2&amp;wmode=transparent" allowfullscreen="true" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation">视频</iframe> </span></p>
<h2>摘要</h2>
<p>创建管理应用程序不再像以前那样复杂。有了<a href="https://blog.logrocket.com/?post_type=post&amp;s=react&amp;orderby=relevance&amp;order=DESC&amp;post_type=post"> React的<code>react-admin</code> </a>，我们可以很容易地搭建管理界面。认证过程同样重要，在这里也不排除。</p>
<p>你可以在 <a href="https://github.com/fullstackmafia/new-react-admin"> GitHub </a>上找到这个项目的源代码。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>