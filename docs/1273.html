<html>
<head>
<title>How to deploy an AdonisJs application to DigitalOcean - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何将AdonisJs应用程序部署到DigitalOcean - LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/#0001-01-01">https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/#0001-01-01</a></blockquote><div><article class="article-post">
<p>AdonisJs框架高度关注速度和稳定性，是作为Node.js生态系统中其他框架的替代方案而创建的。</p>
<p>有了集成系统的力量，开发人员工效学就有了目标，而不是耦合库。</p>
<p>DigitalOcean是一家云基础设施提供商，提供按需云平台，可以托管和管理您的应用程序。在本教程中，我们将介绍在DigitalOcean上设置服务器和配置数据库的步骤。我还在AdonisJs中创建了一个<a href="https://github.com/Vectormike/adonis_blogApi" target="_blank" rel="noopener noreferrer">演示</a>应用程序，我们将把它部署到DigitalOcean。</p>
<p>DigitalOcean还提供其他选项。请随意检查或使用它们中的任何一个。为了即将到来的开发者，我们将使用这个技术栈。</p>
<h3>先决条件</h3>
<p>在我们继续本教程之前，您必须具备以下条件:</p>
<ul>
<li>对Node.js(尤其是AdonisJs)有基本的了解</li>
<li>Git的基础知识</li>
<li>安装了npm或纱线。</li>
<li>数字海洋账户</li>
</ul>
<h3>创建一个液滴</h3>
<p>水滴是服务器。当您登录到您的DigitalOcean帐户时，您必须首先创建一个服务器。点击屏幕顶部的创建按钮，我们将创建一个Droplet。</p>
<p><img data-attachment-id="27857" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/droplets-create/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create.png" data-orig-size="373,129" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="droplets-create" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create-300x104.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create.png" decoding="async" class="aligncenter wp-image-27857 jetpack-lazy-image" src="../Images/c5ffbbf5097507d9da7329dd7485098c.png" alt="Our droplets Create option." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create.png 373w, https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create-300x104.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="27857" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/droplets-create/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create.png" data-orig-size="373,129" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="droplets-create" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create-300x104.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create.png" decoding="async" loading="lazy" class="aligncenter wp-image-27857" src="../Images/c5ffbbf5097507d9da7329dd7485098c.png" alt="Our droplets Create option." srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create.png 373w, https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create-300x104.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/droplets-create.png"/></noscript>
<p>从分布中选择一个图像。分发列表下有多个选项。因此，我们将使用Ubuntu 20.04 (LTS)，因为它很常见。</p>
<p><img data-attachment-id="27898" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/create-doplets/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets.png" data-orig-size="730,314" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="create-doplets" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets-300x129.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets.png" decoding="async" class="aligncenter size-full wp-image-27898 jetpack-lazy-image" src="../Images/3383ca334dd29add3c37a99f063e84c4.png" alt="The upload screen for DigitalOcean." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets-300x129.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="27898" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/create-doplets/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets.png" data-orig-size="730,314" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="create-doplets" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets-300x129.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-27898" src="../Images/3383ca334dd29add3c37a99f063e84c4.png" alt="The upload screen for DigitalOcean." srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets-300x129.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/create-doplets.png"/></noscript>
<p>然后，我们选择一个计划。我建议我们选择最小的计划，因为我们将部署一个非常基本的应用程序。如果需要，您可以随时扩大规模。请记住，未来缩小内存是不可能的。</p>
<p><img data-attachment-id="27900" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/choosing-plan/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan.png" data-orig-size="1232,521" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Choosing-plan" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan-300x127.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan-1024x433.png" decoding="async" class="aligncenter wp-image-27900 jetpack-lazy-image" src="../Images/2d823ca3868a81fd6cb46e727531d146.png" alt="The options for choosing a plan on Digital Ocean." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan.png 1232w, https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan-300x127.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan-1024x433.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan-768x325.png 768w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="27900" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/choosing-plan/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan.png" data-orig-size="1232,521" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Choosing-plan" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan-300x127.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan-1024x433.png" decoding="async" loading="lazy" class="aligncenter wp-image-27900" src="../Images/2d823ca3868a81fd6cb46e727531d146.png" alt="The options for choosing a plan on Digital Ocean." srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan.png 1232w, https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan-300x127.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan-1024x433.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan-768x325.png 768w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/Choosing-plan.png"/></noscript>
<p>选择数据中心区域。选择一个离你近的或者你认为用户主要居住的地方。</p>
<p><img data-attachment-id="27901" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/datacenter-region/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region.png" data-orig-size="730,242" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="datacenter-region" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region-300x99.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region.png" decoding="async" class="aligncenter size-full wp-image-27901 jetpack-lazy-image" src="../Images/37abb2f563024b3f05609d40f1ae97e6.png" alt="Choose a data center region." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region-300x99.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="27901" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/datacenter-region/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region.png" data-orig-size="730,242" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="datacenter-region" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region-300x99.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-27901" src="../Images/37abb2f563024b3f05609d40f1ae97e6.png" alt="Choose a data center region." srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region-300x99.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/datacenter-region.png"/></noscript>
<p>接下来，我们需要将SSH密钥添加到droplet中。这是一个非常重要的部分，有混淆的余地。SSH允许我们从我们的计算机直接连接到远程服务器(DigitalOcean)。</p>
<p>如果您已经将SSH密钥添加到DigitalOcean，您可以选择:</p>
<p><img data-attachment-id="27902" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/authentication-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page.png" data-orig-size="1229,298" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="authentication-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page-1024x248.png" decoding="async" class="aligncenter wp-image-27902 jetpack-lazy-image" src="../Images/24574c341efc36105c58236c65649da1.png" alt="The authentication page for DigitalOcean." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page.png 1229w, https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page-300x73.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page-1024x248.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page-768x186.png 768w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="27902" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/authentication-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page.png" data-orig-size="1229,298" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="authentication-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page-1024x248.png" decoding="async" loading="lazy" class="aligncenter wp-image-27902" src="../Images/24574c341efc36105c58236c65649da1.png" alt="The authentication page for DigitalOcean." srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page.png 1229w, https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page-300x73.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page-1024x248.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page-768x186.png 768w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/authentication-page.png"/></noscript>
<p>如果您没有添加它，那么您必须生成一个。复制并粘贴您的SSH密钥，并为其命名。您可以使用<a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/" target="_blank" rel="noopener noreferrer"> Github的指南</a>来生成一个并将其复制到我们的droplet中。</p>
<p><img data-attachment-id="27903" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/add-public-key/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key.png" data-orig-size="1051,558" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-public-key" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key-300x159.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key-1024x544.png" decoding="async" class="aligncenter wp-image-27903 jetpack-lazy-image" src="../Images/d74c7fe6bccbebf188bce4e4baed75de.png" alt="Add a public key." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key.png 1051w, https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key-300x159.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key-1024x544.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key-768x408.png 768w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="27903" data-permalink="https://blog.logrocket.com/how-to-deploy-an-adonis-js-application-to-digitalocean/add-public-key/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key.png" data-orig-size="1051,558" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-public-key" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key-300x159.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key-1024x544.png" decoding="async" loading="lazy" class="aligncenter wp-image-27903" src="../Images/d74c7fe6bccbebf188bce4e4baed75de.png" alt="Add a public key." srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key.png 1051w, https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key-300x159.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key-1024x544.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key-768x408.png 768w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/add-public-key.png"/></noscript>
<p>通过更改您的主机名来完成它，这样它就不会为您生成一个随机的名称，然后单击<code>Create Droplet</code>。</p>
<h3>配置服务器</h3>
<p>接下来，我们将SSH添加到我们的服务器中继续。但是我们需要管理权限，所以让我们创建一个新用户并授予权限。</p>
<p>使用我们服务器的IP地址以root用户身份登录:</p>
<pre>ssh <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="bcced3d3c8fc8d8c89928d8d8e928b8e928d8f84">[email protected]</a></pre>
<p>现在添加用户并记下您使用的密码:</p>
<pre>adduser dominic</pre>
<p>现在，让我们将这个用户添加到sudo组，这样它就可以使用关键字<code>sudo</code>运行<code>root</code>命令。</p>
<p>所以，运行这个:</p>
<pre>usermod -aG sudo dominic</pre>
<p>现在，我们已经将dominic添加到具有管理权限的sudo组中，我们还希望将SSH密钥添加到用户中，以便我们可以登录到服务器。</p>
<pre>su - dominic</pre>
<p>接下来，创建一个名为<code>.ssh</code>的目录，创建一个存储SSH密钥的文件<code>authorized_keys</code>，并更改目录的权限，使其访问隐藏起来。</p>
<pre>mkdir ~/.ssh touch .ssh/authorized_keys chmod 700 .ssh</pre>
<p>我们还需要更改文件的权限，这样它就可以被所有人读取，并且只能被用户<code>domininc</code>更改。</p>
<p>现在接下来最重要的步骤是将我们复制的SSH密钥粘贴到这个文件中。如果你没有复制，回到你的电脑上复制。</p>
<p>打开文件并将内容粘贴到文件中。保存文件，点击<code>esc</code>停止编辑，<code>:wq</code>写入(保存)并按<code>ENTER</code>。</p>
<p>现在限制文件并退出:</p>
<pre>chmod 600 ~/.ssh/authorized_keys exit</pre>
<p>让我们通过SSH回到我们的服务器，但是使用我们新创建的用户。如果成功了，我们就可以开始下一步了。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<pre>ssh <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="97f3f8fafef9fef4d7a6a7a2b9a6a6a5b9a0a5b9a6a4af">[email protected]</a></pre>
<h3>安装和设置MYSQL</h3>
<p>看看我们的演示应用程序，我们使用MYSQL作为它的数据库，所以我们需要在我们的服务器上安装和配置它。</p>
<pre>sudo apt install mysql-server sudo mysql_server_installation</pre>
<p>接下来，我们需要登录MYSQL服务器并创建一个新的用户和数据库。</p>
<pre>mysql -u root -p</pre>
<p>更换<code>USERNAME</code>、<code>localhost</code>和<code>PASSWORD</code>。</p>
<pre>CREATE USER 'USERNAME'@'localhost' IDENTIFIED BY 'PASSWORD';</pre>
<p>运行下面的命令，允许我们在连接MySQL时使用密码。</p>
<pre>ALTER USER 'USERNAME'@'LOCALHOST'IDENTIFIED WITH mysql_native_password BY 'PASSWORD';</pre>
<p>然后，我们用相关用户创建一个数据库:</p>
<pre>CREATE DATABASE adonis_userAuth;</pre>
<p>然后，我们授予所有权限，刷新以使其工作，并退出:</p>
<pre>GRANT ALL ON adonis_userAuth.* TO 'USERNAME'@'localhost'; FLUSH PRIVILEGES; exit</pre>
<h3>在我们的服务器上克隆我们的应用</h3>
<p>我们最后的任务是使用git将我们的AdonisJs应用程序从Github克隆到我们的服务器中。因此，让我们再次SSH到我们的服务器并克隆我们的repo。您可以随时使用SSL来克隆它。</p>
<pre>https://github.com/Vectormike/adonis_blogApi</pre>
<p>转到克隆的目录并安装依赖项:</p>
<pre>cd adonis_blogApi npm install</pre>
<p>我们仍然需要在一个文件中修改我们的环境变量。AdonisJs通过一个<code>.env</code>文件读取所有变量。这些变量是我们的配置设置。</p>
<p>我们创建了文件<code>.env</code>,这样它可以包含AdonisJs应用程序的变量。</p>
<pre>touch .env</pre>
<p>创建后，我们生成应用程序密钥<code>APP_KEY</code>。没有它，我们的应用程序将无法运行。</p>
<pre>adonis key:generate</pre>
<p>这会产生一些随机数。复制密钥并打开<code>.env</code>文件，这样我们可以粘贴所有变量，包括应用密钥。</p>
<pre>vim .env</pre>
<p>然后，粘贴以下变量:</p>
<pre>HOST=127.0.0.1
PORT=3333
NODE_ENV=production
APP_NAME=AdonisJs
APP_URL=http://${HOST}:${PORT}
CACHE_VIEWS=false
APP_KEY=mAqOZJTaXhbcvxPGVckSyUI1UeCeYIUM
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USER=root
DB_PASSWORD=
DB_DATABASE=adonis_userAuth
HASH_DRIVER=bcrypt</pre>
<p>我们需要运行迁移来创建我们的表。如果您的环境是生产环境，您可能需要添加<code>--force flag</code>，否则它不会创建表。</p>
<pre>node ace migration:run --force</pre>
<p>最后，我们开始运行我们的应用程序。但是如果它崩溃了呢？这就是为什么我们必须美国PM2，使它自动重启时，它崩溃了。</p>
<p>如果<code>NODE_ENV</code>正在生产，运行该命令:</p>
<pre>pm2 start server.js</pre>
<h3>配置Nginx</h3>
<p>我们将需要使用Nginx来设置反向代理。这将允许我们从外部访问我们的应用程序，而不是通过我们的本地服务器网络进行访问。这样我们可以通过IP地址或域名访问它，而不仅仅是通过<code>PORT</code>。</p>
<p>因此，我们打开Nginx配置文件并编辑:</p>
<pre>sudo vim /etc/nginx/sites-available/default</pre>
<p>粘贴下面的配置。这将告诉Nginx监听一个传入的相关域，并将所有请求转发给本地服务器网络中的<code>PORT</code>。</p>
<pre>server_name DOMAIN_NAME_OR_IP_ADDRESS;

location / {
    proxy_pass http://localhost:3333;
    proxy_http_version 1.1;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
}</pre>
<p>用您的IP地址或域名(如果已设置)替换<code>server_name</code>。为了让我们的更改生效，我们必须重启Nginx。</p>
<pre>sudo service nginx restart</pre>
<p>我们的应用程序现在可以通过点击我们的服务器的IP来访问。</p>
<h2>结论</h2>
<p>在本教程中，我们学习了如何将AdonisJs应用程序部署到DigitalOcean。我们还学习了如何配置Nginx，以便设置反向代理，配置我们的droplet，并在DigitalOcean上设置我们的数据库。</p>
<p>本文应该已经解释了部署我们的应用程序所需的每个步骤。</p>
<p>我们可以在流程中添加一个自动部署脚本。这将从我们的存储库中提取最近的代码，安装依赖项，运行迁移，并重启应用程序。</p>
<p>要了解更多关于数字海洋的信息，请前往<a href="https://www.digitalocean.com/community/tutorials" target="_blank" rel="noopener noreferrer">数字海洋</a>获取更多教程。</p>
<p>用作本教程演示的源代码在<a href="https://github.com/Vectormike/adonis_blogApi" target="_blank" rel="noopener noreferrer"> Github </a>上。随意克隆它。</p><div class="code-block code-block-23">
<div class="blog-plug inline-plug node-plug"><h2>200只<img src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> <noscript> <img data-lazy-fallback="1" src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> </noscript>显示器出现故障，生产中网络请求缓慢</h2><p>部署基于节点的web应用程序或网站是容易的部分。确保您的节点实例继续为您的应用程序提供资源是事情变得更加困难的地方。如果您对确保对后端或第三方服务的请求成功感兴趣，</p><a href="https://lp.logrocket.com/blg/node-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer"><img src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/><noscript><img data-lazy-fallback="1" src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/></noscript></a><a href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录下用户与你的应用程序交互时发生的一切。您可以汇总并报告有问题的网络请求，以快速了解根本原因，而不是猜测问题发生的原因。</p><p>LogRocket检测您的应用程序以记录基线性能计时，如页面加载时间、到达第一个字节的时间、慢速网络请求，还记录Redux、NgRx和Vuex操作/状态。</p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a><p>. </p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>