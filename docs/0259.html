<html>
<head>
<title>Manipulate date and time in JavaScript using MomentJS - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用MomentJS - LogRocket博客在JavaScript中操作日期和时间</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/manipulate-date-and-time-in-javascript-using-momentjs-439dc8725c5b/#0001-01-01">https://blog.logrocket.com/manipulate-date-and-time-in-javascript-using-momentjs-439dc8725c5b/#0001-01-01</a></blockquote><div><div class="section-inner sectionLayout--insetColumn">
<p class="graf graf--p">都快2018年了！我们生活中的每一天都在使用日期和时间，我就是这样做的，如果你是一个设计产品、工具或服务的开发人员，你很可能需要在你构建的任何东西中操纵日期。</p>
<p class="graf graf--p">你如何在剧本中处理日期？<code class="markup--code markup--p-code">new Date()</code>？这样的操作充其量只能算是麻烦。<a class="markup--anchor markup--p-anchor" href="https://momentjs.com" target="_blank" rel="noopener noreferrer" data-href="https://momentjs.com"> Moment </a>是一个JavaScript库，通过其可接近的API方法，使得日期处理变得更加容易。</p>
<p class="graf graf--p">在本教程中，我将讨论如何使用<code class="markup--code markup--p-code">moment</code>在JavaScript中有效地操作日期和时间。</p>
<h3 class="graf graf--h3">装置</h3>
<p class="graf graf--p">可以在浏览器和服务器端运行。在服务器端使用Node.js，通过在命令行运行以下命令，通过npm安装moment:</p>
<pre class="graf graf--pre">npm install -g moment</pre>
<p class="graf graf--p"><code class="markup--code markup--p-code">moment</code>然后可以简单地要求:</p>
<pre>var moment = require('moment')&#13;
var today = moment().format()</pre>
<p class="graf graf--p">我们刚刚创建了<code class="markup--code markup--p-code">moment</code>对象，可以操作它来返回任何期望的日期值。一旦用<code class="markup--code markup--p-code">moment()</code>调用矩函数，它默认为当前日期，就像<code class="markup--code markup--p-code">new Date()</code>一样。</p>
<p class="graf graf--p">在浏览器中，<code class="markup--code markup--p-code">moment</code>被下载到<a class="markup--anchor markup--p-anchor" href="https://momentjs.com/" target="_blank" rel="noopener noreferrer" data-href="https://momentjs.com/">这里的</a>，并包含在一个脚本标签中，如下所示:</p>
<pre>&lt;script src="moment.js"&gt;&lt;/script&gt;</pre>
<p class="graf graf--p">或者，它可以从一个<a class="markup--anchor markup--p-anchor" href="https://cdnjs.com/libraries/moment.js" target="_blank" rel="noopener noreferrer" data-href="https://cdnjs.com/libraries/moment.js"> CDN </a>导入，并在脚本标签中用作源。其他安装方法可以在<a class="markup--anchor markup--p-anchor" href="https://momentjs.com/docs/" target="_blank" rel="noopener noreferrer" data-href="https://momentjs.com/docs/">这里</a>找到。</p>
</div>
<div class="section-inner sectionLayout--insetColumn">
<h3 class="graf graf--h3">操纵日期和时间</h3>
<p class="graf graf--p"><code class="markup--code markup--p-code">moment</code>对象让我们能够以我们选择的方式操作date对象，对它应用几个(链接)<code class="markup--code markup--p-code">moment</code>方法返回期望的格式化日期值。</p>
<p class="graf graf--p">例如，我们用<code class="markup--code markup--p-code">new Date()</code>得到以下格式:</p>
<pre>new Date();&#13;
&#13;
// Wed Oct 18 2017 19:36:39 GMT+0100 (WAT)</pre>
<p class="graf graf--p">如果在我们的用例中，向用户显示相对日期会更直观呢？使用moment，您可以简单地这样做:</p>
<pre>var then = moment('2010-09-17').fromNow() &#13;
// "7 years Ago"</pre>
<p class="graf graf--p">不带任何参数调用<code class="markup--code markup--p-code">moment()</code>将返回您所在时区的当前日期。</p>
<pre>var today = moment() // returns today's date in current timezone</pre>
<p class="graf graf--p">让我们深入了解Moment提供的更多格式化方法。</p>
<h3 class="graf graf--h3">日期格式</h3>
<p class="graf graf--p">以前，用<code class="markup--code markup--p-code">Date()</code>字符串格式化日期需要对返回的日期字符串执行几个字符串操作。使用<code class="markup--code markup--p-code">moment</code>,我们只需要添加<code class="markup--code markup--p-code">format()</code>方法来格式化日期。该方法还接收定义日期显示方式的参数。</p>
<pre>var today = moment().format() //returns 2017-10-04T21:07:52+01:00&#13;
var today = moment().format('YYYY-MM-DD') //returns 2017-10-04&#13;
var today = moment().format('YY/MMM/DD') // returns 17/Oct/04&#13;
var today = moment().format('D/MMMM/Y') // returns 4/October/17&#13;
var time = moment().format('ddd DD/MM/YYYY') //returns Wed 04/10/2017</pre>
<p class="graf graf--p">要将某个特定的<code class="markup--code markup--p-code">moment</code>作为字符串，在调用<code class="markup--code markup--p-code">moment()</code>时将字符串值作为参数传递。</p>
<pre>var time = moment('2017/10/5') // returns Thu Oct 05 2017 00:00:00 GMT+0100</pre>
<p class="graf graf--p">如果知道的话，指定的日期格式也可以作为参数传入。如果日期的值无法解析，则该日期被视为<code class="markup--code markup--p-code">invalid</code>。</p>
<pre>var time = moment('2017/10/5', 'YYYY/DD/MM')// returns Wed May 10 2017 00:00:00 GMT+0100</pre>
<p class="graf graf--p">其他日期格式可以在<a class="markup--anchor markup--p-anchor" href="https://momentjs.com/docs/#/parsing/now/" target="_blank" rel="noopener noreferrer" data-href="https://momentjs.com/docs/#/parsing/now/">这里</a>找到。</p>
<p class="graf graf--p">当调用<code class="markup--code markup--p-code">moment</code>时，<code class="markup--code markup--p-code">moment</code>使用方法链接来完成令人惊叹的操作，例如:</p>
<pre>var newMoment = moment().add().subtract().fromDate()</pre>
<p class="graf graf--p">这只是<code class="markup--code markup--p-code">moment</code>中链接方法的一个例子。还要注意，矩是可变的，因此会改变最初获取的<code class="markup--code markup--p-code">moment</code>。为了创建一个新的被操纵的<code class="markup--code markup--p-code">moment</code>，原来的<code class="markup--code markup--p-code">moment</code>可以被克隆成一个新的变量。</p>
<h3 class="graf graf--h3">减去</h3>
<p class="graf graf--p">这种方法从原始时刻减去时间。这里，调用了<code class="markup--code markup--p-code">subtract()</code>方法，并向其传递了一个表示要删除的时间量和时间值的参数。这个时间值也可以用速记法书写，它们包括:</p>
<ul class="postList">
<li class="graf graf--li">d:天</li>
<li class="graf graf--li">y:年</li>
<li class="graf graf--li">问:25美分</li>
<li class="graf graf--li">几个月</li>
<li class="graf graf--li">w:几周</li>
<li class="graf graf--li">小时</li>
<li class="graf graf--li">男:分钟</li>
<li class="graf graf--li">斯:秒</li>
<li class="graf graf--li">毫秒:毫秒</li>
</ul>
<pre>moment().subtract(val, string)</pre>
<pre>var lastWeek = moment().subtract(7, 'days') //subtracts 7 days from the current date</pre>
<p class="graf graf--p">多个组合也可以用减去时间的方法通过链接来完成。</p>
<pre>var someWeek = moment().subtract(1, 'week').subtract(2, 'days').subtract(5, 'weeks')</pre>
<h3 class="graf graf--h3">增加</h3>
<p class="graf graf--p">这类似于<code class="markup--code markup--p-code">subtract()</code>方法，只是给<code class="markup--code markup--p-code">moment</code>增加了所需的时间。</p>
<pre>moment().add(val, string)</pre>
<pre>var nextHour = moment().add(1, 'hour')</pre>
<h3 class="graf graf--h3">开始于</h3>
<p class="graf graf--p">该方法将<code class="markup--code markup--p-code">moment</code>突变为指定时间的开始。这会将时间设置为当前时间的开始，可以是日、月、年或分钟的开始。</p>
<pre>var time = moment().startOf('day') // returns time at beginning of the day - 12:00am&#13;
var time = moment().startOf('week')// Uses the locale aware start of week day&#13;
var time = moment().startOf('year')&#13;
var time = moment().startOf('minute')</pre>
<h3 class="graf graf--h3">结束</h3>
<p class="graf graf--p">这与<code class="markup--code markup--p-code">startOf()</code>相反，将<code class="markup--code markup--p-code">moment</code>突变到一个单位时间的末尾。这包括周、月、日或年。</p>
<pre>var endOfMonth = moment().endOf('Month') // Returns the last time at the end of the month.</pre>
<h3 class="graf graf--h3">从现在开始的时间</h3>
<p class="graf graf--p">此显示相对时间用于给出两个时间范围之间差异的整体情况。</p>
<pre>var then = moment('2010-09-17').fromNow() //returns "7 years Ago"&#13;
var justNow = moment().fromNow() //returns "A few seconds ago"</pre>
<p class="graf graf--p"><code class="markup--code markup--p-code">fromNow()</code>方法也接受一个布尔值，传入<code class="markup--code markup--p-code">true</code>会删除‘ago’后缀。</p>
<pre>var since = moment("27/08/2017", "DD/MM/YYYY").fromNow(true) // a month</pre>
<p class="graf graf--p">要查看特定日期的准确时间，可以使用<code class="markup--code markup--p-code">from()</code>方法。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<pre>var time = moment("27/08/2017", "DD/MM/YYYY").from(moment('27/09/2017', "DD/MM/YYYY"))&#13;
//a month ago</pre>
<h3 class="graf graf--h3">时间到了</h3>
<p class="graf graf--p">与<code class="markup--code markup--p-code">fromNow()</code>类似，<code class="markup--code markup--p-code">toNow()</code>方法返回与<code class="markup--code markup--p-code">fromNow()</code>方法相反的结果。<code class="markup--code markup--p-code">to()</code>方法也用于显示两个时间值之间的相对时间。</p>
<pre>var time = moment("27/08/2016", "DD/MM/YYYY")&#13;
var time2 = moment("27/09/2017", "DD/MM/YYYY")&#13;
console.log(time.to(time2)) // in a year&#13;
&#13;
var time2 = moment("27/09/2017", "DD/MM/YYYY")&#13;
console.log(time2.toNow())// in 8 days</pre>
<h3 class="graf graf--h3">差异</h3>
<p class="graf graf--p">这是操作时间和日期时遇到的常见问题之一。对于<code class="markup--code markup--p-code">moment</code>，<code class="markup--code markup--p-code">diff()</code>方法用于计算两个时刻之间的差值，并返回以毫秒为单位的差值。但是，可以返回其他时间单位，如年、月、周、日、小时、分钟和秒。<code class="markup--code markup--p-code">diff()</code>方法将时间单位作为第一个参数，并将所需的时间单位作为第二个参数。</p>
<pre>momentA.diff(momentB, 'unit')&#13;
&#13;
</pre>
<pre>var time = moment("27/08/2018", "DD/MM/YYYY")&#13;
var time2 = moment("27/09/2017", "DD/MM/YYYY")&#13;
console.log(time.diff(time2,"days") + ' days') // 334days</pre>
<h3 class="graf graf--h3">询问</h3>
<p class="graf graf--p">这些是返回布尔值的<code class="markup--code markup--p-code">moment</code>方法，用于比较两个日期值。</p>
<h3 class="graf graf--h3">isBefore()</h3>
<p class="graf graf--p">顾名思义，<code class="markup--code markup--p-code">isBefore()</code>方法验证一个日期值是否在另一个日期值之前。</p>
<pre>var then = moment("27/08/2018", "DD/MM/YYYY")&#13;
var now = moment("27/09/2017", "DD/MM/YYYY")&#13;
console.log(then.isBefore(now)) // false&#13;
console.log(now.isBefore(then)) // true</pre>
<h3 class="graf graf--h3">isAfter()</h3>
<p class="graf graf--p">类似于<code class="markup--code markup--p-code">isBefore()</code>方法，该方法验证after日期是否在另一个日期值之后，并返回<code class="markup--code markup--p-code">true</code>或<code class="markup--code markup--p-code">false</code>。</p>
<pre>var time = moment("27/08/2019", "DD/MM/YYYY")&#13;
var time2 = moment("27/12/2018", "DD/MM/YYYY")&#13;
document.write(time.isAfter(time2)) // true</pre>
<p class="graf graf--p">用于比较两个日期值的其他查询方法包括:</p>
<ul class="postList">
<li class="graf graf--li">伊萨梅()</li>
<li class="graf graf--li">isBetween()</li>
<li class="graf graf--li">伊萨米奥拉夫特()</li>
<li class="graf graf--li">isSameOrBefore()</li>
</ul>
<p class="graf graf--p">这些方法都遵循相同的语法并返回<code class="markup--code markup--p-code">true</code>或<code class="markup--code markup--p-code">false</code>。还有一些方法可以验证某个日期的有效性。这些是:</p>
<h3 class="graf graf--h3">isDaylightSavingTime</h3>
<p class="graf graf--p"><code class="markup--code markup--p-code">isDST()</code>验证<code class="markup--code markup--p-code">moment</code>是否处于夏令时。</p>
<pre>var time2 = moment("27/09/2017", "DD/MM/YYYY").isDST()&#13;
console.log(time2) // false</pre>
<h3 class="graf graf--h3">isLeapYear</h3>
<p class="graf graf--p">方法验证一年是否是闰年，并返回一个布尔值。</p>
<pre>var time = moment(2012, "YYYY").isLeapYear(); &#13;
console.log(time) //returns true</pre>
<h3 class="graf graf--h3">isValid</h3>
<p class="graf graf--p">使用<code class="markup--code markup--p-code">isValid()</code>方法，可以确定<code class="markup--code markup--p-code">moment</code>的有效性。</p>
<pre>var time = moment('2012/34/28', "YYYY/MM/DD").isValid(); //returns false&#13;
console.log(time) //returns false&#13;
var time = moment('2012/02/18', "YYYY/MM/DD").isValid();&#13;
console.log(time) //returns true</pre>
<h3 class="graf graf--h3">结论</h3>
<p class="graf graf--p">在本文中，我们已经看到了<code class="markup--code markup--p-code">moment</code>如何无缝地处理和管理日期和时间。通过简单地在<code class="markup--code markup--p-code">moment</code>对象上应用方法，无论是单独地还是以链的形式，我们都可以有效地操纵我们的日期和时间，以获得想要的结果。</p>
<p class="graf graf--p">在官方moment.js <a class="markup--anchor markup--p-anchor" href="http://momentjs.com/docs/" target="_blank" rel="noopener noreferrer" data-href="http://momentjs.com/docs/">文档</a>上找到更多资源。</p>
</div>
</div>    
</body>
</html>