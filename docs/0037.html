<html>
<head>
<title>React Router DOM: How to handle routing in web apps - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React Router DOM:如何在web应用中处理路由</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/react-router-dom-tutorial-examples/#0001-01-01">https://blog.logrocket.com/react-router-dom-tutorial-examples/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:这个React路由器DOM教程最后一次更新是在2021年8月11日。它可能仍然包含过时的信息。</em></p>
<p>我们已经广泛地涵盖了React Router，包括<a href="https://blog.logrocket.com/using-hooks-with-react-router/" target="_blank" rel="noopener">如何在</a>和<a href="https://blog.logrocket.com/how-react-hooks-can-replace-react-router/" target="_blank" rel="noopener">旁边使用钩子而不是React Router </a>，如何使用<a href="https://blog.logrocket.com/react-router-with-redux-navigation-state/" target="_blank" rel="noopener">和Redux </a>的React Router，以及其他<a href="https://blog.logrocket.com/advanced-react-router-concepts-code-splitting-animated-transitions-scroll-restoration-recursive-17096c0cf9db/" target="_blank" rel="noopener">高级用例</a>。但是，如果您刚刚开始使用React路由器，所有这些可能会让您难以理解。</p>
<p>别担心。在这篇文章中，我将带你从网络版的基础开始，<a class="markup--anchor markup--p-anchor" href="https://reacttraining.com/react-router/web/guides/philosophy" target="_blank" rel="noopener noreferrer" data-href="https://reacttraining.com/react-router/web/guides/philosophy"> React路由器DOM </a>。我们将介绍路由器的一般概念以及如何设置和安装React路由器。我们还将回顾框架的基本组件，并演示如何使用参数构建路线，如<code>/messages/10</code>。</p>
<p>以下是你将学到的东西:</p>

<p>为了演示React路由器DOM如何工作，我们将创建一个React应用程序示例。你可以在<a href="https://codesandbox.io/s/react-router-example-00rlr"> CodeSandbox </a>上找到互动演示。作为参考，最后一个例子的代码可以在<a href="https://github.com/philipszdavido/react-router-4-example"> GitHub </a>上找到。</p>
<h2 id="what-is-a-router-in-react">React中的路由器是什么？</h2>
<p><a class="markup--anchor markup--p-anchor" href="https://en.wikipedia.org/wiki/Single-page_application" target="_blank" rel="noopener noreferrer" data-href="https://en.wikipedia.org/wiki/Single-page_application">单页应用程序(SPAs) </a>重写页面的各个部分，而不是从服务器上加载整个新页面。</p>
<p>Twitter是这类应用程序的一个很好的例子。当你点击一个tweet时，只有tweet的信息会从服务器获取。页面没有完全重新加载:</p>
<p><img data-attachment-id="61333" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-twitter-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-example.gif" data-orig-size="720,405" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM: Twitter example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-example-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-example.gif" decoding="async" class="aligncenter size-full wp-image-61333 jetpack-lazy-image" src="../Images/c8f372c9b11c27c7988c7d8be122c81a.png" alt="React Router DOM in the Twitter web app" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-example.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-example.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61333" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-twitter-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-example.gif" data-orig-size="720,405" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM: Twitter example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-example-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-example.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61333" src="../Images/c8f372c9b11c27c7988c7d8be122c81a.png" alt="React Router DOM in the Twitter web app" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-example.gif"/></noscript>
<p>这些应用程序易于部署，并极大地改善了用户体验。然而，它们也带来了挑战。</p>
<p>其中之一是浏览器历史。因为应用程序包含在单个页面中，所以它本身不能依赖浏览器的前进/后退按钮。它需要别的东西。根据应用程序的状态，改变URL以在浏览器中推送或替换URL历史事件。同时，它还需要根据URL中包含的信息重建应用程序状态。</p>
<p>例如，在Twitter上，注意当一条推文被点击时，URL是如何变化的:</p>
<p><img data-attachment-id="61334" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-twitter-url-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-url-example.gif" data-orig-size="720,62" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM: Twitter example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-url-example-300x26.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-url-example.gif" decoding="async" class="aligncenter size-full wp-image-61334 jetpack-lazy-image" src="../Images/569986bbd13f39fa05a9c1a79ebd49df.png" alt="React Router DOM in the Twitter web app" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-url-example.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-url-example.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61334" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-twitter-url-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-url-example.gif" data-orig-size="720,62" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM: Twitter example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-url-example-300x26.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-url-example.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61334" src="../Images/569986bbd13f39fa05a9c1a79ebd49df.png" alt="React Router DOM in the Twitter web app" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-url-example.gif"/></noscript>
<p>以及历史条目是如何生成的:</p>
<p><img data-attachment-id="61335" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-twitter-history-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example.png" data-orig-size="556,130" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM: Updating history in Twitter" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example-300x70.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example.png" decoding="async" class="aligncenter size-full wp-image-61335 jetpack-lazy-image" src="../Images/dd9524c22a180419bccbb15577fbf8d2.png" alt="React Router DOM: Updating History in Twitter" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example.png 556w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example-300x70.png 300w" data-lazy-sizes="(max-width: 556px) 100vw, 556px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61335" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-twitter-history-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example.png" data-orig-size="556,130" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM: Updating history in Twitter" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example-300x70.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61335" src="../Images/dd9524c22a180419bccbb15577fbf8d2.png" alt="React Router DOM: Updating History in Twitter" srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example.png 556w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example-300x70.png 300w" sizes="(max-width: 556px) 100vw, 556px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-twitter-history-example.png"/></noscript>
<p>这是路由器的工作。</p>
<p>路由器允许您的应用程序在不同组件之间导航，更改浏览器URL，修改浏览器历史，并保持UI状态同步。</p>
<h2 id="what-is-react-router">什么是React路由器？</h2>
<p>React是一个很受欢迎的建造温泉的库。然而，由于React只专注于构建用户界面，它没有内置的路由解决方案。</p>
<p><a href="https://reactrouter.com/" target="_blank" rel="noopener"> React路由器</a>是React最流行的路由库。它允许您以相同的声明方式定义路由:</p>
<pre>&lt;Route path="/home" component={Home} /&gt;</pre>
<p>但是我们不要想太多。让我们从创建一个样例项目并设置React Router开始。</p>
<p>我将使用<a class="markup--anchor markup--p-anchor" href="https://github.com/facebookincubator/create-react-app" target="_blank" rel="noopener noreferrer" data-href="https://github.com/facebookincubator/create-react-app"> Create React App </a>来创建一个React App。您可以使用以下工具安装(或更新)它:</p>
<pre>npm install -g create-react-app</pre>
<p>只需要安装<a class="markup--anchor markup--p-anchor" href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer" data-href="https://nodejs.org/en/download/"> Node.js </a>版本6或更高版本即可。</p>
<p>接下来，执行以下命令:</p>
<pre>create-react-app react-router-example</pre>
<p>在这种情况下，将创建目录<code>react-router-example</code>。如果您<code>cd</code>进入它，您应该看到类似如下的结构:</p>
<p><img data-attachment-id="61337" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-example-directory/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory.jpeg" data-orig-size="250,529" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM directory" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory.jpeg" decoding="async" class="aligncenter size-full wp-image-61337 jetpack-lazy-image" src="../Images/e130d3447c9947e90df9651c69289eb9.png" alt="React Router DOM Directory" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory.jpeg 250w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory-142x300.jpeg 142w" data-lazy-sizes="(max-width: 250px) 100vw, 250px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61337" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-example-directory/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory.jpeg" data-orig-size="250,529" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM directory" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61337" src="../Images/e130d3447c9947e90df9651c69289eb9.png" alt="React Router DOM Directory" srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory.jpeg 250w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory-142x300.jpeg 142w" sizes="(max-width: 250px) 100vw, 250px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-directory.jpeg"/></noscript>
<h2 id="what-does-react-router-dom-do">React路由器DOM是做什么的？</h2>
<p>React路由器包括三个主要包:</p>
<ul>
<li><code>react-router</code>，路由器的核心包</li>
<li><code>react-router-dom</code>，包含React路由器的DOM绑定。换句话说，网站的路由器组件</li>
<li><code>react-router-native</code>，它包含React路由器的<a class="markup--anchor markup--li-anchor" href="https://facebook.github.io/react-native/" target="_blank" rel="noopener noreferrer" data-href="https://facebook.github.io/react-native/"> React本地</a>绑定。换句话说，使用React Native的应用程序开发环境的路由器组件</li>
</ul>
<p>React Router DOM使您能够在web应用程序中实现动态路由。与传统的路由架构不同，在传统的路由架构中，路由是在运行的应用程序之外的配置中处理的，React Router DOM根据应用程序和平台的需求促进了基于组件的路由。</p>
<p>如果您正在编写将在浏览器中运行的React应用程序，React Router DOM是最合适的选择。</p>
<h2 id="what-is-the-difference-between-react-router-and-react-router-dom">React路由器和React路由器DOM有什么区别？</h2>
<p>React路由器是路由器的核心包。React Router DOM包含DOM绑定，默认情况下允许您访问React Router。</p>
<p>也就是说，不需要同时使用React Router和React Router DOM。如果您发现自己两者都在使用，那么可以去掉React Router，因为您已经将它作为一个依赖项安装在React Router DOM中了。</p>
<p>但是，请注意，React Router DOM仅在浏览器上可用，因此您只能将其用于web应用程序。</p>
<p>React Native中可以使用React路由器DOM吗？</p>
<p><a href="https://www.npmjs.com/package/react-router-native" target="_blank" rel="noopener"> react-router-native </a>包使您能够在React Native应用程序中使用React Router。这个包包含React路由器的React本地绑定。</p>
<p>因为React路由器DOM仅适用于在web浏览器中运行的应用程序，所以它不适合在React本地应用程序中使用。您应该使用react-router-native。</p>
<h2 id="installing-react-router-dom">装置</h2>
<p>因为我们正在创建一个web应用程序，所以让我们安装<code>react-router-dom</code>:</p>
<pre>npm install — save react-router-dom</pre>
<p>此时，您可以执行:</p>
<pre>npm start</pre>
<p>将会打开一个浏览器窗口<code><a href="http://localhost:3000/" rel="nofollow">http://localhost:3000/</a></code>，您应该会看到如下内容:</p>
<p><img data-attachment-id="61338" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-example-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output.jpeg" data-orig-size="720,214" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output-300x89.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output.jpeg" decoding="async" class="aligncenter size-full wp-image-61338 jetpack-lazy-image" src="../Images/d9b86d45f5de43af34d6a9df63d83df7.png" alt="React Router DOM Output" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output.jpeg 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output-300x89.jpeg 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61338" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-example-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output.jpeg" data-orig-size="720,214" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output-300x89.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61338" src="../Images/d9b86d45f5de43af34d6a9df63d83df7.png" alt="React Router DOM Output" srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output.jpeg 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output-300x89.jpeg 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-example-output.jpeg"/></noscript>
<p>现在让我们用React和React路由器创建一个简单的SPA。</p>
<h2 id="the-react-router-api">React路由器API: <code>&lt;Router&gt;</code>、<code>&lt;Link&gt;</code>和<code>&lt;Route&gt;</code></h2>
<p>React路由器API基于三个组件:</p>
<ul>
<li><code>&lt;Router&gt;</code>:保持UI与URL同步的路由器</li>
<li><code>&lt;Link&gt;</code>:渲染一个导航链接</li>
<li><code>&lt;Route&gt;</code>:根据URL呈现一个UI组件</li>
</ul>
<h3><code>&lt;Router&gt;</code></h3>
<p>只有在一些特殊的情况下你才不得不直接使用<a class="markup--anchor markup--p-anchor" href="https://reacttraining.com/react-router/web/api/Router" target="_blank" rel="noopener noreferrer" data-href="https://reacttraining.com/react-router/web/api/Router"> <code>&lt;Router&gt;</code> </a>(例如当使用Redux时)，所以你要做的第一件事就是选择一个路由器实现。</p>
<p>在web应用程序中，您有两种选择:</p>

<p>如果你的目标是不支持HTML5历史API的老浏览器，你应该坚持使用<code>&lt;HashRouter&gt;</code>，它用下面的格式创建URL:</p>
<pre>http://localhost:3000/#/route/subroute</pre>
<p>否则，您可以使用<code>&lt;BrowserRouter&gt;</code>，它会创建以下格式的URL:</p>
<pre>http://localhost:3000/route/subroute</pre>
<p>我将使用<code>&lt;BrowserRouter&gt;</code>，所以在<code>src/index.js</code>中，我将从<code>react-router-dom</code>导入这个组件，并用它来包装<code>&lt;App&gt;</code>组件:</p>
<pre>import React from 'react';
// ...
import { BrowserRouter } from 'react-router-dom';

ReactDOM.render(
  &lt;BrowserRouter&gt;
      &lt;App /&gt;
  &lt;/BrowserRouter&gt;
  , document.getElementById('root')
);
// ...</pre>
<p>值得一提的是，路由器组件只能有一个子元素。例如，下面的代码:</p>
<pre>// ...
ReactDOM.render(
  &lt;BrowserRouter&gt;
      &lt;App /&gt;
      &lt;div&gt;Another child!&lt;/div&gt;
  &lt;/BrowserRouter&gt;
  , document.getElementById('root')
);
// ...</pre>
<p>抛出此错误消息:</p>
<p><img data-attachment-id="61339" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-error-message-example-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output.png" data-orig-size="720,239" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM error messsage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output-300x100.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output.png" decoding="async" class="aligncenter size-full wp-image-61339 jetpack-lazy-image" src="../Images/0c937f4e78f545881899ee52bd70cb37.png" alt="React Router DOM Error Messsage" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output.png 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output-300x100.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61339" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-error-message-example-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output.png" data-orig-size="720,239" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM error messsage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output-300x100.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61339" src="../Images/0c937f4e78f545881899ee52bd70cb37.png" alt="React Router DOM Error Messsage" srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output.png 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output-300x100.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-error-message-example-output.png"/></noscript>
<p>一个<code>&lt;Router&gt;</code>组件的主要工作是创建一个<a class="markup--anchor markup--p-anchor" href="https://github.com/ReactTraining/history" target="_blank" rel="noopener noreferrer" data-href="https://github.com/ReactTraining/history">历史</a>对象来跟踪位置(URL)。当位置因为导航动作而改变时，子组件(在本例中是<code>&lt;App&gt;</code>)被重新呈现。</p>
<p>大多数情况下，您将使用一个<code>&lt;Link&gt;</code>组件来改变位置。</p>
<h3><code>&lt;Link&gt;</code></h3>
<p>让我们创建一个导航菜单。打开<code>src/App.css</code>添加以下样式:</p>
<pre>ul {
  list-style-type: none;
  padding: 0;
}

.menu ul {
  background-color: #222;
  margin: 0;
}

.menu li {
  font-family: sans-serif;
  font-size: 1.2em;
  line-height: 40px;
  height: 40px;
  border-bottom: 1px solid #888;
}
 
.menu a {
  text-decoration: none;
  color: #fff;
  display: block;
}</pre>
<p>在<code>scr/App.js</code>中，替换<code>render()</code>函数中的最后一个<code>&lt;p&gt;</code>元素，如下所示:</p>
<pre>render() {
  return (
    &lt;div className="App"&gt;
      &lt;header className="App-header"&gt;
        &lt;img src={logo} className="App-logo" alt="logo" /&gt;
        &lt;h1 className="App-title"&gt;Welcome to React&lt;/h1&gt;
      &lt;/header&gt;
      &lt;div className="menu"&gt;
          &lt;ul&gt;
            &lt;li&gt; &lt;Link to="/"&gt;Home&lt;/Link&gt; &lt;/li&gt;
            &lt;li&gt; &lt;Link to="/messages"&gt;Messages&lt;/Link&gt; &lt;/li&gt;
            &lt;li&gt; &lt;Link to="/about"&gt;About&lt;/Link&gt; &lt;/li&gt;
          &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}</pre>
<p>不要忘记导入文件顶部的<code>&lt;Link&gt;</code>组件:</p>
<pre>import {
Link
} from 'react-router-dom'</pre>
<p>在浏览器中，您应该会看到类似这样的内容:</p>
<p><img data-attachment-id="61340" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-link-example-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output.jpeg" data-orig-size="720,272" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM: &lt;Link&gt; example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output-300x113.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output.jpeg" decoding="async" class="aligncenter size-full wp-image-61340 jetpack-lazy-image" src="../Images/7141833f38c62ba037b5e8d4b2d3c32b.png" alt="React Router DOM: &lt;Link&gt; Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output.jpeg 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output-300x113.jpeg 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61340" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-link-example-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output.jpeg" data-orig-size="720,272" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM: &lt;Link&gt; example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output-300x113.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61340" src="../Images/7141833f38c62ba037b5e8d4b2d3c32b.png" alt="React Router DOM: &lt;Link&gt; Example" srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output.jpeg 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output-300x113.jpeg 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-link-example-output.jpeg"/></noscript>
<p id="4617" class="graf graf--p graf-after--figure">如你所见，这个JSX电码:</p>
<pre>&lt;ul&gt;
&lt;li&gt; &lt;Link to="/"&gt;Home&lt;/Link&gt; &lt;/li&gt;
&lt;li&gt; &lt;Link to="/messages"&gt;Messages&lt;/Link&gt; &lt;/li&gt;
&lt;li&gt; &lt;Link to="/about"&gt;About&lt;/Link&gt; &lt;/li&gt;
&lt;/ul&gt;</pre>
<p>生成以下HTML代码:</p>
<pre>&lt;ul&gt;
&lt;li&gt; &lt;a href="/"&gt;Home&lt;/a&gt; &lt;/li&gt;
&lt;li&gt; &lt;a href="/messages"&gt;Messages&lt;/a&gt; &lt;/li&gt;
&lt;li&gt; &lt;a href="/about"&gt;About&lt;/a&gt; &lt;/li&gt;
&lt;/ul&gt;</pre>
<p>然而，这些并不是常规的锚元素。他们在不刷新页面的情况下更改了URL。测试一下。</p>
<p>现在给JSX代码添加一个<code>&lt;a&gt;</code>元素，并再次测试:</p>
<pre>&lt;ul&gt;
&lt;li&gt; &lt;Link to="/"&gt;Home&lt;/Link&gt; &lt;/li&gt;
&lt;li&gt; &lt;Link to="/messages"&gt;Messages&lt;/Link&gt; &lt;/li&gt;
&lt;li&gt; &lt;Link to="/about"&gt;About&lt;/Link&gt; &lt;/li&gt;
&lt;li&gt;
    &lt;a href="/messages"&gt;Messages (with a regular anchor element)&lt;/a&gt; 
  &lt;/li&gt;
&lt;/ul&gt;</pre>
<p>你注意到不同了吗？</p>
<h3><code>&lt;Route&gt;</code></h3>
<p>现在，当点击一个链接时，URL会改变，但UI不会。让我们解决这个问题。</p>
<p>我将为每条路线创建三个组件。首先，<code>src/component/Home.js</code>为路线<code>/</code>:</p>
<pre>import React from 'react';

const Home = () =&gt; (
  &lt;div&gt;
    &lt;h2&gt;Home&lt;/h2&gt;
    My Home page!
  &lt;/div&gt;
);

export default Home;</pre>
<p>然后，<code>src/component/Messages.js</code>为路线<code>/messages</code>:</p>
<pre>import React from 'react';

const Messages = () =&gt; (
  &lt;div&gt;
    &lt;h2&gt;Messages&lt;/h2&gt;
    Messages
  &lt;/div&gt;
);

export default Messages;</pre>
<p>最后，<code>src/component/About.js</code>为路线<code>/about</code>:</p>
<pre>import React from 'react';

const About = () =&gt; (
  &lt;div&gt;
    &lt;h2&gt;About&lt;/h2&gt;
    This example shows how to use React Router!
  &lt;/div&gt;
);

export default About;</pre>
<p>要指定对应于每个组件的URL，您可以按以下方式使用<code><a class="markup--anchor markup--p-anchor" href="https://reacttraining.com/react-router/web/api/Route" target="_blank" rel="noopener noreferrer" data-href="https://reacttraining.com/react-router/web/api/Route">&lt;Route&gt;</a></code>:</p>
<pre>&lt;Route path="/" component={Home}/&gt;
&lt;Route path="/messages" component={Messages}/&gt;
&lt;Route path="/about" component={About}/&gt;</pre>
<p>对于其他路由器库(甚至在React Router的早期版本中)，您必须在一个特殊的文件中定义这些路由，或者至少在您的应用程序之外定义。</p>
<p>这不适用于React路由器4。这些组件可以放在路由器内部的任何地方，关联的组件将在该位置呈现，就像任何其他组件一样。</p>
<p>注:最新稳定版本为<a href="https://github.com/ReactTraining/react-router/releases/tag/v5.2.0" target="_blank" rel="noopener"> React路由器v5.2.0 </a>，发布于2020年5月11日。<a href="https://github.com/ReactTraining/react-router/releases/tag/v6.0.0-beta.0" target="_blank" rel="noopener"> React路由器v.6.0.0 </a>目前处于测试阶段。更多信息，请查看<a href="https://github.com/ReactTraining/react-router/releases" target="_blank" rel="noopener"> React路由器的版本历史</a>。</p>
<p>因此在<code>src/App.js</code>中，导入所有这些组件并在菜单后添加一个部分:</p>
<pre>// …
import {
  Route,
  Link
} from 'react-router-dom'

import Home from './components/Home';
import About from './components/About';
import Messages from './components/Messages';

class App extends Component {
  render() {
    return (
      &lt;div className="App"&gt;
        ...
        &lt;div className="menu"&gt;
            ...
        &lt;/div&gt;
        &lt;div className="App-intro"&gt;
          &lt;Route path="/" component={Home}/&gt;
          &lt;Route path="/messages" component={Messages}/&gt;
          &lt;Route path="/about" component={About}/&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
}</pre>
<p>在浏览器中，您应该会看到类似这样的内容:</p>
<p><img data-attachment-id="61342" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-route-example-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output.jpeg" data-orig-size="720,297" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM example: &lt;Route&gt;" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output-300x124.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output.jpeg" decoding="async" class="aligncenter size-full wp-image-61342 jetpack-lazy-image" src="../Images/d07288364154fce27882f98109f6200b.png" alt="React Router DOM Example: &lt;Route&gt;" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output.jpeg 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output-300x124.jpeg 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61342" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-route-example-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output.jpeg" data-orig-size="720,297" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM example: &lt;Route&gt;" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output-300x124.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61342" src="../Images/d07288364154fce27882f98109f6200b.png" alt="React Router DOM Example: &lt;Route&gt;" srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output.jpeg 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output-300x124.jpeg 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-output.jpeg"/></noscript>
<p>然而，看看当你走其他路线时会发生什么:</p>
<p><img data-attachment-id="61344" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-route-example-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-2.gif" data-orig-size="720,359" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM example: &lt;Route&gt;" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-2-300x150.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-2.gif" decoding="async" class="aligncenter size-full wp-image-61344 jetpack-lazy-image" src="../Images/caf9aa34121d3c9b1643beaed347280c.png" alt="React Router DOM Example: &lt;Route&gt;" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-2.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-2.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61344" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-route-example-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-2.gif" data-orig-size="720,359" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM example: &lt;Route&gt;" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-2-300x150.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-2.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61344" src="../Images/caf9aa34121d3c9b1643beaed347280c.png" alt="React Router DOM Example: &lt;Route&gt;" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-route-example-2.gif"/></noscript>
<p>默认情况下，路由是包含性的；多个<code>&lt;Route&gt;</code>组件可以同时匹配URL路径和渲染。</p>
<p>路由是React路由器中最重要的概念。下一节我们来说说路线。</p>
<h2 id="understanding-routes">了解路线</h2>
<p><code>&lt;Route&gt;</code>组件的匹配逻辑被委托给<a class="markup--anchor markup--p-anchor" href="https://github.com/pillarjs/path-to-regexp" target="_blank" rel="noopener noreferrer" data-href="https://github.com/pillarjs/path-to-regexp"> path-to-regexp </a>库。我鼓励你检查这个库的所有选项和修改器，并用<a class="markup--anchor markup--p-anchor" href="http://forbeslindesay.github.io/express-route-tester/" target="_blank" rel="noopener noreferrer" data-href="http://forbeslindesay.github.io/express-route-tester/">快速路线测试器</a>进行现场测试。</p>
<p>在前面的例子中，由于<code>/message</code>和<code>/about</code>路径也包含字符<code>/</code>，它们也被匹配和渲染。</p>
<p>通过这种行为，您可以通过声明不同的组件属于相同(或相似)的路径来显示它们。</p>
<p>解决方法不止一个。</p>
<p>第一种方法使用<code>exact</code>属性来呈现组件，前提是定义的路径与URL路径完全匹配:</p>
<pre>&lt;Route exact path="/" component={Home}/&gt;</pre>
<p>如果您测试该应用程序，您将会看到一切正常。</p>
<p>路线<code>/message</code>和<code>/about</code>仍在评估中，但它们现在不是<code>/</code>的精确匹配。</p>
<p>但是，如果我们知道只选择一条路线，我们可以使用一个<code><a class="markup--anchor markup--p-anchor" href="https://reacttraining.com/react-router/web/api/Switch" target="_blank" rel="noopener noreferrer" data-href="https://reacttraining.com/react-router/web/api/Switch">&lt;Switch&gt;</a></code>组件来只呈现与位置匹配的第一条路线:</p>
<pre>// …
import {
  Route,
  Link,
  Switch
} from 'react-router-dom'
// …
class App extends Component {
  render() {
    return (
      …
      &lt;div className="App-intro"&gt;
          &lt;Switch&gt;
            &lt;Route exact path="/" component={Home} /&gt;
            &lt;Route path="/messages" component={Messages} /&gt;
            &lt;Route path="/about" component={About} /&gt;
          &lt;/Switch&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
}</pre>
<p><code>&lt;Switch&gt;</code>将使路径匹配排他而非包含(就像你在使用<code>&lt;Route&gt;</code>组件一样)。</p>
<p>例如，即使您复制了<code>Messages</code>组件的路线:</p>
<pre>&lt;Switch&gt;
  &lt;Route exact path="/" component={Home} /&gt;
  &lt;Route path="/messages" component={Messages} /&gt;
  &lt;Route path="/messages" component={Messages} /&gt;
  &lt;Route path="/about" component={About} /&gt;
&lt;/Switch&gt;</pre>
<p>当访问<code>/messages</code>路径时，<code>Messages</code>组件只会被渲染一次。</p>
<p>但是，请注意，您仍然需要为<code>/</code>路径指定确切的属性，否则，<code>/message</code>和<code>/about</code>也将匹配<code>/</code>，并且<code>Home</code>组件将总是被渲染(因为这是第一个匹配的路径):</p>
<p><img data-attachment-id="61345" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-understanding-routes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes.gif" data-orig-size="720,309" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM: Routes example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-300x129.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes.gif" decoding="async" class="aligncenter size-full wp-image-61345 jetpack-lazy-image" src="../Images/5172388385e27f89e40e1ddd5dd43e13.png" alt="React Router DOM: Routes Example" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61345" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-understanding-routes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes.gif" data-orig-size="720,309" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM: Routes example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-300x129.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61345" src="../Images/5172388385e27f89e40e1ddd5dd43e13.png" alt="React Router DOM: Routes Example" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes.gif"/></noscript>
<p>但是当输入一个不存在的路径时会发生什么呢？例如<code><a href="http://localhost:3000/non-existent" rel="nofollow">http://localhost:3000/non-existent</a></code>:</p>
<p><img data-attachment-id="61347" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-understanding-routes-nonexistent-path/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path.jpeg" data-orig-size="720,261" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM: Routes example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path-300x109.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path.jpeg" decoding="async" class="aligncenter size-full wp-image-61347 jetpack-lazy-image" src="../Images/78aa4584f724acd3517763a725a0d76c.png" alt="React Router DOM: Routes Example (Nonexistent Path)" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path.jpeg 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path-300x109.jpeg 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61347" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-understanding-routes-nonexistent-path/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path.jpeg" data-orig-size="720,261" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM: Routes example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path-300x109.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61347" src="../Images/78aa4584f724acd3517763a725a0d76c.png" alt="React Router DOM: Routes Example (Nonexistent Path)" srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path.jpeg 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path-300x109.jpeg 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-nonexistent-path.jpeg"/></noscript>
<p>在常规的JavaScript <code>switch</code>语句中，您将为这种情况指定一个默认子句，对吗？</p>
<p>在一个<code>&lt;Switch&gt;</code>组件中，这个默认行为可以用一个<code><a class="markup--anchor markup--p-anchor" href="https://reacttraining.com/react-router/web/api/Redirect" target="_blank" rel="noopener noreferrer" data-href="https://reacttraining.com/react-router/web/api/Redirect">&lt;Redirect&gt;</a></code>组件实现:</p>
<pre>// …
import {
  Route,
  Link,
  Switch,
  Redirect
} from 'react-router-dom'
// …
class App extends Component {
  render() {
    return (
      …
      &lt;div className="App-intro"&gt;
          &lt;Switch&gt;
            &lt;Route exact path="/" component={Home} /&gt;
            &lt;Route path="/messages" component={Messages} /&gt;
            &lt;Route path="/about" component={About} /&gt;
            &lt;Redirect to="/" /&gt;
          &lt;/Switch&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
}</pre>
<p>该组件将导航到覆盖历史堆栈中当前位置的新位置:</p>
<p><img data-attachment-id="61348" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-understanding-routes-override/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-override.gif" data-orig-size="720,317" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM: Routes example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-override-300x132.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-override.gif" decoding="async" class="aligncenter size-full wp-image-61348 jetpack-lazy-image" src="../Images/f5b9e2d6580640faf7873d9a3fc9c678.png" alt="React Router DOM: Routes Example" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-override.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-override.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61348" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-understanding-routes-override/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-override.gif" data-orig-size="720,317" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM: Routes example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-override-300x132.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-override.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61348" src="../Images/f5b9e2d6580640faf7873d9a3fc9c678.png" alt="React Router DOM: Routes Example" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-understanding-routes-override.gif"/></noscript>
<p>现在，让我们来看看更高级的嵌套路由。</p>
<h2 id="nested-routes">嵌套路由</h2>
<p>嵌套路由类似于<code>/about/react</code>。</p>
<p>假设对于消息部分，我们想要显示一个消息列表。每一个都以类似于<code>/messages/1</code>、<code>/messages/2</code>等等的链接的形式，将你带到一个详细的页面。</p>
<p>您可以通过修改<code>Messages</code>组件开始，以这种方式为五个示例消息生成链接:</p>
<pre>import React from 'react';

import {
  Link
} from 'react-router-dom';

const Messages = () =&gt; (
  &lt;div&gt;
    &lt;ul&gt;
    {
        [...Array(5).keys()].map(n =&gt; {
            return &lt;li key={n}&gt;
                    &lt;Link to={`messages/${n+1}`}&gt;
                      Message {n+1}
                    &lt;/Link&gt;
                  &lt;/li&gt;;
        })
    }
    &lt;/ul&gt;
  &lt;/div&gt;
);

export default Messages;</pre>
<p>这应该显示在浏览器中:</p>
<p><img data-attachment-id="61349" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-nested-routes-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example.jpeg" data-orig-size="720,322" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM nested routes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-300x134.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example.jpeg" decoding="async" class="aligncenter size-full wp-image-61349 jetpack-lazy-image" src="../Images/8456f13a2937e2e4b95793255d6e3f9d.png" alt="React Router DOM Nested Routes" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example.jpeg 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-300x134.jpeg 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61349" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-nested-routes-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example.jpeg" data-orig-size="720,322" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="React Router DOM nested routes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-300x134.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61349" src="../Images/8456f13a2937e2e4b95793255d6e3f9d.png" alt="React Router DOM Nested Routes" srcset="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example.jpeg 720w, https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-300x134.jpeg 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example.jpeg"/></noscript>
<p>要理解如何实现这一点，您需要知道当路由器呈现一个组件时，有三个属性作为参数传递:</p>

<p>出于我们的目的，我们将使用<code>match</code>参数。</p>
<p>当路由器的路径和URL位置匹配时，就会创建一个包含URL和路径信息的<code>match</code>对象。以下是该对象的属性:</p>
<ul>
<li><code>params</code>:从参数对应的URL解析出的键/值对</li>
<li><code>isExact</code> : <code>true</code>如果匹配了整个URL(没有尾随字符)</li>
<li><code>path</code>:用于匹配的路径模式</li>
<li><code>url</code>:URL的匹配部分</li>
</ul>
<p>这样，在<code>Messages</code>组件中，我们可以析构properties对象来使用<code>match</code>对象:</p>
<pre>const Messages = ({ match }) =&gt; (
&lt;div&gt;
...
&lt;/div&gt;
)</pre>
<p>用<code>match</code>对象的匹配URL替换<code>/messages</code>:</p>
<pre>const Messages = ({ match }) =&gt; (
  &lt;div&gt;
    &lt;ul&gt;
    {
        [...Array(5).keys()].map(n =&gt; {
            return &lt;li key={n}&gt;
                    &lt;Link to={`${match.url}/${n+1}`}&gt;
                      Message {n+1}
                    &lt;/Link&gt;
                  &lt;/li&gt;;
        })
    }
    &lt;/ul&gt;
  &lt;/div&gt;
);</pre>
<p>这样一来，如果路径发生变化，您也能得到保护。</p>
<p>在消息列表之后，声明一个带有参数的<code>&lt;Route&gt;</code>组件来捕获消息标识符:</p>
<pre>import Message from './Message';
//…

const Messages = ({ match }) =&gt; (
  &lt;div&gt;
    &lt;ul&gt;
       ...
    &lt;/ul&gt;
    &lt;Route path={`${match.url}/:id`} component={Message} /&gt;
  &lt;/div&gt;
);</pre>
<p>此外，您可以通过以下方式强制使用数字ID:</p>
<pre>&lt;Route path={`${match.url}/:id(\\d+)`} component={Message} /&gt;</pre>
<p>如果有匹配，就会呈现出<code>Message</code>组件。下面是它的定义:</p>
<pre>import React from 'react';

const Message = ({ match }) =&gt; (
  &lt;h3&gt;Message with ID {match.params.id}&lt;/h3&gt;
);

export default Message;</pre>
<p>在该组件中，显示消息的ID。注意ID是如何从<code>match.params</code>对象中提取出来的，使用的名称与路径中定义的名称相同。</p>
<p>如果您打开浏览器，您应该会看到类似下面的内容:</p>
<p><img data-attachment-id="61351" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-nested-routes-example-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-2.gif" data-orig-size="720,346" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM nested routes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-2-300x144.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-2.gif" decoding="async" class="aligncenter size-full wp-image-61351 jetpack-lazy-image" src="../Images/0727ed6f33e408b6c549d53dac33a7b1.png" alt="React Router DOM nested routes" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-2.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-2.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="61351" data-permalink="https://blog.logrocket.com/react-router-dom-tutorial-examples/react-router-dom-nested-routes-example-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-2.gif" data-orig-size="720,346" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Router DOM nested routes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-2-300x144.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-2.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-61351" src="../Images/0727ed6f33e408b6c549d53dac33a7b1.png" alt="React Router DOM nested routes" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/11/react-router-dom-nested-routes-example-2.gif"/></noscript>
<p>但是请注意，对于messages部分的初始页面(<code>/messages</code>)或者如果您输入了URL和无效的标识符(如<code>/messages/a</code>)，列表下不会显示任何内容。留个口信会很好，你觉得呢？</p>
<p>您可以为这种情况添加另一个路由，但是我们可以使用<code>&lt;Route&gt;</code>组件的<code>render</code>属性，而不是创建另一个组件来显示消息:</p>
<pre>&lt;Route
  path={match.url}
  render={() =&gt; &lt;h3&gt;Please select a message&lt;/h3&gt;
/&gt;</pre>
<p>您可以通过使用<code>&lt;Route&gt;</code>的以下属性之一来定义渲染的内容:</p>
<ul>
<li><code><a class="markup--anchor markup--li-anchor" href="https://reacttraining.com/web/api/Route/component" target="_blank" rel="noopener noreferrer" data-href="https://reacttraining.com/web/api/Route/component">component</a></code>渲染一个组件</li>
<li><code><a class="markup--anchor markup--li-anchor" href="https://reacttraining.com/web/api/Route/render-func" target="_blank" rel="noopener noreferrer" data-href="https://reacttraining.com/web/api/Route/render-func">render</a></code>，返回要渲染的元素或组件的函数</li>
<li><code><a class="markup--anchor markup--li-anchor" href="https://reacttraining.com/web/api/Route/children-func" target="_blank" rel="noopener noreferrer" data-href="https://reacttraining.com/web/api/Route/children-func">children</a></code>，也是返回要渲染的元素或组件的函数。但是，无论路径是否匹配，都会呈现返回的元素</li>
</ul>
<p>最后，我们可以将路线包装在一个<code>&lt;Switch&gt;</code>组件中，以保证两者中只有一个匹配:</p>
<pre>import {
  Route,
  Link,
  Switch
} from 'react-router-dom';

const Messages = ({ match }) =&gt; (
  &lt;div&gt;
    &lt;ul&gt;
     ...
    &lt;/ul&gt;
    &lt;Switch&gt;
      &lt;Route path={`${match.url}/:id(\\d+)`} component={Message} /&gt;
      &lt;Route
        path={match.url}
        render={() =&gt; &lt;h3&gt;Please select a message&lt;/h3&gt;}
      /&gt;
    &lt;/Switch&gt;
  &lt;/div&gt;
);</pre>
<p>然而，你必须小心。如果首先声明呈现消息的路由:</p>
<pre> &lt;Switch&gt;
      &lt;Route
        path={match.url}
        render={() =&gt; &lt;h3&gt;Please select a message&lt;/h3&gt;}
      /&gt;
      &lt;Route path={`${match.url}/:id(\\d+)`} component={Message} /&gt;
&lt;/Switch&gt;</pre>
<p>组件<code>Message</code>将永远不会被渲染，因为像<code>/messages/1</code>这样的路径将匹配路径<code>/messages</code>。</p>
<p>如果您以此顺序声明路线，添加<code>exact</code>以避免这种行为:</p>
<pre>&lt;Switch&gt;
    &lt;Route
      exact
      path={match.url}
      render={() =&gt; &lt;h3&gt;Please select a message&lt;/h3&gt;}
    /&gt;
    &lt;Route path={`${match.url}/:id(\\d+)`} component={Message} /&gt;
&lt;/Switch&gt;</pre>
<h2 id="how-to-set-the-default-route-in-react">如何在React中设置默认路由</h2>
<p>假设我们在应用程序中遇到一条不存在的路线/路径。我们可以定制一个404页面，用简洁的UI告诉用户他们请求的页面不可用，而不是让浏览器显示错误。</p>
<p>它可能看起来像这样:</p>
<pre>&lt;Switch&gt;
  &lt;Route exact path="/" component={Home} /&gt;
  &lt;Route path="/messages" component={Messages} /&gt;
  &lt;Route path="/about" component={About} /&gt;
  &lt;Route component={NotFound} /&gt;
&lt;/Switch&gt;
</pre>
<p>当没有其他路线匹配所请求的路径时，<code>&lt;Route component={NotFound} /&gt;</code>显示<code>NotFound</code>组件。它被特意设置在<code>Switch</code>的底部，所以它将是最后匹配的；放在开头会导致<code>NotFound</code>页面一直呈现。</p>
<p>现在，假设我们不喜欢使用一个<code>NotFound</code>页面来显示一个不存在的页面。相反，我们希望设置一个缺省页面，以便在遇到不存在的路由时加载。</p>
<p>回到上面的例子，我们希望我们的<code>Home</code>页面是默认页面。当用户导航到我们应用程序中不存在的路径或路线时，将显示此<code>Home</code>页面。所以显示的不是404页面，而是普通页面。</p>
<h3>使用星号(<code>*</code>)</h3>
<p>要在React路由器中设置默认页面，请将星号(<code>*</code>)传递给<code>Route</code>的<code>path</code>属性:</p>
<pre>&lt;Switch&gt;
  &lt;Route exact path="/" component={Home} /&gt;
  &lt;Route path="/messages" component={Messages} /&gt;
  &lt;Route path="/about" component={About} /&gt;
  &lt;Route path="*" component={Home} /&gt;
&lt;/Switch&gt;
</pre>
<p>这个<code>&lt;Route path="*" component={Home} /&gt;</code>以一种特殊的方式处理不存在的路线。当遇到一条不存在的路径时，<code>path</code>属性上的星号会调用该路由。然后显示<code>Home</code>组件。</p>
<p><code>Home</code>现在被设置为默认页面。如果我们导航到<code>localhost:3000/planets</code>，那么<code>Home</code>组件将显示在<code>localhost:3000/planets</code> URL下。该路径在我们的路由配置中不存在，因此React Router显示我们的默认页面，即<code>Home</code>页面。</p>
<h3>使用<code>Redirect</code></h3>
<p>我们可以使用另一种技术在React路由器中设置默认页面:</p>
<pre>&lt;Switch&gt;
  &lt;Route exact path="/" component={Home} /&gt;
  &lt;Route path="/messages" component={Messages} /&gt;
  &lt;Route path="/about" component={About} /&gt;
  &lt;Redirect to="/" /&gt;
&lt;/Switch&gt;
</pre>
<p>当在我们的应用程序中找到一个不存在的路径时，这个方法将URL重定向到<code>/</code>，并将路径<code>/</code>和<code>Home</code>设置为我们的默认页面。</p>
<p>因此，如果我们在浏览器中导航到<code>localhost:3000/planets</code>，React路由器将重定向到<code>localhost:3000</code>并显示<code>Home</code>组件，因为路由<code>localhost:3000/planets</code>在我们的路由配置中不存在。</p>
<h3>使用不带路径属性的<code>Router</code></h3>
<p>我们之前已经这样做了，但是这一次我们将取消<code>Notfound</code>页面并设置<code>Route</code>来调用我们的默认组件。</p>
<pre>&lt;Switch&gt;
  &lt;Route exact path="/" component={Home} /&gt;
  &lt;Route path="/messages" component={Messages} /&gt;
  &lt;Route path="/about" component={About} /&gt;
  &lt;Route component={Home} /&gt;
&lt;/Switch&gt;
</pre>
<p>我们希望<code>Home</code>组件成为我们的默认组件。当没有匹配的路线时，运行<code>&lt;Route component={Home} /&gt;</code>,而显示<code>Home</code>组件。</p>
<h2>结论</h2>
<p>简而言之，路由器可以让你的应用UI和URL保持同步。</p>
<p>React Router是React最流行的路由器库，从版本4开始，React Router declarative使用与React相同风格的组件定义路由。</p>
<p id="f43f" class="graf graf--p graf-after--p">在这篇文章中，您已经学习了如何设置React路由器，它最重要的组件，路由如何工作，以及如何使用路径参数构建动态嵌套路由。</p>
<p id="80a1" class="graf graf--p graf-after--p">但是还有很多要学的。例如，有一个<a class="markup--anchor markup--p-anchor" href="https://reacttraining.com/react-router/web/api/NavLink" target="_blank" rel="noopener noreferrer" data-href="https://reacttraining.com/react-router/web/api/NavLink"> &lt;导航链接&gt; </a>组件，它是<code>&lt;Link&gt;</code>组件的特殊版本，添加了属性<code>activeClassName</code>和<code>activeStyle</code>，以便在链接匹配位置URL时为您提供样式选项。</p>
<p id="f608" class="graf graf--p graf-after--p graf--trailing">官方文档涵盖了一些基本示例和更高级的交互式用例。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>