# Next.js vs. Gatsby:比较 React 框架

> 原文：<https://blog.logrocket.com/next-js-vs-gatsby-comparing-react-frameworks/>

## 介绍

Next.js vs. Gatsby 是一场历史性的对决……至少对 React web 框架来说是这样。

自诞生以来，React 已经发展到不再仅仅用于前端 web 开发的地步。它现在被用来开发:

*   桌面应用以及电子
*   基于浏览器的简单游戏
*   使用 React 360 的 VR 应用
*   使用 React Native 的移动应用程序

React 在网络之外的广度和深度都有所增长。React 上创建了无数的框架/库来增强开发人员的体验和开发速度。

现在，围绕 React 的整个社区和项目被亲切地称为 React 生态系统。今天，我们将考察两个最著名的 React 框架:Gatsby 和 Next.js。

## 盖茨比是什么？

Gatsby 是一个现代网络框架[，建立在 React 和 GraphQL](https://blog.logrocket.com/how-graphql-boosts-performance-in-gatsby/) 之上。该框架的主要焦点是内置性能:默认情况下，它创建的网站速度极快。它创建了一个静态构建来使网站更快。这就是 Gatsby 作为另一个静态站点生成器经常被忽视的原因之一。

尽管 Gatsby 是建立在 React 之上的，但它有自己的生态系统，包括插件、主题和启动器。默认情况下，它是可扩展的。它在构建时作为静态站点构建，并作为简单的 HTML 页面托管。

盖茨比的[快速](https://www.gatsbyjs.org/tutorial/)[–](https://www.gatsbyjs.org/tutorial/)[入门教程](https://www.gatsbyjs.org/tutorial/) [s](https://www.gatsbyjs.org/tutorial/) 是一个绝佳的入门地方。

## Next.js 是什么？

[Next.js](https://nextjs.org/) 是另一个流行的 React 框架。Next.js 的想法是创建服务器渲染的 React 应用程序，几乎不需要配置。性能不是 Next.js 的主要吸引力；更确切地说，这是[改善了开发者体验](https://blog.logrocket.com/whats-new-in-next-js-10/)并减少了创建成熟的、SSR 友好的 web 应用程序的麻烦。

Next.js 也支持静态构建，但这不是主要重点。当我们浏览用例时，我们将讨论这些限制。[下一个](https://nextjs.org/learn/basics/getting-started) [。js 入门指南](https://nextjs.org/learn/basics/getting-started)是开始学习 Next.js 的好地方。

## 了解 SSR 和静态站点

默认情况下，服务器端呈现的应用程序是 SEO 友好的。服务器端呈现(SSR)速度更快，因为它不等待浏览器加载 JS 来显示内容。SSR 每次都需要合适的服务器来发送响应。在我们的例子中，Next.js 使用基于节点的服务器提供服务。

另一方面，静态站点更快，因为它们从服务器提供静态 HTML 和 CSS，在运行时没有任何处理。静态网站将通过 CDN 缓存，并比动态网站提供更快的服务。如果站点只有静态内容，静态站点也是 SEO 友好的。

## Next.js vs. Gatsby:相似之处

尽管它们解决的问题不同，但 Gatsby 和 Next.js 有很多相似之处。

如果您已经知道如何构建基于 React 的站点，那么这两种框架的学习曲线都不会很陡，而且开发人员的体验对这两种框架来说都是第一位的。我们可以非常快速地设置和运行，并且在简单的应用程序上添加更多功能也很容易，因为两个框架都提供了全面的文档。两者都支持热重装，以获得更快的开发体验。

缓存和性能是内置的。我们不需要担心代码拆分和优化代码；这是可行的，默认情况下，它们根据每个页面路径进行代码分割。两个框架都有内置的路由来创建新页面。

当您滚动页面时，它们通过异步预取后续页面的链接来执行智能页面加载。灯塔对精心打造的 Gatsby 和 Next.js 网站的评分将非常突出。

是 Gatsby 还是 Next.js 创建更快的 web 应用取决于用例。我们将采用一种不同的方法，根据手头的问题来决定哪个框架是更好的选择，而不是讨论理论上的利弊，这在网络上很容易找到。

## 用例

我相信赛马的价值。因此，对于这些用例，我们将在 Gatsby 和 Next.js 之间选择最佳选项:

*   简单静态网站
*   大型多用户网站，如 [dev.to](https://dev.to) (实时发布)
*   客户端呈现的应用程序(SPA/MPA)
*   混合 web 应用程序(SPA 和 SSR 在一个应用程序中)

### 简单静态网站 Next.js vs. Gatsby

#### 要求:

*   一个有几十个静态网页的静态网站
*   有些页面经常更新；大部分都没有定期更新
*   它应该支持搜索引擎优化
*   任何访问该网站的人都会看到相同的内容
*   更新不需要反映实时，因为它是由内部团队更新的，而不是由访问用户更新的。

#### 示例:

*   任何静态网站(公司、服务网站、信息网站)
*   任何产品网站的公共页面
*   个人博客网站
*   由可预测数量的私人用户管理的小型博客网站(例如公司成员)

在这里，页面的数量是可预测的，不需要一直通过服务器呈现，因为内容将是静态的，对所有用户都是相同的。盖茨比就是为这类网站量身定做的。你可以通过 Next.js 创建这样的静态网站，也可以使用它新引入的静态导出功能。

尽管如此，Gatsby 将会在这方面大获全胜，因为它提供了对插件的支持，可以从几乎所有的 CMS、数据库、REST APIs 和 GraphQL 中获取内容。它还有支持不同数据格式的插件，比如 JSON、Markdown 和 MDX(JSX 的 Markdown)。它有很容易的选项来建立和托管网站的任何地方。

它隔离了数据和网站，因此即使非程序员也可以在其他地方编辑内容，并且在构建时它仍将被编译为站点。

Next.js 不会处理任何与你的数据相关的东西。您需要构建自己的方式来获取数据，并将其显示为网站。您可以构建一个静态站点，但是团队中的非程序员需要您的帮助来更改或更新内容。这是任何 CMS 都要解决的大问题，Gatsby 充分利用了这一点，通过插件轻松连接到任何 CMS。

#### 判决:盖茨比

Gatsby 是我们构建更快、性能更好的静态网站的赢家。开发人员的体验是得出这一结论的关键:

*   开发者可以专注于网站的布局和风格
*   Gatsby 将数据分开，并允许非开发人员编辑内容
*   Gatsby 还通过广泛的 Gatsby 插件、启动器和主题缩短了开发周期

### Next.js 与 Gatsby 争夺大型多用户网站

#### 要求:

*   由认证用户添加内容的大型网站
*   该网站的内容是公开的，只有某些功能是私人的
*   内容将根据登录用户及其兴趣显示

#### 示例:

*   dev.to，一个由开发者开发的多用户博客网站
*   任何在线论坛

对于这种需求，Next.js 是理想的选择，因为您需要向唯一的登录用户显示动态内容。我们不能用 Gatsby 为每个用户编译静态 HTML(尽管有一个变通办法，我们将在后面的混合网站用例中看到)。SSR 将有助于呈现基于认证的网站。

由于内容是由大量用户创建的，并且随着新用户的加入而增加，所以在构建时将内容编译成静态站点实际上是不可能的。在运行时显示相关内容要容易得多。

对 Gatsby 来说，创建这样的网站的主要缺点是它的构建过程和构建过程所花费的时间。用户通常希望实时看到他们的内容，而不是在构建过程的几分钟后。如果用户数量很高，可能不是几分钟；可能需要几个小时。

* * *

### 更多来自 LogRocket 的精彩文章:

* * *

Gatsby 正在对此进行优化，[已经在其名为 Gatsby Cloud 的商业解决方案中发布了对更快构建的初始支持。但仍然——我们可能需要一段时间才能获得完整的实时增量构建功能，我们也不知道 Gatsby 是否会选择在短期内将该功能作为其开源产品的一部分发布。](https://www.gatsbyjs.org/blog/2019-11-14-announcing-gatsby-cloud/)

#### 判决:Next.js

对于有多个用户访问和编辑内容的网站，最好使用 Next.js 来构建。

*   公共内容需要 SSR
*   内容需要基于用户的动态
*   即使是静态的博客内容也需要实时发布，并可供用户编辑

在这种情况下，构建基于时间的框架不会很好。

### Next.js 与 Gatsby 在客户端渲染应用方面的对比(SPA/MPA)

#### 要求:

*   为您的产品构建一个 web 应用程序，无论是 SPA 还是多页面客户端应用程序
*   只有通过身份验证后，应用程序才可见
*   SEO 不是必须的；整个应用程序是动态的

#### 示例:

*   特雷罗
*   阿萨纳
*   谷歌邮箱
*   和许多其他网络产品

在这里，SEO 不是关键，但速度和用户的快速响应时间是关键。对于这样的网站，盖茨比和 Next Js 之间没有明确的赢家。我们将在下面的细节中看到两者在开发这样的 web 应用程序时是如何发挥作用的。

#### 动态 web 应用的 Gatsby

到目前为止，我们已经说过 Gatsby 在构建时构建并服务于静态站点。这真的只对了一半。为什么？

尽管 Gatsby 服务于静态站点，但它也在客户端的页面上重新融合了 React。所以你可以使用 Gatsby 创建任何客户端应用程序，就像 create-react-app (CRA)一样。那么为什么选择盖茨比而不是 CRA 呢？

Gatsby 默认支持代码拆分。对于 CRA，你需要自己动手。CRA 也没有内置的机制来支持多页面网络应用。这是可能的，但我们需要手动操作。另一方面，Gatsby 支持多页面应用程序。

现在，考虑一个例子，其中有三组不同的用户，这些用户有三种不同的 UX 设计。

Gatsby 的多页面性质很容易帮助你隔离那些用户，并在 auth 之后将他们发送到相关页面。在 CRA，你需要通过你的路由器来处理。Gatsby 内置了对客户端路由的路由支持。CRA 没有自带路由器实现，但是添加一个并不困难。

在 Gatsby 中，预取后续链接和资产很容易，并使页面加载更快。这样高水平的优化是很难在 CRA 独自实现的。

因此，总而言之，使用 Gatsby 构建客户端呈现的应用程序是完全可能的。所以永远不要把 Gatsby 仅仅看作一个静态的站点生成器——它的作用不止于此。它是构建现代 web 应用程序的完整框架。

#### 动态 web 应用程序的 Next.js

现在让我们看看 Next.js 如何帮助构建现代的动态 web 应用程序。到目前为止，我们知道 Next.js 能够进行 SSR，这是事实，但这并不是它的全部功能。它还在客户端重新水合 React，因此您可以在 Next.js 的基础上构建一个完整的客户端 React 应用程序。

大部分的好处和 Gatsby 一样，但是使用它的 SSR 有几个更多的好处。例如，你可以渲染一个静态网站，在客户端完成所有的逻辑，就像盖茨比应用程序或 CRA 一样。所以技术上，你不需要使用 Next.js 的 SSR 能力；您可以使用 Next.js 构建一个完整的、客户端呈现的 SPA 或多页面应用程序。

Next.js 最大的优势是它提供了两个世界的精华。它具有 SSR 功能以及客户端应用程序功能。它支持基于页面的代码分割，还允许动态导入，根据需要将代码分割成块。

客户端应用程序的 UI 的第一次绘制通常很慢，然后浏览器会更快地处理路由。但有了 SSR，我们可以比任何客户端框架更快地加载以绘制 UI，然后后续页面将通过客户端路径加载。

这样，我们可以在 Next.js 中获得两个世界的好处(即 SSR 和 CSR)。

#### 判决:平局

所以对于动态 web 应用，Gatsby 和 Next.js 都是同样有能力的。Next.js 在 UI 的第一幅画中有点边缘。

> 我和盖茨比的第一手经历棒极了。在我的日常工作中，我们在我们的产品中使用了 Gatsby，这个产品相当复杂，有三组不同的用户。到目前为止，我们非常高兴，与一个八人开发团队一起构建平台的开发人员体验绝对令人敬畏。他们的文档是获得 web 开发知识的极好来源。
> 
> 我们还将 Next.js 用于简单的动态网站(与 Gatsby 应用程序的规模不同)。它同样不错，但在配置上做高级事情有自己的学习曲线。幸运的是，他们的贡献者和医生都非常友好。

### Next.js 与 Gatsby 争夺混合网络应用

#### 示例:

*   推特
*   Reddit
*   堆栈溢出

混合 web 应用程序是我们例子中的最后一种类型。我们已经简要介绍过，Next.js 提供了两个世界的精华，它使用 SSR 呈现页面 UI，然后将数据责任交给客户端 React 应用程序。但是什么时候我们需要这两种功能呢？

如果你在没有登录的情况下查看你的 Twitter 页面，它会通过 SSR 加载最初的推文。如果你向下滚动，它会通过客户端加载下一组推文。但如果你登录，它只是加载应用程序外壳，然后客户端 JavaScript 加载推文内容。

所以在单个应用程序中，它既支持访问者的 SSR，也支持登录用户的 CSR。对于大多数大型社交网络和基于社区的网站来说也是如此。

#### 判决:Next.js

对于不需要 SEO 的混合型 web apps，Gatsby 和 Next.js 都是有能力的。但是对于需要对可公开访问的动态内容进行 SEO 的应用程序，Next.js 是最好的选择。

现在，让我们来看看一个混合 web 应用程序和网站在单个代码库中的不同用例。

你有一个公司网站和一个网络应用产品。你希望用单一的代码库来构建它，而不是作为两个独立的站点。在这种情况下，使用 Next.js 和 Gatsby 也更容易处理。我们可以为公司网站渲染静态页面，为 web 应用程序产品渲染 CSR。同样，我们可以将 SSR 用于网站，将 SSR 和 CSR 结合起来用于 web 应用程序。

## 结论

Gatsby 和 Next.js 都是很棒的框架。我会说两者都是赢家，但这取决于你的项目要求；选择最适合需要的一个。最大的赢家是开发商。他们使用这两种框架的体验是绝对的幸福。

我鼓励你查看他们的文档以获取更多信息。希望你喜欢阅读这篇文章，让我知道你对这两个框架的看法以及你对它们的第一手经验。🤗

## [LogRocket](https://lp.logrocket.com/blg/nextjs-signup) :全面了解生产 Next.js 应用

调试下一个应用程序可能会很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪状态、自动显示 JavaScript 错误、跟踪缓慢的网络请求和组件加载时间感兴趣，

[try LogRocket](https://lp.logrocket.com/blg/nextjs-signup)

.

[![](img/f300c244a1a1cf916df8b4cb02bec6c6.png)](https://lp.logrocket.com/blg/nextjs-signup)[![LogRocket Dashboard Free Trial Banner](img/d6f5a5dd739296c1dd7aab3d5e77eeb9.png)](https://lp.logrocket.com/blg/nextjs-signup)

LogRocket 就像是网络和移动应用的 DVR，记录下你的 Next.js 应用上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket 还可以监控应用程序的性能，报告客户端 CPU 负载、客户端内存使用等指标。

LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。

让您调试 Next.js 应用的方式现代化— [开始免费监控](https://lp.logrocket.com/blg/nextjs-signup)。