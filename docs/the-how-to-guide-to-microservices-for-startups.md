# 创业微服务指南

> 原文：<https://blog.logrocket.com/the-how-to-guide-to-microservices-for-startups/>

你可能已经被告知，微服务和创业公司不走在一起。你可能认为微服务对于一个新产品来说太难了。

这是典型的智慧，但我想挑战它。有了现代工具、最新的行业实践以及便宜便捷的云基础设施(加上一些欺骗)，从微服务开始比从整体开始更容易。

简单的建议是先从整体开始，然后再重构到微服务。但是重构到微服务是一个艰难而又艰辛的过程。如果您预计最终会需要微服务，为什么不从一开始就先使用微服务，从而节省您的时间和痛苦的转换呢？

创业公司可以用微服务。这并不像你想象的那样困难或复杂。

*一家创业公司是否应该使用微服务？默认的答案是*视情况而定*，紧接着是警告*可能不是*。*

但是有许多创业公司和产品肯定可以通过微服务直接进入深水区而受益！如今，使用微服务比以往任何时候都更容易，对于资源有限的初创公司来说，微服务可能是一个不错的选择。

在这篇博文中，我们将看看微服务如何帮助初创公司，并研究一些快捷方式来帮助你快速、廉价地起步。

## 为什么要用微服务？

可伸缩性是使用微服务最明显的好处。微服务应用可扩展到更高的性能和容量，这是支持不断增长的客户群的理想选择。

它们也可以从小型组织扩展到大型组织:随着我们业务的增长，我们可以围绕我们的应用程序发展我们的团队。事实上，我们可以围绕一个不断增长的微服务应用来发展多个团队。

创业公司早期不需要扩展性。当然，每个初创公司都梦想大规模扩展，我们也希望能够做到这一点，但是微服务提供了许多其他好处，这些好处在我们大规模扩展之前就已经开始发挥作用了:

#### 自动化

微服务应用通常大量使用自动化。这可以扩大小团队的生产力，帮助他们以更低的成本在更高的水平上运作，并产生一致、可靠的结果。

#### DevOps 文化

DevOps 文化促进了开发团队中的所有权，通常，开发人员拥有产品直到生产。这消除了对独立运营团队的需求，并且可以真正授权给一个小团队！

#### 现代工具

现代工具套件(如 Docker、Terraform、Kubernetes 等。)就在那里等着被索取。这些工具有很好的文档记录，很好的支持，并且简单易学。(好吧，Kubernetes 很有深度，但是你可能会惊讶于你学习它的基础有多快。)没必要自己造工具；我们可以也应该站在巨人的肩膀上。

#### 云基础设施

我们可以廉价便捷地访问云基础设施。为我们的应用程序创建基础设施从未像现在这样简单(例如，只需点击几下鼠标，就可以在 Azure 上创建一个 Kubernetes 集群)。

#### 细粒度的

微服务的细粒度特性使我们能够对性能、部署、风险以及您能想到的与我们的应用相关的任何其他方面进行精细控制。

#### 灵活性和可扩展性

我们可以不断扩展和升级我们的应用程序，而对我们的客户影响最小。

#### 故障隔离

应用程序一部分的问题不会影响整个应用程序；它可以在降级状态下运行，并继续对我们的客户有用。

#### 技术债务的限制

作为一家初创公司，我们必须走捷径。理解任何特定微服务中的代码都不重要是很有帮助的。每个微服务都很小，几天之内就可以扔出去重写。廉价和肮脏的实现在官方看来是可以的，以后我们可以很容易地替换它们。

这些好处加在一起就是持续快速的发展。快速实验对创业公司来说非常重要——我们正试图找出到底是什么让我们的产品有价值！

* * *

### 更多来自 LogRocket 的精彩文章:

* * *

微服务帮助我们降低实验成本。我们能够更好地快速改变事物，并可靠地部署以获得客户反馈。我们可以更快地对产品的功能集进行三角定位。

## 使用微服务之前

在你决定微服务是否适合你的创业之前，有几件事你需要考虑:

1.  我们是否具备微服务的技术专长和开发能力？一些教育是必要的。您需要了解工具，并且需要理解分布式应用程序的模式。首先学习基础知识(参见我的书 *[引导微服务](http://bit.ly/2o0aDsP)* )，然后在开发应用程序时使用即时学习来填充特定于应用程序的更深层次的知识。
2.  首先验证你的商业模式。这几乎是不言而喻的——无论有没有微服务。在投资开发您的应用程序或基础设施之前，您必须确信您的业务模型(或它的某种变体)将会起作用！
3.  你的产品真的能从微服务中获益吗？您需要定制、可扩展的技术吗？如果你可以想象用更简单的东西(比如 WordPress)来代替微服务，你肯定不想用它！请确保您了解微服务的优势，以及它们如何与您产品的技术要求相交叉。如果你的产品没有真正从微服务中受益，那么你最终会付出代价而得不到回报。

最终，问题是:我需要扩展吗？当然，每个初创公司都希望扩大规模，但这并不意味着你需要定制的、可扩展的技术来实现这一目标。如果不清楚你是否需要微服务，那么你应该用更简单的技术做原型，直到你不再需要它们。

## 创业微服务入门

开始使用微服务并不困难，尽管如果你正在学习并面临陡峭的学习曲线，看起来会很困难。这就是为什么基础教育很重要。只有事后才明白，微服务并不像开始时看起来那么难。

当你开始开发一个新产品时，有许多方法可以通过微服务来节省成本，使开始更便宜，更简单，更方便。让我们来看看一些关键技术，让微服务在创业初期变得更容易获得。

#### 使用行业标准工具

除非别无选择，否则不要自己卷。使用单个 repo 和单个部署管道。将您的整个应用(所有微服务)放在一个存储库中，并使用一个 CD 管道进行部署。

#### 在单个 Kubernetes 集群中托管您的应用程序

这极大地简化了您的安全模型；在网关进行身份验证，并将内部连接视为可信连接。在单个虚拟机(VM)上运行集群。在您需要性能或可靠性之前，您不需要一个以上的虚拟机。

#### 没有复制品

除非您需要冗余或性能，否则无需复制任何微服务。

#### 拥有一台数据库服务器

您应该遵循每个微服务有一个单独的数据库的最佳实践，但是您可以在一个数据库服务器上托管这些数据库。没有必要为每个微服务维护单独的数据库服务器！

#### 做手工测试

在早期，不需要自动化测试。相反，您应该致力于构建一个脚本，该脚本可以尽快有效地将应用程序引导到可测试状态(包括真实的数据库设备)。您希望让手动测试变得简单高效。

你最终会需要自动化测试；如果没有自动化测试，管理大型微服务应用是不可能的。但是，保持自动化测试的领先地位需要付出巨大的努力，并且您在这种基础设施上所做的任何工作都会影响您快速试验那些能够成就或破坏您整个产品的特性的努力。

在早期进行手工测试，然后升级到自动化测试，因为手工测试变得越来越不可行。

#### 自动化部署

尽早投入生产(你需要这样才能把你的应用程序送到客户手中)，并且在投入生产的第一天就有一个自动化的 CD 管道。从很多方面来说，这是你整个申请中最重要的部分！从客户那里获得反馈(这样我们就能生产出合适的产品)是创业公司的生命线。

使用单个代码库和单个部署管道使得微服务的开发更容易管理。这在某种程度上挫败了微服务的意义——拥有可独立部署的服务——但这在创业初期并不重要！

稍后，将您的微服务提取到单独的代码仓库并不困难，每个代码仓库都有自己独立的部署管道。当需要这样做的时候，使用[元工具](https://github.com/mateodelnorte/meta)将独立的库作为单个*元库*并继续像处理单个库一样处理您的应用程序。

## 实现可扩展性的途径

在开始使用微服务时遵循这个建议，您会发现这是使用微服务进行开发的一个更简单、更便宜的切入点。

最终，你需要超越偷工减料；你需要扩大规模。当你这样做时，你会很高兴你的基础是可扩展的微服务及其带来的所有好处。微服务提供了许多灵活的可扩展性途径，以确保您的应用程序能够与您的业务一起增长。

我在一开始就说过，主流观点是在整体服务和微服务之间做出选择。但我不再认为这是简单的二选一。这更像是从一个大的服务到许多小的服务的可能性的滑动尺度。

单片和微服务实际上处于同一光谱的两端，在它们之间有无限多种组合，服务的规模也各不相同。您不必简单地在整体服务或微服务之间做出选择。事实上，你可以选择光谱上的任何一点。

了解你的选择，做出适合你公司的选择。