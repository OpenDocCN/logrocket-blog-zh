<html>
<head>
<title>Comparing Kubernetes across GKE, EKS, and Azure - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>比较GKE、EKS和Azure - LogRocket博客上的Kubernetes</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/comparing-kubernetes-cloud-providers-gke-eks-azure/#0001-01-01">https://blog.logrocket.com/comparing-kubernetes-cloud-providers-gke-eks-azure/#0001-01-01</a></blockquote><div><article class="article-post">
<blockquote><p>编者按:这篇文章最后一次更新是在2021年12月2日，包括了GKE、EKS和微软Azure的最新更新信息。</p></blockquote>
<p>假设您已经决定运行Kubernetes，也称为K8s，您可能对在哪里运行它有一些顾虑和问题。</p>
<p>支持Kubernetes 的云提供商其实有不少<a href="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/">家，但我们将重点关注三家主要的，谷歌的Kubernetes引擎(GKE)、微软的Azure Kubernetes服务(AKS)和亚马逊的Elastic Kubernetes服务(EKS)。</a></p>
<p>在本文中，我将讨论三个主要云提供商的主要特性和功能，提出我认为选择目标平台的一些非常明确的标准:您自己的本地数据中心和虚拟服务提供商。</p>
<h3>目录</h3>

<h2 id="shouldyourunyoursystemonthecloud">你应该在云上运行你的系统吗？</h2>
<p>作为一个模块化、灵活且可扩展的平台，您可以在第三方数据中心、任何流行的云提供商甚至跨多个云提供商部署K8s。当然，正确的做法取决于你独特的项目。让我们考虑以下场景。</p>
<p>首先，假设您在本地或第三方数据中心运行您的系统。您在定制基础架构上投入了大量时间、金钱和培训。随着时间的推移，自行构建基础架构的挑战变得越来越沉重。</p>
<p>或者，您在一个云提供商上运行您的非Kubernetes系统，但是您想从K8s的优势中获益。</p>
<p>您会注意到，在这两个场景中，我都没有提到容器。如果你已经集装箱化，对你有好处！如果没有，就当是入场费吧。</p>
<h3>本地或第三方数据中心</h3>
<p>您可能有很好的理由在您严密控制的环境中运行，例如，安全性、法规、遵从性、性能或成本。在这种情况下，云提供商可能会失败。但是，你仍然可以通过自己运行它来获得K8s的好处。因为您已经在做了，所以您拥有管理底层基础架构的专业知识、技能和经验。</p>
<p>但是，如果您选择投资您的内部基础架构，或者您跨多个虚拟服务提供商部署，仅仅因为您在云成为企业的可靠解决方案之前就开始了，那就另当别论了。</p>
<p>你有机会在一个复杂的镜头中升级一切。您可以切换到云中的托管基础设施，将您的系统打包到容器中，并使用K8s对它们进行编排。</p>
<h3>你已经在云端了</h3>
<p>在第二个场景中，选择运行由您的云提供商管理的K8s可能是显而易见的，因为您已经在云中运行了。K8s让您有机会用一种流畅的体验来取代您必须构建、集成和维护的许多管理层、监控层和安全性层，这种体验在Kubernetes每次发布另一个版本时都会得到改进。</p>
<p>现在我们已经回顾了Kubernetes的一些基础知识，让我们来看看我们之前列出的三个云提供商。</p>
<h2 id="googlekubernetesenginegke">谷歌Kubernetes引擎(GKE)</h2>
<h3>GKE一体化</h3>
<p>K8s来自谷歌，使<a href="https://cloud.google.com/kubernetes-engine"> GKE成为谷歌管理Kubernetes </a>的官方方法。Google SREs管理K8s控制面板并提供自动升级。因为谷歌影响了K8s，并从第一天起就将其作为谷歌云平台的容器编排解决方案，所以GKE提供最佳集成是有道理的。</p>
<p>同样，你可以相信GKE是最新的供应商。与其他云提供商相比，GKE对K8s的新特性和功能进行了更多的测试。</p>
<h3>GKE成本</h3>
<p>在GKE上，您不必为K8s控制平面付费，但是，您需要为工作节点付费。您还可以访问Google Container Registry (GCR)，以及Stackdriver日志记录和Stackdriver监控，它们提供了集成的中央日志记录和监控。最后，为了保护和优化您的部署管道，您可以利用K8s中包含的本机CI/CD工具。</p>
<h3>GKE特色</h3>
<p>与其他云提供商相比，谷歌网络被认为是顶级的。在撰写本文时，GKE对多实例<a href="https://cloud.google.com/blog/products/containers-kubernetes/gke-now-supports-multi-instance-gpus">GPU的支持正在预览中</a>。</p>
<p>GKE还有一些其他巧妙的技巧，例如，它利用通用K8s概念，如服务和入口，对负载平衡进行细粒度控制。如果您的K8s服务是类型<code>LoadBalancer</code>，GKE将通过一个普通的L4 TCP负载均衡器向世界公开它。然而，如果你在你的服务前面创建一个<code>Ingress</code>对象，GKE将创建一个L7负载平衡器，它能够完成SSL终止。如果注释正确，L7负载平衡器甚至能够允许gRPC流量。</p>
<p>GKE还提供两种不同的操作模式，标准和自动驾驶。标准体验从一开始就提供了，而<a href="https://cloud.google.com/kubernetes-engine/docs/concepts/autopilot-overview"> autopilot </a>是你的集群的自动化管理器，它只对你运行pod进行收费，以优化计费。</p>
<p>GKE甚至包括预建的K8s模板，您可以将其用于您的部署。这些都可以在<a href="https://console.cloud.google.com/marketplace/browse?filter=solution-type:k8s&amp;_ga=2.217175377.69959840.1636458606-1489105345.1636458606&amp;pli=1">谷歌云市场</a>上找到。</p>
<p>K8s本身是平台不可知的。理论上，你可以轻松地从任何一个云平台切换到另一个平台，也可以在你自己的基础设施上运行。实际上，当您选择平台提供商时，您通常希望利用并受益于需要额外工作才能迁移到不同提供商或本地的特定服务。</p>
<p><a href="https://cloud.google.com/gke-on-prem/"> GKE本地</a>提供工具、集成和访问来帮助统一体验，并将本地集群视为在云中运行。它不是完全透明的，也不应该是，但它有所帮助。</p>
<h2 id="microsoftazurekubernetesserviceaks">Microsoft azure kubrintes service(AK)</h2>
<p>微软Azure最初提供了一个名为ACS的解决方案，支持Apache Mesos、K8s和Docker Swarm。2017年10月，它推出了Azure Kubernetes服务AKS，作为专门的Kubernetes托管服务，导致其他选择失败。</p>
<h3>AKS成本</h3>
<p><a href="https://azure.microsoft.com/en-us/services/kubernetes-service/#solution-architectures"> AKS是微软提供的K8s解决方案</a>。AKS和GKE很像，比如它也免费为你管理一个K8s集群。它被CNCF认证为符合K8s，这意味着没有定制黑客。</p>
<h3>AKS集成</h3>
<p>微软在K8s，尤其是AKS上投入了大量资源。AKS包括与<code>ActiveDirectory</code>的强大集成，用于身份验证和授权、集成监控和日志记录以及Azure存储。您还可以获得内置的容器注册表、网络和支持GPU的节点。</p>
<p>AKS最有趣的特性之一是使用virtual-kublet项目来集成<a href="https://docs.microsoft.com/en-us/samples/azure-samples/virtual-kubelet-aci-burst/bursting-from-aks-to-aci-with-the-virtual-kubelet/">Azure Container Instances(ACI)</a>。ACI消除了为集群配置节点的需要，如果您要处理高度可变的负载，这将是一个巨大的负担。</p>
<h3>对AKS的批评</h3>
<p>与本质上是黄金标准的GKE相比，开发者对AKS有一些相同的批评。在AKS的最初实现中，在AKS上设置集群需要很长时间，平均20分钟。此外，启动时间波动很大，有时需要一个多小时，导致开发人员体验不佳。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p>最初，你还需要一些web UI的组合，比如Azure Portal Manager、PowerShell和一个普通的CLI来提供和设置一切。然而，随着最近的升级，体验得到了改善，与Visual Studio 、<a href="https://azure.microsoft.com/en-us/services/devops/"> Azure DevOps </a>进行了集成，用于管道管理，与<a href="https://azure.microsoft.com/en-us/services/monitor/"> Azure Monitor </a>进行了集成，用于记录和监控您的基础设施。</p>
<h3>AKS功能</h3>
<p>Azure Monitor 包含优化功能，有助于提升应用的整体性能。例如，它告诉您每个节点上正在运行什么，以及平均CPU和内存利用率。它还提供关于哪些容器驻留在控制器或pod中的信息，帮助您监视整体性能。</p>
<p>Azure Monitor审查主机上运行的工作负载的资源利用率，这些工作负载与支持pod的标准进程无关。它了解集群在平均负载和最重负载下的行为，帮助您确定容量需求并确定集群可以承受的最大负载。</p>
<p>如今，Visual Studio和Azure DevOps都被开发人员广泛使用。对这两种服务的支持和集成极大地改善了AKS开发人员的体验。</p>
<h2 id="amazonelastickubernetesserviceeks">亚马逊弹性库柏服务(EKS)</h2>
<p>亚马逊对K8s的关注有点晚。它总是有自己的弹性容器服务(ECS)容器编排平台。然而，客户对K8s的需求是势不可挡的。许多组织使用<a href="https://github.com/kubernetes/kops">Kubernetes Operations</a>(kOps)或类似的工具在EC2上运行他们的K8s集群。</p>
<h3>例如整合</h3>
<p>AWS开始为官方集成提供适当的支持，今天，EKS与IAM集成，用于身份管理、AWS负载平衡器、网络和其他各种存储选项。</p>
<p>AWS的一个有趣的转折是<a href="https://aws.amazon.com/fargate/">承诺与Fargate </a>的集成，这类似于AKS与ACI的集成。这种集成将消除提供工作节点的需要。此外，它可能允许Kubernetes通过其水平Pod自动缩放(HPA)和垂直Pod自动缩放(VPA)功能自动缩放，提供真正的弹性体验。</p>
<h3>前情提要</h3>
<p>在EKS，你必须支付管理控制平面，这可能是一个限制因素，如果你只是想与k8或你有很多小集群的实验。</p>
<h3>EKS表演</h3>
<p>就性能而言，EKS介于两者之间。启动集群大约需要10到15分钟。正如您所预料的，复杂分布式系统的性能是非常微妙的，不能用一个单一的指标来衡量。也就是说，EKS本身仍相对较新，可能需要一段时间才能充分利用AWS的强大基础。</p>
<p>EKS也有针对几种不同用例的产品。首先，您可以利用完全基于云的基础设施来利用EKS，包括Fargate或EC2s。亚马逊EKS Anywhere是一个预打包的解决方案，可以在本地或混合环境中运行。最后，亚马逊EKS发行版允许你用自己的工具部署EKS。</p>
<h2 id="k3sanewalternativetok8s">k3s:K8s的新选择</h2>
<p>除了我们上面提到的K8s的实现，还有一个更新的轻量级替代方案叫做K3s。K3s的目标是边缘或基于物联网的应用程序，作为一个单一的打包二进制文件，它比传统的K8s占用的空间更小。</p>
<p>您可以通过主要的云提供商来设置和安装K3s，但是您必须自己做大量的跑腿工作，在您正在使用的云实例上安装二进制文件。</p>
<p>然而，这为更分布式的设备打开了集群市场，对于对K8s的好处感兴趣而没有传统基础架构要求的客户来说，这可能是一个很好的选择。</p>
<h2 id="conclusion">结论</h2>
<p>我们知道<a href="https://blog.logrocket.com/kubernetes-toolbox/"> Kubernetes是容器编排</a>的绝佳选择，但是对你来说最大的问题是你应该在哪里运行它。通常，答案很简单。如果您已经在一个云提供商上运行，只需将您的系统迁移到那个云平台上的K8s。</p>
<p>如果您有特殊的需求并在自己的硬件上运行，您可以运行自己的K8s集群，或者您可以抓住这样一个大型基础架构迁移项目的机会，迁移到云。</p>
<p>如果您有更特殊的需求，但想要K8s传统上提供的一些好处，您也可以使用K3s。无论您的用例是什么，您的应用程序都有很多选项。</p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>