<html>
<head>
<title>11 database drivers and ORMs for Rust that are ready for production - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Rust的11个数据库驱动程序和表单已准备好投入生产</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/11-database-drivers-and-orms-for-rust-that-are-ready-for-production/#0001-01-01">https://blog.logrocket.com/11-database-drivers-and-orms-for-rust-that-are-ready-for-production/#0001-01-01</a></blockquote><div><article class="article-post">
<p>由于更多的原因，我们没有时间在这篇文章中探讨，Rust在开发人员社区中迅速流行起来。它的一个卖点是它支持所有主要的数据库和存储格式——从基于文件的存储平台到基于内存的混合数据库。</p>
<p/>
<p>在本指南中，我们将比较11个最流行、最稳定的数据库驱动程序和可用于Rust的ORM。最后，我们将在一个方便的表格中汇编所有关键要点，以帮助您为下一个Rust项目选择正确的数据库。</p>
<h2 id="databasedrivers">数据库驱动程序</h2>
<p>数据库驱动程序是在应用程序和数据库之间执行通信的一段代码。它实现了应用程序和数据库之间的数据交换协议和格式。</p>
<h3 id="mysqlhttpsdocsrsmysql1901mysql">1.<code>mysql</code></h3>
<p>MySQL是一个非常流行的数据库，也是大多数使用SQL数据库的应用程序的首选。<a href="https://docs.rs/mysql/19.0.1/mysql/" target="_blank" rel="noopener noreferrer"> <code>mysql</code> </a>机箱提供了MySQL协议的纯Rust实现。它支持基于文本的协议和二进制协议。</p>
<p><code>mysql</code>支持语句缓存和连接池。TLS通过<code>nativetls</code>板条箱支撑。板条箱使用<code>params</code>来创建行。一个缺点是MySQL不支持异步。</p>
<h3 id="mysql_asynchttpsdocsrsmysql_async0242mysql_async">2.<code>mysql_async</code></h3>
<p>正如你可能已经猜到的，<a href="https://docs.rs/mysql_async/0.24.2/mysql_async/" target="_blank" rel="noopener noreferrer"> <code>mysql_async</code> </a>是<code>mysql</code>驱动的异步版本。它有很多类似于<code>mysql</code>中的API，但是它可能没有一些新的特性，因为箱子是由不同的开发者维护的。</p>
<p><code>mysql_async</code>完全支持MySQL协议，包括基于TLS的加密。<code>mysql_async</code> crate还允许你维护一个连接池。这个箱子是用纯铁锈写的。</p>
<h3 id="tokio_postgreshttpsdocsrstokiopostgres055tokio_postgres">3.<code>tokio_postgres</code></h3>
<p>异步支持:是</p>
<p>Postgres是一个非常受欢迎的数据库。Rust有一个针对Postgres协议的异步实现，它构建在tokio异步运行时之上，但也可以与其他运行时一起工作。</p>
<p>查询的执行是完全流水线化的，即驱动程序可以发送多个查询。这意味着<a href="https://docs.rs/tokio-postgres/0.5.5/tokio_postgres/" target="_blank" rel="noopener noreferrer"> <code>tokio-postgres</code> </a>可以同时处理多个数据响应。它还支持使用<code>nativetls</code>的TLS。驱动程序不支持连接池，因为可以在同一连接上发送多个查询。</p>
<p><code>tokio_postgres</code>为各种配置提供了多个包装器，例如驱动程序的同步版本、OpenSSL版本、<code>native_tls</code>版本等等。</p>
<p>还有几个其他板条箱具有各种附加功能，包括:</p>
<ul>
<li><code>postgres-types</code></li>
<li><code>postgres-native-tls</code></li>
<li><code>postgres-openssl</code></li>
<li><code>postgres</code></li>
</ul>
<h3 id="redishttpsdocsrsredis0170redis">4.<code>redis</code></h3>
<p>Redis是一个内存数据库，可用于创建缓存、工作队列和微服务。Rust对Redis数据库有很好的支持。<a href="https://docs.rs/redis/0.17.0/redis/" target="_blank" rel="noopener noreferrer"> <code>redis</code> </a>机箱提供了高级和低级API。所有的查询都是流水线式的，这意味着可以同时发送多个查询。</p>
<p>全面实施Redis通信协议。对发布/订阅的支持仍在进行中。<code>redis</code>使用tokio作为异步运行时。这个机箱支持Lua脚本、自动重新连接和使用<code>r2d2</code>机箱的连接池。</p>
<h3 id="rusqlitehttpsdocsrsrusqlite0240rusqlite">5.<code>rusqlite</code></h3>
<p>异步支持:否</p>
<p>SQLite是一个具有SQL支持的进程内数据库，被多个平台用于维护数据存储。Android应用程序通常使用SQLite作为本地数据库。</p>
<p>Rust在SQLite C驱动周围有一个包装器。<a href="https://docs.rs/rusqlite/0.24.0/rusqlite/" target="_blank" rel="noopener noreferrer"> <code>rusqlite</code> </a>机箱使用<code>bindgen</code>来创建包装器，这会导致编译时间很长。<code>rusqlite</code>是一个安全的SQLite包装器。还支持<code>commit</code>、<code>insert</code>等挂钩。</p>
<p><code>rusqlite</code>不包括异步支持。</p>
<h3 id="leveldbhttpskadegithubioleveldbleveldb">6.<code>leveldb</code></h3>
<p>由Google创建的LeveDB是一个键-值存储，并且仅仅是一个键-值存储。它不是一个SQL数据库；这更像是NoSQL。</p>
<p>许多数据库使用LevelDB作为存储引擎。Chrome使用LevelDB实现IndexDB。</p>
<p><a href="http://skade.github.io/leveldb/leveldb/" target="_blank" rel="noopener noreferrer"> <code>leveldb</code> </a>板条箱为LevelDB提供安全绑定。像<code>rusqlite</code>一样，它可能会增加编译时间，因为它使用了<code>bindgen</code>。也和<code>rusqlite</code>一样，没有异步支持。</p>
<h3 id="mongodbhttpsdocsrsmongodb111mongodb">7.<code>mongodb</code></h3>
<p>MongoDB是一个NoSQL数据库。Rust有一个官方的MongoDB驱动，支持异步。它是用纯Rust编写的，使用tokio运行时来支持异步。</p>
<p><a href="https://docs.rs/mongodb/1.1.1/mongodb/" target="_blank" rel="noopener noreferrer"> <code>mongodb</code> </a>支持聚合以及各种数据库操作。它使用<code>bson</code>箱创建一个BSON文档。在撰写本文时，还不支持事务。</p>
<h3 id="memcachehttpsdocsrsmemcache0140memcache">8.<code>memcache</code></h3>
<p>Memcached是一个免费的、开源的、高性能的分布式内存对象缓存系统。<a href="https://docs.rs/memcache/0.14.0/memcache/" target="_blank" rel="noopener noreferrer"> <code>memcache</code> </a>是一个纯Rust写的Memcached客户端。它支持Memcached的多个实例。包括自动JSON序列化和压缩在内的一些特性还不可用。</p>
<h3 id="cdrshttpsdocsrscdrs233cdrs">9.<code>cdrs</code></h3>
<p>异步支持:否</p>
<p>Cassandra是一个分布式、可伸缩的SQL数据库。<code>crdrs</code>是Cassandra和ScyllaDB的数据库驱动。</p>
<p>crate提供了Cassandra协议的完整实现，并支持集群。它还支持使用<code>nativetls</code>的TLS。</p>
<p><a href="https://crates.io/crates/cdrs-async" target="_blank" rel="noopener noreferrer"> <code>cdrs-async</code> </a>是基于tokio异步运行时的<code>cdrs</code>机箱的异步版本。</p>
<h2 id="orm">ORMs</h2>
<p>对象关系映射器(ORM)用Rust结构映射稳定行。ORMs提供了对多个SQL数据库的支持。许多都是完整的数据库解决方案，包括多个数据库驱动程序、连接池支持和迁移工具。下面是两个最受欢迎的。</p>
<h3 id="dieselhttpsdocsrsdiesel145diesel">1.<code>diesel</code></h3>
<p>异步支持:否</p>
<p><code>diesel</code>是Postgres、MySQL和SQLite的ORM。它提供了一个名为<code>diesel_cli</code>的迁移工具。<code>diesel</code> <span>是类型安全的，意味着表类型是使用迁移文件创建的。它的目标是在多个数据库上产生</span>和<span>相同的行为。</span></p>
<p><code>diesel</code> <span>不支持异步，不支持按查询分组。在stable Rust上，由于缺乏对过程宏的支持，这个错误有点奇怪。它可以包括长嵌套类型。</span></p>
<p><span>可以为数据库更改驱动程序。连接池是通过<code>r2d2</code>支持的。</span></p>
<h3 id="quainthttpsdocsrsquaint0113quaint">2.<code>quaint</code></h3>
<p><a href="https://docs.rs/quaint/0.1.13/quaint/" target="_blank" rel="noopener noreferrer"> <code>quaint</code> </a>是一个支持异步操作的ORM。它为运行时创建查询提供了AST。</p>
<p><code>quaint</code>支持多个SQL数据库，包括MySQL、Postgres和SQLite，以及连接池。它不是数据库类型安全的ORM。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>

<p>Rust社区为管理数据库迁移构建了一些很棒的工具，其中一些是独立于ORM的。最适合您的解决方案将取决于您项目的目标和要求。</p>
<p>为了帮助您做出明智的选择，我们在一个方便的表格中收集了与上述每个数据库驱动程序和ORM(以及更多)相关的关键要点、优点、缺点和特性。</p>
<table>
<tbody>
<tr>
<td><strong>名称</strong></td>
<td><strong>类型</strong></td>
<td>产品。准备好了吗？</td>
<td><strong>异步支持？</strong></td>
<td><strong>纯锈？</strong></td>
<td><strong>优点</strong></td>
<td><strong>缺点</strong></td>
<td><strong>注释</strong></td>
<td><strong>维护</strong></td>
</tr>
<tr>
<td><a href="https://docs.rs/mysql/19.0.1/mysql/" target="_blank" rel="noopener noreferrer">T2<code>mysql</code></a></td>
<td>驾驶员</td>
<td>是</td>
<td>不</td>
<td>是</td>
<td>MySQL协议的全面实现<ul>
<li>连接池</li>
<li>使用<code>nativetls</code>的TLS支持</li>
<li>缺少ORM</li>
</ul>
</td>
<td>不支持异步<ul>
<li>   </li>
<li>在数千个项目中使用</li>
</ul>
</td>
<td>活跃的<ul>
<li><a href="https://docs.rs/mysql_async/0.24.2/mysql_async/" target="_blank" rel="noopener noreferrer">T2<code>mysql_async</code></a></li>
</ul>
</td>
<td>驾驶员</td>
</tr>
<tr>
<td>是</td>
<td>是</td>
<td>是</td>
<td>MySQL协议的全面实现</td>
<td>与<code>mysql</code>几乎相同的API</td>
<td>异步支持<ul>
<li>使用<code>nativetls</code>的TLS支持</li>
<li>连接池</li>
<li>可能缺少<code>mysql</code>板条箱的某些特征</li>
<li>活跃的</li>
<li><a href="https://docs.rs/tokio-postgres/0.5.5/tokio_postgres/" target="_blank" rel="noopener noreferrer">T2<code>tokio_postgres</code></a></li>
</ul>
</td>
<td>驾驶员<ul>
<li>是</li>
</ul>
</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>完全流水线执行</td>
<td>同时发送多个查询</td>
<td>支持多运行时</td>
<td>TLS支持</td>
<td>同步包装可用</td>
<td>带有各种附加物的多个板条箱<ul>
<li>postgres类型</li>
<li>postgres-native-tls</li>
<li>postgres-openssl</li>
<li>postgres</li>
<li>活跃的</li>
</ul>
</td>
<td><a href="https://docs.rs/redis/0.17.0/redis/" target="_blank" rel="noopener noreferrer">T2<code>redis</code></a></td>
<td>驾驶员<ul>
<li>是</li>
<li>是</li>
<li>是</li>
<li>支持集群</li>
<li><code>r2d2</code>水池</li>
</ul>
</td>
<td>自动重新连接</td>
</tr>
<tr>
<td>Lua脚本支持</td>
<td>不完全支持发布/订阅</td>
<td>   </td>
<td>全面实施Redis</td>
<td>提供高级和低级API</td>
<td>支持流水线操作<ul>
<li>活跃的</li>
<li><a href="https://docs.rs/rusqlite/0.24.0/rusqlite/" target="_blank" rel="noopener noreferrer">T2<code>rusqlite</code></a></li>
<li>驾驶员</li>
<li>是</li>
</ul>
</td>
<td>不<ul>
<li>不</li>
</ul>
</td>
<td>用C语言编写SQLite库的包装器<ul>
<li>挂钩支架</li>
<li>安全生锈</li>
<li>由于<code>bindgen</code>增加了构建时间</li>
</ul>
</td>
<td>   </td>
</tr>
<tr>
<td>SQLite是一个进程数据库</td>
<td>活跃的</td>
<td><a href="http://skade.github.io/leveldb/leveldb/" target="_blank" rel="noopener noreferrer">T2<code>leveldb</code></a></td>
<td>驾驶员</td>
<td>是</td>
<td>不<ul>
<li>不</li>
<li>快速键值对存储</li>
<li>安全包装</li>
</ul>
</td>
<td>几乎完整的包装<ul>
<li>由于<code>bindgen</code>增加了构建时间</li>
</ul>
</td>
<td>活跃的<ul>
<li><a href="https://docs.rs/mongodb/1.1.1/mongodb/" target="_blank" rel="noopener noreferrer">T2<code>mongodb</code></a></li>
</ul>
</td>
<td>驾驶员</td>
</tr>
<tr>
<td>是</td>
<td>是</td>
<td>是</td>
<td>官方MongoDB驱动程序</td>
<td>支持聚合</td>
<td>不支持MongoDB事务<ul>
<li>   </li>
<li>MongoDB客户端的信任绑定</li>
<li>活跃的</li>
</ul>
</td>
<td><a href="https://docs.rs/memcache/0.14.0/memcache/" target="_blank" rel="noopener noreferrer">T2<code>memcache</code></a><ul>
<li>驾驶员</li>
</ul>
</td>
<td>是</td>
<td>不</td>
</tr>
<tr>
<td>是</td>
<td>内存数据库</td>
<td>支持多个数据库服务器</td>
<td>   </td>
<td>不支持自动JSON序列化和压缩</td>
<td>   <ul>
<li><code>memcached</code>是分布式服务器</li>
<li>活跃的</li>
</ul>
</td>
<td><a href="https://docs.rs/cdrs/2.3.3/cdrs/" target="_blank" rel="noopener noreferrer">T2<code>cdrs</code></a><ul>
<li>驾驶员</li>
</ul>
</td>
<td>是<ul>
<li>不</li>
</ul>
</td>
<td>是</td>
</tr>
<tr>
<td>支持<a href="https://www.scylladb.com/" target="_blank" rel="noopener noreferrer"> ScyllaDB </a></td>
<td>全面实施规范</td>
<td>TSL/SSL支持</td>
<td>多重服务事件支持</td>
<td>–提供异步版本(<a href="https://crates.io/crates/cdrs-async" target="_blank" rel="noopener noreferrer"> <code>cdrs-async</code> </a>)</td>
<td>活跃的<ul>
<li><a href="https://docs.rs/diesel/1.4.5/diesel/" target="_blank" rel="noopener noreferrer">T2<code>diesel</code></a></li>
<li>ORM</li>
</ul>
</td>
<td>是<ul>
<li>不</li>
</ul>
</td>
<td>是<ul>
<li><code>memcached</code> is the distributed server</li>
</ul>
</td>
<td>强类型</td>
</tr>
<tr>
<td>支持各种SQL数据库</td>
<td>超快的序列化和反序列化</td>
<td>大多数数据库的行为相同</td>
<td>支持连接池</td>
<td>不同的司机没有选择</td>
<td>不支持按查询分组<ul>
<li>活跃的</li>
<li><a href="https://docs.rs/quaint/0.1.13/quaint/" target="_blank" rel="noopener noreferrer">T2<code>quaint</code></a></li>
<li>ORM</li>
<li>是</li>
</ul>
</td>
<td>是</td>
<td>是</td>
<td>构建SQL查询的语法</td>
</tr>
<tr>
<td>支持池</td>
<td>支持MySQL、Postgres和Sqlite数据库</td>
<td>非类型安全抽象</td>
<td>活跃的</td>
<td><a href="https://docs.rs/rustorm/0.17.0/rustorm/" target="_blank" rel="noopener noreferrer">T2<code>rustorm</code></a></td>
<td>ORM<ul>
<li>不</li>
<li>不</li>
<li>是</li>
<li>表格行的简单序列化</li>
<li>支持多个数据库</li>
</ul>
</td>
<td>池支持<ul>
<li>No choice for different drivers</li>
<li>No support for group by query</li>
</ul>
</td>
<td>活跃的</td>
<td><a href="https://docs.rs/tql/0.1.0/tql/" target="_blank" rel="noopener noreferrer">T2<code>tql</code></a></td>
</tr>
<tr>
<td>ORM</td>
<td>不</td>
<td>不</td>
<td>是</td>
<td>编译时SQL查询创建</td>
<td>   <ul>
<li>对稳定Rust的错误处理较差</li>
<li>活跃的</li>
<li><a href="https://crates.io/crates/migrant" target="_blank" rel="noopener noreferrer">T2<code>migrant</code></a></li>
</ul>
</td>
<td>工具<ul>
<li>是</li>
</ul>
</td>
<td>不适用的</td>
<td>是</td>
</tr>
<tr>
<td>支持MySQL迁移</td>
<td>自我更新</td>
<td>支持壳牌(REPL)</td>
<td>消极的</td>
<td><a href="https://docs.rs/refinery/0.3.0/refinery/" target="_blank" rel="noopener noreferrer">T2<code>refinery</code></a></td>
<td>工具<ul>
<li>是</li>
<li>是</li>
<li>是</li>
</ul>
</td>
<td>支持多个驱动程序</td>
<td>活跃的</td>
<td><a href="https://lp.logrocket.com/blg/rust-signup" target="_blank">log rocket</a>:Rust应用的web前端的全面可见性</td>
</tr>
<tr>
<td>调试Rust应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监控和跟踪Rust应用程序的性能、自动显示错误、跟踪缓慢的网络请求和加载时间感兴趣，</td>
<td>. </td>
<td>LogRocket 就像是网络和移动应用程序的DVR，记录你的Rust应用程序上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用的性能，报告客户端CPU负载、客户端内存使用等指标。</td>
<td>现代化调试Rust应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</td>
<td>Yes</td>
<td>
 
</td>
<td>
 
</td>
<td>

</td>
<td>Active</td>
</tr>
<tr>
<td><a href="https://crates.io/crates/migrant" target="_blank" rel="noopener noreferrer"><code>migrant</code></a></td>
<td>Tool</td>
<td>Yes</td>
<td>N/A</td>
<td>Yes</td>
<td>
 
</td>
<td/>
<td>

</td>
<td>Passive</td>
</tr>
<tr>
<td><a href="https://docs.rs/refinery/0.3.0/refinery/" target="_blank" rel="noopener noreferrer"><code>refinery</code></a></td>
<td>Tool</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>
 
</td>
<td/>
<td/>
<td>Active</td>
</tr>
</tbody>
</table>
<p> </p><div class="code-block code-block-29">
<div class="blog-plug inline-plug rust-plug"><h2><a href="https://lp.logrocket.com/blg/rust-signup" target="_blank">LogRocket</a>: Full visibility into web frontends for Rust apps</h2><p> Debugging Rust applications can be difficult, especially when users experience issues that are difficult to reproduce. If you’re interested in monitoring and tracking performance of your Rust apps, automatically surfacing errors, and tracking slow network requests and load time, </p><a href="https://lp.logrocket.com/blg/rust-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer">LogRocket</a> is like a DVR for web and mobile apps, recording literally everything that happens on your Rust app. Instead of guessing why problems happen, you can aggregate and report on what state your application was in when an issue occurred. LogRocket also monitors your app’s performance, reporting metrics like client CPU load, client memory usage, and more.</p><p>Modernize how you debug your Rust apps — <a class="signup" href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer">start monitoring for free</a>.</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>