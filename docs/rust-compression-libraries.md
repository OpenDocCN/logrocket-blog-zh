# Rust 压缩库- LogRocket 博客

> 原文：<https://blog.logrocket.com/rust-compression-libraries/>

***编者按:**本帖更新于 2021 年 1 月 8 日，修正原基准中的错误。*

数据压缩是许多应用中的重要组成部分。幸运的是，Rust 社区有许多板条箱来处理这个问题。

与我对 [Rust 序列化库](https://blog.logrocket.com/rust-serialization-whats-ready-for-production-today/)的评论不同，在不同格式之间比较性能没有意义。对于某些格式，我们有的只是围绕 C 库的薄薄的包装。这里希望大多数将被移植到生锈很快。

我们将在本指南中介绍以下内容:

## Rust 压缩库是做什么的？

压缩工具有两种变体:流压缩器和归档器。流压缩器接收字节流，并发出较短的压缩字节流。归档程序使您能够序列化多个文件和目录。一些格式(如 the revader。zip)可以收集和压缩文件。

对于 web 来说，只有两种流格式得到了广泛的实现: [`gzip` / `deflate`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding) 和 [Brotli](https://github.com/google/brotli) 。我将`gzip`和`deflate`列在同一个标题下，因为它们实现了相同的底层算法，`gzip`添加了更多的检查和报头信息。一些客户端也允许 [bzip2](https://www.sourceware.org/bzip2/) 压缩，但是这不再普遍，因为`gzip`可以通过 [Zopfli](https://github.com/google/zopfli) (交换压缩时间)获得类似的压缩比，并且你可以使用 Brotli 获得更小的压缩比。

## Rust 最好的压缩库有哪些？

像任何问题一样，有许多解决方案在压缩和解压缩的运行时间、CPU 和内存使用与压缩比、数据流能力以及校验和等安全措施方面有不同的权衡。我们将只关注无损压缩——没有图像、音频或视频相关的有损压缩格式。

对于有点实际的基准测试，我将使用以下文件进行压缩和解压缩，范围从非常可压缩到非常难以压缩:

*   用`cat /dev/zero | head -c $[1024 * 1024 * 100] > zeros.bin`创建的 100MB 零文件
*   我的个人博客的链接降价，小而重的文本(用`cat llogiq.github.io/_posts/*.md > blogs.txt`创建)
*   我的猫的图像
*   当前稳定工具链的 x86_64 rustc 二进制文件(1.47.0)
*   电影《黑客》的电视录像，我碰巧把它放在身边
*   用`cat /dev/urandom | head -c $[1024 * 1024 * 100] > randoms.bin`创建的 100MB 伪随机数文件

所有的压缩和解压缩都来自和进入内存。我的机器有一个运行 Linux 5.8.18_1 的锐龙 3550H 四核 CPU。

***注** :部分压缩器未通过往返测试，意味着压缩后再解压缩的数据与原始数据不符。这可能意味着我的基准实现有问题，或者可能是库中的错误。我会做进一步的测试。现在，我已经用星号(*)标记了各自的库。*

## Rust 的流压缩库

在蒸汽压缩机部门，该基准涵盖以下板条箱:

### 放气/ `zlib`

DEFLATE 是一种较老的算法，它使用字典和霍夫曼编码。它有三种变体:普通(没有任何头)、`gzip`(有一些头，由同名的 UNIX 压缩实用程序推广)和 [`zlib`](https://zlib.net/) (常用于其他文件格式，也用于浏览器)。我们将对普通变体进行基准测试。

*   [`yazi`](https://docs.rs/yazi) 0.1.3 有一个简单的接口，它将返回自己的`Vec`，但有一个更复杂的接口，我们基准测试允许我们提供自己的接口。从好的方面来说，我们可以选择压缩级别
*   [`deflate`](https://docs.rs/deflate) 0.8.6 不允许提供输出`Vec`，所以其运行时包含分配*
*   [`flate2`](https://docs.rs/flate2) 1.0.14 自带三个可能的后端，其中两个包装了一个 C 实现。这个基准测试只使用了`default`后端，因为我想避免设置工作——抱歉

### 时髦的

Snappy 是谷歌 2011 年对 LZ77 的回应，以公平的压缩比提供快速的运行时间。

### LZ4

同样在 2011 年发布的 LZ4 是 LZ77 家族中另一个注重速度的算法。它摒弃了算术和霍夫曼编码，仅仅依靠字典匹配。这使得解压缩器非常简单。

实现中存在一些差异。尽管它们基本上使用相同的算法，但最终的压缩比可能会有所不同，因为一些实现选择最大化速度的默认值，而另一些实现选择更高的压缩比。

### 标准

脸书在 2016 年发布的 [ZStandard(或“zstd”)算法](https://facebook.github.io/zstd/)，是为实时应用设计的。它提供了非常快速的压缩和解压缩，压缩比达到了 T0 级或更高。它还用于时间至关重要的其他情况，例如 BTRFS 文件系统压缩。

*   [`zstd`](https://docs.rs/zstd) 0.5.3 绑定标准的基于 C 的实现。这需要`pkg-config`和`libzstd`库，包括头文件*

### 伊玛

反其道而行之，用运行时间换取更高的压缩率，LZMA 算法用马尔可夫链扩展了基于字典的 LZ 算法类。这种算法非常不对称，因为压缩比解压缩慢得多，并且需要更多的内存。它通常用于 Linux 发行版的包格式，以减少网络使用，同时满足解压缩 CPU 和内存需求。

### 佐夫利

Zopfli 是一种兼容`zlib`的压缩算法，它以较高的压缩率换取了较长的运行时间。它在 web 上很有用，在 web 上`zlib`解压缩被广泛实现。

虽然 Zopfli 需要更多的时间来压缩，但对于减少网络流量来说，这是一个可以接受的折衷。因为格式是 DEFLATE 兼容的，所以板条箱只实现压缩。

*   [`zopfli`](https://docs.rs/zopfli)0 . 4 . 0 *(不能使用`deflate`或`fflate2` ) 解包匹配原件吗

### 布罗特利

Brotli 由创建 Zopfli 的谷歌团队开发，用二阶上下文建模扩展了基于 LZ77 的压缩算法，这使其在压缩难以压缩的数据流方面具有优势。

*   [`brotli`](https://docs.rs/brotli) 3.3.0 是原始 C++源代码的粗略翻译，经过了大量的调整和优化(高版本号证明了这一点)。界面有些不自然，但是足够好了。

## Rust 的存档库

对于归档程序，基准具有`tar` 0.4.30、`zip` 0.5.8 和`rar` 0.2.0 箱。

`zip`可能是最广为人知的格式。它的首次发布是在 1989 年，可能是同类格式中支持最广泛的。古老的磁带归档程序`tar`是最古老的格式，于 1979 年首次发布。它实际上没有自己的压缩，而是以典型的 UNIX 方式委托给流归档器，如`gzip` (DEFLATE)、`bzip2` (LZW)和`xz` (LZMA)。`rar`格式比`zip`稍微年轻一些，并且由于更少的文件开销和略好的压缩而在文件共享服务上流行起来。

### 接口

关于流处理器，有三种可能的选择来实现 API。最简单的方法是获取一个`&[u8]`字节片并返回一个带有压缩数据的`Vec<u8>`。一个显而易见的优化是不返回压缩数据，而是取一个对一个`Vec`的`&mut Vec<u8>`可变引用来写入压缩数据。

最通用的接口显然是采用一个`impl Read`和`impl Write`的方法，从前者读取并写入后者。不过，这可能不是所有格式的最佳选择，因为有时您需要返回并修改书面输出中的块长度。这个接口会在桌面上留下一些性能，除非输出也实现了`Seek`——对于`Vec` s，可以用`std::io::Cursor`来完成。另一方面，它让我们可以轻松地处理不适合内存的数据。

在任何情况下，为了进行有意义的比较，我们会在 API 允许的情况下从一个 RAM 压缩到另一个 RAM，并进行预分配。例外被如此标记。

有些库允许您设置选项来激活(禁用)某些特性，如校验和，并选择某种大小/运行时间的折衷。该基准采用默认配置，有时会改变压缩级别(如果 API 中有这种配置的话)。

## Rust 压缩库:基准

事不宜迟，以下是结果，以六个表格的形式呈现，以避免弄乱您的显示:

零:

| **零点** | **打包时间** | **字节打包** | **解包时间** |
| T2`uncompressed` | — | 104.857.600 b | — |
| T2`lz4-compression` | 536.89 毫秒 | 411.212 b | 250.26 毫秒 |
| T2`lz4_flex` | 8.1599 毫秒 | 411.223 b | 14.096 毫秒 |
| T2`lz_fear` | 41.534 毫秒 | 411.590 b | 73.517 毫秒 |
| T2`lzzzz` | 7.1806 毫秒 | 411.217 b | 6.1133 纳秒 |
| T2`zstd-level-1` | 19.437 毫秒 | 3.219 b | 331.79 纳秒 |
| T2`zstd-level-2` | 15.808 毫秒 | 3.219 b | 333.12 纳秒 |
| T2`zstd-level-3` | 13.186 毫秒 | 3.219 b | 332.96 纳秒 |
| T2`zstd-level-4` | 13.131 毫秒 | 3.219 b | 331.72 纳秒 |
| T2`zstd-level-5` | 16.241 毫秒 | 3.219 b | 331.78 纳秒 |
| T2`zstd-level-6` | 16.487 毫秒 | 3.219 b | 332.63 纳秒 |
| T2`zstd-level-7` | 47.429 毫秒 | 3.218 b | 328.78 纳秒 |
| T2`zstd-level-8` | 60.406 毫秒 | 3.218 b | 331.46 纳秒 |
| T2`zstd-level-9` | 61.099 毫秒 | 3.218 b | 329.93 纳秒 |
| T2`snap` | 9.9748 毫秒 | 4.918.404 b | 59.525 毫秒 |
| T2`snappy-framed` | 247.52 毫秒 | 4.936.010 b | 95.653 毫秒 |
| T2`snappy-framed + crc` |  |  | 332.09 毫秒 |
| T2`deflate-Fast` | 264.42 毫秒 | 101.771 b | 297.41 美元 |
| T2`deflate-Default` | 233.50 毫秒 | 101.771 b | 299.65 美元 |
| T2`deflate-Best` | 234.01 毫秒 | 101.771 b | 299.61 美元 |
| T2`flate2-1` | 31.842 毫秒 | 477.265 b | 65.131 毫秒 |
| T2`flate2-2` | 332.71 毫秒 | 101.858 b | 247.63 毫秒 |
| T2`flate2-3` | 331.96 毫秒 | 101.858 b | 247.67 毫秒 |
| T2`flate2-4` | 331.59 毫秒 | 101.858 b | 247.70 毫秒 |
| T2`flate2-5` | 332.51 毫秒 | 101.858 b | 247.78 毫秒 |
| T2`flate2-6` | 330.03 毫秒 | 101.858 b | 247.59 毫秒 |
| T2`flate2-7` | 330.63 毫秒 | 101.858 b | 247.84 毫秒 |
| T2`flate2-8` | 330.29 毫秒 | 101.858 b | 247.96 毫秒 |
| T2`yazi-BestSpeed` | 328.44 毫秒 | 101.858 b | 16.490 毫秒 |
| T2`yazi-Default` | 329.38 毫秒 | 101.858 b | 16.434 毫秒 |
| T2`yazi-BestSize` | 328.35 毫秒 | 101.858 b | 16.472 毫秒 |
| T2`lzma-rs` | 2.2817 秒 | 2.597.689 b | 5.9204 秒 |
| T2`lzma-rs/2` | 21.299 毫秒 | 104.862.401 b | 25.546 毫秒 |
| T2`lzma-rs/xz` | 21.383 毫秒 | 104.862.401 b | 25.355 毫秒 |
| T2`zopfli` | 1434.4 秒 | 103.092 b | — |
| T2`brotli` | 3.8735 秒 | 172 b | 217.82 毫秒 |
| T2`tar` | 22.269 毫秒 | 104.859.136 b | — |
| T2`zip` | 337.60 毫秒 | 101.964 b | 303.23 毫秒 |

博客:

| **博客** | **打包时间** | **字节打包** | **解包时间** |
| T2`uncompressed` | — | 593.820 b | — |
| T2`lz4-compression` | 4.9841 毫秒 | 372.750 b | 1.7485 毫秒 |
| T2`lz4_flex` | 2.8571 毫秒 | 334.778 b | 816.33 美元 |
| T2`lz_fear` | 4.4788 毫秒 | 363.218 b | 1.8757 毫秒 |
| T2`lzzzz` | 1.5531 毫秒 | 363.199 b | 6.1198 纳秒 |
| T2`zstd-level-1` | 2.2007 毫秒 | 251.789 b | 50.807 美元 |
| T2`zstd-level-2` | 2.8105 毫秒 | 232.466 b | 39.041 美元 |
| T2`zstd-level-3` | 3.7554 毫秒 | 221.980 b | 31.714 美元 |
| T2`zstd-level-4` | 4.0346 毫秒 | 219.932 b | 31.310 美元 |
| T2`zstd-level-5` | 7.5117 毫秒 | 217.398 b | 29.830 美元 |
| T2`zstd-level-6` | 10.431 毫秒 | 214.032 b | 29.733 美元 |
| T2`zstd-level-7` | 14.142 毫秒 | 208.353 b | 30.104 美元 |
| T2`zstd-level-8` | 17.765 毫秒 | 206.647 b | 30.767 美元 |
| T2`zstd-level-9` | 26.935 毫秒 | 204.925 b | 30.561 美元 |
| T2`snap` | 1.8698 毫秒 | 355.779 b | 645.94 美元 |
| T2`snappy-framed` | 3.3497 毫秒 | 355.895 b | 742.69 美元 |
| T2`snappy-framed + crc` |  |  | 2.0513 毫秒 |
| T2`deflate-Fast` | 8.2300 毫秒 | 274.956 b | 6.8837 毫秒 |
| T2`deflate-Default` | 31.865 毫秒 | 225.712 b | 5.6215 毫秒 |
| T2`deflate-Best` | 36.495 毫秒 | 225.374 b | 5.5747 毫秒 |
| T2`flate2-1` | 6.2127 毫秒 | 303.492 b | 3.0871 毫秒 |
| T2`flate2-2` | 8.9741 毫秒 | 254.046 b | 2.3682 毫秒 |
| T2`flate2-3` | 12.651 毫秒 | 235.389 b | 2.0439 毫秒 |
| T2`flate2-4` | 14.586 毫秒 | 231.861 b | 2.0981 毫秒 |
| T2`flate2-5` | 18.574 毫秒 | 228.565 b | 2.0585 毫秒 |
| T2`flate2-6` | 27.958 毫秒 | 225.937 b | 2.0185 毫秒 |
| T2`flate2-7` | 29.698 毫秒 | 225.669 b | 2.0186 毫秒 |
| T2`flate2-8` | 32.423 毫秒 | 225.595 b | 2.0142 毫秒 |
| T2`yazi-BestSpeed` | 7.5707 毫秒 | 274.155 b | 1.5033 毫秒 |
| T2`yazi-Default` | 27.400 毫秒 | 225.937 b | 1.2362 毫秒 |
| T2`yazi-BestSize` | 31.374 毫秒 | 225.595 b | 1.2380 毫秒 |
| T2`lzma-rs` | 22.292 毫秒 | 345.651 b | 44.046 毫秒 |
| T2`lzma-rs/2` | 42.668 美元 | 593.851 b | 61.292 美元 |
| T2`lzma-rs/xz` | 34.953 美元 | 593.851 b | 61.907 美元 |
| T2`zopfli` | 1.9484 秒 | 216.931 b | — |
| T2`brotli` | 1.1627 秒 | 184.232 b | 2.9552 毫秒 |
| T2`tar` | 40.794 美元 | 595.456 b | — |
| T2`zip` | 27.536 毫秒 | 226.043 b | 2.3466 毫秒 |

猫:

| **猫** | **打包时间** | **字节打包** | **解包时间** |
| T2`uncompressed` | — | 5.996.972 b | — |
| T2`lz4-compression` | 35.233 毫秒 | 6.019.432 b | 1.0572 毫秒 |
| T2`lz4_flex` | 1.3853 毫秒 | 6.019.565 b | 1.0434 毫秒 |
| T2`lz_fear` | 4.3359 毫秒 | 5.996.995 b | 8.9415 毫秒 |
| T2`lzzzz` | 1.3029 毫秒 | 6.019.558 b | 6.0961 纳秒 |
| T2`zstd-level-1` | 5.3535 毫秒 | 5.997.120 b | 277.57 纳秒 |
| T2`zstd-level-2` | 5.2604 毫秒 | 5.997.120 b | 276.35 纳秒 |
| T2`zstd-level-3` | 5.9432 毫秒 | 5.997.120 b | 276.99 纳秒 |
| T2`zstd-level-4` | 6.5448 毫秒 | 5.997.120 b | 276.82 纳秒 |
| T2`zstd-level-5` | 26.954 毫秒 | 5.997.120 b | 276.65 纳秒 |
| T2`zstd-level-6` | 33.099 毫秒 | 5.997.120 b | 278.19 纳秒 |
| T2`zstd-level-7` | 31.469 毫秒 | 5.997.120 b | 276.26 纳秒 |
| T2`zstd-level-8` | 32.382 毫秒 | 5.997.120 b | 276.73 纳秒 |
| T2`zstd-level-9` | 59.873 毫秒 | 5.997.120 b | 277.68 纳秒 |
| T2`snap` | 1.1936 毫秒 | 5.996.786 b | 1.0078 毫秒 |
| T2`snappy-framed` | 14.805 毫秒 | 5.997.804 b | 3.2142 毫秒 |
| T2`snappy-framed + crc` |  |  | 16.639 毫秒 |
| T2`deflate-Fast` | 102.25 毫秒 | 5.988.904 b | 152.67 毫秒 |
| T2`deflate-Default` | 175.94 毫秒 | 5.988.712 b | 151.66 毫秒 |
| T2`deflate-Best` | 176.00 毫秒 | 5.988.712 b | 151.33 毫秒 |
| T2`flate2-1` | 43.591 毫秒 | 5.985.064 b | 19.644 毫秒 |
| T2`flate2-2` | 175.70 毫秒 | 5.988.765 b | 17.393 毫秒 |
| T2`flate2-3` | 178.75 毫秒 | 5.988.740 b | 17.419 毫秒 |
| T2`flate2-4` | 178.34 毫秒 | 5.988.733 b | 17.401 毫秒 |
| T2`flate2-5` | 178.27 毫秒 | 5.988.723 b | 17.344 毫秒 |
| T2`flate2-6` | 178.07 毫秒 | 5.988.720 b | 17.346 毫秒 |
| T2`flate2-7` | 178.25 毫秒 | 5.988.720 b | 17.349 毫秒 |
| T2`flate2-8` | 178.87 毫秒 | 5.988.720 b | 17.347 毫秒 |
| T2`yazi-BestSpeed` | 189.66 毫秒 | 5.988.773 b | 19.841 毫秒 |
| T2`yazi-Default` | 207.22 毫秒 | 5.988.720 b | 20.053 毫秒 |
| T2`yazi-BestSize` | 207.68 毫秒 | 5.988.720 b | 20.048 毫秒 |
| T2`lzma-rs` | 332.58 毫秒 | 6.035.262 b | 595.84 毫秒 |
| T2`lzma-rs/2` | 1.2232 毫秒 | 5.997.249 b | 1.4694 毫秒 |
| T2`lzma-rs/xz` | 1.2213 毫秒 | 5.997.249 b | 1.4887 毫秒 |
| T2`zopfli` | 10.056 秒 | 5.979.994 b | — |
| T2`brotli` | 5.9862 秒 | 5.996.992 b | 6.3637 毫秒 |
| T2`tar` | 1.2933 毫秒 | 5.998.592 b | — |
| T2`zip` | 178.73 毫秒 | 5.988.826 b | 20.713 毫秒 |

rustc:

| **rustc** | **打包时间** | **字节打包** | **解包时间** |
| T2`uncompressed` | — | 3.073.584 b | — |
| T2`lz4-compression` | 20.110 毫秒 | 1.072.891 b | 8.0218 毫秒 |
| T2`lz4_flex` | 7.7173 毫秒 | 1.010.565 b | 3.8216 毫秒 |
| T2`lz_fear` | 14.191 毫秒 | 1.026.934 b | 7.7286 毫秒 |
| T2`lzzzz` | 4.2795 毫秒 | 1.026.915 b | 6.1406 纳秒 |
| T2`zstd-level-1` | 6.4406 毫秒 | 705.366 b | 73.815 美元 |
| T2`zstd-level-2` | 7.0974 毫秒 | 687.089 b | 66.501 美元 |
| T2`zstd-level-3` | 9.1309 毫秒 | 639.689 b | 54.920 美元 |
| T2`zstd-level-4` | 12.386 毫秒 | 640.254 b | 54.440 美元 |
| T2`zstd-level-5` | 23.483 毫秒 | 623.721 b | 52.706 美元 |
| T2`zstd-level-6` | 30.142 毫秒 | 621.271 b | 52.636 美元 |
| T2`zstd-level-7` | 41.537 毫秒 | 593.284 b | 51.566 美元 |
| T2`zstd-level-8` | 49.291 毫秒 | 590.382 b | 51.925 美元 |
| T2`zstd-level-9` | 61.354 毫秒 | 588.635 b | 51.922 美元 |
| T2`snap` | 4.6536 毫秒 | 1.014.750 b | 1.9190 毫秒 |
| T2`snappy-framed` | 11.806 毫秒 | 1.015.273 b | 3.3145 毫秒 |
| T2`snappy-framed + crc` |  |  | 10.137 毫秒 |
| T2`deflate-Fast` | 26.259 毫秒 | 803.387 b | 23.408 毫秒 |
| T2`deflate-Default` | 110.58 毫秒 | 670.476 b | 19.268 毫秒 |
| T2`deflate-Best` | 402.86 毫秒 | 665.145 b | 19.119 毫秒 |
| T2`flate2-1` | 16.242 毫秒 | 825.036 b | 8.5785 毫秒 |
| T2`flate2-2` | 26.419 毫秒 | 739.349 b | 8.0749 毫秒 |
| T2`flate2-3` | 40.826 毫秒 | 696.929 b | 7.3984 毫秒 |
| T2`flate2-4` | 42.507 毫秒 | 689.885 b | 7.0987 毫秒 |
| T2`flate2-5` | 54.415 毫秒 | 681.863 b | 6.9239 毫秒 |
| T2`flate2-6` | 102.29 毫秒 | 671.424 b | 6.7224 毫秒 |
| T2`flate2-7` | 143.61 毫秒 | 669.388 b | 6.6738 毫秒 |
| T2`flate2-8` | 200.04 毫秒 | 667.776 b | 6.6292 毫秒 |
| T2`yazi-BestSpeed` | 26.324 毫秒 | 800.773 b | 5.1149 毫秒 |
| T2`yazi-Default` | 102.27 毫秒 | 671.424 b | 3.7663 毫秒 |
| T2`yazi-BestSize` | 241.13 毫秒 | 667.030 b | 3.7035 毫秒 |
| T2`lzma-rs` | 93.622 毫秒 | 1.144.310 b | 216.56 毫秒 |
| T2`lzma-rs/2` | 589.55 美元 | 3.073.726 b | 710.17 美元 |
| T2`lzma-rs/xz` | 592.90 美元 | 3.073.726 b | 710.56 美元 |
| T2`zopfli` | 50.235 秒 | 629.089 b | — |
| T2`brotli` | 7.5668 秒 | 484.743 b | 12.214 毫秒 |
| T2`tar` | 600.54 美元 | 3.075.584 b | — |
| T2`zip` | 102.87 毫秒 | 671.530 b | 8.1872 毫秒 |

“黑客”:

| **黑客** | **打包时间** | **字节打包** | **解包时间** |
| T2`uncompressed` | — | 650.614.271 b | — |
| T2`lz4-compression` | 3.7903 秒 | 651.414.695 b | 129.46 毫秒 |
| T2`lz4_flex` | 85.586 毫秒 | 651 216 503 b | 65.234 毫秒 |
| T2`lz_fear` | 366.12 毫秒 | 648.771.012 b | 575.33 毫秒 |
| T2`lzzzz` | 63.256 毫秒 | 651.305.354 b | 6.0870 纳秒 |
| T2`zstd-level-1` | 439.54 毫秒 | 648.460.233 b | 22.411 美国 |
| T2`zstd-level-2` | 441.59 毫秒 | 648.418.708 b | 23.721 美元 |
| T2`zstd-level-3` | 548.52 毫秒 | 648.368.014 b | 7.2039 美国 |
| T2`zstd-level-4` | 658.25 毫秒 | 648.365.759 b | 7.2404 美国 |
| T2`zstd-level-5` | 4.1662 s | 648.337.922 b | 5.2644 美元 |
| T2`zstd-level-6` | 5.9076 秒 | 648.333.128 b | 5.2728 美元 |
| T2`zstd-level-7` | 5.7557 秒 | 648.343.350 b | 5.4069 美元 |
| T2`zstd-level-8` | 5.9004 s | 648.341.149 b | 5.5170 美元 |
| T2`zstd-level-9` | 8.8779 秒 | 648.335.678 b | 5.5076 美元 |
| T2`snap` | 128.50 毫秒 | 648.918.453 b | 107.04 毫秒 |
| T2`snappy-framed` | 1.6064 秒 | 649.027.666 b | 324.44 毫秒 |
| T2`snappy-framed + crc` |  |  | 1.8128 秒 |
| T2`deflate-Fast` | 8.6462 秒 | 648.538.656 b | 16.544 秒 |
| T2`deflate-Default` | 16.693 秒 | 648.426.143 b | 16.252 秒 |
| T2`deflate-Best` | 17.246 秒 | 648.400.325 b | 16.208 秒 |
| T2`flate2-1` | 4.6952 秒 | 648.842.015 b | 2.0983 秒 |
| T2`flate2-2` | 20.246 秒 | 648.514.794 b | 528.90 毫秒 |
| T2`flate2-3` | 20.439 秒 | 648.473.313 b | 581.54 毫秒 |
| T2`flate2-4` | 20.464 秒 | 648.487.896 b | 591.07 毫秒 |
| T2`flate2-5` | 20.475 秒 | 648.472.324 b | 602.50 毫秒 |
| T2`flate2-6` | 20.593 秒 | 648.430.184 b | 602.63 毫秒 |
| T2`flate2-7` | 20.763 秒 | 648.406.714 b | 604.39 毫秒 |
| T2`flate2-8` | 20.897 秒 | 648.404.739 b | 605.78 毫秒 |
| T2`yazi-BestSpeed` | 22.319 秒 | 648.532.301 b | 232.64 毫秒 |
| T2`yazi-Default` | 24.115 秒 | 648.430.184 b | 354.83 毫秒 |
| T2`yazi-BestSize` | 24.478 秒 | 648.404.238 b | 359.26 毫秒 |
| T2`lzma-rs` | 36.416 秒 | 657.469.682 b | 63.492 秒 |
| T2`lzma-rs/2` | 131.01 毫秒 | 650.644.056 b | 157.51 毫秒 |
| T2`lzma-rs/xz` | 131.32 毫秒 | 650.644.056 b | 156.57 毫秒 |
| T2`zopfli` | 1143.0 秒 | 648.028.632 b | — |
| T2`brotli` | 991.38 秒 | 648.143.053 b | 744.05 毫秒 |
| `tar`T2 | 139.79 毫秒 | 650.615.808 b | — |
| T2`zip` | 20.725 秒 | 648.430.290 b | 903.65 毫秒 |

随机:

| **随机** | **打包时间** | **字节打包** | **解包时间** |
| T2`uncompressed` | — | 104.857.600 b | — |
| T2`lz4-compression` | 613.13 毫秒 | 105.268.759 b | 17.846 毫秒 |
| T2`lz4_flex` | 12.249 毫秒 | 105.268.808 b | 9.4065 毫秒 |
| T2`lz_fear` | 58.225 毫秒 | 104.857.715 b | 98.943 毫秒 |
| T2`lzzzz` | 10.981 毫秒 | 105.268.808 b | 6.0830 纳秒 |
| T2`zstd-level-1` | 62.791 毫秒 | 104.860.010 b | 264.05 纳秒 |
| T2`zstd-level-2` | 63.049 毫秒 | 104.860.010 b | 264.89 纳秒 |
| T2`zstd-level-3` | 73.445 毫秒 | 104.860.010 b | 263.81 纳秒 |
| T2`zstd-level-4` | 86.024 毫秒 | 104.860.010 b | 263.88 纳秒 |
| T2`zstd-level-5` | 414.09 毫秒 | 104.860.010 b | 266.23 纳秒 |
| T2`zstd-level-6` | 499.91 毫秒 | 104.860.010 b | 265.65 纳秒 |
| T2`zstd-level-7` | 502.17 毫秒 | 104.860.010 b | 263.70 纳秒 |
| T2`zstd-level-8` | 503.29 毫秒 | 104.860.010 b | 264.23 纳秒 |
| T2`zstd-level-9` | 989.28 毫秒 | 104.860.010 b | 263.80 纳秒 |
| T2`snap` | 20.548 毫秒 | 104.862.404 b | 17.891 毫秒 |
| T2`snappy-framed` | 258.06 毫秒 | 104.880.010 b | 53.925 毫秒 |
| T2`snappy-framed + crc` |  |  | 288.75 毫秒 |
| T2`deflate-Fast` | 1.3971 秒 | 104.874.105 b | 2.6327 秒 |
| T2`deflate-Default` | 2.6175 秒 | 104.874.100 b | 2.6149 秒 |
| T2`deflate-Best` | 2.6238 秒 | 104.874.100 b | 2.6236 秒 |
| T2`flate2-1` | 762.13 毫秒 | 104.954.683 b | 290.82 毫秒 |
| T2`flate2-2` | 3.2967 秒 | 104.874.120 b | 18.494 毫秒 |
| T2`flate2-3` | 3.3415 秒 | 104.874.120 b | 18.491 毫秒 |
| T2`flate2-4` | 3.3275 秒 | 104.874.120 b | 18.513 毫秒 |
| T2`flate2-5` | 3.3259 秒 | 104.874.120 b | 18.515 毫秒 |
| T2`flate2-6` | 3.3308 秒 | 104.874.120 b | 18.512 毫秒 |
| T2`flate2-7` | 3.3412 秒 | 104.874.120 b | 18.457 毫秒 |
| T2`flate2-8` | 3.3266 秒 | 104.874.120 b | 18.456 毫秒 |
| T2`yazi-BestSpeed` | 3.6276 秒 | 104.874.120 b | 18.529 毫秒 |
| T2`yazi-Default` | 3.9292 秒 | 104.874.120 b | 18.020 毫秒 |
| T2`yazi-BestSize` | 3.9184 秒 | 104.874.120 b | 18.064 毫秒 |
| T2`lzma-rs` | 5.8499 秒 | 106.344.201 b | 10.309 秒 |
| T2`lzma-rs/2` | 21.551 毫秒 | 104.862.401 b | 25.388 毫秒 |
| T2`lzma-rs/xz` | 21.304 毫秒 | 104.862.401 b | 26.078 毫秒 |
| T2`zopfli` | 172.59 秒 | 104.866.020 b | — |
| T2`brotli` | 114.65 秒 | 104.857.921 b | 103.72 毫秒 |
| T2`tar` | 22.409 毫秒 | 104.859.136 b | — |
| T2`zip` | 3.3542 秒 | 104.874.226 b | 109.24 毫秒 |

像往常一样，我的基准可以在 GitHub 上找到。

## [log rocket](https://lp.logrocket.com/blg/rust-signup):Rust 应用的 web 前端的全面可见性

调试 Rust 应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监控和跟踪 Rust 应用程序的性能、自动显示错误、跟踪缓慢的网络请求和加载时间感兴趣，

[try LogRocket](https://lp.logrocket.com/blg/rust-signup)

.

[![LogRocket Dashboard Free Trial Banner](img/d6f5a5dd739296c1dd7aab3d5e77eeb9.png)](https://lp.logrocket.com/blg/rust-signup)

LogRocket 就像是网络和移动应用程序的 DVR，记录你的 Rust 应用程序上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket 还可以监控应用的性能，报告客户端 CPU 负载、客户端内存使用等指标。

现代化调试 Rust 应用的方式— [开始免费监控](https://lp.logrocket.com/blg/rust-signup)。