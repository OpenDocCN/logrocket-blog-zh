<html>
<head>
<title>A guide to theming in CSS - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>CSS - LogRocket博客主题化指南</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/a-guide-to-theming-in-css/#0001-01-01">https://blog.logrocket.com/a-guide-to-theming-in-css/#0001-01-01</a></blockquote><div><article class="article-post">
<p>多年来，CSS一直在发展，以迎合现代UI设计不断增长的需求和灵活性要求。对高度可定制的应用程序的需求正在迅速增长，因此需要能够创建这种网站的开发人员。</p>
<p>主题化是一种能力，可以根据不同的上下文来设计我们网站的不同方面，同时仍然保持视觉吸引力。它可以像改变颜色和背景或字体大小和图标一样简单。在CSS中，我们可以通过在一个上下文中拼凑各种CSS变量(道具)来实现主题化(例如，黑色和白色)，以便更好地呈现应用程序。</p>
<p>在本教程中，我们将介绍如何使用CSS变量开发主题感知的应用程序。我们还将学习如何使用CSS变量和JavaScript来定制网站和应用程序。</p>
<h2>CSS变量</h2>
<p>一个<strong> CSS变量</strong>(也称为自定义属性)是一个变量，您可以为它分配一个CSS值，并在整个应用程序中重用它。</p>
<p>在旧版本的CSS中，为CSS属性定义不同的值并在需要的地方重复应用它们是很常见的。在下面的示例中，<code>a</code>元素被设置为<strong>黑色(#000) </strong>，尽管其他元素<strong> (p) </strong>也需要使用相同的颜色值<strong> (#000) </strong>，但是每次您想要在另一个元素上使用颜色值<strong> (#000) </strong>时，都需要显式地键入颜色值。</p>
<pre>a {
  color: #000;
}

p {
  color: #000;
}</pre>
<p>使用CSS变量，我们只需要定义一次值，然后在需要的地方引用它。这等同于在任何编程语言中定义变量。在下面的例子中，我们在CSS文档的顶层声明了一个变量<strong> black </strong>，然后在需要的地方引用它。</p>
<pre>:root {
   --black: #000;
}

a {
   color: var(--black);
}

p {
   color: var(--black);
}</pre>
<blockquote><p>N/B:声明CSS变量时，语法是<code>**--**</code>，后面跟变量名。为了引用它，我们在我们希望分配给它的属性上调用<code>var(--variable-name)</code>。</p></blockquote>
<h2>遗产</h2>
<p>CSS变量的作用范围可以是应用程序中的某些组件，必要时可以在内部组件中被覆盖。</p>
<p>这是让CSS变量脱颖而出的一个特性，也是让它非常适合创建主题感知网站的原因。在下面的例子中，用两种不同的背景色定义了内部div和外部div。首先，我们通过将<code>.outer-div</code>的值设置为黑色来定义<code>--some-color</code>。然后我们在<code>.inner-div</code>重新定义它，将它的值设置为白色，使它覆盖这个元素下的值。</p>
<p>第一个<code>.text-color</code>获取在<code>.outer-div</code>定义的值，因为那是它的父节点，而第二个<code>.text-color</code> div从<code>.inner-div</code>获取它，因为那是该div的直接子节点。</p>
<p>切换主题</p>
<h2>有了上面的插图，要创建一个主题化的网站，剩下的工作就是找出一种方法，根据当前的上下文交换各种元素的属性值。</h2>
<p>为了更好地理解这个概念，我们来谈谈黑白主题。在非常基本的层面上，为了支持网站的黑白主题，背景和文本颜色必须交替使用以保持可读性。因此，当我们查看黑色主题时，文本颜色应该是白色，而当我们查看白色主题时，文本颜色应该是黑色。</p>
<p>下面这支笔展示了网站在白色主题下的样子:</p>
<p>The following pen shows what the website looks like on a white theme:</p>
<p>下面这支笔展示了网站在黑色主题下的样子:</p>
<p>The following pen shows what the website looks like on a black theme:</p>
<p>通常，在一个网站上，我们可能有一个开关，使我们能够在可用的主题之间切换。为了实时改变CSS变量，我们需要添加一点JavaScript来控制这个过程。</p>
<p>让我们创建一个具有深色和浅色主题的页面，并添加一些JavaScript，以便在单击复选框时切换:</p>
<p>Let’s create a page with dark and light themes and add some JavaScript so that it switches whenever the checkbox is clicked:</p>
<p>在上面的CSS中，我们定义了两个站点范围的颜色集:</p>
<p>根包含了浅色主题所需的默认颜色，<code>“data-theme=dark”</code>包含了我们网站各个部分深色主题所需的所有颜色。</p>
<pre>:root {
    --primary-color: #302AE6;
    --secondary-color: #536390;
    --font-color: #424242;
    --bg-color: #fff;
    --heading-color: #292922;
}

AND 

[data-theme="dark"] {
    --primary-color: #9A97F3;
    --secondary-color: #818cab;
    --font-color: #e1e1ff;
    --bg-color: #161625;
    --heading-color: #818cab;
}</pre>
<p>我们还添加了一个切换框，用于在用户点击时切换主题。</p>
<p>接下来，我们添加一些JavaScript来实现交换:</p>
<p>我们是如何实现这一目标的:</p>
<pre>const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');

function switchTheme(e) {
    if (e.target.checked) {
        document.documentElement.setAttribute('data-theme', 'dark');
    }
    else {
        document.documentElement.setAttribute('data-theme', 'light');
    }    
}

toggleSwitch.addEventListener('change', switchTheme, false);</pre>
<p>我们用查询选择器选择复选框</p>
<ul>
<li>我们创建一个函数，在选中时将应用程序的上下文更改为暗色，在未选中时更改为亮色</li>
<li>最后，我们添加一个事件监听器来监听动作</li>
<li>主题化网站的一个好处是能够存储用户的偏好，所以下次用户访问网站时，它会自动加载到那个上下文中。为此，我们将利用本地存储。</li>
</ul>
<p>将下面几行添加到上面的代码片段中:</p>
<p>既然我们保存了用户偏好，我们需要在每次站点加载时检查它，这样我们就知道向用户显示哪个版本。将此代码片段添加到Javascript文档的顶层:</p>
<pre>if (e.target.checked) {
    document.documentElement.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', 'dark'); //this will be set to dark
  }
else {
    document.documentElement.setAttribute('data-theme', 'light');
    localStorage.setItem('theme', 'light'); //this will be set to light
}</pre>
<p>这里，我们检查主题偏好是否已经存储在本地存储中。根据存储的值，我们切换框(通过将其设置为true或false)来交换所需的变量。</p>
<pre>const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;

if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark') {
        toggleSwitch.checked = true;
    }
}</pre>
<p>结论</p>
<h2>在本教程中，我们学习了主题化以及如何使用CSS变量创建一个基本版本的主题化网站。我们还学习了变量继承和局部作用域，以及如何使用基本的JavaScript将它们结合在一起。要了解更多关于CSS主题化的知识，请点击这里查看官方文档。</h2>
<p>你的前端是否占用了用户的CPU？</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>随着web前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端CPU使用情况、内存使用情况等感兴趣，</h2><p>.</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>LogRocket 就像是网络和移动应用的DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>现代化您调试web和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p><p>Modernize how you debug web and mobile apps — <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>