<html>
<head>
<title>How to format quality images using AVIF, Squoosh, and go-avif - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何使用AVIF、Squoosh和go-avif - LogRocket博客格式化高质量的图像</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/#0001-01-01">https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/#0001-01-01</a></blockquote><div><article class="article-post">
 <p><a href="https://aomediacodec.github.io/av1-avif/" target="_blank" rel="noopener noreferrer"> AVIF </a> (AV1图像文件格式)是一种基于<a href="https://en.wikipedia.org/wiki/AV1" target="_blank" rel="noopener noreferrer"> AV1视频编解码器</a>的关键帧的开源、免版税的图像格式。它是由<a href="http://aomedia.org/" target="_blank" rel="noopener noreferrer">开放媒体联盟</a>作为VP9的继任者开发的，该联盟包括几家视频点播提供商，如谷歌、亚马逊、微软和网飞。</p>
<p>在2018年发布后，它迅速确立了自己作为顶级视频编解码器的地位。脸书和网飞等公司对其进行了测试，以了解其在自己的流媒体视频基础设施中的表现，结果给他们留下了深刻的印象。</p>
<p>AV1编解码器背后的大脑还决定创建一种图像文件格式，该格式使用相同的压缩算法以较低的文件大小产生高质量的图像，最终导致了AVIF格式的发展，该格式于2019年2月获得正式批准。</p>
<p>本文将向您展示如何使用这种图像格式来压缩图像，同时保持视觉保真度，最终为您的用户提供更好的体验。</p>
<h2>将AVIF与JPEG和WebP进行比较</h2>
<p>与JPEG和WebP格式相比，AVIF格式显著减小了文件大小。以下是每种格式在大致相同的视觉质量下的比较:</p>
<figure id="attachment_27277" aria-describedby="caption-attachment-27277" class="wp-caption aligncenter"><img data-attachment-id="27277" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/c5p3xikq/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ.png" data-orig-size="730,165" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AVIF-image-format-JPEG-WebP" data-image-description="" data-image-caption="&lt;p&gt;Left to right: JPEG, WebP, and AVIF. Can you tell the difference?&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ-300x68.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ.png" decoding="async" class="wp-image-27277 size-full jetpack-lazy-image" src="../Images/3726106c557a7b52cae56fdc480570ca.png" alt="AVIF image format comparison JPEG WebP" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ-300x68.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="27277" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/c5p3xikq/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ.png" data-orig-size="730,165" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AVIF-image-format-JPEG-WebP" data-image-description="" data-image-caption="&lt;p&gt;Left to right: JPEG, WebP, and AVIF. Can you tell the difference?&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ-300x68.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ.png" decoding="async" loading="lazy" class="wp-image-27277 size-full" src="../Images/3726106c557a7b52cae56fdc480570ca.png" alt="AVIF image format comparison JPEG WebP" srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ-300x68.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/C5p3XiKQ.png"/></noscript><figcaption id="caption-attachment-27277" class="wp-caption-text">Left to right: JPEG, WebP, and AVIF. Can you tell the difference?</figcaption></figure>
<p>上述示例显示了文件大小之间的显著差异，尽管视觉差异可以忽略不计。JPEG版本最大，为98.3kB，而WebP版本则小了约30%，为69 kb。kB。AVIF版本的大小为42.1kB，比JPEG版本小58%，这是一个相当大的差异。</p>
<p>上面的图片是用默认设置的<a href="https://squoosh.app/index.html" target="_blank" rel="noopener noreferrer"> Squoosh </a>创建的。如果你想亲自尝试，这里有一个<a href="https://images.unsplash.com/photo-1506126944674-00c6c192e0a3?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1500&amp;q=100" target="_blank" rel="noopener noreferrer">主图像</a>的链接。</p>
<h2>如何塑造AVIF形象</h2>
<h1><img data-attachment-id="27280" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/uhlqw2xm/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM.png" data-orig-size="730,469" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Squoosh-AVIF-image" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM-300x193.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM.png" decoding="async" class="aligncenter wp-image-27280 size-full jetpack-lazy-image" src="../Images/6349f316050e522c821972792d2263d2.png" alt="Squoosh AVIF image format editing" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM-300x193.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="27280" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/uhlqw2xm/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM.png" data-orig-size="730,469" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Squoosh-AVIF-image" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM-300x193.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM.png" decoding="async" loading="lazy" class="aligncenter wp-image-27280 size-full" src="../Images/6349f316050e522c821972792d2263d2.png" alt="Squoosh AVIF image format editing" srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM-300x193.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/uHLQw2xM.png"/>T3】</noscript></h1>
<p>Squoosh简单易用。您可以从文件系统中选择一个图像，或者使用编辑器提供的一个示例图像。</p>
<p>一旦加载了图像，您可以从许多压缩方法中进行选择，包括MozJPEG、AVIF、WebP和OptiPNG。您可以使用编辑器的左右两侧来完成此操作，这样您就可以将一种压缩方法与另一种压缩方法或原始图像进行比较。您还可以调整压缩级别，以及进入更高级的设置。</p>
<p>当您对设置进行更改时，您会看到结果的预期文件大小与编辑器另一侧的设置进行了比较，并且在中间有一个滑块按钮，您可以向任一方向拖动它，以便您可以轻松地比较两个结果。</p>
<p>AVIF格式的设置很容易理解。您可以调整最低和最高图像质量(在0和62之间)，并选择一个效果级别(值越高，产生结果所需的时间越长)。如果你调整这些设置，你会看到令人印象深刻的结果在可接受的质量水平。</p>
<p><img data-attachment-id="27281" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/2xzkdob9/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9.png" data-orig-size="400,758" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Squoosh-AVIF-image-compression" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9-158x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9.png" decoding="async" class="aligncenter wp-image-27281 size-full jetpack-lazy-image" src="../Images/e2e69d1663adee735906e2c42ca1082a.png" alt="Sqooush AVIF file image compression" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9.png 400w, https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9-158x300.png 158w" data-lazy-sizes="(max-width: 400px) 100vw, 400px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="27281" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/2xzkdob9/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9.png" data-orig-size="400,758" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Squoosh-AVIF-image-compression" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9-158x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9.png" decoding="async" loading="lazy" class="aligncenter wp-image-27281 size-full" src="../Images/e2e69d1663adee735906e2c42ca1082a.png" alt="Sqooush AVIF file image compression" srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9.png 400w, https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9-158x300.png 158w" sizes="(max-width: 400px) 100vw, 400px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/2XZKdOB9.png"/></noscript>
<h2>转换一批图像</h2>
<p>使用Squoosh创建AVIF文件的缺点是它一次只能转换一个图像。要批量处理图像，你可以依靠开源工具<a href="https://github.com/Kagami/go-avif" target="_blank" rel="noopener noreferrer"><code>go-avif</code></a>。它是用Go编写的，支持JPEG和PNG文件编码到AVIF。</p>
<p>首先，您需要安装工具。如果您的计算机上安装了Go，使用下面的命令编译该工具，并将二进制文件安装到您的<code>$GOPATH/bin</code>:</p>
<pre>go get github.com/Kagami/go-avif/...
</pre>
<p>否则，你可以在<a href="https://github.com/Kagami/go-avif/releases" target="_blank" rel="noopener noreferrer">发布页面</a>下载预编译的Windows、macOS或Linux二进制文件，并将其复制到你的<code>$PATH</code>。<code>go-avif</code>最简单的用法如下所示。这将使用默认设置将单个JPEG图像转换为AVIF。</p>
<pre>avif -e cat.jpg -o kitty.avif
</pre>
<p>让我们创建一个脚本，以便我们可以轻松地同时处理许多图像。创建一个新的<code>avif.sh</code>文件，并在其中键入以下代码:</p>
<pre>#!/bin/bash
for f in *.{jpg,jpeg,png}
  do
    name=$(echo "$f" | cut -f 1 -d '.') # Extract the filename without the extension
    avif -e $f -o $name.avif # Encode to AVIF

    # Fetch and print size information
    input=`wc -c $f | cut -d' ' -f1`
    output=`wc -c $name.avif | cut -d' ' -f1`
    echo "File $f — Original file size: $(($input/1000)) kB, AVIF file size: $(($output/1000)) kB."
  done
</pre>
<p>该脚本将处理当前文件夹中的所有JPEG和PNG图像，并使用<code>go-avif</code>工具的默认设置将它们转换为AVIF格式。您可以使用<code>avif --help</code>显示其他可用的设置，并试验它们以获得不同的结果。</p>
<p>将脚本移动到包含图像的文件夹中，将其标记为可执行，然后执行它:</p>
<pre>chmod +x avif.sh
./avif.sh
</pre>
<p>这将处理每个图像，并将AVIF输出放在同一个文件夹中。每次转换后，您还会看到文件大小的比较。正如你从下面的图片中看到的，即使不调整任何设置，你也可以节省很多钱。</p>
<p><img data-attachment-id="27655" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/avif-output-file-comparison/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-output-file-comparison-e1603729265161.png" data-orig-size="730,465" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AVIF output file comparison" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-output-file-comparison-300x191.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-output-file-comparison-1024x652.png" decoding="async" class="aligncenter size-full wp-image-27655 jetpack-lazy-image" src="../Images/3d1639ab3ea7f9630da42f7627ac41b3.png" alt="AVIF output file comparison" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-output-file-comparison-e1603729265161.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-output-file-comparison-e1603729265161.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="27655" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/avif-output-file-comparison/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-output-file-comparison-e1603729265161.png" data-orig-size="730,465" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AVIF output file comparison" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-output-file-comparison-300x191.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-output-file-comparison-1024x652.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-27655" src="../Images/3d1639ab3ea7f9630da42f7627ac41b3.png" alt="AVIF output file comparison" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-output-file-comparison-e1603729265161.png"/></noscript>
<p>如何在网上使用AVIF</p>
<h2>让我们先解决浏览器支持的问题。AVIF目前获得的支持非常有限。它仅在桌面Chrome(85版及更高版本)中受支持，尽管官方Firefox支持预计将很快到来(您可以通过<code>about:config</code>中的<code>image.avif.enabled</code>标志在Firefox 77或更高版本中启用实验性支持)。至于Safari，就让我们不要花10年时间来添加像WebP这样的支持。</h2>
<p><img data-attachment-id="27656" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/avif-supported-browsers-chrome-firefox/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox.png" data-orig-size="730,290" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AVIF supported browsers chrome firefox" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox-300x119.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox.png" decoding="async" class="aligncenter wp-image-27656 size-full jetpack-lazy-image" src="../Images/4ba8554b0593c13ec1c04ee25db6295b.png" alt="AVIF supported browsers chrome firefox" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox-300x119.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox.png"/></p>
<p>无论如何，在你的网站和应用程序中使用AVIF之前，你不必等待所有的浏览器都支持它。当不支持AVIF时，您可以使用<code>&lt;picture&gt;</code>元素来提供JPEG或WebP的支持:</p><noscript><img data-lazy-fallback="1" data-attachment-id="27656" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/avif-supported-browsers-chrome-firefox/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox.png" data-orig-size="730,290" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AVIF supported browsers chrome firefox" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox-300x119.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox.png" decoding="async" loading="lazy" class="aligncenter wp-image-27656 size-full" src="../Images/4ba8554b0593c13ec1c04ee25db6295b.png" alt="AVIF supported browsers chrome firefox" srcset="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox-300x119.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/AVIF-supported-browsers-chrome-firefox.png"/></noscript>
<p>上面的代码片段可以在任何浏览器中运行，甚至是那些不支持<code>&lt;picture&gt;</code>元素的浏览器(所有版本的Internet Explorer)。在这种情况下，将显示在<code>&lt;img&gt;</code>标签中指定的源。如果你需要<code>&lt;picture&gt;</code>在任何地方工作，这里有一个<a href="https://github.com/scottjehl/picturefill" target="_blank" rel="noopener noreferrer">聚合填充</a>可以使用。</p>
<pre>&lt;picture&gt;
  &lt;source srcset="image.avif" type="image/avif"&gt;
  &lt;source srcset="image.webp" type="image/webp"&gt;
  &lt;source srcset="image.jpg" type="image/jpeg"&gt;
  &lt;img src="image.jpeg" alt="Description of the image"&gt;
&lt;/picture&gt;
</pre>
<p>avi的局限性</p>
<h2>除了AVIF格式明显的浏览器支持限制(随着时间的推移，它一定会变得更好)之外，在web使用中采用AVIF还有两个主要缺点。</h2>
<p>不支持渐进式渲染</p>
<h3>标准JPEG和WebP图像从上到下逐行加载，直到图像完全加载。JPEG格式还支持渐进式编码方法，该方法会首先加载完整图像的模糊版本，随着其余字节的到达，该图像会逐渐变得清晰。</h3>
<p>渐进式渲染的优点是，即使只下载了文件的一小部分，也可以看到整个图像。它还使图像加载感觉比从上到下渲染更快，因为整个图像从一开始就是可见的。</p>
<p><img data-attachment-id="27653" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/avif-demo-1-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/avif-demo-1-1.gif" data-orig-size="730,367" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="avif-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/avif-demo-1-1-300x151.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/avif-demo-1-1.gif" decoding="async" class="aligncenter size-full wp-image-27653 jetpack-lazy-image" src="../Images/2d9fc55d70df5830556f92ae438e48ae.png" alt="AVIF demo" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/10/avif-demo-1-1.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/avif-demo-1-1.gif"/></p>
<p> </p><noscript><img data-lazy-fallback="1" data-attachment-id="27653" data-permalink="https://blog.logrocket.com/how-to-format-quality-images-using-avif-squoosh-and-go-avif/avif-demo-1-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/10/avif-demo-1-1.gif" data-orig-size="730,367" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="avif-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/10/avif-demo-1-1-300x151.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/10/avif-demo-1-1.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-27653" src="../Images/2d9fc55d70df5830556f92ae438e48ae.png" alt="AVIF demo" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/10/avif-demo-1-1.gif"/></noscript>
<p>不幸的是，AVIF既不支持自顶向下也不支持渐进式渲染。你要么看到完全加载的图像，要么什么也看不到，如上面的视频所示(感谢杰克·阿奇博尔德制作了这个演示)。这使得这种格式可能不适合大图像。这是你在网站上部署AVIF之前要考虑的事情。</p>
<p>软件支持乏善可陈</p>
<h3>AVIF是一种新的格式，所以它缺乏像JPEG和PNG这样的长期格式所具有的普遍支持。目前，只有极少数图片浏览者支持AVIF文件，而且这种情况短期内不太可能改变。如果你网站的用户倾向于将图片保存到他们的设备上，这就造成了一个潜在的问题，因为他们最终会下载一个他们什么也做不了的文件。</h3>
<p>更多来自LogRocket的精彩文章:</p><div class="code-block code-block-54">
<hr/>
<h3>缓解这个问题的一个方法是提供一个指向图像的JPEG或PNG版本的显式下载链接，以便即使采用AVIF也能保留这两种格式的兼容性优势。</h3>

<hr/></div>
<p>结论</p>
<h2>尽管当前浏览器支持有限，并且存在上面讨论的其他缺点，但AVIF格式是一种非常值得研究的格式，因为与JPEG、PNG和WebP文件相比，在同等视觉质量水平下，它大大节省了文件大小。</h2>
<p>通过在你的网站上采用AVIF，你可以在不降低图像质量的情况下降低页面加载时间。您可以从为图像子集部署它开始，然后随着时间的推移扩展您的用途。所以，今天就去尝试吧，这是值得的！</p>
<p>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</p><div class="code-block code-block-1">
<div class="blog-plug base-cta"><h2><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来告诉您哪些问题对大多数用户有影响，并提供您需要修复的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p>
<p>Focus on the bugs that matter — <a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">try LogRocket today</a>.</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>