<html>
<head>
<title>Submitting HTML forms using JavaScript frameworks (Vue, React, Hyperapp) - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用JavaScript框架提交HTML表单</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/submitting-html-forms-using-javascript-frameworks-vue-react-hyperapp-44664dba1218/#0001-01-01">https://blog.logrocket.com/submitting-html-forms-using-javascript-frameworks-vue-react-hyperapp-44664dba1218/#0001-01-01</a></blockquote><div><div class="section-inner sectionLayout--insetColumn">
<p class="graf graf--p"><strong class="markup--strong markup--p-strong">在表单中实现Vue</strong></p>
<p class="graf graf--p">在上一节中，我们已经解释了在HTML结构和<code>@click</code>指令中看到像<code>v-model</code>这样的属性的原因。这里，我们展示了处理其余部分的Vue部分是什么样子的。</p>
<p class="graf graf--p">在HTML文档中打开一个脚本文件并粘贴到:</p>
<pre>&lt;script&gt;
var app = new Vue({
    el: '#app',
    data: {
    form: {
    name: '',
    mob: '',
    email: '',
    mess: ''
    }
},
methods: {
  submitForm: function(){
      axios.post('https://httpbin.org/anything', this.form)
      .then(function (response) {
        console.log(response.data);
      })
      .catch(function (error) {
        console.log(error);
      });
  }
}
})
&lt;/script&gt;</pre>
<p class="graf graf--p">在上面的代码块中，我们定义了一个名为form的对象，它包含了我们的数据。接下来，我们定义了一个名为<code>submitForm</code>的方法，它向<code><a href="https://httpbin.org/anything" rel="nofollow">https://httpbin.org/anything</a></code>发出Ajax请求。我们使用httpbin，因为他们的服务允许我们执行免费的HTTP方法。<code>/anything</code>路由将返回我们发送给它的准确数据。</p>
<p class="graf graf--p">看到使用JavaScript提交表单有多简单了吗？您所需要做的就是将URL更改为您的服务器的URL。</p>
<p class="graf graf--p"><strong class="markup--strong markup--p-strong">为什么我的表格没有提交？</strong>我们经常注意到，在编写了看起来正确的代码之后，表单没有提交。我们如何解决这个问题？让我强调一下您的Vue表单可能无法提交的常见原因。</p>
<ul class="postList">
<li class="graf graf--li">通过<code>el</code>键传入Vue对象的id为<code>app</code>的挂载元素不存在，app没有绑定到Vue</li>
<li class="graf graf--li">提交按钮上的点击处理程序不存在/未附加</li>
<li class="graf graf--li">没有引用axios库</li>
<li class="graf graf--li">未引用Vue库</li>
</ul>
<h3 class="graf graf--h3">使用React提交表单</h3>
<p class="graf graf--p">React是一个由脸书开发和维护的用于构建用户界面的JavaScript库。React使得创建交互式ui变得不那么痛苦。为应用程序中的每个状态设计简单的视图，当数据发生变化时，React将有效地更新和呈现正确的组件。</p>
<p class="graf graf--p">首先，让我们定义我们的HTML结构。创建一个名为<code>react.html</code>的文件，并添加:</p>
<pre>&lt;link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"&gt;
&lt;script crossorigin src="https://unpkg.com/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4f3d2a2e2c3b0f7e79">[email protected]</a>/umd/react.development.js"&gt;&lt;/script&gt;
&lt;script crossorigin src="https://unpkg.com/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1361767270673e777c7e532225">[email protected]</a>/umd/react-dom.development.js"&gt;&lt;/script&gt;
&lt;script src="https://unpkg.com/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;div class="container" id="app"&gt;
&lt;/div&gt;</pre>
<p class="graf graf--p">上面的代码片段是一个基本的HTML声明，其中我们:</p>
<ul class="postList">
<li class="graf graf--li">需要引导CSS库</li>
<li class="graf graf--li">需要React JavaScript库</li>
<li class="graf graf--li">需要React-Dom JavaScript库</li>
<li class="graf graf--li">需要Axios JavaScript库，这个库将发出<code>POST</code>请求</li>
<li class="graf graf--li">声明了一个id为<code>app</code>的div，这将是我们的根组件</li>
</ul>
<p class="graf graf--p"><strong class="markup--strong markup--p-strong">将React应用到混音中</strong></p>
<p class="graf graf--p">我们有了一个基本的设置，其中包含所需的可用库和一个react将附加到的根元素。让我们继续react实现。打开脚本标签并输入:</p>
<pre>class Root extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          form: {
            name: "",
            mob: "",
            email: "",
            mess: ""
          }
        };
        this._onInputChange = this._onInputChange.bind(this);
        this._onSubmit = this._onSubmit.bind(this);
      }
      _onInputChange(name, e) {
        var form = this.state.form;
        form[name] = e.target.value;
        this.setState(form);
      }
      _onSubmit() {
        axios
          .post("https://httpbin.org/anything", this.state.form)
          .then(function(response) {
            console.log(response.data);
          })
          .catch(function(error) {
            console.log(error);
          });
      }
      render() {
        return (
          &lt;div className="row"&gt;
            &lt;div className="col-md-4"&gt;
              &lt;div className="panel"&gt;
                &lt;h4 className="heading"&gt;
                  &lt;strong&gt;Quick &lt;/strong&gt; Contact &lt;span /&gt;
                &lt;/h4&gt;
                &lt;div className="form"&gt;
                  &lt;input
                    type="text"
                    required=""
                    placeholder="Please input your Name"
                    className="form-control"
                    onChange={e =&gt; this._onInputChange("name", e)}
                  /&gt;
                  &lt;input
                    type="text"
                    required=""
                    placeholder="Please input your mobile No"
                    className="form-control"
                    onChange={e =&gt; this._onInputChange("mob", e)}
                  /&gt;
                  &lt;input
                    type="text"
                    required=""
                    placeholder="Please input your Email"
                    onChange={e =&gt; this._onInputChange("email", e)}
                    className="form-control"
                  /&gt;
    
                  &lt;textarea
                    placeholder="Your Message"
                    className="form-control"
                    onChange={e =&gt; this._onInputChange("mess", e)}
                  /&gt;
                  &lt;input
                    type="submit"
                    value="submit"
                    name="submit"
                    className="btn btn-primary"
                    onClick={this._onSubmit}
                  /&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        );
      }
    }
    ReactDOM.render(&lt;Root /&gt;, document.getElementById("app"));</pre>
<p class="graf graf--p">让我们回顾一下上面的内容。这里，在我们的构造函数中，我们声明了一个包含表单对象的初始状态，然后我们绑定了两个函数，我们将在输入改变时设置状态并提交表单。</p>
<p class="graf graf--p">在<code>_onInputChange</code>函数中，我们接收两个参数，它们是:</p>
<ul class="postList">
<li class="graf graf--li">名称:元素的名称</li>
<li class="graf graf--li">事件:发生的变更事件</li>
</ul>
<p class="graf graf--p">我们使用这两个参数来设置被改变的确切输入的状态。</p>
<p class="graf graf--p">在<code>_onSubmit</code>函数中，我们向<code><a href="https://httpbin.org/anything" rel="nofollow">https://httpbin.org/anything</a></code>端点发出一个post请求，后者返回发送的确切参数。在这里，这是我们用来作为我们的服务器。</p>
<p class="graf graf--p">让我们仔细看看<code>render</code>函数，在这里元素被渲染。</p>
<p class="graf graf--p">这里，我们定义了5个元素，包括3个输入、一个文本区域(其更改事件绑定到<code>_onInputChange</code>函数)和一个按钮元素(其点击事件绑定到<code>_onSubmit</code>方法)。</p>
<p class="graf graf--p">最后，我们将应用程序附加到HTML标记的一个元素上。</p>
<p class="graf graf--p">为什么我的表单不显示？我敢打赌，你已经得到了一个空白的屏幕，不知道错误来自哪里。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p class="graf graf--p">快速浏览一下render函数，您会注意到我们在其中使用了<code>jsx</code>语法。现在，这就是问题所在。除非你使用babel来编译你的应用程序，否则<code>jsx</code>很可能会失败。这是因为<code>jsx</code>不是常规的javascript语法，在这里，我们使用React的浏览器构建。</p>
<p class="graf graf--p">那么我们如何解决这个问题呢？这是一个简单的修复。</p>
<p class="graf graf--p">任何JSX块都可以转换成对具有三个参数的<code>React.createElement</code>的调用:</p>
<ul class="postList">
<li class="graf graf--li">要创建的元素，例如<code>div</code>、<code>span</code>、<code>ul</code>等</li>
<li class="graf graf--li">一个属性对象，它指定要在该元素上设置的任何属性值，如<code>class</code>、<code>style</code>、<code>required</code>等</li>
<li class="graf graf--li">要放入其中的任何子元素。这可能是一个字符串或对<code>React.createElement</code>的其他调用，以获取更多元素。</li>
</ul>
<p class="graf graf--p">将渲染函数替换为:</p>
<pre>render() {
        return (
            React.createElement("div", { className: 'row' }, [
                React.createElement("div", { className: 'col-md-4' }, [
                    React.createElement("div", { className: 'panel' }, [
                        React.createElement("h4", {}, 'Quick Contact'),
                        React.createElement("div", { className: 'form' }, [
                            React.createElement("input", {
                                type: 'text',
                                placeholder: "Please input your Name",
                                className: "form-control",
                                name: 'name',
                                onChange: (e) =&gt; this._onInputChange('name', e)
                            }),
                            React.createElement("input", {
                                type: 'text',
                                placeholder: "Please input your Mobile number",
                                className: "form-control",
                                name: 'mob',
                                onChange: (e) =&gt; this._onInputChange('mob', e)
                            }),
                            React.createElement("input", {
                                type: 'text',
                                placeholder: "Please input your Email",
                                className: "form-control",
                                name: 'email',
                                onChange: (e) =&gt; this._onInputChange('email', e)
                            }),
                            React.createElement("textarea", {
                                placeholder: "Please your message",
                                className: "form-control",
                                name: 'mess',
                                onChange: (e) =&gt; this._onInputChange('mess', e)
                            }),
                            React.createElement("button", {
                                type: 'button',
                                className: "btn btn-primary",
                                onClick: () =&gt; this._onSubmit()
                            }, "submit"),
    
                        ])
                    ])
                ]),
    
            ])
        );
    }</pre>
<p class="graf graf--p">另外，将<code>ReactDom.render</code>调用更新为:</p>
<pre>ReactDOM.render(
    React.createElement(Root, null),
    document.getElementById('app')
);</pre>
<p class="graf graf--p"><strong class="markup--strong markup--p-strong">为什么我的表格没有提交？</strong>即使执行了我们认为必要的每个步骤并交叉检查了我们的代码，您的表单仍有可能无法提交，我们该如何解决这个问题？</p>
<ul class="postList">
<li class="graf graf--li">确保您的控制台没有抛出错误</li>
<li class="graf graf--li">确保单击和更改事件被正确绑定</li>
<li class="graf graf--li">交叉检查<code>axios</code>库或您用于post请求的库是否被引用</li>
</ul>
<h3 class="graf graf--h3">使用HyperApp提交表单</h3>
<p class="graf graf--p">HyperApp是一个用于构建web应用程序的JavaScript微框架。这个框架极大地减少了您需要理解的概念，以便在保持与其他框架同等水平的同时保持高效。</p>
<p class="graf graf--p">HyperApp在管理状态时坚持使用函数式编程，但采取了一种务实的方法来考虑副作用、异步操作和DOM操作。</p>
<p class="graf graf--p">首先，让我们定义我们的HTML结构。创建一个名为<code>hyper.html</code>的文件，并添加:</p>
<pre>&lt;link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"&gt;
&lt;script src="https://unpkg.com/hyperapp"&gt;&lt;/script&gt;
&lt;script src="https://unpkg.com/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;div class="container" id="app"&gt;
&lt;/div&gt;</pre>
<p class="graf graf--p">上面的代码片段是一个基本的HTML声明，其中我们:</p>
<ul class="postList">
<li class="graf graf--li">需要引导CSS库</li>
<li class="graf graf--li">需要Hyperapp JavaScript库</li>
<li class="graf graf--li">需要Axios JavaScript库，这个库将发出<code>POST</code>请求</li>
<li class="graf graf--li">声明了一个id为<code>app</code>的div，这将是我们的根组件</li>
</ul>
<p class="graf graf--p"><strong class="markup--strong markup--p-strong">向应用程序介绍Hyperapp</strong>我们有了一个基本设置，其中包含所需的可用库和Hyperapp将附加到的根元素。让我们继续react实现。打开脚本标签并输入:</p>
<pre>const h = hyperapp.h;
    const app = hyperapp.app;
    const state = {
      form: {
              name: '',
              mob: '',
              email: '',
              mess: '',
            }
    }
    
    const actions = {
      onInputChange: (event) =&gt; state =&gt; {
        state.form[event.target.name] = event.target.value;
        return state;
      },
      submitForm: () =&gt; {
        console.log(state.form)
    axios.post('https://httpbin.org/anything', state.form)
          .then(function (response) {
          console.log(response.data);
        })
          .catch(function (error) {
          console.log(error);
        });
      }
    }
    
    const view = (state, actions) =&gt; (
      h("div", {class: 'row'}, [
        h("div", {class: 'col-md-4'}, [
          h("div", {class: 'panel'}, [
            h("h4", {}, 'Quick Contact'),
            h("div", {class: 'form'}, [
              h("input", {type: 'text', placeholder: "Please input your Name", class:"form-control", 
                          name: 'name',
                         oninput: (e)=&gt;actions.onInputChange(e)}),
              h("input", {type: 'text', placeholder: "Please input your Mobile number", class:"form-control", 
                          name: 'mob',
                         oninput: (e)=&gt;actions.onInputChange(e)}),
              h("input", {type: 'text', placeholder: "Please input your Email", class:"form-control", 
                          name: 'email',
                         oninput: (e)=&gt;actions.onInputChange(e)}),
               h("textarea", {placeholder: "Please your message", class:"form-control",
                              name: 'mess',
                         oninput: (e)=&gt;actions.onInputChange( e)}),
              h("button", {type: 'button', class:"btn btn-primary", 
                         onclick: ()=&gt;actions.submitForm()}, "submit"),
              
            ])
          ])
        ]),
      ])
    )
    app(state, actions, view, document.getElementById('app'))</pre>
<p class="graf graf--p">让我们回顾一下上面的内容。在这里，我们声明了一个包含表单对象的初始状态，然后继续声明两个动作，我们将在输入改变时设置状态并提交表单。</p>
<p class="graf graf--p">在<code>onInputChange</code>函数中，我们收到一个参数，它是:</p>
<ul class="postList">
<li class="graf graf--li">事件:发生的变更事件</li>
</ul>
<p class="graf graf--p">我们使用这两个参数来设置被改变的确切输入的状态。</p>
<p class="graf graf--p">在<code>_onSubmit</code>函数中，我们向<code><a href="https://httpbin.org/anything" rel="nofollow">https://httpbin.org/anything</a></code>端点发出一个post请求，后者返回发送的确切参数。在这里，这是我们用来作为我们的服务器。</p>
<p class="graf graf--p">在这里，我们一定看到了React和Hyperapp的相似之处。出于我们的目的，我将Hyperapp描述为React的一个轻量级替代方案。</p>
<p class="graf graf--p">在上面代码的render函数中，我们会注意到React的确切相似之处。事实上，你会注意到的唯一区别是用<code>class</code>代替了React的<code>className</code>和<code>onInput</code>代替了<code>onChange</code>。</p>
<blockquote class="graf graf--blockquote"><p><em class="markup--em markup--blockquote-em">出于同样的原因，我们没有在React表单中使用</em> <code><em class="markup--em markup--blockquote-em">jsx</em></code> <em class="markup--em markup--blockquote-em">，同样的原因，我们也没有在这里使用</em> <code><em class="markup--em markup--blockquote-em">jsx</em></code> <em class="markup--em markup--blockquote-em">。如果您使用</em> <code><em class="markup--em markup--blockquote-em">npm</em></code> <em class="markup--em markup--blockquote-em">包并且更喜欢使用</em> <code><em class="markup--em markup--blockquote-em">jsx</em></code> <em class="markup--em markup--blockquote-em">，请随意。</em></p></blockquote>
<h3 class="graf graf--h3">结论</h3>
<p class="graf graf--p">在本教程中，我们看到了使用3种不同的JavaScript框架提交表单是多么容易。我们还看到了当我们的表单没有按预期显示或提交时如何解决常见问题。你对本教程有什么看法或观点想分享吗？请在评论中告诉我们。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</h2><p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的Vue应用</h2><p>调试Vue.js应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的Vue突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Vue应用程序中发生的一切，包括网络请求、JavaScript错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex插件将Vuex突变记录到LogRocket控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试Vue应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>
</div></div>
</div>
</div>    
</body>
</html>