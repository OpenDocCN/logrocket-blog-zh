<html>
<head>
<title>8 external services for Rust - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Rust - LogRocket博客的8个外部服务</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/8-external-services-for-rust/#0001-01-01">https://blog.logrocket.com/8-external-services-for-rust/#0001-01-01</a></blockquote><div><article class="article-post">
<p>开发人员通常使用外部服务，如数据库、工作队列和缓存或数据处理管道，来为他们的web应用程序添加新的维度和功能。随着Rust越来越受欢迎，自然地，它的用于实现通信协议和其他外部服务的高质量板条箱生态系统也越来越受欢迎。</p>
<p/>
<p>在本指南中，我们将了解Rust社区提供的一些最佳高性能外部服务。</p>
<h2>1.<code>lapin</code></h2>
<p><code><a href="https://crates.io/crates/lapin" target="_blank" rel="noopener noreferrer">lapin</a></code>提供高级消息队列协议(AMQP)的完整异步实现，用于与RabbitMQ消息代理进行通信。它是创建微服务、工作队列和服务间通信的基础库。</p>
<p><code>lapin</code>是多个板条箱的基础库，通过不同的包装器支持Tokio运行时、async-io运行时和async-std运行时。它具有AMQP的生产级实现，并支持原生SSL和OpenSSL。<code>lapin</code>机箱还支持不同类型的认证，例如SSL证书和用户名/密码认证。</p>
<p><strong>生产就绪</strong>:是<br/> <strong>异步支持</strong>:是</p>
<h2>2.<code>rdkafka</code></h2>
<p><code><a href="https://crates.io/crates/rdkafka" target="_blank" rel="noopener noreferrer">rdkafka</a></code>为Rust提供了一个Kafka的实现。它是完全异步的。</p>
<p>这个<code>rdkafka</code>箱子是基于<a href="https://github.com/edenhill/librdkafka" target="_blank" rel="noopener noreferrer"> librdkafka </a> C库的。它为librdkafka库提供了一个安全完整的接口。支持Kafka大于0.8的所有版本。</p>
<p><code>rdkafa</code>速度极快；根据<code>rdkafka's</code> <a href="https://github.com/fede1024/rust-rdkafka#one-million-messages-per-second" target="_blank" rel="noopener noreferrer">自述</a>上的基准测试，它每秒可以处理多达100万条消息。<code>rdkafka</code>在librdkafka图书馆内部使用<code>rdkafka-sys</code>板条箱进行FFI。</p>
<p><code>rdkafka</code>的特点包括:</p>
<ul>
<li>从单个或多个主题进行消费的能力</li>
<li>自动消费者再平衡</li>
<li>可定制的重新平衡，带有重新平衡前后的回调</li>
<li>同步和异步消息生成</li>
<li>可定制的偏移提交</li>
<li>能够创建和删除主题，添加和编辑分区</li>
<li>能够改变代理和主题配置</li>
</ul>
<p><strong>生产就绪</strong>:是<br/> <strong>异步支持</strong>:是</p>
<h2>3.<code>nats</code></h2>
<p>机箱为Rust中的NATS消息系统提供支持。它同时支持同步和异步，并且开箱即可与Tokio和async-std一起使用。这是用纯铁锈写的。</p>
<p>是Rust的官方客户端，由nat.io团队维护。它支持基于JWT、令牌、密钥和基于用户名/密码的身份验证。</p>
<p><code>nats</code>箱的主要优点是它能够生成迭代器。</p>
<p><code>nats</code>板条箱的特点包括:</p>
<ul>
<li>基本发布/订阅</li>
<li>请求/回复(信号和流)</li>
<li>证明</li>
<li>连接丢失时的重新连接</li>
<li>TLS支持</li>
<li>直接异步支持</li>
</ul>
<h2>4.<code>arrow</code>和<code>datafusion</code></h2>
<p><code><a href="https://docs.rs/arrow/2.0.0/arrow/" target="_blank" rel="noopener noreferrer">arrow</a></code>提供了Apache Arrow所需的数据类型，而<code><a href="https://crates.io/crates/datafusion" target="_blank" rel="noopener noreferrer">datafusion</a></code>提供了类似于查询<code>arrow</code>数组和数据布局的SQL。</p>
<p>一般来说，<code>arrow</code> crate提供了开发使用箭头数组的代码的功能，而<code>datafusion</code>提供了SQL中常见的大多数操作，join和window函数除外。</p>
<p><code>arrow</code>实现规范中的所有格式，除了某些字典。它还支持一些垂直业务的SIMD业务。</p>
<p><code>datafusion</code>支持异步执行、自定义函数、聚合、整体执行节点。</p>
<p><strong>生产就绪</strong>:是<br/> <strong>异步支持</strong>:是</p>
<h2>5.<code>tantivy</code></h2>
<p><code><a href="https://crates.io/crates/tantivy" target="_blank" rel="noopener noreferrer">tantivy</a></code>是全文搜索的构建块。Tt支持17种拉丁语言和许多其他地区语言的符号化。<code>tantivy</code>还支持多线程和SIMD，实现快速高效的索引和搜索。</p>
<p>根据<code>tantivy</code>机箱提供的<a href="https://tantivy-search.github.io/bench/" target="_blank" rel="noopener noreferrer">基准</a>，<code>tantivy</code>有一个自然的查询语言(如“logrocket”和“frontend”)，速度极快。</p>
<p>显著特征:</p>
<ul>
<li>单值和多值u64、i64和f64快速字段(相当于Lucene中的doc值)</li>
<li><code>&amp;[u8]</code>快速字段</li>
<li>文本、i64、u64、f64、日期和分层方面字段</li>
<li>LZ4压缩文档存储</li>
<li>范围查询</li>
<li>分面搜索</li>
</ul>
<p><strong>生产就绪</strong>:是<br/> <strong>异步支持</strong>:不适用</p>
<h2>6.<code>elasticsearch</code></h2>
<p>板条箱是一个官方的弹性搜索客户端。它支持使用Tokio运行时的异步，以及<code>native-tls</code>和<code>rust-tls</code>。</p>
<p>虽然是alpha版本，但是它有一个完整的Elasticsearch协议的实现。它支持基于凭据和基于证书的身份验证。</p>
<p><strong>生产就绪</strong>:否<br/> <strong>异步支持</strong>:是</p>
<h2>7.<code>redis</code></h2>
<p><code><a href="https://crates.io/crates/redis" target="_blank" rel="noopener noreferrer">redis</a></code>是一个内存数据库，可用于创建缓存、工作队列和创建微服务。Rust对Redis数据库有很好的支持。</p>
<p>正如“<a href="https://blog.logrocket.com/11-database-drivers-and-orms-for-rust-that-are-ready-for-production/" target="_blank" rel="noopener noreferrer">11 Rust的数据库驱动程序和ORM已准备好投入生产</a>”中所述，“<code>redis</code>提供了高级和低级API。所有的查询都是流水线式的，这意味着可以同时发送多个查询。</p>
<p>拥有Redis通信协议的完整实现，但尚不支持发布/订阅。机箱使用Tokio作为异步运行时，并支持Lua脚本、自动重新连接和使用<code>r2d2</code>机箱的连接池。</p>
<h2>8.<code>pulsar</code></h2>
<p><code><a href="https://crates.io/crates/pulsar" target="_blank" rel="noopener noreferrer">pulsar</a></code>是Apache Pulsar的异步客户端。它是用纯Rust编写的，不依赖于Pulsar CPP库。</p>
<p><code>pulsar</code>机箱支持开箱即用的Tokio和<code>async-std</code>运行时。</p>
<p>显著特征:</p>
<ul>
<li>使用DNS查找的基于URL的(<code>pulsar://</code>和<code>pulsar+ssl://</code>)连接</li>
<li>多主题消费者(基于正则表达式)</li>
<li>TLS连接</li>
<li>可配置的执行器(Tokio或<code>async-std</code>)</li>
<li>带指数补偿的自动重新连接</li>
<li>消息批处理</li>
<li>用LZ4、zlib、zstd或Snappy压缩(可以用Cargo功能停用)</li>
</ul>
<p><strong>生产就绪</strong>:是<br/> <strong>异步支持</strong>:是</p>
<h2>比较Rust外部服务</h2>
<table>
<thead>
<tr>
<th>图书馆</th>
<th>生产就绪</th>
<th>异步支持</th>
<th>外部服务</th>
</tr>
</thead>
<tbody>
<tr>
<td><code><a href="https://crates.io/crates/lapin" target="_blank" rel="noopener noreferrer">lapin</a></code></td>
<td>是啊</td>
<td>是啊</td>
<td>Redis，AMQP通讯协定</td>
</tr>
<tr>
<td><code><a href="https://crates.io/crates/rdkafka" target="_blank" rel="noopener noreferrer">rdkafka</a></code></td>
<td>是</td>
<td>是</td>
<td>阿帕奇卡夫卡</td>
</tr>
<tr>
<td><code><a href="https://crates.io/crates/nats" target="_blank" rel="noopener noreferrer">nats</a></code></td>
<td>是</td>
<td>是</td>
<td>NATS.io</td>
</tr>
<tr>
<td><code><a href="https://docs.rs/arrow/2.0.0/arrow/" target="_blank" rel="noopener noreferrer">arrow</a></code></td>
<td>是</td>
<td>不</td>
<td>阿帕奇箭头</td>
</tr>
<tr>
<td><code><a href="https://crates.io/crates/datafusion" target="_blank" rel="noopener noreferrer">datafusion</a></code></td>
<td>是</td>
<td>是</td>
<td>Apache Arrow (SQL查询)</td>
</tr>
<tr>
<td><code><a href="https://crates.io/crates/tantivy" target="_blank" rel="noopener noreferrer">tantivy</a></code></td>
<td>是</td>
<td>不适用</td>
<td>全面测试搜索</td>
</tr>
<tr>
<td><code><a href="https://crates.io/crates/elasticsearch" target="_blank" rel="noopener noreferrer">elasticsearch</a></code></td>
<td>不</td>
<td>是</td>
<td>弹性搜索</td>
</tr>
<tr>
<td><code><a href="https://crates.io/crates/redis" target="_blank" rel="noopener noreferrer">redis</a></code></td>
<td>是啊</td>
<td>是啊</td>
<td>再说一遍</td>
</tr>
<tr>
<td><code><a href="https://crates.io/crates/pulsar" target="_blank" rel="noopener noreferrer">pulsar</a></code></td>
<td>是</td>
<td>是</td>
<td>阿帕奇脉冲星</td>
</tr>
</tbody>
</table>
<p><a href="https://lp.logrocket.com/blg/rust-signup" target="_blank">log rocket</a>:Rust应用的web前端的全面可见性</p><div class="code-block code-block-29">
<div class="blog-plug inline-plug rust-plug"><h2>调试Rust应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监控和跟踪Rust应用程序的性能、自动显示错误、跟踪缓慢的网络请求和加载时间感兴趣，</h2><p>. </p><a href="https://lp.logrocket.com/blg/rust-signup" target="_blank">try LogRocket</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Rust应用程序上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用的性能，报告客户端CPU负载、客户端内存使用等指标。</p><a class="signup" href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p>现代化调试Rust应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p><p>Modernize how you debug your Rust apps — <a class="signup" href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer">start monitoring for free</a>.</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>