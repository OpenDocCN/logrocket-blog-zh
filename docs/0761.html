<html>
<head>
<title>Creating a dynamic application with LoopBack - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用LoopBack - LogRocket博客创建动态应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/#0001-01-01">https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Node.js是一个流行的JavaScript框架，有一个强大的、不断增长的社区。在生态系统提供的众多东西中，<a href="https://loopback.io/" target="_blank" rel="noopener noreferrer"> LoopBack </a>是构建API和微服务的优秀框架。</p>
<p>根据<a href="https://developer.ibm.com/open/projects/loopback/" target="_blank" rel="noopener noreferrer">官方文档</a>，“LoopBack是一个高度可扩展的、开源的Node.js和基于Express的TypeScript框架，使您能够快速创建由数据库和SOAP或REST服务等后端系统组成的API和微服务。”</p>
<p>express . js——仍然是最受欢迎的<a href="https://snipcart.com/blog/graphql-nodejs-express-tutorial" target="_blank" rel="noopener noreferrer"> Node.js框架</a>——快速、非个性化、极简，但它缺乏成熟的web应用程序框架中常见的大多数功能。因为它是独立的，所以您必须做大量的决策，比如创建支持您的后端的结构和识别最合适的包。你真的需要知道你在做什么，你要去哪里。</p>
<p>使用LoopBack，您的项目具有预定义的结构。您可以使用<a href="https://www.openapis.org/" target="_blank" rel="noopener noreferrer"> OpenAPI </a>标准来定义API端点和模式。您还可以使用连接器轻松地与数据库、web服务和其他平台集成。LoopBack提供了一个内置的API explorer，您可以使用它来测试端点。</p>
<h2 id="whatwewillbuild">我们将建造什么</h2>
<p>对于本教程，您需要在您的机器上安装Node.js (v8+)以及一个文本编辑器。</p>
<p>我们将使用LoopBack构建一个书店应用程序。我们的应用程序将实现基本的CRUD操作，我们将演示如何使用LoopBack的CLI和API explorer。</p>
<h2 id="bootstrappingyourapplication">引导您的应用程序</h2>
<p>为了引导回送应用程序，我们将使用回送CLI。运行以下命令来安装它。</p>
<pre>npm i -g @loopback/cli
</pre>
<p>现在您的机器上已经有了环回CLI工具。接下来，使用CLI工具创建一个新项目。转到您的项目目录并运行以下命令:</p>
<pre>lb4 app
</pre>
<p>这是一个交互式命令，提示您回答几个问题来设置新项目。你需要输入应用的名称；我们就叫它<code>book``-store</code>。对于项目描述，可以输入<code>A dynamic application with Loopback</code>。当要求输入根目录和应用程序类名时，按enter键保持默认值。最后，对于功能，启用beauty、ESLint和<code>loopBackBuild</code>。</p>
<p>这个过程应该是这样的:</p>
<p><img data-attachment-id="16064" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/bootstrapping-app-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback.png" data-orig-size="720,450" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Bootstrapping a book store app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback-300x188.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback.png" decoding="async" class="aligncenter size-full wp-image-16064 jetpack-lazy-image" src="../Images/a421dafbef07b1af5742fe1815a0a8fb.png" alt="Bootstrapping a Book Store App Built With LoopBack" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback-300x188.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="16064" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/bootstrapping-app-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback.png" data-orig-size="720,450" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Bootstrapping a book store app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback-300x188.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-16064" src="../Images/a421dafbef07b1af5742fe1815a0a8fb.png" alt="Bootstrapping a Book Store App Built With LoopBack" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback-300x188.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/bootstrapping-app-loopback.png"/></noscript>
<p>创建项目后，通过运行以下命令启动应用程序。</p>
<pre># Move into the app directory
cd book-store

# Start application
npm start
</pre>
<p>您应该在您的终端上看到一条消息，带有一个<code>URL</code>来测试。当您打开<code>URL</code>时，您应该会看到一个<code>JSON</code>显示在您的浏览器中。</p>
<h2 id="addingabookmodel">添加图书模型</h2>
<p>因为您正在构建一个简单的书店，所以您希望您的应用程序能够存储和检索来自数据源的书籍。为了实现这一点，我们需要构建一个描述您的域对象(数据类型)的模型。</p>
<p>LoopBack提供了装饰器——<code>@model</code>和<code>@property</code>——使得定义的模型是可扩展的。您可以使用<code>@model</code>装饰器来配置模型设置(例如启用严格模式或隐藏某个属性)，使用<code>@property</code>装饰器来定义模型属性特征(例如，将属性类型指定为字符串或布尔值，或者将属性设置为必填)。</p>
<p>下一步是创建一个包含属性列表的book实体——即，<code>id</code>、<code>title</code>、<code>description</code>、<code>author</code>和<code>release_date</code>。您可以使用LoopBack的交互式命令来创建模型。</p>
<p>在您的应用程序目录中运行以下命令，并回答提示以生成您的图书模型。</p>
<pre>lb4 model
</pre>
<p>如果您使用的是同一个终端窗口，您可能需要停止服务器的运行。在Mac上，您可以使用Ctrl+C来停止服务器。</p>
<p>下面是创建模型的过程:</p>
<p><img data-attachment-id="16062" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/add-book-model-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback.png" data-orig-size="720,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding a book model for book store app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback.png" decoding="async" class="aligncenter size-full wp-image-16062 jetpack-lazy-image" src="../Images/253e329e726fe861c2f9bd015b816e74.png" alt="Adding a Book Model for Book Store App Built With LoopBack" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback-300x161.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="16062" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/add-book-model-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback.png" data-orig-size="720,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding a book model for book store app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-16062" src="../Images/253e329e726fe861c2f9bd015b816e74.png" alt="Adding a Book Model for Book Store App Built With LoopBack" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback-300x161.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-model-loopback.png"/></noscript>
<p>对于要在数据库中持久化的模型，该模型必须有一个<code>id</code>属性，并从<code>Entity</code>基类继承。</p>
<h2 id="settingupadatasource">设置数据源</h2>
<p>通过提供必要的配置属性，LoopBack中的数据源充当连接到各种数据源的接口，例如数据库、REST服务、SOAP web服务或gRPC微服务。在上一节中，您根据模型应该接受的数据类型定义了模型。这里，您需要定义数据是如何存储的。</p>
<p>在LoopBack中，应该使用CLI提供的<code>lb4 datasource</code>命令来生成数据源。当您运行这个命令时，您将被询问一些问题。下面是您应该提供的回答的截图。</p>
<p><img data-attachment-id="16065" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/set-up-datasource-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback.png" data-orig-size="720,185" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Setting up a datasource for book store app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback-300x77.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback.png" decoding="async" class="aligncenter size-full wp-image-16065 jetpack-lazy-image" src="../Images/d0bcffc61dfb170eb5319a4634aa54d1.png" alt="Setting Up a Datasource for Book Store App Built With LoopBack" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback-300x77.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="16065" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/set-up-datasource-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback.png" data-orig-size="720,185" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Setting up a datasource for book store app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback-300x77.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-16065" src="../Images/d0bcffc61dfb170eb5319a4634aa54d1.png" alt="Setting Up a Datasource for Book Store App Built With LoopBack" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback-300x77.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/set-up-datasource-loopback.png"/></noscript>
<p>注意:在用户和密码字段中，您可以通过按enter键跳过这些值，因为这只是一个示例应用程序。</p>
<p>在上面的截图中，指定的数据源连接被命名为<code>db</code>，您选择了MongoDB作为数据源连接器。LoopBack提供了其他连接类型供您选择，如Redis、MySQL、<a href="https://blog.logrocket.com/getting-started-with-postgres-in-your-react-app/" target="_blank" rel="noopener noreferrer">PostgreSQL</a>和REST服务。</p>
<h2 id="addingabookrepository">添加图书存储库</h2>
<p>现在您已经有了一个模型和一个数据源，您需要创建一个存储库来处理图书模型对底层数据源的操作。</p>
<p>对于执行CRUD操作的存储库，它需要使用<code>DefaultCrudRepository</code>类，该类将模型与数据源绑定在一起。利用LoopBack CLI为您的应用程序创建存储库。</p>
<p>在项目文件夹中，运行以下命令:</p>
<pre>lb4 repository
</pre>
<p>你的回答应该是这样的:</p>
<p><img data-attachment-id="16063" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/add-book-repository-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback.png" data-orig-size="720,110" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding a book repository for book store app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback-300x46.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback.png" decoding="async" class="aligncenter size-full wp-image-16063 jetpack-lazy-image" src="../Images/55c9800facc5786bca9c9c6d04381a62.png" alt="Adding a Book Repository for Book Store App Built With LoopBack" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback-300x46.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="16063" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/add-book-repository-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback.png" data-orig-size="720,110" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding a book repository for book store app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback-300x46.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-16063" src="../Images/55c9800facc5786bca9c9c6d04381a62.png" alt="Adding a Book Repository for Book Store App Built With LoopBack" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback-300x46.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-repository-loopback.png"/></noscript>
<p>现在在你喜欢的编辑器中打开<code>src/repositories/book.repository.ts</code>文件，比如<a href="https://blog.logrocket.com/learn-these-keyboard-shortcuts-to-become-a-vs-code-ninja/" target="_blank" rel="noopener noreferrer"> VSCode </a>。在文件中，用下面的代码片段替换它:</p>
<pre>// src/repositories/book.repository.ts

import {DefaultCrudRepository} from '@loopback/repository';
import {Book, BookRelations} from '../models';
import {DbDataSource} from '../datasources';
import {inject} from '@loopback/core';
export class BookRepository extends DefaultCrudRepository&lt;
  Book,
  typeof Book.prototype.id,
  BookRelations
&gt; {
  constructor(@inject('datasources.db') dataSource: DbDataSource) {
    super(Book, dataSource);
  }
  public findByTitle(title: string) {
    return this.findOne({where: {title}});
  }
  public findByAuthor(author: string) {
    return this.findOne({where: {author}});
  }
}
</pre>
<p><code>BookRepository</code>类扩展了<code>DefaultCrudRepository</code>类。这使得像创建一本新书一样处理基本的crud操作成为可能。您还可以向存储库中添加定制方法来执行更多的操作，如<code>findByTitle</code>和<code>findByAuthor</code>。</p>
<h2 id="addingthebookcontroller">添加图书控制器</h2>
<p>到目前为止，您已经实现了模型、数据源和存储库，但是您在哪里定义处理应用程序请求的逻辑呢？在LoopBack中，您可以在<code>Controller</code>类中这样做。控制器处理应用程序的请求-响应生命周期。</p>
<p>根据<a href="https://loopback.io/doc/en/lb4/Controllers.html" target="_blank" rel="noopener noreferrer">官方文档</a>，控制器“实现应用程序的业务逻辑，并充当HTTP/REST API和域/数据库模型之间的桥梁。”</p>
<p>在LoopBack中，您需要为您的路由指定一个基本的响应对象——也就是说，如果发出请求，您的API响应将会是什么样子。这个对象被称为API规范，它可以使用<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md#oasObject" target="_blank" rel="noopener noreferrer"> OpenAPI规范</a>。如果您查看应用程序中的<code>PingController</code>(位于<code>src/controllers/ping.controller.ts</code>)，有一个<code>PING_RESPONSE</code>变量作为<code>ping()</code>方法的API规范。</p>
<p>控制器上的每个方法都用于处理来自HTTP/REST API端点的传入请求，执行一些逻辑，并返回响应。</p>
<p>有多种方式来定义到控制器方法的路由。您可以在位于<code>src/application.ts</code>文件中的主应用程序构造函数中定义一个到控制器方法的路径。</p>
<pre>// ... in your application constructor
this.route('get', '/ping', PING_RESPONSE, PingController, 'ping');
</pre>
<p>另一种方式是使用装饰器，比如<code>@get</code>和<code>@post</code>，用路由的元数据来注释控制器方法。</p>
<pre>// Map to `GET /ping`
@get('/ping', {
  responses: {
    '200': PING_RESPONSE,
  },
})
</pre>
<p>装饰器是简单的修改类、属性、方法或方法参数的函数。</p>
<p>现在，通过在终端中运行以下命令来创建一个<code>BookController</code>类:</p>
<pre>lb4 controller
</pre>
<p>这个过程应该是这样的:</p>
<p><img data-attachment-id="16061" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/add-book-controller-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback.png" data-orig-size="720,133" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding a book controller for book store app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback-300x55.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback.png" decoding="async" class="aligncenter size-full wp-image-16061 jetpack-lazy-image" src="../Images/89c4a65af0b96c25093051ee2581ad44.png" alt="Adding a Book Controller for Book Store App Built With LoopBack" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback-300x55.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="16061" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/add-book-controller-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback.png" data-orig-size="720,133" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding a book controller for book store app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback-300x55.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-16061" src="../Images/89c4a65af0b96c25093051ee2581ad44.png" alt="Adding a Book Controller for Book Store App Built With LoopBack" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback-300x55.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/add-book-controller-loopback.png"/></noscript>
<p>如果你打开位于<code>src/controllers</code>中的<code>book.controller.ts</code>文件，你会看到这个类处理大部分的CRUD操作，并与<code>BookRepository</code>类交互。在这个类中，这些方法使用decorators定义了它们的路由。</p>
<p>在<code>BookController</code>类中，您将找到处理创建新书操作的<code>create</code>方法。您将看到<code>BookRepository</code>类，它与图书模型和应用程序数据源交互来创建一本新书。在这个方法之上，路由<code>/books</code>是使用<code>@post</code>装饰器和<code>responses</code>对象定义的，前者表示一个<code>POST</code>请求，后者是响应API规范。</p>
<h2 id="testingtheapp">测试您的应用</h2>
<p>像任何项目一样，你应该测试你的应用程序，以确保它正常工作。使用以下命令运行您的应用程序。</p>
<pre>npm start
</pre>
<p>在浏览器中打开<code><a href="http://127.0.0.1:3000/explorer" rel="nofollow">http://127.0.0.1:3000/explorer</a></code>。您应该看到API explorer显示了为您的<code>BookController</code>类定义的所有端点。</p>
<p>您可以使用explorer界面测试新添加的端点。下面的屏幕截图显示了向<code>/books</code>端点发出的post请求，该请求用于在MongoDB数据源中存储一本新书。</p>
<p><img data-attachment-id="16066" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/testing-newly-added-endpoints-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback.png" data-orig-size="720,419" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Testing newly added endpoints in bookstore app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback.png" decoding="async" class="aligncenter size-full wp-image-16066 jetpack-lazy-image" src="../Images/7008beef5b68c3832f47c7601d48c7a1.png" alt="Testing Newly Added Endpoints in Bookstore App Built With LoopBack" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback-300x175.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="16066" data-permalink="https://blog.logrocket.com/creating-a-dynamic-application-with-loopback/testing-newly-added-endpoints-loopback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback.png" data-orig-size="720,419" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Testing newly added endpoints in bookstore app built with LoopBack" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-16066" src="../Images/7008beef5b68c3832f47c7601d48c7a1.png" alt="Testing Newly Added Endpoints in Bookstore App Built With LoopBack" srcset="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback-300x175.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/03/testing-newly-added-endpoints-loopback.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>如您所见，LoopBack为您节省了大量手工工作。它的CLI提供了广泛的命令，可以做几乎任何事情，从创建模型、存储库和控制器，到为应用程序配置数据源。</p>
<p>LoopBack可用于各种场景，包括CRUD操作(访问数据库)以及与其他基础设施和服务的集成。最后，开始使用LoopBack很简单，因为学习曲线很低。作为一个框架，LoopBack有很大的潜力为Node.js社区带来无数的好处。</p><div class="code-block code-block-23">
<div class="blog-plug inline-plug node-plug"><h2>200只<img src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> <noscript> <img data-lazy-fallback="1" src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> </noscript>显示器出现故障，生产中网络请求缓慢</h2><p>部署基于节点的web应用程序或网站是容易的部分。确保您的节点实例继续为您的应用程序提供资源是事情变得更加困难的地方。如果您对确保对后端或第三方服务的请求成功感兴趣，</p><a href="https://lp.logrocket.com/blg/node-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer"><img src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/><noscript><img data-lazy-fallback="1" src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/></noscript></a><a href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录下用户与你的应用程序交互时发生的一切。您可以汇总并报告有问题的网络请求，以快速了解根本原因，而不是猜测问题发生的原因。</p><p>LogRocket检测您的应用程序以记录基线性能计时，如页面加载时间、到达第一个字节的时间、慢速网络请求，还记录Redux、NgRx和Vuex操作/状态。</p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a><p>. </p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>