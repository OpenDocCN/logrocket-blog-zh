<html>
<head>
<title>JavaScript-free frontends with Blazor - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用Blazor - LogRocket博客的无JavaScript前端</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/js-free-frontends-blazor/#0001-01-01">https://blog.logrocket.com/js-free-frontends-blazor/#0001-01-01</a></blockquote><div><article class="article-post">
<p>如今有许多构建web应用程序的框架和技术。以前，这些都集中于在传统的HTML、CSS和JavaScript项目中呈现内容。</p>
<p>随着WebAssembly(简称Wasm)的出现，工程师现在可以用C、Rust、C#等传统语言构建应用程序，然后像部署HTML、CSS和JavaScript捆绑应用程序一样部署它们。</p>
<p>微软已经建立了一种利用Wasm的开源技术，称为Blazor。布拉索非常强大，因为它带来了。NET开发直接到浏览器。现在可以用C#代替JavaScript构建应用程序，而且还可以利用现有的JavaScript库和前端概念。</p>
<h2>布拉索的一些背景</h2>
<p>微软有两个不同版本的Blazor:</p>
<ol>
<li>Blazor服务器实现使用更传统的。NET app方法，需要服务器通过<a href="https://dotnet.microsoft.com/apps/aspnet/signalr"> SignalR </a>连接到前端进行消息传递。</li>
<li>Blazor WebAssembly实现使用Wasm并将项目打包成可以部署的静态包。</li>
</ol>
<p>Blazor的两个版本现在都可以生产了。服务器版本于2019年投入生产，WebAssembly版本于2020年5月刚刚投入生产。关于这方面的更多信息，我推荐在这里查看Visual Studio杂志的文章。</p>
<p>这两个项目都遵循传统ASP.NET剃刀片的模式。Blazor和传统的ASP.NET razor页面的主要区别在于，你可以将Blazor站点打包成一个单独的应用程序(使用IIS)或者一个静态站点，就像你在Angular、React、Vue.js和其他框架中看到的那样。</p>
<p>由于Blazor也利用了Wasm，所以可以直接连接JavaScript包与C#的依赖关系。您还可以使用组件构建您的Blazor项目<a href="https://docs.microsoft.com/en-us/aspnet/core/blazor/?view=aspnetcore-3.1#components">。我将要介绍的示例项目只使用了一个带有简单模板的页面，但是在真正的“生产”应用程序中，每个页面都有多个组件。</a></p>
<p>这篇文章实际上是对Blazor的高级介绍。我将解释它如何工作的一些基本原理，然后我将介绍一个WebAssembly项目和一个服务器项目。我还将介绍一些关于部署和后续步骤的注意事项。</p>
<p>我们将回顾的示例项目<a href="https://github.com/andrewevans0102/blazor-intro.git">可在GitHub repo这里</a>获得。这篇文章还假设你对C#有所了解，并且期望你已经在你的机器上用这里的<a href="https://docs.microsoft.com/en-us/aspnet/core/blazor/get-started?view=aspnetcore-3.1&amp;tabs=visual-studio">指令</a>设置了Visual Studio。</p>
<h2>Blazor是如何工作的？</h2>
<p><img data-attachment-id="20162" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/blazor-production-flow/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow.jpeg" data-orig-size="671,61" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Blazor’s app production workflow" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow-300x27.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow.jpeg" decoding="async" class="aligncenter size-full wp-image-20162 jetpack-lazy-image" src="../Images/ac73863c754f3dfbba7dbfe464b04eaa.png" alt="Blazor's App Production Workflow" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow.jpeg 671w, https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow-300x27.jpeg 300w" data-lazy-sizes="(max-width: 671px) 100vw, 671px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20162" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/blazor-production-flow/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow.jpeg" data-orig-size="671,61" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Blazor’s app production workflow" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow-300x27.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20162" src="../Images/ac73863c754f3dfbba7dbfe464b04eaa.png" alt="Blazor's App Production Workflow" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow.jpeg 671w, https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow-300x27.jpeg 300w" sizes="(max-width: 671px) 100vw, 671px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-production-flow.jpeg"/></noscript>
<p>Blazor运行的是为Wasm编译的Xamarin的Mono框架版本。最终的结果是，您实际上可以直接在浏览器中运行. NET (C#)应用程序。布拉佐编译你的。NET代码转换成Wasm，然后可以作为静态包进行部署。对于老版本的浏览器，Blazor利用<a href="http://asmjs.org/"> asm.js </a>向下编译成老版本浏览器可以支持的通用框架。</p>
<p>Blazor还支持与JavaScript库的互操作性。您仍然可以在Blazor项目中使用npm模块，只需将它与构建一起导入即可。Blazor在C#中提供了“IJSRuntime”和“JSRuntime ”,以便直接与C#代码旁边的JavaScript包进行交互。<a href="https://docs.microsoft.com/en-us/aspnet/core/blazor/call-javascript-from-dotnet?view=aspnetcore-3.1">点击这里查看微软文档</a>获取更详细的解释。我也推荐在<a href="https://medium.com/swlh/using-npm-packages-with-blazor-2b0310279320">上浏览这篇关于使用Blazor的npm包的文章。</a></p>
<p>Blazor有几个内置的生命周期挂钩，使您能够在应用程序加载、销毁等情况下控制行为。这些就像JavaScript框架中的生命周期挂钩，你可以在这里找到关于它们的细节。</p>
<p>Blazor还有几项内置技术，可以提高web应用程序性能和控制渲染行为。在这里查看预渲染的<a href="https://docs.microsoft.com/en-us/aspnet/core/blazor/hosting-models?view=aspnetcore-3.1#comparison-to-server-rendered-ui">文档</a>，在这里查看<a href="https://docs.microsoft.com/en-us/aspnet/core/performance/blazor/webassembly-best-practices?view=aspnetcore-3.1">细粒度控件</a>。微软有一些很棒的文档，涵盖了这方面的更多细节。我强烈推荐<a href="https://docs.microsoft.com/en-us/archive/msdn-magazine/2018/september/cutting-edge-never-mind-javascript-here%E2%80%99s-blazor#anatomy-of-a-blazor-application">在这里查看帖子</a>。</p>
<h2>示例应用程序</h2>
<p>正如我在介绍中提到的，Blazor有两种风格:WebAssembly和Server版本。在这两种情况下，您都可以使用Visual Studio按照这里的中的<a href="https://docs.microsoft.com/en-us/aspnet/core/blazor/get-started?view=aspnetcore-3.1&amp;tabs=visual-studio">指令来搭建基本项目。</a></p>
<p>对于项目的WebAssembly版本，初始搭建如下所示:</p>
<p><img data-attachment-id="20163" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/webassembly-example-file-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure.png" data-orig-size="342,429" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Initial scaffolding of our example app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure-239x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure.png" decoding="async" class="aligncenter size-full wp-image-20163 jetpack-lazy-image" src="../Images/f22e4b9ac8c7735d2139f7f4b99a074e.png" alt="Initial Scaffolding Of Our Example Project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure.png 342w, https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure-239x300.png 239w" data-lazy-sizes="(max-width: 342px) 100vw, 342px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20163" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/webassembly-example-file-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure.png" data-orig-size="342,429" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Initial scaffolding of our example app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure-239x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20163" src="../Images/f22e4b9ac8c7735d2139f7f4b99a074e.png" alt="Initial Scaffolding Of Our Example Project" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure.png 342w, https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure-239x300.png 239w" sizes="(max-width: 342px) 100vw, 342px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-example-file-structure.png"/></noscript>
<p>项目结构基本遵循以下模式:</p>
<ul>
<li><code>wwwroot</code><ul>
<li>保存你的样式的文件夹和你完成的站点将引用的<code>index.html</code>文件</li>
</ul>
</li>
<li><code>Pages</code><ul>
<li>这是你放置组成你的站点的剃刀页的地方。Visual Studio生成的站点预建了一个计数器和<code>FetchData</code>页面，向您展示如何通过HTTP检索JSON</li>
</ul>
</li>
<li><code>Shared</code><ul>
<li>这是您可以放置站点的主布局文件以及应用程序的其余部分将共享的其他公共视图的地方</li>
</ul>
</li>
<li><code>Program.cs</code><ul>
<li>当您运行应用程序时，这是应用程序实际启动的地方</li>
</ul>
</li>
</ul>
<p>如果在本地运行，您将看到以下内容:</p>
<p><img data-attachment-id="20164" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/basic-project-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example.png" data-orig-size="730,367" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Basic Blazor Project Example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example-300x151.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example.png" decoding="async" class="aligncenter size-full wp-image-20164 jetpack-lazy-image" src="../Images/dc0193b934dc24b23b8417f33009b4c5.png" alt="Basic Blazor Project Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example-300x151.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20164" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/basic-project-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example.png" data-orig-size="730,367" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Basic Blazor Project Example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example-300x151.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20164" src="../Images/dc0193b934dc24b23b8417f33009b4c5.png" alt="Basic Blazor Project Example" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example-300x151.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/basic-project-example.png"/></noscript>
<p>默认应用程序提供了一些搭建的内容，向您展示如何处理来回传递数据。<strong>计数器</strong>提供了一个基本的razor页面，其中一些方法显示了模板中的计数器。<strong>获取数据</strong>页面提供了一个通过HTTP获取JSON内容的例子。</p>
<p>Blazor的服务器版本略有不同，它引导您将在一个额外的<code>Data</code>文件夹中构建的服务。我将在下面的Blazor服务器部分详细介绍。</p>
<p>对于服务器和WebAssembly项目，我构建了一个自动售货机应用程序。它非常简单，但是展示了Blazor的基础知识以及在客户机和服务器之间发送和检索数据的方法。</p>
<p>因为我想尽可能简单，所以我移除了搭建的razor页面，并在<code>Pages/index.razor</code>页面中完成了项目的WebAssembly和Server版本的大部分工作。如果您要构建一个生产质量的应用程序，您当然会有更多的razor页面和更复杂的文件夹结构。</p>
<p><img data-attachment-id="20165" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/final-blazor-vending-machine-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example.png" data-orig-size="598,620" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final Blazor vending machine app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example-289x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example.png" decoding="async" class="aligncenter size-full wp-image-20165 jetpack-lazy-image" src="../Images/79b9bf54bb5503aa92853fdb19ffa817.png" alt="Preview Of Our Final Blazor Vending MachineApp" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example.png 598w, https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example-289x300.png 289w" data-lazy-sizes="(max-width: 598px) 100vw, 598px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20165" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/final-blazor-vending-machine-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example.png" data-orig-size="598,620" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final Blazor vending machine app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example-289x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20165" src="../Images/79b9bf54bb5503aa92853fdb19ffa817.png" alt="Preview Of Our Final Blazor Vending MachineApp" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example.png 598w, https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example-289x300.png 289w" sizes="(max-width: 598px) 100vw, 598px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/final-blazor-vending-machine-example.png"/></noscript>
<p>当应用程序渲染时，你会看到一个饮料列表。你点击其中一种饮料，然后输入要发送的“现金”金额。然后你点击“出售”按钮，它会根据你的选择以及你提供的钱是多还是少给你一个回应。</p>
<h2>Blazor WebAssembly</h2>
<p>如果你克隆了我的<a href="https://github.com/andrewevans0102/blazor-intro"> GitHub项目</a>，进入<code>BlazorWebAssembly</code>文件夹，你会看到我的自动售货机的WebAssembly版本。</p>
<p>由于Blazor的WebAssembly版本没有实际的服务器，所以我编写了两个可以本地调用的基本Azure函数。在该应用程序的生产质量版本中，我会将这些托管在Azure上，然后让我的客户端应用程序从我的函数中调用HTTP端点。</p>
<p>要看到项目的WebAssembly版本在本地运行，我们首先需要让Azure函数在本地运行。在<code>blazor-intro/AzureFunctions/AzureFunctions.sln</code>文件处打开一个Visual Studio会话。然后，使用Visual Studio顶部的runner在本地运行Azure函数:</p>
<p><img data-attachment-id="20166" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/azure-functions-local/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local.png" data-orig-size="730,201" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Accessing Azure Functions locally" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local-300x83.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local.png" decoding="async" class="aligncenter size-full wp-image-20166 jetpack-lazy-image" src="../Images/94096eb5a9ed8ec5ed1f0b3cf5900b4a.png" alt="Accessing Azure Functions Locally" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local-300x83.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20166" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/azure-functions-local/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local.png" data-orig-size="730,201" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Accessing Azure Functions locally" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local-300x83.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20166" src="../Images/94096eb5a9ed8ec5ed1f0b3cf5900b4a.png" alt="Accessing Azure Functions Locally" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local-300x83.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/azure-functions-local.png"/></noscript>
<p>然后，您应该会看到一个终端会话打开，显示它们运行的端口:</p>
<p><img data-attachment-id="20168" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/function-ports/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports.png" data-orig-size="578,117" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="HTTP functions and the ports they run on" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports-300x61.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports.png" decoding="async" class="aligncenter size-full wp-image-20168 jetpack-lazy-image" src="../Images/4b76ca988ef2fd6a2f4d5f7936eb9191.png" alt="HTTP Functions And Their Respective Ports" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports.png 578w, https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports-300x61.png 300w" data-lazy-sizes="(max-width: 578px) 100vw, 578px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20168" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/function-ports/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports.png" data-orig-size="578,117" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="HTTP functions and the ports they run on" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports-300x61.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20168" src="../Images/4b76ca988ef2fd6a2f4d5f7936eb9191.png" alt="HTTP Functions And Their Respective Ports" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports.png 578w, https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports-300x61.png 300w" sizes="(max-width: 578px) 100vw, 578px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/function-ports.png"/></noscript>
<p>然后，在<code>blazor-intro/BlazorWebAssembly/BlazorWebAssembly.sln</code>打开另一个Visual Studio会话，并使用runner启动该应用程序(这是示例WebAssembly项目)。您应该看到以下内容:</p>
<p><img data-attachment-id="20170" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/webassembly-project-preview/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview.png" data-orig-size="577,496" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Initial render of our WebAssembly project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview-300x258.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview.png" decoding="async" class="aligncenter size-full wp-image-20170 jetpack-lazy-image" src="../Images/6141703c0f3832cebc9e3a7f4cf50ea3.png" alt="Initial Render Of Our WebAssembly Project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview.png 577w, https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview-300x258.png 300w" data-lazy-sizes="(max-width: 577px) 100vw, 577px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20170" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/webassembly-project-preview/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview.png" data-orig-size="577,496" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Initial render of our WebAssembly project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview-300x258.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20170" src="../Images/6141703c0f3832cebc9e3a7f4cf50ea3.png" alt="Initial Render Of Our WebAssembly Project" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview.png 577w, https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview-300x258.png 300w" sizes="(max-width: 577px) 100vw, 577px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/webassembly-project-preview.png"/></noscript>
<p>如果你打开Chrome DevTools(或者你选择的浏览器用来检查的任何东西)并查看源代码，你会看到Wasm编译的代码:</p>
<p><img data-attachment-id="20169" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/inspecting-page-source-chrome-devtools/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/inspecting-page-source-chrome-devtools.png" data-orig-size="266,271" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Inspecting the app’s page source" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/inspecting-page-source-chrome-devtools.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/inspecting-page-source-chrome-devtools.png" decoding="async" class="aligncenter size-full wp-image-20169 jetpack-lazy-image" src="../Images/3eb082a47887b2c56b028d3e95340689.png" alt="Inspecting Our App's Page Source With Chrome DevTools" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/inspecting-page-source-chrome-devtools.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/inspecting-page-source-chrome-devtools.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20169" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/inspecting-page-source-chrome-devtools/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/inspecting-page-source-chrome-devtools.png" data-orig-size="266,271" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Inspecting the app’s page source" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/inspecting-page-source-chrome-devtools.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/inspecting-page-source-chrome-devtools.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20169" src="../Images/3eb082a47887b2c56b028d3e95340689.png" alt="Inspecting Our App's Page Source With Chrome DevTools" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/inspecting-page-source-chrome-devtools.png"/></noscript>
<p>当您查看这个示例项目的基本结构时，您首先会注意到我使用Blazor的依赖注入来将HTTP模块拉入到<code>Pages/index.razor</code>文件中:</p>
<pre>@page "/"
<strong>@inject HttpClient Http</strong>

...</pre>
<p>您还会注意到，我在模板中使用标准的razor语法将显示的值绑定到文件底部的<code>@code</code>块中描述的内容。在模板中，你会注意到我使用了<code>@onclick</code>和<code>@bind</code>，就像你使用任何其他razor页面一样:</p>
<pre>...

            &lt;article class="money"&gt;
                &lt;article class="money-input"&gt;
                    &lt;span class="cash"&gt;
                        &lt;input placeholder="cash" <strong>@bind</strong>="@money" /&gt;
                    &lt;/span&gt;
                &lt;/article&gt;
                &lt;button class="machine-button" <strong>@onclick</strong>="@(e =&gt; vend())"&gt;vend&lt;/button&gt;
            &lt;/article&gt;

...</pre>
<p>在<code>@code</code>块中，你会注意到我使用了<code>OnInitializedAsync</code>钩子从我的Azure函数中加载饮料的名称。您还会注意到，在<code>vend</code>方法中，我调用了<code>/api/drinks/dispense</code>端点，就像您在前端应用程序中调用任何其他HTTP端点一样:</p>
<pre>...

@code {

    private string money = "0";
    private string selection = "drink";
    private string message = "";
    private Drink[] drinks;

    protected override async Task OnInitializedAsync()
    {
        drinks = await Http.GetFromJsonAsync&lt;Drink[]&gt;("http://localhost:7071/api/drinks/retrieve");
    }

    public void setDrink(string drink)
    {
        this.selection = drink;
    }

    public async Task vend()
    {
        DrinkSelected drinkSelected = new DrinkSelected()
        {
            name = this.selection,
            cash = this.money
        };

        var response = await Http.PostAsJsonAsync&lt;DrinkSelected&gt;("<strong>http://localhost:7071/api/drinks/dispense</strong>", drinkSelected);
        this.message = "";
        this.message = await response.Content.ReadAsStringAsync();
    }

    public class Drink
    {
        public string name { get; set; }
        public string cost { get; set; }
    }

    public class DrinkSelected
    {
        public string name { get; set; }
        public string cash { get; set; }
    }
}

...</pre>
<p>最后，您会注意到我添加了一些自定义样式。我将这些从我在<code>wwwroot/custom.css</code>的文件导入到<code>wwwroot/app.css</code>文件中，正如你在这里看到的:</p>
<pre>@import url('open-iconic/font/css/open-iconic-bootstrap.min.css');
<strong>@import url('custom.css');</strong>

...</pre>
<h2>Blazor服务器</h2>
<p>Blazor服务器项目的设置类似于WebAssembly项目，只是我们实际上可以在同一个项目中构建我们的数据(后端)层。</p>
<p>如果你克隆了我的<a href="https://github.com/andrewevans0102/blazor-intro"> GitHub项目</a>，进入<code>BlazorServer</code>文件夹，你会看到我的自动售货机的服务器<em> <em/> </em>版本。</p>
<p>在向您展示我的示例项目的服务器实现之前，使用Visual Studio的默认对话框来搭建一个<code>HelloWorld</code>会有所帮助。如果你按照Visual Studio <strong>创建项目</strong>的流程，选择<strong>Blazor</strong>→<strong>Blazor Server</strong>，你会得到一个如下所示的项目:</p>
<p><img data-attachment-id="20177" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/blazor-server-default-scaffolding/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding.jpeg" data-orig-size="456,501" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Blazor Server project default scaffolding" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding-273x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding.jpeg" decoding="async" class="aligncenter size-full wp-image-20177 jetpack-lazy-image" src="../Images/0670d0d84e40c1cf296e06a041dfeef0.png" alt="Blazor Server Project Default Scaffolding" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding.jpeg 456w, https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding-273x300.jpeg 273w" data-lazy-sizes="(max-width: 456px) 100vw, 456px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20177" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/blazor-server-default-scaffolding/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding.jpeg" data-orig-size="456,501" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Blazor Server project default scaffolding" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding-273x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20177" src="../Images/0670d0d84e40c1cf296e06a041dfeef0.png" alt="Blazor Server Project Default Scaffolding" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding.jpeg 456w, https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding-273x300.jpeg 273w" sizes="(max-width: 456px) 100vw, 456px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/blazor-server-default-scaffolding.jpeg"/></noscript>
<p>默认设置看起来非常类似于WebAssembly项目，除了一些额外的东西。最值得注意的是，您会注意到在<code>Data</code>文件夹中有服务定义。这些是样板文件，只是提供一些例子。然而，在这里您将定义与我们之前对Azure函数所做的相同的一组函数。</p>
<p>在示例项目中，用Visual Studio打开位于<code>blazor-intro/BlazorServer/BlazorServer.sln</code>文件的解决方案文件。您将看到以下内容:</p>
<p><img data-attachment-id="20178" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/server-sample-project-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure.png" data-orig-size="450,579" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Scaffolding for our Server sample project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure-233x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure.png" decoding="async" class="aligncenter size-full wp-image-20178 jetpack-lazy-image" src="../Images/2000422d6d2ce04c5861ed742e67efc7.png" alt="Scaffolding For Our Blazor Server Sample Project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure.png 450w, https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure-233x300.png 233w" data-lazy-sizes="(max-width: 450px) 100vw, 450px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20178" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/server-sample-project-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure.png" data-orig-size="450,579" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Scaffolding for our Server sample project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure-233x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20178" src="../Images/2000422d6d2ce04c5861ed742e67efc7.png" alt="Scaffolding For Our Blazor Server Sample Project" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure.png 450w, https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure-233x300.png 233w" sizes="(max-width: 450px) 100vw, 450px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/server-sample-project-folder-structure.png"/></noscript>
<p>它看起来非常类似于WebAssembly项目。在<code>Data/VendingMachineService</code>文件夹中有一个已定义的服务，它有检索饮料的方法和分发饮料的方法:</p>
<pre>using System;
using System.Linq;
using System.Threading.Tasks;
using System.Collections.Generic;

namespace BlazorServer.Data
{
    public class VendingMachineService
    {
        public Task&lt;List&lt;Drink&gt;&gt; RetrieveDrinks()
        {
            List&lt;Drink&gt; drinks = new List&lt;Drink&gt;();
            drinks.Add(new Drink
            {
                name = "Water",
                cost = "$00.50"
            });
            drinks.Add(new Drink
            {
                name = "Soda",
                cost = "$1.00"
            });
            drinks.Add(new Drink
            {
                name = "Coffee",
                cost = "$1.50"
            });
            drinks.Add(new Drink
            {
                name = "Orange Juice",
                cost = "$2.00"
            });

            return Task.FromResult(drinks);
        }

        public Task&lt;string&gt; DispenseDrinks(string name, string cash)
        {
            List&lt;Drink&gt; drinks = new List&lt;Drink&gt;();
            drinks.Add(new Drink
            {
                name = "Water",
                cost = "$00.50"
            });
            drinks.Add(new Drink
            {
                name = "Soda",
                cost = "$1.00"
            });
            drinks.Add(new Drink
            {
                name = "Coffee",
                cost = "$1.50"
            });
            drinks.Add(new Drink
            {
                name = "Orange Juice",
                cost = "$2.00"
            });

            Drink drinkRequest = drinks.Find(x =&gt; x.name.Equals(name));

            string response = "";

            if (drinkRequest == null)
            {
                response = "drink was not found";
            }
            else
            {
                cash = cash.Replace("$", "");
                drinkRequest.cost = drinkRequest.cost.Replace("$", "");
                double cashSent = Double.Parse(cash);
                double cashRequired = Double.Parse(drinkRequest.cost);

                if (cashSent == cashRequired)
                {
                    response = "here is your drink, you inserted the correct amount";
                }
                else
                {

                    if (cashSent &lt; cashRequired)
                    {
                        double differenceLess = cashRequired - cashSent;
                        response = "you did not provide enough money, please insert an additional $" + differenceLess.ToString("F");
                    }
                    else if (cashSent &gt; cashRequired)
                    {
                        double differenceMore = cashSent - cashRequired;
                        response = "you provided too much money, you will get back $" + differenceMore.ToString("F");
                    }
                }
            }

            return Task.FromResult(response);
        }
    }
}</pre>
<p>这两者都在服务器<code>Index.razor</code>文件的<code>@code</code>块中被引用，如下所示:</p>
<pre>...

@code {

    private string money = "0";
    private string selection = "drink";
    private string message = "";
    private Drink[] drinks;

    protected override async Task OnInitializedAsync()
    {
        drinks = (VendingMachineService.RetrieveDrinks().Result).ToArray();
    }

    public void setDrink(string drink)
    {
        this.selection = drink;
    }

    public async Task vend()
    {
        this.message = "";
        this.message = await VendingMachineService.DispenseDrinks(this.selection, this.money);
    }

    public class DrinkSelected
    {
        public string name { get; set; }
        public string cash { get; set; }
    }
}</pre>
<p>此外，如果您打开项目根目录下的<code>Startup.cs</code>文件，您会注意到服务在启动时被注册为单例:</p>
<pre>...
        // This method gets called by the runtime. Use this method to add services to the container.
        // For more information on how to configure your application, visit https://go.microsoft.com/fwlink/?LinkID=398940
        public void ConfigureServices(IServiceCollection services)
        {
            services.AddRazorPages();
            services.AddServerSideBlazor();
            services.AddSingleton&lt;VendingMachineService&gt;();
        }
...</pre>
<p>一旦服务在<code>Startup.cs</code>文件中注册，Blazor就使用依赖注入将服务拉入我们定义的页面:</p>
<pre>@page "/"
@using BlazorServer.Data
@inject BlazorServer.Data.VendingMachineService VendingMachineService
...</pre>
<p>除此之外，这两个项目基本相同，只是应用程序使用SignalR进行消息传递。在这里的示例应用程序中，我已经打开了日志记录，所以当您在本地运行应用程序时，您可以看到客户端和后端之间传递的消息(这里的<a href="https://docs.microsoft.com/en-us/aspnet/core/signalr/diagnostics?view=aspnetcore-3.1">指令</a>)。</p>
<p>如果您使用Visual Studio在本地运行应用程序，并查看ASP.NET服务器的输出，您将看到前端模板与后端服务器的交互:</p>
<p><img data-attachment-id="20179" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/asp-net-server-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output.png" data-orig-size="730,408" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ASP.NET server output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output.png" decoding="async" class="aligncenter size-full wp-image-20179 jetpack-lazy-image" src="../Images/986f5475a64ca372c530f84b4a6b46e3.png" alt="ASP.NET Server Output" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20179" data-permalink="https://blog.logrocket.com/js-free-frontends-blazor/asp-net-server-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output.png" data-orig-size="730,408" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ASP.NET server output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20179" src="../Images/986f5475a64ca372c530f84b4a6b46e3.png" alt="ASP.NET Server Output" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/asp.net-server-output.png"/></noscript>
<h2>部署</h2>
<p>当您准备好部署您的项目时，WebAssembly和服务器实现都可以轻松地与Azure以及其他云提供商连接。WebAssembly实现也可以很好地处理静态web托管，因为构建会产生一个可以由任何浏览器部署和读取的包。</p>
<p>对于服务器版本，您只需要一台能够托管ASP.NET核心应用程序的服务器。具体配置细节<a href="https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/blazor/server?view=aspnetcore-3.1">可以在这里</a>找到。对于WebAssembly版本，您可以使用IIS或在构建项目时在独立输出中创建的文件(此处的<a href="https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/blazor/webassembly?view=aspnetcore-3.1">说明</a>)。</p>
<p>此外，如果你有兴趣在你的网站后端使用Azure功能，你可以通过连接你的GitHub repo <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-continuous-deployment">很容易地部署它们，正如你在这里看到的</a>。</p>
<p>因为服务器项目使用IIS或至少一个ASP.NET应用程序来部署，所以我不打算介绍它，只是将您指向我上面列出的docs链接。对于WebAssembly项目，如果您进行构建，独立文件(包括站点的Wasm编译版本)将位于<code>/bin/Debug/netstandard2.1/wwwroot/_framework</code>，您应该会看到类似下面的结构:</p>
<pre>.
├── _bin
├── blazor.boot.json
├── blazor.boot.json.gz
├── blazor.webassembly.js
├── blazor.webassembly.js.gz
└── wasm
    ├── dotnet.3.2.0.js
    ├── dotnet.3.2.0.js.gz
    ├── dotnet.timezones.dat
    ├── dotnet.timezones.dat.gz
    ├── dotnet.wasm
    └── dotnet.wasm.gz</pre>
<h2>结束语</h2>
<p>我希望这篇文章向你展示了如何使用Blazor的一些基础知识。在使用了构建工具和Visual Studio之后，我绝对能够体会到这是一个多么强大的工作平台。</p>
<p>我真的看到了Blazor对那些可能缺乏前端技术但拥有强大的团队的好处。净经验。此外，Blazor绝对是一种可以打包的方式。NET库和依赖项，我们今天使用的许多流行的JavaScript包。</p>
<p>我对Blazor唯一真正的不满是，它有一个适中的学习曲线，而且这些工具不适合快速原型化，这是你经常在Angular或React等框架中看到的。也就是说，我认为如果花一些时间用Blazor构建生产应用程序，他们可能会找到改进构建周期的方法。真的只是习惯了模式。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p>微软有很多很棒的文档和指南，可以让你相对快速地掌握Blazor。此外，Visual Studio构建的starter附带的示例为您提供了基础知识，使您能够更快地构建更复杂的应用程序。</p>
<p>我建议在<a href="https://dotnet.microsoft.com/apps/aspnet/web-apps/blazor">Blazor.net</a>和<a href="https://docs.microsoft.com/en-us/aspnet/core/blazor/?view=aspnetcore-3.1">这里</a>查阅基本文档。我还建议查看许多流行的博客网站，因为一些人已经就Blazor的一些更高级的功能创建了一些很棒的操作指南。</p>
<p>感谢阅读我的帖子，关注我的<a href="https://www.andrewevans.dev/"> andrewevans.dev </a>。</p><div class="code-block code-block-28">
<div class="blog-plug inline-plug js-libraries-plug"><h2>您是否添加了新的JS库来提高性能或构建新特性？如果他们反其道而行之呢？</h2><p>毫无疑问，前端变得越来越复杂。当您向应用程序添加新的JavaScript库和其他依赖项时，您将需要更多的可见性，以确保您的用户不会遇到未知的问题。</p>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放JavaScript错误，就像它们发生在您自己的浏览器中一样，这样您就可以更有效地对错误做出反应。</p><a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/></noscript></a>
<a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>自信地构建— <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>