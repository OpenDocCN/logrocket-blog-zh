<html>
<head>
<title>Building an online store with Saleor - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Saleor - LogRocket博客建立网上商店</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-an-online-store-with-saleor/#0001-01-01">https://blog.logrocket.com/building-an-online-store-with-saleor/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在现代web开发时代，无头解决方案成为构建任何产品的流行方式。例如，内容管理系统、电子商务解决方案等。在这篇文章中，我们将看到如何使用业界流行的无头电子商务产品Saleor.io来建立一个在线商店。</p>
<h2>Saleor.io是什么？</h2>
<p>Saleor是一个无头的GraphQL电子商务平台，帮助企业主和开发团队在更短的时间内更快地构建产品。它为我们提供了以可扩展的方式运营电子商务商店所需的所有模块。</p>
<h3>萨勒尔建筑</h3>
<p>Saleor包含三个重要模块，包括后端解决方案和基础设施、电子商务商店的管理仪表板和电子商务客户端解决方案。</p>
<p><img data-attachment-id="28116" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/saleor-sdk-flowchart/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart.png" data-orig-size="730,161" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="saleor-sdk-flowchart" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart-300x66.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart.png" decoding="async" class="aligncenter size-full wp-image-28116 jetpack-lazy-image" src="../Images/35f171bf2e39e5a8ea1fbc4861274d03.png" alt="A flowchart showinghow Saleor works." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart-300x66.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28116" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/saleor-sdk-flowchart/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart.png" data-orig-size="730,161" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="saleor-sdk-flowchart" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart-300x66.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-28116" src="../Images/35f171bf2e39e5a8ea1fbc4861274d03.png" alt="A flowchart showinghow Saleor works." srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart-300x66.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/saleor-sdk-flowchart.png"/></noscript>
<p>我们的商店(或客户端)通过Saleor SDK与后端通信。同时，管理仪表板使用GraphQL API与后端通信。</p>
<p>在本教程中，我们将看到如何设置一个电子商务商店的销售或后端和管理仪表板。我们还将看到如何为电子商务应用程序构建店面(客户端)端。</p>
<h2>安装和设置</h2>
<p>注意:要在开发环境中设置和运行Saleor，最好使用<a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer"> Docker </a>。</p>
<p>我们将使用Docker在我们的开发环境中设置它。</p>
<pre>git clone https://github.com/mirumee/saleor-platform.git --recursive --jobs 3
cd saleor-platform
docker-compose build</pre>
<p>使用上面的命令，我们将在本地机器上构建Docker映像。</p>
<pre>docker-compose run --rm api python3 manage.py migrate
docker-compose run --rm api python3 manage.py collectstatic --noinput</pre>
<p>由于Saleor服务器运行在Python中，它为我们设置了服务器和数据库迁移。</p>
<pre>//first command is optional
docker-compose run --rm api python3 manage.py populatedb 
docker-compose run --rm api python3 manage.py createsuperuser</pre>
<p>之后，我们用虚拟数据填充数据库(这是可选的)，然后我们为管理仪表板创建一个超级用户。</p>
<p>最后，要运行服务，请使用以下命令:</p>
<pre>docker-compose up</pre>
<p>现在，如果你访问这个网址，你会看到这个:</p>
<p><code><a href="http://localhost:3000/" rel="nofollow">http://localhost:3000/</a></code>–客户端<br/><code><a href="http://localhost:8000/graphql/" rel="nofollow">http://localhost:8000/graphql/</a></code>–graph QL游乐场<br/><code><a href="http://localhost:9000/" rel="nofollow">http://localhost:9000/</a></code>–管理仪表板</p>
<p><img data-attachment-id="28139" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/information-about-store/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store.png" data-orig-size="1895,897" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="information-about-store" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-300x142.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-1024x485.png" decoding="async" class="aligncenter wp-image-28139 jetpack-lazy-image" src="../Images/f18ffcb36a39041bba6437dae31569c1.png" alt="Information about the store." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store.png 1895w, https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-300x142.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-1024x485.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-768x364.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-1536x727.png 1536w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28139" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/information-about-store/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store.png" data-orig-size="1895,897" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="information-about-store" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-300x142.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-1024x485.png" decoding="async" loading="lazy" class="aligncenter wp-image-28139" src="../Images/f18ffcb36a39041bba6437dae31569c1.png" alt="Information about the store." srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store.png 1895w, https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-300x142.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-1024x485.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-768x364.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store-1536x727.png 1536w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/information-about-store.png"/></noscript>
<p><img data-attachment-id="28142" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/final-reduction/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="final-reduction" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction.png" decoding="async" class="aligncenter size-full wp-image-28142 jetpack-lazy-image" src="../Images/a9255f35556488582526ecbf9790d04d.png" alt="Our storefront." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction-300x147.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28142" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/final-reduction/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="final-reduction" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-28142" src="../Images/a9255f35556488582526ecbf9790d04d.png" alt="Our storefront." srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction-300x147.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/final-reduction.png"/></noscript>
<h2>使用Saleor建立贴纸商店</h2>
<p>现在，我们有了建立网上商店的基本销售设置。让我们通过定制Saleor店面来建立一个开发者贴纸商店。</p>
<p><img data-attachment-id="28144" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/devops/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.png" data-orig-size="1763,893" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="devops" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops-1024x519.png" decoding="async" class="aligncenter wp-image-28144 jetpack-lazy-image" src="../Images/f8565ad9d3e61c93c98863b2855b5a3b.png" alt="Devops." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.png 1763w, https://blog.logrocket.com/wp-content/uploads/2020/11/devops-300x152.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/11/devops-1024x519.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/11/devops-768x389.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/11/devops-1536x778.png 1536w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28144" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/devops/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.png" data-orig-size="1763,893" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="devops" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops-1024x519.png" decoding="async" loading="lazy" class="aligncenter wp-image-28144" src="../Images/f8565ad9d3e61c93c98863b2855b5a3b.png" alt="Devops." srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.png 1763w, https://blog.logrocket.com/wp-content/uploads/2020/11/devops-300x152.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/11/devops-1024x519.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/11/devops-768x389.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/11/devops-1536x778.png 1536w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.png"/></noscript>
<p>以下是我们将重点关注的所有重要模块/功能:</p>
<ul>
<li>基于类别列出产品</li>
<li>特色产品</li>
<li>搜索产品</li>
<li>用户–登录/注册</li>
<li>加入购物车</li>
<li>检验产品</li>
<li>支付</li>
</ul>
<p>为了从我们的GraphQL服务器获取数据，我们需要一个ApolloClient。这是因为<code>@saleor/sdk</code>内部使用Apollo。</p>
<p>让我们在React应用程序中设置一个Apollo客户端。</p>
<pre>npm install @saleor/sdk</pre>
<pre>import { SaleorProvider, useAuth } from "@saleor/sdk";

const config = { apiUrl: "http://localhost:8000/graphql/" };
const apolloConfig = {
  /* 
    Optional custom Apollo client config.
    Here you may append custom Apollo cache, links or the whole client. 
    You may also use import { createSaleorCache, createSaleorClient, createSaleorLinks } from "@saleor/sdk" to create semi-custom implementation of Apollo.
  */
};

const rootElement = document.getElementById("root");
ReactDOM.render(
  &lt;SaleorProvider config={config} apolloConfig={apolloConfig}&gt;
    &lt;App /&gt;
  &lt;/SaleorProvider&gt;,
  rootElement
);

const App = () =&gt; {
  const { authenticated, user, signIn } = useAuth();

  const handleSignIn = async () =&gt; {
    const { data, dataError } = await signIn("<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d4b5b0b9bdba94b1acb5b9a4b8b1fab7bbb9">[email protected]</a>", "admin");

    if (dataError) {
      /**
       * Unable to sign in.
       **/
    } else if (data) {
      /**
       * User signed in succesfully.
       **/
    }
  };

  if (authenticated &amp;&amp; user) {
    return &lt;span&gt;Signed in as {user.firstName}&lt;/span&gt;;
  } else {
    return &lt;button onClick={handleSignIn}&gt;Sign in&lt;/button&gt;;
  }
};</pre>
<p>现在，我们需要构建组件并使用GraphQL服务器来列出和更新服务器上的数据。</p>
<p><code>@saleor/sdk</code>提供了许多现成的定制挂钩。这有助于我们节省大量开发时间来构建商店。其中一些是:</p>
<ul>
<li><code>useAuth</code>–处理认证机制的认证挂钩。它提供登录的用户信息，并检查用户是否是认证等。</li>
<li><code>useCart</code>–它提供向购物车添加产品和从购物车中移除产品的功能。</li>
<li><code>useSignOut</code>–将用户从商店中注销。</li>
<li><code>useUserDetails</code>–返回登录用户的信息。</li>
<li><code>useUserDetails</code>–它提供了结帐购物车中所有商品的功能。</li>
</ul>
<p>有很多像这样的定制挂钩。我只是在这里指出一些重要的问题。您可以检查<code>@saleor/sdk</code>中的所有挂钩。</p>
<p><img data-attachment-id="28152" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/sdk-react/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react.png" data-orig-size="672,365" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="sdk-react" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react.png" decoding="async" class="aligncenter wp-image-28152 jetpack-lazy-image" src="../Images/748951bd89d06ee3a0c89b26d2701632.png" alt="SDK React." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react.png 672w, https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react-300x163.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28152" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/sdk-react/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react.png" data-orig-size="672,365" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="sdk-react" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react.png" decoding="async" loading="lazy" class="aligncenter wp-image-28152" src="../Images/748951bd89d06ee3a0c89b26d2701632.png" alt="SDK React." srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react.png 672w, https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react-300x163.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/sdk-react.png"/></noscript>
<p>现在，我们将从服务器获取产品和产品类别。但是，如果您跳过了在安装时用虚拟数据填充数据库的步骤，您可能需要将<code>Products</code>和<code>Categories</code>添加到数据库中。</p>
<p>我们可以使用我们的商店管理仪表板来实现。转到管理仪表板中的<code>Catalog =&gt; Product</code>并添加产品。</p>
<p><img data-attachment-id="28154" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/catalog/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog.png" data-orig-size="493,740" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Catalog" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog-200x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog.png" decoding="async" class="aligncenter wp-image-28154 jetpack-lazy-image" src="../Images/fd88464c7b26caf0461f112046cad47c.png" alt="Catalog." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog.png 493w, https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog-200x300.png 200w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28154" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/catalog/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog.png" data-orig-size="493,740" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Catalog" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog-200x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog.png" decoding="async" loading="lazy" class="aligncenter wp-image-28154" src="../Images/fd88464c7b26caf0461f112046cad47c.png" alt="Catalog." srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog.png 493w, https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog-200x300.png 200w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/Catalog.png"/></noscript>
<p>对<code>Categories</code>也做同样的事情。这样，你可以让<code>Categories</code>和<code>Products</code>从服务器获取数据。</p>
<p>一旦您添加了它们，我们就可以编写GraphQL查询来获取产品和类别。</p>
<pre>query ProductsList {
    products(first: 5) {
      edges {
        node {
          id
          name
          pricing{
            onSale
            discount{
              gross{
                amount
              }
              currency
            }
          }
          description
          category{
            id
            name
          }
          images{
            id
            url
          }
        }
      }
    }
    categories(level: 0, first: 4) {
      edges {
        node {
          id
          name
          backgroundImage {
            url
          }
        }
      }
    }
  }</pre>
<p>它从服务器获取产品和类别。</p>
<p><img data-attachment-id="28158" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/productlist/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist.png" data-orig-size="1772,878" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="productlist" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-300x149.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-1024x507.png" decoding="async" class="aligncenter wp-image-28158 jetpack-lazy-image" src="../Images/5a37be55fe1e8432399f184e0ce44b1a.png" alt="Product list." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist.png 1772w, https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-300x149.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-1024x507.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-768x381.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-1536x761.png 1536w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28158" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/productlist/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist.png" data-orig-size="1772,878" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="productlist" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-300x149.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-1024x507.png" decoding="async" loading="lazy" class="aligncenter wp-image-28158" src="../Images/5a37be55fe1e8432399f184e0ce44b1a.png" alt="Product list." srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist.png 1772w, https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-300x149.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-1024x507.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-768x381.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/11/productlist-1536x761.png 1536w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/productlist.png"/></noscript>
<p>您可以使用该数据列出我们商店中的所有产品和类别。</p>
<pre>import React, { useRef, useState } from "react";
import {
  ProductsList_categories,
  ProductsList_shop,
  ProductsList_shop_homepageCollection_backgroundImage,
} from "./gqlTypes/ProductsList";
import { structuredData } from "../../core/SEO/Homepage/structuredData";
// import noPhotoImg from "../../images/no-photo.svg";
import ProductItem from '../../components/product/ProductItem'
import Boundary from './boundary'
const Page = ({ loading, categories, products, backgroundImage, shop }) =&gt; {
  const [columnCount, setColumnCount] = useState(10);
  const categoriesExist = () =&gt; {
    return categories &amp;&amp; categories.edges &amp;&amp; categories.edges.length &gt; 0;
  };
  const productListWrapper = useRef(null);
  return (
    &lt;&gt;
      &lt;script className="structured-data-list" type="application/ld+json"&gt;
        {structuredData(shop)}
      &lt;/script&gt;
      &lt;main className="content"&gt;
        &lt;section className="product-list-wrapper"&gt;
          &lt;Boundary&gt;
            &lt;div
              className="product-list"
              ref={productListWrapper}
              style={{ gridTemplateColumns: `repeat(${columnCount}, 160px)` }}
            &gt;
              {products.edges.map((product, index) =&gt; {
                return (
                  &lt;ProductItem
                    foundOnBasket={false}
                    product={product.node}
                    key={`product-skeleton ${index}`}
                  /&gt;
                )
              })}
            &lt;/div&gt;
          &lt;/Boundary&gt;
        &lt;/section&gt;
      &lt;/main&gt;
    &lt;/&gt;
  );
};
export default Page;</pre>
<p>到目前为止，我们已经有了产品和类别列表功能。现在，我们需要实现一种方法来将产品添加到购物篮中，并添加用户登录/注册功能。</p>
<h2>添加到购物车功能</h2>
<p><img data-attachment-id="28160" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/devops-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="devops" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.gif" decoding="async" class="aligncenter size-full wp-image-28160 jetpack-lazy-image" src="../Images/5dce4d3042d8021186f7a9a275311c64.png" alt="Devops." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28160" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/devops-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="devops" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-28160" src="../Images/5dce4d3042d8021186f7a9a275311c64.png" alt="Devops." data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/devops.gif"/></noscript>
<p>当用户点击添加到购物车按钮时，我们使用<code>@saleor/sdk</code>定制钩子<code>useCart</code>将商品添加到他们的购物车。</p>
<pre>import React from 'react';
import { displayMoney } from './utils';
import { useCart } from "@sdk/react";
const ProductItem = ({
    product,
    onOpenModal,
    displaySelected,
    foundOnBasket
}) =&gt; {
    const { addItem, removeItem } = useCart()
    const onClickItem = () =&gt; {
        if (product.id) {
            onOpenModal();
            displaySelected(product);
        }
    };
    const onAddToBasket = () =&gt; {
        addItem(product.id, 1)
    };
    return (
        &lt;div
            className={`product-card ${!product.id ? 'product-loading' : ''}`}
            style={{
                border: foundOnBasket ? '1px solid #cacaca' : '',
                boxShadow: foundOnBasket ? '0 10px 15px rgba(0, 0, 0, .07)' : 'none'
            }}
        &gt;
            {foundOnBasket &amp;&amp; &lt;i className="fa fa-check product-card-check" /&gt;}
            &lt;div
                className="product-card-content"
                onClick={onClickItem}
            &gt;
                &lt;div className="product-card-img-wrapper"&gt;
                    {product.images[0].url ? (
                        &lt;img
                            className="product-card-img"
                            src={product.images[0].url}
                        /&gt;
                    ) : null}
                &lt;/div&gt;
                &lt;div className="product-details"&gt;
                    &lt;h5 className="product-card-name text-overflow-ellipsis margin-auto"&gt;{product.name || null}&lt;/h5&gt;
                    &lt;p className="product-card-brand"&gt;{product.brand || null}&lt;/p&gt;
                    &lt;h4 className="product-card-price"&gt;{product.price ? displayMoney(product.price) : null}&lt;/h4&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            {product.id &amp;&amp; (
                &lt;button
                    className={`product-card-button button-small button button-block ${foundOnBasket ? 'button-border button-border-gray' : ''}`}
                    onClick={onAddToBasket}
                &gt;
                    {foundOnBasket ? 'Remove from basket' : 'Add to basket'}
                &lt;/button&gt;
            )}
        &lt;/div&gt;
    );
};
export default ProductItem;</pre>
<p>这里，我们实现了自定义钩子<code>useCart</code>。使用它，我们可以向购物车中添加商品，也可以从购物车中删除商品。</p>
<pre>const { addItem, removeItem } = useCart()</pre>
<h2>展示车</h2>
<p>要从购物车中获取所有商品，您可以使用相同的自定义挂钩:</p>
<pre>const {
    items,
    removeItem,
    subtotalPrice,
    shippingPrice,
    discount,
    totalPrice,
  } = useCart();</pre>
<p>它将所有添加到购物车的商品返回给我们。现在，我们可以使用<code>items</code>在我们的电子商务商店中展示它。</p>
<p><img data-attachment-id="28163" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/t-shirt/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt.png" data-orig-size="530,907" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="t-shirt" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt-175x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt.png" decoding="async" class="aligncenter wp-image-28163 jetpack-lazy-image" src="../Images/7b1d1f53d70c87af85e3cab10444021b.png" alt="T shirt." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt.png 530w, https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt-175x300.png 175w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28163" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/t-shirt/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt.png" data-orig-size="530,907" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="t-shirt" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt-175x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt.png" decoding="async" loading="lazy" class="aligncenter wp-image-28163" src="../Images/7b1d1f53d70c87af85e3cab10444021b.png" alt="T shirt." srcset="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt.png 530w, https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt-175x300.png 175w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/t-shirt.png"/></noscript>
<h2>用户登录/注册</h2>
<p>实现登录功能非常简单。我们需要使用来自<code>@saleor/sdk</code>的定制钩子<code>useSignIn</code>，它在成功登录后返回数据。</p>
<pre>import "./scss/index.scss";
import * as React from "react";
import { useSignIn } from "@sdk/react";
import { maybe } from "@utils/misc";
import { Button, Form, TextField } from "..";
const LoginForm = ({ hide }) =&gt; {
  const [signIn, { loading, error }] = useSignIn();
  const handleOnSubmit = async (evt, { email, password }) =&gt; {
    evt.preventDefault();
    const authenticated = await signIn({ email, password });
    if (authenticated &amp;&amp; hide) {
      hide();
    }
  };
  return (
    &lt;div className="login-form"&gt;
      &lt;Form
        errors={maybe(() =&gt; error.extraInfo.userInputErrors, [])}
        onSubmit={handleOnSubmit}
      &gt;
        &lt;TextField
          name="email"
          autoComplete="email"
          label="Email Address"
          type="email"
          required
        /&gt;
        &lt;TextField
          name="password"
          autoComplete="password"
          label="Password"
          type="password"
          required
        /&gt;
        &lt;div className="login-form__button"&gt;
          &lt;Button type="submit" {...(loading &amp;&amp; { disabled: true })}&gt;
            {loading ? "Loading" : "Sign in"}
          &lt;/Button&gt;
        &lt;/div&gt;
      &lt;/Form&gt;
    &lt;/div&gt;
  );
};
export default LoginForm;</pre>
<p>用户注册与登录功能略有不同。我们需要使用一个<code>GraphQL</code>突变，它是:</p>
<pre>mutation RegisterAccount(
    $email: String!
    $password: String!
    $redirectUrl: String!
  ) {
    accountRegister(
      input: { email: $email, password: $password, redirectUrl: $redirectUrl }
    ) {
      errors {
        field
        message
      }
      requiresConfirmation
    }
  }</pre>
<p>当用户注册成功后，它会将他们重定向到指定的URL。</p>
<h2>实施购物车结帐</h2>
<p>就功能而言，购物车结账需要完成4个步骤。它们是:</p>
<ul>
<li>从用户处获取地址</li>
<li>支付</li>
<li>确认</li>
<li>运输方式配置</li>
</ul>
<p><img data-attachment-id="28166" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/shipping-address-png/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/shipping-address.png.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="shipping-address.png" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/shipping-address.png-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/shipping-address.png.gif" decoding="async" class="aligncenter size-full wp-image-28166 jetpack-lazy-image" src="../Images/5afdf2038b7905ef84b9fa499e0831bf.png" alt="Shipping address." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/11/shipping-address.png.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/shipping-address.png.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="28166" data-permalink="https://blog.logrocket.com/building-an-online-store-with-saleor/shipping-address-png/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/11/shipping-address.png.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="shipping-address.png" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/11/shipping-address.png-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/11/shipping-address.png.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-28166" src="../Images/5afdf2038b7905ef84b9fa499e0831bf.png" alt="Shipping address." data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/11/shipping-address.png.gif"/></noscript>
<p>与其他功能类似，我们可以使用一个定制钩子<code>useCheckout</code>，它提供了结帐所需的所有功能。</p>
<h3>从用户处获取地址</h3>
<p>我们需要从用户那里获得地址。您可以要求他们添加一个新地址，或者选择一个现有地址。为此，我们可以使用<code>useCheckout</code>中的函数:</p>
<pre>const {
    checkout,
    setShippingAddress,
    selectedShippingAddressId,
  } = useCheckout();</pre>
<h3>支付</h3>
<p>为了进行支付，Saleor为我们提供了以下功能:</p>
<pre>const {
    checkout,
    billingAsShipping,
    setBillingAddress,
    setBillingAsShippingAddress,
    selectedBillingAddressId,
    availablePaymentGateways,
    promoCodeDiscount,
    addPromoCode,
    removePromoCode,
    createPayment,
  } = useCheckout();</pre>
<p>使用<code>createPayment</code>功能，我们可以完成订单的交易。</p>
<pre>const handleProcessPayment = async (
    gateway,
    token,
    cardData
  ) =&gt; {
    const { dataError } = await createPayment(gateway, token, cardData);
    const errors = dataError?.error;
    changeSubmitProgress(false);
    if (errors) {
      setGatewayErrors(errors);
    } else {
      setGatewayErrors([]);
      history.push(CHECKOUT_STEPS[2].nextStepLink);
    }
  };</pre>
<h3>确认/审查</h3>
<p>这只是为了让用户检查和验证到目前为止一切都是正确的。在此步骤中，您可以使用以下功能完成结账:</p>
<pre>const { checkout, payment, completeCheckout } = useCheckout();</pre>
<h2>结论</h2>
<p>总而言之，Saleor是电子商务开发的强大GraphQL headless。它提供了SDK提供的所有必需功能。因此，我们可以只关注电子商务商店的UI。它帮助我们避免后端管理面板的复杂设置。</p><div class="code-block code-block-22">
<div class="blog-plug inline-plug ecomm-plug"><h2><a href="https://lp.logrocket.com/blg/ecommerce-signup"> LogRocket </a>:看看用户为什么不完成你的电子商务流程中的一个步骤的技术和UX原因。</h2><a class="signup" href="https://lp.logrocket.com/blg/ecommerce-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d60d88871d85e76e0dcca90f4bbaf78c.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/insights-step-2-lg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/insights-step-2-lg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d60d88871d85e76e0dcca90f4bbaf78c.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/insights-step-2-lg.png"/></noscript></a><p>LogRocket 就像是一个网络和移动应用程序和网站的DVR，记录你的电子商务应用程序上发生的一切。LogRocket没有猜测用户不转化的原因，而是主动揭示了阻止你转化的根本原因，比如JavaScript错误或死点击。LogRocket还可以监控应用的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>开始主动监控您的电子商务应用程序— <a class="signup" href="https://lp.logrocket.com/blg/ecommerce-signup" target="_blank" rel="noopener noreferrer">免费试用</a>。</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>