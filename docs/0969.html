<html>
<head>
<title>How to integrate FaunaDB in React apps with Material UI - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何将FaunaDB集成到React应用程序中</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/#0001-01-01">https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/#0001-01-01</a></blockquote><div><article class="article-post">
<p>使用React之类的库创建单页面应用程序(SPA)有几种方法。为SPA选择技术组合时，有许多无服务器选项可供选择。一个流行的选择是将FaunaDB集成到React应用程序中。</p>
<p>FaunaDB是一个数据库即服务(<em> DBaaS </em>)，它通过使用预先存在的基础设施来构建web应用程序，而无需设置定制的API服务器，从而有助于节省时间。</p>
<p>在这篇文章中，我们将看看如何开始使用FaunaDB来创建可以直接在React应用程序中使用的API。</p>
<h2>我们在建造什么？</h2>
<p>这是最终的应用程序的样子:</p>
<p><img data-attachment-id="20988" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/expensetracker/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker.png" data-orig-size="730,355" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="expensetracker" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker-300x146.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker.png" decoding="async" class="aligncenter size-full wp-image-20988 jetpack-lazy-image" src="../Images/a9f17aded9ebbbacd9d1fe66aaebb611.png" alt="expense tracker app" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker-300x146.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20988" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/expensetracker/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker.png" data-orig-size="730,355" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="expensetracker" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker-300x146.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20988" src="../Images/a9f17aded9ebbbacd9d1fe66aaebb611.png" alt="expense tracker app" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker-300x146.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/expensetracker.png"/></noscript>
<p>出于学习的目的，我将保持UI最小化。</p>
<h2>先决条件</h2>
<p>为了充分利用本教程，请确保在本地开发环境中安装了以下软件:</p>
<ul>
<li><a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer"> Node.js </a>版本&gt; = <code>12.x.x</code>已安装</li>
<li>有权访问一个包管理器，如<code><a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">npm</a></code>或<code><a href="https://classic.yarnpkg.com/en/" target="_blank" rel="noopener noreferrer">yarn</a></code></li>
<li><a href="https://reactjs.org/docs/create-a-new-react-app.html" target="_blank" rel="noopener noreferrer"> <code>create-react-app</code> </a> CLI作为全局包安装或使用<code>npx</code></li>
<li>访问FaunaDB仪表板</li>
<li>反应钩的基本知识</li>
</ul>
<h2>为什么是FaunaDB？</h2>
<p>以下是使用FaunaDB时需要考虑的几点:</p>
<ul>
<li>它支持事务并遵循<a href="https://fauna.com/blog/acid-transactions-in-a-globally-distributed-database" target="_blank" rel="noopener noreferrer"> ACID(原子性、一致性、隔离性、持久性)约定</a></li>
<li>它伸缩性很好。FaunaDB的架构允许数据库根据需求和负载平衡进行扩展。数据库实例<a href="https://fauna.com/blog/consistency-without-clocks-faunadb-transaction-protocol#:~:text=Summary,identifier%20that%20wrote%20that%20version" target="_blank" rel="noopener noreferrer">分布在世界各地的许多实例中</a>,这样应用程序的用户将总是能够访问最近的实例</li>
<li>数据存储为增强的JSON文档，因此文档可以包含嵌套的复杂引用</li>
<li>FaunaDB与React应用程序配合良好的另一个原因是它总体上易于使用。作为开发人员或开发团队，您可以专注于构建您的应用程序，而不是设置和运行后端环境来创建API</li>
<li>它的仪表板中有一个GraphQL playground，您可以使用. gql或。graphql文件</li>
</ul>
<h2>FaunaDB入门</h2>
<p>首先使用电子邮件凭证或GitHub帐户注册一个新帐户。您可以在此注册一个新账户<a href="https://dashboard.fauna.com/accounts/register" target="_blank" rel="noopener noreferrer">:</a></p>
<p><img data-attachment-id="20993" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/faunadb/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb.png" data-orig-size="557,765" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="faunadb" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb-218x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb.png" decoding="async" class="aligncenter size-full wp-image-20993 jetpack-lazy-image" src="../Images/c9fd64dafd583b6dcdedbc084bb7ffcb.png" alt="faunadb signin page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb.png 557w, https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb-218x300.png 218w" data-lazy-sizes="(max-width: 557px) 100vw, 557px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20993" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/faunadb/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb.png" data-orig-size="557,765" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="faunadb" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb-218x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20993" src="../Images/c9fd64dafd583b6dcdedbc084bb7ffcb.png" alt="faunadb signin page" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb.png 557w, https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb-218x300.png 218w" sizes="(max-width: 557px) 100vw, 557px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadb.png"/></noscript>
<p>创建新帐户或登录后，您将会看到仪表板屏幕:</p>
<p><img data-attachment-id="20994" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/faunadashboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard.png" data-orig-size="1047,770" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="faunadashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard-300x221.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard-1024x753.png" decoding="async" class="aligncenter size-full wp-image-20994 jetpack-lazy-image" src="../Images/f02be46f7a5e87585bf818fe97973ed9.png" alt="" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard.png 1047w, https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard-300x221.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard-1024x753.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard-768x565.png 768w" data-lazy-sizes="(max-width: 1047px) 100vw, 1047px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20994" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/faunadashboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard.png" data-orig-size="1047,770" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="faunadashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard-300x221.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard-1024x753.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20994" src="../Images/f02be46f7a5e87585bf818fe97973ed9.png" alt="" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard.png 1047w, https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard-300x221.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard-1024x753.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard-768x565.png 768w" sizes="(max-width: 1047px) 100vw, 1047px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadashboard.png"/></noscript>
<p>就是这样！现在我们已经建立了我们的帐户。</p>
<h2>创建新的FaunaDB实例</h2>
<p>要使用FaunaDB服务创建一个新的数据库实例，您必须遵循一些简单的步骤。在仪表板屏幕上，按下按钮<code>New Database</code>:</p>
<p><img data-attachment-id="20996" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/faunadbinstance/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance.png" data-orig-size="612,989" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="faunadbinstance" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance-186x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance.png" decoding="async" class="aligncenter size-full wp-image-20996 jetpack-lazy-image" src="../Images/0007eeae0a77a56ae4f9c2d9c1bdcbd8.png" alt="create a new faunadb instance" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance.png 612w, https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance-186x300.png 186w" data-lazy-sizes="(max-width: 612px) 100vw, 612px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20996" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/faunadbinstance/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance.png" data-orig-size="612,989" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="faunadbinstance" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance-186x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-20996" src="../Images/0007eeae0a77a56ae4f9c2d9c1bdcbd8.png" alt="create a new faunadb instance" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance.png 612w, https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance-186x300.png 186w" sizes="(max-width: 612px) 100vw, 612px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/faunadbinstance.png"/></noscript>
<p>然后，输入数据库的名称并按下按钮<code>Save</code>:</p>
<p><img data-attachment-id="20998" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/database.png" data-orig-size="612,705" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/database-260x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/database.png" decoding="async" class="aligncenter wp-image-20998 size-full jetpack-lazy-image" src="../Images/adecf015f1f65be30a0ca52f8633522f.png" alt="database name field " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/database.png 612w, https://blog.logrocket.com/wp-content/uploads/2020/06/database-260x300.png 260w" data-lazy-sizes="(max-width: 612px) 100vw, 612px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/database.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/database.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="20998" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/database.png" data-orig-size="612,705" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/database-260x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/database.png" decoding="async" loading="lazy" class="aligncenter wp-image-20998 size-full" src="../Images/adecf015f1f65be30a0ca52f8633522f.png" alt="database name field " srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/database.png 612w, https://blog.logrocket.com/wp-content/uploads/2020/06/database-260x300.png 260w" sizes="(max-width: 612px) 100vw, 612px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/database.png"/></noscript>
<p>一旦建立了数据库实例，就可以创建访问键了。访问键是连接授权和从React应用程序到数据库的连接。该键允许您控制谁拥有对数据库的读写操作。</p>
<p>要创建第一个访问键，从侧面菜单进入<code>Security</code>选项卡并点击按钮<code>New Key</code>:</p>
<p><img data-attachment-id="21002" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/newkey/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey.png" data-orig-size="947,876" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="newkey" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey.png" decoding="async" class="aligncenter size-full wp-image-21002 jetpack-lazy-image" src="../Images/29264063712ca1e99833335731f025ed.png" alt="new key security " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey.png 947w, https://blog.logrocket.com/wp-content/uploads/2020/06/newkey-300x278.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/newkey-768x710.png 768w" data-lazy-sizes="(max-width: 947px) 100vw, 947px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21002" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/newkey/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey.png" data-orig-size="947,876" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="newkey" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21002" src="../Images/29264063712ca1e99833335731f025ed.png" alt="new key security " srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey.png 947w, https://blog.logrocket.com/wp-content/uploads/2020/06/newkey-300x278.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/newkey-768x710.png 768w" sizes="(max-width: 947px) 100vw, 947px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/newkey.png"/></noscript>
<p>一旦您在下面的屏幕上按下<code>Save</code>,将会生成一个新的密钥:</p>
<p><img data-attachment-id="21003" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/newkeygenerated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated.png" data-orig-size="947,876" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="newkeygenerated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated.png" decoding="async" class="aligncenter size-full wp-image-21003 jetpack-lazy-image" src="../Images/09a6acf1a07ca701eb8fa1127dad293c.png" alt="new key generated in faunadb dashboard" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated.png 947w, https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated-300x278.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated-768x710.png 768w" data-lazy-sizes="(max-width: 947px) 100vw, 947px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21003" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/newkeygenerated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated.png" data-orig-size="947,876" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="newkeygenerated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21003" src="../Images/09a6acf1a07ca701eb8fa1127dad293c.png" alt="new key generated in faunadb dashboard" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated.png 947w, https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated-300x278.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated-768x710.png 768w" sizes="(max-width: 947px) 100vw, 947px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/newkeygenerated.png"/></noscript>
<p>请注意，您现在创建的密钥会将权限授予任何可以访问它的人。这意味着拥有这个密钥的人将有权访问数据库实例。在为生产级应用程序创建访问键时，您可能需要重新考虑这个角色。(您可以选择另一个名为<code>server</code>的选项，它提供较少的访问权限):</p>
<p><img data-attachment-id="21006" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/securitykey/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey.png" data-orig-size="947,876" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="securitykey" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey.png" decoding="async" class="aligncenter size-full wp-image-21006 jetpack-lazy-image" src="../Images/8a45db9a7378f7a3b1a995557066c409.png" alt="security key " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey.png 947w, https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey-300x278.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey-768x710.png 768w" data-lazy-sizes="(max-width: 947px) 100vw, 947px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21006" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/securitykey/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey.png" data-orig-size="947,876" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="securitykey" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21006" src="../Images/8a45db9a7378f7a3b1a995557066c409.png" alt="security key " srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey.png 947w, https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey-300x278.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey-768x710.png 768w" sizes="(max-width: 947px) 100vw, 947px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/securitykey.png"/></noscript>
<p>当通过GitHub存储项目时，为了避免令牌从React应用中泄漏，在React项目的根目录中创建一个<code>.env</code>文件，并将访问密钥粘贴在下面代码片段中的<code>YOUR_KEY_HERE</code>位置:</p>
<pre>DB_KEY=YOUR_KEY_HERE</pre>
<p>确保在<code>.gitignore</code>中添加该文件。现在，让我们从FaunaDB仪表板创建一个新的数据集合。从侧面菜单转到<code>Collections</code>选项卡，并按下<code>New Collection</code>按钮:</p>
<p><img data-attachment-id="21033" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/collectionstab/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab.png" data-orig-size="947,876" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="collectionstab" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab.png" decoding="async" class="aligncenter size-full wp-image-21033 jetpack-lazy-image" src="../Images/b19295ca8c03e68eb6b8dca8988f40a9.png" alt="collections tab" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab.png 947w, https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab-300x278.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab-768x710.png 768w" data-lazy-sizes="(max-width: 947px) 100vw, 947px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21033" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/collectionstab/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab.png" data-orig-size="947,876" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="collectionstab" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21033" src="../Images/b19295ca8c03e68eb6b8dca8988f40a9.png" alt="collections tab" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab.png 947w, https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab-300x278.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab-768x710.png 768w" sizes="(max-width: 947px) 100vw, 947px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionstab.png"/></noscript>
<p>输入收藏的名称并按下<code>Save</code>按钮:</p>
<p><img data-attachment-id="21037" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/collectionname/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname.png" data-orig-size="947,876" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="collectionname" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname.png" decoding="async" class="aligncenter size-full wp-image-21037 jetpack-lazy-image" src="../Images/e216984538ba8a0613edfbc408ff478c.png" alt="collection name " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname.png 947w, https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname-300x278.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname-768x710.png 768w" data-lazy-sizes="(max-width: 947px) 100vw, 947px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21037" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/collectionname/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname.png" data-orig-size="947,876" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="collectionname" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname-300x278.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21037" src="../Images/e216984538ba8a0613edfbc408ff478c.png" alt="collection name " srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname.png 947w, https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname-300x278.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname-768x710.png 768w" sizes="(max-width: 947px) 100vw, 947px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/collectionname.png"/></noscript>
<p>最后一步是创建一个新的索引。转到<code>Indexes</code>选项卡创建一个索引。<a href="https://docs.fauna.com/fauna/current/tutorials/indexes/search.html" target="_blank" rel="noopener noreferrer">在FaunaDB中搜索文档</a>可以通过使用<code>indexes</code>来完成，特别是通过将输入与索引的<code>terms</code>字段进行匹配。如果您希望拥有在特定屏幕上搜索等功能，这将很有帮助:</p>
<p><img data-attachment-id="21039" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/indexestab/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab.png" data-orig-size="1070,980" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="indexestab" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab-300x275.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab-1024x938.png" decoding="async" class="aligncenter size-full wp-image-21039 jetpack-lazy-image" src="../Images/e6aa585a9c9f7c4606900e7d5263a2eb.png" alt="indexes tab" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab.png 1070w, https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab-300x275.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab-1024x938.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab-768x703.png 768w" data-lazy-sizes="(max-width: 1070px) 100vw, 1070px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21039" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/indexestab/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab.png" data-orig-size="1070,980" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="indexestab" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab-300x275.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab-1024x938.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21039" src="../Images/e6aa585a9c9f7c4606900e7d5263a2eb.png" alt="indexes tab" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab.png 1070w, https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab-300x275.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab-1024x938.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab-768x703.png 768w" sizes="(max-width: 1070px) 100vw, 1070px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/indexestab.png"/></noscript>
<p>就是这样。现在让我们开始将React应用程序连接到动物群数据库的过程，并开始构建它。</p>
<h2>创建新的React应用程序并安装依赖项</h2>
<p>要在React应用程序中集成FaunaDB SDK，首先，让我们创建一个新的React项目。然后，安装所需的依赖项。为了快速设置UI，让我们使用React应用程序的材质UI库。您可以替换自己选择的UI组件库:</p>
<pre>npx create-react-app expense-tracker-FaunaDB
# after the project directory is created
cd expense-tracker-FaunaDB
# install dependencies
yarn add faunadb @material-ui/core</pre>
<p><code>faunadb</code>包是FaunaDB的FaunaDB JavaScript驱动。<code>@material-ui/core</code>是基于材质设计系统的UI库，内置了React组件，可以直接在React应用中使用。</p>
<p>要在React应用程序中集成@material-ui/core包，请确保您遵循官方文档<a href="https://material-ui.com/getting-started/installation/" target="_blank" rel="noopener noreferrer">中的说明指南。</a>在此步骤之后，<code>package.json</code>文件将使用以下依赖项进行更新:</p>
<pre>{
  "faunadb": "2.14.2",
  "@material-ui/core": "4.10.2"
}</pre>
<h2>在React应用中集成FaunaDB SDK</h2>
<p>要将<code>faunadb</code>客户端与React应用程序集成，您必须从应用程序进行初始连接。在目录路径<code>src/config/</code>下创建一个新文件<code>db.js</code>。然后导入<code>faunadb</code>驱动程序并定义一个新的客户端。</p>
<p>作为参数传递给<code>faunadb.Client()</code>方法的<code>secret</code>将保存来自<code>.env</code>文件的访问密钥:</p>
<pre>import faunadb from 'faunadb';
const client = new faunadb.Client({
  secret: process.env.DB_KEY
});
const q = faunadb.query;
export { client, q };</pre>
<p>这就是最初的整合。</p>
<h2>使用材质用户界面创建导航栏</h2>
<p>首先在<code>src/</code>目录中创建一个新的<code>components/</code>目录。该目录将包含本教程中演示React应用程序将使用的大多数组件。在目录中创建一个文件，我们称之为<code>Navigation.js</code>。</p>
<pre>import { React } from 'react';
export default function Navigation() {
  // ...
}</pre>
<p>这个组件文件将负责显示带有应用程序标题的导航栏。应用程序的标题将作为道具从父组件(当前情况下是<code>App</code>组件)传递给这个组件。</p>
<p>要构建导航栏，让我们使用材料用户界面库中一些预定义的用户界面组件:</p>
<pre>// other import statements
import { AppBar, Toolbar, Typography } from '@material-ui/core';</pre>
<p><code>AppBar</code>组件用于显示web应用程序的品牌、屏幕标题和导航。这就是我们要用它的原因。<code>ToolBar</code>组件是包装器，您可以在其中水平放置组件。<code>Typography</code>组件应用默认可用的材质UI主题。</p>
<p><code>title</code>道具将是应用程序的标题或名称:</p>
<pre>export default function Navigation({ title }) {
  return (
    &lt;AppBar&gt;
      &lt;Toolbar&gt;
        &lt;Typography variant="h6"&gt;{title}&lt;/Typography&gt;
      &lt;/Toolbar&gt;
    &lt;/AppBar&gt;
  );
}</pre>
<p>在上面的代码片段中，请注意<code>Typography</code>组件上的<code>variant</code>属性。它使用变体映射将一个UI元素与一个HTML语义元素恰当地关联起来(比如代码片段中的<code>h6</code>)。</p>
<p>要查看它的运行，请在<code>App.js</code>文件中导入Navbar组件:</p>
<pre>import React from 'react';
import Navigation from './components/Navigation';
function App() {
  return &lt;Navigation title="Expense Tracker app" /&gt;;
}
export default App;</pre>
<p>从终端窗口中，启动开发服务器并在浏览器窗口中打开URL <code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>。结果如下:</p>
<p><img data-attachment-id="21056" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/reactappexpensetra-cker/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker.png" data-orig-size="562,561" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="reactappexpensetra cker" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker-300x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker.png" decoding="async" class="aligncenter size-full wp-image-21056 jetpack-lazy-image" src="../Images/79de19bcb225dbe98096bf99d38b3bf1.png" alt="local host expense tracker" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker.png 562w, https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker-300x300.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker-150x150.png 150w" data-lazy-sizes="(max-width: 562px) 100vw, 562px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21056" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/reactappexpensetra-cker/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker.png" data-orig-size="562,561" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="reactappexpensetra cker" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker-300x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21056" src="../Images/79de19bcb225dbe98096bf99d38b3bf1.png" alt="local host expense tracker" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker.png 562w, https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker-300x300.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker-150x150.png 150w" sizes="(max-width: 562px) 100vw, 562px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reactappexpensetra-cker.png"/></noscript>
<h2>使用网格布局组件</h2>
<p>要在使用材质UI库时布局React组件，一个常用的方法是使用<code>Grid</code>组件。首先，将该组件导入到<code>App</code>组件中，如下所示:</p>
<pre>import { Grid } from '@material-ui/core';</pre>
<p>该组件提供对它所环绕的自定义组件的大小以及它们的间距的控制。Material Design的响应式用户界面基于12列网格布局。<code>Grid</code>组件帮助您实现这个布局系统，然后提供想要显示的值或网格数。材质UI使用CSS的Flexbox来管理网格列的布局对齐和大小调整。基本网格可能如下所示:</p>
<p><img data-attachment-id="21058" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/gridfauna/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna.png" data-orig-size="850,253" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="gridfauna" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna-300x89.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna.png" decoding="async" class="aligncenter size-full wp-image-21058 jetpack-lazy-image" src="../Images/0ebf7e478e19fcf9f523c64291622ca8.png" alt="CSS flexbox layout " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna.png 850w, https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna-300x89.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna-768x229.png 768w" data-lazy-sizes="(max-width: 850px) 100vw, 850px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21058" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/gridfauna/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna.png" data-orig-size="850,253" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="gridfauna" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna-300x89.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21058" src="../Images/0ebf7e478e19fcf9f523c64291622ca8.png" alt="CSS flexbox layout " srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna.png 850w, https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna-300x89.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna-768x229.png 768w" sizes="(max-width: 850px) 100vw, 850px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/gridfauna.png"/></noscript>
<p>这个组件是如何工作的呢？首先定义一个父<code>Grid</code>组件，它有一个名为<code>container</code>的属性，其行为类似于<code>flex</code>容器。在它里面，你可以定义其他的<code>Grid</code>组件，这些组件将拥有另一个名为<code>item</code>的属性。基本列宽断点如<code>xs</code>、<code>md</code>等可以应用于每一项。</p>
<p>断点在各种组件内部使用，以使它们能够响应。你可以在官方文档<a href="https://material-ui.com/customization/breakpoints/#breakpoints" target="_blank" rel="noopener noreferrer">这里</a>读到更多关于它们的内容。</p>
<p>看看如何使用<code>Grid</code>组件设置相邻对齐的两个段落的例子。每个<code>item</code>组件都有一些虚拟文本要显示。<code>makeStyles</code>来自于材质UI API。它将一个样式表与一个函数组件链接起来，并通过使用对象名作为一个<code>className</code>属性的值，返回一个在组件内部使用的钩子。</p>
<pre>import React from 'react';
import { Grid, Typography, makeStyles } from '@material-ui/core';
import Navigation from './components/Navigation';
const useStyles = makeStyles({
  root: {
    marginTop: 80,
    margin: 20,
    flexGrow: 1
  }
});
function App() {
  const classes = useStyles();
  return (
    &lt;&gt;
      &lt;Navigation title="Expense Tracker app" /&gt;
      &lt;Grid container className={classes.root}&gt;
        &lt;Grid item xs={12} md={6}&gt;
          &lt;Typography variant="p"&gt;
            Lorem ipsum dolor sit, amet consectetur adipisicing elit.
            Reprehenderit itaque iusto perferendis consectetur culpa
            accusantium! Dolor, nemo natus ducimus esse minus, ut laborum
            excepturi deserunt recusandae praesentium eligendi consectetur
            labore.
          &lt;/Typography&gt;
        &lt;/Grid&gt;
        &lt;Grid item xs={12} md={6}&gt;
          &lt;Typography variant="p"&gt;
            Lorem ipsum dolor sit, amet consectetur adipisicing elit.
            Reprehenderit itaque iusto perferendis consectetur culpa
            accusantium! Dolor, nemo natus ducimus esse minus, ut laborum
            excepturi deserunt recusandae praesentium eligendi consectetur
            labore.
          &lt;/Typography&gt;
        &lt;/Grid&gt;
      &lt;/Grid&gt;
    &lt;/&gt;
  );
}
export default App;</pre>
<p>在更宽的屏幕上，这是断点<code>md</code>将如何显示内容:<br/> <img data-attachment-id="21062" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/contentdisplayed/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed.png" data-orig-size="730,283" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="contentdisplayed" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed-300x116.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed.png" decoding="async" class="aligncenter size-full wp-image-21062 jetpack-lazy-image" src="../Images/3ecb54449afff0d7ab61285ab854917a.png" alt="displayed content " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed-300x116.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21062" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/contentdisplayed/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed.png" data-orig-size="730,283" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="contentdisplayed" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed-300x116.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21062" src="../Images/3ecb54449afff0d7ab61285ab854917a.png" alt="displayed content " srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed-300x116.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/contentdisplayed.png"/></noscript>
<p>在较小的屏幕上，断点<code>xs</code>将显示如下所示的内容:</p>
<p><img data-attachment-id="21063" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/smallscreendisplay/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay.png" data-orig-size="794,570" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="smallscreendisplay" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay-300x215.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay.png" decoding="async" class="aligncenter size-full wp-image-21063 jetpack-lazy-image" src="../Images/69cd9a746ee788ebf0e430a829a32227.png" alt="small screen content display" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay.png 794w, https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay-300x215.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay-768x551.png 768w" data-lazy-sizes="(max-width: 794px) 100vw, 794px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21063" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/smallscreendisplay/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay.png" data-orig-size="794,570" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="smallscreendisplay" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay-300x215.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21063" src="../Images/69cd9a746ee788ebf0e430a829a32227.png" alt="small screen content display" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay.png 794w, https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay-300x215.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay-768x551.png 768w" sizes="(max-width: 794px) 100vw, 794px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/smallscreendisplay.png"/></noscript>
<p>现在你已经对材质UI的工作原理有了基本的了解，让我们来设置React应用的核心UI。</p>
<h2>构建费用应用程序的用户界面</h2>
<p>在本节中，让我们首先使用Material UI库组件添加一些UI，以显示一个输入字段，用户将在该字段中输入新的费用。此外，在输入字段旁边添加一个按钮，以便在将费用添加到费用跟踪器列表时触发操作。在<code>App.js</code>文件中，导入以下语句:</p>
<pre>import React, { useState } from 'react';
import {
  Paper,
  Grid,
  Button,
  Typography,
  TextField,
  makeStyles
} from '@material-ui/core';</pre>
<p>在<code>App</code>组件内部，使用<code>useState</code> React钩子创建一个名为<code>expenseName</code>的状态变量，默认值为空字符串。它将存储用户输入的值，即费用的详细信息。</p>
<p>然后用数组的默认值定义第二个状态变量，名为<code>expenses</code>，它将存储所有的费用明细项目:</p>
<pre>function App() {
  const classes = useStyles();
  const [expenseDetail, setExpenseDetail] = useState('');
  const [expenses, setExpenses] = useState([]);
  // ...
}</pre>
<p>然后，定义三个处理函数:<code>handleExpenseDetailChange</code>、<code>handleSubmit</code>、<code>resetInputField</code>。</p>
<p>第一个处理函数将更新状态变量<code>expenseDetail</code>中用户输入的值。</p>
<p>第二个函数将请求数据库在数据库中存储值。让我们在后面的部分定义这个函数的内容。</p>
<p>第三个处理程序方法将输入字段重置为空，并在UI上显示占位符值:</p>
<pre>function App() {
  // ...
  function handleExpenseDetailChange(event) {
    console.log(event.target.value);
    setExpenseDetail(event.target.value);
  }
  function handleSubmit(event) {
    event.preventDefault();
  }
  function resetInputField() {
    setExpenseDetail('');
  }
  // ...
}</pre>
<p>最后，定义输入字段和按钮，以便使用物料UI中的可视组件添加费用详细信息。此外，为费用列表添加一些样式:</p>
<pre>const useStyles = makeStyles({
  root: {
    marginTop: 80,
    margin: 20,
    flexGrow: 1
  },
  list: {
    marginTop: 20
  }
});
function App() {
  // ...
  return (
    &lt;&gt;
      &lt;Navigation title="Expense Tracker app" /&gt;
      &lt;Grid container className={classes.root} spacing={3}&gt;
        &lt;Grid item xs={12} md={6}&gt;
          &lt;Paper style={{ margin: 16, padding: 16 }}&gt;
            &lt;Grid container&gt;
              &lt;Grid xs={10} md={11} item style={{ paddingRight: 16 }}&gt;
                &lt;TextField
                  type="text"
                  name={expenseDetail}
                  value={expenseDetail}
                  placeholder="Add your expense here"
                  fullWidth
                  onChange={handleExpenseDetailChange}
                /&gt;
              &lt;/Grid&gt;
              &lt;Grid xs={2} md={1} item&gt;
                &lt;Button
                  fullWidth
                  color="secondary"
                  variant="outlined"
                  onClick={handleSubmit}
                &gt;
                  Add
                &lt;/Button&gt;
              &lt;/Grid&gt;
            &lt;/Grid&gt;
          &lt;/Paper&gt;
        &lt;/Grid&gt;
        &lt;Grid item xs={12} md={5} className={classes.list}&gt;
          &lt;Typography&gt;List of Expenses&lt;/Typography&gt;
        &lt;/Grid&gt;
      &lt;/Grid&gt;
    &lt;/&gt;
  );
}</pre>
<p>完成此步骤后，您将在浏览器窗口中看到以下结果:</p>
<p><img data-attachment-id="21069" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/browserwindow/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow.png" data-orig-size="730,266" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browserwindow" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow-300x109.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow.png" decoding="async" class="aligncenter size-full wp-image-21069 jetpack-lazy-image" src="../Images/607fbd2b873b76b622966e05070a12d0.png" alt="browser window after this step" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow-300x109.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21069" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/browserwindow/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow.png" data-orig-size="730,266" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="browserwindow" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow-300x109.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21069" src="../Images/607fbd2b873b76b622966e05070a12d0.png" alt="browser window after this step" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow-300x109.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/browserwindow.png"/></noscript>
<p><img data-attachment-id="21070" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/addexpense/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense.png" data-orig-size="730,266" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="addexpense" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense-300x109.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense.png" decoding="async" class="aligncenter size-full wp-image-21070 jetpack-lazy-image" src="../Images/f7f772c50447a1b450df92f192793783.png" alt="add $250 flight cost to expense app" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense-300x109.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21070" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/addexpense/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense.png" data-orig-size="730,266" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="addexpense" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense-300x109.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21070" src="../Images/f7f772c50447a1b450df92f192793783.png" alt="add $250 flight cost to expense app" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense-300x109.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/addexpense.png"/></noscript>
<p>为了确保记录用户输入的值，让我们转到浏览器窗口并进行测试。确保打开开发工具-&gt;控制台选项卡。</p>
<p><img data-attachment-id="21072" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/consoleloginput/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput.png" data-orig-size="730,266" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="consoleloginput" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput-300x109.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput.png" decoding="async" class="aligncenter size-full wp-image-21072 jetpack-lazy-image" src="../Images/4baaa4e9c9670d2d3248c7f2c5d982e1.png" alt="input in console log " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput-300x109.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21072" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/consoleloginput/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput.png" data-orig-size="730,266" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="consoleloginput" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput-300x109.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21072" src="../Images/4baaa4e9c9670d2d3248c7f2c5d982e1.png" alt="input in console log " srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput-300x109.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/consoleloginput.png"/></noscript>
<h2>通过编写查询创建API</h2>
<p>因为我们的费用列表应用程序将有一些基本的CRUD操作，所以让我们创建一个名为<code>src/api/</code>的新目录和一个名为<code>index.js</code>的新文件。确保从<code>config/db.js</code>文件中导入客户端和查询实例:</p>
<pre>import { client, q } from '../config/db';
export const getAllExpenses;
export const createExpenseItem;
export const deleteExpenseItem;</pre>
<p>从该文件中导出的所有三个变量都是查询。让我们来定义它们。第一个查询是从数据库集合中读取所有项目。</p>
<p>要查询数据库集合中的费用列表，需要使用<code>all_expenses</code>索引。下面的查询将返回一个ref，可以通过映射得到结果。确保添加catch，以便在运行查询时出现错误时可以将其注销:</p>
<pre>export const getAllExpenses = client
  .query(q.Paginate(q.Match(q.Ref('indexes/all_expenses'))))
  .then(response =&gt; {
    const expenseRef = response.data;
    const getAllDataQuery = expenseRef.map(ref =&gt; {
      return q.Get(ref);
    });
    return client.query(getAllDataQuery).then(data =&gt; data);
  })
  .catch(error =&gt; console.error('Error: ', error.message));</pre>
<p>下一个查询是在<code>expenses</code>集合中创建一个新项目(<em>文档</em>):</p>
<pre>export const createExpenseItem = name =&gt;
  client
    .query(
      q.Create(q.Collection('expenses'), {
        data: {
          name
        }
      })
    )
    .then(ret =&gt; ret)
    .catch(error =&gt; console.error('Error: ', error.message));</pre>
<p>要从数据库集合中删除一个项目，您只需参考您想要删除的<code>expense</code> ID:</p>
<pre>export const deleteExpenseItem = expenseId =&gt;
  client
    .query(q.Delete(q.Ref(q.Collection('expenses'), expenseId)))
    .then(ret =&gt; ret)
    .catch(error =&gt; console.error('Error: ', error.message));</pre>
<h2>向FaunaDB添加费用项目</h2>
<p>要将费用明细添加到FaunaDB集合中，请在<code>App.js</code>文件中导入API函数<code>createExpenseItem</code>:</p>
<pre>import { createExpenseItem } from './api';</pre>
<p>然后，修改<code>handleSubmit</code>方法，调用API函数<code>createExpenseItem</code>，并将<code>expenseDetail</code>状态变量作为唯一的参数传递。</p>
<pre>function handleSubmit(event) {
  event.preventDefault();
  createExpenseItem(expenseDetail).then(res =&gt; {
    console.log('Expense details added to the database');
  });
  resetInputField();
}</pre>
<p>现在，当您尝试添加新费用时，数据库集合也将得到更新:<br/> <img data-attachment-id="21079" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/updateindatabase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateindatabase.gif" data-orig-size="730,213" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="updateindatabase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateindatabase-300x88.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateindatabase.gif" decoding="async" class="aligncenter size-full wp-image-21079 jetpack-lazy-image" src="../Images/58c49138d4a95c0438da2a33bf7d42ca.png" alt="update in database shown in console log " data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/updateindatabase.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/updateindatabase.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21079" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/updateindatabase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateindatabase.gif" data-orig-size="730,213" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="updateindatabase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateindatabase-300x88.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateindatabase.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21079" src="../Images/58c49138d4a95c0438da2a33bf7d42ca.png" alt="update in database shown in console log " data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/updateindatabase.gif"/></noscript>
<p>这是最新的数据库集合。FaunaDB数据库负责为每个文档创建一个唯一的<code>id</code>:</p>
<p><img data-attachment-id="21081" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/updateddatabasedashboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard.png" data-orig-size="1055,989" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="updateddatabasedashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard-300x281.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard-1024x960.png" decoding="async" class="aligncenter size-full wp-image-21081 jetpack-lazy-image" src="../Images/19757d4aec91910fa8f862bb6326dee7.png" alt="updated database dashboard" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard.png 1055w, https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard-300x281.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard-1024x960.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard-768x720.png 768w" data-lazy-sizes="(max-width: 1055px) 100vw, 1055px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21081" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/updateddatabasedashboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard.png" data-orig-size="1055,989" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="updateddatabasedashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard-300x281.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard-1024x960.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21081" src="../Images/19757d4aec91910fa8f862bb6326dee7.png" alt="updated database dashboard" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard.png 1055w, https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard-300x281.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard-1024x960.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard-768x720.png 768w" sizes="(max-width: 1055px) 100vw, 1055px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/updateddatabasedashboard.png"/></noscript>
<h2>显示数据库中的费用项目列表</h2>
<p>要显示FaunaDB集合的费用列表，您所要做的就是从<code>useEffect</code>钩子内的<code>./api/index.js</code>文件中调用查询<code>getAllExpenses</code>。这是因为当应用程序组件第一次呈现时，它会将数据显示为项目列表(如果数据库中有任何项目的话):</p>
<pre>import { getAllExpenses, createExpenseItem, deleteExpenseItem } from './api';</pre>
<p>因为集合中的数据将以列表格式显示，所以让我们导入所有必要的组件来显示项目列表，并更新其他导入语句:</p>
<pre>import React, { useState, useEffect } from 'react';
import {
  Paper,
  Grid,
  Button,
  Typography,
  TextField,
  makeStyles,
  List,
  ListItem,
  ListItemText,
  ListItemSecondaryAction
} from '@material-ui/core';</pre>
<p>在App组件内部，在所有处理函数之前定义<code>useEffect</code>钩子，以在初始渲染时获取数据:</p>
<pre>function App() {
  // ...
  useEffect(() =&gt; {
    getAllExpenses.then(res =&gt; {
      setExpenses(res);
      console.log(res);
    });
  }, []);
  // ...
}</pre>
<p>下面是从数据库中获取的数据数组的结构:</p>
<p><img data-attachment-id="21085" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/dataarrayfetchedfromthedatabase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase.png" data-orig-size="784,313" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="dataarrayfetchedfromthedatabase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase-300x120.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase.png" decoding="async" class="aligncenter size-full wp-image-21085 jetpack-lazy-image" src="../Images/465ebe03e3533169795fb5c8db805aeb.png" alt="data array fetched from the database" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase.png 784w, https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase-300x120.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase-768x307.png 768w" data-lazy-sizes="(max-width: 784px) 100vw, 784px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21085" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/dataarrayfetchedfromthedatabase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase.png" data-orig-size="784,313" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="dataarrayfetchedfromthedatabase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase-300x120.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21085" src="../Images/465ebe03e3533169795fb5c8db805aeb.png" alt="data array fetched from the database" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase.png 784w, https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase-300x120.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase-768x307.png 768w" sizes="(max-width: 784px) 100vw, 784px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/dataarrayfetchedfromthedatabase.png"/></noscript>
<p>可以看到ID是由<code>ref.id</code>呈现的。</p>
<p>现在，在输入字段后添加以下JSX来显示项目列表。为了在列表中显示这些费用，让我们仅在<code>expenses</code>数组不为空时使用JavaScript <code>map</code>函数映射<code>expenses</code>数组:</p>
<pre>&lt;Grid item xs={12} md={5} className={classes.list}&gt;
  &lt;Typography&gt;List of Expenses&lt;/Typography&gt;
  {expenses &amp;&amp;
    expenses.map(expense =&gt; (
      &lt;div key={expense.ref.id}&gt;
        &lt;Paper style={{ margin: 16 }}&gt;
          &lt;List style={{ overflow: 'scroll' }}&gt;
            &lt;ListItem&gt;
              &lt;ListItemText primary={expense.data.name} /&gt;
              &lt;ListItemSecondaryAction&gt;
                &lt;Button
                  color="primary"
                  // onClick={}
                &gt;
                  Delete
                &lt;/Button&gt;
              &lt;/ListItemSecondaryAction&gt;
            &lt;/ListItem&gt;
          &lt;/List&gt;
        &lt;/Paper&gt;
      &lt;/div&gt;
    ))}
&lt;/Grid&gt;</pre>
<p>这是这个步骤之后你将要得到的输出:<br/> <img data-attachment-id="21088" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/displayedlistofexpenses/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses.png" data-orig-size="730,266" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="displayedlistofexpenses" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses-300x109.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses.png" decoding="async" class="aligncenter size-full wp-image-21088 jetpack-lazy-image" src="../Images/08066035c570caf0e3def4216f3f8eda.png" alt="displayed list of expenses" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses-300x109.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21088" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/displayedlistofexpenses/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses.png" data-orig-size="730,266" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="displayedlistofexpenses" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses-300x109.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21088" src="../Images/08066035c570caf0e3def4216f3f8eda.png" alt="displayed list of expenses" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses-300x109.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/displayedlistofexpenses.png"/></noscript>
<h2>从列表中删除费用项目</h2>
<p>要删除一个费用项目，让我们添加处理函数<code>handleDeleteItem</code>来从数据库和UI中删除该项目:</p>
<pre>function App() {
  // ...
  function handleDeleteItem(event, id) {
    event.preventDefault();
    deleteExpenseItem(id).then(res =&gt; res);
    const newExpenses = expenses.filter(expense =&gt; expense.ref.id !== id);
    setExpenses(newExpenses);
  }
  // ...
}</pre>
<p>此外，要触发此方法，请将其添加到<code>&lt;List&gt;</code>组件内的<code>&lt;Button&gt;</code>:</p>
<pre>&lt;Button
  color="primary"
  onClick={event =&gt; handleDeleteItem(event, expense.ref.id)}&gt;
  Delete
&lt;/Button&gt;</pre>
<p>现在，返回浏览器窗口，尝试删除一个项目。您会注意到数据库集合也更新了:</p>
<p><img data-attachment-id="21092" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/finishedapp-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/finishedapp.gif" data-orig-size="1425,608" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="finishedapp" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/finishedapp-300x128.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/finishedapp-1024x437.gif" decoding="async" class="aligncenter size-full wp-image-21092 jetpack-lazy-image" src="../Images/46cf6221ff4567fea914daf3e81e9c69.png" alt="finished app" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/finishedapp.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/finishedapp.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="21092" data-permalink="https://blog.logrocket.com/how-to-integrate-faunadb-in-react-apps-with-material-ui/finishedapp-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/finishedapp.gif" data-orig-size="1425,608" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="finishedapp" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/finishedapp-300x128.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/finishedapp-1024x437.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-21092" src="../Images/46cf6221ff4567fea914daf3e81e9c69.png" alt="finished app" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/finishedapp.gif"/></noscript>
<h2>结论</h2>
<p><em>恭喜你！</em></p>
<p>我希望通过阅读这篇文章，你能学到一些新的东西。FaunaDB和React的结合对水疗来说很棒。您可以通过使用订阅来扩展此应用程序，以便在数据库实时获得新信息时更新UI。</p>
<p>👉以下是一些你可能在读完这篇文章后会喜欢的资源列表:</p>

<p> </p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>