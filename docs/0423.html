<html>
<head>
<title>React Spring vs Animated - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React Spring vs动画- LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/react-spring-vs-animated/#0001-01-01">https://blog.logrocket.com/react-spring-vs-animated/#0001-01-01</a></blockquote><div><article class="article-post">
<p><a href="http://animatedjs.github.io/interactive-docs/" target="_blank" rel="noopener noreferrer">动画</a>库旨在使动画流畅、强大、易于构建和维护。它侧重于输入和输出之间的声明性关系，中间有可配置的转换，以及简单的<code>start</code> / <code>stop</code>方法来控制基于时间的动画执行。</p>
<p><a href="https://www.react-spring.io/" target="_blank" rel="noopener noreferrer"> React Spring </a>可以看作是动画库的扩展版。它建立在Animated的基础上，使它更精简、更灵活。它继承了<a href="https://github.com/chenglou/react-motion" target="_blank" rel="noopener noreferrer"> React Motion </a>声明式API，并不遗余力地对其进行简化。它有许多有用的原语，可以插入几乎所有内容，最后但同样重要的是，可以通过直接提交到DOM来制作动画，而不是逐帧重新渲染组件。</p>
<h2>先决条件</h2>
<p>为了正确理解本文，需要对以下技术有一个基本的了解:</p>

<h2>设置动画</h2>
<p>您可以使用npm将动画资源库添加到项目中:</p>
<pre>npm install animated</pre>
<p>然后将其导入到您的项目中，如下所示:</p>
<pre>import Animated from 'animated/lib/targets/react-dom';</pre>
<h2>设置反作用弹簧</h2>
<p>就像动画一样，您可以通过npm安装React Spring库，如下所示:</p>
<pre>npm install react-spring</pre>
<p>并将其导入到项目中，如下所示:</p>
<pre>import { Spring } from 'react-spring'</pre>
<h2>平台目标</h2>
<p>从import语句中可以看出，动画库专门针对DOM:</p>
<pre>import Animated from 'animated/lib/targets/react-dom';</pre>
<p>与动画库不同，React Spring允许您为DOM以外的目标进行构建:</p>
<pre>// The default export is valid for react-native as well
import { Spring } from 'react-spring'

// react-konva
import { Spring } from 'react-spring/dist/konva'

// Any other target or platform
import { Spring } from 'react-spring/dist/universal'</pre>
<h2>插入文字</h2>
<p>考虑一个旋转一段时间并通过插值分解成多个部分的动画长方体，动画库将在(0，4)之间的数字输入范围内对其进行插值，然后在(0到360度)之间指定一组以度为单位的输出范围值:</p>
<pre>// ... Animated
render() {
  return (
    &lt;div className="App"&gt;
&lt;Animated.div
  className="box"
  onClick={this.toggle}
  style={{
    transform: [{
    rotate: this.state.anim.interpolate({
    inputRange: [0, 4],
    outputRange: ["0deg", "360deg"]
  })
  }
],
position: "relative"
}}/&gt;
  &lt;/div&gt;
  );
}</pre>
<p/>
<p>使用React Spring，<code>from</code>属性将旋转设置为稳定的“0度”,并将其旋转90%,这有助于更流畅和声明性的旋转:</p>
<pre>// ... React Spring
render() {
  return (
    &lt;div className="App"&gt;
&lt;Spring
  from={{ rotation: "0deg" }}
  to={{ rotation: this.state.turn ? "0" : "90%" }}&gt;
  
    {({ rotation }) =&gt; (
  &lt;div
  className="box"
  style={{ transform: `rotate(${rotation})` }}
  onClick={this.toggle}&gt;
    {this.state.deg}
  &lt;/div&gt;
 )}
&lt;/Spring&gt;
    &lt;/div&gt;
  );
}</pre>
<p/>
<p>在这方面，如果您喜欢键入更少的代码并保持清晰的理解水平，React Springs是最好的选择，因为它不仅仅处理数字。有了React Spring，你几乎可以插入任何东西，从颜色到角度，相对长度，SVG路径等等。</p>
<p>然而，如果您对传统的替代过程没有任何问题，包括键入尽可能多的代码，只插入相关的元素，并且通常坚持熟悉的路线，那么动画库在这里提供了一致性。</p>
<h2>宣言的</h2>
<p>React Spring包含了<a href="https://blog.logrocket.com/10-mistakes-react-developers-make/" target="_blank" rel="noopener noreferrer"> React </a>的声明性质。它有一个简化的声明式API，允许用几行代码创建复杂的动画。它还公开了一个命令式API，以防您想要为动画过程手动指定唯一的控件。</p>
<h3>React Spring中的声明:</h3>
<pre>// ... React Spring
class App extends React.Component {
state = { toggle: false };
handleToggle = () =&gt; this.setState(state =&gt; ({ toggle: !state.toggle }));
render() {
  return (
    &lt;div className="App"&gt;
&lt;Spring
  from={{ scale: 0.5 }}
  to={{ scale: this.state.toggle ? 0.5 : 1 }}&gt;
    {({ scale }) =&gt; (
&lt;div
style={{ transform: `scale(${scale})` }}
className="box"
onClick={this.handleToggle}/&gt;
)}
&lt;/Spring&gt;
  &lt;/div&gt;
  );
  }
}
const rootElement = document.getElementById("root");
ReactDOM.render(&lt;App /&gt;, rootElement);</pre>
<p>另一方面，Animated有一个命令式API，这意味着创建动画将涉及一个相当手动的过程和更冗长的代码。</p>
<p>动画形式的声明:</p>
<h3>从上面的例子来看，React Spring的<code>to</code>和<code>from</code>属性使得将一个元素的<code>scale</code>属性从一种状态改变为另一种状态变得很容易，并且通过它，库相应地为元素制作动画。</h3>
<pre>// ... Animated
class App extends React.Component {
  state = { toggle: false, anim: new Animated.Value(1) };
  handleClick = () =&gt; {
    this.setState(
      state =&gt; ({ toggle: !state.toggle }),
      () =&gt; {
        this.state.toggle
          ? Animated.timing(this.state.anim, { toValue: 0.5 }).start()
          : Animated.timing(this.state.anim, { toValue: 1 }).start();
   }
  );
};
render() {
  return (
  &lt;div className="App"&gt;
    &lt;Animated.div
      className="box"
      style={{ transform: [{ scale: this.state.anim }] }}
      onClick={this.handleClick}/&gt;
  &lt;/div&gt;
  );
  }
}
const rootElement = document.getElementById("root");
ReactDOM.render(&lt;App /&gt;, rootElement);</pre>
<p>对于动画，我们必须在组件的状态中设置一个初始的<code>anim</code>值，并用<code>Animated.timing</code>方法中的<code>toValue</code>更新它，然后在库可以执行动画之前调用它的<code>start</code>方法。</p>
<p>基元</p>
<p>React Spring包含像<code>&lt;Spring&gt;</code>、<code>&lt;Trail&gt;</code>、<code>&lt;Transition&gt;</code>、<code>&lt;Parallax&gt;</code>这样的原语，用于轨迹、过渡、视差等等动画。这些原语有助于您实现原语动画，而无需手动编写所有必需的逻辑。</p>
<h2>就像声明一样，动画不包含原语。为了实现原始动画，您必须手动创建所需的动画，这涉及到编写更多的代码行。</h2>
<p>表演</p>
<p>由于React Spring是动画库的增强形式，它利用其应用动画的能力，而不依赖React来逐帧渲染更新，使其具有很高的性能。动画库弥补了性能上的不足，因为它还将对动画的更新直接应用到了一个<code>requestAnimationFrame</code>中的DOM，这确保了动画在所需的帧内渲染，并且不会导致“抖动”。</p>
<h2>与动画库相比，React Spring覆盖了更多领域，因为它结合了动画库和React Motion的现有成果，提供了一个更强大的动画系统。</h2>
<p>宣言的</p>
<p>基元</p>
<table>
<thead>
<tr>
<th>插值</th>
<th>表演</th>
<th>Animated</th>
<th>❌</th>
<th>❌</th>
</tr>
</thead>
<tbody>
<tr>
<td>✅</td>
<td>✅</td>
<td>React-spring</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>✅</td>
<td>✅</td>
<td>如果从设计上来说，你对动画中的声明和原语没有明确的需求，那么Animated的性能足以用它提供的丰富的插值特性构建出你理想的动画。然而，如果你想把它们都放在一起，React Spring可以提供更多的声明和原语。</td>
<td>易用性</td>
<td>正如我们在本文开始时所展示的，开始使用这两个库非常简单，然而，大多数关于Animated及其提供的特性的非常有用的信息都可以在<a href="https://facebook.github.io/react-native/docs/getting-started.html" target="_blank" rel="noopener noreferrer"> React原生文档</a>中找到，这使得在搜索关于Animated的其他信息的学习资源时有点棘手。<a href="https://facebook.github.io/react-native/docs/animations" target="_blank" rel="noopener noreferrer">文档</a>没有为没有动画知识的人提供简单的入门步骤。</td>
</tr>
</tbody>
</table>
<p>然而，React Spring有丰富的<a href="https://www.react-spring.io/" target="_blank" rel="noopener noreferrer">文档</a>，其中有几个例子，为学习如何在React中使用该库制作动画提供了更简单的指导。还有几个React <a href="https://blog.logrocket.com/animations-with-react-spring/" target="_blank" rel="noopener noreferrer">春季教程</a>和<a href="https://scotch.io/tutorials/create-animated-react-apps-with-react-spring" target="_blank" rel="noopener noreferrer">文章在线</a>。</p>
<h2>社区支持</h2>
<p>React Spring的GitHub 上有大约94名贡献者和13.9k名明星，相比之下，<a href="https://github.com/animatedjs/animated" target="_blank" rel="noopener noreferrer">动画</a>有大约10名贡献者和9k名明星，React Spring拥有更强的社区支持，尽管与<a href="https://github.com/animatedjs/animated" target="_blank" rel="noopener noreferrer">动画</a>相比非常新。自诞生以来，React Spring在React开发者生态系统中的贡献比Animated大得多。</p>
<p>React Spring也有支持者和赞助商，他们捐赠资金来支持和确保它的持续发展。下面是这两种技术根据其Github库的代码频率图。</p>
<h2>React Spring也有更多的主动代码贡献，正如上面的图片所示，这表明它很可能已经看到了更多的改进，以赶上JavaScript的快速增长。</h2>
<p>最后的想法</p>
<p>React Spring和Animated都是很棒的动画工具，可以帮助我们创造良好的用户体验。在它们之间进行选择完全取决于您的项目需求和架构。值得注意的是，这篇文章并不是为了炒作或贬低这些工具，而是为了让你更好地了解它们的优势和劣势，从而做出明智的决定。干杯！</p>
<figure id="attachment_5246" aria-describedby="caption-attachment-5246" class="wp-caption aligncenter"><img data-attachment-id="5246" data-permalink="https://blog.logrocket.com/react-spring-vs-animated/attachment/reactspringcodefrequency/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency.png" data-orig-size="1600,1136" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="reactspringcodefrequency" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-300x213.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-1024x727.png" decoding="async" class="wp-image-5246 size-large jetpack-lazy-image" src="../Images/dc698c0859297d791372e76a8951b5f9.png" alt="React Spring code frequency" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-1024x727.png 1024w, https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-300x213.png 300w, https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-768x545.png 768w, https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency.png 1600w" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-1024x727.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-1024x727.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="5246" data-permalink="https://blog.logrocket.com/react-spring-vs-animated/attachment/reactspringcodefrequency/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency.png" data-orig-size="1600,1136" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="reactspringcodefrequency" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-300x213.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-1024x727.png" decoding="async" loading="lazy" class="wp-image-5246 size-large" src="../Images/dc698c0859297d791372e76a8951b5f9.png" alt="React Spring code frequency" srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-1024x727.png 1024w, https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-300x213.png 300w, https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-768x545.png 768w, https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency.png 1600w" sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/reactspringcodefrequency-1024x727.png"/></noscript><figcaption id="caption-attachment-5246" class="wp-caption-text">React Spring code frequency</figcaption></figure>
<figure id="attachment_5248" aria-describedby="caption-attachment-5248" class="wp-caption aligncenter"><img data-attachment-id="5248" data-permalink="https://blog.logrocket.com/react-spring-vs-animated/attachment/animationcodefrequency/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency.png" data-orig-size="1574,1136" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Animationcodefrequency" data-image-description="" data-image-caption="&lt;p&gt;Animated code frequency&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-1024x739.png" decoding="async" class="wp-image-5248 size-large jetpack-lazy-image" src="../Images/6078dfc7c5851c6757c036d18b07589b.png" alt="Animated code frequency" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-1024x739.png 1024w, https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-300x217.png 300w, https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-768x554.png 768w, https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency.png 1574w" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-1024x739.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-1024x739.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="5248" data-permalink="https://blog.logrocket.com/react-spring-vs-animated/attachment/animationcodefrequency/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency.png" data-orig-size="1574,1136" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Animationcodefrequency" data-image-description="" data-image-caption="&lt;p&gt;Animated code frequency&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-1024x739.png" decoding="async" loading="lazy" class="wp-image-5248 size-large" src="../Images/6078dfc7c5851c6757c036d18b07589b.png" alt="Animated code frequency" srcset="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-1024x739.png 1024w, https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-300x217.png 300w, https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-768x554.png 768w, https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency.png 1574w" sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/08/Animationcodefrequency-1024x739.png"/></noscript><figcaption id="caption-attachment-5248" class="wp-caption-text">Animated code frequency</figcaption></figure>
<p> </p>
<h2><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</h2>
<p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p>
<p>. </p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</h2><p>LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p>现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
<p> No more noisy alerting. Smart error tracking lets you triage and categorize issues, then learns from this. Get notified of impactful user issues, not false positives. Less alerts, way more useful signal.
</p>
<p vwo-el-id="28675660750">The LogRocket Redux middleware package adds an extra layer of visibility into your user sessions. LogRocket logs all actions and state from your Redux stores.
</p>
<p vwo-el-id="28675661060">Modernize how you debug your React apps —
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">start monitoring for free</a>.
</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>