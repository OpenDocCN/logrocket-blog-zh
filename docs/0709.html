<html>
<head>
<title>Advanced CSS selectors for common scenarios - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>常见场景的高级CSS选择器</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/advanced-css-selectors-for-common-scenarios/#0001-01-01">https://blog.logrocket.com/advanced-css-selectors-for-common-scenarios/#0001-01-01</a></blockquote><div><article class="article-post">
<p>CSS很奇怪。它不同于web开发人员使用的任何其他语言，但它对于网站的视觉表现——用户与之交互的部分——是至关重要的。就其最基本的形式而言，CSS很简单。例如，<code>background-color: red</code>表示背景颜色为红色。然而，正如任何处理过大型CSS代码库的人会告诉你的，它会很快变得非常复杂和令人困惑。</p>
<p><a href="https://seesparkbox.com/foundry/css_grid_layout_guide_with_flexbox_fallbacks" target="_blank" rel="noopener noreferrer"> CSS格子</a>，<a href="https://seesparkbox.com/foundry/bem_by_example" target="_blank" rel="noopener noreferrer"> BEM </a>，<a href="https://seesparkbox.com/foundry/dart_sass_update_version_1.23.0" target="_blank" rel="noopener noreferrer"> Dart Sass </a>，关于CSS总是有新的东西要学。简直铺天盖地！与其看什么是新的，不如让我们关注CSS的一个基本构件——选择器<a href="https://www.w3schools.com/css/css_selectors.asp" target="_blank" rel="noopener noreferrer"/>。通过更好地理解选择器，以及如何以更高级的方式使用它，您可以用更少的代码和更简洁的CSS解决常见的场景。</p>
<h2>什么是选择器？</h2>
<p>让我们确保我们在同一页上。一个<a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Selectors" target="_blank" rel="noopener noreferrer"> CSS选择器</a>是你如何告诉浏览器什么元素应用属性。它们可以是通用的，适用于一大组元素，也可以是更具体的，仅适用于单个HTML元素。有五种<a href="https://www.w3schools.com/css/css_selectors.asp" target="_blank" rel="noopener noreferrer">类型的选择器</a>:</p>
<ul>
<li><a href="https://www.w3schools.com/css/css_selectors.asp" target="_blank" rel="noopener noreferrer">简单的选择器</a>，用于选择HTML片段，如<code>div</code>、<code>#id</code>或<code>.class</code></li>
<li><a href="https://www.w3schools.com/css/css_combinators.asp" target="_blank" rel="noopener noreferrer">组合子选择器</a>，它们基于代码关系，如“子代”<code>p &gt; div</code>或“相邻兄弟”<code>div + div</code></li>
<li><a href="https://www.w3schools.com/css/css_pseudo_classes.asp" target="_blank" rel="noopener noreferrer">伪类选择器</a>，用于选择元素的特定<strong>状态</strong>，如<code>:hover</code>、<code>:first-child</code>或<code>:nth-of-type</code></li>
<li><a href="https://www.w3schools.com/css/css_pseudo_elements.asp" target="_blank" rel="noopener noreferrer">伪元素选择器</a>，用于选择元素的特定<strong>部分</strong>，如<code>::after</code>、<code>::selection</code>或<code>::first-letter</code>。请注意，与使用单个冒号的伪类选择器相比，它们总是使用双冒号符号<code>::</code></li>
<li><a href="https://www.w3schools.com/css/css_attribute_selectors.asp" target="_blank" rel="noopener noreferrer">属性选择器</a>选择具有某些属性的元素，如(<code>[class|="class-name"]</code>、<code>[type="text"]</code>或<code>[target]</code></li>
</ul>
<p>如果使用两个单独的选择器来声明同一个元素的样式，那么更具体的选择器将胜出——不管它们在CSS文件中的顺序如何。比如像<code>.class-name</code>这样的类选择器就比<code>span</code>这样的一般HTML元素选择器更具体。如果你需要复习一下浏览器如何决定应用何种CSS样式，也就是所谓的<a href="https://blog.logrocket.com/how-css-works-understanding-the-cascade-d181cd89a4d8/" target="_blank" rel="noopener noreferrer"> CSS级联</a>，试试这个<a href="https://wattenberger.com/blog/css-cascade" target="_blank" rel="noopener noreferrer">测试。</a></p>
<p>现在我们已经了解了什么是选择器，让我们深入了解如何有效地使用它们。您可以利用鲜为人知的选择器，甚至将它们组合起来，以减少所需的代码量！这里有一些我在CSS中使用的更高级的选择器。</p>
<h2>:第n个最后一个孩子(-n + 2)</h2>
<p>有许多CSS伪类选择器可以用来从一组相关元素中选择一个元素——或者一个父元素的子元素。</p>
<pre>&lt;parent&gt;
    &lt;child&gt;&lt;/child&gt;
    &lt;child&gt;&lt;/child&gt;
&lt;/parent&gt;</pre>
<p>有<code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:first-child" target="_blank" rel="noopener noreferrer">:first-child</a></code>、<code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-child" target="_blank" rel="noopener noreferrer">:nth-child</a></code>、<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-of-type" target="_blank" rel="noopener noreferrer">、<code>:nth-of-type</code>、</a>、<a href="https://css-tricks.com/how-nth-child-works/" target="_blank" rel="noopener noreferrer">的单子还有</a>。当转换成使用数字、<code>n</code>计数器、<code>odd</code>或<code>even</code>的表达式时，这些选择器变得更加强大。您可以通过数学计算来选择一个组中任意数量的元素。例如，<code>n</code>是一种创建代数表达式的方法。因此<code>(2n+4)</code>等同于<code>(2*n)+4</code>，它将从第四个元素开始选择所有其他元素:</p>
<pre>(2*0)+4 = 4
(2*1)+4 = 6
(2*2)+4 = 8
(2*4)+4 = 10</pre>
<p>这在许多情况下都很有用。例如，您曾经需要只对列表中的最后两项进行样式化吗？您可以向这两个元素添加一个类，这会产生更多的HTML和CSS，或者您可以使用一个CSS选择器，如下所示:</p>
<pre>.item:nth-last-child(-n+2)</pre>
<p>你可以把这个选择器理解为“选择<code>.item</code>的最后两个子节点。”看看这是如何工作的，<code>-n+2</code>等于<code>(-0+2)=2</code>或倒数第二个项目，然后<code>(-1+2)=1</code>或最后一个项目，然后<code>(-2+2)=0</code>不选择任何项目，然后<code>(-3+2=-1)</code>也不选择任何项目，以此类推，得到子元素的总数。由于<code>n</code>前面的负号导致倒计时，所以只选择了两个元素。如果你想选择最后三个项目，<code>-n+3</code>就是这么做的。这允许我们选择这些元素，而不需要在HTML中添加任何东西！</p>
<p class="codepen" data-height="306" data-theme-id="light" data-default-tab="css,result" data-user="iam_aspencer" data-slug-hash="RwPoYXq" data-pen-title="Selector Demo - :nth-last-child(-n+2)">请看<a href="https://codepen.io"> CodePen </a>上安德鲁·斯潘塞(<a href="https://codepen.io/iam_aspencer"> @iam_aspencer </a> ) <br/>的Pen <a href="https://codepen.io/iam_aspencer/pen/RwPoYXq"> <br/>选择器演示——:n-last-child(-n+2)</a>。</p>
<p>:not(:最后一个孩子)</p>
<h2>为了进一步说明最后一个例子，您可以将<code>:last-child</code>与<code>:not</code>选择器结合起来。这在一个组中的最后一个元素具有不同样式的情况下很有帮助。网站通常会要求项目列表，项目之间要留有空格。这些方案的一个常见问题是需要删除组中最后一项下的间距。</h2>
<p><img data-attachment-id="14893" data-permalink="https://blog.logrocket.com/advanced-css-selectors-for-common-scenarios/selectordemo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo.png" data-orig-size="1644,1064" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="selectordemo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-1024x663.png" decoding="async" class="aligncenter wp-image-14893 size-full jetpack-lazy-image" src="../Images/addf2a28d63c0b0bc61557fa9faf96f4.png" alt="selector demo" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo.png 1644w, https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-300x194.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-1024x663.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-768x497.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-1536x994.png 1536w" data-lazy-sizes="(max-width: 1644px) 100vw, 1644px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo.png"/></p>
<p>或者你可能已经使用一个<a href="https://seesparkbox.com/foundry/bem_css_organization" target="_blank" rel="noopener noreferrer"> BEM CSS结构</a>向HTML添加了一个全新的类。这会给你这个:</p><noscript><img data-lazy-fallback="1" data-attachment-id="14893" data-permalink="https://blog.logrocket.com/advanced-css-selectors-for-common-scenarios/selectordemo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo.png" data-orig-size="1644,1064" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="selectordemo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-1024x663.png" decoding="async" loading="lazy" class="aligncenter wp-image-14893 size-full" src="../Images/addf2a28d63c0b0bc61557fa9faf96f4.png" alt="selector demo" srcset="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo.png 1644w, https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-300x194.png 300w, https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-1024x663.png 1024w, https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-768x497.png 768w, https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo-1536x994.png 1536w" sizes="(max-width: 1644px) 100vw, 1644px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/02/selectordemo.png"/></noscript><br/>
Oftentimes with CSS, it can feel natural to style the most common scenario first and <em>then</em> account for any outlying scenarios with a more specific selector. Then, the styles of the more specific selector will override the styles of the more general selector. Which, in our example, might result in something like this:
<pre>.image {
  margin-bottom: 2rem;

  &amp;:last-child {
    margin-bottom: 0;
  }
}</pre>
<p>这两个路径都会产生七行代码和一个重写属性。这并不可怕，但是如果你把你的CSS看作一种编程语言，并且把逻辑“编程”到选择器中，你可以把CSS简化成这样:</p>
<pre>.image {
  margin-bottom: 2rem;
}

.image--last {
  margin-bottom: 0;
}</pre>
<p>阅读上面的选择器，它说“选择不是最后一个孩子的图像。”三行代码，没有覆盖样式——不错！</p>
<pre>.image:not(:last-child) {
  margin-bottom: 2rem;
}</pre>
<p>请看<a href="https://codepen.io"> CodePen </a>上安德鲁·斯潘塞(<a href="https://codepen.io/iam_aspencer"> @iam_aspencer </a> ) <br/>的Pen <a href="https://codepen.io/iam_aspencer/pen/qBdqMQP"> <br/>选择器演示——:n-last-child(-n+2)</a>。</p>
<p class="codepen" data-height="265" data-theme-id="light" data-default-tab="css,result" data-user="iam_aspencer" data-slug-hash="qBdqMQP" data-pen-title="Selector Demo - :nth-last-child(-n + 2)">See the Pen <a href="https://codepen.io/iam_aspencer/pen/qBdqMQP"><br/>
Selector Demo – :nth-last-child(-n + 2)</a> by Andrew Spencer (<a href="https://codepen.io/iam_aspencer">@iam_aspencer</a>)<br/>
on <a href="https://codepen.io">CodePen</a>.</p>
<p>元素:悬停+相邻同级</p>
<h2>让我们看一个不同的场景——悬停状态。有时你需要调整一个不同于被悬停元素的元素。在JavaScript中，这相当简单，因为JavaScript使得搜索特定元素变得很容易——也称为遍历DOM 的<a href="https://www.digitalocean.com/community/tutorials/how-to-traverse-the-dom" target="_blank" rel="noopener noreferrer">。不过，通常情况下，有了正确的HTML结构，你只需要CSS。</a></h2>
<p>有了CSS，你可以使用<a href="https://www.w3schools.com/css/css_combinators.asp" target="_blank" rel="noopener noreferrer">组合子选择器</a>，比如<code>.parent &gt; .child</code>或者<code>.element + .general-sibling</code>来针对不同的元素。CSS不能做的一件事是定位一个被悬停元素的父元素。下面是CSS的目标图:</p>
<p>如何使用强大的兄弟选择器？如果您有两个同级元素，并且需要设置第二个元素的悬停状态的样式，您可以这样做:</p>
<pre>&lt;div&gt;
  &lt;a&gt;
    The element that is hovered
    &lt;span&gt;This is a child, CSS can style this&lt;/span&gt;
  &lt;/a&gt;
  &lt;span&gt;This is a sibling, CSS can style this&lt;/span&gt;
  The "parent" &lt;div&gt; cannot be styled with CSS when the &lt;a&gt; is hovered
&lt;/div&gt;</pre>
<p>请看<a href="https://codepen.io"> CodePen </a>上安德鲁·斯潘塞(<a href="https://codepen.io/iam_aspencer"> @iam_aspencer </a> ) <br/>的笔<a href="https://codepen.io/iam_aspencer/pen/wvaoYoB"> <br/>选择器演示——:悬停+同胞</a>。</p>
<p class="codepen" data-height="265" data-theme-id="light" data-default-tab="css,result" data-user="iam_aspencer" data-slug-hash="wvaoYoB" data-pen-title="Selector Demo - :hover + sibling">See the Pen <a href="https://codepen.io/iam_aspencer/pen/wvaoYoB"><br/>
Selector Demo – :hover + sibling</a> by Andrew Spencer (<a href="https://codepen.io/iam_aspencer">@iam_aspencer</a>)<br/>
on <a href="https://codepen.io">CodePen</a>.</p>
<p>同级选择器也可用于表单域。使用<code>label:hover + input</code>选择器，与<code>&lt;label&gt;</code>元素交互可以用来突出显示<code>&lt;label&gt;</code>之后的兄弟<code>&lt;input&gt;</code>。</p>
<p>请看<a href="https://codepen.io"> CodePen </a>上安德鲁·斯潘塞(<a href="https://codepen.io/iam_aspencer"> @iam_aspencer </a> ) <br/>的Pen <a href="https://codepen.io/iam_aspencer/pen/zYGomdR"> <br/>选择器演示——:hover+同胞链接</a>。</p>
<p class="codepen" data-height="265" data-theme-id="light" data-default-tab="css,result" data-user="iam_aspencer" data-slug-hash="zYGomdR" data-pen-title="Selector Demo - :hover + sibling link">轮到你了</p>
<p>下次你认为CSS是低等语言时，请三思。只是…不一样。根据你的观点，这可能是令人沮丧的，也可能是有益的。在你放弃CSS而求助于添加更多的HTML或者用一些JavaScript把一切搞得一团糟之前，看看你可以使用的CSS选择器和属性。有机会有一个你可以用来满足你的需求。</p>
<h2> </h2>
<p>你的前端是否占用了用户的CPU？</p>
<p>随着web前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端CPU使用、内存使用等感兴趣，</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>.</h2><p>LogRocket 就像是网络和移动应用的DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>现代化您调试web和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">LogRocket</a> is like a DVR for web and mobile apps, recording everything that happens in your web app or site. Instead of guessing why problems happen, you can aggregate and report on key frontend performance metrics, replay user sessions along with application state, log network requests, and automatically surface all errors.</p><p>Modernize how you debug web and mobile apps — <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>