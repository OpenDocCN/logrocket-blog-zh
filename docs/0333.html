<html>
<head>
<title>What’s new in styled-components 5.0 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>风格化组件5.0的新特性</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/new-in-styled-components-5-0/#0001-01-01">https://blog.logrocket.com/new-in-styled-components-5-0/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>样式组件</h2>
<p><a href="http://styled-components.com/" target="_blank" rel="noopener noreferrer"> Styled components </a>是一个CSS-in-JS样式框架，它使用JavaScript中的标记模板文字和CSS的强大功能来提供一个平台，允许您编写实际的CSS来样式化react组件。本质上，样式化组件是用<a href="http://styled-components.com" target="_blank" rel="noopener noreferrer">样式化组件</a>库编写的易于制作的react组件，在这个库中，您可以用JavaScript代码中的普通CSS来样式化组件。在官方文档页面上，您会看到下面的示例:</p>
<pre>const Button = styled.a`
 /* This renders the buttons above… Edit me! */
 display: inline-block;
 border-radius: 3px;
 padding: 0.5rem 0;
 margin: 0.5rem 1rem;
 width: 11rem;
 background: transparent;
 color: white;
 border: 2px solid white;
/* The GitHub button is a primary button
 * edit this to target it specifically! */
 ${props =&gt; props.primary &amp;&amp; css`
 background: white;
 color: palevioletred;
 `}
`</pre>
<p>我们可以清楚地看到按钮是一个JavaScript变量，反勾号中定义的样式是普通的CSS样式。我们还看到了普通CSS样式的嵌套样式属性。这就是样式化组件在JavaScript中呈现CSS的方式。</p>
<p>最近，styled-components团队发布了一个他们命名为beast mode的新版本，它的服务器端渲染速度快了50%，客户端渲染速度快了20%，包大小小了19%，支持RTL，并且没有重大更改！</p>
<h2>React DevTools中的钩子支持</h2>
<p>这个新版本的styled-components在性能和内存效率方面有很大的变化。开发工具中的风格化组件现在非常干净，包含的代码也更少了。这是因为针对该版本进行了React hooks重构。下面是使用以前版本时React DevTools中样式化的<code>TagLine</code>组件的样子:</p>
<pre>&lt;TagLine&gt;
  &lt;StyledComponent forwardedRef={null}&gt;
    &lt;Context.Consumer&gt;
      &lt;Context.Consumer&gt;
        &lt;h2 className=”H2-sc-1izft7s-7”&gt;Hello world&lt;/h2&gt;
      &lt;/Context.Consumer&gt;
    &lt;/Context.Consumer&gt;
  &lt;/StyledComponent&gt;
&lt;/TagLine&gt;</pre>
<p>下面你可以看到使用这个新版本时，React DevTools中相同样式的组件看起来是什么样子:</p>
<pre>&lt;TagLine&gt;
  &lt;h2 className=”H2-sc-1izft7s-7”&gt;Hello world&lt;/h2&gt;
&lt;/TagLine&gt;</pre>
<p>现在组件嵌套明显减少，因此代码块也更加整洁。</p>
<h2>超级速度</h2>
<p>styled-components的团队一直致力于让性能更好，他们对这一决心的奉献总是产生惊人的结果。从两年前发布的<a href="https://medium.com/styled-components/announcing-v2-f01ef3766ac2" target="_blank" rel="noopener noreferrer">版本2开始，我们已经见证了各种版本在速度上的巨大进步。</a></p>
<p><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74znz85z1z122zz85zz77zqz73z9m1z80zbfz85zv3z89zbqz65zz74z0z72zbwc8">这些包括:</span></p>

<p>这个最新版本包括更小的包大小(16.2kB对13.63kB min+gzip)，更快的客户端挂载，更快的动态样式更新，以及更快的服务器端渲染。</p>
<p>有了这个新的更新，一直很快的styled-components现在是你能找到的最快的CSS-in-JS库之一。</p>

<p/>
<p/>
<p>安装深度组件树基准。越低越好。总体速度的新提升是由styled-component使用的新核心样式表引擎推动的，它在新版本中进行了重建，非常注重性能和正确性。它已经用很多工具进行了广泛的测试，但是团队仍然在寻找社区成员的反馈。如果你测试新版本有任何问题，你可以<a href="https://github.com/styled-components/styled-components/issues/new" target="_blank" rel="noopener noreferrer">联系这里</a>。</p>
<blockquote><p>如果你使用jest风格的组件，确保<a href="https://github.com/styled-components/jest-styled-components/releases/tag/v7.0.0-beta.0" target="_blank" rel="noopener noreferrer">也更新到测试版</a>！</p></blockquote>
<h2>StyleSheetManager的改进</h2>
<p>新版本对StyleSheetManager进行了新的改进。StyleSheetManager现在在版本5中能够用插件扩展stylis，CSS解析器。</p>
<p>这被证明对很多用例非常有用，对自定义样式的全自动RTL的支持是这个新版本中可能实现的事情之一。</p>
<h2>RTL支持</h2>
<p>在样式组件版本5中，您现在可以将您的样式从默认的从左到右对流转换为从右到左的方法。</p>
<p>您可以将您的样式从默认的从右向左转换，如下所示:</p>
<pre>import { StyleSheetManager } from 'styled-components';
import stylisRTLPlugin from 'stylis-rtl';
&lt;StyleSheetManager stylisPlugins={[stylisRTLPlugin]}&gt;
  &lt;App /&gt;
&lt;/StyleSheetManager&gt;</pre>
<p>在改进的样式表管理器的巨大帮助下，您会看到仅这个代码块就可以实现转换。</p>
<p>这打开了许多可能性和大量的插件，使得样式化的组件使用起来更加令人兴奋。</p>
<h2>入门指南</h2>
<p>要升级到最新版本，只需在您的终端中运行以下命令。</p>
<pre>npm install <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="8af9fef3e6efeea7e9e5e7fae5e4efe4fef9cae8effeeb">[email protected]</a></pre>
<p>要做到这一点，您必须确保您使用的是React和React DOM的最新版本16.8，因为它们支持钩子。</p>
<h2>样式组件项目</h2>
<p>Styled-components是一个非常受欢迎的库。它现在可以被称为一个行业标准的CSS-in-JS库，并不断更新，显示了核心团队对项目进展的强烈奉献精神。</p>
<p>styled-components的团队希望通过参加会议、组织峰会等等来扩展这个项目。大多数核心团队成员来自世界各地，需要支持来继续维护这个令人敬畏的项目。如果你、你的团队或者你的公司使用样式化组件，考虑为样式化组件<a href="https://opencollective.com/styled-components" target="_blank" rel="noopener noreferrer"> OpenCollective </a>做贡献，使他们的工作更容易，扩展更快。</p>
<h2>结论</h2>
<p>您已经看到了新样式组件版本5中的新特性。Styled-components作为CSS-in-JS框架的业界最爱，最近获得了很高的采用率，你最喜欢的新特性是什么？</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>你的前端是否占用了用户的CPU？</h2><p>随着web前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端CPU使用情况、内存使用情况等感兴趣，</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>.</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用的DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><p>现代化您调试web和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>