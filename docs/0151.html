<html>
<head>
<title>How to animate SVG with CSS: Tutorial with examples - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何用CSS制作SVG动画:示例教程</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-animate-svg-css-tutorial-examples/#0001-01-01">https://blog.logrocket.com/how-to-animate-svg-css-tutorial-examples/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按</strong>:本文最后更新于2022年7月12日，以包括额外的例子。</em></p>
<p>网页动画是一种乐趣，它通过提供视觉反馈、引导用户完成任务以及使网站整体变得生动活泼来改善用户体验。有几种方法可以创建网页动画，包括使用JavaScript库、gif、嵌入式视频和CSS。</p>
<p>与庞大的gif和视频相比，使用SVG和CSS添加到网站的动画具有更快的加载时间。您还可以制作简单的动画，而不必向网站的页面加载添加另一个JavaScript库。</p>
<p>在这篇文章中，我们将学习如何使用SVG和CSS创建轻量级、可伸缩的动画。尽管我们将在演示中使用Sass，CSS也可以。我们开始吧！</p>
<p><span class="embed-youtube"> <iframe loading="lazy" class="youtube-player" src="https://www.youtube.com/embed/eZT-OrhxiMY?version=3&amp;rel=1&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;fs=1&amp;hl=en-US&amp;autohide=2&amp;wmode=transparent" allowfullscreen="true" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation">视频</iframe> </span></p>

<h2 id="common-use-cases-animating-svg-css">用CSS制作SVG动画的常见用例</h2>
<p>在开始编写代码之前，让我们回顾一下使用动画SVG的一些实用方法。</p>
<h3 id="icons">核标准情报中心</h3>
<p>动画SVG非常适合表示微交互和状态变化的图标。它们在引导用户进行下一步操作时也很有帮助，比如在入职培训中。常见的用例包括加载、上传、菜单切换以及播放和暂停视频。</p>
<h3 id="illustrations">插图</h3>
<p>插图是另一个常见的用例。它们可以作为空白状态包含在产品中，演示如何在仪表板上生成数据。其他流行的用例包括动画表情符号和贴纸。还有动画插画，有助于点亮登录页面。</p>
<h2 id="how-prepare-svgs-animation">如何为动画准备SVG</h2>
<p>因为从简化的SVG代码开始更容易，所以制作SVG动画的第一部分就是准备它们。您可以按照以下步骤来完成:</p>
<h3 id="optimize-svg-code">优化SVG代码</h3>
<p>当创建一个SVG时，它通常会有一些额外的、不必要的代码，所以优化它是很重要的。您可以使用类似于<a href="https://jakearchibald.github.io/svgomg/"> SVGOMG </a>的工具来减小文件大小并删除任何不必要的标签和元数据。</p>
<h3 id="create-intentional-groupings">创建有意的分组</h3>
<p>如果需要，您可以通过在代码编辑器中打开SVG并记下用于对SVG元素进行分组的<code>&lt;g&gt;</code>元素来创建有意的分组。如果你想将一组元素制作成动画，将它们包装在<code>&lt;g&gt;&lt;/g&gt;</code>中，并用类或ID命名。</p>
<p>如果我们想以同样的方式设计多个路径，我们也可以考虑将ID名转换成类名。</p>
<h3 id="beware-stacking-order">注意堆叠顺序</h3>
<p>这似乎与直觉相反，但是最后列出的形状将被粘贴到前面提到的形状上。如果我们希望一个形状出现在背景中，我们必须确保它列在SVG代码的顶部。SVG形状是按照从上到下的顺序绘制的。</p>
<h3 id="set-svg-styling-preferred-state">将SVG样式设置为首选的初始状态</h3>
<p>SVG有类似于CSS样式的<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/Presentation">表示属性</a>，但是直接在SVG上设置。一个常见的例子是<code>fill</code>颜色。由于这些样式是在SVG上设置的，您可能会认为它们对浏览器有很大的影响。事实证明，我们在外部设置的任何CSS或Sass都会自然地覆盖SVG样式，而不需要使用<code>!important</code>声明。</p>
<p>但是，请注意SVG上的设置，以便为页面加载期间显示的内容做好准备。例如，在应用CSS样式之前，一个缓慢加载的页面会显示SVG的动画。我建议你在宽度和高度上离开，以避免这一点；Sara Soueidan在关于这个主题的博客文章中很好地解释了无样式SVG的闪现。</p>
<h2 id="applying-css-svgs">将CSS应用于SVG</h2>
<p>现在我们已经整理好了SVG，让我们探索一些添加CSS的选项。</p>
<p>在将CSS应用于SVG时，有一些注意事项。一个限制是我们不能使用外部样式表对外部链接的SVG应用样式。</p>
<p>在HTML中内嵌SVG代码使得SVG元素及其内容成为文档DOM树的一部分，因此它们受到文档CSS的影响。这种方法是我最喜欢的，因为它将样式与标记分开。</p>
<p>在回顾下面的其他选项时，我们会发现它们都是交织在一起的。如果您使用Rails，有一些gem可以自动将SVG嵌入到视图中。因此，在您的代码中，您可以简单地引用外部SVG，然后它会在编译时被嵌入。这种方法的另一个好处是内联SVG意味着少了一个HTTP请求，从而提高了性能:</p>
<p>我们可以在<code>&lt;style&gt;</code>标签中添加CSS样式，嵌套在<code>&lt;svg&gt;</code>标签中:</p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="axaeWO" data-user="lukelogrocket">参见<a href="https://codepen.io"> CodePen </a>上卢克·图比尼斯(<a href="https://codepen.io/lukelogrocket">@卢克·格罗基特</a> ) <br/>的Pen<a href="https://codepen.io/lukelogrocket/pen/axaeWO"><br/>SVG–2</a>。</p>
<p/>
<p>如果您想保留SVG中引用的样式，但实际上并不包含在SVG中，那么您可以使用<code>&lt;?xml-stylesheet&gt;</code>标记链接到SVG中的外部样式表:</p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="qwMejZ" data-user="lukelogrocket">参见<a href="https://codepen.io"> CodePen </a>上卢克·图比尼斯(<a href="https://codepen.io/lukelogrocket">@卢克·格罗基特</a> ) <br/>的Pen<a href="https://codepen.io/lukelogrocket/pen/qwMejZ"><br/>SVG–3</a>。</p>
<p/>
<p>css也可以使用内联样式属性在lemon上设置</p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="EJeqva" data-user="lukelogrocket">参见<a href="https://codepen.io"> CodePen </a>上卢克·图比尼斯(<a href="https://codepen.io/lukelogrocket">@卢克·格罗基特</a> ) <br/>的Pen<a href="https://codepen.io/lukelogrocket/pen/EJeqva"><br/>SVG–4</a>。</p>
<p>用CSS可以制作什么动画？</p>
<h2 id="animate-with-css">你可以用CSS制作很多动画。首先，您可以使用CSS动画或CSS过渡来制作CSS属性的动画，其值可以随时间变化<a href="https://blog.logrocket.com/css-transitions-animating-hamburger-menu-button/">。要获得这些属性的完整列表，请查看MDN Web文档中的</a><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties">动画CSS属性列表</a>。为了激发灵感，让我们回顾几个演示。</h2>
<p>我们将讨论两种主要类型的动画，它们的区别在于它们提供的控制量。</p>
<p>旋转装载机</p>
<h3 id="rotating-loader">我们将创建的第一个SVG动画是一个旋转加载器，就像我们通常在应用程序的加载屏幕上看到的那样。我们首先设置SVG，它是一个带有深色象限的环。</h3>
<p>我们给SVG一个ID<code>loading-spinner</code>，然后定义动画和过渡。动画引用了<code>@keyframes</code>的名字，其中<code>transform: rotate</code>被设置为从<code>0</code>度到<code>360</code>度，一个完整的旋转。这就是让这个旋转器活起来所需要的一切！</p>
<p>厚颜无耻</p>
<pre>#loading
  animation: loading-spinner 1s linear infinite

@keyframes loading-spinner
  from
    transform: rotate(0deg)
  to
    transform: rotate(360deg)
</pre>
<h3 id="sass">想要更光滑的东西？SVG支持渐变，因此您可以使用相同的Sass实现更平滑的效果，但是SVG对环应用了渐变，请参见下面的定义<code>#spinner-gradient-a</code>:</h3>
<p>参见<a href="https://codepen.io"> CodePen </a>上Hope Armstrong(<a href="https://codepen.io/hopearmstrong">@ Hope Armstrong</a>)<br/>用CSS / Sass 制作的带渐变的旋转加载SVG图标的笔。</p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="yrymwg" data-user="hopearmstrong">See the Pen <a href="https://codepen.io/hopearmstrong/pen/yrymwg"><br/>
Rotating Loading SVG Icon with Gradient Animated with CSS / Sass</a> by Hope Armstrong (<a href="https://codepen.io/hopearmstrong">@hopearmstrong</a>)<br/>
on <a href="https://codepen.io">CodePen</a>.</p>
<p>现在，让我们用<code>transform: scale</code>来创建这个变形栏加载图标。</p>
<p>请看<a href="https://codepen.io"> CodePen </a>上霍普阿姆斯特朗(<a href="https://codepen.io/hopearmstrong">@霍普阿姆斯特朗</a> ) <br/>用CSS / Sass 制作的Pen <a href="https://codepen.io/hopearmstrong/pen/VNYoNq"> <br/> SVG加载栏动画。</a></p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="VNYoNq" data-user="hopearmstrong">See the Pen <a href="https://codepen.io/hopearmstrong/pen/VNYoNq"><br/>
SVG Loading Bars Animated with CSS / Sass</a> by Hope Armstrong (<a href="https://codepen.io/hopearmstrong">@hopearmstrong</a>)<br/>
on <a href="https://codepen.io">CodePen</a>.</p>
<p>SVG由三个大小相等、间隔均匀的矩形组成。对于SVG和所有三个<code>&lt;rect&gt;</code>元素，已经为每个元素添加了id，因此它们可以很容易地被Sass定位。</p>
<p>超文本标记语言</p>
<h3 id="html">Sass将动画应用于每个条形。关键帧告诉小节在时间线中的四个位置沿Y轴改变缩放:开始时、四分之一处、中间以及四分之三处。</h3>
<p>动画中的第一个数字表示动画长度，而第二个数字设置延迟。因为我想让这些条形在不同的时间改变大小，所以我为每个条形添加了不同的延迟:</p>
<p>注意<code>transform-origin: center</code>告诉变换从条的中心开始缩放；否则，它将自上而下扩展，看起来就像钢筋钻入了地下。测试一下，你就会明白我的意思。</p>
<pre>#loading-bar
  &amp;-left
    animation: loading-bar-morph 1s linear .1s infinite
    transform-origin: center
  &amp;-middle
    animation: loading-bar-morph 1s linear .2s infinite
    transform-origin: center
  &amp;-right
    animation: loading-bar-morph 1s linear .4s infinite
    transform-origin: center

@keyframes loading-bar-morph 
  0%
    transform: scaleY(1)
  25%
    transform: scaleY(0.3)
  50%
    transform: scaleY(0.7)
  75%
    transform: scaleY(0.15)
</pre>
<p>默认情况下，SVG位于左上角的<code>(0, 0)</code>点。如果您习惯于使用HTML元素，这是一个关键的区别，HTML元素的默认转换起点总是在<code>(50%, 50%)</code>。</p>
<p>线条画动画</p>
<h3 id="line-drawing-animation">我们可以添加一个画线效果，让SVG看起来就像正在被绘制一样。因为它依赖于笔画，所以它需要一个带线条的SVG。我将向您介绍如何完成一行代码，然后您将知道如何完成其余部分。</h3>
<p>更多来自LogRocket的精彩文章:</p><div class="code-block code-block-54">
<hr/>
<h3>首先，用<code>stroke-dasharray</code>给线条加上虚线。该数字以像素为单位表示虚线的长度。你会希望它是线的长度:</h3>

<hr/></div>
<p>然后，添加<code>stroke-dashoffset</code>以沿线重新定位破折号。使其与线条本身一样长，这样看起来就像一条实线。动画的最终帧看起来是这样的:</p>
<pre>#line
  stroke-dasharray: 497
</pre>
<p>现在，它可以被制作成动画了。让我们添加激活<code>stroke-dashoffset</code>的关键帧，使其从没有可见笔画的完全偏移变为实心笔画的<code>0px</code>偏移。注意动画属性中的<code>forwards</code>。</p>
<pre>#line
  stroke-dasharray: 497
  stroke-dashoffset: 497
</pre>
<p>这是一个<code>animation-fill-mode</code>命令，告诉动画在播放后保持最终状态。没有它，动画将返回到它的第一帧，作为它的最终静止点:</p>
<p>动画插图</p>
<pre>#line
  stroke-dasharray: 497
  stroke-dashoffset: 497
  animation: draw 1400ms ease-in-out 4ms forwards

@keyframes draw
  from
    stroke-dashoffset: 1000
  to
    stroke-dashoffset: 0
</pre>
<h3 id="animated-illustration">让我们使用<a href="http://animista.net/"> Animista </a>的心跳动画来演示动画插图有脉冲效果。Animista是预制CSS动画效果的一个很好的资源，您可以重复使用和迭代。</h3>
<p>对于这颗跳动的心脏，悬停时会触发一些动画。心脏有110%的比例变化，眼睛变小，嘴变大，脸红，心脏跳动:</p>
<p> </p>
<pre>#smiley-love
  #smiley
    &amp;-blush
      display: none
  a
    display: inline-block
    &amp;:hover
      #smiley
        transform: scale(1.1)
        transform-origin: center
        -webkit-animation: heartbeat 1.5s ease-in-out infinite both
        animation: heartbeat 1.5s ease-in-out infinite both
        &amp;-blush
          display: inherit
        &amp;-eye-left
          transform-origin: center
          transform: scale(.7) translate(-8px)
        &amp;-eye-right
          transform-origin: center
          transform: scale(.7) translate(8px)
        &amp;-mouth
          transform: translateY(-22px) scale(1.6)
          transform-origin: center

/* ----------------------------------------------
 * animation heartbeat
 * Generated by Animista on 2019-3-24 18:51:13
 * w: http://animista.net, t: @cssanimista
 * ---------------------------------------------- */

@-webkit-keyframes heartbeat
  from
    -webkit-transform: scale(1)
            transform: scale(1)
    -webkit-transform-origin: center center
            transform-origin: center center
    -webkit-animation-timing-function: ease-out
            animation-timing-function: ease-out
  10%
    -webkit-transform: scale(0.91)
            transform: scale(0.91)
    -webkit-animation-timing-function: ease-in
            animation-timing-function: ease-in
  17%
    -webkit-transform: scale(0.98)
            transform: scale(0.98)
    -webkit-animation-timing-function: ease-out
            animation-timing-function: ease-out
  33%
    -webkit-transform: scale(0.87)
            transform: scale(0.87)
    -webkit-animation-timing-function: ease-in
            animation-timing-function: ease-in
  45%
    -webkit-transform: scale(1)
            transform: scale(1)
    -webkit-animation-timing-function: ease-out
            animation-timing-function: ease-out
@keyframes heartbeat
  from
    -webkit-transform: scale(1)
            transform: scale(1)
    -webkit-transform-origin: center center
            transform-origin: center center
    -webkit-animation-timing-function: ease-out
            animation-timing-function: ease-out
  10%
    -webkit-transform: scale(0.91)
            transform: scale(0.91)
    -webkit-animation-timing-function: ease-in
            animation-timing-function: ease-in
  17%
    -webkit-transform: scale(0.98)
            transform: scale(0.98)
    -webkit-animation-timing-function: ease-out
            animation-timing-function: ease-out
  33%
    -webkit-transform: scale(0.87)
            transform: scale(0.87)
    -webkit-animation-timing-function: ease-in
            animation-timing-function: ease-in
  45%
    -webkit-transform: scale(1)
            transform: scale(1)
    -webkit-animation-timing-function: ease-out
            animation-timing-function: ease-out
</pre>
<p>我们再做一个。在这个例子中，我使用<code>transform: translate</code>改变了冰棒图像上的水滴的位置，从而制作了它们的动画。为了让它们消失，我制作了<code>opacity</code>的动画。现在，它看起来像是一个炎热的夏天！</p>
<p>参见<a href="https://codepen.io"> CodePen </a>上霍普阿姆斯特朗(<a href="https://codepen.io/hopearmstrong">@霍普阿姆斯特朗</a> ) <br/>用CSS / Sass 制作的钢笔<a href="https://codepen.io/hopearmstrong/pen/qwdBwR"> <br/>融化冰棍SVG动画。</a></p>
<p class="codepen" data-height="300" data-default-tab="css,result" data-slug-hash="qwdBwR" data-user="hopearmstrong">See the Pen <a href="https://codepen.io/hopearmstrong/pen/qwdBwR"><br/>
Melting Popsicle SVG Animated with CSS / Sass</a> by Hope Armstrong (<a href="https://codepen.io/hopearmstrong">@hopearmstrong</a>)<br/>
on <a href="https://codepen.io">CodePen</a>.</p>
<p>让我们使用SVGs创建一个汉堡菜单；当用户悬停在菜单上时，动画将被触发:</p>

<p>请看<a href="https://codepen.io"> CodePen </a>上Emadamerho Nefe(<a href="https://codepen.io/nefejames">@ Nefe James</a>)<br/>的笔<a href="https://codepen.io/nefejames/pen/qBojWvj"> <br/>动画SVG汉堡菜单</a>。</p>
<p class="codepen" data-height="300" data-default-tab="css,result" data-slug-hash="qBojWvj" data-user="nefejames">See the Pen <a href="https://codepen.io/nefejames/pen/qBojWvj"><br/>
Animated SVG Hamburger Menu</a> by Emadamerho Nefe (<a href="https://codepen.io/nefejames">@nefejames</a>)<br/>
on <a href="https://codepen.io">CodePen</a>.</p>
<p>我们来分解一下上面的代码。首先，我们用<code>rect</code>元素建立了一个汉堡包SVG，并画了三个矩形。我们分别给了三个<code>rect</code>元素类<code>top</code>、<code>middle</code>、<code>bottom</code>。</p>
<p>动画的核心发生在悬停上。当用户悬停时，我们改变矩形的位置，并将<code>top</code>和<code>bottom</code>矩形分别旋转45%和-45%。我们还将<code>middle</code>矩形的不透明度设置为<code>0</code>。</p>
<p>淡入和淡出文本</p>
<h3 id="fade-in-fade-out">另一个很酷的动画是淡入淡出文本动画:</h3>
<p>请看<a href="https://codepen.io"> CodePen </a>上Emadamerho Nefe(<a href="https://codepen.io/nefejames">@ Nefe James</a>)<br/>的钢笔<a href="https://codepen.io/nefejames/pen/VwXWwPB"> <br/>淡入SVG文本</a>。</p>
<p class="codepen" data-height="300" data-default-tab="css,result" data-slug-hash="VwXWwPB" data-user="nefejames">See the Pen <a href="https://codepen.io/nefejames/pen/VwXWwPB"><br/>
Fade-in SVG Text</a> by Emadamerho Nefe (<a href="https://codepen.io/nefejames">@nefejames</a>)<br/>
on <a href="https://codepen.io">CodePen</a>.</p>
<p>这里，我们使用<code>text</code>元素建立了一个基于文本的SVG，定义了一个将在<code>0</code>和<code>1</code>之间切换文本不透明度的<code>fadeIn</code>动画，并将<code>fadeIn</code>动画应用于SVG。</p>
<p>Wavy SVG text</p>
<h3 id="wavy-svg-text">最后一个演示是一个波浪文本动画，其中世界上的每个字母都将上下起伏，看起来像波浪的运动。我们也可以称这个动画为有弹性的文本动画。</h3>
<p>请看<a href="https://codepen.io"> CodePen </a>上Emadamerho Nefe(<a href="https://codepen.io/nefejames">@ Nefe James</a>)<br/>的笔<a href="https://codepen.io/nefejames/pen/poLwBoR"> <br/>波浪SVG文字动画</a>。</p>
<p class="codepen" data-height="300" data-default-tab="css,result" data-slug-hash="poLwBoR" data-user="nefejames">See the Pen <a href="https://codepen.io/nefejames/pen/poLwBoR"><br/>
Wavy SVG Text Animation</a> by Emadamerho Nefe (<a href="https://codepen.io/nefejames">@nefejames</a>)<br/>
on <a href="https://codepen.io">CodePen</a>.</p>
<p>对于SVG，我们使用<code>text</code>元素来定义单词wavy的每个字母。我们用<code>translateY</code>将字母按下<code>3px</code>。稍后，我们将使它作为波动的一部分弹出。为了完成这个效果，我们定义了一个名为<code>wavyText</code>的动画，我们延迟了每个字母的动画，使它们一个接一个地弹出。</p>
<p>虽然我们可以用CSS制作SVG动画，但我们也可以使用其他工具来处理和创建动画。SVG动画可能有点复杂，但是下面的工具让我们制作SVG动画变得非常简单。</p>

<p>结论</p>

<h2 id="conclusion">现在你已经知道了用CSS制作SVG动画的几种不同方法，我希望你能从中受到启发，为web创建自己的动画！只用几行CSS就把静态SVG变得生动有趣。</h2>
<p>一旦你掌握了一些技巧，处理更复杂的动画就更容易了。网上和像<a href="https://codepen.io/"> CodePen </a>这样的网站上有无穷无尽的灵感。快乐动画！</p>
<p>你的前端是否占用了用户的CPU？</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>随着web前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端CPU使用、内存使用等感兴趣，</h2><p>.</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>LogRocket 就像是网络和移动应用的DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>现代化您调试web和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p><p>Modernize how you debug web and mobile apps — <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a>.</p></div>
</div>

 <p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>