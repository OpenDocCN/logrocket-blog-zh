<html>
<head>
<title>5 things you can do with CSS instead of JavaScript - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用CSS代替JavaScript可以做的5件事</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/5-things-you-can-do-with-css-instead-of-javascript/#0001-01-01">https://blog.logrocket.com/5-things-you-can-do-with-css-instead-of-javascript/#0001-01-01</a></blockquote><div><article class="article-post">
<p>我不是第一个声明CSS和JavaScript之间的界限随着两种语言的发展而变得模糊的人。</p>
<p>从自定义属性(也称为变量)到过滤器、动画或数学运算，CSS已经采用了许多我们过去在JavaScript(或流行的CSS预处理程序)中所做的事情，并使其对我们可用。</p>
<p>两种语言有不同的用途。随着每一个浏览器版本、功能版本和属性的增加，CSS正在成为一种非常强大的语言，能够处理我们以前依赖于JavaScript的功能。</p>
<p>在本帖中，我们将了解一些你可能没有听说过的CSS金块，它们将自然地(并且优雅地！)处理类似于<strong>平滑滚动</strong>、<strong>黑暗模式</strong>、<strong>表单验证</strong>的事情，以及更多以前需要多行JS技巧才能工作的特性。</p>
<h2>平滑滚动</h2>
<p>曾经有一段时间，我们不得不依靠JavaScript(甚至jQuery)实现来做到这一点，用<code>window.scrollY</code>来复制这一行为。多亏了<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior" target="_blank" rel="noopener noreferrer">滚动行为</a>属性，那些日子已经一去不复返了。我们现在可以用一行CSS代码处理网站上的平滑滚动了！</p>
<pre>html {
  scroll-behavior: smooth;
}</pre>
<p>浏览器支持<a href="https://caniuse.com/#feat=css-scroll-behavior" target="_blank" rel="noopener noreferrer">在75% </a>左右，快到了Edge 76。在下面的代码栏中查看它是如何工作的:</p>
<p class="codepen" data-height="265" data-theme-id="0" data-default-tab="css,result" data-user="imjuangarcia" data-slug-hash="RwbQLPe" data-pen-title="CSS-Only Smooth Scrolling">参见<a href="https://codepen.io"> CodePen </a>上的Pen <a href="https://codepen.io/imjuangarcia/pen/RwbQLPe"> <br/>仅CSS平滑滚动</a>作者胡安·马丁·加西亚(<a href="https://codepen.io/imjuangarcia"> @imjuangarcia </a> ) <br/>。</p>
<p>黑暗模式</p>
<h2>在<a href="https://developer.apple.com/design/human-interface-guidelines/macos/visual-design/dark-mode/" target="_blank" rel="noopener noreferrer"> macOS发布其黑暗模式功能</a>和Safari实现<code>prefers-color-scheme</code>媒体功能后，黑暗模式最近成为热门趋势，这允许我们检测用户是否默认启用了黑暗模式。</h2>
<p>您可能会认为黑暗模式是一个要实现的复杂特性，涉及CSS变量、每个方案的不同颜色，以及一些JavaScript来连接必要的点击事件，以针对网站上的变化。虽然这部分是对的，而且这是目前实现它的标准方式(这是T2在我的网站上的做法)，但没必要这么复杂。</p>
<p>魏高<a href="https://dev.wgao19.cc/sun-moon-blending-mode/" target="_blank" rel="noopener noreferrer">在她的博客</a>上向我们展示了一个聪明的方法，用CSS支持的混合模式之一<code>mix-blend-mode: difference</code>来达到类似的效果(更像是<code>reversed mode</code>)。如果你曾经玩过<a href="https://helpx.adobe.com/photoshop/using/blending-modes.html" target="_blank" rel="noopener noreferrer"> Photoshop混合模式</a>，这是同样的事情，但直接在浏览器上。</p>
<p>它的一些优点包括不必指定反转的颜色(混合模式会为您做到这一点)，并且您可以隔离不想更改的元素。它的一些限制是，你没有一个完整的颜色范围，性能可能是一个问题。</p>
<p>目前，<a href="https://caniuse.com/#search=mix-blend-mode" target="_blank" rel="noopener noreferrer">对原生浏览器的支持为77%加上13%的前缀</a>(全球91%)，Edge支持将于76版推出。</p>
<p>要更深入地了解这种混合模式是如何工作的，请务必查看魏的精彩文章。如果你想做一个有趣的实验，可以看看这个代码笔:</p>
<p>参见<a href="https://codepen.io"> CodePen </a>上胡安·马丁·加西亚(<a href="https://codepen.io/imjuangarcia"> @imjuangarcia </a> ) <br/>的《笔<a href="https://codepen.io/imjuangarcia/pen/xxKLMEN">【黑暗模式与混合模式:差异</a>》。</p>
<p class="codepen" data-height="265" data-theme-id="0" data-default-tab="css,result" data-user="imjuangarcia" data-slug-hash="xxKLMEN" data-pen-title="Dark Mode with mix-blend-mode: difference">截断文本</p>
<p>这是我个人的最爱之一，因为这是我在开发依赖CMS来填充内容的网站时遇到的一个常见问题。文案上的可变长度可能会使你可爱设计的卡片在不同尺寸或分辨率下看起来不一致。戴夫·鲁伯特有一篇关于这个问题的很棒的文章。</p>
<h2>在过去，我总是不假思索地寻求基于JavaScript的解决方案，因为<a href="https://css-tricks.com/line-clampin/" target="_blank" rel="noopener noreferrer">实现这一结果的大多数CSS技术都相当“黑客”</a>。但是当我在<a href="https://www.juangarcia.design" target="_blank" rel="noopener noreferrer">我的网站</a>中加入一个博客时，我发现了几个CSS属性，它们结合在一起，也许能够提供一个本地的、易于实现的解决方案。遇见<code>text-overflow</code>和<code>line-clamp</code>！</h2>
<p>你可以在这里查看代码笔:</p>
<p>参见<a href="https://codepen.io"> CodePen </a>上的Pen <a href="https://codepen.io/imjuangarcia/pen/dybdYbB"> <br/> CSS专用文本截断</a>作者胡安·马丁·加西亚(<a href="https://codepen.io/imjuangarcia"> @imjuangarcia </a> ) <br/>。</p>
<p>文本溢出</p>
<p class="codepen" data-height="465" data-theme-id="0" data-default-tab="html,result" data-user="imjuangarcia" data-slug-hash="dybdYbB" data-pen-title="CSS-Only Text Truncation">这是一个被广泛采用的，<a href="https://caniuse.com/#search=text-overflow" target="_blank" rel="noopener noreferrer">完全支持的</a>纯CSS解决方案，用于控制当文本溢出其包含元素时的行为。你可以将它的值设置为<code>ellipsis</code>，这样就可以得到Unicode字符<code>…</code>。到目前为止还不错，但是它的主要限制是，不管文本有多长，你总是会得到一行被截断的文本。因此，这可能是一个完美的适合标题，但不是那么有用的摘录，评论或长篇大论的文本。请参见下面的示例:</p>
<p>这就是<code>line-clamp</code>发挥作用的地方。</p>
<h2>线夹</h2>
<p><code>line-clamp</code>属性也不是新的。<a href="https://twitter.com/desandro" target="_blank" rel="noopener noreferrer">戴夫·德桑德罗</a>大约十年前向我们展示了这项技术<a href="https://dropshado.ws/post/1015351370/webkit-line-clamp" target="_blank" rel="noopener noreferrer">(因此需要旧的flexbox实现<code>display: -webkit-box</code>和<code>-webkit-box-orient: vertical</code>)。</a></p>
<p>那这里有什么新鲜事？火狐<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=WebKit-line-clamp" target="_blank" rel="noopener noreferrer">在68版</a>上实现了它，等等……前缀为<code>-webkit</code>！现在Edge是基于Chromium的，我们也可以使用<code>-webkit</code>前缀将<a href="https://caniuse.com/#search=line-clamp" target="_blank" rel="noopener noreferrer">浏览器支持提高到92% </a>。</p>
<h2>这意味着我们现在可以使用三个CSS行的组合来截断多行文本，<a href="https://codepen.io/imjuangarcia/pen/dybdYbB" target="_blank" rel="noopener noreferrer">就像这样</a>。这里唯一的问题是线夹的规范是<a href="https://drafts.csswg.org/css-overflow-3/#propdef--webkit-line-clamp" target="_blank" rel="noopener noreferrer"> CSS溢出模块第3级</a>的一部分，目前正在编辑的草稿中，这可能意味着规范可能会有一些变化。另一件要考虑的事情是，你不能控制要显示的字符数，这可能会导致一些<a href="https://twitter.com/search?f=tweets&amp;vertical=default&amp;q=karenmcgrane%20truncation%20is%20not&amp;src=typd" target="_blank" rel="noopener noreferrer">不那么方便(但有趣)的截断场景。</a>但除此之外，CSS夹紧快乐！</h2>
<p>滚动捕捉</p>
<p>CSS滚动捕捉是Chrome用户已经有一段时间的另一个方便的功能，我们现在可以在Firefox最新的68版本中享受它。我们也将在76版的Edge上安装它，提升对所有主流浏览器的支持。</p>
<p>你有没有注意到一些花哨的网站会创建全屏部分，并在你滚动时锁定特定位置的视窗？这是这种行为的一个例子。</p>
<h2>前一阵子让它正常工作是很棘手的，涉及到大量的数学计算和JavaScript。但是现在，CSS能够在本地创建类似于<a href="https://codepen.io/imjuangarcia/pen/zYORdMK" target="_blank" rel="noopener noreferrer">这个</a>的交互。</h2>
<p>它的工作方式类似于Flexbox或CSS Grid，因为您需要一个容器元素，在其上设置<code>scroll-snap-type</code>和多个设置了<code>scroll-snap-align</code>的子元素，如下所示:</p>
<p>HTML:</p>
<p>CSS:</p>
<p><code>scroll-snap-type</code>接受两个不同的值:<code>mandatory</code>，它将强制对齐到元素的顶部或底部，或者<code>proximity</code>，它将为您计算并在内容足够接近对齐点时进行对齐。</p>
<p>我们可以在父容器上设置的另一个属性是<code>scroll-padding</code>，如果您在布局上有固定的元素(比如固定的标题，或者，为什么不呢，一个cookie策略通知),这可能会很方便😅)可能会隐藏一些内容。</p>
<pre>&lt;main class=”parent”&gt;
  &lt;section class=”child”&gt;&lt;/section&gt;
  &lt;section class=”child”&gt;&lt;/section&gt;
  &lt;section class=”child”&gt;&lt;/section&gt;
&lt;/main&gt;</pre>
<p>对于孩子来说，我们现在只有<code>scroll-snap-align</code>，它将告诉容器捕捉到哪个点(顶部、中心或底部)。</p>
<pre>.parent {
  scroll-snap-type: x mandatory;
}

.child {
  scroll-snap-align: start;
}</pre>
<p>虽然现在你知道这种技术只需要几行CSS代码就可以达到这种效果，而且不涉及数学，所以你可能会觉得在你的整个网站上随意添加滚动捕捉很有诱惑力，但请记住网页设计的唯一法则，根据罗宾·伦德尔的说法:<strong>不要弄乱滚动</strong>。这种技术可能对滑块、图片库或页面上的某些特定部分有用，但要谨慎使用，因为它会影响性能和用户的整体体验。</p>
<p>你可以在这里查看代码笔:</p>
<p>在<a href="https://codepen.io"> CodePen </a>上查看Juan martín garcía(<a href="https://codepen.io/imjuangarcia">@ imjuan Garcia</a>)<br/>创作的带有滚动捕捉的仅CSS水平全屏图库。</p>
<p>粘性导航</p>
<p>对于以前需要大量JavaScript数学运算并且实现起来非常昂贵的特性，我们采用了粘性定位。我们以前需要<code>offsetTop</code>和<code>window.scrollY</code>的地方，现在有了<code>position: sticky</code>来为我们完成所有的魔法！具有粘性定位的元素将表现为相对定位的元素，直到到达视口中的给定点，然后变成固定定位的元素。<a href="https://caniuse.com/#feat=css-sticky" target="_blank" rel="noopener noreferrer">带<code>-webkit</code>前缀</a>的浏览器支持度高达92%。</p>
<p class="codepen" data-height="411" data-theme-id="0" data-default-tab="css,result" data-user="imjuangarcia" data-slug-hash="zYORdMK" data-pen-title="CSS-Only Horizontal Fullscreen Gallery with Scroll Snapping">因此，尽管这听起来像做以下事情一样简单:</p>
<p>要很好地将你的标题设置成粘性的，知道你的HTML的结构很重要。例如，如果你的HTML结构看起来像这样:</p>
<h2>标题将只能粘贴在其父标签(在本例中是<code>&lt;main&gt;</code>标签)覆盖的区域上。这个“粘性父项”决定了“粘性项”的作用范围。Elad谢赫特尔在<a href="https://medium.com/@elad/css-position-sticky-how-it-really-works-54cd01dc2d46" target="_blank" rel="noopener noreferrer">这篇文章</a>中更好地解释了这个问题，而<a href="https://codepen.io/imjuangarcia/pen/QWLQjqQ" target="_blank" rel="noopener noreferrer">这里有一个有趣的小实验</a>使用这个技术。</h2>
<p>你可以在这里查看代码笔:</p>
<p>参见<a href="https://codepen.io"> CodePen </a>上胡安·马丁·加西亚(<a href="https://codepen.io/imjuangarcia"> @imjuangarcia </a> ) <br/>的<a href="https://codepen.io/imjuangarcia/pen/QWLQjqQ">使用粘性定位</a>的Pen【CSS Race】。</p>
<pre>header {
  position: sticky;
  top: 0;
}</pre>
<p>To nicely set your header to be sticky, it’s important to know that the structure of your HTML matters! So for example, if your HTML structure looks like this:</p>
<pre>&lt;main&gt;
  &lt;header&gt;
    &lt;h1&gt;This is my sticky header!&lt;/h1&gt;
  &lt;/header&gt;
  &lt;section&gt;This is my content&lt;/section&gt;
&lt;/main&gt;</pre>
<p>不管是CSS还是JS，还是要监控的。使用<a href="https://logrocket.com/signup/"> LogRocket </a>来确保你的前端运行正常。</p>
<p>随着web前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产中所有用户的客户端CPU使用、内存使用等感兴趣，请尝试LogRocket 。<a class="signup" href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer"><img data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="46" data-permalink="https://blog.logrocket.com/vuex-showdown-mutations-vs-actions/1d0cd-1s_rmyo6nbrasp-xtvbaxfg/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-orig-size="730,412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="LogRocket dashboard free trial banner" data-image-description="&lt;p&gt;LogRocket is working on the perfect frontend bug report. Try it free today.&lt;/p&gt;&#10;" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg-e1565635879164.png" decoding="async" loading="lazy" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a></p>
<p class="codepen" data-height="443" data-theme-id="0" data-default-tab="css,result" data-user="imjuangarcia" data-slug-hash="QWLQjqQ" data-pen-title="CSS Race using Sticky Positioning">LogRocket 就像是网络应用的DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p>
<p>现代化您调试web应用的方式— <a class="signup" href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p>
<div class="blog-plug cro21">
<h2>总结奖励:@支持媒体规则</h2>
<p>即使这些CSS特性被广泛采用和支持，如上所述，你可能还是想在添加它们之前检查一下它们<a href="https://caniuse.com/" target="_blank" rel="noopener noreferrer">在浏览器</a>上是否可用。如果是这种情况，你可以使用<code>@supports</code>特性查询，这是被浏览器广泛采用的<a href="https://caniuse.com/#feat=css-featurequeries" target="_blank" rel="noopener noreferrer">，它允许你在应用一组样式之前测试浏览器是否支持特定的<code>property: value</code>对。语法如下所示:</a></p>
<p>使用这个方便的特性查询，您可以在支持它们的浏览器上应用一组样式。该语法听起来可能很熟悉，因为这正是我们编写媒体查询的方式，并且是一种很好的方式来进行所谓的<em>渐进增强，</em>现在在拥有这些顶级功能的浏览器上使用这些功能，同时防止在没有这些功能的浏览器上出现不一致的行为。Jen Simmons在她的<a href="https://youtu.be/T8uxmUQZsck" target="_blank" rel="noopener noreferrer">弹性CSS </a>视频中对此做了更好的解释。</p>
<p>原来如此！希望这些最先进的CSS特性能够帮助您发布一个更小的JavaScript包，同时仍然能够创建有趣和引人注目的ui。此外，也可以随意再次检查这些<a href="https://codepen.io/collection/DrGkMr" target="_blank" rel="noopener noreferrer">代码笔</a>。</p>
</div>
<h2> </h2>
<p>Even though these CSS features are widely adopted and supported, as discussed above, you might still want to check if they <a href="https://caniuse.com/" target="_blank" rel="noopener noreferrer">are available on the browser</a> before adding them. If that’s the case, you can use the <code>@supports</code> feature query, which is <a href="https://caniuse.com/#feat=css-featurequeries" target="_blank" rel="noopener noreferrer">widely adopted by browsers</a> and allows you to test if the browser supports a specific <code>property: value</code> pair before applying a set of styles. The syntax looks as follow:</p>
<pre>@supports (initial-letter: 4) {
  p::first-letter {
    initial-letter: 4;
  }
}</pre>
<p>With this handy feature query, you can apply a set of styles just on those browsers that support them. The syntax might sound familiar since it’s exactly how we write media queries and is a great way to do what’s called <em>progressive enhancement,</em> using these top-notch features right now on browsers that have them, while preventing inconsistent behavior on browsers that don’t have them. Jen Simmons explains this better on her <a href="https://youtu.be/T8uxmUQZsck" target="_blank" rel="noopener noreferrer">Resilient CSS</a> videos.</p>
<p>So that’s it! Hopefully, these state-of-the-art CSS features will help you ship a smaller JavaScript bundle, while still creating interesting and compelling UIs. Also, feel free to check out these <a href="https://codepen.io/collection/DrGkMr" target="_blank" rel="noopener noreferrer">Codepens</a> again as well.</p>
<p> </p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>