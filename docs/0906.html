<html>
<head>
<title>Static analysis in JavaScript: 11 tools to help you catch errors before users do - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>JavaScript中的静态分析:帮助你在用户之前发现错误的11种工具</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/static-analysis-in-javascript-11-tools-to-help-you-catch-errors-before-users-do/#0001-01-01">https://blog.logrocket.com/static-analysis-in-javascript-11-tools-to-help-you-catch-errors-before-users-do/#0001-01-01</a></blockquote><div><article class="article-post">
<p>你可能知道<a href="https://hackernoon.com/how-linting-and-eslint-improve-code-quality-fa83d2469efe" target="_blank" rel="noopener noreferrer">林挺可以提高你的代码质量</a>，但是林挺并不是静态分析可以确保你的团队持续编写高质量代码的唯一方法。静态分析工具可以在您的开发周期中发挥不可或缺的作用，即使是在动态类型的语言中，比如JavaScript。</p>
<p>在本指南中，我们将看看JavaScript生态系统中一些最著名的静态分析工具，并讨论为什么以及何时使用它们。</p>
<h2 id="introductiontostaticanalysis">静态分析简介</h2>
<p>首先，让我们回顾一下静态分析的定义及其在软件开发生命周期中的位置。</p>
<p>静态分析是在不实际运行代码的情况下验证代码是否满足某些预期的过程。与<a href="https://blog.logrocket.com/unit-and-integration-testing-for-node-js-apps/" target="_blank" rel="noopener noreferrer">单元和集成测试</a>不同，静态分析可以在原始源代码上执行，而不需要网络服务器或构建过程。</p>
<p>静态分析器通常解析您的代码，并将其转化为所谓的<a href="https://medium.com/@jotadeveloper/abstract-syntax-trees-on-javascript-534e33361fc7" target="_blank" rel="noopener noreferrer">抽象语法树</a>。然后遍历这个树，并根据静态分析器指定的规则检查各个部分。大多数静态分析器还包括一种让开发人员编写他们自己的定制规则的方法，但这因工具而异。</p>
<p>静态分析最常用于:</p>
<ul>
<li>确保一致的样式和格式</li>
<li>检查常见错误和可能的错误</li>
<li>限制代码的复杂性</li>
<li>验证类型一致性</li>
<li>最小化安全风险</li>
<li>保持第三方依赖关系最新</li>
</ul>
<h2 id="whendoesstaticanalysishappen">静态分析什么时候发生？</h2>
<p>在像JavaScript这样的动态解释语言中，开发人员必须决定何时以及如何对他们的代码运行静态分析。我经常看到静态分析在每个开发人员的机器上运行，然后他们推动变更(作为一个<a href="https://codeinthehole.com/tips/tips-for-using-a-git-pre-commit-hook/" target="_blank" rel="noopener noreferrer"> Git预提交钩子</a>)作为持续集成服务器工作流的一部分或者作为每个代码审查的一部分。</p>
<p><img data-attachment-id="19636" data-permalink="https://blog.logrocket.com/static-analysis-in-javascript-11-tools-to-help-you-catch-errors-before-users-do/static-analysis-software-development-lifecycle/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle.png" data-orig-size="647,773" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Static analysis software development lifecycle" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle-251x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle.png" decoding="async" class="aligncenter size-full wp-image-19636 jetpack-lazy-image" src="../Images/4f35a455de060beb4b2ab9c8304cb83c.png" alt="Static Analysis Software Development Lifecycle" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle.png 647w, https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle-251x300.png 251w" data-lazy-sizes="(max-width: 647px) 100vw, 647px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="19636" data-permalink="https://blog.logrocket.com/static-analysis-in-javascript-11-tools-to-help-you-catch-errors-before-users-do/static-analysis-software-development-lifecycle/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle.png" data-orig-size="647,773" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Static analysis software development lifecycle" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle-251x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-19636" src="../Images/4f35a455de060beb4b2ab9c8304cb83c.png" alt="Static Analysis Software Development Lifecycle" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle.png 647w, https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle-251x300.png 251w" sizes="(max-width: 647px) 100vw, 647px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/static-analysis-software-development-lifecycle.png"/></noscript>
<p>无论静态分析何时或如何发生，目标都是一样的:帮助代码更加一致、可维护和正确。它不会取代自动化或手动测试，但它可能会捕捉到其他质量保证工具遗漏的错误。</p>

<p>因为JavaScript是动态类型的，而且从客户端应用程序收集错误日志历来都很困难，<a href="https://inventitech.com/publications/2016_beller_bholanath_mcintosh_zaidman_analyzing_the_state_of_static_analysis_a_large-scale_evaluation_in_open_source_software.pdf" target="_blank" rel="noopener noreferrer">静态分析工具甚至比静态类型的服务器端语言更有用。</a></p>
<p>如果您是静态分析的新手，那么在众多可用的工具中进行筛选可能会让人不知所措。我将向您介绍JavaScript中一些最常用的静态分析工具。我们将探索它们的一些用例，以及如何在您的开发工作流中实现它们。</p>
<h3>1.埃斯林特</h3>
<p>ESLint 可能是当今使用最广泛的JavaScript静态分析工具。Prettier和Standard JS都使用ESLint来驱动它们的格式化引擎，所以即使你没有明确地包含它，你也可能在幕后使用它。</p>
<p>ESLint的主要用例是作为一个<a href="https://www.freecodecamp.org/news/what-is-linting-and-how-can-it-save-you-time/">linter</a>——一种特定的静态分析工具，可以捕捉不一致的格式、样式和可能的错误。ESLint通过使用<a href="https://eslint.org/docs/rules/" target="_blank" rel="noopener noreferrer">预先确定的规则</a>来做到这一点，您可以根据自己的需要配置或定制这些规则。</p>
<p>如何使用它的一个很好的例子是防止开发人员<a href="https://eslint.org/docs/rules/no-console" target="_blank" rel="noopener noreferrer">在产品</a>中意外使用<code>console</code>语句。如果您正在编写一个JavaScript函数来对数字进行排序，并且想要验证您是否做对了，那么您可以使用<code>console.log()</code>来进行自我检查。</p>
<pre>function sortNumbers(numbers) {
    console.log(numbers);
    const result = numbers.sort((a, b) =&gt; (a - b));
    console.log(result);

    return result;
}
sortNumbers([30, 12, 22, 19]);
</pre>
<p>如果启用了该规则，ESLint会在您将它发送给用户之前警告您这个可能的错误。</p>
<h3>2.较美丽</h3>
<p>使用ESLint可能会让人不知所措。有几十个规则，你可以在上面写自定义的。一些规则可能要求你改变你的应用程序的行为，所以如果你想从简单地使你的代码格式更加一致开始，<a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">更漂亮的</a>可能适合你。</p>
<p>更漂亮的是<a href="https://prettier.io/docs/en/comparison.html" target="_blank" rel="noopener noreferrer">不是全功能的棉绒</a>；它只涉及样式和格式规则。它通过限制选择和自动修复不符合其风格指南的代码来提供帮助。</p>
<p>例如，假设您编写了这样一个函数:</p>
<pre>function createUser() { return {
    id: 1, name: "Karl", birthdate: "6/10/86",
       hometown: "Lansing, MI" };
}
</pre>
<p>如果你更漂亮地运行它，它会重写函数以符合其一贯的风格。</p>
<pre>function createUser() {
  return {
    id: 1,
    name: "Karl",
    birthdate: "6/10/86",
    hometown: "Lansing, MI",
  };
}
</pre>
<p>虽然Prettier为您提供的自定义样式规则的选项较少，但它是确保开发团队中的每个人在代码中使用相同格式和样式的一个好方法。</p>
<h3>3.标准JS</h3>
<p>介于ESLint和Prettier之间的是<a href="https://standardjs.com/" target="_blank" rel="noopener noreferrer"> Standard </a>。和Prettier一样，Standard也很固执——你不需要决定实现和配置哪个ESLint规则——但它不仅仅是解决了风格问题。它还包括可以减少错误和改变代码行为的规则。</p>
<p>例如，标准包括ESLint规则，以使<a href="https://standardjs.com/rules.html#rules" target="_blank" rel="noopener noreferrer">总是使用<code>===</code>而不是<code>==</code> </a>。因为JavaScript强制类型，盲目遵循Standard的建议可能会以意想不到的方式改变代码的行为。</p>
<p>如果运行下面的代码，所有三个日志语句都将是<code>true</code>。</p>
<pre>function isTrue (x) {
  return x == true
}
console.log(isTrue('1'))   // true
console.log(isTrue(1))     // true
console.log(isTrue(true))  // true
</pre>
<p>但是如果你按照Standard的建议做<code>x === true</code>，结果就变了:</p>
<pre>function isTrue (x) {
  return x === true
}
console.log(isTrue('1'))   // false
console.log(isTrue(1))     // false
console.log(isTrue(true))  // true
</pre>
<p>虽然标准可能不容易在大型现有代码库上实现，但它仍然是林挺代码的优秀工具。消除编码风格上的小争议可以提高开发人员的生产力，加快入职时间。</p>
<h3>4.JSHint</h3>
<p>与ESLint类似，<a href="https://jshint.com/" target="_blank" rel="noopener noreferrer"> JSHint </a>是一个林挺工具，它使您能够设置和配置规则来捕捉常见的编码错误和格式不一致。总的来说，ESLint的规则比较多，<a href="https://medium.com/@sheldonled/from-jshint-to-eslint-8a0a135fa2bf" target="_blank" rel="noopener noreferrer">为</a>编写自定义规则要简单一点。这些差异主要归因于偏好。</p>
<p>相比ESLint，JSHint更受青睐的一个特例是，当你开发一个具有Mozilla Firefox浏览器特有特性的应用程序时。JSHint有一个规则允许调用Mozilla特定的JavaScript扩展，而ESLint没有。</p>
<p>像ESLint一样，浏览规则并决定哪些规则适合你的代码库是最需要时间的部分。因为JSHint的规则和配置选项更少，所以如果您不想做非常特殊的事情，它的设置可能会更快一些。</p>
<h3><strong> 5。PMD </strong></h3>
<p>如果你正在构建一个Java或Saleforce Apex应用程序，你可能已经熟悉了<a href="https://pmd.github.io/pmd-6.23.0/pmd_rules_ecmascript.html" target="_blank" rel="noopener noreferrer"> PMD </a>。顺便说一下，PMD—<a href="https://pmd.github.io/pmd-6.12.0/pmd_projectdocs_trivia_meaning.html" target="_blank" rel="noopener noreferrer">不代表任何东西</a>——是一个支持几种编程语言的linter，包括JavaScript。</p>
<p>它针对JavaScript应用的规则集<a href="https://pmd.github.io/pmd-6.23.0/pmd_rules_ecmascript.html" target="_blank" rel="noopener noreferrer">相当有限</a>，但与上述林挺工具不同，PMD捆绑了一个<a href="https://pmd.github.io/pmd-6.23.0/pmd_userdocs_cpd.html" target="_blank" rel="noopener noreferrer">复制粘贴检测器</a>。这有助于在广泛的应用程序中找到重复或相似的代码，并鼓励干代码。</p>
<h3>6.LGTM</h3>
<p>仅仅基于预先确定的规则的林挺是提高代码质量的好方法，但它不是检查代码库常见错误的唯一方法。林挺最大的劣势是它只知道你能告诉它的规则。</p>
<p><a href="https://lgtm.com/help/lgtm/about-lgtm" target="_blank" rel="noopener noreferrer">LGTM</a>——代表“对我来说看起来不错”——利用错误经常再次出现的事实来检查你的代码库的<a href="https://en.wikipedia.org/wiki/Common_Vulnerabilities_and_Exposures" target="_blank" rel="noopener noreferrer">常见漏洞，并利用它通过分析其他代码库了解到的</a>。换句话说，它寻找的不是程序员明确告诉它的规则，而是可能表明引入了新的错误或安全漏洞的变化。</p>
<p>虽然开源项目是免费的，但LGTM为私有代码库付费。</p>
<h3>7.声纳云</h3>
<p><a href="https://sonarcloud.io/" target="_blank" rel="noopener noreferrer"> SonarCloud </a>提供了一套全面的静态分析工具，可以从多方面评估代码库的质量。虽然私人项目必须付费才能访问，但开源项目是免费的，并且集成到GitHub中，因此您可以确保每次提交都保持您的代码质量。</p>
<p>如果你想深入了解SonarCloud所做的检查，它在其网站上提供了开源项目结果的<a href="https://sonarcloud.io/explore/projects" target="_blank" rel="noopener noreferrer">样本。每一个都基于可靠性、安全性、可维护性、代码覆盖率和重复代码进行评估。</a></p>
<p><img data-attachment-id="19638" data-permalink="https://blog.logrocket.com/static-analysis-in-javascript-11-tools-to-help-you-catch-errors-before-users-do/sonarcloud-assessment-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1.png" data-orig-size="720,572" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SonarCloud assessment" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1-300x238.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1.png" decoding="async" class="aligncenter size-full wp-image-19638 jetpack-lazy-image" src="../Images/b283471022f1463c91e3348b449f71c1.png" alt="SonarCloud Assessment" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1-300x238.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="19638" data-permalink="https://blog.logrocket.com/static-analysis-in-javascript-11-tools-to-help-you-catch-errors-before-users-do/sonarcloud-assessment-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1.png" data-orig-size="720,572" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SonarCloud assessment" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1-300x238.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-19638" src="../Images/b283471022f1463c91e3348b449f71c1.png" alt="SonarCloud Assessment" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1-300x238.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/sonarcloud-assessment-1.png"/></noscript>
<p>您还可以<a href="https://sonarcloud.io/code?id=mediawiki-core&amp;selected=mediawiki-core%3Aincludes%2Fapi%2FApiBase.php" target="_blank" rel="noopener noreferrer">深入到每个文件</a>中，查看SonarCloud发现的所有建议和错误，让您能够进行粒度访问，并根据需要调整某些质量阈值。</p>
<h3>8.从属机器人</h3>
<p>如果你把你的源代码放在GitHub上，你可能已经看过<a href="https://dependabot.com/" target="_blank" rel="noopener noreferrer">dependent bot</a>的运行了。GitHub <a href="https://dependabot.com/" target="_blank" rel="noopener noreferrer">于2019年5月收购了dependent bot</a>，此后将其集成为一项功能，可供所有存储库使用，以帮助解决过时依赖项带来的安全漏洞。</p>
<p><img data-attachment-id="19637" data-permalink="https://blog.logrocket.com/static-analysis-in-javascript-11-tools-to-help-you-catch-errors-before-users-do/automated-pull-request-dependabot/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot.png" data-orig-size="730,422" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Automated pull request from Dependabot" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot-300x173.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot.png" decoding="async" class="aligncenter size-full wp-image-19637 jetpack-lazy-image" src="../Images/d2e2acddc9529c74f923dcf31799ebb7.png" alt="Automated Pull Request From Dependabot" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot-300x173.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="19637" data-permalink="https://blog.logrocket.com/static-analysis-in-javascript-11-tools-to-help-you-catch-errors-before-users-do/automated-pull-request-dependabot/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot.png" data-orig-size="730,422" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Automated pull request from Dependabot" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot-300x173.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-19637" src="../Images/d2e2acddc9529c74f923dcf31799ebb7.png" alt="Automated Pull Request From Dependabot" srcset="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot.png 730w, https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot-300x173.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/automated-pull-request-dependabot.png"/></noscript>
<p>鉴于JavaScript对第三方库的依赖性越来越强，这可以节省团队的时间并更快地弥补安全漏洞。</p>
<p>不过，在合并Dependabot pull请求时，您必须非常小心。如果您没有一套好的自动化测试，那么即使是微小的版本升级也可能导致重大的变化。</p>
<h3>9.NPM-审计</h3>
<p>从<a href="https://docs.npmjs.com/auditing-package-dependencies-for-security-vulnerabilities" target="_blank" rel="noopener noreferrer">版本6 </a>开始，npm就有了<code>audit</code>命令，为Dependabot提供类似的检查。如果你使用npm作为你的包管理器，但是不喜欢在你的代码上得到自动的拉请求，运行<a href="https://docs.npmjs.com/cli/audit" target="_blank" rel="noopener noreferrer"> <code>npm audit</code> </a>命令是一个很好的方法来确保你的第三方依赖是最新的和安全的。</p>
<p>由于盲目更新所有的依赖项可能并不明智，<code>npm audit</code>提供了一些选项来限制它的范围。</p>
<ul>
<li><code>npm audit fix</code>自动更新软件包，但仅执行较小的更新<a href="https://semver.org/" target="_blank" rel="noopener noreferrer">永远不更新</a></li>
<li><code>npm audit fix --dry-run</code>输出将要进行的更改列表，以便您可以在它们生效前仔细检查它们</li>
<li><code>npm audit fix --force</code>更新所有存在安全漏洞的包的主版本和次版本</li>
</ul>
<p>与Dependabot一样，<code>npm audit</code>应该与自动和手动测试相结合，以避免破坏性的变化。</p>
<h3>10.流动</h3>
<p>脸书的<a href="https://flow.org/" target="_blank" rel="noopener noreferrer">流程</a>可以使用显式注释或隐式推理来确保JavaScript代码的类型一致性。</p>
<p>类型检查通过确保变量以程序期望的方式使用来最小化错误。</p>
<p>例如，假设您有这样的代码:</p>
<pre>function isTrue (x: bool) {
  return x === true;
}
isTrue(1);
</pre>
<p>Flow会抛出一个错误，因为它期望<code>x</code>是一个<code>boolean</code>，而不是一个整数。当您希望确保对象包含特定属性或数字不会被错误地强制转换为字符串时，此警告尤其有用。</p>
<h3>11.以打字打的文件</h3>
<p>由微软开发的<a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer"> TypeScript </a>用于谷歌的Angular框架中。TypeScript扩展了JavaScript，像Flow一样，<a href="https://blog.logrocket.com/typescript-vs-flow/" target="_blank" rel="noopener noreferrer">提供了类型注释和类型检查</a>。但是，与Flow不同，TypeScript受到大多数主流JavaScript框架和ide的支持，因此在这一点上，它可能是更好的选择。</p>
<p>虽然您不必使用TypeScript的所有特性来获得一些优势，例如隐式类型安全，但是您可以<a href="https://blog.logrocket.com/a-quick-and-complete-guide-to-typescript-types-438c259257d3/" target="_blank" rel="noopener noreferrer">深入研究以获得更多优势</a>。对于接口、泛型、模板文字和枚举等特性，JavaScript开发人员有很多东西需要学习。</p>
<h2 id="conclusion">结论</h2>
<p>这个列表<a href="https://www.softwaretestingmagazine.com/tools/open-source-javascript-code-analysis/" target="_blank" rel="noopener noreferrer">远非全面</a>，但是我希望它能帮助你开始探索和使用静态分析来改进你的代码库。</p>
<p>如果你有喜欢的JavaScript静态分析工具，我很乐意听听。请在下面给我留言，继续我们的对话。</p><div class="code-block code-block-27">
<div class="blog-plug inline-plug vanilla-javascript-cta"><h2>通过理解上下文，更容易地调试JavaScript错误</h2>
<p>调试代码总是一项单调乏味的任务。但是你越了解自己的错误，就越容易改正。</p>
<p>LogRocket 让你以新的独特的方式理解这些错误。我们的前端监控解决方案跟踪用户与您的JavaScript前端的互动，让您能够准确找出导致错误的用户行为。</p>
<a href="https://lp.logrocket.com/blg/javascript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/cbfed9be3defcb505e662574769a7636.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reproduce-javascript-errors.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reproduce-javascript-errors.gif"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/cbfed9be3defcb505e662574769a7636.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/06/reproduce-javascript-errors.gif"/></noscript></a>
<p>LogRocket记录控制台日志、页面加载时间、堆栈跟踪、慢速网络请求/响应(带有标题+正文)、浏览器元数据和自定义日志。理解您的JavaScript代码的影响从来没有这么简单过！</p>
<a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>