<html>
<head>
<title>Why you should be using the dialog element - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>为什么你应该使用对话框元素</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-the-dialog-element/#0001-01-01">https://blog.logrocket.com/using-the-dialog-element/#0001-01-01</a></blockquote><div><article class="article-post">
<p>对话框是任何用户界面不可或缺的一部分，无论是网络、手机还是其他任何现有的界面。</p>
<p>你想从用户那里确认什么吗？您向用户显示一个带有可选选项的对话框。您想从用户那里收集信息吗？您使用一个带有可提交表单输入的对话框。在用户界面中使用对话框有很多用例。</p>
<p>您可以通过在项目中安装 JavaScript 库来使用对话框，并且在您使用的任何一种框架中都可以使用。例如，如果您的项目在 React 中，您可以使用<a href="https://github.com/davidtheclark/react-aria-modal" target="_blank" rel="noopener"> react-aria-modal </a>。对于有角度的，可以用<a href="https://github.com/maximelafarie/ngx-smart-modal" target="_blank" rel="noopener"> ngx-smart-modal </a>。或者，如果您正在使用优秀的旧 jQuery，您可以使用<a href="https://jquerymodal.com/" target="_blank" rel="noopener"> jquery-modal </a>。</p>
<p>第三方库很棒，但是它们会给你的项目带来额外的开销，不仅会增加一定的复杂性，还会增加你的应用程序的整体大小。</p>
<p>最重要的是，即使您只打算使用这个库的某些特性，您也要安装包含所有附加功能的整个库。这在我看来并不伟大。</p>
<p>这就是浏览器的本地元素发挥作用的地方。这是你在对话框中想要的一切，现在 Safari 从 v15.4 开始增加了对<code>&lt;dialog&gt;</code>元素的支持，没有任何理由不在生产中使用它们！</p>
<h2 id="what-is-a-dialog-element">什么是<code>&lt;dialog&gt;</code>元素？</h2>
<p><code>&lt;dialog&gt;</code>是一个 HTML 元素，表示一个对话框，如警告、确认、检查器或子窗口。</p>
<p>一个非常基本的<code>&lt;dialog&gt;</code>元素应该是这样的:</p>
<pre class="language-html hljs">&lt;dialog&gt;
  Hey, this is an HTML dialog!
&lt;/dialog&gt;
</pre>
<p>因为默认情况下<code>&lt;dialog&gt;</code>是不可见的，所以我们需要传入一个<code>open</code>属性来使它可见:</p>
<pre class="language-html hljs">&lt;dialog open&gt;
  Hey, this is an HTML dialog!
&lt;/dialog&gt;
</pre>
<p>下面是它的样子:</p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="gOoMpJz" data-user="amit_merchant">参见 Amit Merchant(<a href="https://codepen.io/amit_merchant">@ Amit _ Merchant</a>)<br/>上的<a href="https://codepen.io"> CodePen </a>中的&lt;基本对话框&gt; 。</p>
<p/>
<h2 id="customizing-dialog-appearance">定制<code>&lt;dialog&gt;</code>的外观</h2>
<p>您可能想知道，示例中的黑色边框是从哪里来的？答案是每个用户代理(浏览器)都会对<code>&lt;dialog&gt;</code>元素应用默认样式，如下所示:</p>
<p><img data-attachment-id="101232" data-permalink="https://blog.logrocket.com/using-the-dialog-element/default-dialog-css/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css.png" data-orig-size="730,356" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Default dialog CSS" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css-300x146.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css.png" decoding="async" class="aligncenter size-full wp-image-101232 jetpack-lazy-image" src="../Images/b8637a37d509d02e8e85917b3df9f21c.png" alt="Default Dialog CSS" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css-300x146.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="101232" data-permalink="https://blog.logrocket.com/using-the-dialog-element/default-dialog-css/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css.png" data-orig-size="730,356" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Default dialog CSS" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css-300x146.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-101232" src="../Images/b8637a37d509d02e8e85917b3df9f21c.png" alt="Default Dialog CSS" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css-300x146.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/default-dialog-css.png"/></noscript>
<p>对话框的设计可以很容易地定制。例如，如果你想删除默认边框，并添加一个阴影和一些细节，你可以这样做:</p>
<pre class="language-css hljs">dialog {
  border: none;
  box-shadow: #00000029 2px 2px 5px 2px;
  border-radius: 10px;
  padding: 30px;
  background-color: pink;
  font-family: sans-serif;
  font-size: 20px;
  font-weight: bold;
}
</pre>
<p>这是自定义对话框的外观:</p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="KKZMdpO" data-user="amit_merchant">参见 Amit Merchant(<a href="https://codepen.io/amit_merchant">@ Amit _ Merchant</a>)<a href="https://codepen.io">code Pen</a>上的笔<a href="https://codepen.io/amit_merchant/pen/KKZMdpO"> <br/>定制&lt;对话框&gt; </a>。</p>
<p>添加交互性</p>
<h2 id="adding-interactivity">在现实世界中，你不会像这样直接使用对话框。您可能希望在某个动作上触发对话框。比如说点击一个按钮。</h2>
<p>看看这个例子:</p>
<p>正如您所看到的，我们有一个 ID 为<code>demoDialog</code>的对话框。现在，如果我们想通过点击<strong>打开对话框</strong>按钮来打开这个对话框，我们可以这样做:</p>
<pre class="language-html hljs">&lt;dialog id="demoDialog"&gt;
  Hey there! This is a dialog
  &lt;button id="closeDialog"&gt;Close dialog&lt;/button&gt;
&lt;/dialog&gt;
&lt;menu&gt;
  &lt;button id="openDialogButton"&gt;Open dialog box&lt;/button&gt;
&lt;/menu&gt;
</pre>
<p>要打开对话框，我们可以通过 JavaScript 编程调用<code>&lt;dialog&gt;</code>实例上的<code>showModal()</code>方法。但在此之前，最好先通过检查对话框的对象中是否存在<code>showModal</code>来检查浏览器是否支持<code>&lt;dialog&gt;</code>。</p>
<pre class="language-javascript hljs">var openDialogButton = document.getElementById('openDialogButton');
var demoDialog = document.getElementById('demoDialog');
var closeDialog = document.getElementById('closeDialog');
// "Open dialog box" button opens the &lt;dialog&gt; 
openDialogButton.addEventListener('click', function () {
  if (typeof demoDialog.showModal === "function") {
    demoDialog.showModal();
  } else {
    console.log("The &lt;dialog&gt; API is not supported by this browser");
  }
});
closeDialog.addEventListener('click', function() {
  demoDialog.close();
})
</pre>
<p>我们可以调用<strong>关闭对话框</strong>上的<code>close()</code>方法来关闭<code>&lt;dialog&gt;</code>。</p>
<p>注意，您也可以使用 Esc 键关闭<code>&lt;dialog&gt;</code>。</p>
<p>以下是所有正在运行的内容:</p>
<p>看到笔<a href="https://codepen.io/amit_merchant/pen/KKZMdqw"> <br/>在<a href="https://codepen.io"> CodePen </a>上打开一个&lt;对话框&gt;由 Amit Merchant(<a href="https://codepen.io/amit_merchant">@ Amit _ Merchant</a>)<br/>编程</a>。</p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="KKZMdqw" data-user="amit_merchant">处理用户输入</p>
<p>如果您想在<code>&lt;dialog&gt;</code>中处理用户输入的输入，您可以在其中定义一个<code>&lt;form&gt;</code>，并将其<code>method</code>设置为<code>"dialog"</code>。</p>
<h2 id="handling-users-input">当表单提交后，对话框将自动关闭，然后，您可以像这样处理对话框的<code>close</code>事件上的输入值:</h2>
<p>将所有这些放在一起:</p>
<pre class="language-html hljs">&lt;dialog id="collectEmail"&gt;
  &lt;form method="dialog"&gt;
    &lt;p&gt;
      &lt;label&gt;
        Email:
        &lt;input type="email" name="email" id="email" placeholder="Enter your email"&gt;
      &lt;/label&gt;
    &lt;/p&gt;
    &lt;menu&gt;
      &lt;button value="cancel"&gt;Cancel&lt;/button&gt;
      &lt;button id="confirmBtn" value="default"&gt;Confirm&lt;/button&gt;
    &lt;/menu&gt;
  &lt;/form&gt;
&lt;/dialog&gt;
&lt;menu&gt;
  &lt;button id="openEmailDialog"&gt;Submit user's email&lt;/button&gt;
&lt;/menu&gt;
&lt;output aria-live="polite"&gt;&lt;/output&gt;
</pre>
<p>参见<a href="https://codepen.io"> CodePen </a>上的笔<a href="https://codepen.io/amit_merchant/pen/RwxRyvP"> <br/> &lt;对话框&gt;Amit Merchant(<a href="https://codepen.io/amit_merchant">@ Amit _ Merchant</a>)<br/>输入演示</a>。</p>
<pre class="language-javascript hljs">collectEmail.addEventListener('close', function() {
  let email = document.getElementById('email').value;
  outputBox.innerHTML = `User's email: &lt;b&gt;${email}&lt;/b&gt;`;
});
</pre>
<p>更多的调整</p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="RwxRyvP" data-user="amit_merchant">更改<code>&lt;dialog&gt;</code>的背景</p>
<p>也可以使用<code>::backdrop</code>伪 CSS 属性改变对话框打开时的背景:</p>
<h2 id="some-more-tweaks">这看起来是这样的:</h2>
<h3 id="changing-dialog-backdrop">参见<a href="https://codepen.io"> CodePen </a>上的笔<a href="https://codepen.io/amit_merchant/pen/popbVYa"> <br/> &lt;对话框&gt;背景</a>由 Amit Merchant(<a href="https://codepen.io/amit_merchant">@ Amit _ Merchant</a>)<br/>。</h3>
<p>It’s also possible to change the dialog’s backdrop when it’s opened using the <code>::backdrop</code> pseudo CSS property:</p>
<pre class="language-css hljs">dialog::backdrop {
  background-color: #673ab752;
}
</pre>
<p>点击<em> <code>&lt;dialog&gt;</code> </em>外部时关闭</p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="popbVYa" data-user="amit_merchant">默认情况下，当<code>&lt;dialog&gt;</code>打开时，在对话框区域之外点击时无法关闭。如果我们想引入这种行为，我们可以通过点击对话框上的<code>getBoundingClientRect()</code>来获得对话框的<a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMRect" target="_blank" rel="noopener"> DOMRect </a>。</p>
<p>然后，我们可以获得单击的坐标，并检查它是否落在对话框的矩形之外。基于此，我们可以这样调用对话框的<code>close()</code>事件:</p>
<h3 id="closing-the-dialog-when-clicking-outside-of-it">下面是实际的行为:</h3>
<p>参见<a href="https://codepen.io"> CodePen </a>上 Amit Merchant(<a href="https://codepen.io/amit_merchant">@ Amit _ Merchant</a>)<br/>的笔<a href="https://codepen.io/amit_merchant/pen/ZEagBvV"> <br/> &lt;对话框&gt;演示</a>。</p>
<p>We can then get the coordinates of the click and check if it falls outside of the dialog’s rectangle. And based on this, we can call the dialog’s <code>close()</code> event like so:</p>
<pre class="language-javascript hljs">collectEmail.addEventListener("click", event =&gt; {
    const rect = collectEmail.getBoundingClientRect();
    if (event.clientY &lt; rect.top || event.clientY &gt; rect.bottom ||
        event.clientX &lt; rect.left || event.clientX &gt; rect.right) {
        favDialog.close();
    }
});
</pre>
<p>尝试在对话框外单击！</p>
<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="ZEagBvV" data-user="amit_merchant">最后</p>
<p>这就是原生 HTML <code>&lt;dialog&gt;</code>元素的全部内容，它现在已经得到了主流浏览器的广泛支持，包括我们钟爱的 Safari 浏览器！</p>
<p>所以，如果你有需要使用对话框的用例，并且最终使用了<code>&lt;dialog&gt;</code>元素，这是一个显而易见的事情。编码快乐！</p>
<h2 id="in-closing">使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket 会告诉您应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p><div class="code-block code-block-2">
<div class="blog-plug base-cta"><h2>LogRocket 自动聚合客户端错误、JS 异常、前端性能指标和用户交互。然后 LogRocket 使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p>关注重要的 bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试 LogRocket】。</a></p>
<p>Then, use session replay with deep technical telemetry to see exactly what the user saw and what caused the problem, as if you were looking over their shoulder.</p>
<p>LogRocket automatically aggregates client side errors, JS exceptions, frontend performance metrics, and user interactions. Then LogRocket uses machine learning to tell you which problems are affecting the most users and provides the context you need to fix it.</p>
<p>Focus on the bugs that matter — <a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">try LogRocket today</a>.</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>