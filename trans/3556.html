<html>
<head>
<title>How to build a headless WordPress site with Vue </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何用Vue构建一个无头WordPress站点</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-headless-wordpress-site-vue/#0001-01-01">https://blog.logrocket.com/build-headless-wordpress-site-vue/#0001-01-01</a></blockquote><div><article class="article-post">
<p>直到几年前，开发人员还在使用传统的内容管理系统(CMS)以某种方式管理一切。我所说的一切，是指从后端(如数据和内容管理、角色、权限和管理任务)到前端(主要是PHP生成的视图)的一切。</p>
<p>然而，随着现代前端开发的出现，正在发生实质性的转变。在围绕内容管理系统涌现的大规模生态系统中，旧的、单一的内容管理系统不再有一席之地。相反，无服务器架构、以API为中心的微服务和静态站点生成器已经证明了它们的存在。</p>
<p>在本文中，我们将使用Vue作为前端框架，在WordPress API的帮助下创建一个无头WordPress环境来管理后端内容。本文的源代码可以在<a href="https://github.com/ugwutotheeshoes/supabase-impression"> Git </a> <a href="https://github.com/ugwutotheeshoes/gatsby-supabase"> H </a> <a href="https://github.com/ugwutotheeshoes/gatsby-supabase"> ub </a>上找到。请随意派生和克隆存储库，以便快速开始。</p>
<h2 id="prerequisites">先决条件</h2>
<p>要阅读本文，您需要以下内容:</p>
<ul>
<li>Node.js和npm。运行<code>node -v &amp;&amp; npm -v</code>命令来验证你已经安装了它们，或者<a href="https://nodejs.org/en/">安装它们</a></li>
<li>对JavaScript和Vue的基本理解</li>
<li>一个活跃的<a href="https://wordpress.com/start/domains"> WordPress账户</a>和站点</li>
<li>要在本文后面使用WordPress的插件特性，你需要一个<a href="https://wordpress.com/pricing/"> WordPress商业</a>账户</li>
</ul>
<h2 id="tableofcontents">目录</h2>

<h2 id="what-is-vue">Vue是什么？</h2>
<p>Vue是一个<a href="https://blog.logrocket.com/how-to-use-vue-3-typescript/">渐进式JavaScript框架</a>，用于构建只关注视图层的用户界面。它包括一个库生态系统，帮助处理大型单页应用程序中的复杂性。</p>
<h2 id="project-setup-installation">项目设置和安装</h2>
<p>通过在终端中运行以下命令来安装<a href="https://cli.vuejs.org/"> Vue CLI </a>:</p>
<pre class="language-bash hljs">npm install -g @vue/cli
# OR
yarn global add @vue/cli
</pre>
<p>安装Vue CLI后，我们将导航到首选目录并创建一个新项目:</p>
<pre class="language-javascript hljs">vue create &lt;project-name&gt; 
</pre>
<p>导航到项目目录并安装所需的依赖项:</p>
<pre class="language-javascript hljs">cd &lt;project-name&gt; 
npm i axios
</pre>
<p>在浏览器中运行<code>npm run serve</code>以在<code><a href="https://localhost:8080/" rel="nofollow">https://localhost:8080/</a></code>启动开发服务器。在上面的代码片段中，<code>&lt;project-name&gt;</code>代表我们的应用程序的名称；你想怎么叫都行。</p>
<h2 id="what-headless-wordpress">什么是无头WordPress？</h2>
<p>WordPress是一个免费的、开源的、用PHP构建的单片CMS，并与MySQL或MariaDB数据库配对。众所周知，WordPress界面有一个强大的后端，可以处理数据和内容管理、角色和权限以及管理任务。WordPress前端主要关注显示内容。</p>
<p>通过在前端应用程序中使用REST API，WordPress被分离成一个轻量级的内容管理系统，称为headless WordPress。</p>
<p>REST API是一种应用程序编程接口，它遵循REST架构风格，并允许与RESTful web服务进行交互。REST(表述性状态转移)是一组架构约束，而不是协议或标准。</p>
<p>REST架构最受欢迎的特性之一是能够以多种格式交付数据，比如纯文本、HTML、XML、YAML和JSON。JSON是使用最广泛的文件格式，因为它与语言无关，并且易于被人类和机器理解。</p>
<p>JSON是一种轻量级、人类可读的开放标准数据格式，看起来像JavaScript中的对象。许多编程语言广泛支持JSON，所以你可以用客户端JavaScript构建<span> WordPress应用程序，比如块编辑器、移动应用程序、桌面或命令行工具。下面的代码示例展示了一个从API接收的JSON数据格式的例子:</span></p>
<pre class="language-javascript hljs">[
  {
    "id": 1,
    "title": "Mollitia voluptatem quia atque facere accusamus facilis beatae doloribus.",
    "slug": "debitis-sed-quasi",
    "content": "Tenetur nesciunt est eligendi reiciendis non qui itaque explicabo. Voluptas id vel saepe...",
    "hit": 828226,
    "category": {
      "id": 26
    },
    "createdAt": "2021-12-22T16:58:37.058Z",
    "publishedAt": "2022-02-17T06:33:56.110Z",
    "image": [
      {
        "url": "http://loremflickr.com/640/480/abstract",
        "name": "f9b496df-63eb-43b4-8769-ffd47fc2f4a3",
        "status": "done",
        "type": "image/jpeg",
        "uid": "4b2e4eb0-a144-4b58-b524-5407f009bd64"
      }
    ],
  },
  {
    "id": 2,
    "title": "Quo praesentium laudantium.",
    "slug": "sed-molestiae-ut",
    "content": "Aut ipsam a aut sit exercitationem sed voluptates eaque. Impedit a est tenetur iste et rem voluptas similique qui...",
    "hit": 658411,
    "category": {
      "id": 45
    },
    "createdAt": "2022-02-26T23:41:57.808Z",
    "publishedAt": "2022-06-01T16:42:06.928Z",
    "image": [
      {
        "url": "http://loremflickr.com/640/480/abstract",
        "name": "cb05d57d-c97d-475e-b602-dad1a611a2a9",
        "status": "done",
        "type": "image/jpeg",
        "uid": "2c8ce7ad-5700-4207-b83c-fac51b37ea0c"
      }
    ],
  },
]
</pre>
<p>用于现代前端开发的<a href="https://developer.wordpress.org/rest-api/"> WordPress REST API </a>的引入为开发者提供了一种自由感和极大的灵活性，让他们可以从头开始构建令人惊叹的UI。</p>
<p>WordPress REST API提供REST端点、URL、页面、分类法和其他内置的WordPress数据类型。为了在WordPress站点上查询、更改和创建内容，前端应用程序可以通过WordPress REST API向发送和接收JSON数据。</p>
<h2 id="configuring-our-wordpress-site">配置我们的WordPress站点</h2>
<p>让我们首先用一些虚拟帖子建立我们的WordPress网站，这些帖子将作为我们前端应用程序的数据源。前往<strong>插件</strong>部分激活WordPress网站中使用的WordPress REST API插件。你需要从GitHub下载<a href="https://github.com/WP-API/Basic-Auth"> WP-Rest API </a>插件的zip文件，并上传到WordPress插件文件夹。</p>
<p>接下来，进入<strong>设置，</strong>点击<strong>永久链接</strong>，然后选择<strong>帖子名称</strong>或者<strong>自定义结构</strong>底座，如下图所示:</p>
<p><img data-attachment-id="140438" data-permalink="https://blog.logrocket.com/build-headless-wordpress-site-vue/attachment/configure-wordpress-site-post-name/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name.png" data-orig-size="730,349" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="configure-wordpress-site-post-name" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name-300x143.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name.png" decoding="async" class="aligncenter wp-image-140438 size-full jetpack-lazy-image" src="../Images/ae8e5c18f0e273e0326da1c3346aa0a6.png" alt="Configure WordPress Site Post Name" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name-300x143.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140438" data-permalink="https://blog.logrocket.com/build-headless-wordpress-site-vue/attachment/configure-wordpress-site-post-name/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name.png" data-orig-size="730,349" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="configure-wordpress-site-post-name" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name-300x143.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name.png" decoding="async" loading="lazy" class="aligncenter wp-image-140438 size-full" src="../Images/ae8e5c18f0e273e0326da1c3346aa0a6.png" alt="Configure WordPress Site Post Name" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name-300x143.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/configure-wordpress-site-post-name.png"/></noscript>
<p><strong> Post name </strong> base slug作为API端点，看起来如下所示:</p>
<pre class="language-javascript hljs">https://example.com/wp-json/wp/v2/posts
</pre>
<p>因为我们正在处理API调用，所以测试一下<a href="https://www.postman.com/"> Postman </a>上的URL，看看我们的WordPress站点的post数据格式。</p>
<h2 id="consuming-wordpress-api">使用WordPress API</h2>
<p>为了在WordPress REST API中访问我们的文章，我们将把下面的代码块添加到我们的<code>App.vue</code>文件中:</p>
<pre class="language-javascript hljs">export default {
  data() {
    return {
      post: [],
      isLoading: false,
    };
  },
  methods: {
    getPosts() {
      this.isLoading = true;
      fetch("https://example.com/wp-json/wp/v2/posts")
        .then((response) =&gt; response.json())
        .then((data) =&gt; {
          this.post = data;
          this.isLoading = false;
        });
    },
  },
  mounted() {
    this.getPosts();
  },
};
&lt;/script&gt;
</pre>
<p><code>getPosts()</code>方法控制我们的应用程序的加载状态，并对我们的API URL进行API调用。然后，它将API返回的数据存储在<code>post</code>数组中，该数组是在<code>data</code>属性中创建的。当Vue在浏览器中呈现我们的内容时，<a href="https://vuejs.org/api/options-lifecycle.html#mounted"> <code>mounted()</code> </a>生命周期钩子调用<code>getPosts()</code>方法。</p>
<p>接下来，我们将显示API的内容。使用<code>App.vue</code>文件中的Vue指令，我们将显示API的内容，如下所示:</p>
<pre class="language-javascript hljs">&lt;template&gt;
&lt;div class="container"&gt;
    &lt;p v-if="isLoading"&gt;Loading...&lt;/p&gt;
    &lt;ul v-for="p in post" :key="p.id"&gt;
      &lt;h1&gt;{{ p.title }}&lt;/h1&gt;
      &lt;p&gt;{{ p.content }}&lt;/p&gt;
      &lt;p class="date"&gt;{{ p.createdAt }}&lt;/p&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&amp;gt;
</pre>
<p><code>v-if</code>指令在其条件改变时触发转换，并处理应用程序的加载状态。例如，当从服务器加载数据时，我们可能会遇到这样的情况，即需要一些时间来获取数据。</p>
<p>基于源数据多次呈现元素或模板块，通过在我们的API中循环数据数组来显示我们的帖子。应用配置后，我们的应用程序将类似于下图:</p>
<p><img data-attachment-id="140440" data-permalink="https://blog.logrocket.com/build-headless-wordpress-site-vue/attachment/headless-wordpress-configurations-applied/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied.png" data-orig-size="730,352" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="headless-wordpress-configurations-applied" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied-300x145.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied.png" decoding="async" class="aligncenter wp-image-140440 size-full jetpack-lazy-image" src="../Images/9ad9b0604ed22b0ddb3cd6697007a1f6.png" alt="Headless WordPress Configurations Applied" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied-300x145.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140440" data-permalink="https://blog.logrocket.com/build-headless-wordpress-site-vue/attachment/headless-wordpress-configurations-applied/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied.png" data-orig-size="730,352" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="headless-wordpress-configurations-applied" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied-300x145.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied.png" decoding="async" loading="lazy" class="aligncenter wp-image-140440 size-full" src="../Images/9ad9b0604ed22b0ddb3cd6697007a1f6.png" alt="Headless WordPress Configurations Applied" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied-300x145.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/headless-wordpress-configurations-applied.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>Headless WordPress是一个开箱即用的功能，它解决了大多数开发者和网站所有者面临的与内容管理系统相关的问题。在本文中，我们探索了使用WordPress和Vue构建、管理和交付内容的无头集成的可能性。</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的Vue应用</h2><p>调试Vue.js应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的Vue突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Vue应用程序中发生的一切，包括网络请求、JavaScript错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex插件将Vuex突变记录到LogRocket控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试Vue应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>