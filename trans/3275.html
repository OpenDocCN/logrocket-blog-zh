<html>
<head>
<title>How to build a full-stack app in RedwoodJS - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在RedwoodJS - LogRocket博客中搭建全栈app</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/#0001-01-01">https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在本指南中，我们将介绍如何使用RedwoodJS构建全栈应用。</p>
<p>您可能已经看过很多关于使用x framework (or)技术构建全栈应用的教程和指南，但是，RedwoodJS在某些方面是不同的和有益的，包括:</p>
<ol>
<li>RedwoodJS包括<a href="https://blog.logrocket.com/tag/typescript/"> Typescript </a>、GraphQL、Prisma和一个测试框架</li>
<li>初创公司可以构建产品并制作原型，因为它提供了认证、授权和CRUD操作等模块。我们需要做的就是为我们的需求设计业务逻辑</li>
<li>CLI是RedwoodJS最好的特性之一；它使开发过程更快更容易</li>
</ol>
<p>在这里，我们将建立一个论坛来了解RedwoodJS应用程序是如何构建的。它包含了帮助你理解所有框架功能的所有功能。</p>
<p>我们将要构建的功能有:</p>
<ul>
<li>登录和注册</li>
<li>创建、阅读和更新帖子</li>
<li>评论系统</li>
<li>基于用户的帖子访问</li>
</ul>
<p>除了RedwoodJS，我们还将使用Typescript进行类型检查，使用TailwindCSS进行样式设置。</p>
<h3>目录</h3>

<h3 id="redwood-js-installation-setup">红木安装和设置</h3>
<p>RedwoodJS使用<a href="https://classic.yarnpkg.com/en/docs/install#mac-stable" target="_blank" rel="noopener"> yarn </a>作为包管理器。安装完成后，您可以使用以下命令创建一个新项目:</p>
<pre class="language-typescript hljs">yarn create redwood-app --ts ./redwoodblog
</pre>
<p>它搭建了所有的模块来构建一个全栈应用。在这里，您可以看到RedwoodJS应用程序的完整结构。</p>
<p><img data-attachment-id="128514" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/redwoodjs-app-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure.png" data-orig-size="428,934" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Folder structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure-137x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure.png" decoding="async" class="aligncenter size-full wp-image-128514 jetpack-lazy-image" src="../Images/aadc8b78e2be076709239a6cbdd5ee85.png" alt="Redwood JS app folder structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure.png 428w, https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure-137x300.png 137w" data-lazy-sizes="(max-width: 428px) 100vw, 428px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="128514" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/redwoodjs-app-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure.png" data-orig-size="428,934" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Folder structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure-137x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-128514" src="../Images/aadc8b78e2be076709239a6cbdd5ee85.png" alt="Redwood JS app folder structure" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure.png 428w, https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure-137x300.png 137w" sizes="(max-width: 428px) 100vw, 428px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/redwoodjs-app-structure.png"/></noscript>
<p>有三个主要目录。他们是<code>api</code>、<code>scripts</code>和<code>web</code>。我们来详细讨论一下。</p>
<ul>
<li><code>.redwood</code>:包含应用程序的内部版本。</li>
<li><code>api</code>:服务于应用程序的后端。它主要包含<code>db</code>，服务于应用程序的数据库模式。所有后端功能将在<code>src</code>目录中<ul>
<li>包含你所有的后台代码。它包含五个目录，如下所示:<ul>
<li><code>directives</code>:包含GraphQL <a href="https://www.graphql-tools.com/docs/schema-directives" target="_blank" rel="noopener">模式指令</a>来控制对GraphQL查询的访问</li>
<li><code>functions</code> : RedwoodJS将GraphQL API作为无服务器函数运行。它自动生成<code>graphql.ts</code>；您可以在其上添加额外的无服务器功能</li>
<li><code>graphql</code>:包含用模式定义语言(SDL)编写的GraphQL模式</li>
<li><code>lib</code>:包含后端API中所有可重用的函数。例如，身份验证</li>
<li><code>services</code>:包含与您的数据相关的业务逻辑。它运行与API相关的功能并返回结果</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="setting-tailwind-css">设置尾翼CSS</h3>
<p>安装TailwindCSS很简单；在根目录中运行以下命令:</p>
<pre class="language-typescript hljs">yarn rw setup ui tailwindcss
</pre>
<p><img data-attachment-id="128516" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/installing-tailwind-css/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css.png" data-orig-size="730,170" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Installing packages" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css-300x70.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css.png" decoding="async" class="aligncenter size-full wp-image-128516 jetpack-lazy-image" src="../Images/516a1e0041f9144c8b1eb9536f6d7d60.png" alt="Installing packages " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css-300x70.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="128516" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/installing-tailwind-css/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css.png" data-orig-size="730,170" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Installing packages" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css-300x70.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-128516" src="../Images/516a1e0041f9144c8b1eb9536f6d7d60.png" alt="Installing packages " srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css-300x70.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/installing-tailwind-css.png"/></noscript>
<p>要确认TailwindCSS的安装，请转到<code>web/src/index.css</code>并查看该文件中的Tailwind类。</p>
<h2 id="connecting-database">连接数据库</h2>
<p>为了连接Postgres数据库，我们将使用Docker进行本地开发。</p>
<p>(注意:要安装Docker，请参见Docker官方网站上的<a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener">文档</a>)</p>
<p>在根目录中创建<code>docker-utils/postgres-database.sh</code>,并添加以下脚本:</p>
<pre><code>#!/bin/bash

set -e
set -u

function create_user_and_database() {
        local database=$1
        echo "  Creating user and database '$database'"
        psql -v ON_ERROR_STOP=1 --username "$POSTGRES_USER" &lt;&lt;-EOSQL
            CREATE USER $database;
            CREATE DATABASE $database;
            GRANT ALL PRIVILEGES ON DATABASE $database TO $database;
EOSQL
}

if [ -n "$POSTGRES_MULTIPLE_DATABASES" ]; then
        echo "Multiple database creation requested: $POSTGRES_MULTIPLE_DATABASES"
        for db in $(echo $POSTGRES_MULTIPLE_DATABASES | tr ',' ' '); do
                create_user_and_database $db
        done
        echo "Multiple databases created"
fi
</code></pre>
<p>这个脚本实现了一个在Postgres中创建用户和数据库的函数。一旦创建了脚本，就可以使用<code>docker-compose up</code>来运行Postgres数据库。</p>
<p>创建<code>docker-compose.yml</code>并添加以下代码:</p>
<pre class="language-typescript hljs">version: "3.6"
services:
  postgres:
    image: postgres
    restart: unless-stopped
</pre>
<p>如果您想基于环境创建不同版本的<code>docker-compose up</code>，您也可以这样做。为此，创建<code>docker-compose.override.yml</code>并添加以下代码:</p>
<pre class="language-typescript hljs">version: "3"
services:
  postgres:
    image: postgres
    environment:
      - POSTGRES_USER=api
      - POSTGRES_PASSWORD=development_pass
      - POSTGRES_MULTIPLE_DATABASES="redwoodforum-api","redwoodforum-api-testing"
    volumes:
      - ./docker-utils:/docker-entrypoint-initdb.d
      - redwoodforum_api_data:/data/postgres
    ports:
      - 5440:5432
volumes:
  redwoodforum_api_data: {}
</pre>
<p>添加脚本后，可以使用以下命令运行数据库:</p>
<pre class="language-typescript hljs">docker-compose up
</pre>
<p><img data-attachment-id="128518" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/running-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database.png" data-orig-size="730,177" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database.png" decoding="async" class="aligncenter size-full wp-image-128518 jetpack-lazy-image" src="../Images/c87219c163ed20640522e2d5c05e14ee.png" alt="Running database" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/running-database-300x73.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="128518" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/running-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database.png" data-orig-size="730,177" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-128518" src="../Images/c87219c163ed20640522e2d5c05e14ee.png" alt="Running database" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/running-database-300x73.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/running-database.png"/></noscript>
<p>要将Redwood应用程序连接到Postgres，请将Prisma配置更改为PostgreSQL提供程序，并在环境变量中添加数据库URL。</p>
<p>转到<code>api/db/schema.prisma</code>，将数据库提供商更改为<code>postgresql</code>。在你的. env中添加<code>DATABASE_URL</code>。</p>
<pre class="language-typescript hljs"><code>DATABASE_URL=postgres://api:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4521203320292a3528202b311a3524363605292a2624292d2a3631">[email protected]</a>:5440/redwoodforum-api
</code></pre>
<h2 id="designing-database">设计数据库</h2>
<p>正如你在演示中看到的，我们想建立一个论坛。但是，在我们实现该功能之前，我们希望用户能够在我们的应用程序中完成以下关键工作:</p>
<ul>
<li>用户可以登录/注册该应用程序</li>
<li>一旦用户登录，他们可以在论坛中创建帖子</li>
<li>用户可以对任何帖子发表评论，所有者可以删除任何评论</li>
<li>用户可以查看他们的帖子，并进入主页查看所有帖子</li>
</ul>
<p>让我们为应用程序设计一个ER图。</p>
<p><img data-attachment-id="128520" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/er-diagram-application/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application.png" data-orig-size="730,422" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ER diagram" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application-300x173.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application.png" decoding="async" class="aligncenter size-full wp-image-128520 jetpack-lazy-image" src="../Images/4b28b245fa42fd3c612318ada0bc0bbe.png" alt="ER diagram for application depicts user comment and post" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application-300x173.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="128520" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/er-diagram-application/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application.png" data-orig-size="730,422" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ER diagram" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application-300x173.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-128520" src="../Images/4b28b245fa42fd3c612318ada0bc0bbe.png" alt="ER diagram for application depicts user comment and post" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application-300x173.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/er-diagram-application.png"/></noscript>
<p>这里我们有<code>user</code>、<code>post</code>和<code>comment</code>模式。</p>
<p><code>user</code>和<code>post</code>是一对多关系，<code>post</code>和<code>comment</code>是一对多关系，<code>comment</code>和<code>user</code>是一对一关系。</p>
<p>现在我们有了应用程序的ER图。让我们为数据库创建模式。为此，请访问<code>api/db/schema.prisma</code>。</p>
<p>(注:RedwoodJS使用Prisma作为数据库。如果你是Prisma world的新手，查看他们的<a href="https://www.prisma.io/docs/getting-started" target="_blank" rel="noopener">文档</a>了解更多信息)</p>
<p>现在，在Prisma文件中创建模式:</p>
<pre class="language-typescript hljs">model User {
  id           Int            @id @default(autoincrement())
  email        String         @unique
  name         String?
  hashedPassword     String
  salt String
  resetToken String?
  resetTokenExpiresAt DateTime?
  posts   Post[]
  comments Comment[]
}

model Post {
  id           Int            @id @default(autoincrement())
  title        String
  body         String
  comments     Comment[]
  author     User    @relation(fields: [authorId], references: [id])
  authorId   Int
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @default(now())
}

model Comment {
  id     Int    @id @default(autoincrement())
  body   String
  post   Post   @relation(fields: [postId], references: [id])
  postId Int
  author User   @relation(fields: [authorId], references: [id])
  authorId Int
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}
</pre>
<p>如您所见，我们在<code>User</code>、<code>Post</code>和<code>Comment</code>模式之间有一个关系。</p>
<p>在Prisma中定义一段关系很简单。可以参考<a href="https://www.prisma.io/docs/concepts/components/prisma-schema/relations/one-to-many-relations" target="_blank" rel="noopener">文档</a>了解更多细节。</p>
<p>一旦您在Prisma中定义了一个模式，您必须运行迁移以在Postgres中将这些模式创建为一个表。</p>
<h2 id="prisma-migration">棱镜迁移</h2>
<p>Prisma的一个特点是可以针对不同阶段管理迁移。这里，我们将只为开发运行迁移。为此，您可以使用以下命令:</p>
<pre class="language-typescript hljs">yarn redwood prisma migrate dev
</pre>
<p><img data-attachment-id="128522" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/enter-name-migration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration.png" data-orig-size="497,229" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Applying migration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration.png" decoding="async" class="aligncenter size-full wp-image-128522 jetpack-lazy-image" src="../Images/d4dfda57482e38ddfad8d480aa66d4b1.png" alt="Database now in sync with schema" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration.png 497w, https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration-300x138.png 300w" data-lazy-sizes="(max-width: 497px) 100vw, 497px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="128522" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/enter-name-migration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration.png" data-orig-size="497,229" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Applying migration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-128522" src="../Images/d4dfda57482e38ddfad8d480aa66d4b1.png" alt="Database now in sync with schema" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration.png 497w, https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration-300x138.png 300w" sizes="(max-width: 497px) 100vw, 497px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/enter-name-migration.png"/></noscript>
<p>要检查迁移是否成功，您可以进入Prisma Studio并查看迁移后的所有表格。通过访问<a href="http://localhost:5555" target="_blank" rel="noopener"> http://localhost:5555 </a>，可以看到所有的表和每个表中的列。</p>
<pre class="language-typescript hljs">yarn redwood prisma studio
</pre>
<p>现在，我们有了API和前端的数据库和模式，让我们为应用程序创建身份验证。</p>
<h2 id="authentication">证明</h2>
<p>RedwoodJS提供了开箱即用的身份验证。一个简单的CLI命令将为您提供让身份验证正常工作所需的一切。</p>
<pre class="language-typescript hljs">yarn rw setup auth dbAuth
</pre>
<p>它将创建一个<code>auth.ts</code>无服务器函数，检查cookie是否存在于数据库中以及令牌是否过期。然后，它将基于此的响应返回给客户端。</p>
<p>它还创建了<code>lib/auth.ts</code>来处理一些功能，比如从会话中获取当前用户、检查是否经过身份验证、要求身份验证等等。</p>
<p>到目前为止，我们已经有了API和数据库的认证功能。让我们为登录、注册和忘记密码创建页面。然后，您可以使用该命令来搭建登录、注册和忘记密码页面。</p>
<pre class="language-typescript hljs">yarn rw g dbAuth
</pre>
<p>它将创建所有用于身份验证的页面。您可以在<code>web/src/pages</code>查看这些页面。</p>
<p><img data-attachment-id="128524" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/pages-folder/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder.png" data-orig-size="247,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pages folder" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder-207x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder.png" decoding="async" class="aligncenter size-full wp-image-128524 jetpack-lazy-image" src="../Images/b870cd327d73a09c8e2efa9909c5f917.png" alt="Looking at files under pages folder in overall structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder.png 247w, https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder-207x300.png 207w" data-lazy-sizes="(max-width: 247px) 100vw, 247px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="128524" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/pages-folder/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder.png" data-orig-size="247,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pages folder" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder-207x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-128524" src="../Images/b870cd327d73a09c8e2efa9909c5f917.png" alt="Looking at files under pages folder in overall structure" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder.png 247w, https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder-207x300.png 207w" sizes="(max-width: 247px) 100vw, 247px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/pages-folder.png"/></noscript>
<p>为了设计页面的样式，您可以使用源代码中的组件，并根据您的喜好对它们进行定制。以下是实现中的完整登录页面:</p>
<p><img data-attachment-id="128526" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/login-page-5/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1.png" data-orig-size="730,415" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Login page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1-300x171.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1.png" decoding="async" class="aligncenter size-full wp-image-128526 jetpack-lazy-image" src="../Images/725f9a96d66718c585203b2b0b399590.png" alt="Login page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1-300x171.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="128526" data-permalink="https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/attachment/login-page-5/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1.png" data-orig-size="730,415" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Login page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1-300x171.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-128526" src="../Images/725f9a96d66718c585203b2b0b399590.png" alt="Login page" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1-300x171.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/login-page-1.png"/></noscript>
<p>为了连接登录和注册功能的API，RedwoodJS提供了钩子来完成所有的功能。</p>
<pre class="language-typescript hljs">import { useAuth } from '@redwoodjs/auth'

// provides login and signup functionality out of the box
const { isAuthenticated, signUp, logIn, logOut } = useAuth()
</pre>
<p>在表单<code>onSubmit</code>函数中，我们可以使用那个<code>signup</code>和<code>logIn</code>来发出API请求并发送有效载荷。</p>
<pre class="language-typescript hljs">const onSubmit = async (data) =&gt; {
    const response = await signUp({ ...data })

    if (response.message) {
      toast(response.message)
    } else if (response.error) {
      toast.error(response.error)
    } else {
      // user is signed in automatically
      toast.success('Welcome!')
    }
  }
</pre>
<p>一旦用户注册或登录，您就可以使用<code>currentUser</code>跨应用程序访问用户信息。</p>
<pre class="language-typescript hljs">const { currentUser } = useAuth()
</pre>
<p>现在，我们让用户登录到应用程序。接下来，让我们构建发布和评论的功能。</p>
<p>一旦用户登录，他们就进入主页，在那里我们需要显示论坛中的所有帖子。然后，用户可以创建新帖子并更新帖子。</p>
<p>要实现清单页面，请使用主页组件创建一个路由，并从API获取数据以在客户端显示。</p>
<p>幸运的是，RedwoodJS提供了为我们生成所有实现的脚手架。假设您想要搭建所有页面，包括GraphQL后端实现，您可以使用以下命令:</p>
<pre class="language-typescript hljs">yarn redwood g scaffold post
</pre>
<p>它将为帖子模型生成页面、SDL和服务。你可以在他们的<a href="https://redwoodjs.com/docs/cli-commands" target="_blank" rel="noopener">文档</a>中参考所有的RedwoodJS命令。</p>
<p>因为我们要定制页面。让我们只支持SDL和服务业。使用此命令:</p>
<pre class="language-typescript hljs">yarn redwood g sdl --typescript post
</pre>
<p>它将在<code>graphql/posts.sdl.ts</code>和<code>services/posts</code>中创建post域文件——让我们在web上创建页面。</p>
<p>即使我们定制了页面和组件，我们也不需要从头开始创建一切。相反，我们可以使用脚手架，并根据我们的需求对其进行修改。</p>
<p>让我们使用这个命令创建一个<strong>主页</strong>:</p>
<pre class="language-typescript hljs">yarn redwood g page home
</pre>
<p>它将创建一个主页并将该页面添加到<code>Routes.tsx</code>中。现在，您已经有了基本的主页组件。</p>
<p>现在，要在主页上列出所有的文章，您需要从API获取数据并在页面上显示。为了使这个过程更容易，RedwoodJS提供了细胞。单元格是一种声明性的数据获取方法——它执行GraphQL查询并管理其生命周期。</p>
<p>要生成单元格，请使用以下命令:</p>
<pre class="language-typescript hljs">yarn rw generate cell home
</pre>
<p>它将创建一个GraphQL查询及其生命周期:</p>
<pre class="language-typescript hljs">import type { FindPosts } from 'types/graphql'

import { Link } from '@redwoodjs/router'
import type {
  CellSuccessProps,
  CellFailureProps,
  CellLoadingProps,
} from '@redwoodjs/web'

export const QUERY = gql`
  query FindPosts {
    posts {
      id
      title
      body
      comments {
        id
      }
      createdAt
      updatedAt
    }
  }
`

export const Loading: React.FC&lt;CellLoadingProps&gt; = () =&gt; &lt;div&gt;Loading...&lt;/div&gt;

export const Empty = () =&gt; &lt;div&gt;No posts found&lt;/div&gt;

export const Failure = ({ error }: CellFailureProps) =&gt; (
  &lt;div&gt;Error loading posts: {error.message}&lt;/div&gt;
)

export const Success = ({ posts }: CellSuccessProps&lt;FindPosts&gt;) =&gt; {
  return (
    &lt;div&gt;
      &lt;ul&gt;
        {posts.map((post) =&gt; (
          &lt;li key={post.id}&gt;
            {' '}
            &lt;Link to={`/posts/${post.id}`}&gt;
              &lt;div className="p-2 my-2 rounded-lg shadow cursor-pointer"&gt;
                &lt;h4 className="text-xl font-medium"&gt;{post.title}&lt;/h4&gt;

                &lt;p&gt;{post.body}&lt;/p&gt;
              &lt;/div&gt;
            &lt;/Link&gt;
          &lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  )
}
</pre>
<h3 id="protected-route">受保护的路线</h3>
<p>为了保护RedwoodJS应用程序中的路线，您可以使用来自<code>@redwoodjs/router</code>的<code>Private</code>并将所有内容包装在路线中。</p>
<pre class="language-typescript hljs">&lt;Private unauthenticated="login"&gt;
        &lt;Set wrap={NavbarLayout}&gt;
          &lt;Set wrap={ContainerLayout}&gt;
            &lt;Route path="/new" page={NewpostPage} name="newpost" /&gt;
            &lt;Set wrap={SidebarLayout}&gt;
              &lt;Route path="/" page={HomePage} name="home" /&gt;
              // routes come here
            &lt;/Set&gt;
          &lt;/Set&gt;
        &lt;/Set&gt;
&lt;/Private&gt;
</pre>
<h2 id="creating-posts">创建帖子</h2>
<p>要创建新帖子，请使用以下命令搭建新帖子页面:</p>
<pre class="language-typescript hljs">yarn redwood g page newpost /new
</pre>
<p>如果您想定制路由URL，您可以在这里将其作为参数传递。RedwoodJS根据提供的名称添加路线。RedwoodJS提供了现成的表单和验证，</p>
<pre class="language-typescript hljs">import {
  FieldError,
  Form,
  Label,
  TextField,
  TextAreaField,
  Submit,
  SubmitHandler,
} from '@redwoodjs/forms'
</pre>
<p>一旦用户提交了表单，您就可以调用GraphQL变体来创建帖子。</p>
<pre class="language-typescript hljs">const CREATE_POST = gql`
  mutation CreatePostMutation($input: CreatePostInput!) {
    createPost(input: $input) {
      id
    }
  }
`
const onSubmit: SubmitHandler&lt;FormValues&gt; = async (data) =&gt; {
    try {
      await create({
        variables: {
          input: { ...data, authorId: currentUser.id },
        },
      })
      toast('Post created!')
      navigate(routes.home())
    } catch (e) {
      toast.error(e.message)
    }
  }
</pre>
<h2 id="post-details">帖子详细信息</h2>
<p>创建一个帖子详细信息页面和单元格，用于获取数据以查看帖子详细信息。你可以按照我们之前的流程来做。</p>
<pre class="language-typescript hljs">yarn redwood g page postdetails
</pre>
<p>这将在<code>routes.tsx</code>中创建页面和路径。要在路由中传递URL参数，可以像这样修改它:</p>
<pre class="language-typescript hljs">&lt;Route path="/posts/{id:Int}" page={PostDetails} name="postdetails" /&gt;
</pre>
<p>您可以将ID作为道具传递到组件中。然后，创建一个单元格来获取文章的详细信息，并将其呈现在组件内部。</p>
<pre class="language-typescript hljs">yarn redwood g cell post
</pre>
<p>添加以下代码以获取特定帖子的数据和评论:</p>
<pre class="language-typescript hljs">import type { FindPosts } from 'types/graphql'
import { format } from 'date-fns'
import { useAuth } from '@redwoodjs/auth'
import type {
  CellSuccessProps,
  CellFailureProps,
  CellLoadingProps,
} from '@redwoodjs/web'

export const QUERY = gql`
  query FindPostDetail($id: Int!) {
    post: post(id: $id) {
      id
      title
      body
      author {
        id
      }
      comments {
        id
        body
        author {
          id
          name
        }
        createdAt
      }
      createdAt
      updatedAt
    }
  }
`

export const Loading: React.FC&lt;CellLoadingProps&gt; = () =&gt; &lt;div&gt;Loading...&lt;/div&gt;

export const Empty = () =&gt; &lt;div&gt;No posts found&lt;/div&gt;

export const Failure = ({ error }: CellFailureProps) =&gt; (
  &lt;div&gt;Error loading posts: {error.message}&lt;/div&gt;
)

export const Success = ({ post }: CellSuccessProps&lt;FindPosts&gt;) =&gt; {
  const { currentUser } = useAuth()

  return (
    &lt;div&gt;
      &lt;div&gt;
        &lt;h2 className="text-2xl font-semibold"&gt;{post.title}&lt;/h2&gt;
        &lt;p className="mt-2"&gt;{post.body}&lt;/p&gt;
      &lt;/div&gt;

      &lt;div className="mt-4 "&gt;
        &lt;hr /&gt;
        &lt;h3 className="my-4 text-lg font-semibold text-gray-900"&gt;Comments&lt;/h3&gt;
        {post.comments.map((comment) =&gt; (
          &lt;div
            key={comment.id}
            className="flex justify-between sm:px-2 sm:py-2 border rounded-lg"
          &gt;
            &lt;div className="my-4 flex-1  leading-relaxed"&gt;
              &lt;strong&gt;{comment.author.name}&lt;/strong&gt;{' '}
              &lt;span className="text-xs text-gray-400"&gt;
                {format(new Date(comment.createdAt), 'MMM d, yyyy h:mm a')}
              &lt;/span&gt;
              &lt;p&gt;{comment.body}&lt;/p&gt;
            &lt;/div&gt;
            {currentUser &amp;&amp; currentUser.id === post.author.id &amp;&amp; (
              &lt;div className="m-auto"&gt;
                &lt;button
                  type="button"
                  className="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"
                &gt;
                  Delete
                &lt;/button&gt;
              &lt;/div&gt;
            )}
          &lt;/div&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}
</pre>
<p>这里需要注意的一点是检查登录用户是否是文章作者的条件。在这种情况下，我们提供了一个删除评论的选项。</p>
<h2 id="user-based-access">基于用户的访问</h2>
<p>为了在应用程序内部提供基于用户的访问，可以使用<code>useAuth</code>钩子获取当前用户，并向其添加条件。例如，要显示用户创建的帖子列表，您可以使用当前用户ID获取作者的帖子。</p>
<pre class="language-typescript hljs">const { currentUser } = useAuth()
</pre>
<p><code>MyPostCell.tsx</code></p>
<pre class="language-typescript hljs">import { Link } from '@redwoodjs/router'
import type { FindPosts } from 'types/graphql'
import type {
  CellSuccessProps,
  CellFailureProps,
  CellLoadingProps,
} from '@redwoodjs/web'

export const QUERY = gql`
  query FindMyPosts($id: Int!) {
    user: user(id: $id) {
      id
      name
      posts {
        id
        title
        body
      }
    }
  }
`

export const Loading: React.FC&lt;CellLoadingProps&gt; = () =&gt; &lt;div&gt;Loading...&lt;/div&gt;

export const Empty = () =&gt; &lt;div&gt;No posts found&lt;/div&gt;

export const Failure = ({ error }: CellFailureProps) =&gt; (
  &lt;div&gt;Error loading posts: {error.message}&lt;/div&gt;
)

export const Success = ({ user }: CellSuccessProps&lt;FindPosts&gt;) =&gt; {
  return (
    &lt;div&gt;
      &lt;ul&gt;
        {user.posts.map((post) =&gt; (
          &lt;li key={post.id}&gt;
            {' '}
            &lt;Link to={`/posts/${post.id}`}&gt;
              &lt;div className="shadow rounded-lg p-2 my-2 cursor-pointer"&gt;
                &lt;h4 className="text-xl font-medium"&gt;{post.title}&lt;/h4&gt;

                &lt;p&gt;{post.body}&lt;/p&gt;
              &lt;/div&gt;
            &lt;/Link&gt;
          &lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  )
}
</pre>
<h2 id="conclusion">结论</h2>
<p>RedwoodJS提供了开箱即用的一切。这完全是基于我们的需求来构建应用程序。一些重要的概念是单元、页面、Prisma模式和迁移，以及理解系统如何工作。</p>
<p>一旦你理解了RedwoodJS，你就可以用很少的时间构建一个全栈应用，就像我们在这篇文章中看到的那样。你可以在这里找到这个教程<a href="https://github.com/ganeshmani/fullstack-redwoodjs-tutorial" target="_blank" rel="noopener">的源代码。</a></p><div class="code-block code-block-28">
<div class="blog-plug inline-plug js-libraries-plug"><h2>您是否添加了新的JS库来提高性能或构建新特性？如果他们反其道而行之呢？</h2><p>毫无疑问，前端变得越来越复杂。当您向应用程序添加新的JavaScript库和其他依赖项时，您将需要更多的可见性，以确保您的用户不会遇到未知的问题。</p>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放JavaScript错误，就像它们发生在您自己的浏览器中一样，这样您就可以更有效地对错误做出反应。</p><a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/></noscript></a>
<a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>自信地构建— <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>