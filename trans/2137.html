<html>
<head>
<title>How to deploy a React Native app to the Google Play Store - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何将 React 原生应用部署到谷歌 Play 商店博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/#0001-01-01">https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/#0001-01-01</a></blockquote><div><article class="article-post">
<p>React Native 最重要的一个特点是，它可以为 Android 和 iOS 生成应用程序。在本教程中，我们将关注 Android，并演示如何生成<code>.apk</code>文件以成功部署在谷歌 Play 商店上。</p>
<p>以下是我们将要介绍的内容:</p>

<h2 id="digitally-signing-your-android-app">对您的 Android 应用进行数字签名</h2>
<p>谷歌 Play 商店是安卓应用的官方搜索引擎和数字分发平台。为了安全和加密，在发布应用程序之前必须对其进行数字签名。</p>
<p>要对应用程序进行签名，您需要一个哈希密钥，该密钥称为释放密钥。此密钥用于签署所有未来的更新，因此确保其安全非常重要；否则，您可能无法访问您的应用程序。</p>
<p>谷歌提供了一个选项，让它通过一个名为<a href="https://developer.android.com/studio/publish/app-signing#app-signing-google-play" target="_blank" rel="noopener">播放应用程序签名</a>的功能来管理您的签名密钥，这使您能够</p>
<ol>
<li>减少您的应用捆绑包大小</li>
<li>使用 Google 的复杂算法安全地存储签名密钥</li>
<li>允许用户在安全受到威胁时更新密钥</li>
</ol>
<p>谷歌 Play 商店还需要另一个密钥来上传 Android 应用程序，即上传密钥。</p>
<p>虽然发布密钥可以由 Google 生成和管理，但上传密钥由您生成并用于签署所有更新。如果你不想让 Google 为你生成一个发布密钥，那么你可以使用上传密钥作为发布密钥。不建议这样做，因为拥有不同的密钥更安全。</p>
<p>如果您碰巧丢失了上传密钥，您可以生成一个新的密钥，并联系 Google 支持人员<a href="https://support.google.com/googleplay/android-developer/answer/9842756?visit_id=637662435570044236-2680284147&amp;rd=1#reset" target="_blank" rel="noopener">重置密钥</a>。</p>
<h2 id="generating-an-upload-key">生成上传密钥</h2>
<p>您可以使用<a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html" target="_blank" rel="noopener"> Java keytool </a>生成上传密钥。</p>
<h3>对于 Windows</h3>
<p>Java SDK 提供了 keytool 实用程序，因此我们需要从那里运行它。检查 Java SDK 的安装位置。默认情况下，其位置如下:</p>
<pre>C:\Program Files\Java\jdkx.x.x_x\
</pre>
<p><code>x.x.x_x</code>代表版本号(在我的 PC 上是 1.8.0_152)。keytool 在<code>bin</code>文件夹中。第一步是迁移到终端中的这个位置:</p>
<pre>cd "c:\Program Files\Java\jdk1.8.0_152\bin"
</pre>
<p>接下来，使用一些已定义的选项运行 keytool:</p>
<pre>keytool -genkeypair -v -storetype PKCS12 -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000
</pre>
<p>让我们来分析一下这里发生了什么:</p>
<ul>
<li><code><a href="https://en.wikipedia.org/wiki/PKCS_12" target="_blank" rel="noopener">PKCS12</a></code>是一种存档文件格式，用于存储加密密钥。它代表公钥加密标准</li>
<li><code>my-upload-key.keystore</code>是生成文件的名称和扩展名。您可以在这里输入任何有效的名称</li>
<li><code>my-key-alias</code>是密钥的标识名。同样，您可以在这里输入任何有效的名称。请记住此别名，因为您将需要它来签署应用程序</li>
<li><code><a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)" target="_blank" rel="noopener">RSA</a></code>是一种广泛使用的基于私有-公共密钥的加密系统</li>
<li><code>2048</code>是将要生成的密钥的大小</li>
<li><code>validity</code>以天数表示密钥的有效性。在我们的命令中，我们将其保持在<code>10000</code></li>
</ul>
<p>当你运行这个 keytool 时，它会要求你输入密码。请记住此密码，因为你将需要使用它来进行应用程序签名。</p>
<p>除此之外，它还会多问几个问题，比如你的名字、地点、单位等等。回答完所有问题后，它将生成密钥库:</p>
<p><img data-attachment-id="65924" data-permalink="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/keystore-command-prompt/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt.jpeg" data-orig-size="730,425" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Keystore command prompt" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt-300x175.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt.jpeg" decoding="async" class="aligncenter size-full wp-image-65924 jetpack-lazy-image" src="../Images/77024d328981ff278da07bcfd448b1d1.png" alt="Keystore Command Prompt" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt-300x175.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65924" data-permalink="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/keystore-command-prompt/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt.jpeg" data-orig-size="730,425" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Keystore command prompt" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt-300x175.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-65924" src="../Images/77024d328981ff278da07bcfd448b1d1.png" alt="Keystore Command Prompt" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt-300x175.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/keystore-command-prompt.jpeg"/></noscript>
<p>您可以在当前终端位置找到生成的密钥库。我们在<code>bin</code>文件夹中:</p>
<p><img data-attachment-id="65926" data-permalink="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/bin-folder/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder.jpeg" data-orig-size="730,452" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Bin folder" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder-300x186.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder.jpeg" decoding="async" class="aligncenter size-full wp-image-65926 jetpack-lazy-image" src="../Images/94ad7efd4abd4acfa764ccc4244849f2.png" alt="Bin Folder" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder-300x186.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65926" data-permalink="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/bin-folder/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder.jpeg" data-orig-size="730,452" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Bin folder" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder-300x186.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-65926" src="../Images/94ad7efd4abd4acfa764ccc4244849f2.png" alt="Bin Folder" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder-300x186.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/bin-folder.jpeg"/></noscript>
<h3>对于 MacOS</h3>
<p>在 Mac 上生成上传密钥的过程与 Windows 非常相似。如果您不知道 Java SDK 的位置，请使用以下命令:</p>
<pre>/usr/libexec/java_home
</pre>
<p>这将打印位置，如下所示:</p>
<pre>/Library/Java/JavaVirtualMachines/jdkX.X.X_XXX.jdk/Contents/Home
</pre>
<p>使用<code>cd</code>移动到该位置并运行 keytool:</p>
<pre>sudo keytool -genkey -v -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000
</pre>
<h2 id="updating-gradle-files">更新 Gradle 文件</h2>
<p>成功生成密钥库之后，就该用密钥库信息更新 gradle 文件了，这样我们的应用程序就可以用它来签名了。</p>
<p>首先，将 keystore 文件从<code>bin</code>文件夹复制到 React Native app 的<code>android/app</code>文件夹:</p>
<p><img data-attachment-id="65928" data-permalink="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/copy-keystore-file/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file.jpeg" data-orig-size="357,726" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Copy keystore file" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file-148x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file.jpeg" decoding="async" class="aligncenter size-full wp-image-65928 jetpack-lazy-image" src="../Images/226951c46533bfa452b0a6873cf0b99a.png" alt="Copy Keystore File" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file.jpeg 357w, https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file-148x300.jpeg 148w" data-lazy-sizes="(max-width: 357px) 100vw, 357px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65928" data-permalink="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/copy-keystore-file/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file.jpeg" data-orig-size="357,726" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Copy keystore file" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file-148x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-65928" src="../Images/226951c46533bfa452b0a6873cf0b99a.png" alt="Copy Keystore File" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file.jpeg 357w, https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file-148x300.jpeg 148w" sizes="(max-width: 357px) 100vw, 357px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/copy-keystore-file.jpeg"/></noscript>
<p>接下来，打开<code>~/.gradle/gradle.properties</code>或<code>android/gradle.properties</code>，添加以下参照:</p>
<pre>MYAPP_UPLOAD_STORE_FILE=my-upload-key.keystore
MYAPP_UPLOAD_KEY_ALIAS=my-key-alias
MYAPP_UPLOAD_STORE_PASSWORD=*****
MYAPP_UPLOAD_KEY_PASSWORD=*****
</pre>
<p>将存储密码和密钥密码更改为您在创建密钥库时输入的密码:</p>
<p><img data-attachment-id="65930" data-permalink="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/change-password/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password.jpeg" data-orig-size="730,292" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Change password" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password-300x120.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password.jpeg" decoding="async" class="aligncenter size-full wp-image-65930 jetpack-lazy-image" src="../Images/c98b5051033fc46cd644fe6b4147bfb9.png" alt="Change Password" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/09/change-password-300x120.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65930" data-permalink="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/change-password/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password.jpeg" data-orig-size="730,292" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Change password" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password-300x120.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-65930" src="../Images/c98b5051033fc46cd644fe6b4147bfb9.png" alt="Change Password" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/09/change-password-300x120.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/change-password.jpeg"/></noscript>
<p>如果您运行的是 MacOS，并且不想以纯文本形式存储密码，您可以使用<a href="https://pilloxa.gitlab.io/posts/safer-passwords-in-gradle/" target="_blank" rel="noopener">钥匙串访问</a>并跳过 Gradle 中的密码栏。</p>
<p>在上面的步骤中，我们设置了变量。现在我们需要指导 Gradle 使用这些值。</p>
<p>打开<code>android/app/build.gradle</code>并用以下信息进行编辑:</p>
<pre>...
android {
    ...
    defaultConfig { ... }
    signingConfigs {
        release {
            if (project.hasProperty('MYAPP_UPLOAD_STORE_FILE')) {
                storeFile file(MYAPP_UPLOAD_STORE_FILE)
                storePassword MYAPP_UPLOAD_STORE_PASSWORD
                keyAlias MYAPP_UPLOAD_KEY_ALIAS
                keyPassword MYAPP_UPLOAD_KEY_PASSWORD
            }
        }
    }
    buildTypes {
        release {
            ...
            signingConfig signingConfigs.release
        }
    }
}
...
</pre>
<p><img data-attachment-id="65932" data-permalink="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/build-gradle/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle.jpeg" data-orig-size="730,463" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Build gradle" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle-300x190.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle.jpeg" decoding="async" class="aligncenter size-full wp-image-65932 jetpack-lazy-image" src="../Images/2029207554f853ac11af671c5c0c246c.png" alt="Build Gradle" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle-300x190.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65932" data-permalink="https://blog.logrocket.com/how-to-deploy-a-react-native-app-to-the-google-play-store/build-gradle/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle.jpeg" data-orig-size="730,463" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Build gradle" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle-300x190.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-65932" src="../Images/2029207554f853ac11af671c5c0c246c.png" alt="Build Gradle" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle-300x190.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/build-gradle.jpeg"/></noscript>
<h2 id="generating-the-apk-release-build">生成 APK 发布版本</h2>
<p>完成以上所有步骤后，您就可以生成发布版本了。进入 Android 目录并运行发布版本:</p>
<pre>cd android
./gradlew bundleRelease
</pre>
<p>该命令将创建一个<a href="https://developer.android.com/guide/app-bundle" target="_blank" rel="noopener"> AAB </a>格式的优化包。自 2021 年 8 月起，新应用必须在 AAB 发布。</p>
<p>借助这种格式，Google Play 可以为各种设备配置生成优化的 apk。这导致应用程序更小，因为资源是根据设备需求有选择地使用的。</p>
<h2 id="testing-the-release-build">测试发布版本</h2>
<p>如果您想测试您的发布版本，而不在您的手机上手动安装，您可以使用以下命令运行它:</p>
<pre>npx react-native run-android --variant=release
</pre>
<p>请确保您已经从手机中卸载了任何以前的版本；调试版本使用调试密钥签名，与发布版本不匹配。如果您尝试安装两者，React Native 将抛出一个错误。</p>
<h2>结论</h2>
<p>您可以从 Google Play 帐户轻松发布您的版本。对于一个新鲜的 app(不是现有 app 的更新)，需要填写一些必填信息，包括 app 名称、描述、类别、语言等。还要求截图和视频。</p>
<p>你需要完成一项评级调查，让谷歌知道你的应用程序是否适合给定的年龄范围。上传 AAB 时，Google 会要求您创建一个发布密钥，并允许您管理该密钥。这是你的最佳选择，因为你将来不需要担心它。</p>
<p>在本教程中，我们学习了如何为 Android 创建签名密钥和生成 AAB。如您所见，只需很少的配置就可以构建部署就绪的 Android 包。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>