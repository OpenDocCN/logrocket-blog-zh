<html>
<head>
<title>Building a VR app with React 360 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用 React 360 - LogRocket 博客构建 VR 应用</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-a-vr-app-with-react-360/#0001-01-01">https://blog.logrocket.com/building-a-vr-app-with-react-360/#0001-01-01</a></blockquote><div><article class="article-post">
<p>作为一名技术负责人，你可能知道虚拟现实及其各种应用。视频游戏、web 和移动应用程序等可以从 VR 的惊人功能中获益。</p>
<p>如果你的下一个开发目标是创建 VR 应用，并且你熟悉 React 生态系统，那么你很幸运。您现在可以使用<a href="https://github.com/facebookarchive/react-360" target="_blank" rel="noopener"> React 360 </a>和 JavaScript 开发令人惊叹的 VR 体验。</p>
<p>在本教程中，我们将向您展示如何使用 React 360 开发一个简单的交互式 React 虚拟现实应用程序。到最后，你应该准备好在 React 中构建你的第一个 VR 应用了。</p>
<p>我们将讨论以下内容:</p>

<h2 id="what-is-react-360">React 360 是什么？</h2>
<p>React 360 是一个库，它利用许多 React 原生功能来创建在您的 web 浏览器中运行的虚拟现实应用程序。它使用<a href="https://blog.logrocket.com/intro-to-three-js-for-game-developers/" target="_blank" rel="noopener"> Three.js </a>进行渲染，并以 npm 包的形式出现。通过将 WebGL 和 WebVR 等现代 API 与 React 的声明功能相结合，React 360 有助于简化创建跨平台 VR 体验的过程。</p>
<p>学习如何使用 React 360 是启动您的 VR 开发职业生涯的一个很好的方式。在本教程中，我们将涵盖所有基础知识，以帮助您开始使用 React 360。</p>
<h2 id="installing-react-360">安装 React 360</h2>
<p>首先也是最重要的，你需要安装<a href="https://www.npmjs.com/package/react-360-cli" target="_blank" rel="noopener"> React 360 CLI </a>。这将使您能够访问所有必要的命令，以帮助您开发虚拟现实应用程序。</p>
<p>现在，通过命令终端转到所需的文件夹，并运行以下命令:</p>
<pre>npm install -g react-360-cli</pre>
<p>这是一次性安装，所以您不必每次都这样做。位于项目文件夹中的好处是它使下面的步骤更容易。</p>
<p>安装完成后，创建一个名为<code>my-project</code>的新项目(创意吧？)和类型:</p>
<pre>react-360 init my-project</pre>
<p>您已经使用 React 360 成功创建了您的第一个虚拟现实应用程序。</p>
<p>要在浏览器中查看应用程序，请通过终端导航至<code>my-project</code>文件夹，然后运行<code>npm start</code>。这将在浏览器中引导您到达目的地。或者，您可以通过跟随<code><a href="http://localhost:8081/index.html" rel="nofollow">http://localhost:8081/index.html</a></code>来访问输出。</p>
<p>这个应用程序应该是这样的:</p>
<figure id="attachment_59029" aria-describedby="caption-attachment-59029" class="wp-caption aligncenter"><img data-attachment-id="59029" data-permalink="https://blog.logrocket.com/building-a-vr-app-with-react-360/welcome-to-react-360/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Welcome to React 360" data-image-description="" data-image-caption="&lt;p&gt;ddd&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360.png" decoding="async" class="size-full wp-image-59029 jetpack-lazy-image" src="../Images/ed64ea9ab86be84692a6d6eb1c634127.png" alt="Welcome to React 360 Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="59029" data-permalink="https://blog.logrocket.com/building-a-vr-app-with-react-360/welcome-to-react-360/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Welcome to React 360" data-image-description="" data-image-caption="&lt;p&gt;ddd&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360.png" decoding="async" loading="lazy" class="size-full wp-image-59029" src="../Images/ed64ea9ab86be84692a6d6eb1c634127.png" alt="Welcome to React 360 Example" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/welcome-to-react-360.png"/></noscript><figcaption id="caption-attachment-59029" class="wp-caption-text"><a href="https://icpsoni.medium.com/creating-360-and-vr-website-with-react-360-c33a99e73e83" target="_blank" rel="noopener">React 360 Template Screen</a></figcaption></figure>
<p>既然你已经安装并运行了这个应用程序，让我们来详细讨论一下代码。我们将使用的两个重要文件是<code>client.js</code>和<code>index.js</code>。<code>index.js</code>文件由四部分组成:</p>
<ul>
<li>班级</li>
<li>进口</li>
<li>风格</li>
<li>组件注册表</li>
</ul>
<p>我们正在导入 React 以使用它的类功能。我们将从 React 360 收集一些零件来构建一个 VR 环境:</p>
<pre>import React from 'react';

import {
  AppRegistry,
  StyleSheet,
  Text,
  View,
} from 'react-360';

export default class my_project extends React.Component {
  render() {
    return (
      
        
          
            Welcome to React 360
          
        
      
    );
  }
};

const styles = StyleSheet.create({
  panel: {
    width: 1000,
    height: 600,
    backgroundColor: 'rgba(255, 255, 255, 0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  greetingBox: {
    padding: 20,
    backgroundColor: '#000000',
    borderColor: '#639dda',
    borderWidth: 2,
  },
  greeting: {
    fontSize: 30,
  },
});

AppRegistry.registerComponent('my_project', () =&gt; my_project);
</pre>
<p>类语法和组件分别与 React 和 React Native 非常相似。组件允许你渲染虚拟世界的各个方面，如果你愿意的话，还可以玩玩外观和感觉。属性和 T2 将帮助你做到这一点。这里有许多相似之处来反应本机和 CSS 功能。</p>
<p>对于<code>Text</code>组件，您可以创建动态文本来为用户显示各种数据。最后，该类需要注册到客户端进行呈现。</p>
<p>你会注意到<code>client.js</code>文件中的<code>init</code>函数为你的项目创建了一个新的实例，然后利用<code>index.js</code>文件中的类为这个项目分配一个渲染方法。之后，将项目环境应用于全景图像，然后执行<code>init</code>功能。</p>
<pre>import {ReactInstance} from 'react-360-web';

function init(bundle, parent, options = {}) {
  const r360 = new ReactInstance(bundle, parent, {
    fullScreen: true,
    ...options,
  });

  r360.renderToSurface(
    r360.createRoot('my_project', { }),
    r360.getDefaultSurface()
  );

  r360.compositor.setBackground(r360.getAssetURL('simmes-start-screen.jpg'));
}

window.React360 = {init};
</pre>
<p>这些是 React 360 功能的基础，你可以很好地进行你的第一个 VR 应用程序开发。既然你已经知道了一个 React VR app 是如何制作的，那就让我们通过一些步骤来定制它吧。</p>
<h2 id="adding-background-assets">添加背景资产</h2>
<p>您可以使用 React 360 将任何全景图像应用到 VR 背景。对于本教程，我们使用一个 Simmes 免费图像；你可以使用任何你喜欢的图像。</p>
<p>要使用全景图像作为背景，将所需图像添加到<code>static_assets</code>文件夹。该文件夹包含所有静态资产，如图片、音乐和模型，React 360 在此搜索它们。</p>
<p>使用下面的命令更新背景:</p>
<pre>r360.compositor.setBackground(r360.getAssetURL('simmes-start-screen.jpg'));</pre>
<h2 id="vr-interactions">虚拟现实互动</h2>
<p>任何应用程序最重要和最吸引人的方面之一就是交互。没有交互，一个 app 是没有生命的。通过将<code>VrButton</code>组件添加到<code>index.js</code>文件的导入中，您可以将这一重要功能添加到 React VR 应用程序中，如下所示:</p>
<pre>import {
  AppRegistry,
  StyleSheet,
  Text,
  View,
  VrButton
} from 'react-360';
</pre>
<p>接下来，添加一个计数器来记录点击次数。首先将点击计数设置为零:</p>
<pre>state = {
  count: 0
};</pre>
<p>下一步是编写一个增量函数:</p>
<pre>_incrementCount = () =&gt; {
  this.setState({
    count: this.state.count + 1
  })
}</pre>
<p>最后，我们将把<code>VrButton</code>渲染成这样:</p>
<pre>&lt;View style={styles.panel}&gt;
        &lt;VrButton
          onClick={this._incrementCount}
          style={styles.greetingBox}&gt;
          &lt;Text style={styles.greeting}&gt;
            {`You have visited Simmes ${this.state.count} times`}
          &lt;/Text&gt;
        &lt;/VrButton&gt;
&lt;/View&gt;</pre>
<p>您已经成功设置了按钮，现在您可以看到访问您的虚拟世界的人数。</p>
<h2 id="adding-immersive-sounds">添加身临其境的声音</h2>
<p>并非您创建的所有应用程序都需要声音。然而，当涉及到游戏、视频和其他沉浸式体验时，声音是必不可少的。</p>
<p>为了给我们的 VR 应用添加声音，我们需要从 React 360 获取更多的东西。</p>
<pre>import {
  asset,
  AppRegistry,
  NativeModules,
  StyleSheet,
  Text,
  View,
  VrButton
} from 'react-360';</pre>
<p>下一步是从<code>NativeModules </code>导入<code>AudioModule</code>，并设置一个新的<code>const</code>:</p>
<pre>const { AudioModule } = NativeModules;</pre>
<p>一旦新的<code>const</code>被设置，我们可以添加特定的功能到声音播放的方式中。例如，我们可以让它在点击按钮时开始播放，在再次点击按钮时停止播放。</p>
<p>为了实现这一点，我们将向状态添加一个布尔值:</p>
<pre>state = {
  count: 0,
  playSound: false
};</pre>
<p>最后，我们将编写另一个函数来管理声音播放的方式:</p>
<pre>_playSound = () =&gt; {
    this.setState({
      playSound: !this.state.playSound
    });

    if (this.state.playSound) {
      AudioModule.createAudio('sza', {
        source: asset('brokenclocks.mp3'),
        volume: 0.5
      });

      AudioModule.play('sza');
    }
    else {
      AudioModule.stop('sza');
    }
  }</pre>
<p>一旦执行，该函数将升级设置为<code>false</code>的<code>playSound</code>状态。声音播放的方式将取决于分配给<code>playSound</code>的值。为了让它播放，必须通过<code>createAudio</code>组件创建一个音频实例。</p>
<p>创建后，您可以通过指定的名称播放音频。这仅在<code>playSound</code>被设置为<code>true</code>时发生。当它是<code>false</code>时，声音停止播放。这就是为什么我们每次在<code>playSound</code>是<code>true</code>的时候都会创建一个新的实例。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>我们现在将创建一个按钮来开始和停止播放声音。下面是代码的样子:</p>
<pre>&lt;View style={styles.panel}&gt;
 &lt;VrButton
    onClick={this._incrementCount}
    style={styles.greetingBox}&gt;
    &lt;Text style={styles.greeting}&gt;
     {`You have visited Simmes ${this.state.count} times`}
  &lt;/Text&gt;
 &lt;/VrButton&gt;
 &lt;VrButton
   onClick={this._playSound}
   style={styles.greetingBox}&gt;
   &lt;Text style={styles.greeting}&gt;
     {'You can play the music of your people'}
   &lt;/Text&gt;
  &lt;/VrButton&gt;
&lt;/View&gt;</pre>
<p>您的 VR 应用程序现已完成！让我们运行应用程序，看看它看起来怎么样。</p>
<h2 id="running-your-react-vr-application">运行 React VR 应用程序</h2>
<p>您可以通过<code>run npm start</code>命令查看应用程序。您的第一个 React VR 应用程序名为“我的项目”，应该包含您选择的背景和两个按钮。一个按钮控制音频，另一个按钮记录访问应用程序的用户数量。</p>
<p>你现在可以邀请你的朋友和家人一起玩你的新 VR 应用程序，并与其他程序员一起为应用程序集思广益。可能性是无限的。</p>
<p>希望这篇教程能帮助你更好地理解 React 360。</p>
<p>告诉我们您使用 React 360 的体验。你认为创建 VR 应用程序的最佳方式是什么？我们希望收到您的来信。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产 React 应用</h2><p>调试 React 应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪 Redux 状态、自动显示 JavaScript 错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的 web 和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket 不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试 React 应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>