<html>
<head>
<title>Guide to version management with changesets </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>带有变更集的版本管理指南</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/version-management-changesets/#0001-01-01">https://blog.logrocket.com/version-management-changesets/#0001-01-01</a></blockquote><div><article class="article-post">
<p>升级软件包通常是开发软件最令人沮丧的方面之一。含糊不清的发行说明会使过程陷入困境和混乱。</p>
<p>包维护者使用一种叫做<a href="https://semver.org/">语义版本化</a> (semver)的模式来描述新版本中的变化。semver告诉消费应用程序如何处理更新。如果一个项目很小，维护人员很容易为一个版本选择semver类型。对于小项目来说，执行其他任务，比如编写发布说明，也很快。但是，随着项目越来越大，这种类型的工作会变得非常耗时。</p>
<p>例如，<a href="https://blog.logrocket.com/end-to-end-testing-react-jest-puppeteer/"> Jest是一个大型的monorepo </a>，其中的包相互依赖，是公共的，并且是单独消费的。随着pull请求的频繁合并，Jest维护人员常常很难弄清楚在一个包版本中发布了什么。</p>
<p>维护人员需要跟踪合并变更，记录应用程序应该如何升级，更新存储库中的包，并发布包。变更集是最重要的工具之一，旨在简化monorepos的版本管理和变更日志。</p>
<p>在本文中，我们将介绍变更集，并回顾一个例子来更好地说明使用变更集进行版本管理的好处。</p>
<p>我们开始吧！</p>
<p><em>向前跳转:</em></p>

<h2 id="what-is-the-role-of-changesets">变更集的作用是什么？</h2>
<p>在不使用工具的情况下，维护人员可以在拉式请求描述中提供清单，以提醒贡献者向他们的变更添加细节。维护者的目标是鼓励许多贡献，并希望使它们无缝和简单。这种方法的目标是减轻维护人员的负担，减轻他们的工作量。</p>
<p>除了当评论者遗漏某些东西时，这种策略是有效的。在这些情况下，维护人员仍然有工作要做。当多个拉请求被合并时，维护者必须将所有内容合并到一个单一的版本/文档中。他们可能很少有关于拉请求的上下文，因为在合并和包发布之间可能有几个星期。</p>
<p>changesets是一个帮助monorepos进行版本管理的工具。它为贡献者提供了一个CLI界面来描述他们在拉请求中的更改以及semver bump类型。这些信息被恰当地称为“变更集”。</p>
<p>该工具用于执行版本控制，包括使用自上一个版本以来的所有“变更集”,确定最大semver bump类型，更新变更日志，以及更新适当的内部包。被卖方收回的汽车</p>
<h2 id="sample-scenario-handling-codebase-changes">示例场景:处理基本代码更改</h2>
<p>为了展示使用变更集的能力和优势，让我们看看在有和没有变更集的情况下，如何处理对代码库的不同变更。</p>
<p>对于我们的例子，我们将考虑一个专门为宠物店开发的开源电子商务商店平台。应用程序背后的团队很难组织代码，他们希望让部分代码库更适用于不同的应用程序。</p>
<p>他们认为创建单一回购将是一个合适的解决方案。因此，他们将他们认为通用的代码片段分成不同的包:</p>
<figure id="attachment_151775" aria-describedby="caption-attachment-151775" class="wp-caption aligncenter"><img data-attachment-id="151775" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/pet-store-monorepo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/pet-store-monorepo.png" data-orig-size="273,228" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pet store Monorepo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/pet-store-monorepo.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/pet-store-monorepo.png" decoding="async" class="wp-image-151775 size-full jetpack-lazy-image" src="../Images/11284688a9d1ffd475eb96247af08aec.png" alt="Pet Store Monorepo" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/pet-store-monorepo.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/pet-store-monorepo.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="151775" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/pet-store-monorepo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/pet-store-monorepo.png" data-orig-size="273,228" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pet store Monorepo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/pet-store-monorepo.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/pet-store-monorepo.png" decoding="async" loading="lazy" class="wp-image-151775 size-full" src="../Images/11284688a9d1ffd475eb96247af08aec.png" alt="Pet Store Monorepo" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/pet-store-monorepo.png"/></noscript><figcaption id="caption-attachment-151775" class="wp-caption-text">The pet store monorepo.</figcaption></figure>
<p>像<code>ordering</code>这样的包在代码库之外被采用。这个特殊的包通过处理商店中商品的订购，使其他开发人员的工作变得更加轻松。在接下来的一周里，核心团队的开发人员和外部贡献者对包进行修改。</p>
<p>内部开发人员添加了一个新功能，可以轻松更新商品库存:</p>
<pre class="language-javascript hljs">// Updates the stock of an item in the database
export function updateStock(item, quantity) {}
</pre>
<p>这一变化需要一个小的改动，因为获得这一更新的应用程序或软件包可以安全地升级，而不需要对任何现有的API进行重大更改。</p>
<p>这不是唯一发生的变化。一个外部贡献者报告了一个严重的错误，在添加项目时,<code>sku</code>无法输入到数据库中。因此，<code>sku</code>被添加为<code>addItem</code>功能的必填字段:</p>
<pre class="language-javascript hljs">// old
export function addItem(item) {}
// new
export function addItem(item, sku) {}
</pre>
<p>这一改变需要一个大的改动，因为应用程序或软件包必须修改代码才能安全地升级到这个新版本。</p>
<p>让我们看看这两个变更是如何被释放的，无论是没有变更集的还是有变更集的。</p>
<h3 id="without-changesets">没有变更集</h3>
<p>在最近的一个版本之后，一个外部开发人员打开了对monorepo包<code>ordering</code>的pull请求，以添加一个新特性:</p>
<figure id="attachment_151778" aria-describedby="caption-attachment-151778" class="wp-caption aligncenter"><img data-attachment-id="151778" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/github-pull-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request.png" data-orig-size="730,530" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="GitHub pull request" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request-300x218.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request.png" decoding="async" class="wp-image-151778 size-full jetpack-lazy-image" src="../Images/a3fd8f578c12e569480e8fb11269f9dd.png" alt="GitHub Pull Request Containing New Utility Function" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request-300x218.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="151778" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/github-pull-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request.png" data-orig-size="730,530" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="GitHub pull request" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request-300x218.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request.png" decoding="async" loading="lazy" class="wp-image-151778 size-full" src="../Images/a3fd8f578c12e569480e8fb11269f9dd.png" alt="GitHub Pull Request Containing New Utility Function" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request-300x218.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/github-pull-request.png"/></noscript><figcaption id="caption-attachment-151778" class="wp-caption-text">GitHub pull request containing the new utility function.</figcaption></figure>
<p>仓库的维护者很高兴，但是注意到贡献者没有在pull请求中更新发布说明。这在指南中有所概述，但是贡献者有时会因为急于及时地做出改变而忽略了这一点。</p>
<p>维护者要求贡献者添加注释:</p>
<figure id="attachment_151780" aria-describedby="caption-attachment-151780" class="wp-caption aligncenter"><img data-attachment-id="151780" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/comment-by-repositorys-maintainer/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer.png" data-orig-size="730,128" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Comment by repository’s maintainer" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer-300x53.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer.png" decoding="async" class="wp-image-151780 size-full jetpack-lazy-image" src="../Images/1bba0e2aa4c12ea8688649773a3b0b5a.png" alt="Comment by a Repository's Maintainer" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer-300x53.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="151780" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/comment-by-repositorys-maintainer/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer.png" data-orig-size="730,128" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Comment by repository’s maintainer" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer-300x53.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer.png" decoding="async" loading="lazy" class="wp-image-151780 size-full" src="../Images/1bba0e2aa4c12ea8688649773a3b0b5a.png" alt="Comment by a Repository's Maintainer" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer-300x53.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/comment-by-repositorys-maintainer.png"/></noscript><figcaption id="caption-attachment-151780" class="wp-caption-text">A comment by the repository’s maintainer.</figcaption></figure>
<p>这种变化，以及其他的变化，被合并在一起，维护者在几个星期后发布这个包。</p>
<p>作为这个过程的一部分，维护人员需要弄清楚semver凸起类型。他们还需要检查每一个拉取请求，看看是否有任何突破性的变化、特性添加或错误修复。</p>
<p>在这种情况下，维护人员发现<code>addItem</code>变更增加了<code>sku</code>，并决定需要一个完整的版本冲击。作为发布的一部分，他们需要找到依赖于<code>ordering</code>包的每个包，比如<code>pet-store</code>应用，并将其从1.0.0版升级到2.0.0版。维护者的任务是升级应用以适应变化。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p>这个过程需要一段时间，因为贡献者没有提供太多的书面文档。接下来，维护人员必须创建一个changelog条目，再次检查自上次发布以来合并的所有pull请求。</p>
<p>这项工作，可能还有其他任务，很麻烦，容易出错，并且使维护人员的工作很乏味。</p>
<h3 id="with-changesets">使用变更集</h3>
<p>对于变更集，这个过程看起来有点不同。</p>
<p>当一个贡献者做出变更时，他们运行<code>yarn changeset</code>并创建一个“变更集”。它们描述了新的<code>updateStock</code>函数，消费包如何使用它，哪个包受到了变化的影响，以及semver bump类型。然后，他们推送变更并打开一个拉取请求:</p>
<figure id="attachment_151782" aria-describedby="caption-attachment-151782" class="wp-caption aligncenter"><img data-attachment-id="151782" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/changeset-file-pull-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request.png" data-orig-size="730,250" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Changeset file pull request" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request-300x103.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request.png" decoding="async" class="wp-image-151782 size-full jetpack-lazy-image" src="../Images/3f3f1f3a29a91fada08664afd6a43ba5.png" alt="Changeset File Pull Request" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request-300x103.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="151782" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/changeset-file-pull-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request.png" data-orig-size="730,250" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Changeset file pull request" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request-300x103.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request.png" decoding="async" loading="lazy" class="wp-image-151782 size-full" src="../Images/3f3f1f3a29a91fada08664afd6a43ba5.png" alt="Changeset File Pull Request" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request-300x103.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/changeset-file-pull-request.png"/></noscript><figcaption id="caption-attachment-151782" class="wp-caption-text">The “changeset” file inside the pull request.</figcaption></figure>
<p>维护人员简单地审查拉取请求并将其合并；没有问题问！“变更集”文件包含了简化发布过程所需的一切。</p>
<p>之后，会有额外的拉请求进来，包括一个主要版本的提升。这是由于<code>addItem</code>增加了<code>sku</code>参数:</p>
<pre class="language-javascript hljs">---
"changesets-package-ordering": major
---
Add sku argument to addItem function
The `sku` argument was added to the `addItem` function. It is a required argument due to changing business needs.
Example usage:
...
</pre>
<p>现在维护者准备发布下一个版本的<code>ordering</code>包。为此，他们需要做的就是运行<code>yarn changeset version</code>命令。</p>
<p>该命令删除所有本地“变更集”文件，创建changelog条目，并自动在包本身和包依赖项中碰撞<code>ordering</code>包的版本，如<code>pet-store</code>应用程序:</p>
<pre class="language-javascript hljs">## 2.0.0
### Major Changes
- ea13cc5: Add sku argument to addItem function
  The `sku` argument was added to the `addItem` function. It is a required argument due to changing business needs.
### Minor Changes
- 7034f8a: Add the updateStock utility function
  The `updateStock` utility function is used by applications to update the stock of an item.
</pre>
<p>由于贡献者必须为他们的突破性变化提供详细的文档，维护者很容易升级<code>pet-store</code>应用程序以符合这些变化。</p>
<p>在变更集的帮助下，维护人员能够轻松快速地创建一个版本，并以标准化和可复制的方式在monorepo中更新应用程序。</p>
<h2 id="automating-changesets">自动化变更集</h2>
<p>我们希望确保贡献者和维护者始终遵循正确的步骤。这就是自动化可以使变更集工作更加容易的地方。</p>
<p>例如，我们可以通过安装<a href="https://github.com/apps/changeset-bot">变更集GitHub Bot </a>来确保贡献者总是创建一个“变更集”。当“变更集”丢失时，该bot将对拉请求进行注释，如下所示:</p>
<figure id="attachment_151784" aria-describedby="caption-attachment-151784" class="wp-caption aligncenter"><img data-attachment-id="151784" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/changesets-github-bot-comment/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment.png" data-orig-size="730,297" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Changesets GitHub bot comment" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment-300x122.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment.png" decoding="async" class="wp-image-151784 size-full jetpack-lazy-image" src="../Images/390a425983fc081289186bb503ef5377.png" alt="Changesets GitHub Bot Comment" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment-300x122.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="151784" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/changesets-github-bot-comment/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment.png" data-orig-size="730,297" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Changesets GitHub bot comment" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment-300x122.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment.png" decoding="async" loading="lazy" class="wp-image-151784 size-full" src="../Images/390a425983fc081289186bb503ef5377.png" alt="Changesets GitHub Bot Comment" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment-300x122.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/changesets-github-bot-comment.png"/></noscript><figcaption id="caption-attachment-151784" class="wp-caption-text">changesets GitHub Bot commenting on our example pull request.</figcaption></figure>
<p>另一种确保没有“变更集”的拉请求不能被合并的方法是在GitHub动作中运行<code>yarn changeset status</code>命令。如果参与者忘记添加“变更集”，操作将失败:</p>
<figure id="attachment_151786" aria-describedby="caption-attachment-151786" class="wp-caption aligncenter"><img data-attachment-id="151786" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/action-failing/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing.png" data-orig-size="730,273" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Action failing" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing-300x112.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing.png" decoding="async" class="wp-image-151786 size-full jetpack-lazy-image" src="../Images/9b186d1f104c73eef1ecf0c653ecbc4c.png" alt="Action Failing Due to Lack of a Changeset" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing-300x112.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="151786" data-permalink="https://blog.logrocket.com/version-management-changesets/attachment/action-failing/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing.png" data-orig-size="730,273" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Action failing" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing-300x112.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing.png" decoding="async" loading="lazy" class="wp-image-151786 size-full" src="../Images/9b186d1f104c73eef1ecf0c653ecbc4c.png" alt="Action Failing Due to Lack of a Changeset" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing-300x112.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/action-failing.png"/></noscript><figcaption id="caption-attachment-151786" class="wp-caption-text">An action failing when a contributor doesn’t add a changeset.</figcaption></figure>
<p>当一个新版本准备好被创建时，维护人员可以利用<code>changesets</code> GitHub动作进一步自动化这个步骤。这个操作将运行前面提到的<code>yarn changeset version</code>命令，并创建一个包含所有文件更改的pull请求。</p>
<h2 id="conclusion">结论</h2>
<p>使用changesets包消除了许多使发布过程成为维护者负担的步骤。有了变更集，贡献者可以被提醒详细记录他们的变更，维护者可以使用一个CLI命令轻松地创建新版本的包。高质量、周期性的软件包发布也为消费者的升级过程提供了便利。</p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>