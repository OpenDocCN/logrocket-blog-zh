<html>
<head>
<title>Using Recharts in React to add charts - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 React 中使用 Recharts 添加图表</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-recharts-react-add-charts/#0001-01-01">https://blog.logrocket.com/using-recharts-react-add-charts/#0001-01-01</a></blockquote><div><article class="article-post">
<p>如今，可视化是必不可少的，你如何呈现信息也很重要。由于手头有大量的数据，整理和理解这些数据通常会很繁琐，尤其是在没有很好地呈现的情况下。</p>
<p>为了让数据更容易理解，图表是组织和可视化数据的好方法。对于 React 应用程序，开发人员可以使用基于 JavaScript 的开源“基于 React 组件构建的可组合图表库”Recharts。</p>
<p>在本教程中，我们将通过构建一个小型 React 应用程序来学习如何使用 Recharts，该应用程序从一个健全的内容湖中获取数据，以一种视觉上吸引人的方式汇总大量数据集。</p>
<h2>Recharts 教程要求</h2>
<p>要学习本教程，您必须具备以下条件:</p>
<ul>
<li>安装在计算机上的 Node.js v14</li>
<li>代码编辑器(我使用的是<a href="https://blog.logrocket.com/top-10-vs-code-extensions-2021/"> Visual Studio 代码</a></li>
<li>纱线包装经理</li>
</ul>
<h2>设置 Recharts 项目</h2>
<p>要开始我们的项目，我们必须首先在我们的机器上安装 Sanity CLI，这可以通过运行以下命令来完成:</p>
<pre>yarn install -g @sanity/cli
</pre>
<p>这将全局安装命令行工具，以设置新项目、管理数据集、导入数据等。我们将使用它来启动和运行我们的项目。</p>
<p>关于这方面的更多信息，请阅读健全性文档。</p>
<h3>创建健全项目</h3>
<p>接下来，我们必须开始我们的理智项目。为此，请运行以下命令:</p>
<pre>sanity init
</pre>
<p>上面的命令将要求您选择您的登录类型:或者<code>Google</code>、<code>GitHub</code>、<code>Email/password</code>。</p>
<p><img data-attachment-id="76190" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/selecting-login-type/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type.jpeg" data-orig-size="730,464" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Selecting login type" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type-300x191.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type.jpeg" decoding="async" class="aligncenter size-full wp-image-76190 jetpack-lazy-image" src="../Images/6e0188921a90c7f276051511260f2d56.png" alt="Selecting Login Type" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type-300x191.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76190" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/selecting-login-type/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type.jpeg" data-orig-size="730,464" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Selecting login type" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type-300x191.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76190" src="../Images/6e0188921a90c7f276051511260f2d56.png" alt="Selecting Login Type" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type-300x191.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Selecting-login-type.jpeg"/></noscript>
<p>您可以为您的项目选择最方便的浏览器，它会立即打开您的默认浏览器并完成注册/登录过程。</p>
<p><img data-attachment-id="76192" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/login-successful/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful.jpeg" data-orig-size="730,376" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Login successful" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful-300x155.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful.jpeg" decoding="async" class="aligncenter size-full wp-image-76192 jetpack-lazy-image" src="../Images/ebb7bf0eab31577549173a0aed9b1ae2.png" alt="Login Successful Screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful-300x155.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76192" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/login-successful/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful.jpeg" data-orig-size="730,376" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Login successful" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful-300x155.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76192" src="../Images/ebb7bf0eab31577549173a0aed9b1ae2.png" alt="Login Successful Screen" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful-300x155.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Login-successful.jpeg"/></noscript>
<p>回到您的终端，系统将提示您:</p>
<ul>
<li>导入您喜欢的项目名称</li>
<li>选择数据集首选项(使用默认值)</li>
<li>确认项目的路径</li>
<li>选择一个模式</li>
</ul>
<p>在发表本文时，Sanity 只提供了三种现成的、已经填充好的模式:<code>Movie project (schema + sample data)</code>、<code>E-commerce (Schema + sample data)</code>和<code>Blog(schema + empty data)</code>。</p>
<p>然而，对于这个项目，我们必须选择<code>Clean project with no predefined schemas</code>选项，因为我们必须自己定义我们的模式。</p>
<p><img data-attachment-id="76194" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/defining-schemas/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas.jpeg" data-orig-size="730,442" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Defining schemas" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas-300x182.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas.jpeg" decoding="async" class="aligncenter size-full wp-image-76194 jetpack-lazy-image" src="../Images/b49a135a74acad5789b221b03c8ab5f6.png" alt="Defining Schemas in VS Code" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas-300x182.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76194" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/defining-schemas/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas.jpeg" data-orig-size="730,442" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Defining schemas" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas-300x182.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76194" src="../Images/b49a135a74acad5789b221b03c8ab5f6.png" alt="Defining Schemas in VS Code" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas-300x182.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Defining-schemas.jpeg"/></noscript>
<p>安装完成后，我们可以看到在项目文件夹中创建的文件和文件夹。要启动 Sanity，请运行以下命令:</p>
<pre>sanity start
</pre>
<p><img data-attachment-id="76196" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/starting-sanity/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity.png" data-orig-size="730,385" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Starting Sanity" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity-300x158.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity.png" decoding="async" class="aligncenter size-full wp-image-76196 jetpack-lazy-image" src="../Images/3c0094a48d86007a5bcec85fc8bcd601.png" alt="Starting Sanity in VS Code" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity-300x158.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76196" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/starting-sanity/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity.png" data-orig-size="730,385" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Starting Sanity" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity-300x158.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76196" src="../Images/3c0094a48d86007a5bcec85fc8bcd601.png" alt="Starting Sanity in VS Code" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity-300x158.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Starting-Sanity.png"/></noscript>
<p>接下来，我们必须安装必要的节点模块，编译，并在<a href="http://localhost:3333/"> http://localhost:3333 </a>启动项目。登录时，请确保选择了创建项目时使用的同一提供商。</p>
<p><img data-attachment-id="76198" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/installing-modules/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Installing modules" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules.png" decoding="async" class="aligncenter size-full wp-image-76198 jetpack-lazy-image" src="../Images/c57cebc97abd099ffb33d4631ac516da.png" alt="Logging In To Install Modules For Sanity" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76198" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/installing-modules/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Installing modules" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76198" src="../Images/c57cebc97abd099ffb33d4631ac516da.png" alt="Logging In To Install Modules For Sanity" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Installing-modules.png"/></noscript>
<p>现在，让我们添加我们的模式代码；这就是简单的内容建模，即识别、整理和将所有内容关联到一个集中结构中的过程，这样我们就可以构建高效的工作流和数据结构。</p>
<p><img data-attachment-id="76201" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/adding-schema-code/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code.png" data-orig-size="730,399" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding schema code" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code.png" decoding="async" class="aligncenter size-full wp-image-76201 jetpack-lazy-image" src="../Images/bea1db81c16284e85d7069e6499fbcbd.png" alt="Adding Schema Code To Empty Schema In Sanity" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code-300x164.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76201" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/adding-schema-code/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code.png" data-orig-size="730,399" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding schema code" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76201" src="../Images/bea1db81c16284e85d7069e6499fbcbd.png" alt="Adding Schema Code To Empty Schema In Sanity" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code-300x164.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-schema-code.png"/></noscript>
<p> </p>
<p>你可以在这里找到更多关于内容建模的信息。</p>
<p>我们将在这个项目中使用的数据来自<a href="https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_daily_reports_us">约翰·霍普斯金 GitHub 页面</a>，它提供了 Covid 病例的每日报告，包括我们感兴趣的字段:省/州、确诊病例和死亡人数。</p>
<p>我们将特别使用 2021 年 1 月 1 日的<a href="https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_daily_reports_us/01-01-2021.csv">数据来表示我们的图表</a>。为此，首先，在<code>schemas</code>文件夹中创建一个名为<code>covid.js</code>的文件，复制并粘贴下面的代码。</p>
<p>该文件定义了特定模式的结构:</p>
<pre>// schemas/covid.js

export default{
    name: "covid",
    type : "document",
    title: "Covid19Data",
    fields: [
      {
      name: "title",
      type: "string",
      title: "States"
      },
      {
        name: "confirmed",
        type: "number",
        title: "Confirmed"
      },
        {
          name: "death",
          type: "number",
          title: "Death"
          },
    ],
  }
</pre>
<p>现在，我们必须将<code>covid.js</code>导入到我们的<code>schemas</code>文件夹中的<code>schema.js</code>文件中，就像这样:</p>
<pre>// schemas/schema.js
// First, we must import the schema creator
import createSchema from 'part:@sanity/base/schema-creator'
// Then import schema types from any plugins that might expose them
import schemaTypes from 'all:part:@sanity/base/schema-type'
import covid from './covid'
// Then we give our schema to the builder and provide the result to Sanity
export default createSchema({
  // We name our schema
  name: 'default',
  // Then proceed to concatenate our document type
  // to the ones provided by any plugins that are installed
  types: schemaTypes.concat([
    /* Your types here! */
    covid,

  ]),
}
</pre>
<p>现在，回到<a href="http://localhost:3333/"> http://localhost:3333 </a>，我们会看到:</p>
<p><img data-attachment-id="76203" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/document-created-schema/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema.png" data-orig-size="730,401" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Document created schema" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema-300x165.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema.png" decoding="async" class="aligncenter size-full wp-image-76203 jetpack-lazy-image" src="../Images/f289746d0b1dae7acd2378df1932d0a8.png" alt="Covid19 Document Created In The Sanity Schema" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema-300x165.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76203" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/document-created-schema/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema.png" data-orig-size="730,401" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Document created schema" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema-300x165.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76203" src="../Images/f289746d0b1dae7acd2378df1932d0a8.png" alt="Covid19 Document Created In The Sanity Schema" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema-300x165.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Document-created-schema.png"/></noscript>
<p><code>Covid19Data</code>是我们在包含<code>States</code>、<code>Confirmed</code>和<code>Death</code>的模式中创建的文档的标题。</p>
<p><code>States</code>显示了 Covid 病例的地点，<code>Confirmed</code>显示了 Covid 检测呈阳性的人数，<code>Death</code>显示了该州死于 Covid 的人数。</p>
<p>我们现在可以用来自<a href="https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_daily_reports_us/01-01-2021.csv"> 01/01/2021 </a>数据集的数据填充我们的项目。</p>
<p><img data-attachment-id="76205" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/populating-project-data/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data.png" data-orig-size="730,332" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Populating project data" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data-300x136.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data.png" decoding="async" class="aligncenter size-full wp-image-76205 jetpack-lazy-image" src="../Images/fc0e29e3e82d28d83f397969fe141587.png" alt="Populating Project With Covid Data" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data-300x136.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76205" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/populating-project-data/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data.png" data-orig-size="730,332" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Populating project data" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data-300x136.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76205" src="../Images/fc0e29e3e82d28d83f397969fe141587.png" alt="Populating Project With Covid Data" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data-300x136.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Populating-project-data.png"/></noscript>
<p>请注意，我们必须仅从以下内容中复制<code>Province_State</code>、<code>Confirmed</code>和<code>Deaths</code>列:</p>
<p><img data-attachment-id="76208" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/copying-data/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data.png" data-orig-size="730,397" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Copying data" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data.png" decoding="async" class="aligncenter size-full wp-image-76208 jetpack-lazy-image" src="../Images/11939305f773381424fdca9bc3c1a635.png" alt="Copying Covid19 Data" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data-300x163.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76208" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/copying-data/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data.png" data-orig-size="730,397" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Copying data" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76208" src="../Images/11939305f773381424fdca9bc3c1a635.png" alt="Copying Covid19 Data" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data-300x163.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Copying-data.png"/></noscript>
<h2>创建 React 应用程序</h2>
<p>既然我们的 Sanity 项目已经启动并运行，是时候用 React 设置我们的前端应用程序了。</p>
<p>首先，创建一个空文件夹并运行以下命令:</p>
<pre>npx create-react-app frontendfinal
</pre>
<p>是我决定给我的项目起的名字，但是记住，你的可以是任何东西。</p>
<p>安装 React 后，就该安装 Recharts 了。首先，<code>cd</code>变成<code>frontendfinal</code></p>
<pre>cd frontendfinal
</pre>
<p>然后，我们可以安装<code>recharts</code>:</p>
<pre>npm install recharts
</pre>
<p>在文本编辑器中打开它，并导航到<code>package.json</code>，这将打开以下内容:</p>
<p><img data-attachment-id="76211" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/opening-package-json-vscode/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode.png" data-orig-size="730,390" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Opening package.json VS Code" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode-300x160.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode.png" decoding="async" class="aligncenter size-full wp-image-76211 jetpack-lazy-image" src="../Images/4c2ff1e466ffa92dfcef84091fca3e68.png" alt="Opening Package.json In VS Code" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode-300x160.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76211" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/opening-package-json-vscode/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode.png" data-orig-size="730,390" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Opening package.json VS Code" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode-300x160.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76211" src="../Images/4c2ff1e466ffa92dfcef84091fca3e68.png" alt="Opening Package.json In VS Code" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode-300x160.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Opening-package-json-vscode.png"/></noscript>
<p>现在，我们的 React 应用程序中安装了 Recharts！</p>
<h2>清理 React 代码</h2>
<p><code>create react app</code>命令快速启动 React 应用程序；现在，我们只需要对它进行一些修改来适应我们的用例，因为我们不需要<code>create react app</code>附带的所有东西。</p>
<p>对于这个特殊的用例，我们不需要在<code>src</code>文件夹中使用<code>App.css</code>或<code>logo.svg</code>；干脆把<code>App.js</code>里面的代码都删了。</p>
<h2>安装健全客户端</h2>
<p>为了让 React 应用程序连接到正在运行的 Sanity 实例，<a href="https://www.npmjs.com/package/@sanity/client">您必须通过运行以下命令来安装</a> <code><a href="https://www.npmjs.com/package/@sanity/client">sanity/client</a></code>:</p>
<pre>npm install --save @sanity/client
</pre>
<p>接下来，在<code>src</code>文件夹中创建一个文件。我决定使用<code>clientDetail.js</code>，所以在<code>clientDetail.js</code>内部，复制粘贴以下代码，适当替换细节:</p>
<pre>// src/clientDetails.js
const sanityClient = require('@sanity/client')
const client = sanityClient({
  projectId: 'xxxxxxx',
  dataset: 'production',
  apiVersion: '2021-03-25', // use a UTC date string
  useCdn: false, // `false` if you want to ensure fresh data
})
export default client;
</pre>
<p>您可以通过登录您的 Sanity 帐户并选择您的项目来获得您的<code>projectId</code>。像数据集这样的其他信息也在那里。</p>
<p><img data-attachment-id="76214" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/getting-project-id/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID.png" data-orig-size="730,378" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Getting project ID" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID-300x155.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID.png" decoding="async" class="aligncenter size-full wp-image-76214 jetpack-lazy-image" src="../Images/ad8e9a4db86a492258b9e31743d3bd7a.png" alt="Getting The Project ID From Sanity" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID-300x155.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76214" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/getting-project-id/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID.png" data-orig-size="730,378" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Getting project ID" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID-300x155.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76214" src="../Images/ad8e9a4db86a492258b9e31743d3bd7a.png" alt="Getting The Project ID From Sanity" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID-300x155.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Getting-project-ID.png"/></noscript>
<p>同样，<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">为了避免 CORS 问题</a>，Sanity 允许您添加请求的来源。要添加新原点，请遵循以下步骤:</p>
<ul>
<li>在<strong>设置下</strong> &gt; <strong> API 设置</strong> &gt; <strong> CORS 出身</strong></li>
<li>点击<strong>添加 CORS 原点</strong>添加<a href="http://localhost:3000"> http://localhost:3000 </a>，这就是你的 React 网址</li>
<li>部署此应用程序时，添加您的应用程序 URL</li>
<li>勾选<strong>允许凭证</strong> &gt; <strong>保存</strong></li>
</ul>
<p>在下面的屏幕截图中，这些步骤已经进行了可视化编号:</p>
<p><img data-attachment-id="76216" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/adding-request-origin/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding request origin" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin.png" decoding="async" class="aligncenter size-full wp-image-76216 jetpack-lazy-image" src="../Images/f12448fa2d3886ad19eee5b4df129ac9.png" alt="Adding Request Origin In Sanity To Avoid CORS Issues" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin-300x153.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76216" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/adding-request-origin/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding request origin" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76216" src="../Images/f12448fa2d3886ad19eee5b4df129ac9.png" alt="Adding Request Origin In Sanity To Avoid CORS Issues" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin-300x153.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Adding-request-origin.png"/></noscript>
<p>回到我们的<code>App.js</code>文件，我们必须从<code>react</code>文件导入<code>useState, useEffect</code>，从<code>clientDetails.js</code>文件导入<code>client</code>，并从 Recharts ( <code>LineChart</code>、<code>Line</code>、<code>XAxis</code>、<code>YAxis</code>、<code>CartesianGrid</code>、<code>Tooltip</code>、<code>Legend</code>)导入一些组件来表示数据。</p>
<p>我们的<code>App.js</code>文件看起来会像这样:</p>
<pre>// src/App.js
import React, { useState, useEffect } from "react";
import client from "./clientDetails";
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
} from "recharts";
</pre>
<p>然后，我们可以创建一个名为<code>App</code>的功能组件，它将使用<code>useState</code>、<code>useEffect</code>、<a href="https://www.sanity.io/docs/groq">，并使用 GROQ </a>从我们的 Sanity 实例中获取数据:</p>
<pre>// src/App.js
import React, { useState, useEffect } from "react";
import client from "./clientDetails";
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
} from "recharts";
export default function App() {
  const [covidData, setcovidData] = useState(null);
  useEffect(() =&gt; {
    client
      .fetch(
        `*[_type == 'covid']{
      confirmed,
      title,
      death
      }`
      )
      .then((data) =&gt; {
        setcovidData(data);
      })
      .catch(console.error);
  }, []);
</pre>
<p>然后我们必须返回一个包含所有导入的 Recharts 组件和一些已定义属性的<code>div</code>标签。</p>
<p>我们的<code>App.js</code>完整代码应该如下:</p>
<pre>// src/App.js
import React, { useState, useEffect } from "react";
import client from "./clientDetails";
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  Legend,
} from "recharts";
export default function App() {
  const [covidData, setcovidData] = useState(null);
  useEffect(() =&gt; {
    client
      .fetch(
        `*[_type == 'covid']{
      confirmed,
      title,
      death
      }`
      )
      .then((data) =&gt; {
        setcovidData(data);
      })
      .catch(console.error);
  }, []);
  return (
    &lt;div&gt;
      {!covidData &amp;&amp; &lt;div&gt;Loading&lt;/div&gt;}
      {covidData &amp;&amp; (
        &lt;LineChart
          width={1000}
          height={400}
          data={covidData}
          margin={{
            top: 10,
            right: 30,
            left: 0,
            bottom: 0,
          }}
        &gt;

          &lt;CartesianGrid strokeDasharray="3 3" /&gt;
          &lt;XAxis dataKey="title" /&gt;
          &lt;YAxis /&gt;
          &lt;Tooltip /&gt;
          &lt;Legend /&gt;
          &lt;Line
            type="monotone"
            dataKey="death"
            stroke="#8884d8"
            fill="#8884d8"
          /&gt;
           &lt;Line
            type="monotone"
            dataKey="confirmed"
            stroke="#8884d8"
            fill="#8884d8"
          /&gt;
        &lt;/LineChart&gt;
      )}
    &lt;/div&gt;
  );
}
</pre>
<p>为了运行我们的最终代码，我们可以使用以下代码运行 React 应用程序:</p>
<pre>npm run start
</pre>
<p>然后，我们可以在<a href="http://localhost:3000/"> http://localhost:3000/ </a>启动它:</p>
<p><img data-attachment-id="76221" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/final-recharts-graph/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph.png" data-orig-size="730,391" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final Recharts graph" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph.png" decoding="async" class="aligncenter size-full wp-image-76221 jetpack-lazy-image" src="../Images/7db0e855e180784b2e5c3579e8ab994b.png" alt="Final Recharts Graph Showing States And Corresponding Covid Data" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph-300x161.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="76221" data-permalink="https://blog.logrocket.com/using-recharts-react-add-charts/final-recharts-graph/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph.png" data-orig-size="730,391" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final Recharts graph" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-76221" src="../Images/7db0e855e180784b2e5c3579e8ab994b.png" alt="Final Recharts Graph Showing States And Corresponding Covid Data" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph-300x161.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/Final-Recharts-graph.png"/></noscript>
<p>恭喜你，你能看透这一切！</p>
<h2>结论</h2>
<p>可视化对于组织数据至关重要，而且最重要的是我们要明智而简洁地呈现它。我们能够从 Sanity 获取数据到 React 应用程序，并使用 Recharts 显示它。</p>
<p>你可以在这里找到这个项目的源代码，包括<a href="https://github.com/bigpreshy/Recharts"> React app </a>和<a href="https://github.com/bigpreshy/sanityproject"> Sanity codebase </a>。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用 LogRocket 消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款 React analytics 解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket 告诉您 React 应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS 异常、前端性能指标和用户交互。然后，LogRocket 使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的 React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试 LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>