<html>
<head>
<title>How to create a DAO with Next.js and thirdweb - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何用 Next.js 和 thirdweb - LogRocket 博客创建 DAO</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/create-dao-next-js-thirdweb/#0001-01-01">https://blog.logrocket.com/create-dao-next-js-thirdweb/#0001-01-01</a></blockquote><div><article class="article-post">
<p><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5myz73zz80ztfz77z7lz80zllz72zxh6hz90zz76z8hyhz74zz83zmz73zz78zj"> <b> <i>编者按:</i> </b> </span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5myz73zz80ztfz77z7lz80zllz72zxh6hz90zz76z8hyhz74zz83zmz73zz78zj"> <i>本文更新于 2022 年 4 月 11 日，以配合</i></span><span class="attrlink url author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5myz73zz80ztfz77z7lz80zllz72zxh6hz90zz76z8hyhz74zz83zmz73zz78zj"><a class="attrlink" href="https://blog.thirdweb.com/thirdweb-v2" target="_blank" rel="noreferrer nofollow noopener" data-target-href="https://blog.thirdweb.com/thirdweb-v2"><i>third web v2</i></a></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5myz73zz80ztfz77z7lz80zllz72zxh6hz90zz76z8hyhz74zz83zmz73zz78zj"><i>的发布。</i>T19】</span></p>
<h2>什么是刀？</h2>
<p>DAO 代表分散的自治组织。顾名思义，道是没有单一领袖的组织；相反，规则被编码在区块链中。正因为如此，一刀是完全透明的，每个参与的人都有股份。大型决策是通过拥有 DAO 不可替代令牌(NFT)的用户投票做出的，这些令牌授予会员资格。</p>
<p>今天，我们将使用 Next.js、thirdweb、MetaMask 和 Alchemy 来构建我们自己的 DAO。它将允许用户铸造你的道的 NFT，通过空投接收加密货币，并参与道的民意调查。本教程将只使用 JavaScript 编写，因此您不需要了解任何可靠性。</p>
<h2>先决条件</h2>
<p>要理解并遵循本教程，您应该具备以下条件:</p>
<ul>
<li>JavaScript、Next.js 和<a href="https://blog.logrocket.com/tag/web3/" target="_blank" rel="noopener">区块链</a>的工作知识</li>
<li>MetaMask 钱包</li>
<li>用<a href="https://www.alchemy.com/" target="_blank" rel="noopener">炼金术</a>算一笔账</li>
</ul>
<h2>内容</h2>

<h2 id="setup">设置</h2>
<p>我们将从使用以下命令设置 Next.js 应用程序开始:</p>
<pre class="language-shell hljs">npx create-next-app my-dao
</pre>
<h3 id="creating-alchemy-app">创建炼金术应用程序</h3>
<p>接下来，前往 Alchemy，登录，点击<strong>创建应用</strong>，并提供所需的详细信息。确保使用与您在 thirdweb 中使用的链相同的链——在我们的例子中，它是以太坊链和 Rinkeby 网络。</p>
<p><img data-attachment-id="100427" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/creating-alchemy-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating alchemy app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app.png" decoding="async" class="size-full wp-image-100427 aligncenter jetpack-lazy-image" src="../Images/b86c9c222cd823d514ed18d93cad78d0.png" alt="Creating alchemy app" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app-300x153.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="100427" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/creating-alchemy-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating alchemy app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app.png" decoding="async" loading="lazy" class="size-full wp-image-100427 aligncenter" src="../Images/b86c9c222cd823d514ed18d93cad78d0.png" alt="Creating alchemy app" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app-300x153.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Creating-alchemy-app.png"/></noscript>
<p>创建应用程序后，复制 HTTP API 密钥。</p>
<h3 id="getting-wallet-private-key">获取钱包的私钥</h3>
<p>为了<a href="https://blog.logrocket.com/create-nft-minter-moralis-solidity-next-js/" target="_blank" rel="noopener">创建 NFT</a>并执行某些脚本，我们将需要钱包的私钥。</p>
<p>要访问它，打开 MetaMask 浏览器扩展并点击<strong>账户详情</strong>。您应该在这里看到您的私钥；导出并复制到安全的地方。</p>
<h3 id="adding-env-variables">添加<code>.env</code>变量</h3>
<p>让我们将这些变量添加到一个<code>.env</code>文件中，这样我们可以在以后访问它们:</p>
<pre class="language-shell hljs">PRIVATE_KEY=&lt;wallet_private_key&gt;
ALCHEMY_API_URL=&lt;alchemy_http_key&gt;
WALLET_ADDRESS=&lt;public_wallet_address&gt;
</pre>
<p>因为我们不想把这些推送到 GitHub，所以一定要在<code>gitignore</code>里添加</p>

<p>在 DApps 中，MetaMask 是最常用的钱包，因此我们将使用 thirdweb 添加 MetaMask 登录。</p>
<p>我们需要安装两个软件包:</p>
<pre class="language-shell hljs">npm i @thirdweb-dev/react @thirdweb-dev/sdk ethers # npm

yarn add @thirdweb-dev/react @thirdweb-dev/sdk ethers # yarn</pre>
<h3 id="adding-thirdweb-provider">添加第三方 web 提供程序</h3>
<p>我们需要将整个应用程序包装在第三方 web 提供者中，以便访问组件所需的登录详细信息和其他信息:</p>
<pre class="language-javascript hljs">import "../styles/globals.css";
import {ThirdwebProvider } from "@thirdweb-dev/react";

function MyApp({ Component, pageProps }) {
  return (
    &lt;ThirdwebProvider desiredChainId={activeChainId}&gt;
      &lt;Component {...pageProps} /&gt;
    &lt;/ThirdwebProvider&gt;
  );
}
export default MyApp;
</pre>
<p>出于身份验证的目的，我们还必须指定身份验证的类型和支持的链 id。我们使用元掩码和 Rinkeby 链，所以也添加以下内容:</p>
<pre class="language-javascript hljs">import { ChainId, ThirdwebProvider } from "@thirdweb-dev/react";
const activeChainId = ChainId.Rinkeby;
</pre>
<p>最后，像这样在提供者中传递这些作为道具:</p>
<pre class="language-javascript hljs"> &lt;ThirdwebProvider desiredChainId={activeChainId}&gt;
      &lt;Component {...pageProps} /&gt;
  &lt;/ThirdwebProvider&gt;
</pre>
<h3 id="adding-sign-in-component">添加登录组件</h3>
<p>在项目的根目录下创建一个名为<code>components</code>的新文件夹，并向其中添加一个<code>Login.js</code>文件:</p>
<pre class="language-javascript hljs">import { useMetamask } from "@thirdweb-dev/react";
const Login = () =&gt; {
  const connectWithMetamask = useMetamask();
  return (
    &lt;div&gt;
      &lt;button onClick={connectWithMetamask}&gt;Sign in using MetaMask&lt;/button&gt;
    &lt;/div&gt;
  );
};
export default Login;
</pre>
<p>幸运的是，thirdweb 提供了一个<code>connectWallet</code>函数，我们可以用它来添加身份验证！</p>
<h3 id="h3renderingthesignincomponent">呈现登录组件</h3>
<p>在<code>index.js</code>中，如果没有地址(如果用户没有登录)，则呈现登录屏幕:</p>
<pre class="language-javascript hljs">const address = useAddress();
if (!address) {
  return ;
}
</pre>
<p>这将允许我们的用户登录，但之后它只是显示一个空白屏幕。因此，在另一个返回块中，让我们向用户显示她的地址:</p>
<pre class="language-javascript hljs">export default function Home() {
  const { address } = useWeb3();
  if (!address) {
    return &lt;Login /&gt;;
  }
  return (
    &lt;div className={styles.container}&gt;
      &lt;h2&gt;You are signed in as {address}&lt;/h2&gt;
    &lt;/div&gt;
  );
}
</pre>
<p>登录工作，但它现在看起来不太好。因此，在<code>styles</code>文件夹中创建一个新文件<code>Login.module.css</code>，并添加以下内容:</p>
<pre class="language-css hljs">.container {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #7449bb;
}
.button {
  color: #7449bb;
  background-color: white;
  border: none;
  border-radius: 5px;
  padding: 10px;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
  font-weight: 500;
}
</pre>
<p>接下来，将以下类添加到<code>Login.js</code>:</p>
<pre class="language-javascript hljs">&lt;div className={styles.container}&gt;
  &lt;button className={styles.button} onClick={() =&gt; connectWallet("injected")}&gt;
    Sign in using MetaMask
  &lt;/button&gt;
&lt;/div&gt;
</pre>
<p>最后，导入样式:</p>
<pre class="language-javascript hljs">import styles from "../styles/Login.module.css";
</pre>
<p>这将给我们一个简单但好看的登录屏幕。</p>
<p><img data-attachment-id="100430" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/metamask-sign-in/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in.png" data-orig-size="730,379" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="metamask sign in" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in-300x156.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in.png" decoding="async" class="size-full wp-image-100430 aligncenter jetpack-lazy-image" src="../Images/25c243c2d9d61beaa75fd000ac5b8534.png" alt="metamask sign in" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in-300x156.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="100430" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/metamask-sign-in/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in.png" data-orig-size="730,379" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="metamask sign in" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in-300x156.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in.png" decoding="async" loading="lazy" class="size-full wp-image-100430 aligncenter" src="../Images/25c243c2d9d61beaa75fd000ac5b8534.png" alt="metamask sign in" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in-300x156.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-sign-in.png"/></noscript>
<h3 id="initializing-thirdweb-sdk">初始化 thirdweb SDK</h3>
<p>现在我们需要为将要运行的各种脚本初始化 thirdweb SDK。首先创建一个名为<code>scripts</code>的新文件夹，其中包含一个<code>initialize-sdk.js</code>文件。</p>
<p>将以下代码添加到文件中:</p>
<pre class="language-javascript hljs">import { ThirdwebSDK } from "@thirdweb-dev/sdk";
import ethers from "ethers";
import dotenv from "dotenv";
dotenv.config();
if (!process.env.PRIVATE_KEY || process.env.PRIVATE_KEY === "") {
  console.log("🛑 Private key not found.");
}
if (!process.env.ALCHEMY_API_URL || process.env.ALCHEMY_API_URL === "") {
  console.log("🛑 Alchemy API URL not found.");
}
if (!process.env.WALLET_ADDRESS || process.env.WALLET_ADDRESS === "") {
  console.log("🛑 Wallet Address not found.");
}
const sdk = new ThirdwebSDK(
  new ethers.Wallet(
    process.env.PRIVATE_KEY,
    ethers.getDefaultProvider(process.env.ALCHEMY_API_URL)
  )
);
(async () =&gt; {
  try {
    const address = await sdk.getSigner().getAddress();
    console.log("SDK initialized by address:", address);
  } catch (err) {
    console.error("Failed to get the address", err);
    process.exit(1);
  }
})();
export default sdk;
</pre>
<p>这将初始化 thirdweb SDK，如您所见，我们需要安装一些包:</p>
<pre class="language-shell hljs">npm i dotenv # npm

yarn add dotenv # yarn
</pre>
<p>我们在这里使用模块化导入，所以在<code>scripts</code>文件夹中创建一个新的<code>package.json</code>文件，并简单地添加以下内容:</p>
<pre class="language-javascript hljs">{
  "name": "scripts",
  "type": "module"
}
</pre>
<p>最后，运行脚本:</p>
<pre class="language-javascript hljs">node scripts/initialize-sdk.js
</pre>
<p>该脚本可能需要一些时间来运行，但一段时间后，你会得到你的应用程序地址。</p>
<p><img data-attachment-id="103429" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/thirdweb-app-address-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address.png" data-orig-size="730,63" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="thirdweb app address" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address-300x26.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address.png" decoding="async" class="wp-image-103429 size-full aligncenter jetpack-lazy-image" src="../Images/2c4975c6696ae6c9ae64461e9896411e.png" alt="" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address-300x26.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="103429" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/thirdweb-app-address-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address.png" data-orig-size="730,63" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="thirdweb app address" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address-300x26.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address.png" decoding="async" loading="lazy" class="wp-image-103429 size-full aligncenter" src="../Images/2c4975c6696ae6c9ae64461e9896411e.png" alt="" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address-300x26.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-app-address.png"/></noscript>
<p>我们将在接下来的步骤中用到它，所以请将其存放在安全的地方。</p>
<h2 id="adding-features-mint-nft">添加功能以打造 NFT</h2>
<p>对于这一步，我们将需要一些测试 ETH，所以去像<a href="https://faucets.chain.link/rinkeby" target="_blank" rel="noopener">这样的水龙头</a>拿一些。</p>
<h3 id="creating-configuring-nft">创建和配置 NFT</h3>
<p>在<code>scripts</code>文件夹中创建一个名为<code>deploy-drop.js</code>的新文件。在这里，添加以下脚本:</p>
<pre class="language-javascript hljs">import { ethers } from "ethers";
import sdk from "./initialize-sdk.js";

(async () =&gt; {
  try {
    const editionDropAddress = await sdk.deployer.deployEditionDrop({
      name: "LogRocket DAO", // Name of NFT Collection for DAO
      description: "A DAO for all the LogRocket readers.", // Description
      image: "image_Address", // PFP for NFT collection
      primary_sale_recipient: ethers.constants.AddressZero,
    });
    const editionDrop = sdk.getEditionDrop(editionDropAddress);
    const metadata = await editionDrop.metadata.get();
    console.log(
      "✅ Successfully deployed editionDrop contract, address:",
      editionDropAddress
    );
    console.log("✅ editionDrop metadata:", metadata);
  } catch (error) {
    console.log("failed to deploy editionDrop contract", error);
  }
})();
</pre>
<p>您需要在这里更新一些内容:</p>
<ul>
<li>使用通过运行前面的脚本获得的新应用程序地址更新应用程序地址</li>
<li>更新 DAO 的 NFT 放置的名称及其描述</li>
<li>通过创建一个名为<code>assets</code>的新文件夹，为 NFT 拖放添加一个图像，并在那里添加您的 NFT 的图像</li>
</ul>
<p>更新详细信息后，运行以下脚本:</p>
<pre class="language-javascript hljs">node scripts/deploy-drop.js
</pre>
<p>等待脚本运行，您应该会得到一个地址和元数据。</p>
<p><img data-attachment-id="103431" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/nft-address-and-metadata-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1.png" data-orig-size="730,206" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="NFT address and metadata" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1-300x85.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1.png" decoding="async" class="wp-image-103431 size-full aligncenter jetpack-lazy-image" src="../Images/b7a88947a7a472da50c6c404fa2e979b.png" alt="NFT address and metadata" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1-300x85.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="103431" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/nft-address-and-metadata-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1.png" data-orig-size="730,206" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="NFT address and metadata" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1-300x85.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1.png" decoding="async" loading="lazy" class="wp-image-103431 size-full aligncenter" src="../Images/b7a88947a7a472da50c6c404fa2e979b.png" alt="NFT address and metadata" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1-300x85.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-address-and-metadata-1.png"/></noscript>
<p>这将为我们创建一个新版本的 drop 合同！你甚至可以在<a href="https://rinkeby.etherscan.io/" target="_blank" rel="noopener"> Rinkeby Etherscan </a>上查看交易。</p>
<p>让我们现在配置我们的 NFT！在<code>scripts</code>文件夹中创建一个新的<code>config-nft.js</code>文件，并添加以下内容:</p>
<pre class="language-javascript hljs">import sdk from "./initialize-sdk.js";

const editionDrop = sdk.getEditionDrop("EDITION_DROP_ADDDRESS");

(async () =&gt; {
  try {
    await editionDrop.createBatch([
      {
        name: "LogRocket DAO", // Name of NFT Collection for DAO
        description: "A DAO for all the LogRocket readers.", // Description
        image: "image_address", // Image for NFT
      },
    ]);
    console.log("✅ Successfully created a new NFT in the drop!");
  } catch (error) {
    console.error("failed to create the new NFT", error);
  }
})();
</pre>
<p>您需要更新包放置地址和<code>createBatch</code>中对象的详细信息。这些细节将用于 NFT！</p>
<p>一旦您更新了所有文件，请运行以下脚本:</p>
<pre class="language-javascript hljs">node scripts/config-nft.js
</pre>
<p>它应该会给出这样的输出。</p>
<p><img data-attachment-id="103433" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/nft-configs-output-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1.png" data-orig-size="730,89" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="NFT-configs-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1.png" decoding="async" class="wp-image-103433 size-full aligncenter jetpack-lazy-image" src="../Images/86d3554d8ca4496edd0b413b5a4ad6fc.png" alt="NFT-configs-output" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1-300x37.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="103433" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/nft-configs-output-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1.png" data-orig-size="730,89" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="NFT-configs-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1.png" decoding="async" loading="lazy" class="wp-image-103433 size-full aligncenter" src="../Images/86d3554d8ca4496edd0b413b5a4ad6fc.png" alt="NFT-configs-output" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1-300x37.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/NFT-configs-output-1.png"/></noscript>
<p>如果您在第三个 web 仪表板中看到该模块，您将看到已经创建了一个 NFT！🥳</p>
<p><img data-attachment-id="103435" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/thirdweb-dashboard-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1.png" data-orig-size="730,317" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Thirdweb dashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1-300x130.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1.png" decoding="async" class="wp-image-103435 size-full aligncenter jetpack-lazy-image" src="../Images/ef520de941507a11322c6de67997ccb9.png" alt="Thirdweb dashboard" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1-300x130.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="103435" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/thirdweb-dashboard-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1.png" data-orig-size="730,317" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Thirdweb dashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1-300x130.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1.png" decoding="async" loading="lazy" class="wp-image-103435 size-full aligncenter" src="../Images/ef520de941507a11322c6de67997ccb9.png" alt="Thirdweb dashboard" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1-300x130.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Thirdweb-dashboard-1.png"/></noscript>
<p>最后，让我们为 NFT 添加一个索赔条件。</p>
<p>设置索赔条件将允许我们为 NFTs 设置一个限额，并允许每笔交易有一个特定的最大限额。我们将从仪表板本身设置索赔条件，因此单击<strong>设置</strong>按钮并创建一个新的索赔阶段。</p>
<p><img data-attachment-id="103437" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/claim-condition-settings-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="claim condition settings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1.png" decoding="async" class="wp-image-103437 size-full aligncenter jetpack-lazy-image" src="../Images/283863d9c173faa43857fbc77f13c44e.png" alt="claim condition settings" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1-300x167.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="103437" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/claim-condition-settings-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="claim condition settings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1.png" decoding="async" loading="lazy" class="wp-image-103437 size-full aligncenter" src="../Images/283863d9c173faa43857fbc77f13c44e.png" alt="claim condition settings" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1-300x167.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/claim-condition-settings-1.png"/></noscript>
<p><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz80zsz71ztdz77zfz81z7z72z58dz88za7y3z77zz84zoz81zi3z75zz88z2z122zz78zz65zd">完成更新后，点击</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz80zsz71ztdz77zfz81z7z72z58dz88za7y3z77zz84zoz81zi3z75zz88z2z122zz78zz65zd"> <b>更新索赔阶段 a </b> </span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz80zsz71ztdz77zfz81z7z72z58dz88za7y3z77zz84zoz81zi3z75zz88z2z122zz78zz65zd">并确认小额交易。</span></p>
<h3 id="checking-user-has-nft">检查用户是否有 NFT</h3>
<p>在创建允许用户铸造 NFT 的铸造按钮之前，让我们检查用户是否已经有了 NFT。我们不希望用户铸造多个 NFT！</p>
<p>首先添加两个新变量，<code>sdk</code>和<code>bundleDropModule</code>，像这样放在我们的函数组件之前:</p>
<pre class="language-javascript hljs">  const editionDrop = useEditionDrop(
    "0x2f66A5A2BCB272FFC9EB873E3482A539BEB6f02a"
  );
</pre>
<p>您还需要导入<code>useEditionDrop</code>:</p>
<pre class="language-javascript hljs">import { useAddress, useEditionDrop } from "@thirdweb-dev/react";
</pre>
<p>现在，让我们为<code>hasClaimedNFT</code>创建一个状态:</p>
<pre class="language-javascript hljs">const [hasClaimedNFT, setHasClaimedNFT] = useState(false);
</pre>
<p>我们还需要创建一个<code>useEffect</code>钩子来检查用户是否有 NFT:</p>
<pre class="language-javascript hljs">useEffect(() =&gt; {
    if (!address) {
      return;
    }
    const checkBalance = async () =&gt; {
      try {
        const balance = await editionDrop.balanceOf(address, 0);
        if (balance.gt(0)) {
          setHasClaimedNFT(true);
          console.log("🎉 You have an NFT!");
        } else {
          setHasClaimedNFT(false);
          console.log("🤷‍♂️ You don't have an NFT.");
        }
      } catch (error) {
        setHasClaimedNFT(false);
        console.error("Failed to get nft balance", error);
      }
    };
    checkBalance();
  }, [address, editionDrop]);
</pre>
<p>首先，它将检查用户是否登录。如果用户没有登录，它将不会返回任何内容。然后，检查用户是否拥有我们在顶部导入的 drop contract 中带有令牌 ID <code>0</code>的 NFT。</p>
<p>如果你，在网站中打开控制台，它应该显示你没有 NFT。</p>
<p><img data-attachment-id="100447" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/you-dont-have-an-nft-message/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message.png" data-orig-size="816,33" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="You dont have an NFT message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message-300x12.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message.png" decoding="async" class="size-full wp-image-100447 aligncenter jetpack-lazy-image" src="../Images/6a3ea755f5ac4d3283caa3d551c8f426.png" alt="You dont have an NFT message" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message.png 816w, https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message-300x12.png 300w, https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message-768x31.png 768w" data-lazy-sizes="(max-width: 816px) 100vw, 816px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="100447" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/you-dont-have-an-nft-message/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message.png" data-orig-size="816,33" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="You dont have an NFT message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message-300x12.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message.png" decoding="async" loading="lazy" class="size-full wp-image-100447 aligncenter" src="../Images/6a3ea755f5ac4d3283caa3d551c8f426.png" alt="You dont have an NFT message" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message.png 816w, https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message-300x12.png 300w, https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message-768x31.png 768w" sizes="(max-width: 816px) 100vw, 816px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/You-dont-have-an-NFT-message.png"/></noscript>
<h3 id="creating-button-mint-nfts">创建一个按钮来铸造 NFT</h3>
<p>让我们创建按钮来铸造 NFTs！像这样创建一个名为<code>mintNft</code>的新函数:</p>
<pre class="language-javascript hljs">const mintNft = async () =&gt; {
  setIsClaiming(true);
  try {
    await bundleDropModule.claim("0", 1);
    setHasClaimedNFT(true);
    console.log("🌊 Successfully Minted the NFT!");
  } catch (error) {
    console.error("failed to claim", error);
  } finally {
    setIsClaiming(false);
  }
};
</pre>
<p>当点击一个按钮将 NFT 存入用户的钱包时，我们将调用这个函数。但是首先，让我们添加<code>isClaiming</code>状态:</p>
<pre class="language-javascript hljs">const [isClaiming, setIsClaiming] = useState(false);
</pre>
<p>让我们现在创建按钮！在最后一个返回块中添加以下内容:</p>
<pre class="language-javascript hljs">&lt;div&gt;
  &lt;h1&gt;Mint your free LogRocket DAO Membership NFT 💳&lt;/h1&gt;
  &lt;button disabled={isClaiming} onClick={() =&gt; mintNft()}&gt;
    {isClaiming ? "Minting..." : "Mint your nft (FREE)"}
  &lt;/button&gt;
&lt;/div&gt;
</pre>
<p>现在，在我们登录后，它应该会向我们显示这样一个屏幕。</p>
<p><img data-attachment-id="100449" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/mint-nft-screen-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button.png" data-orig-size="730,379" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Mint NFT screen button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button-300x156.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button.png" decoding="async" class="size-full wp-image-100449 aligncenter jetpack-lazy-image" src="../Images/ab01842eb3d707cf3e24bcf5dbaaddae.png" alt="Mint NFT screen button" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button-300x156.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="100449" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/mint-nft-screen-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button.png" data-orig-size="730,379" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Mint NFT screen button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button-300x156.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button.png" decoding="async" loading="lazy" class="size-full wp-image-100449 aligncenter" src="../Images/ab01842eb3d707cf3e24bcf5dbaaddae.png" alt="Mint NFT screen button" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button-300x156.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Mint-NFT-screen-button.png"/></noscript>
<p>如果您尝试按<strong> Mint your nft (FREE) </strong>按钮，它应该会弹出您的 MetaMask 屏幕来完成交易。在控制台中，应该会看到以下内容。</p>
<p><img data-attachment-id="103444" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/successfully-minted-nft/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft.png" data-orig-size="471,61" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="successfully minted nft" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft-300x39.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft.png" decoding="async" class="size-full wp-image-103444 aligncenter jetpack-lazy-image" src="../Images/25965c8d3c7680f8be8f4a982b2f5b98.png" alt="successfully minted nft" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft.png 471w, https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft-300x39.png 300w" data-lazy-sizes="(max-width: 471px) 100vw, 471px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="103444" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/successfully-minted-nft/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft.png" data-orig-size="471,61" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="successfully minted nft" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft-300x39.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft.png" decoding="async" loading="lazy" class="size-full wp-image-103444 aligncenter" src="../Images/25965c8d3c7680f8be8f4a982b2f5b98.png" alt="successfully minted nft" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft.png 471w, https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft-300x39.png 300w" sizes="(max-width: 471px) 100vw, 471px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/successfully-minted-nft.png"/></noscript>
<p>最后，在最后一个返回块的上面，添加这个检查来查看用户是否已经声明了 NFT:</p>
<pre class="language-javascript hljs">if (hasClaimedNFT) {
  return (
    &lt;div&gt;
      &lt;h1&gt;You have the DAO Membership NFT!&lt;/h1&gt;
    &lt;/div&gt;
  );
}
</pre>
<h3 id="adding-styles">添加样式</h3>
<p>我们已经完成了铸造 NFT 的功能，但它看起来很丑，所以让我们添加一些基本的样式。在<code>Home.module.css</code>内添加以下内容:</p>
<pre class="language-css hljs">.container {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #7449bb;
}
.container &gt; h1 {
  font-size: 3rem;
  color: #fff;
  font-weight: bold;
}
.button {
  color: #7449bb;
  background-color: white;
  border: none;
  border-radius: 5px;
  padding: 10px;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
  font-weight: 500;
}
</pre>
<p>我们还需要添加<code>classNames</code>:</p>
<pre class="language-javascript hljs">  if (hasClaimedNFT) {
    return (
      &lt;div className={styles.container}&gt;
        &lt;h1&gt;You have the DAO Membership NFT!&lt;/h1&gt;
      &lt;/div&gt;
    );
  }
  return (
    &lt;div className={styles.container}&gt;
      &lt;h1&gt;Mint your free LogRocket DAO Membership NFT 💳&lt;/h1&gt;
      &lt;button
        className={styles.button}
        disabled={isClaiming}
        onClick={() =&gt; mintNft()}
      &gt;
        {isClaiming ? "Minting..." : "Mint your NFT (FREE)"}
      &lt;/button&gt;
    &lt;/div&gt;
  );
};
</pre>
<p>这给了我们一个更好的薄荷屏幕。</p>
<p><img data-attachment-id="100451" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/styled-nft-minting-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen.png" data-orig-size="730,379" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Styled NFT minting screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen-300x156.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen.png" decoding="async" class="size-full wp-image-100451 aligncenter jetpack-lazy-image" src="../Images/4089dbf2c2772309666cf9d677541817.png" alt="Styled NFT minting screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen-300x156.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="100451" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/styled-nft-minting-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen.png" data-orig-size="730,379" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Styled NFT minting screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen-300x156.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen.png" decoding="async" loading="lazy" class="size-full wp-image-100451 aligncenter" src="../Images/4089dbf2c2772309666cf9d677541817.png" alt="Styled NFT minting screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen-300x156.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Styled-NFT-minting-screen.png"/></noscript>
<h2 id="creating-deploying-governance-token">创建和部署治理令牌</h2>
<p>在<code>scripts</code>文件夹中创建一个名为<code>deploy-token.js</code>的新文件。添加以下内容:</p>
<pre class="language-javascript hljs">import { AddressZero } from "@ethersproject/constants";
import sdk from "./initialize-sdk.js";
(async () =&gt; {
  try {
    const tokenAddress = await sdk.deployer.deployToken({
      name: "LogRocket Token", // name of the token
      symbol: "LR", // symbol
      primary_sale_recipient: AddressZero, // 0x0000000000000000000000000000000000000000
    });
    console.log(
      "✅ Successfully deployed token module, address:",
      tokenAddress
    );
  } catch (error) {
    console.error("failed to deploy token module", error);
  }
})();
</pre>
<p>这个脚本将创建一个带有名称和符号的新令牌模块。您需要自己手动更新应用程序地址、令牌名称和符号。</p>
<p>更新后，运行脚本。</p>
<p>您可以通过 Rinkeby Etherscan 上的地址检查该令牌，也可以通过单击<strong>导入令牌</strong>将其添加到您的 MetaMask 钱包中。</p>
<p><img data-attachment-id="100453" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/metamask-import-tokens/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens.png" data-orig-size="453,150" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="metamask import tokens" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens-300x99.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens.png" decoding="async" class="size-full wp-image-100453 aligncenter jetpack-lazy-image" src="../Images/cb111d68432fb2d0a55959cf1792093c.png" alt="metamask import tokens" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens.png 453w, https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens-300x99.png 300w" data-lazy-sizes="(max-width: 453px) 100vw, 453px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="100453" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/metamask-import-tokens/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens.png" data-orig-size="453,150" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="metamask import tokens" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens-300x99.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens.png" decoding="async" loading="lazy" class="size-full wp-image-100453 aligncenter" src="../Images/cb111d68432fb2d0a55959cf1792093c.png" alt="metamask import tokens" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens.png 453w, https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens-300x99.png 300w" sizes="(max-width: 453px) 100vw, 453px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/metamask-import-tokens.png"/></noscript>
<p>导入后，您应该会在资产下看到令牌。</p>
<p><img data-attachment-id="100455" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/token-count-0-lr/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR.png" data-orig-size="442,111" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Token count 0 LR" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR-300x75.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR.png" decoding="async" class="size-full wp-image-100455 aligncenter jetpack-lazy-image" src="../Images/93b3db5fbdaa767add7168bc19287b4a.png" alt="Token count 0 LR" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR.png 442w, https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR-300x75.png 300w" data-lazy-sizes="(max-width: 442px) 100vw, 442px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="100455" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/token-count-0-lr/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR.png" data-orig-size="442,111" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Token count 0 LR" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR-300x75.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR.png" decoding="async" loading="lazy" class="size-full wp-image-100455 aligncenter" src="../Images/93b3db5fbdaa767add7168bc19287b4a.png" alt="Token count 0 LR" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR.png 442w, https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR-300x75.png 300w" sizes="(max-width: 442px) 100vw, 442px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Token-count-0-LR.png"/></noscript>
<p>目前是零，所以让我们铸造一些代币！</p>
<h3 id="minting-tokens">铸造代币</h3>
<p>在<code>scripts</code>文件夹中创建一个名为<code>mint-token.js</code>的新文件，并添加以下内容:</p>
<pre class="language-javascript hljs">import { ethers } from "ethers";
import sdk from "./initialize-sdk.js";
const tokenModule = sdk.getTokenModule(
  "TOKEN_MODULE_ADDRESS"
);

(async () =&gt; {
  try {
    const amount = 1_000_000;
    const amountWith18Decimals = ethers.utils.parseUnits(amount.toString(), 18);
    await tokenModule.mint(amountWith18Decimals);
    const totalSupply = await tokenModule.totalSupply();
    console.log(
      "✅ There now is",
      ethers.utils.formatUnits(totalSupply, 18),
      "$LR in circulation"
    );
  } catch (error) {
    console.error("Failed to mint tokens", error);
  }
})();
</pre>
<p>用您在最后一个脚本中获得的地址更新令牌模块地址，您就可以更新您想要铸造的数量。</p>
<p>准备好创建之后，运行脚本:</p>
<pre class="language-javascript hljs">node scripts/mint-token.js
</pre>
<p>现在，您应该可以看到您在 MetaMask 钱包中铸造的代币数量了！🎉</p>
<p><img data-attachment-id="100457" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/token-count-1-million/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million.png" data-orig-size="440,112" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="token count 1 million" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million-300x76.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million.png" decoding="async" class="size-full wp-image-100457 aligncenter jetpack-lazy-image" src="../Images/8d522a2e49ffc8281c82a27ac896b5c3.png" alt="token count 1 million" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million.png 440w, https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million-300x76.png 300w" data-lazy-sizes="(max-width: 440px) 100vw, 440px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="100457" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/token-count-1-million/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million.png" data-orig-size="440,112" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="token count 1 million" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million-300x76.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million.png" decoding="async" loading="lazy" class="size-full wp-image-100457 aligncenter" src="../Images/8d522a2e49ffc8281c82a27ac896b5c3.png" alt="token count 1 million" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million.png 440w, https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million-300x76.png 300w" sizes="(max-width: 440px) 100vw, 440px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/token-count-1-million.png"/></noscript>
<h3 id="airdropping-tokens">空投代币</h3>
<p>我们可能希望向我们的 NFT 持有者空投代币，因此让我们为此创建一个脚本。在<code>scripts</code>中创建一个新的<code>airdrop.js</code>文件，并添加以下内容:</p>
<pre class="language-javascript hljs">import sdk from "./initialize-sdk.js";
const editionDrop = sdk.getEditionDrop(
  "EDITION_ADDRESS"
);
const token = sdk.getToken("TOKEN_ADDRESS");
(async () =&gt; {
  try {
    const walletAddresses = await editionDrop.history.getAllClaimerAddresses(0);
    if (walletAddresses.length === 0) {
      console.log(
        "No NFTs have been claimed yet, ask yourfriends to claim some free NFTs!"
      );
      process.exit(0);
    }
    const airdropTargets = walletAddresses.map((address) =&gt; {
      const randomAmount = Math.floor(
        Math.random() * (10000 - 1000 + 1) + 1000
      );
      console.log("✅ Going to airdrop", randomAmount, "tokens to", address);
      const airdropTarget = {
        toAddress: address,
        amount: randomAmount,
      };
      return airdropTarget;
    });
    console.log("🌈 Starting airdrop...");
    await token.transferBatch(airdropTargets);
    console.log(
      "✅ Successfully airdropped tokens to all the holders of the NFT!"
    );
  } catch (err) {
    console.error("Failed to airdrop tokens", err);
  }
})();
</pre>
<p>运行脚本后，您应该会得到类似这样的结果。</p>
<p><img data-attachment-id="103447" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/airdrop-success-message-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1.png" data-orig-size="1116,164" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Airdrop success message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1-300x44.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1-1024x150.png" decoding="async" class="wp-image-103447 size-full aligncenter jetpack-lazy-image" src="../Images/3a8348085ea247b092f4c1adc4f8ecfd.png" alt="Airdrop success message" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1.png 1116w, https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1-300x44.png 300w, https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1-1024x150.png 1024w, https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1-768x113.png 768w" data-lazy-sizes="(max-width: 1116px) 100vw, 1116px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="103447" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/airdrop-success-message-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1.png" data-orig-size="1116,164" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Airdrop success message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1-300x44.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1-1024x150.png" decoding="async" loading="lazy" class="wp-image-103447 size-full aligncenter" src="../Images/3a8348085ea247b092f4c1adc4f8ecfd.png" alt="Airdrop success message" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1.png 1116w, https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1-300x44.png 300w, https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1-1024x150.png 1024w, https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1-768x113.png 768w" sizes="(max-width: 1116px) 100vw, 1116px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Airdrop-success-message-1.png"/></noscript>
<p>目前，只有你铸造了一个 NFT，所以它不会发送令牌给别人。但这可以用来发送给其他 NFT 持有者。</p>
<h2 id="allowing-users-vote">允许用户投票</h2>
<p>在<code>scripts</code>文件夹中创建一个新的<code>deploy-vote.js</code>文件，并添加以下内容:</p>
<pre class="language-javascript hljs">import sdk from "./initialize-sdk.js";
(async () =&gt; {
  try {
    const voteContractAddress = await sdk.deployer.deployVote({
      name: "LR Dao's Proposals",
      voting_token_address: "TOKEN_ADDRESS",
      voting_delay_in_blocks: 0,
      voting_period_in_blocks: 6570,
      voting_quorum_fraction: 0,
      proposal_token_threshold: 0,
    });
    console.log(
      "✅ Successfully deployed vote contract, address:",
      voteContractAddress
    );
  } catch (err) {
    console.error("Failed to deploy vote contract", err);
  }
})();
</pre>
<p>更新应用程序地址、名称和投票令牌地址，然后运行脚本:</p>
<pre class="language-javascript hljs">node scripts/deploy-vote.js
</pre>
<p>我们还需要设置一个投票模块，因此创建一个名为<code>setup-vote.js</code>的新脚本并添加以下内容:</p>
<pre class="language-javascript hljs">import sdk from "./initialize-sdk.js";
const vote = sdk.getVote("VOTE_ADDRESS");
const token = sdk.getToken("TOKEN_ADDRESS");

(async () =&gt; {
  try {
    await token.roles.grant("minter", vote.getAddress());
    console.log(
      "Successfully gave vote contract permissions to act on token contract"
    );
  } catch (error) {
    console.error(
      "failed to grant vote contract permissions on token contract",
      error
    );
    process.exit(1);
  }
  try {
    const ownedTokenBalance = await token.balanceOf(process.env.WALLET_ADDRESS);
    const ownedAmount = ownedTokenBalance.displayValue;
    const percent90 = (Number(ownedAmount) / 100) * 90;
    await token.transfer(vote.getAddress(), percent90);
    console.log(
      "✅ Successfully transferred " + percent90 + " tokens to vote contract"
    );
  } catch (err) {
    console.error("failed to transfer tokens to vote contract", err);
  }
})();
</pre>
<p>您需要运行这个脚本来完成它:</p>
<pre class="language-javascript hljs">node scripts/setup-vote.js
</pre>
<p>现在我们已经准备好了投票模块，让我们创建一些提案！</p>
<p>在<code>scripts</code>文件夹中创建一个名为<code>vote-proposals.js</code>的新文件，并添加以下内容:</p>
<pre class="language-javascript hljs">import sdk from "./initialize-sdk.js";
import { ethers } from "ethers";
const vote = sdk.getVote("0x31c5840b31A1F97745bDCbB1E46954b686828E0F");
const token = sdk.getToken("0x6eefd78C9C73505AA71A13FeE31D9718775c9086");
(async () =&gt; {
  try {
    const amount = 420_000;
    const description =
      "Should the DAO mint an additional " +
      amount +
      " tokens into the treasury?";
    const executions = [
      {
        toAddress: token.getAddress(),
        nativeTokenValue: 0,
        transactionData: token.encoder.encode("mintTo", [
          vote.getAddress(),
          ethers.utils.parseUnits(amount.toString(), 18),
        ]),
      },
    ];
    await vote.propose(description, executions);
    console.log("✅ Successfully created proposal to mint tokens");
  } catch (error) {
    console.error("failed to create first proposal", error);
    process.exit(1);
  }
})();
</pre>
<p>您需要更新模块地址，并且如果您想要更新提议的消息，您也可以更新它。</p>
<p>最后，运行脚本。它应该给你这样的东西。</p>
<p><img data-attachment-id="103450" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/successful-proposal-to-mint-tokens-message-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1.png" data-orig-size="730,90" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="successful proposal to mint tokens message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1.png" decoding="async" class="wp-image-103450 size-full aligncenter jetpack-lazy-image" src="../Images/5de4af11c89e32dbcc5bb7ed72c3d12b.png" alt="successful proposal to mint tokens message" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1-300x37.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="103450" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/successful-proposal-to-mint-tokens-message-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1.png" data-orig-size="730,90" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="successful proposal to mint tokens message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1.png" decoding="async" loading="lazy" class="wp-image-103450 size-full aligncenter" src="../Images/5de4af11c89e32dbcc5bb7ed72c3d12b.png" alt="successful proposal to mint tokens message" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1-300x37.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/successful-proposal-to-mint-tokens-message-1.png"/></noscript>
<p>如果您现在检查第三个 web 仪表板，则建议已经创建。🎉</p>
<p><img data-attachment-id="103452" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/thirdweb-cleared-proposal-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1.png" data-orig-size="730,382" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="thirdweb cleared proposal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1.png" decoding="async" class="wp-image-103452 size-full aligncenter jetpack-lazy-image" src="../Images/3323bb5264c8618eb2c744232e074b2b.png" alt="thirdweb cleared proposal" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="103452" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/thirdweb-cleared-proposal-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1.png" data-orig-size="730,382" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="thirdweb cleared proposal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1.png" decoding="async" loading="lazy" class="wp-image-103452 size-full aligncenter" src="../Images/3323bb5264c8618eb2c744232e074b2b.png" alt="thirdweb cleared proposal" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/thirdweb-cleared-proposal-1.png"/></noscript>
<h3 id="showing-proposals-website">在网站上显示提案</h3>
<p>首先，导入令牌和投票模块:</p>
<pre class="language-javascript hljs">const token = useToken("TOKEN_ADDRESS");
const vote = useVote("VOTE_ADDRESS");
</pre>
<p>我们需要三个<code>useState</code>像这样:</p>
<pre class="language-javascript hljs">const [proposals, setProposals] = useState([]);
const [isVoting, setIsVoting] = useState(false);
const [hasVoted, setHasVoted] = useState(false); 
</pre>
<h4 id="getting-proposals">获取提案</h4>
<p>我们需要将建议显示在屏幕上，所以创建这个<code>useEffect</code>:</p>
<pre class="language-javascript hljs">useEffect(() =&gt; {
    if (!hasClaimedNFT) {
      return;
    }
    const getAllProposals = async () =&gt; {
      try {
        const proposals = await vote.getAll();
        setProposals(proposals);
        console.log("📋 Proposals:", proposals);
      } catch (error) {
        console.log("failed to get proposals", error);
      }
    };
    getAllProposals();
  }, [hasClaimedNFT, vote]);
</pre>
<p>然后，创建一个新的<code>handleFormSubmit</code>函数:</p>
<pre class="language-javascript hljs">const handleFormSubmit = async (e) =&gt; {
    e.preventDefault();
    e.stopPropagation();
    setIsVoting(true);
    const votes = proposals.map((proposal) =&gt; {
      const voteResult = {
        proposalId: proposal.proposalId,
        vote: 2,
      };
      proposal.votes.forEach((vote) =&gt; {
        const elem = document.getElementById(
          proposal.proposalId + "-" + vote.type
        );
        if (elem.checked) {
          voteResult.vote = vote.type;
          return;
        }
      });
      return voteResult;
    });
    try {
      const delegation = await token.getDelegationOf(address);
      if (delegation === AddressZero) {
        await token.delegateTo(address);
      }
      try {
        await Promise.all(
          votes.map(async ({ proposalId, vote: _vote }) =&gt; {
            const proposal = await vote.get(proposalId);
            if (proposal.state === 1) {
              return vote.vote(proposalId, _vote);
            }
            return;
          })
        );
        try {
          await Promise.all(
            votes.map(async ({ proposalId }) =&gt; {
              const proposal = await vote.get(proposalId);
              if (proposal.state === 4) {
                return vote.execute(proposalId);
              }
            })
          );
          setHasVoted(true);
          console.log("successfully voted");
        } catch (err) {
          console.error("failed to execute votes", err);
        }
      } catch (err) {
        console.error("failed to vote", err);
      }
    } catch (err) {
      console.error("failed to delegate tokens");
    } finally {
      setIsVoting(false);
    }
  };
</pre>
<p>这个函数将收集投票。</p>
<h4 id="rendering-proposals">提出建议</h4>
<p>将<code>if (hasClaimedNFT)</code>块替换为:</p>
<pre class="language-javascript hljs">if (hasClaimedNFT) {
    return (
      &lt;div className={styles.container}&gt;
          &lt;h2&gt;Active Proposals&lt;/h2&gt;
          &lt;form onSubmit={handleFormSubmit}&gt;
            {proposals.map((proposal) =&gt; (
              &lt;Proposal
                key={proposal.proposalId}
                votes={proposal.votes}
                description={proposal.description}
                proposalId={proposal.proposalId}
              /&gt;
            ))}
            &lt;button
              onClick={handleFormSubmit}
              type="submit"
              className={styles.button}
            &gt;
              {isVoting
                ? "Voting..."
                "Submit Votes"}
            &lt;/button&gt;
          &lt;/form&gt;
        &lt;/div&gt;
    );
  }</pre>
<p>我们正在为提案创建一个单独的组件，以保持整洁。因此，在<code>components</code>文件夹中创建一个名为<code>Proposal.js</code>的新文件，并添加以下内容:</p>
<pre class="language-javascript hljs">import styles from "../styles/Proposal.module.css";

const Proposal = ({ description, votes, proposalId }) =&gt; {
  return (
    &lt;div className={styles.proposal}&gt;
      &lt;h5 className={styles.description}&gt;{description}&lt;/h5&gt;
      &lt;div className={styles.options}&gt;
        {votes.map((vote) =&gt; (
          &lt;div key={vote.type}&gt;
            &lt;input
              type="radio"
              id={proposalId + "-" + vote.type}
              name={proposalId}
              value={vote.type}
              defaultChecked={vote.type === 2}
            /&gt;
            &lt;label htmlFor={proposalId + "-" + vote.type}&gt;{vote.label}&lt;/label&gt;
          &lt;/div&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};
export default Proposal;
</pre>
<p>我还添加了基本的样式，所以在<code>styles</code>文件夹中创建一个新的<code>Proposal.module.css</code>文件:</p>
<pre class="language-css hljs">.proposal {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #fafafa;
  border-radius: 10px;
  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
  padding: 20px;
  margin: 20px;
}
.options {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: flex-start;
  width: 100%;
  margin-top: 1rem;
}
</pre>
<p>为了使项目居中，我也在<code>Home.module.css</code>中添加了以下样式:</p>
<pre class="language-css hljs">.container &gt; form {
  display: flex;
  flex-direction: column;
  align-items: center;
}
</pre>
<p>您将进入这个屏幕，在这里您可以提交您的投票。🎉</p>
<p><img data-attachment-id="100466" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/proposal-vote-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen.png" data-orig-size="730,380" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Proposal vote screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen-300x156.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen.png" decoding="async" class="size-full wp-image-100466 aligncenter jetpack-lazy-image" src="../Images/31e7ae26563abfbdbd6784713d1959f8.png" alt="Proposal vote screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen-300x156.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="100466" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/proposal-vote-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen.png" data-orig-size="730,380" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Proposal vote screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen-300x156.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen.png" decoding="async" loading="lazy" class="size-full wp-image-100466 aligncenter" src="../Images/31e7ae26563abfbdbd6784713d1959f8.png" alt="Proposal vote screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen-300x156.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/Proposal-vote-screen.png"/></noscript>
<p>最后，让我们做一个函数来检查这个人是否已经投票了。</p>
<p>首先，创建一个新的<code>useEffect</code>:</p>
<pre class="language-javascript hljs">useEffect(() =&gt; {
    if (!hasClaimedNFT) {
      return;
    }
    if (!proposals.length) {
      return;
    }
    const checkIfUserHasVoted = async () =&gt; {
      try {
        const hasVoted = await vote.hasVoted(proposals[0].proposalId, address);
        setHasVoted(hasVoted);
      } catch (error) {
        console.error("Failed to check if wallet has voted", error);
      }
    };
    checkIfUserHasVoted();
  }, [hasClaimedNFT, proposals, address, vote]);
</pre>
<p>将按钮替换为:</p>
<pre class="language-javascript hljs"> &lt;button
  onClick={handleFormSubmit}
  type="submit"
  disabled={isVoting || hasVoted}
  className={styles.button}
&gt;
  {isVoting ? "Voting..." : hasVoted ? "You Already Voted" : "Submit Votes"}
&lt;/button&gt;
</pre>
<p>在您投票后，它应该显示消息<strong>您已经投票了</strong>:</p>
<p><img data-attachment-id="100468" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/you-already-voted-message/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message.png" data-orig-size="658,367" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="You already voted message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message.png" decoding="async" class="size-full wp-image-100468 aligncenter jetpack-lazy-image" src="../Images/adb49e9789e9127d9521515e4915037a.png" alt="You already voted message" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message.png 658w, https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message-300x167.png 300w" data-lazy-sizes="(max-width: 658px) 100vw, 658px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="100468" data-permalink="https://blog.logrocket.com/create-dao-next-js-thirdweb/you-already-voted-message/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message.png" data-orig-size="658,367" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="You already voted message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message.png" decoding="async" loading="lazy" class="size-full wp-image-100468 aligncenter" src="../Images/adb49e9789e9127d9521515e4915037a.png" alt="You already voted message" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message.png 658w, https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message-300x167.png 300w" sizes="(max-width: 658px) 100vw, 658px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/You-already-voted-message.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>这是这个教程，希望你喜欢它，可以用它来制作自己的刀！如果您愿意，您可以随时更新 DAO 并添加更多特性。✌️</p>
<p>你可以在这里找到该项目的<a href="https://github.com/avneesh0612/DAO-tutorial" target="_blank" rel="noopener"> GitHub repo。</a></p><div class="code-block code-block-30">
<div class="blog-plug inline-plug next-plug"><h2><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank"> LogRocket </a>:全面了解生产 Next.js 应用</h2><p>调试下一个应用程序可能会很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪状态、自动显示 JavaScript 错误、跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-lazy-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/></noscript></a><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p>LogRocket 就像是网络和移动应用的 DVR，记录下你的 Next.js 应用上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket 还可以监控应用程序的性能，报告客户端 CPU 负载、客户端内存使用等指标。</p><p>LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p><p>让您调试 Next.js 应用的方式现代化— <a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>