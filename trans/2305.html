<html>
<head>
<title>Learning how to use AWS Amplify in Flutter - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 Flutter - LogRocket 博客中学习如何使用 AWS Amplify</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/learning-aws-amplify-flutter/#0001-01-01">https://blog.logrocket.com/learning-aws-amplify-flutter/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在本教程中，您将了解什么是 AWS Amplify，以及如何在构建 Flutter 待办事项应用程序时使用它。</p>
<p>如今，大多数组织使用 Amazon Web Services (AWS)过渡到基于云的模型，该模型提供 90 多种服务和产品，用于快速、高效、无服务器和安全地开发 Web 和移动应用程序。</p>
<p>其中一个服务是 AWS Amplify，它通过一个简化和抽象的平台来帮助 web 和移动开发者，从而获得了关注。它附带了一组工具和服务，为用户提供了配置后端、连接应用程序、部署静态 web 应用程序和管理 AWS 控制台外部上下文的选项。</p>
<p>在本教程中，您将学习如何执行以下操作:</p>
<ul>
<li>将 Amplify 添加到颤振应用程序</li>
<li>生成数据模型</li>
<li>集成和配置放大器</li>
<li>连接到云</li>
</ul>
<p>注意，本教程假设你对颤振有一定的了解。如果你是 Flutter 新手，请浏览官方文档了解一下。</p>
<p>但是，在继续之前，请确保您具有以下要求:</p>
<ul>
<li>Git v2.14.1 或更高版本</li>
<li>npm v5.x 或更高版本</li>
<li>Node.js v12.x 或更高版本</li>
<li>颤振 2.0.0 版或更高版本(稳定)</li>
<li>AWS 帐户(创建 AWS 帐户)</li>
</ul>
<h2>Amplify 入门</h2>
<p><a href="https://github.com/himanshusharma89/todorocket" target="_blank" rel="noopener">从这里下载包含所有预建 UI 的入门应用</a>，因为您目前将专注于学习 Amplify。</p>
<p>在编辑器中打开它，构建并运行应用程序:</p>
<p><img data-attachment-id="74058" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/beginner-todo-app-aws/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws.png" data-orig-size="540,1080" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Beginner to-do app AWS" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws-150x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws-512x1024.png" decoding="async" class="size-full wp-image-74058 aligncenter jetpack-lazy-image" src="../Images/26a12284efd26cc4ffd1066e6530b568.png" alt="Beginner to-do app AWS" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws.png 540w, https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws-150x300.png 150w, https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws-512x1024.png 512w" data-lazy-sizes="(max-width: 540px) 100vw, 540px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74058" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/beginner-todo-app-aws/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws.png" data-orig-size="540,1080" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Beginner to-do app AWS" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws-150x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws-512x1024.png" decoding="async" loading="lazy" class="size-full wp-image-74058 aligncenter" src="../Images/26a12284efd26cc4ffd1066e6530b568.png" alt="Beginner to-do app AWS" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws.png 540w, https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws-150x300.png 150w, https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws-512x1024.png 512w" sizes="(max-width: 540px) 100vw, 540px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/beginner-todo-app-aws.png"/></noscript>
<p>现在，您需要安装 Amplify CLI，这是一个工具链，用于配置支持后端所需的服务，如下所示:</p>
<pre class="language-bash hljs">npm install -g @aws-amplify/cli</pre>
<p><em>注意，您正在使用<code>-g</code>全局安装 Amplify CLI。</em></p>
<p>安装后，使用以下命令配置 Amplify:</p>
<pre>amplify configure</pre>
<p><em>注意，上述配置要求您在 AWS 控制台上登录 inv。</em></p>
<p>接下来，Amplify CLI 将要求您创建一个 IAM 用户，如下所示:</p>
<pre>Specify the AWS Region
? region:  # Your preferred region
Specify the username of the new IAM user:
? user name:  # User name for Amplify IAM user
Complete the user creation using the AWS console</pre>
<p>Amazon IAM(身份和访问管理)使您能够在 AWS 中管理用户和用户权限。<a href="https://aws.amazon.com/iam/" target="_blank" rel="noopener">你可以在这里了解更多关于亚马逊 IAM 的信息</a>。</p>
<p>现在，转到控制台，创建一个具有管理员访问权限的用户来利用各种 AWS 资源。</p>
<p><img data-attachment-id="74448" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/set-up-aws-flutter/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/set-up-aws-flutter.gif" data-orig-size="640,320" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Set up AWS in Flutter" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/set-up-aws-flutter-300x150.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/set-up-aws-flutter.gif" decoding="async" class="size-full wp-image-74448 aligncenter jetpack-lazy-image" src="../Images/4309d8a0c2f3d6778f692bb34ae0b2ea.png" alt="Set Up AWS in Flutter" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/set-up-aws-flutter.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/set-up-aws-flutter.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74448" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/set-up-aws-flutter/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/set-up-aws-flutter.gif" data-orig-size="640,320" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Set up AWS in Flutter" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/set-up-aws-flutter-300x150.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/set-up-aws-flutter.gif" decoding="async" loading="lazy" class="size-full wp-image-74448 aligncenter" src="../Images/4309d8a0c2f3d6778f692bb34ae0b2ea.png" alt="Set Up AWS in Flutter" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/set-up-aws-flutter.gif"/></noscript>
<p>创建用户后获取<code>accessKeyId</code>和<code>secretAccessKey</code>，因为 Amplify CLI 会要求您提供这些信息，以便将 CLI 与创建的 IAM 用户连接起来:</p>
<pre>Enter the access key of the newly created user:
? accessKeyId:  # YOUR_ACCESS_KEY_ID
? secretAccessKey:  # YOUR_SECRET_ACCESS_KEY
This would update/create the AWS Profile in your local machine
? Profile Name:  # (default)

Successfully set up the new user.</pre>
<p>在下一步中，您将开始设置您的项目并在其中初始化 Amplify。</p>
<h2>设置项目</h2>
<h3>将 Amplify 添加到您的 Flutter 应用程序中</h3>
<p>在 pubspec 依赖项中添加 Amplify 插件，如下所示:</p>
<pre>amplify_flutter: ^0.2.0
amplify_datastore: ^0.2.0
amplify_datastore_plugin_interface: ^0.2.4</pre>
<p>要么使用您的 IDE 安装插件来保存它，要么使用下面的命令:</p>
<pre>flutter pub get</pre>
<h3>更新目标 iOS 平台和 Android 版本</h3>
<p>通过导航到<code> /ios</code>目录并更新 Podfile，将目标 iOS 平台更新到 13.0 或更高版本:</p>
<pre>platform :ios, '13.0'</pre>
<p>通过导航到<code>android/app</code>目录并更新<code>build.gradle</code>，将 Android SDK 版本更新到 21 或更高版本:</p>
<pre>minSdkVersion 21</pre>
<p>现在，您已经准备好使用 Amplify 了。</p>
<h2>创建数据模型</h2>
<h3>创建数据模型</h3>
<p>现在，您需要创建一个数据模型，供您的博客应用程序使用。这些模型被创建为 GraphQL 模式。</p>
<p>导航至<a href="https://sandbox.amplifyapp.com/start" target="_blank" rel="noopener">放大管理</a>并选择<strong>数据</strong>功能:</p>
<p><img data-attachment-id="74063" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/amplify-admin-data-feature/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Amplify Admin data feature" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature.png" decoding="async" class="size-full wp-image-74063 aligncenter jetpack-lazy-image" src="../Images/722a378fe4bf3bd058ac070ba12cc3b6.png" alt="Amplify Admin Data Feature" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature-300x147.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74063" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/amplify-admin-data-feature/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Amplify Admin data feature" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature.png" decoding="async" loading="lazy" class="size-full wp-image-74063 aligncenter" src="../Images/722a378fe4bf3bd058ac070ba12cc3b6.png" alt="Amplify Admin Data Feature" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature-300x147.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/amplify-admin-data-feature.png"/></noscript>
<p>接下来，选择<strong>待办事项列表模式</strong>并点击<strong>创建新模式</strong>:</p>
<p><img data-attachment-id="74066" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/to-do-list-schema-aws/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="To-do list schema AWS" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws.png" decoding="async" class="size-full wp-image-74066 aligncenter jetpack-lazy-image" src="../Images/152328ea6a09bc2f5406d53a0b327e9b.png" alt="To-Do List Schema AWS" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws-300x147.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74066" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/to-do-list-schema-aws/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="To-do list schema AWS" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws.png" decoding="async" loading="lazy" class="size-full wp-image-74066 aligncenter" src="../Images/152328ea6a09bc2f5406d53a0b327e9b.png" alt="To-Do List Schema AWS" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws-300x147.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/to-do-list-schema-aws.png"/></noscript>
<h4>添加字段和类型</h4>
<ul>
<li>要添加新字段，点击<strong>待办事项</strong>模型下的<strong>添加字段</strong>。</li>
<li>将该字段的<strong>字段名</strong>设置为<strong> isTaskCompleted </strong></li>
<li>对于该字段的<strong>类型</strong>，选择<strong>布尔</strong></li>
<li>在检查器面板(右面板)中，选择<strong>为必填字段</strong>使该字段成为必填字段</li>
</ul>
<p><img data-attachment-id="74068" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/istaskcompleted-aws/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="isTaskCompleted AWS" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws.png" decoding="async" class="size-full wp-image-74068 aligncenter jetpack-lazy-image" src="../Images/9e4dc35879ebd49034aef22d2d7c33d6.png" alt="isTaskCompleted AWS" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws-300x147.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74068" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/istaskcompleted-aws/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="isTaskCompleted AWS" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws.png" decoding="async" loading="lazy" class="size-full wp-image-74068 aligncenter" src="../Images/9e4dc35879ebd49034aef22d2d7c33d6.png" alt="isTaskCompleted AWS" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws-300x147.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/istaskcompleted-aws.png"/></noscript>
<p>接下来，在您的应用程序中点击<strong>本地测试。</strong></p>
<h3>生成数据模型</h3>
<p>现在完成部署步骤:</p>
<ol>
<li>你正在开发什么类型的应用程序？继续提供以下信息，点击<strong>下一步</strong>:<ul>
<li>平台:<strong>跨平台</strong></li>
<li>框架/语言:<strong>颤动</strong></li>
</ul>
</li>
<li><strong>(可选)创建新应用:</strong>如果已经创建了 Flutter 应用，则跳过此步骤</li>
<li><strong>安装 Amplify CLI 来获取数据模型:</strong> Amplify CLI 已经配置好了，所以继续在您的项目根目录中运行提供的命令，然后单击<strong>下一步</strong> : <pre>amplify pull --sandboxId &lt;UUID&gt;</pre><ol>
<li>集成 Amplify 和部署的其余步骤将在本教程的后面介绍，所以现在点击<strong> Deploy to AWS </strong>并点击<strong>登录以部署 AWS </strong>链接</li>
</ol>
</li>
</ol>
<p>到目前为止，一些新的目录和文件已经被添加到你的应用程序的根目录。要检查生成的 GraphQL 模式，导航到<code>amplify\backend\api\amplifyDatasource\schema.graphql</code>，您应该看到以下内容:</p>
<pre>type Todo @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String!
  description: String
  isTaskCompleted: Boolean!
}</pre>
<p><em>注意，你可以<a href="https://docs.amplify.aws/cli/graphql-transformer/overview/" target="_blank" rel="noopener">在这里</a>了解更多 GraphQl 模式。</em></p>
<p>现在，您的模型已经成功生成，并且可以在<code>todorocket\lib\models</code>中找到。</p>
<p><img data-attachment-id="74072" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/folder-structure-aws/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws.png" data-orig-size="372,202" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Folder structure AWS" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws.png" decoding="async" class="size-full wp-image-74072 aligncenter jetpack-lazy-image" src="../Images/6a8a37f700d44bf0d7a1a82839994248.png" alt="Folder Structure AWS" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws.png 372w, https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws-300x163.png 300w" data-lazy-sizes="(max-width: 372px) 100vw, 372px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74072" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/folder-structure-aws/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws.png" data-orig-size="372,202" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Folder structure AWS" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws.png" decoding="async" loading="lazy" class="size-full wp-image-74072 aligncenter" src="../Images/6a8a37f700d44bf0d7a1a82839994248.png" alt="Folder Structure AWS" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws.png 372w, https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws-300x163.png 300w" sizes="(max-width: 372px) 100vw, 372px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/folder-structure-aws.png"/></noscript>
<h2>积分放大器</h2>
<p>现在，您将集成 Amplify DataStore 并使用生成的模型。</p>
<p>更新<code>todo_view.dart</code>以初始化扩增库，如下所示:</p>
<pre>// Amplify Flutter Packages
import 'package:amplify_flutter/amplify.dart';
import 'package:amplify_datastore/amplify_datastore.dart';

// Generated in the previous step
import 'models/ModelProvider.dart';
import 'amplifyconfiguration.dart';</pre>
<p>如下所示更新<code>_TodosViewState </code>类中的<code>_configureAmplify</code>方法:</p>
<pre>  final AmplifyDataStore _dataStorePlugin =
      AmplifyDataStore(modelProvider: ModelProvider.instance);

Future&lt;void&gt; _configureAmplify() async {
    try {
      await Amplify.addPlugins([_dataStorePlugin]);

      await Amplify.configure(amplifyconfig);
    } catch (err) {
      debugPrint('Erro occured while configuring Amplify $err');
    }
  }</pre>
<p>在这里，您执行了以下操作:</p>
<ol>
<li>创建了<code>AmplifyDataStore object</code>、<code>_dataStorePlugin</code>。</li>
<li>更新了<code>_configureAmplify</code>方法，使用<code>_dataStorePlugin</code>配置 Amplify。</li>
</ol>
<p>接下来，创建一个<code>Todo</code>的类型列表，并更新构建方法的 body 属性，如下所示:</p>
<pre>List&lt;Todo&gt; _todos = [];

@override
  Widget build(BuildContext context) {
    ...
      // body: const Center(child: CircularProgressIndicator()),
      body: _isLoading
          ? const Center(child: CircularProgressIndicator())
          : TodosList(todos: _todos),
    ...
  }
}</pre>
<p>在这里，您将检查 Amplify 是否已配置。重新启动你的应用程序，现在你会看到一条消息，而不是一个进度指示器:</p>
<p><img data-attachment-id="74074" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/checking-amplify-configuarion/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion.png" data-orig-size="540,1080" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Checking Amplify configuration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion-150x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion-512x1024.png" decoding="async" class="size-full wp-image-74074 aligncenter jetpack-lazy-image" src="../Images/acb3aa340e81ed2c44a318195ed7bfd8.png" alt="Checking Amplify Configuration" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion.png 540w, https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion-150x300.png 150w, https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion-512x1024.png 512w" data-lazy-sizes="(max-width: 540px) 100vw, 540px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74074" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/checking-amplify-configuarion/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion.png" data-orig-size="540,1080" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Checking Amplify configuration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion-150x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion-512x1024.png" decoding="async" loading="lazy" class="size-full wp-image-74074 aligncenter" src="../Images/acb3aa340e81ed2c44a318195ed7bfd8.png" alt="Checking Amplify Configuration" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion.png 540w, https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion-150x300.png 150w, https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion-512x1024.png 512w" sizes="(max-width: 540px) 100vw, 540px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/checking-amplify-configuarion.png"/></noscript>
<p>现在，您需要更新<code>_fetchTodos</code>方法，以便使用<code>DataStore</code>在本地使用 CRUD API:</p>
<pre>Future&lt;void&gt; _fetchTodos() async {
    try {
      List&lt;Todo&gt; updatedTodos = await Amplify.DataStore.query(Todo.classType);

      // update the UI state to reflect fetched todos
      setState(() {
        _todos = updatedTodos;
      });
    } catch (e) {
      print('An error occurred while querying Todos: $e');
    }
  }</pre>
<p>在上面的代码中，对所有的<code>todo</code>条目使用一个<code>DataStore.query()</code>，并将结果分配给<code>_todos</code>列表。如果您现在重启项目，您将看不到任何<code>todo</code>项，因为我们还没有使用<strong>保存</strong>查询。</p>
<h3>创建待办事项</h3>
<p>主屏幕中的<strong>添加</strong>按钮会将您导航到<strong>添加待办事项表单</strong>视图，当单击<strong>保存</strong>按钮时，该视图不会执行任何操作。你需要解决这个问题，这样你就可以在<strong>主页</strong>屏幕上看到一个<code>Todo</code>。</p>
<p>更新<code>_saveTodo</code>方法，如下所示:</p>
<pre>Future&lt;void&gt; _saveTodo() async {
    String name = _nameController.text;
    String description = _descriptionController.text;

    Todo newTodo =
        Todo(name: name, description: description, isTaskCompleted: false);

    try {
      await Amplify.DataStore.save(newTodo);
      Navigator.pop(context);
    } catch (e) {
      debugPrint('Error occured while saving Todo $e');
    }
  }</pre>
<p>这里，您创建了一个<code>newTodo</code>对象，并使用<code>DataStore</code>保存了它。如果你现在试图保存一个<code>Todo</code>，你将被重定向到主屏幕。但是，即使重启应用程序后，您也看不到任何新的<code>Todo</code>。因此，要解决这个问题，您需要创建一个查询来列出它们。</p>
<h3>查询<code>Todos</code></h3>
<p>更新<code>_TodosViewState</code>类中的<code>_initializeApp</code>方法，如下所示:</p>
<pre>Future&lt;void&gt; _initializeApp() async {

  await _configureAmplify();

  await _fetchTodos();

  setState(() {
    _isLoading = false;
  });
}</pre>
<p>注意，也可以在<code>_configureAmplify</code>方法后使用<code>.then</code>。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>在上面的代码中，您调用了<code>_fetchTodos</code>方法，在 Amplify 配置之后从<code>DataStore</code>中获取所有的<code>Todos</code>。</p>
<p>接下来，更新<code>_fetchTodos</code>方法，如下所示:</p>
<pre>Future&lt;void&gt; _fetchTodos() async {
    try {
      List&lt;Todo&gt; updatedTodos = await Amplify.DataStore.query(Todo.classType);

      setState(() {
        _todos = updatedTodos;
      });
    } catch (e) {
      print('An error occurred while querying Todos: $e');
    }
  }</pre>
<p>这里，您通过将<code>Todo</code> <code>classType</code>传递给<code>DataStore</code>来查询所有的<code>Todo</code>条目，并更新 UI 状态以显示获取的数据。</p>
<p>如果你现在重启你的应用，你可以看到你添加的<code>Todos</code>。然而，如果你创建了一个新的<code>Todo</code>，你将不会在主屏幕上看到它们，除非你重启你的应用。现在你将解决这个问题，并进行实时<code>Todo</code>创作。</p>
<h3>收听<code>Todo</code>更新</h3>
<p>Amplify DataStore 提供了一种订阅模型数据更新的方式。</p>
<p>现在，在<code>_TodosViewState</code>下添加一个 StreamSubscription:</p>
<pre> late StreamSubscription _subscription;</pre>
<p>这里您创建了一个对<code>Todo</code>模型更新事件的订阅，稍后将在运行时初始化。</p>
<p>接下来，更新<code>dispose</code>方法，如下所示:</p>
<pre>@override
void dispose() {
  _subscription.cancel();
  super.dispose();
}</pre>
<p>在上面的代码中，当状态从树中删除时，您取消了订阅。</p>
<p>接下来，更新<code>_initializeApp</code>方法，如下所示:</p>
<pre>Future&lt;void&gt; _initializeApp() async {

  await _configureAmplify();

  _subscription = Amplify.DataStore.observe(Todo.classType).listen((event) {
    _fetchTodos();
  });

  await _fetchTodos();

  setState(() {
    _isLoading = false;
  });
}</pre>
<p>在上面的代码中，您通过将<code>Todo</code> <code>classType</code>传递给<code>Amplify.DataStore.observe(),</code>来监听<code>Todo</code>更新，当更新事件到来时，您将获取待办事项列表。</p>
<p>如果你重启应用程序并开始添加新的<code>Todo</code>，它们会开始在你的主屏幕上弹出。</p>
<p>现在，在你完成你的<code>Todo</code>之后会发生什么？您需要将那个<code>Todo</code>标记为完成，如果您注意到了，您可以在一个<code>Todo</code>项目上看到一个复选框。所以现在你需要在任务完成后更新你的<code>Todo</code>。</p>
<h3>更新<code>Todo</code></h3>
<p>在<code>DataStore</code>中，您不能直接操作记录，因为<code>DataStore</code>中的模型是不可变的。因此，要更新一条记录，您将使用 copyWith 方法。</p>
<p>现在，更新<code>TodoItem</code>类中的<code>_toggleIsComplete</code>方法，如下所示:</p>
<pre>Future&lt;void&gt; _toggleIsComplete() async {
    Todo updatedTodo = todo.copyWith(isTaskCompleted: !todo.isTaskCompleted);
    try {
      await Amplify.DataStore.save(updatedTodo);
    } catch (e) {
      print('An error occurred while saving Todo: $e');
    }
  }</pre>
<p>在这里，您正在创建您想要更新的<code>Todo</code>的新实例，但是更新了附加属性，然后再次将新实例传递给<code>Amplify.DataStore.<strong>save</strong>()</code>进行更新。</p>
<p>现在，重启你的应用程序，你就可以在<code>Todo</code>的完成和未完成状态之间切换了。此外，如果您愿意，您还可以删除一个<code>Todo</code>。</p>
<h3>删除一个<code>Todo</code></h3>
<p>删除一个<code>Todo</code>比更新它容易得多，因为你不需要复制对象来删除它。所以要从现有项目中删除一个<code>Todo</code>，可以使用长按手势，也可以根据自己的喜好进行更改。</p>
<p>现在，更新<code>TodoItem</code>中的<code>_deleteTodo</code>方法如下:</p>
<pre>void _deleteTodo(BuildContext context) async {
    try {
      await Amplify.DataStore.delete(todo);
    } catch (e) {
      print('An error occurred while deleting Todo: $e');
    }
  }</pre>
<p>在上面的代码中，您将把<code>Todo</code>对象传递给<code>DataStore.delete()</code>来从<code>DataStore</code>中删除数据。</p>
<p>重新加载你的应用程序一次，你应该能够长按一个项目删除它。现在，您已经有了一个全功能的 CRUD 应用程序。</p>
<p>接下来，您将应用程序连接到 AWS。</p>
<h2>连接到云</h2>
<p>要部署您的 Amplify 沙盒后端，请返回沙盒链接并登录您的 AWS 帐户。</p>
<p><img data-attachment-id="74077" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/connecting-aws-cloud/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Connecting to AWS Cloud" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud.png" decoding="async" class="size-full wp-image-74077 aligncenter jetpack-lazy-image" src="../Images/52258b063b70dab3f300217acda8c5c4.png" alt="Connecting to AWS Cloud" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud-300x147.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74077" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/connecting-aws-cloud/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Connecting to AWS Cloud" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud.png" decoding="async" loading="lazy" class="size-full wp-image-74077 aligncenter" src="../Images/52258b063b70dab3f300217acda8c5c4.png" alt="Connecting to AWS Cloud" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud-300x147.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/connecting-aws-cloud.png"/></noscript>
<h3>创建应用后端</h3>
<p>要创建您的应用后端，请在创建表单中提供数据:</p>
<ol>
<li>给你的应用命名</li>
<li>选择您的部署区域</li>
<li>点击<strong>确认部署</strong></li>
</ol>
<p><img data-attachment-id="74080" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/create-aws-app-backend/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend.png" data-orig-size="730,362" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create AWS app backend" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend-300x149.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend.png" decoding="async" class="size-full wp-image-74080 aligncenter jetpack-lazy-image" src="../Images/3e33c47b39039327772b12d29bec7ee8.png" alt="Create AWS App Backend" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend-300x149.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74080" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/create-aws-app-backend/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend.png" data-orig-size="730,362" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create AWS app backend" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend-300x149.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend.png" decoding="async" loading="lazy" class="size-full wp-image-74080 aligncenter" src="../Images/3e33c47b39039327772b12d29bec7ee8.png" alt="Create AWS App Backend" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend-300x149.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/create-aws-app-backend.png"/></noscript>
<p>接下来，AWS 将开始部署您的后端，当状态显示为<strong>部署</strong> <strong>完成，</strong>点击<strong>编辑后端</strong>打开您的管理 UI。</p>
<p><img data-attachment-id="74086" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/edit-aws-backend/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/edit-aws-backend-e1635271784295.png" data-orig-size="730,259" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Edit AWS backend" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/edit-aws-backend-300x107.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/edit-aws-backend-1024x364.png" decoding="async" class="wp-image-74086 size-full aligncenter jetpack-lazy-image" src="../Images/8e5e163f1228f8e1e670a78996959627.png" alt="Edit AWS Backend" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/edit-aws-backend-e1635271784295.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/edit-aws-backend-e1635271784295.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74086" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/edit-aws-backend/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/edit-aws-backend-e1635271784295.png" data-orig-size="730,259" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Edit AWS backend" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/edit-aws-backend-300x107.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/edit-aws-backend-1024x364.png" decoding="async" loading="lazy" class="wp-image-74086 size-full aligncenter" src="../Images/8e5e163f1228f8e1e670a78996959627.png" alt="Edit AWS Backend" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/edit-aws-backend-e1635271784295.png"/></noscript>
<h3>添加身份验证</h3>
<p>由于您的<strong>待办事项</strong>模型指定了一个<code>@auth</code>指令，我们需要首先添加认证。从左侧面板中，选择<strong>认证</strong>。点击<strong>部署默认值</strong>。</p>
<p><img data-attachment-id="74089" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/admin-ui-authentication/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Admin UI Authentication" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication.png" decoding="async" class="size-full wp-image-74089 aligncenter jetpack-lazy-image" src="../Images/701468d731d4566e7db7c3ce368b0ebb.png" alt="Admin UI Authentication" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication-300x147.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74089" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/admin-ui-authentication/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Admin UI Authentication" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication.png" decoding="async" loading="lazy" class="size-full wp-image-74089 aligncenter" src="../Images/701468d731d4566e7db7c3ce368b0ebb.png" alt="Admin UI Authentication" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication-300x147.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/admin-ui-authentication.png"/></noscript>
<h3>用部署的环境更新本地项目</h3>
<p>认证部署完成后，点击右上方的<strong>本地设置指令</strong>。</p>
<p><img data-attachment-id="74091" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/local-setup-instructions/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions.png" data-orig-size="730,75" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Local setup instructions" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions-300x31.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions.png" decoding="async" class="size-full wp-image-74091 aligncenter jetpack-lazy-image" src="../Images/74311c26844d908ac381f54dc731f4f2.png" alt="Local Setup Instructions" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions-300x31.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74091" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/local-setup-instructions/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions.png" data-orig-size="730,75" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Local setup instructions" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions-300x31.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions.png" decoding="async" loading="lazy" class="size-full wp-image-74091 aligncenter" src="../Images/74311c26844d908ac381f54dc731f4f2.png" alt="Local Setup Instructions" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions-300x31.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/local-setup-instructions.png"/></noscript>
<p>现在，复制命令，将后端拉入本地并运行它。</p>
<p>这将提示您使用 Amplify CLI 登录 Amplify Admin UI 点击<strong>是</strong>。</p>
<p>稍后根据您的选择进行:</p>
<pre>amplify pull --appId &lt;appId&gt; --envName staging

? Choose your default editor:
    `&lt;your editor of choice&gt;`
? Choose the type of app that you're building
    `flutter`
? Where do you want to store your configuration file?
    `./lib/`
? Do you plan on modifying this backend?
    `Yes`</pre>
<h3>添加更多插件</h3>
<p>现在，我们需要添加一些额外的插件，以确保<code>DataStore</code>能够访问与云通信所需的 API:</p>
<pre>amplify_api: ^0.2.0
amplify_auth_cognito: ^0.2.0</pre>
<p>在你的<code> pubspec.yaml</code>中加入上述依赖项，做<code>flutter pub get</code>。</p>
<p>接下来，在配置<code>_TodosViewState</code>类中的 Amplify 之前添加这些插件，并更新<code>_configureAmplify</code>方法:</p>
<pre>final AmplifyAPI _apiPlugin = AmplifyAPI();
final AmplifyAuthCognito _authPlugin = AmplifyAuthCognito();

Future&lt;void&gt; _configureAmplify() async {
    try {
      await Amplify.addPlugins([_dataStorePlugin, _apiPlugin, _authPlugin]);

      await Amplify.configure(amplifyconfig);
    } catch (err) {
      debugPrint('Erro occured while configuring Amplify $err');
    }
  }</pre>
<p>由于 Amplify 只能配置一次，因此您需要立即完全重启(停止并重启应用程序)，而不仅仅是热重启。你完了！</p>
<p><img data-attachment-id="74472" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/todorocket/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/todorocket.gif" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Todorocket demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/todorocket-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/todorocket-485x1024.gif" decoding="async" class="size-full wp-image-74472 aligncenter jetpack-lazy-image" src="../Images/9dfa0d32697b00fdb9c53306898105ea.png" alt="Todorocket Demo" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/todorocket.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/todorocket.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74472" data-permalink="https://blog.logrocket.com/learning-aws-amplify-flutter/todorocket/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/todorocket.gif" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Todorocket demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/todorocket-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/todorocket-485x1024.gif" decoding="async" loading="lazy" class="size-full wp-image-74472 aligncenter" src="../Images/9dfa0d32697b00fdb9c53306898105ea.png" alt="Todorocket Demo" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/todorocket.gif"/></noscript>
<h2>结论</h2>
<p>你可以在这里找到<a href="https://github.com/himanshusharma89/todorocket" target="_blank" rel="noopener">的开始和结束项目。在本教程中，您了解了</a><a href="https://blog.logrocket.com/aws-amplify-a-review-of-advanced-features/" target="_blank" rel="noopener"> AWS Amplify </a>以及如何轻松使用 DataStore 构建特色 CRUD 应用程序。然而，这只是开始，你可以从 AWS 文档这里了解更多关于认证、存储、函数、REST/graph QL API 和更多库<a href="https://docs.amplify.aws/" target="_blank" rel="noopener">。</a></p>
<p>我们希望你喜欢这个教程。如果您有任何疑问，请随时联系我们。谢谢大家！</p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>