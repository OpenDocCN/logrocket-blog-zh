<html>
<head>
<title>Build a text detector in React Native - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 React Native - LogRocket 博客中构建一个文本检测器</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-text-detector-react-native/#0001-01-01">https://blog.logrocket.com/build-text-detector-react-native/#0001-01-01</a></blockquote><div><article class="article-post">
<p>假设你在一家银行工作，你需要将客户表格中的数据输入电脑。要实现这一点，您必须执行以下操作:</p>
<ul>
<li>输入客户的姓名和个人详细信息</li>
<li>此外，仔细检查您是否正确输入了他们的数据。这将防止人为错误</li>
<li>最后，验证输入的数据是否在正确的字段中</li>
</ul>
<p>虽然这个解决方案可能有效，但想想这种情况:如果您的银行每天都收到数百份表格，该怎么办？因此，这会让你的工作更加乏味和紧张。那么，我们如何解决这个问题呢？</p>
<p>这就是<a href="https://docs.microsoft.com/en-us/azure/cognitive-services/computer-vision/overview-ocr" target="_blank" rel="noopener"> OCR </a>(文本检测)的用武之地。这是一种使用算法从图像中高精度获取文本的技术。使用文本识别，您可以简单地对用户的表单拍照，然后让计算机为您填写数据。结果，这会让你的工作更容易，不那么无聊。在本文中，我们将使用<a href="https://cloud.google.com/vision/" target="_blank" rel="noopener">谷歌的视觉 API </a>在 React Native 中构建一个文本检测器。</p>
<p>这将是本文的结果:</p>
<p><img data-attachment-id="94275" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/rn-text-detector-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/rn-text-detector-demo.gif" data-orig-size="562,523" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN text detector demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/rn-text-detector-demo-300x279.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/rn-text-detector-demo.gif" decoding="async" class="size-full wp-image-94275 aligncenter jetpack-lazy-image" src="../Images/e383084fa57d6e7183f814b8b7318541.png" alt="RN Text Detector Demo" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/rn-text-detector-demo.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/rn-text-detector-demo.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94275" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/rn-text-detector-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/rn-text-detector-demo.gif" data-orig-size="562,523" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN text detector demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/rn-text-detector-demo-300x279.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/rn-text-detector-demo.gif" decoding="async" loading="lazy" class="size-full wp-image-94275 aligncenter" src="../Images/e383084fa57d6e7183f814b8b7318541.png" alt="RN Text Detector Demo" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/rn-text-detector-demo.gif"/></noscript>
<p>以下是我们将采取的步骤:</p>

<p>我们开始吧！</p>
<h2 id="using-google-cloud-vision">使用谷歌云视觉</h2>
<p>在本节中，您将学习如何为您的项目激活 Google 的文本检测 API。</p>
<p>首先，导航到<a href="https://console.cloud.google.com/" target="_blank" rel="noopener">谷歌云控制台</a>，点击<code>New Project</code> : <br/> <img data-attachment-id="94280" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/google-cloud-console-new-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project.png" data-orig-size="570,433" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Google Cloud Console new project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project-300x228.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project.png" decoding="async" class="size-full wp-image-94280 aligncenter jetpack-lazy-image" src="../Images/71cf23176903c3b506548a314c0767c7.png" alt="Google Cloud Console New Project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project.png 570w, https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project-300x228.png 300w" data-lazy-sizes="(max-width: 570px) 100vw, 570px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94280" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/google-cloud-console-new-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project.png" data-orig-size="570,433" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Google Cloud Console new project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project-300x228.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project.png" decoding="async" loading="lazy" class="size-full wp-image-94280 aligncenter" src="../Images/71cf23176903c3b506548a314c0767c7.png" alt="Google Cloud Console New Project" srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project.png 570w, https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project-300x228.png 300w" sizes="(max-width: 570px) 100vw, 570px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-new-project.png"/></noscript>
<p>接下来，我们现在需要告诉 Google 我们需要使用 Cloud Vision API。为此，点击<strong>市场</strong>:</p>
<p><img data-attachment-id="94283" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/google-cloud-console-marketplace/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace.png" data-orig-size="611,492" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Google Cloud Console marketplace" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace-300x242.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace.png" decoding="async" class="size-full wp-image-94283 aligncenter jetpack-lazy-image" src="../Images/67e3c7ad3ed9f741ecfe93c9ae2766c1.png" alt="Google Cloud Console Marketplace" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace.png 611w, https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace-300x242.png 300w" data-lazy-sizes="(max-width: 611px) 100vw, 611px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94283" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/google-cloud-console-marketplace/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace.png" data-orig-size="611,492" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Google Cloud Console marketplace" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace-300x242.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace.png" decoding="async" loading="lazy" class="size-full wp-image-94283 aligncenter" src="../Images/67e3c7ad3ed9f741ecfe93c9ae2766c1.png" alt="Google Cloud Console Marketplace" srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace.png 611w, https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace-300x242.png 300w" sizes="(max-width: 611px) 100vw, 611px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-console-marketplace.png"/></noscript>
<p>完成后，搜索<strong>云视觉 API </strong>并启用它，如下所示:</p>
<p><img data-attachment-id="94287" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/enable-google-cloud-vision-api/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/enable-google-cloud-vision-api.gif" data-orig-size="720,449" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Enable Google Cloud Vision API" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/enable-google-cloud-vision-api-300x187.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/enable-google-cloud-vision-api.gif" decoding="async" class="size-full wp-image-94287 aligncenter jetpack-lazy-image" src="../Images/8b13f67d37e89be98dcdd2bbd7e7c2e8.png" alt="Enable Google Cloud Vision API" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/enable-google-cloud-vision-api.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/enable-google-cloud-vision-api.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94287" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/enable-google-cloud-vision-api/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/enable-google-cloud-vision-api.gif" data-orig-size="720,449" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Enable Google Cloud Vision API" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/enable-google-cloud-vision-api-300x187.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/enable-google-cloud-vision-api.gif" decoding="async" loading="lazy" class="size-full wp-image-94287 aligncenter" src="../Images/8b13f67d37e89be98dcdd2bbd7e7c2e8.png" alt="Enable Google Cloud Vision API" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/enable-google-cloud-vision-api.gif"/></noscript>
<p>太好了！我们现在已经启用了这个 API。然而，出于授权的目的，Google 要求我们创建一个 API 密钥。为此，点击<strong>创建凭证</strong>:</p>
<p><img data-attachment-id="94289" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/create-cloud-vision-api-credentials/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials.png" data-orig-size="730,232" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create Cloud Vision API credentials" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials-300x95.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials.png" decoding="async" class="size-full wp-image-94289 aligncenter jetpack-lazy-image" src="../Images/f4000ea6faa7aa71fb82b912685297f6.png" alt="Create Cloud Vision API Credentials" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials-300x95.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94289" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/create-cloud-vision-api-credentials/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials.png" data-orig-size="730,232" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create Cloud Vision API credentials" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials-300x95.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials.png" decoding="async" loading="lazy" class="size-full wp-image-94289 aligncenter" src="../Images/f4000ea6faa7aa71fb82b912685297f6.png" alt="Create Cloud Vision API Credentials" srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials-300x95.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/create-cloud-vision-api-credentials.png"/></noscript>
<p>在<strong>凭证</strong>菜单中，确保选中以下选项:</p>
<p><img data-attachment-id="94291" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/credentials-menu-configuration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration.png" data-orig-size="703,605" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Credentials menu configuration Google Cloud Vision" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration-300x258.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration.png" decoding="async" class="size-full wp-image-94291 aligncenter jetpack-lazy-image" src="../Images/60987ba3d3dff610f46386d707e1819d.png" alt="Credentials Menu Configuration Google Cloud Vision" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration.png 703w, https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration-300x258.png 300w" data-lazy-sizes="(max-width: 703px) 100vw, 703px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94291" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/credentials-menu-configuration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration.png" data-orig-size="703,605" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Credentials menu configuration Google Cloud Vision" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration-300x258.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration.png" decoding="async" loading="lazy" class="size-full wp-image-94291 aligncenter" src="../Images/60987ba3d3dff610f46386d707e1819d.png" alt="Credentials Menu Configuration Google Cloud Vision" srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration.png 703w, https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration-300x258.png 300w" sizes="(max-width: 703px) 100vw, 703px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/credentials-menu-configuration.png"/></noscript>
<p>接下来，点击<strong>完成</strong>。这将带您进入仪表板页面。在这里，点击<strong>创建凭证</strong>，然后点击<strong> API 键</strong>。</p>
<p><img data-attachment-id="94294" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/google-cloud-vision-api-key/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-vision-api-key-e1645567753395.png" data-orig-size="730,326" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Google Cloud Vision API key" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-vision-api-key-300x134.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-vision-api-key-e1645567753395.png" decoding="async" class="wp-image-94294 size-full aligncenter jetpack-lazy-image" src="../Images/b079f4d1e7e28ba267a5ae6966eda16c.png" alt="Google Cloud Vision API Key" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-vision-api-key-e1645567753395.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-vision-api-key-e1645567753395.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94294" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/google-cloud-vision-api-key/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-vision-api-key-e1645567753395.png" data-orig-size="730,326" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Google Cloud Vision API key" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-vision-api-key-300x134.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-vision-api-key-e1645567753395.png" decoding="async" loading="lazy" class="wp-image-94294 size-full aligncenter" src="../Images/b079f4d1e7e28ba267a5ae6966eda16c.png" alt="Google Cloud Vision API Key" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/google-cloud-vision-api-key-e1645567753395.png"/></noscript>
<p>因此，程序现在会给你一个 API 密匙。将这段代码复制到一个文件或某个安全的地方。</p>
<p><img data-attachment-id="94297" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/copy-api-key-google-cloud-vision/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision.png" data-orig-size="637,348" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Copy API key Google Cloud Vision" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision.png" decoding="async" class="size-full wp-image-94297 aligncenter jetpack-lazy-image" src="../Images/c457b12de0daa0146f628303cab4c399.png" alt="Copy API Key Google Cloud Vision" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision.png 637w, https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision-300x164.png 300w" data-lazy-sizes="(max-width: 637px) 100vw, 637px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94297" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/copy-api-key-google-cloud-vision/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision.png" data-orig-size="637,348" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Copy API key Google Cloud Vision" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision.png" decoding="async" loading="lazy" class="size-full wp-image-94297 aligncenter" src="../Images/c457b12de0daa0146f628303cab4c399.png" alt="Copy API Key Google Cloud Vision" srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision.png 637w, https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision-300x164.png 300w" sizes="(max-width: 637px) 100vw, 637px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/copy-api-key-google-cloud-vision.png"/></noscript>
<p>恭喜你！我们现在已经完成了第一步。让我们现在写一些代码！</p>
<h2 id="building-our-project">构建我们的项目</h2>
<h3 id="project-creation">项目创建</h3>
<p>要使用 Expo CLI 初始化存储库，请运行以下终端命令:</p>
<pre class="language-bash hljs">expo init text-detector-tutorial
</pre>
<p>世博会现在将提示您选择一个模板。在这里，选择显示<code>minimal</code>的选项:</p>
<p><img data-attachment-id="94299" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/expo-cli-minimal-option/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/expo-cli-minimal-option-e1645567874803.png" data-orig-size="730,295" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Expo CLI minimal option" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/expo-cli-minimal-option-300x121.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/expo-cli-minimal-option-e1645567874803.png" decoding="async" class="aligncenter wp-image-94299 size-full jetpack-lazy-image" src="../Images/ec833f91a54244234c59fcf79bedcabe.png" alt="Expo CLI Minimal Option" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/expo-cli-minimal-option-e1645567874803.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/expo-cli-minimal-option-e1645567874803.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94299" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/expo-cli-minimal-option/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/expo-cli-minimal-option-e1645567874803.png" data-orig-size="730,295" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Expo CLI minimal option" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/expo-cli-minimal-option-300x121.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/expo-cli-minimal-option-e1645567874803.png" decoding="async" loading="lazy" class="aligncenter wp-image-94299 size-full" src="../Images/ec833f91a54244234c59fcf79bedcabe.png" alt="Expo CLI Minimal Option" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/expo-cli-minimal-option-e1645567874803.png"/></noscript>
<h3 id="installation-modules">模块安装</h3>
<p>对于这个应用程序，我们将让客户从他们的相机胶卷中挑选照片。为此，我们将使用<code>expo-image-picker</code>模块:</p>
<pre class="language-bash hljs">npm i expo-image-picker
</pre>
<h3 id="coding-our-utility-functions">编码我们的效用函数</h3>
<p>创建一个名为<code>helperFunctions.js</code>的文件。顾名思义，这个文件将包含我们将在整个项目中使用的实用函数。</p>
<p>在<code>helperFunctions.js</code>中，开始编写以下代码:</p>
<pre class="language-js hljs">//file name: helperFunctions.js
const API_KEY = 'API_KEY_HERE'; //put your key here.
//this endpoint will tell Google to use the Vision API. We are passing in our key as well.
const API_URL = `https://vision.googleapis.com/v1/images:annotate?key=${API_KEY}`;
function generateBody(image) {
  const body = {
    requests: [
      {
        image: {
          content: image,
        },
        features: [
          {
            type: 'TEXT_DETECTION', //we will use this API for text detection purposes.
            maxResults: 1,
          },
        ],
      },
    ],
  };
  return body;
}
</pre>
<p>这个片段中的一些关键概念:</p>
<ul>
<li><code>API_KEY</code>常量将包含您的 API 密钥。这对于在我们的应用中整合谷歌的云视觉 API 是必要的</li>
<li>后来，我们创建了一个<code>generateBody</code>函数，它将为我们的请求生成一个有效载荷。React Native 将把这个有效负载发送给 Google，用于 OCR 目的</li>
<li>此外，该方法还接受一个<code>image</code>参数。这将包含所需图像的 base64 编码数据</li>
</ul>
<p>在此步骤之后，将以下代码添加到<code>helperFunctions.js</code>:</p>
<pre class="language-js hljs">//file: helperFunctions.js
async function callGoogleVisionAsync(image) {
  const body = generateBody(image); //pass in our image for the payload
  const response = await fetch(API_URL, {
    method: 'POST',
    headers: {
      Accept: 'application/json',
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(body),
  });
  const result = await response.json();
  console.log(result);
}
export default callGoogleVisionAsync;
</pre>
<p>让我们一段一段地分解这段代码:</p>
<ul>
<li>首先，我们使用<code>generateBody</code>函数生成一个有效载荷</li>
<li>稍后，程序向 Google 的 API 提交一个<code>POST</code>请求，并将有效载荷作为请求发送出去</li>
<li>最后，我们将服务器的响应输出到控制台</li>
</ul>
<h3 id="building-our-image-picker-component">构建我们的图像拾取器组件</h3>
<p>创建一个名为<code>ImagePickerComponent.js</code>的新文件。这个文件将负责让用户从他们的图库中选择一张照片。</p>
<p>在<code>ImagePickerComponent.js,</code>中编写以下代码:</p>
<pre class="language-js hljs">import * as ImagePicker from 'expo-image-picker';
import React, { useState, useEffect } from 'react';
import { Button, Image, View, Text } from 'react-native';

function ImagePickerComponent({ onSubmit }) {
  const [image, setImage] = useState(null);
  const [text, setText] = useState('Please add an image');

  const pickImage = async () =&gt; {
    let result = await ImagePicker.launchImageLibraryAsync({
      mediaTypes: ImagePicker.MediaTypeOptions.All,
      base64: true, //return base64 data.
      //this will allow the Vision API to read this image.
    });
    if (!result.cancelled) { //if the user submits an image,
      setImage(result.uri);
      //run the onSubmit handler and pass in the image data. 
      const googleText = await onSubmit(result.base64);
    }
  };
  return (
    &lt;View&gt;
      &lt;Button title="Pick an image from camera roll" onPress={pickImage} /&gt;
      {image &amp;&amp; (
        &lt;Image
          source={{ uri: image }}
          style={{ width: 200, height: 200, resizeMode:"contain" }}
        /&gt;
      )}
    &lt;/View&gt;
  );
}
export default ImagePickerComponent;
</pre>
<p>下面简单解释一下:</p>
<ul>
<li>在初始化<code>ImagePickerComponent</code>之后，我们创建了<code>pickImage</code>函数，它将提示用户选择一个文件</li>
<li>如果用户提交一个图像，程序将运行<code>onSubmit</code>处理程序，并将图像的 base64 数据传递给这个函数</li>
<li>此外，提交后，应用程序将显示图像到用户界面</li>
</ul>
<p>留给我们的就是渲染我们定制的<a href="https://blog.logrocket.com/how-to-build-an-image-picker-using-react-native-image-crop-picker/" target="_blank" rel="noopener">图像拾取器</a>组件。为此，在<code>App.js</code>中编写以下代码:</p>
<pre class="language-js hljs">import ImagePickerComponent from "./ImagePickerComponent";

return (
  &lt;View&gt;
    &lt;ImagePickerComponent onSubmit={console.log} /&gt;
  &lt;/View&gt;
);
</pre>
<p>这里，我们正在呈现我们的<code>ImagePickerComponent</code>模块，并传入我们的<code>onSubmit</code>处理程序。这将把所选图像的编码数据记录到控制台。</p>
<p>使用以下 Bash 命令运行应用程序:</p>
<pre class="language-bash hljs">expo start
</pre>
<p><img data-attachment-id="94301" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/running-image-picker-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/running-image-picker-component.gif" data-orig-size="720,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running an image picker component for the text detector" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/running-image-picker-component-300x161.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/running-image-picker-component.gif" decoding="async" class="size-full wp-image-94301 aligncenter jetpack-lazy-image" src="../Images/59e943e1748a0e06d7c796e602ca8e62.png" alt="Running an Image Picker Component for the Text Detector" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/running-image-picker-component.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/running-image-picker-component.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94301" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/running-image-picker-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/running-image-picker-component.gif" data-orig-size="720,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running an image picker component for the text detector" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/running-image-picker-component-300x161.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/running-image-picker-component.gif" decoding="async" loading="lazy" class="size-full wp-image-94301 aligncenter" src="../Images/59e943e1748a0e06d7c796e602ca8e62.png" alt="Running an Image Picker Component for the Text Detector" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/running-image-picker-component.gif"/></noscript>
<p>我们的代码有效！在下一节中，我们将使用 Google Vision 的强大功能在我们的应用程序中实现 OCR。</p>
<h3 id="connecting-google-cloud-vision-image-picker">将谷歌云视觉与图像拾取器连接</h3>
<p>在<code>App.js</code>中编辑以下代码:</p>
<pre class="language-js hljs">import callGoogleVisionAsync from "./helperFunctions.js";
 //code to find:
return (
  &lt;View&gt;
    {/*Replace the onSubmit handler:*/}
    &lt;ImagePickerComponent onSubmit={callGoogleVisionAsync} /&gt;
  &lt;/View&gt;
);
</pre>
<p>在这个代码片段中，我们用<code>callGoogleVisionAsync</code>替换了<code>onSubmit</code>处理程序。因此，这会将用户的输入发送到 Google 服务器进行 OCR 操作。</p>
<p>这将是输出:</p>
<p><img data-attachment-id="94303" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/text-detector-google-vision-async/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-google-vision-async.gif" data-orig-size="720,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text detector Google Vision" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-google-vision-async-300x161.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-google-vision-async.gif" decoding="async" class="size-full wp-image-94303 aligncenter jetpack-lazy-image" src="../Images/a7058dd11f0f4642a1453a29da518ed4.png" alt="Text Detector Google Vision" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-google-vision-async.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-google-vision-async.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94303" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/text-detector-google-vision-async/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-google-vision-async.gif" data-orig-size="720,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text detector Google Vision" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-google-vision-async-300x161.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-google-vision-async.gif" decoding="async" loading="lazy" class="size-full wp-image-94303 aligncenter" src="../Images/a7058dd11f0f4642a1453a29da518ed4.png" alt="Text Detector Google Vision" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-google-vision-async.gif"/></noscript>
<p>请注意，程序现在成功地从图像中获取了文本。这意味着我们的代码是成功的！</p>
<p>最后一步，将这段代码附加到<code>callGoogleVisionAsync</code>的末尾:</p>
<pre class="language-js hljs">//file: helperFunctions.js. 
//add this code to the end of callGoogleVisionAsync function
const detectedText = result.responses[0].fullTextAnnotation;
return detectedText
  ? detectedText
  : { text: "This image doesn't contain any text!" };
</pre>
<p>这告诉程序首先检查是否有有效的响应。如果满足这个条件，那么函数将返回提取的文本。否则，将会引发错误。</p>
<p>最终，您完整的<code>callGoogleVisionAsync</code>函数应该是这样的:</p>
<pre class="language-js hljs">//file: helperFunctions.js
async function callGoogleVisionAsync(image) {
  const body = generateBody(image);
  const response = await fetch(API_URL, {
    method: "POST",
    headers: {
      Accept: "application/json",
      "Content-Type": "application/json",
    },
    body: JSON.stringify(body),
  });
  const result = await response.json();
  console.log(result);
  const detectedText = result.responses[0].fullTextAnnotation;
  return detectedText
    ? detectedText
    : { text: "This image doesn't contain any text!" };
}
</pre>
<h3 id="rendering-ocr-data-ui">将 OCR 数据呈现到用户界面</h3>
<p>现在我们已经在程序中实现了 OCR，剩下的就是在 UI 中显示图像的文本。</p>
<p>在<code>ImagePickerComponent.js</code>中找到并编辑以下代码:</p>
<pre class="language-js hljs">//code to find:
if (!result.cancelled) {
  setImage(result.uri);
  setText("Loading.."); //set value of text Hook
  const responseData = await onSubmit(result.base64);
  setText(responseData.text); //change the value of this Hook again.
}
//extra code removed for brevity
//Finally, display the value of 'text' to the user
return (
  &lt;View&gt;
    &lt;Text&gt;{text}&lt;/Text&gt;
    {/*Further code..*/}
  &lt;/View&gt;
);
</pre>
<ul>
<li>当用户选择了一个图像时，将<code>text</code>钩子的值设置为响应数据</li>
<li>最后，显示<code>text</code>变量的值</li>
</ul>
<p><img data-attachment-id="94305" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/text-detector-final-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-final-output.gif" data-orig-size="720,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text detector RN final output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-final-output-300x161.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-final-output.gif" decoding="async" class="size-full wp-image-94305 aligncenter jetpack-lazy-image" src="../Images/e885fc362519b57e59c43b55ac6f0ef1.png" alt="Text Detector RN Final Output" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-final-output.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-final-output.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="94305" data-permalink="https://blog.logrocket.com/build-text-detector-react-native/text-detector-final-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-final-output.gif" data-orig-size="720,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text detector RN final output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-final-output-300x161.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-final-output.gif" decoding="async" loading="lazy" class="size-full wp-image-94305 aligncenter" src="../Images/e885fc362519b57e59c43b55ac6f0ef1.png" alt="Text Detector RN Final Output" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/text-detector-final-output.gif"/></noscript>
<p>我们完事了。</p>
<p>最后，你的<code>ImagePickerComponent</code>应该是这样的:</p>
<pre class="language-js hljs">function ImagePickerComponent({ onSubmit }) {
  const [image, setImage] = useState(null);
  const [text, setText] = useState("Please add an image");
  const pickImage = async () =&gt; {
    let result = await ImagePicker.launchImageLibraryAsync({
      mediaTypes: ImagePicker.MediaTypeOptions.All,
      base64: true,
    });
    if (!result.cancelled) {
      setImage(result.uri);
      setText("Loading..");
      const responseData = await onSubmit(result.base64);
      setText(responseData.text);
    }
  };
  return (
    &lt;View&gt;
      &lt;Button title="Pick an image from camera roll" onPress={pickImage} /&gt;
      {image &amp;&amp; (
        &lt;Image
          source={{ uri: image }}
          style={{ width: 400, height: 300, resizeMode: "contain" }}
        /&gt;
      )}
      &lt;Text&gt;{text}&lt;/Text&gt;
    &lt;/View&gt;
  );
}
</pre>
<p><strong>结论</strong></p>
<p>这里是这篇文章的源代码。</p>
<p>在本文中，您学习了如何在您的项目中使用 Google Cloud Vision，以及如何<a href="https://blog.logrocket.com/how-to-extract-text-from-an-image-using-javascript-8fe282fb0e71/" target="_blank" rel="noopener">实现文本检测功能</a>。除了数据输入，我们还可以在多种情况下使用我们全新的 OCR 应用程序，例如:</p>
<ul>
<li>零售和营销:超市使用文本检测技术扫描和存储折扣券。在这里，OCR 程序扫描文本并检查优惠券是否可用</li>
<li>业务:当用户将数据写在纸质文档上时，政府机构使用 OCR 将记录数字化。在这个用例中，软件首先扫描客户端数据并验证它，以确保用户遵循了给定的格式</li>
</ul>
<p>如果您遇到任何困难，我鼓励您尝试并解构这些代码，以便您可以完全理解其内部工作原理。</p>
<p>非常感谢你坚持到最后！编码快乐！</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>