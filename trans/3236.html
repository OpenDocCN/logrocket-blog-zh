<html>
<head>
<title>Building single-page applications with CSS transitions - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用CSS转换构建单页应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/single-page-applications-css-transitions/#0001-01-01">https://blog.logrocket.com/single-page-applications-css-transitions/#0001-01-01</a></blockquote><div><article class="article-post">
<p>网络是不断变化的。从速度，到结构，到质量，没有什么是一成不变的。说到结构，过去分散在多个页面上的内容现在可以压缩到一个页面中。</p>
<p>在本文中，我们将关注单页面应用程序，通常称为SPAs，以及它们给web开发领域带来了哪些重大变化。</p>
<p>在本文中，我们将探索:</p>

<h2 id="what-are-spas">什么是水疗？</h2>
<p>在深入研究任何东西之前，让我们看看什么是spa，以及在它们之前开发人员使用的是什么。</p>
<p>你知道默认情况下，当你想访问一个新页面时，浏览器会刷新吗？有了SPAs，情况就不同了——页面上的内容是从服务器重写的，内容的改变不需要刷新浏览器。</p>
<p>如果你使用过GitHub、Twitter甚至Gmail这样的网站，那么你已经接触过spa了。当你在这些网站的标签之间导航时，你不会重新加载浏览器。这些页面被连接在一起，就好像它们都是在一个HTML文件中编写的一样(事实也的确如此)。</p>
<p>在SPAs出现之前，人们使用的是多页面应用程序(MPAs ),有时至今仍在使用。大多数web浏览器都与MPAs兼容，开发人员不需要像spa那样为它们编写额外的功能。在MPAs中，当需要显示新内容(比如新页面)时，会向服务器请求新页面。然后浏览器显示新页面，这将导致重新加载。</p>
<p>在本文中，我们将创建一个以猫为主题的SPA，并使用green sock Animation Platform(GSAP)、<a href="https://greensock.com/gsap/" target="_blank" rel="noopener">一个JavaScript动画库</a>向其中添加动画。下面的小GIF是我们最终网站的预览。</p>
<p><img data-attachment-id="127072" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/final-site-preview/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Preview of final site" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview.gif" decoding="async" class="aligncenter size-full wp-image-127072 jetpack-lazy-image" src="../Images/56d560904c0f068c0ff00cef55888e61.png" alt="Preview Of Final Site" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="127072" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/final-site-preview/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Preview of final site" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-127072" src="../Images/56d560904c0f068c0ff00cef55888e61.png" alt="Preview Of Final Site" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview.gif"/></noscript>
<h2 id="where-to-use-spas">哪里可以使用水疗</h2>
<p>虽然听起来很神奇，但是在某些方面，温泉并不能取代海洋保护区。</p>
<p>电子书<em>用ASP.NET核心和Azure设计现代网络应用</em>中的一段摘录说，你可以在以下情况下使用spa:</p>
<ol>
<li>您的应用程序旨在显示具有多种功能的丰富界面</li>
<li>这是一个数据量很小的网站</li>
<li>你的网站不太依赖SEO。因为SPAs涉及一个单一的网址，搜索引擎优化是非常棘手的，因为它缺乏索引和良好的分析</li>
<li>该网站利用了类似社交媒体平台的实时提醒或通知等功能</li>
</ol>
<p>在以下情况下，您知道是时候使用海洋保护区了:</p>
<ol>
<li>您站点的客户端需求很容易满足</li>
<li>您的应用程序不需要JavaScript就能在浏览器中运行</li>
</ol>
<h2 id="using-spas-mobile-devices">在移动设备上使用spa</h2>
<p>spa还允许用户在移动设备应用程序中无缝导航。如果你在手机上通过浏览器登录你的Twitter账户，你仍然有SPA效应。导航一如既往的流畅，浏览器标签页绝对没有重新加载。</p>
<h2 id="tutorial-building-spas">建造温泉的教程</h2>
<p>现在我们将探索构建单页应用程序的步骤。下面的步骤假设没有框架知识，将涵盖用HTML、CSS和普通JavaScript构建spa。因为我们偶尔喜欢让事情变得漂亮，我们也会添加CSS页面过渡。</p>
<p>该教程包括:</p>
<ul>
<li>创建项目目录</li>
<li>正在安装必要的依赖项。首先，通过在终端或命令行中键入<code>node -v</code>,确保您的计算机上安装了Node。如果显示Node的一个版本，那么您就可以开始了。Linux用户输入<code>npm install node</code>或者<a href="https://nodejs.org/en/" target="_blank" rel="noopener">访问这个链接</a>来获得你正在使用的任何操作系统的软件包管理器</li>
<li>设置Express服务器</li>
<li>根据您的需要创建HTML和CSS文件。这可以只是一些标签或一个小项目，以进一步加深你的理解。这完全取决于你和你想建立什么</li>
<li>在新创建的服务器上测试您的标记</li>
<li>深入到事物的JavaScript方面</li>
</ul>
<p>本教程到此为止。这些是你在互联网上看到的最简单的步骤。</p>
<p>开个玩笑！当然，我们会经历每一步。</p>
<h2 id="keyboard">所有人都在甲板上…我的意思是键盘</h2>
<p>本节将分为两部分。首先，我们将用普通的JavaScript创建我们的SPA。你不需要任何以前的框架知识，因为我们将从头开始构建一切。</p>
<p>第二部分是我们将添加CSS页面转换，使导航更加流畅和漂亮。</p>
<h2 id="html-css-javascript-spa">第1部分:结合HTML、CSS和JavaScript创建SPA</h2>
<p>一切都从目录开始。我们需要存放文件的容器。我将使用CodeSandbox进行演示，但请随意打开您的代码编辑器和代码。</p>
<p>在您的终端中，我们想要创建一个名为<code>SPA-tut</code>的目录，并在其中创建另一个名为<code>src</code>的目录。</p>
<pre class="language-html hljs">terminal commands
mkdir SPA-tut
cd SPA-tut
mkdir src
cd src</pre>
<p>使用您选择的任何IDE打开<code>SPA-tut</code>。因为没有一个项目没有一个<code>index.html</code>文件是完整的，我们将在我们的<code>src</code>文件夹中创建一个。</p>
<p>我们不会建立一个完整的网站，只是一个小导航栏和几个链接来演示。在我们的<code>index.html</code>中，我们有以下降价:</p>
<pre class="language-html hljs">   &lt;nav class="navbar"&gt;
       &lt;div class="logo"&gt;
           &lt;p&gt;Meowie&lt;/p&gt;
 
       &lt;/div&gt;
 
       &lt;ul class="nav-items"&gt;
           &lt;li&gt;&lt;a href="/" data-link&gt;Home&lt;/a&gt;&lt;/li&gt;
           &lt;li&gt;&lt;a href="/about" data-link&gt;About&lt;/a&gt;&lt;/li&gt;
           &lt;li&gt;&lt;a href="/contact" data-link&gt;Contact us&lt;/a&gt;&lt;/li&gt;
       &lt;/ul&gt;
   &lt;/nav&gt;
 
   &lt;div id="home"&gt;&lt;/div&gt;</pre>
<p>注意我们是如何添加数据属性的。这使用History API <code>pushState()</code>方法导航到一个资源，而不需要刷新。你现在不需要明白这些，但我们最终会明白的。</p>
<p>我们的样式表也一样小。</p>
<pre class="language-css hljs">*{
   padding: 0;
   margin: 0;
   box-sizing: border-box;
}

.navbar{
   background-color: pink;
   padding: 20px;
   display: flex;
   justify-content: space-between;
   align-items: center;
}
.nav-items{
   display: flex;
}

a{
   text-decoration: none;
   color: white;
   font-weight: bold;
   font-size: x-large;
}
.link{
   color: pink;
   font-size: medium;
}
.logo{
   color: white;
   font-weight: bold;
   font-size: xx-large;
   font-style: oblique;
}
ul{
   list-style: none;
}
.navbar ul li{
   margin-left: 15px;
}

#home{
   display: flex;
   align-items: center;
   margin: 20px;

}
.img{
   width: 80%;
   height: 80%;
}
</pre>
<p>我们的网站应该是这样的:</p>
<p><img data-attachment-id="127075" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/basic-site/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Basic site" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site.png" decoding="async" class="aligncenter size-full wp-image-127075 jetpack-lazy-image" src="../Images/c396bb9804a4eb3ce4082142134d2b9c.png" alt="Basic Site" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="127075" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/basic-site/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Basic site" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-127075" src="../Images/c396bb9804a4eb3ce4082142134d2b9c.png" alt="Basic Site" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/basic-site.png"/></noscript>
<p>普通的HTML和CSS对我们没有任何好处，所以让我们直接进入JavaScript吧。我们将再创建两个文件夹:一个在<code>src</code>文件夹中的<code>static</code>文件夹中的<code>js</code>文件夹，以及一个<code>index.js</code>文件。现在，我们想通过在结束的<code>body</code>标签上方使用一个<code>script</code>标签将这个JS文件连接到我们的<code>index.html</code>。</p>
<pre class="language-html hljs">&lt;script type="module" src="/static/js/index.js"&gt;&lt;/script&gt;
</pre>
<p>我们在这里添加了类型<code>module</code>,因为我们将在项目过程中使用ES6的导入和导出功能。</p>
<p>为了本教程的缘故，我们的网站没有响应，但请放心成为更好的开发者，使您的网站与其他设备兼容。</p>
<h3 id="creating-spa-server-express">使用Express创建SPA服务器</h3>
<p>对于这个SPA，我们将利用Express库来创建我们的服务器。不要担心，你不需要大量的Express知识。</p>
<p>在源目录下创建一个<code>server.js</code>文件。正如我之前提到的，我们需要先安装Node，然后才能获得其他所需的包或库。在您的终端中:</p>
<ol>
<li>键入<code>npm init -y</code>创建一个<code>package.json</code></li>
<li>键入<code>npm i express</code>安装Express</li>
</ol>
<p>如果您以前安装了节点，这些应该没有太大的麻烦。</p>
<p>对于服务器，我们需要在刚刚创建的<code>server.js</code>文件中创建一个Express应用程序。</p>
<pre class="language-javascript hljs">const express = require('express');
const path = require('path');
const hostname = '127.0.0.1';
const port = 3000;

const app = express();

app.get("/*", (req, res) =&gt; {
   res.sendFile(path.resolve(__dirname, 'src', 'index.html'));
});

//listen for request on port 3000
app.listen(port, hostname, () =&gt; {
   console.log(`Server running at http://${hostname}:${port}/`);
 });
</pre>
<p>为了导入快递，我们叫<code>require()</code>。我们的应用程序监听我们上面指定的通过端口<code>3000</code>发送的任何请求。<code>app.get</code>从指定的URL获取请求。在这种情况下，它通过调用<code>sendFile()</code>函数来实现，该函数使用<code>path.resolve()</code>从左到右处理路径序列，直到创建了绝对路径。我们的路径是<code>/*</code>的原因是，无论我们在浏览器中向URL添加什么端点，我们都希望页面重定向到<code>index.html</code>。</p>
<p>然后，<code>app.listen</code>监听端口<code>3000</code>上的任何请求，并记录一条传递主机名和端口号的消息。</p>
<p>如果您从终端复制路径并粘贴到浏览器中，我们从<code>index.html</code>文件得到的输出应该会显示出来。它没有固定的样式，但是我们最终可以很容易地修复它。点击任何链接只会刷新页面。</p>
<p><img data-attachment-id="127080" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/links-without-styling/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Links without styling" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling.png" decoding="async" class="aligncenter size-full wp-image-127080 jetpack-lazy-image" src="../Images/b340945180fd574177a9f98ccc71f1e2.png" alt="Links Without Styling" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="127080" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/links-without-styling/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Links without styling" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-127080" src="../Images/b340945180fd574177a9f98ccc71f1e2.png" alt="Links Without Styling" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/links-without-styling.png"/></noscript>
<p>如果我们打开控制台，我们会看到一个显示<code>Failed to load module script...</code>的错误。</p>
<p>我们可以通过在我们的<code>server.js</code>文件中的<code>app.get</code>函数之前添加下面一行来解决这个问题:</p>
<pre class="language-javascript hljs">app.use("/static", express.static(path.resolve(__dirname,'src', 'static')));
</pre>
<h3 id="editing-client-side-spa-javascript">用JavaScript编辑客户端SPA</h3>
<p>已经受够了服务器。让我们开始做一些有意义的工作。</p>
<p>第一步是创建一个路由器。我们将在一个异步函数中加载每个视图(或页面)的内容。它是异步的，因为我们可能希望从服务器端加载某些内容。</p>
<p>为了定义各种路线，让我们创建一个对象数组，每个对象都有自己的路线。</p>
<pre class="language-javascript hljs">const router = async () =&gt; {
   const routes = [
       {
           path: "/",
           view:  view: () =&gt; console.log("Home")
       },
       {
           path: "/about",
           view: () =&gt; console.log("About us")
       },
       {
           path: "/contact",
           view: () =&gt; console.log("Contact")
       }


   ];

};
</pre>
<p><code>view</code>此时只是一个显示视图的功能。随着我们的发展，我们将对其进行调整，以便更好地为我们服务。</p>
<p>但是假设我们改变了我们的路线，完全脱离了上下文(我的意思是在我们的URL中添加“无意义的”端点)。我们想检查一个已经输入的路由是否是数组的一个元素。为此，我们将使用<code>map</code>数组方法遍历每个数组元素并返回一个新对象。</p>
<pre class="language-javascript hljs">//test each route for match
const checkMatches = routes.map(route =&gt; {
       return{
           route: route,
           isMatch: location.pathname === route.path //returns a boolean value
       };
   });

console.log(checkMatches);
</pre>
<p>如果路线确实在数组中，<code>checkMatches</code>将返回路线名称和一个布尔值true。如果我们刷新浏览器，我们在控制台中看不到任何内容。这是因为我们还没有调用路由器函数本身。</p>
<p>因此，在路由器功能之外，让我们这样做:</p>
<pre class="language-javascript hljs">document.addEventListener('DOMContentLoaded', () =&gt; {

   router();
})
</pre>
<p>当我们的页面加载时，路由器功能将运行。</p>
<p>现在，让我们试着自己做实验。</p>
<p><img data-attachment-id="127082" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/checking-link-routes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Checking link routes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes.png" decoding="async" class="aligncenter size-full wp-image-127082 jetpack-lazy-image" src="../Images/19749f9d9bcd52267a10882719008a57.png" alt="Checking Link Routes" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="127082" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/checking-link-routes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Checking link routes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-127082" src="../Images/19749f9d9bcd52267a10882719008a57.png" alt="Checking Link Routes" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/checking-link-routes.png"/></noscript>
<p>您会看到，如果我们将<code>/about</code>添加到URL中，数组的第二个元素是<code>true</code>，其他元素被设置为<code>false</code>。如果我们将URL设置为不在数组中的路由，那么<code>isMatch</code>的所有值都将是<code>false</code>。</p>
<p>但是假设我们只想获取路由名称并执行检查。</p>
<pre class="language-javascript hljs">let match = checkMatches.find(checkMatch =&gt; checkMatch.isMatch);

   console.log(match);

</pre>
<p>当我们现在输入路径时，<code>find</code>函数从数组中挑选出匹配的路径，并返回一个布尔值，告诉我们这个特定的路径是否在数组中。</p>
<p>但是如果我们添加一个不在数组中的路由，我们会在控制台中得到<code>undefined</code>。我们需要定义一个<code>not found</code>或<code>404</code>根。</p>
<pre class="language-javascript hljs">if(!match){
       match = {
           route: routes[0]
       }
   }

   console.log(match.route.view);
</pre>
<p>如果没有匹配，我们的404页面将成为数组索引0处的视图，也就是主页。您可能会决定为这种情况创建一个自定义的404页面。</p>
<p>如果我们刷新浏览器并点击任何链接，那么我们上面声明的<code>view</code>函数将会运行，该视图的名称将会显示在控制台中。</p>
<h3 id="navigation-using-history-api">使用历史API导航</h3>
<p>我们希望在视图之间导航，并在不重新加载浏览器的情况下更改URL。为此，我们需要实现<a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" target="_blank" rel="noopener">历史API </a>。在定义路由器函数之前，我们先定义一个名为<code>navigateTo</code>的新函数。</p>
<pre class="language-javascript hljs">const navigateTo = url =&gt; {
   history.pushState(null, null, url);
   router();
};
</pre>
<p>为了调用这个函数，我们将创建一个事件监听器。</p>
<pre class="language-javascript hljs">document.addEventListener('DOMContentLoaded', () =&gt; {
   document.body.addEventListener('click', e =&gt; {
       if(e.target.matches('[data-link]')){
           e.preventDefault();
           navigateTo(e.target.href);
       }
   })

   router();
})
</pre>
<p>因此，我们的<code>click</code>事件检查链接是否具有<code>data-link</code>属性。如果是这样，我们希望停止默认的动作，即浏览器重新加载，并将目标指向该链接的<code>href</code>。这是一个委托的事件监听器，所以如果我们将内容添加到包含这些链接的视图中，这些链接应该会像我们一直描述的那样正常工作。</p>
<p>试着在页面上的链接间导航，并把你的眼睛放在浏览器标签上。当你点击的时候页面会重新加载吗？从HTML中移除<code>data-link</code>并再次尝试点击。</p>
<h3 id="popstate-view-different-spa-pages">使用<code>popstate</code>查看SPA中的不同页面</h3>
<p>当您在链接之间单击时，您还可以在控制台中看到变化。将显示视图的名称。如果我们尝试点击<strong> back </strong>按钮转到之前的视图，<code>router</code>功能不会运行，因此，我们点击返回的新视图不会显示。</p>
<p>所以，在我们的<code>DOMContentLoaded</code>事件监听器之前，让我们先听一下<code>popstate</code>事件。</p>
<pre class="language-javascript hljs">window.addEventListener('popstate', router);
</pre>
<p>刷新您的浏览器，并尝试在页面之间来回移动。您会看到，对于每一页，<code>view</code>函数都会运行并显示在控制台上。</p>
<h3 id="displaying-spa-views">展示您水疗中心的景观</h3>
<p>让我们从简单的<code>console.log</code>切换到实际显示视图的类。在<code>js</code>目录中，我们将创建一个名为<code>pages</code>的新目录。</p>
<p>我们将为每个视图创建类，但是首先，让我们创建一个其他视图将继承的类。在<code>pages</code>文件夹中创建一个<code>view.js</code>文件。</p>
<pre class="language-javascript hljs">export default class{
   constructor(){

   }

   setTitle(title){
       document.title = title;
   }

   async getHtml(){
       return '';
   }
}
</pre>
<p>当我们在视图间导航时，<code>setTitle</code>方法将更新视图的页面标题。<code>getHTML</code>方法是我们为一个特定的视图放入HTML内容的地方。</p>
<p>现在让我们创建一个<code>Home.js</code>文件，我们将在其中创建一个扩展上面的<code>view</code>类的类。</p>
<pre class="language-javascript hljs">import view from './view.js'

export default class extends view{
   constructor(){
       super();
       this.setTitle("Home");
   }

   async getHtml(){
       return `

       &lt;div class="text"&gt;
           &lt;h1&gt;An album for your cuties&lt;/h1&gt;
           &lt;p&gt;Meowies lets you upload pictures of your cats, so that you never lose them. Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequatur commodi eveniet fugit veritatis. Id temporibus explicabo enim sunt, officiis sapiente.
           Read &lt;a href="/about" data-link class="link"&gt;about&lt;/a&gt; us here &lt;/p&gt;
       &lt;/div&gt;

       &lt;div&gt;
           &lt;img src="/static/cats.jpg" alt="cat in ribbons" class="img"&gt;
       &lt;/div&gt;


       `;
   }
}
</pre>
<p>在我们的构造函数中，我们将标题设置为<code>Home</code>来反映视图。在我们的<code>getHTML</code>方法中，我们返回了一大块HTML。</p>
<p>我们现在想把HTML注入到路由器中。在<code>index.html</code>文件的顶部，我们导入了<code>Home</code>类。</p>
<pre class="language-javascript hljs">import Home from './pages/Home.js'
</pre>
<p>在我们的routes数组中，我们也将视图函数更改为<code>Home</code>类。</p>
<pre class="language-javascript hljs">      {
           path: "/",
           view: Home
       },
</pre>
<p>最后一步:</p>
<pre class="language-javascript hljs">  const view = new match.route.view();

   document.querySelector("#home").innerHTML = await view.getHtml();
</pre>
<p>如果我们刷新浏览器，我们的主视图看起来有点像这样:</p>
<p><img data-attachment-id="127088" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/edited-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Edited homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage.png" decoding="async" class="aligncenter size-full wp-image-127088 jetpack-lazy-image" src="../Images/92c07a3deff1a2490e8e2ec616c9191d.png" alt="Edited Homepage" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="127088" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/edited-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Edited homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-127088" src="../Images/92c07a3deff1a2490e8e2ec616c9191d.png" alt="Edited Homepage" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-homepage.png"/></noscript>
<p>注意我是如何在末尾添加了一个<code>about</code>链接的？如果您单击它，您会注意到没有浏览器刷新。这是由于我之前提到的委托事件。</p>
<p>从这里开始，为其他视图创建类将是非常相似的过程。我们将为我们创建的每个新视图扩展<code>view</code>类，并将新视图的类导入到我们的<code>index.html</code>文件中。</p>
<h3 id="editing-browser-display-css">用CSS编辑浏览器显示</h3>
<p>让我们稍微移动一下CSS文件，以便它对我们的<code>index.html</code>文件生效。让我们在静态文件夹中创建一个<code>css</code>文件夹，并将我们的<code>styles.css</code>文件移动到其中。如果我们将HTML文件链接到样式表，那么我们的网站就会变成这样。</p>
<p><img data-attachment-id="127090" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/stylized-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Stylized homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage.png" decoding="async" class="aligncenter size-full wp-image-127090 jetpack-lazy-image" src="../Images/12656678206f1c69681bab1a052f0b95.png" alt="Stylized Homepage" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="127090" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/stylized-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Stylized homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-127090" src="../Images/12656678206f1c69681bab1a052f0b95.png" alt="Stylized Homepage" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/stylized-homepage.png"/></noscript>
<p>这并不新奇，但足以向你展示它是如何工作的。</p>
<p>为了创建其他视图，我们将像对<code>Home.js</code>那样做。假设这是本文的简单任务。你的应该比我的好看。</p>
<p>创建完所有视图后，我的<strong>关于</strong>和<strong>联系人</strong>部分看起来有点像这样:</p>
<p><img data-attachment-id="127113" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/edited-about-section/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Edited About section" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section.png" decoding="async" class="aligncenter size-full wp-image-127113 jetpack-lazy-image" src="../Images/47ca47459a46cb635e3049c2582b610b.png" alt="Edited About Section" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="127113" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/edited-about-section/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Edited About section" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-127113" src="../Images/47ca47459a46cb635e3049c2582b610b.png" alt="Edited About Section" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-about-section.png"/></noscript>
<p><img data-attachment-id="127115" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/edited-contact-section/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Edited Contact section" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section.png" decoding="async" class="aligncenter size-full wp-image-127115 jetpack-lazy-image" src="../Images/7ffa146bddd35f4177556c0239e4167d.png" alt="Edited Contact Section" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="127115" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/edited-contact-section/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section.png" data-orig-size="730,410" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Edited Contact section" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-127115" src="../Images/7ffa146bddd35f4177556c0239e4167d.png" alt="Edited Contact Section" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/edited-contact-section.png"/></noscript>
<p>就像我说的，没什么特别的。你会看到链接变了，页面标题也更新了(我的截图里没有)。</p>
<p>这就是了。功能齐全的单页应用程序。现在添加一些页面过渡。</p>
<h2 id="css-page-transitions">第二部分:CSS页面转换</h2>
<p>这部分是我的最爱。为了创建平滑的页面过渡，我们将使用JavaScript动画库和一些CSS来帮助我们。</p>
<p>我将使用的动画库是GSAP。它使得在你的站点上应用动画变得相对容易，并且只需要几行JavaScript代码。要了解更多关于GSAP的信息并免费获得他们的超级小抄，<a href="https://greensock.com/gsap/" target="_blank" rel="noopener">在这里查阅</a>。</p>
<h3 id="installing-greensock-animation-platform">安装GreenSock动画平台(GSAP)</h3>
<p>出于本教程的考虑，我们将使用CDN向GSAP介绍我们的项目。</p>
<pre class="language-css hljs">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"&gt;&lt;/script&gt;
</pre>
<p>您可以在您的结束标签<code>&lt;body&gt;</code>之前添加这个。</p>
<h3 id="sliding-effect-css">有趣的部分:CSS的滑动效果</h3>
<p>我们想在我们的应用程序中创建某种滑动效果。要做到这一点，我们需要一些东西在显示页面内容之前滑过页面。</p>
<p>让我们在HTML的底部添加一个额外的<code>div</code>标签，并给它一个类<code>slider</code>。</p>
<pre class="language-html hljs">&lt;div class="slider"&gt;&lt;/div&gt;</pre>
<p>对于我们的<code>styles.css</code>,我们将通过添加以下内容来设置滑块的样式:</p>
<pre class="language-css hljs">.slider{
  position:fixed;
  top:0;
  left: 0;
  background-color: palevioletred;
  width: 100%;
  height: 100%;
  transform: translateY(100%);
}
</pre>
<p>如果你刷新页面，什么都不会改变。滑块在那里，但是<code>transform</code>属性使它保持在页面内容的下面，所以我们实际上看不到它。</p>
<p>当我们第一次打开页面时，我们希望滑块在页面上向上滑动。这就是GSAP发挥作用的时候。在我们的<code>index.js</code>中，我们必须首先初始化GSAP，然后才能开始使用它。因为我们希望页面加载时有动画，所以我们将在类导入下面初始化我们的GSAP。</p>
<pre class="language-javascript hljs">const tl = gsap.timeline({ defaults: {ease:'power2.out'} });
</pre>
<p>上面一行简单地定义了我们的时间线，并将一切设置为默认值。</p>
<p>我们的第一个动画将是滑块，从页面上的位置向上滑动。</p>
<pre class="language-javascript hljs">tl.to('.slider', {y: "-100%", duration:1.2});
</pre>
<p>我们所做的是使用我们声明的时间轴来定位slider类。<code>y: “-100%”</code>替换了我们最初为CSS设置的<code>translateY(100%)</code>。<code>duration:1.2</code>只是为了计时而设置的。因此，当我们的页面第一次加载时，我们的滑块将在页面内容上向上滑动。</p>
<p>但是动画在我看来还是不太对劲。为了使它更好，我们希望我们的页面内容也向上滑动，就在滑块上升之后。为了做到这一点，我们将不得不在我们的HTML中以<code>home</code> ID为目标，因为它包含了我们的页面内容。</p>
<p>就在滑块动画之后，我们将添加:</p>
<pre class="language-javascript hljs">tl.to('#home', {y: "0%", duration:1.2}, "-=1");
</pre>
<p>和以前一样，我们将目标指向了ID<code>home</code>并为它设置了一个持续时间。额外的<code>-=1</code>是为了让页面内容在滑块之后立即向上滑动。如果我们把它拿出来，你会注意到一些延迟。</p>
<p>但就这样吗？</p>
<p>不。我们还没有添加我们正在谈论的视图之间的平滑过渡。既然您已经看到了这个过程是如何工作的，那么为视图添加过渡就不会那么困难了。</p>
<p>我们希望在用户点击链接时创建一个平滑的过渡，所以我们将在点击事件中添加动画。</p>
<p>我们调整后的JavaScript将如下所示:</p>
<pre class="language-javascript hljs">document.addEventListener('DOMContentLoaded', () =&gt; {
   document.body.addEventListener('click', e =&gt; {
       e.preventDefault();
       tl.to('.slider', {y: "100%", duration:0});

       if(e.target.matches('[data-link]')){
           tl.to('.slider', {y: "-100%", duration:1.2});
           tl.fromTo('#home', {opacity: 0}, {opacity:1, duration:0.5});

           navigateTo(e.target.href);
       }

   })

   router();
})
</pre>
<p>记住，当我们的滑块上升后，它停留在原位。因此，当用户点击时，滑块下降，然后再次上升。第一个动画的持续时间被设置为零，所以你不会注意到它下滑。这里设置了动画，这样每当用户点击一个链接时，动画就会继续播放。</p>
<p>为了让事情变得更顺利，一旦点击滑动条，我们希望页面内容的不透明度快速改变，并创建一个漂亮的淡出效果。</p>
<pre class="language-javascript hljs"> tl.fromTo('#home', {opacity: 0}, {opacity:1, duration:0.5});
</pre>
<p><code>fromTo</code>表示动画有起点和终点。它从0的不透明度开始，到0.5s的不透明度达到1</p>
<p>调整动画后，我们的SPA现在看起来像这样:</p>
<p><img data-attachment-id="127119" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/final-site-preview-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-1.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final site preview" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-1-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-1.gif" decoding="async" class="aligncenter size-full wp-image-127119 jetpack-lazy-image" src="../Images/a0791b977eac1c517f3806fea04df3d4.png" alt="Final Site Preview" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-1.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-1.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="127119" data-permalink="https://blog.logrocket.com/single-page-applications-css-transitions/attachment/final-site-preview-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-1.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final site preview" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-1-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-1.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-127119" src="../Images/a0791b977eac1c517f3806fea04df3d4.png" alt="Final Site Preview" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/final-site-preview-1.gif"/></noscript>
<p>我们有一个很好的滑块和每一页很好的褪色。</p>
<h2 id="conclusion">结论</h2>
<p>这标志着本文的结束。我们已经讨论了什么是spa，如何从头开始创建spa，以及如何在视图之间添加平滑的页面过渡。</p>
<p>要查看该项目的完整代码，请使用这里的<a href="https://github.com/Njong392/single-page-application-LogRocket" target="_blank" rel="noopener"> Github repo链接</a>。</p>
<p>希望这篇文章对你有帮助。如有需要，请随意修改，并点击查看<a href="https://greensock.com/docs/" target="_blank" rel="noopener"> GSAP文档。他们有一个免费的备忘单，可以帮助你使你的动画更流畅更好。</a></p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>你的前端是否占用了用户的CPU？</h2><p>随着web前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端CPU使用、内存使用等感兴趣，</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>.</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用的DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><p>现代化您调试web和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>