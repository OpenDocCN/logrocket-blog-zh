<html>
<head>
<title>Adding an RSS feed to your Next.js app - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>将RSS提要添加到Next.js应用程序- LogRocket博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/adding-rss-feed-next-js-app/#0001-01-01">https://blog.logrocket.com/adding-rss-feed-next-js-app/#0001-01-01</a></blockquote><div><article class="article-post">
<p>RSS，或真正简单的联合，是站点发布者用来及时发布内容的手段之一。它让网站访问者保持对最新内容的更新，而不必定期检查新内容。</p>
<p>RSS提要使用一个XML文件，该文件包含有关内容片段的详细信息，如按时间倒序排列的文章或播客列表，最新的内容显示在顶部。这是一个可以自动更新以满足不同用途的文件。</p>
<p>当该文件可用于网站时，用户可以使用RSS源阅读器或聚合器来访问和参与网站的内容。这个阅读器是一个可以获取XML内容并以用户友好的格式显示数据的工具。</p>
<p>在为网站的时事通讯发起活动时，RSS提要也很有用。电子邮件营销平台可以使用它来拉内容，如博客文章，所以他们可以自动发送新的内容给订户。</p>
<p>在这一课中，我们将学习如何将RSS提要集成到Next.js应用程序中。要学习本教程，请确保您熟悉Next.js。</p>
<p>我们将涵盖的内容:</p>


<p>要向Next.js添加RSS提要，我们需要一个Next应用程序。为了让我们能够专注于这个主题，我已经创建了一个<a href="https://github.com/Ibaslogic/nextjs-mdx-blog-starter" target="_blank" rel="noreferrer noopener"> Next blog starter项目</a>，其中包含了一个<a href="https://blog.logrocket.com/create-next-js-mdx-blog/" target="_blank" rel="noreferrer noopener">的MDX博客文章列表</a>，我们可以通过RSS订阅。</p>
<p>让我们使用以下命令克隆它:</p>
<pre class="language-javascript hljs">git clone https://github.com/Ibaslogic/nextjs-mdx-blog-starter
</pre>
<p>然后，运行以下命令安装[…]:</p>
<pre class="language-bash hljs">cd nextjs-mdx-blog-starter

npm install
# or
yarn
</pre>
<p>最后，使用以下命令运行项目:</p>
<pre class="language-bash hljs">npm run dev
# or
yarn dev
</pre>
<p>项目博客页面应该如下所示:</p>
<p><img data-attachment-id="134762" data-permalink="https://blog.logrocket.com/adding-rss-feed-next-js-app/attachment/img1-next-js-project-frontend-blog-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page.png" data-orig-size="730,522" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Next-js-project-frontend-blog-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page-300x215.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page.png" decoding="async" class="aligncenter size-full wp-image-134762 jetpack-lazy-image" src="../Images/d55b18e7d888c4c0429866a7e2587275.png" alt="Simple Black And White Next Js Project Frontend Blog Page With Two Example Posts In Reverse Chronological Order" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page-300x215.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="134762" data-permalink="https://blog.logrocket.com/adding-rss-feed-next-js-app/attachment/img1-next-js-project-frontend-blog-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page.png" data-orig-size="730,522" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Next-js-project-frontend-blog-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page-300x215.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-134762" src="../Images/d55b18e7d888c4c0429866a7e2587275.png" alt="Simple Black And White Next Js Project Frontend Blog Page With Two Example Posts In Reverse Chronological Order" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page-300x215.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img1-Next-js-project-frontend-blog-page.png"/></noscript>

<p>让我们看看我们是如何在同一页面上生成帖子列表的。了解文章列表是如何生成的将有助于为我们的博客文章生成RSS提要。</p>
<p>如果您打开<code>utils/mdx.js</code>文件，您会看到我们导出了一个名为<code>getSortedPost()</code>的异步函数，返回一个包含标题、slug、描述、日期等主要细节的帖子列表。</p>
<p>然后，我们调用blog页面文件<code>pages/blog/index.js</code>中的<code>getStaticProps()</code>获取方法内的函数来访问数据并呈现组件。</p>
<p>对于我们的RSS提要项目，我们将创建一个函数来生成XML提要文件，并在<code>getStaticProps()</code>中调用它。这是因为在生产站点的构建期间会调用<code>getStaticProps()</code>。这是生成RSS提要的最佳时机。</p>
<p>注意，在开发过程中，每次请求都会调用这个获取方法。因此，当我们导航到博客页面时，XML文件将在开发中生成。</p>
<p>如果你曾经与一个WordPress支持的网站互动过，你可能知道你可以通过在网站URL的末尾添加<code>/feed/</code>来查看该网站的RSS提要，如下所示:</p>
<pre class="language-javascript hljs">https://example.com/feed/
</pre>
<p>在我们的项目中，以类似的方式添加路径——比如<code><a href="http://localhost:3000/feed/" rel="nofollow">http://localhost:3000/feed/</a></code>——将显示一个404错误页面。因此，让我们在下一节中将RSS提要添加到Next.js应用程序中。</p>

<p>创建RSS提要有不同的方法。在下面的小节中，我们将看看两个不同的包:<code>rss</code>包和<code>feed</code> npm包。</p>

<p><a href="https://github.com/dylang/node-rss" target="_blank" rel="noreferrer noopener"/><code><a href="https://github.com/dylang/node-rss" target="_blank" rel="noreferrer noopener">rss</a></code><a href="https://github.com/dylang/node-rss" target="_blank" rel="noreferrer noopener">包</a>让我们生成一个RSS提要并将其添加到我们的下一个项目中。让我们通过运行以下命令来添加它:</p>
<pre class="language-bash hljs">npm i rss
#or
yarn add rss
</pre>
<p>一旦我们添加了包，我们就可以创建一个新的RSS提要，向提要添加条目，等等。</p>

<p>让我们创建一个<code>utils/generateRSSFeed.js</code>文件并添加以下代码:</p>
<pre class="language-javascript hljs">import RSS from 'rss';

export default async function generateRssFeed() {
 const feedOptions = {};
 const feed = new RSS(feedOptions);
}
</pre>
<p>我们从从<code>rss</code>模块导入<code>RSS</code>并创建一个新的feed实例开始。<code>RSS</code>提要接受一个由提要选项组成的对象。</p>
<p>让我们通过将文件内容更新为以下内容来添加提要选项:</p>
<pre class="language-javascript hljs">import RSS from 'rss';

export default async function generateRssFeed() {
 const site_url = 'localhost:3000';

 const feedOptions = {
  title: 'Blog posts | RSS Feed',
  description: 'Welcome to this blog posts!',
  site_url: site_url,
  feed_url: `${site_url}/rss.xml`,
  image_url: `${site_url}/logo.png`,
  pubDate: new Date(),
  copyright: `All rights reserved ${new Date().getFullYear()}, Ibas`,
 };

 const feed = new RSS(feedOptions);
}
</pre>
<p>提要选项是不言自明的。</p>
<p>我们使用<code>localhost</code> URL作为<code>site_URL</code>。如果要部署到生产环境，该URL必须是生产URL。</p>
<p><code>feed_URL</code>指定了RSS提要的路径。将在开发中的<code><a href="http://localhost:3000/rss.xml" rel="nofollow">http://localhost:3000/rss.xml</a></code>上市。</p>
<p>请记住此路径，因为在本课稍后向客户端写入XML内容时，我们将维护相同的URL。你可以指定你的路径，比如用<code>/feed.xml</code>代替<code>/rss.xml</code>或者任何你想要的名字。</p>

<p>我们需要获取文章列表，以便将我们的博客文章添加到提要中。如前所述，<code>getSortedPost()</code>函数返回文章详细信息的列表。</p>
<p>我们将导入该函数，遍历帖子列表，并将每个帖子添加到提要中。</p>
<p><code>utils/generateRSSFeed.js</code>文件现在看起来像这样:</p>
<pre class="language-javascript hljs">import RSS from 'rss';
import { getSortedPost } from './mdx';

export default async function generateRssFeed() {
 const site_url = 'localhost:3000';

 const allPosts = await getSortedPost();

 const feedOptions = {
  // ...
 };

 const feed = new RSS(feedOptions);

 allPosts.map((post) =&gt; {
  feed.item({
   title: post.title,
   description: post.description,
   url: `${site_url}/blog/${post.slug}`,
   date: post.date,
  });
 });
}
</pre>
<p>由于来自<code>utils/mdx.js</code>文件的<code>getSortedPost()</code>函数是一个异步函数，我们使用<code>await</code>关键字等待它，并将返回的帖子分配给<code>allPosts</code>变量。我们使用<code>map</code>函数遍历了<code>allPosts</code>变量，并将每个帖子添加到一个提要条目中。</p>
<h3 id="sending-xml-data-client">向客户端发送XML数据</h3>
<p>接下来，我们将使用Node.js  <code>fs</code>函数将RSS提要作为<a href="https://blog.logrocket.com/reading-writing-xml-node-js/" target="_blank" rel="noreferrer noopener"> XML写入一个文件。让我们导入<code>fs</code>并像这样使用<code>fs.writeFileSync()</code> API:</a></p>
<pre class="language-javascript hljs">import fs from 'fs';
import RSS from 'rss';
import { getSortedPost } from './mdx';

export default async function generateRssFeed() {
 // ...
 allPosts.map((post) =&gt; {
  // ...
 });

 fs.writeFileSync('./public/rss.xml', feed.xml({ indent: true }));
}
</pre>
<p>这个API在<code>public</code>文件夹中创建一个<code>rss.xml</code>文件，并将XML数据写入该文件。</p>
<p>保存文件。</p>
<p>最后，在您的项目中找到<code>getStaticProps()</code>获取方法并调用<code>generateRssFeed()</code>函数。在我们的项目中，我们可以在博客页面文件中找到它，<code>pages/blog/index.js</code>。所以让我们导入<code>generateRssFeed()</code>并在<code>getStaticProps()</code>中这样调用它:</p>
<pre class="language-javascript hljs">// ....
import generateRssFeed from '../../utils/generateRSSFeed';

export async function getStaticProps() {
 await generateRssFeed();
 // ....
}

// .... 
</pre>
<p>让我们保存所有文件。</p>
<p>如果我们运行<code>npm run build</code> production build命令，将在public文件夹中自动生成一个RSS提要。然而，由于我们正在开发中，如果我们导航到博客页面，我们将生成该文件。记住，持有<code>generateRssFeed()</code>的获取方法存在于博客页面文件中。</p>
<p>因此，导航到<code><a href="http://localhost:3000/blog" rel="nofollow">http://localhost:3000/blog</a></code>页面来生成文件。之后，在浏览器中访问<code><a href="http://localhost:3000/rss.xml" rel="nofollow">http://localhost:3000/rss.xml</a></code>,会看到一个XML页面，如下所示:</p>
<p><img data-attachment-id="134765" data-permalink="https://blog.logrocket.com/adding-rss-feed-next-js-app/attachment/img2-xml-page-localhost-3000/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000.png" data-orig-size="730,551" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="XML-page-localhost-3000" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000-300x226.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000.png" decoding="async" class="aligncenter size-full wp-image-134765 jetpack-lazy-image" src="../Images/471c1bd88a7baa0d39af06b7cf78a7d4.png" alt="Xml Page Shown At Localhost 3000 With Message At Top Stating That The File Has No Associated Style Information And A Document Tree Is Shown Instead" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000-300x226.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="134765" data-permalink="https://blog.logrocket.com/adding-rss-feed-next-js-app/attachment/img2-xml-page-localhost-3000/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000.png" data-orig-size="730,551" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="XML-page-localhost-3000" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000-300x226.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-134765" src="../Images/471c1bd88a7baa0d39af06b7cf78a7d4.png" alt="Xml Page Shown At Localhost 3000 With Message At Top Stating That The File Has No Associated Style Information And A Document Tree Is Shown Instead" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000-300x226.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img2-XML-page-localhost-3000.png"/></noscript>
<p>正如我们在上面的图片中看到的，XML文件中的最新条目是最新的博客文章。现在，每当我们添加一个新帖子时，文件将重新生成以包含该帖子，任何订阅的用户都将自动获得更新。</p>
<h3 id="using-feed-reader">使用提要阅读器</h3>
<p>现在我们有了一个有效的RSS提要链接——尽管在<code>localhost:3000</code>还在开发中——用户可以使用这个链接在RSS阅读器中订阅提要。</p>
<p>如果我们<a href="https://chrome.google.com/webstore/detail/rss-feed-reader/pnjaodmkngahhkoihejjehlcdlnohgmp/related?hl=en" target="_blank" rel="noreferrer noopener">为Chrome安装一个feed阅读器扩展</a>并访问feed URL，我们将会看到以下内容:</p>
<p><img data-attachment-id="134767" data-permalink="https://blog.logrocket.com/adding-rss-feed-next-js-app/attachment/img3-next-js-project-frontend-blog-page-rss-feed-left-column/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column.png" data-orig-size="730,491" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Next-js-project-frontend-blog-page-RSS-feed-left-column" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column-300x202.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column.png" decoding="async" class="aligncenter size-full wp-image-134767 jetpack-lazy-image" src="../Images/e01101fdb0848adb05fa802c5a5c8210.png" alt="Next Js Project Frontend Blog Page With Chrome Feed Reader Extension Displaying Rss Feed In Column Format At Left Side Of Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column-300x202.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="134767" data-permalink="https://blog.logrocket.com/adding-rss-feed-next-js-app/attachment/img3-next-js-project-frontend-blog-page-rss-feed-left-column/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column.png" data-orig-size="730,491" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Next-js-project-frontend-blog-page-RSS-feed-left-column" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column-300x202.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-134767" src="../Images/e01101fdb0848adb05fa802c5a5c8210.png" alt="Next Js Project Frontend Blog Page With Chrome Feed Reader Extension Displaying Rss Feed In Column Format At Left Side Of Page" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column-300x202.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img3-Next-js-project-frontend-blog-page-RSS-feed-left-column.png"/></noscript>
<p>这里的内容对用户很友好，帖子都链接回了出处。一旦用户订阅了提要，他们就会收到新更新的通知。</p>
<h2 id="using-feed-library">使用<code>feed</code>库</h2>
<p><a href="https://github.com/jpmonette/feed" target="_blank" rel="noreferrer noopener"/><code><a href="https://github.com/jpmonette/feed" target="_blank" rel="noreferrer noopener">feed</a></code><a href="https://github.com/jpmonette/feed" target="_blank" rel="noreferrer noopener">NPM包</a>比<code>rss</code>包更健壮。它允许我们生成不同的提要格式，包括RSS、Atom和JSON。</p>
<p>让我们将它添加到我们的项目中:</p>
<pre class="language-bash hljs">npm i feed
#or
yarn add feed
</pre>
<p>接下来，用以下内容替换<code>utils/generateRSSFeed.js</code>文件的内容:</p>
<pre class="language-javascript hljs">import fs from 'fs';
import { Feed } from 'feed';
import { getSortedPost } from './mdx';

export default async function generateRssFeed() {
 const allPosts = await getSortedPost();
 const site_url = 'localhost:3000';

 const feedOptions = {
  title: 'Blog posts | RSS Feed',
  description: 'Welcome to this blog posts!',
  id: site_url,
  link: site_url,
  image: `${site_url}/logo.png`,
  favicon: `${site_url}/favicon.png`,
  copyright: `All rights reserved ${new Date().getFullYear()}, Ibas`,
  generator: 'Feed for Node.js',
  feedLinks: {
   rss2: `${site_url}/rss.xml`,
  },
 };

 const feed = new Feed(feedOptions);

 allPosts.forEach((post) =&gt; {
  feed.addItem({
   title: post.title,
   id: `${site_url}/blog/${post.slug}`,
   link: `${site_url}/blog/${post.slug}`,
   description: post.description,
   date: new Date(post.date),
  });
 });

 fs.writeFileSync('./public/rss.xml', feed.rss2());
}
</pre>
<p>实现<code>feed</code>包类似于实现<code>rss</code>包。您可以遵循与上面相同的步骤。如果我们保存文件，我们也应该得到类似的结果。</p>

<p>为了为我们的Next.js应用生成其他格式的RSS提要，包括JSON，我们将把<code>feedLinks</code>更新为:</p>
<pre class="language-javascript hljs">feedLinks: {
  rss2: `${site_url}/rss.xml`,
  // other feed formats
  json: `${site_url}/rss.json`,
  atom: `${site_url}/atom.xml`,
},
</pre>
<p>然后，我们将把RSS提要写到它们各自在<code>public</code>文件夹中的文件中，就像这样:</p>
<pre class="language-javascript hljs">// write other feed formats to public folder
fs.writeFileSync('./public/rss.json', feed.json1());
fs.writeFileSync('./public/atom.xml', feed.atom1());
</pre>
<p>保存<code>utils/generateRSSFeed.js</code>文件并导航到博客页面生成提要文件后，我们可以在浏览器中访问<code><a href="http://localhost:3000/rss.json" rel="nofollow">http://localhost:3000/rss.json</a></code>和<code><a href="http://localhost:3000/atom.xml" rel="nofollow">http://localhost:3000/atom.xml</a></code>来查看各自格式的RSS提要。</p>

<p>为了确保站点用户能够容易地找到RSS提要URL，我们将在web项目的底部添加一个指向RSS提要的图标。我们可以从React图标库中获取图标。</p>
<p>让我们安装<code>react-icons</code>:</p>
<pre class="language-bash hljs">yarn add react-icons
#or
npm install react-icons
</pre>
<p>打开<code>components/Footer.js</code>文件并导入顶部的feed图标组件:</p>
<pre class="language-javascript hljs">import { MdRssFeed } from 'react-icons/md';
</pre>
<p>然后，找到这个代码:</p>
<pre class="language-javascript hljs">&gt;&lt;div className={styles.footer__content}&gt;
 &lt;p&gt;&amp;copy; {new Date().getFullYear().toString()} by Ibas&lt;/p&gt;
&lt;/div&gt;
</pre>
<p>并将其更新为以下内容:</p>
<pre class="language-javascript hljs">&lt;div className={styles.footer__content}&gt;
 &lt;p&gt;
  &amp;copy; {new Date().getFullYear().toString()} by Ibas
 &lt;/p&gt;
 &lt;a
  href="http://localhost:3000/rss.xml"
  rel="noreferrer"
  target="_blank"
 &gt;
  &lt;MdRssFeed color="#ee802f" size="30px" /&gt;
 &lt;/a&gt;
&lt;/div&gt;
</pre>
<p>在生产中，URL路径必须是生产URL。如果我们保存并测试我们的项目，图标应该出现在站点页脚中，如下所示:</p>
<p><img data-attachment-id="134771" data-permalink="https://blog.logrocket.com/adding-rss-feed-next-js-app/attachment/img4-next-js-project-frontend-blog-page-rss-feed-footer-icon-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1.png" data-orig-size="730,550" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Next-js-project-frontend-blog-page-RSS-feed-footer-icon" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1-300x226.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1.png" decoding="async" class="aligncenter size-full wp-image-134771 jetpack-lazy-image" src="../Images/7d399cf618801b7b160327458c9945da.png" alt="Next Js Project Frontend Blog Page With Red Arrow Pointing To Rss Feed Icon In Site Footer" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1-300x226.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="134771" data-permalink="https://blog.logrocket.com/adding-rss-feed-next-js-app/attachment/img4-next-js-project-frontend-blog-page-rss-feed-footer-icon-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1.png" data-orig-size="730,550" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Next-js-project-frontend-blog-page-RSS-feed-footer-icon" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1-300x226.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-134771" src="../Images/7d399cf618801b7b160327458c9945da.png" alt="Next Js Project Frontend Blog Page With Red Arrow Pointing To Rss Feed Icon In Site Footer" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1-300x226.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/img4-Next-js-project-frontend-blog-page-RSS-feed-footer-icon-1.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>将RSS提要添加到Next.js应用程序是让用户了解您站点上共享的最新内容的一种方式。本课讨论了在Next.js应用程序中集成RSS XML文件。</p>
<p>如果你喜欢这一课，在网络上分享它。完整的源代码<a href="https://github.com/Ibaslogic/nextjs-mdx-blog-rss" target="_blank" rel="noreferrer noopener">在GitHub </a>上可用，完成的<a href="https://nextjs-mdx-blog-rss.vercel.app/" target="_blank" rel="noreferrer noopener">项目在这里直播</a>。</p><div class="code-block code-block-30">
<div class="blog-plug inline-plug next-plug"><h2><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank"> LogRocket </a>:全面了解生产Next.js应用</h2><p>调试下一个应用程序可能会很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪状态、自动显示JavaScript错误、跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-lazy-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/></noscript></a><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p>LogRocket 就像是网络和移动应用的DVR，记录下你的Next.js应用上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用程序的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p><p>让您调试Next.js应用的方式现代化— <a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>