<html>
<head>
<title>Creating a multi-page app in Flutter - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 Flutter - LogRocket 博客中创建多页应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/creating-multi-page-app-flutter/#0001-01-01">https://blog.logrocket.com/creating-multi-page-app-flutter/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Flutter 是由 Google 开发的开源 SDK，有助于从单一代码库为移动、web、桌面和嵌入式应用程序创建本机优化的应用程序。Flutter 的人气与日俱增；颤振应用现在无处不在。</p>
<p>说到做 app，不仅仅是开发漂亮的 UI；这也是通过将你的应用分成多个页面来提供更好的用户体验。在本文中，我们将学习使用 Flutter 的导航和多页面应用程序。</p>
<h2 id="what-is-a-page-in-flutter">什么是飘动中的一页？</h2>
<p>页面是在某个时间点可见的单个屏幕。单个页面或屏幕可以由许多小部件组成，这些小部件被组织在一起以创建所需的 UI。Flutter 中的页面/屏幕被称为路线，我们使用 Navigator 小部件在它们之间导航。</p>
<p>在 Flutter 中，所有东西——包括多页面应用——都是小部件。Flutter 使用方便的小部件(如 MaterialApp ),根据用户的导航和偏好显示不同的屏幕。</p>
<h2 id="how-do-you-navigate-pages">你如何浏览网页？</h2>
<p>Navigator 小部件与 MaterialApp 捆绑在一起，管理一堆<a href="https://api.flutter.dev/flutter/widgets/Route-class.html" target="_blank" rel="noopener"> Route </a>对象。您可以将 route 对象视为单个页面或屏幕的表示。这一叠最上面的路线对用户来说是可见的，当用户按下后退按钮时，最上面的路线就会弹出，露出下面的路线，就像一叠卡片一样。</p>
<h2 id="lets-go">我们走吧🚀</h2>
<p>让我们首先创建一个 MaterialApp 小部件，它将为我们的应用程序配置顶级的<a href="https://api.flutter.dev/flutter/widgets/Navigator-class.html" target="_blank" rel="noopener">导航器</a>以及其他基本的东西:</p>
<pre class="language-dart hljs">class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Naviation Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: const FirstPage(title: 'FirstPage'),
    );
  }
}
</pre>
<p>由于我们的应用程序有多个页面，我们将创建两个页面/屏幕，分别叫做<strong>第一页</strong>和<strong>第二页</strong>。</p>
<p>下面是<strong>第一页</strong>小部件，它由一个显示页面/屏幕标题的 AppBar 和一个显示导航到<strong>第二页</strong>的按钮的主体组成:</p>
<pre class="language-dart hljs">class FirstPage extends StatelessWidget {
  const FirstPage({Key? key, required this.title}) : super(key: key);
  final String title;
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(title),
      ),
      body: Center(
        child: TextButton(
          onPressed: () {},
          child: const Text('Next'),
        ),
      ),
    );
  }
}
</pre>
<p>现在，这是我们的第一页目前的样子。</p>
<p><img data-attachment-id="93277" data-permalink="https://blog.logrocket.com/creating-multi-page-app-flutter/first-page-4/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3.png" data-orig-size="250,516" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="First page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3-145x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3.png" decoding="async" class="aligncenter size-full wp-image-93277 jetpack-lazy-image" src="../Images/88148f618c7e5c270aadda9fb5a78017.png" alt="First Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3.png 250w, https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3-145x300.png 145w" data-lazy-sizes="(max-width: 250px) 100vw, 250px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="93277" data-permalink="https://blog.logrocket.com/creating-multi-page-app-flutter/first-page-4/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3.png" data-orig-size="250,516" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="First page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3-145x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-93277" src="../Images/88148f618c7e5c270aadda9fb5a78017.png" alt="First Page" srcset="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3.png 250w, https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3-145x300.png 145w" sizes="(max-width: 250px) 100vw, 250px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/first-page-3.png"/></noscript>
<h3 id="&quot;navigate-to-secondpage">导航到第二页🚪</h3>
<p>如果你尝试点击<strong>下一个</strong>按钮，什么也不会发生，因为我们还没有告诉 Flutter 当用户点击按钮时该做什么。</p>
<p>使用<code>Navigator.push()</code>方法切换到新路线。导航器的<code>push()</code>方法将一条路由添加到它管理的路由堆栈中。</p>
<p>为了导航到<strong>第二页</strong>，首先我们需要创建它，你不这样认为吗？🤠<strong>第二页</strong>将与<strong>第一页</strong>几乎相同，文本现在变为<strong>返回</strong>:</p>
<pre class="language-dart hljs">class SecondPage extends StatelessWidget {
  const SecondPage({Key? key, required this.title}) : super(key: key);
  final String title;
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(title),
      ),
      body: Center(
        child: TextButton(
          onPressed: () {},
          child: const Text('Go Back'),
        ),
      ),
    );
  }
}
</pre>
<p>既然我们的<strong>第二页</strong>已经构建好了，我们可以通过更新<strong>第一页</strong>中的<code>onPressed()</code>方法导航到它。用以下代码替换<strong>首页</strong>的<code>TextButton</code>中的<code>onPressed()</code>:</p>
<pre class="language-dart hljs">onPressed: () {
   Navigator.push(context, MaterialPageRoute(builder: (context) {
     return const SecondPage(title: 'SecondPage');
   }));
}
</pre>
<p>大多数时候，我们使用<code>MaterialPageRoute</code>在页面/屏幕之间导航，但有时当我们想要更多的控制来添加自定义过渡之类的东西时，我们可以使用<code>PageRouteBuilder</code>。</p>
<h3 id="going-back-to-firstpage">返回首页🔙</h3>
<p>万岁！🥂:你已经成功地在 Flutter 中创建了你的第一个多页面应用程序。足够的庆祝活动；现在是时候导航回第<strong>页第</strong>页了。</p>
<p>为了往回导航，我们使用了<code>Navigator.pop()</code>方法。它从导航器的路线堆栈中删除当前路线。</p>
<p>在<strong>第二页</strong>中，用以下代码替换<code>onPressed()</code>:</p>
<pre class="language-dart hljs">onPressed: () {
  Navigator.pop(context);
}
</pre>
<p>这是我们到目前为止所做的所有努力的结果:</p>
<p><img data-attachment-id="93280" data-permalink="https://blog.logrocket.com/creating-multi-page-app-flutter/second-page-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/second-page-2.gif" data-orig-size="250,516" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Second page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/second-page-2-145x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/second-page-2.gif" decoding="async" class="aligncenter size-full wp-image-93280 jetpack-lazy-image" src="../Images/c27b77411e66892985a02309b30a2c82.png" alt="Second Page" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/02/second-page-2.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/second-page-2.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="93280" data-permalink="https://blog.logrocket.com/creating-multi-page-app-flutter/second-page-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/02/second-page-2.gif" data-orig-size="250,516" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Second page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/02/second-page-2-145x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/02/second-page-2.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-93280" src="../Images/c27b77411e66892985a02309b30a2c82.png" alt="Second Page" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/02/second-page-2.gif"/></noscript>
<h3 id="returning-some-data-from-secondpage-to-firstpage">从第二页返回一些数据到第一页🚛</h3>
<p>有时，您希望从导航器堆栈弹出的路线返回一些数据。假设在我们的例子中，当我们从<strong>第二页</strong>导航回<strong>第一页</strong>时，我们将返回一条消息说<strong>从第二页</strong>返回。</p>
<p>在<code>SecondPage</code>的<code>build()</code>方法中，更新<code>onPressed()</code>回调:</p>
<pre class="language-dart hljs">onPressed: () {
  Navigator.pop(context, "Returned from SecondPage");
}
</pre>
<p>现在在<code>FirstPage</code>的<code>build()</code>方法中，将<code>onPressed()</code>方法替换为:</p>
<pre class="language-dart hljs">onPressed: () async {
  var message = await Navigator.push(context,
   MaterialPageRoute(builder: (context) {
     return const SecondPage(title: 'SecondPage');
    }));
        // This message will be printed to the console
   print(message);
}
</pre>
<p>这里的<code>onPressed()</code>方法现在看起来像一个奇怪的方法，因为我们使用<code>async/await</code>关键字来等待方法<code>Navigator.push()</code>返回的<code>Future</code>。</p>
<p>理解它就像我们在等待在<code>push()</code>方法上使用关键字<code>await</code>，直到它被弹出并返回消息。为了使用<code>await</code>关键字，您必须使用关键字<code>async</code>使<code>onPressed()</code>方法异步。如果您需要帮助，请了解更多关于 Dart 中的<a href="https://dart.dev/codelabs/async-await" target="_blank" rel="noopener">异步编程</a>的信息。</p>
<p>运行 app，按下<strong>第二页</strong>上的<strong>返回</strong>按钮。检查控制台以查看返回的消息:</p>
<pre class="language-dart hljs">flutter: Returned from SecondPage
</pre>
<h2 id="last-words">遗言</h2>
<p>在本文中，您学习了如何使用<a href="https://blog.logrocket.com/understanding-flutter-navigation-routing/" target="_blank" rel="noopener"> Navigator 小部件</a>在 Flutter 中创建多页面应用程序，以及如何在弹出一条路线时返回数据。这不是结束，而是大量课程的开始，当你在学习扑动的旅程中前进时，这些课程会向你走来。我建议你去浏览一下<a href="https://docs.flutter.dev/development/ui/navigation" target="_blank" rel="noopener">官方文件</a>，了解更多关于导航和其他基础知识。</p>
<p>祝你好运！开心飘飘！👨‍💻</p>
<p>如果你有任何问题，请随时发表。👇</p>
<p>欢迎任何反馈。</p><div class="code-block code-block-1">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket 会告诉您应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket 自动聚合客户端错误、JS 异常、前端性能指标和用户交互。然后 LogRocket 使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的 bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试 LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>