<html>
<head>
<title>Getting started with Realm for React Native </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React Native领域入门</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/realm-react-native/#0001-01-01">https://blog.logrocket.com/realm-react-native/#0001-01-01</a></blockquote><div><article class="article-post">
<p>长期以来，SQLite一直是移动和跨平台开发人员的首选数据库。它是轻量级的，无服务器的，并且为任何熟悉SQL的人提供了一个简单的学习曲线。SQLite用C编写，支持30多种其他编程语言和平台，包括Android和React Native。</p>
<p>近年来，一个新的竞争对手Realm出现了。Realm是一个面向对象的移动优先数据库，旨在用于跨平台和移动应用程序。</p>
<p>在本帖中，我们将讨论以下主题:</p>

<h2 id="what-is-realm">什么是境界？</h2>
<p>Realm于2014年推出，是一个开源数据库平台，具有实时、双向同步和Node.js SDK支持。这款传统产品已经被下载了超过20亿次。</p>
<p>2019年，Realm被MongoDB收购，现在由MongoDB维护。MongoDB Realm(或者现在称为Realm)将旧的Realm数据库和MongoDB的无服务器平台MongoDB Stitch结合成一个统一的解决方案，以便在移动设备上进行更轻松的开发。</p>
<p>根据Realm.io的说法，“从高速增长的初创公司到财富500强公司，数以千计的应用程序都建立在Realm之上。”</p>
<p>到目前为止，Realm已得到各种编程语言的支持，包括:</p>
<ul>
<li>目标-C</li>
<li>雨燕</li>
<li>Java和Kotlin(都只在Android设备上)</li>
<li>C#(适用于Xamarin、Win32和UWP)</li>
<li>JavaScript/TypeScript(使用Node.js和React Native)</li>
</ul>
<h2 id="features-realm">领域特征</h2>
<p>Realm提供跨平台支持，并且易于使用。对于常规操作，它也比SQLite快，并且执行常规操作所需的代码比SQLite或核心数据少。</p>
<p>Realm的一些功能包括:</p>
<ul>
<li>移动优先:Realm是第一个从头开始构建的数据库，目标是在手机、平板电脑和可穿戴设备中执行</li>
<li>轻量级和快速:Realm是轻量级的，包括延迟加载和零拷贝架构，这意味着开发人员可以直接处理对象</li>
<li>易于扩展:Realm以类似JSON的结构形式使用面向对象的数据模型，因此它不需要orm或DAO，提供了更好的DX</li>
<li>现代特性:Realm包括加密、JSON支持和数据更改通知</li>
<li>实时数据:Realm提供实时的移动到云的数据同步，这有助于保持设备、用户等之间的数据同步</li>
</ul>
<p>开发人员还可以使用Realm将数据保存在本地磁盘存储上，或者根据应用程序的特定要求将数据临时存储在内存中。</p>
<h2 id="how-does-realm-differ-other-databases">Realm与其他数据库有何不同？</h2>
<p>与其他数据库不同，领域并不代表单一的应用程序范围的数据库。它甚至不是一个关系表；它可以包含给定域所必需的任意数量的对象类型。领域数据库保存在应用程序中的数据将存储在名为<code>default.realm</code>的默认领域文件中。</p>
<p>数据库还可以使用其他文件，例如以<code>.lock</code>为后缀的文件，即<code>default.realm.lock</code>。锁文件的目的是监视正在使用的领域中的数据版本。</p>
<h3 id="realm-schema-structures">领域模式结构</h3>
<p>领域对象的结构是通过模式定义的。对象不能包含其架构未描述的属性。因为我们将使用TypeScript作为例子，所以模式将在一个<code>.ts</code>文件中定义。</p>
<p>每个领域都使用版本化模式。当模式发生变化时，比方说，如果您添加了一个新列(或领域术语中的“属性”)或修改了一个列名，那么您必须定义一个新版本的迁移，以便在模式版本之间移动对象数据。</p>
<h2 id="setting-up-realm-react-native">为React Native设置领域</h2>
<p>Realm通过一个开发人员作为依赖项安装的包包含了React本机支持。然后，大约一年前，<a href="https://www.npmjs.com/package/@realm/react"> <code>@realm/react</code>库</a>发布了，这使得在React Native中使用Realm变得更加容易和更好。</p>
<p>发布这篇文章的理由可以从<a href="https://www.npmjs.com/package/@realm/react/v/0.1.0"> npm </a>网站上总结出来:</p>
<blockquote><p>在React原生应用程序中设置领域历来都很复杂。当数据库中的对象发生变化时，重新呈现组件需要手动添加和删除侦听器，这会产生大量样板代码，并且容易出错(如果在卸载时正确删除了侦听器)。这个库通过提供React钩子来缓解这个问题，这些钩子返回状态感知的领域数据。因此，对领域数据的任何更改都会导致使用钩子的组件重新呈现。</p></blockquote>
<p>该库要求在您的系统上安装React本机版本≥ 0.59和Realm v ≥ 11。</p>
<h2 id="using-realm-react-native">将领域与React Native一起使用</h2>
<p>让我们探索在React本机应用程序中使用Realm。有几种方法可供选择:</p>
<ul>
<li>从头开始</li>
<li>创建一个标准的TypeScript模板化项目，并向其中添加领域</li>
<li>使用现成的Realm-TypeScript模板，然后对其进行调整以添加功能</li>
</ul>
<p>我们将使用第三种方法。Realm团队在他们的GitHub上提供了一个包含React和TypeScript的本地模板。</p>
<p>首先，您可以键入:</p>
<pre class="language-bash hljs">npx react-native init AwesomeRealmProject --template @realm/react-native-template-ts
</pre>
<p>您也可以给项目起一个自定义名称。我们就用<code>reactrealmdemo</code>做名字吧。</p>
<p>一旦创建了项目，您可以通过在项目文件夹中运行Metro或任何其他开发客户端来测试它，然后运行项目:</p>
<pre class="language-bash hljs">cd reactrealmdemo

npm start (or react-native start)

npm run android
</pre>
<p>模板化Realm-React本地项目旨在添加和删除待办事项列表中的任务。它使用Realm实现持久性，使用React钩子实现React集成。它还支持同步，允许用户在多个设备上登录并同步他们的待办事项列表。</p>
<p>如果您打开项目来检查它的文件，尤其是<code>package.json</code>，您将会看到已经为您自动安装的包。</p>
<pre class="language-json hljs">{
  "name": "reactrealmdemo",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "android": "react-native run-android",
    "ios": "react-native run-ios",
    "start": "react-native start",
    "test": "jest",
    "lint": "eslint . --ext .js,.jsx,.ts,.tsx"
  },
  "dependencies": {
  <strong>  "@realm/react": "^0.4.0",
    "react": "^18.1.0",
    "react-native": "^0.70.3",
    "react-native-get-random-values": "^1.8.0",
    "realm": "^11.0.0"</strong>
  },
  "devDependencies": {
    "@babel/core": "^7.12.9",
    "@babel/plugin-proposal-decorators": "^7.19.0",
    "@babel/runtime": "^7.12.5",
    "@react-native-community/eslint-config": "^2.0.0",
    "@realm/babel-plugin": "^0.1.0",
    "@types/jest": "^26.0.23",
    "@types/react-native": "^0.67.3",
    "@types/react-test-renderer": "^17.0.1",
    "@typescript-eslint/eslint-plugin": "^5.17.0",
    "@typescript-eslint/parser": "^5.17.0",
    "babel-jest": "^26.6.3",
    "eslint": "^7.32.0",
    "jest": "^26.6.3",
    "metro-react-native-babel-preset": "^0.72.3",
    "react-test-renderer": "^18.1.0",
    "typescript": "^4.4.4"
  },
  "resolutions": {
    "@types/react": "^17"
  },
  "jest": {
    "preset": "react-native",
    "moduleFileExtensions": [
      "ts",
      "tsx",
      "js",
      "jsx",
      "json",
      "node"
    ]
  }
}
</pre>
<p>模板应用程序包含几个关键文件，也有两个版本:一个用于同步数据，另一个不同步。关键文件包括:</p>
<ul>
<li><code>Task.ts</code>在<code>models</code>下——通过一个名为<code>Task</code>的类的对象模型定义模式</li>
<li><code>AddTaskForm.tsx</code> —包含通过表单创建和添加新任务的代码</li>
<li><code>TaskItem.tsx</code></li>
<li><code>TaskList.tsx</code> —显示任务列表</li>
<li><code>components</code>下的<code>TaskManager.tsx</code></li>
<li><code>AppSync.tsx</code></li>
<li><code>app</code>下的<code>AppWrapperSync.tsx</code></li>
</ul>
<p>请注意，模型中给出的类型/类名在一个领域中的对象类型中必须是唯一的。</p>
<p>我在这个模板示例的基础上创建了一个应用程序，它允许我执行CRUD操作来添加、查看、更新和删除列表中的电影。我还想使用React原生导航来整合屏幕间的导航。</p>
<p>让我们初始化项目:</p>
<pre class="language-bash hljs">npx react-native init reactrealmdemo --template @realm/react-native-template-ts
</pre>
<p>接下来，我们将在<code>Movie.ts</code>中定义一个<code>Movie</code>对象模型:</p>
<pre class="language-typescript hljs">import {Realm} from '@realm/react';
export class Movie extends Realm.Object&lt;Movie&gt; {
  description!: string;
  title!:string;
  releaseyear!: number; 
  userId!: string;
  constructor(realm: Realm, description: string, title:string, releaseyear: number, userId?: string) {
    super(realm, {description, title, releaseyear, userId: userId || '_SYNC_DISABLED_'});
  }  
}
</pre>
<p>我们在<code>models</code>下的<code>index.ts</code>是这样定义的:</p>
<pre class="language-typescript hljs">import {createRealmContext} from '@realm/react';
import {Movie} from './Movie';
export const MovieRealmContext = createRealmContext({
  schema: [Movie]  
});
</pre>
<p><code>createRealmContext()</code>方法用于创建一个<a href="https://blog.logrocket.com/how-to-use-react-context-typescript/">反应上下文</a></p>
<p>具有给定<code>Realm.Configuration</code>的领域的对象。<code>Context</code>对象包含内置的钩子和一个包装器组件，该组件为其子组件提供对钩子的访问，以便与领域和上下文提供者一起工作。</p>
<p>接下来，如果您观察模板应用程序的父组件<code>AppWrapperNonSync.tsx</code>，您将看到它被包含在<code>Context</code>对象中的<code>RealmProvider</code>组件所包装，该对象是从<code>createRealmContext()</code>返回的。</p>
<p>下面是我们的<code>AppWrapperNonSync.tsx</code>文件的样子:</p>
<pre class="language-typescript hljs">...
&lt;SafeAreaView style={styles.screen}&gt;
      &lt;RealmProvider&gt;
        &lt;AppNonSync /&gt;
      &lt;/RealmProvider&gt;
    &lt;/SafeAreaView&gt;
</pre>
<p><code>RealmProvider</code>通过内置的钩子<code>useRealm()</code>、<code>useObject()</code>和<code>useQuery()</code>为您的主组件及其子组件提供对已配置领域的访问。</p>
<h3 id="adding-react-native-navigation">添加React本机导航</h3>
<p>在模板应用程序中，实际写入领域和从领域中检索/删除的代码包含在<code>TaskManager</code>中。<code>ts</code>，这就是所谓的<code>AppNonSync</code>。<code>ts</code>文件。</p>
<pre class="language-typescript hljs">return &lt;TaskManager tasks={tasks} /&gt;;
</pre>
<p>然而，在摆弄了代码之后，我采用了一种不同的方法。在创建了<code>Movie</code>对象模型之后，我安装了导航和手势处理的各种依赖项。</p>
<pre class="language-bash hljs">npm install react-navigation react-native-gesture-handler react-native-safe-area-context @react-native-community/masked-view react-native-screens react-native-reanimated react-navigation-stack react-navigation/native-stack
</pre>
<p>因为我想在我的项目中使用React本机导航和Realm，所以我创建了一个<code>RootStackParams.ts</code>文件来保存导航屏幕名称。</p>
<p>下面是我的<code>RootStackParams.ts</code>文件的样子:</p>
<pre class="language-typescript hljs">export type RootStackParamList = {
    MainScreen: undefined;
    HomeScreen: undefined;
    NewAddMovieScreen: undefined;
    TestUpdateScreen: undefined;
    UpdateMovieScreen: undefined;
    DeleteMovieScreen:undefined;
    ViewMovieScreen:undefined};
</pre>
<p>我在我的项目的入口点<code>App.tsx</code>中调用了这些，并且我已经将我的主组件包装在<code>&lt;RealmProvider&gt;</code>标签之间，这样所有子组件都可以访问Realm的内置钩子。请注意我们的<code>App.tsx</code>文件中以粗体显示的行:</p>
<pre class="language-typescript hljs">import React from 'react';
import {NavigationContainer} from '@react-navigation/native';
import {createStackNavigator} from '@react-navigation/stack';
import 'react-native-gesture-handler';
import {RootStackParamList} from './RootStackParams';
import HomeScreen from './screens/HomeScreen';
import NewAddMovieScreen from './screens/NewAddMovie';
import ViewMovieScreen from './screens/ViewMovieScreen';
<strong>import { MovieRealmContext } from './models';</strong>
import DeleteMovieScreen from './screens/DeleteMovieScreen';
const Stack = createStackNavigator&lt;RootStackParamList&gt;();

export default function App() {  
  <strong>const {RealmProvider} = MovieRealmContext;</strong>    
  return (
    &lt;NavigationContainer&gt;
      <strong>&lt;RealmProvider&gt;</strong>
      &lt;Stack.Navigator&gt;
      &lt;Stack.Screen name="HomeScreen" component={HomeScreen} /&gt;
      &lt;Stack.Screen name="NewAddMovieScreen" component={NewAddMovieScreen}/&gt;          
      &lt;Stack.Screen name="ViewMovieScreen" component={ViewMovieScreen} /&gt;
      &lt;Stack.Screen name="DeleteMovieScreen" component={DeleteMovieScreen} /&gt;  
      &lt;/Stack.Navigator&gt;
      <strong>&lt;/RealmProvider&gt;</strong>
    &lt;/NavigationContainer&gt;
  );
}
</pre>
<h3 id="writing-add-operations-realm">在领域中编写<code>add</code>操作</h3>
<p>在<code>HomeScreen</code>中，我配置了UI，这样当我们执行CRUD操作时，它会将我们带到不同的屏幕。</p>
<p>在下面的<code>AddMovieScreen.tsx</code>中，我重用了模板应用程序中不同文件中的一些代码，主要是<code>AddTaskForm.tsx</code>和<code>TaskManager.tsx</code>，创建了一个执行<code>add</code>操作的屏幕。</p>
<pre class="language-typescript hljs">import { View, StyleSheet, ScrollView, KeyboardAvoidingView, TextInput, Text, Pressable, Platform } from 'react-native';
import { StackNavigationProp } from '@react-navigation/stack';
import { RootStackParamList } from '../RootStackParams';
import { Movie } from '../models/Movie';
import colors from '../styles/colors';
import { shadows } from '../styles/shadows';
import { buttonStyles } from '../styles/button';
import { useNavigation } from '@react-navigation/native';
<strong>import { MovieRealmContext } from '../models';
import React, { useState, useCallback } from 'react';</strong>

type addScreenProp = StackNavigationProp&lt;RootStackParamList, 'NewAddMovieScreen'&gt;;
<strong>const { useRealm } = MovieRealmContext;</strong>

const AddMovieScreen = () =&gt; {
  <strong>const realm = useRealm();</strong>
  const handleAddMovie = useCallback(
    (description: string, title: string, releaseyear: number, userId: string): void =&gt; {
      if (!description) {
        return;
      }
      <strong>realm.write(() =&gt; {
        return new Movie(realm, description, title, releaseyear, userId);
      });
    },
    [realm],</strong>
  );

  return (
    &lt;View style={styles.content}&gt;
      <strong>{&lt;AddMovieForm onSubmit={handleAddMovie} /&gt;}</strong>
    &lt;/View&gt;
  );
};
type AddMovieFormProps = {
  onSubmit: (description: string, title: string, releaseyear: number, userId: string) =&gt; void;
};

export const AddMovieForm: React.FC&lt;AddMovieFormProps&gt; = ({ onSubmit }) =&gt; {
  const [description, setDescription] = useState('');
  const [title, setTitle] = useState('');
  const [releaseyear, setYear] = useState('');
  const [userId] = useState('');
  const navigation = useNavigation&lt;addScreenProp&gt;();

  const convertdate = (textyear: string) =&gt; {
    var dt = new Date(textyear);
    return dt.getFullYear();
 }
  const handleSubmit = () =&gt; {
    onSubmit(description, title,     
    convertdate(releaseyear), userId);
    setDescription('');
    setTitle('');
    setYear('');
  };

  return (
    &lt;View style={styles.listContainer}&gt;
      &lt;ScrollView keyboardShouldPersistTaps="handled" &gt;
        &lt;KeyboardAvoidingView
          behavior="padding"
          style={{ flex: 1, justifyContent: 'space-
between' }}&gt;
          &lt;TextInput
            value={title}
            placeholder="Enter new movie title"
            onChangeText={setTitle}
            autoCorrect={false}
            autoCapitalize="none"
            style={styles.textInput}
          /&gt;
          &lt;TextInput
            value={description}
            placeholder="Enter new movie description"
            onChangeText={setDescription}
            autoCorrect={false}
            autoCapitalize="none"
            style={styles.textInput}
          /&gt;
          &lt;TextInput
            value={releaseyear}
            placeholder="Enter new movie year"

            onChangeText={setYear}
            maxLength={4}
            keyboardType="numeric"
            style={styles.textInput}
          /&gt;
          &lt;View &gt;
            <strong>&lt;Pressable onPress={handleSubmit}</strong> 
style={styles.submit}&gt;
              &lt;Text&gt;Submit&lt;/Text&gt;
            &lt;/Pressable&gt;
          &lt;/View&gt;
          &lt;Pressable style={styles.button} onPress={() 
=&gt; navigation.navigate('HomeScreen')}&gt;
            &lt;Text style={styles.buttontext}&gt;Go 
Home&lt;/Text&gt;
          &lt;/Pressable&gt;
        &lt;/KeyboardAvoidingView&gt;
      &lt;/ScrollView&gt;
    &lt;/View&gt;
  );
};

export default AddMovieScreen;
</pre>
<p>在这个文件中，我包含了代码来显示一个通过用户输入接受电影细节的表单。我们使用内置的<code>useRealm(</code>钩子来检索当前打开的领域实例。来自表单字段的数据然后被传递给方法<code>handleAddMovie()</code>，该方法又被包装在一个回调中。</p>
<h3 id="writing-data-form-realm">将数据从表单写入领域</h3>
<p>使用<code>realm.write()</code>将表单中的数据写入领域。Realm中的<code>write</code>操作是传递给Realm实例函数的回调函数，使您能够创建、修改和删除Realm对象。这意味着，即使要删除一个领域中的数据，也要调用<code>realm.write()</code>。</p>
<p>在真实设备上测试我的项目后(因为它比Android模拟器快)，我在主屏幕上打开了应用程序。</p>
<p><img data-attachment-id="156039" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/homescreen-view-android-device/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device.png" data-orig-size="730,1299" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="homescreen-view-android-device" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device-169x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device-575x1024.png" decoding="async" class="aligncenter size-full wp-image-156039 jetpack-lazy-image" src="../Images/67e7392f1777ee6e9c833804ab016fea.png" alt="Our Homescreen view in an Android device" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device-169x300.png 169w, https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device-575x1024.png 575w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156039" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/homescreen-view-android-device/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device.png" data-orig-size="730,1299" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="homescreen-view-android-device" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device-169x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device-575x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156039" src="../Images/67e7392f1777ee6e9c833804ab016fea.png" alt="Our Homescreen view in an Android device" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device-169x300.png 169w, https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device-575x1024.png 575w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/homescreen-view-android-device.png"/></noscript>
<p>点击<strong>添加电影</strong>将我带到这个屏幕:</p>
<p><img data-attachment-id="156041" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/addmoviescreen-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button.png" data-orig-size="730,1297" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="addmoviescreen-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button-169x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button-576x1024.png" decoding="async" class="aligncenter size-full wp-image-156041 jetpack-lazy-image" src="../Images/28e13cc06b52f4b147fc4bf6231841e2.png" alt="Clicking the AddMovieScreen button brings us to this page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button-169x300.png 169w, https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button-576x1024.png 576w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156041" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/addmoviescreen-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button.png" data-orig-size="730,1297" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="addmoviescreen-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button-169x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button-576x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156041" src="../Images/28e13cc06b52f4b147fc4bf6231841e2.png" alt="Clicking the AddMovieScreen button brings us to this page" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button-169x300.png 169w, https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button-576x1024.png 576w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/addmoviescreen-button.png"/></noscript>
<p>同样，在<code>DeleteMovieScreen.tsx</code>中，我添加了代码来执行领域中的<code>delete</code>操作。</p>
<pre class="language-typescript hljs">import React from 'react';
import {View, StyleSheet,  Pressable, Text, FlatList, SafeAreaView} from 'react-native';
import {Movie} from '../models/Movie';
<strong>import {MovieRealmContext} from '../models';</strong>
import {StackNavigationProp} from '@react-navigation/stack';
import {RootStackParamList} from '../RootStackParams';
import { useNavigation } from '@react-navigation/native';
import colors from '../styles/colors';
<strong>const {useRealm, useQuery} = MovieRealmContext;</strong>
type delScreenProp = StackNavigationProp&lt;RootStackParamList, 'DeleteMovieScreen'&gt;;

function DeleteMovieScreen() {
  const navigation = useNavigation&lt;delScreenProp&gt;();
  <strong>const realm = useRealm();
  const movies = useQuery(Movie);</strong>


  return (
    &lt;SafeAreaView style={styles.listContainer}&gt;
      &lt;View style={{ flexDirection: 'row', justifyContent: 'center', margin: 10 }}&gt;     
       &lt;/View&gt;
        &lt;FlatList data={<strong>movies.sorted("releaseyear"</strong>)} renderItem={({ item }) =&gt; {
        return (
          &lt;View style={{ flexDirection: 'row', justifyContent: 'center', margin: 10 }}&gt;            
            &lt;Text style={styles.text} &gt;{item.title}&lt;/Text&gt;
            &lt;Pressable style={styles.button}
              onPress={() =&gt; {
                <strong>realm.write(() =&gt; {
                  realm.delete(item)
                })</strong>
              }} &gt;&lt;Text style={styles.buttontext}&gt;{"Delete 🗑️"}&lt;/Text&gt;&lt;/Pressable&gt;
          &lt;/View&gt;
        );
      }} &gt;&lt;/FlatList&gt;
      &lt;Pressable style={styles.button} onPress={() =&gt; navigation.navigate('HomeScreen')}&gt;
        &lt;Text style={styles.buttontext}&gt;Go Home&lt;/Text&gt;
        &lt;/Pressable&gt;
    &lt;/SafeAreaView &gt;
  );
}
export default DeleteMovieScreen;
</pre>
<p>注意上面粗体显示的行。语句<code>realm.delete()</code>包含在一个<code>realm.write()</code>中。该屏幕的结果将是一个现有电影的排序列表，每个电影标题旁边有一个<strong>删除</strong>按钮和垃圾桶图标。</p>
<p><img data-attachment-id="156043" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/deletemoviescreen-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view.png" data-orig-size="730,1297" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="deletemoviescreen-view" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view-169x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view-576x1024.png" decoding="async" class="aligncenter size-full wp-image-156043 jetpack-lazy-image" src="../Images/1bc822fe95c7be2c496ba7b7b6166bd8.png" alt="The DeleteMovieScreen view" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view-169x300.png 169w, https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view-576x1024.png 576w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156043" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/deletemoviescreen-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view.png" data-orig-size="730,1297" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="deletemoviescreen-view" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view-169x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view-576x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156043" src="../Images/1bc822fe95c7be2c496ba7b7b6166bd8.png" alt="The DeleteMovieScreen view" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view-169x300.png 169w, https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view-576x1024.png 576w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/deletemoviescreen-view.png"/></noscript>
<p>点击<strong>删除</strong>按钮将从领域中删除所选电影标题的特定记录。</p>
<h3 id="displaying-list-realm">显示领域中的列表</h3>
<p>在<code>ViewMovieScreen.tsx</code>中，我写了代码来显示这个领域的电影列表。内置的<code>useQuery()</code>钩子将返回给定类型的领域对象的集合。它既可以用<a href="https://www.mongodb.com/docs/realm/sdk/react-native/realm-database/define-a-realm-object-model/#realm-schema">对象模式类</a>调用，也可以用字符串形式的模型名调用。<code>useQuery()</code>钩子监视集合中任何对象的更新，并根据查询结果的任何变化重新呈现组件。</p>
<pre class="language-typescript hljs">import React from 'react';
import { View, StyleSheet, Pressable, Text, FlatList } from 'react-native';
import { Movie } from '../models/Movie';
<strong>import { MovieRealmContext } from '../models';</strong>
import { StackNavigationProp } from '@react-navigation/stack';
import { RootStackParamList } from '../RootStackParams';
import { useNavigation } from '@react-navigation/native';
/* import { ViewMovieItem } from '../components/ViewMovieItem'; */
import { shadows } from '../styles/shadows';
import colors from '../styles/colors';

type updateScreenProp = StackNavigationProp&lt;RootStackParamList, 'ViewMovieScreen'&gt;;

function ViewMovieScreen() {
  const navigation = useNavigation&lt;updateScreenProp&gt;();
  <strong>const { useQuery } = MovieRealmContext;
  const result = useQuery(Movie);</strong>
  const movies = result.sorted("releaseyear");
  return (
    &lt;View style={styles.listContainer}&gt;
      &lt;FlatList
        data={movies}
        renderItem={({ item }) =&gt; (
          &lt;ViewMovieItem
            movie={item}
          /&gt;
        )}
      /&gt;
      &lt;Pressable style={styles.button} onPress={() =&gt; navigation.navigate('HomeScreen')}&gt;
        &lt;Text style={styles.buttontext}&gt;Go Home&lt;/Text&gt;
      &lt;/Pressable&gt;
    &lt;/View&gt;
  );
}

type ViewMovieItemProps = {
  movie: Movie &amp; Realm.Object;
};

export const ViewMovieItem = React.memo&lt;ViewMovieItemProps&gt;(
  ({ movie }) =&gt; {
    return (
      &lt;View style={styles.movie}&gt;
        &lt;View style={styles.movieContainer}&gt;
          &lt;Text numberOfLines={1} style={styles.text}&gt;
            {movie.title}
          &lt;/Text&gt;
          &lt;Text numberOfLines={1} style={styles.text}&gt;
            {movie.description}
          &lt;/Text&gt;
          &lt;Text numberOfLines={1} &gt;
            {movie.releaseyear}
          &lt;/Text&gt;
        &lt;/View&gt;
      &lt;/View&gt;
    );
  },
);
export default ViewMovieScreen;
</pre>
<p>输出是按发行年份排序的电影细节列表。</p>
<p><img data-attachment-id="156045" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/viewmoviescreen-sorted-release-date/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date.png" data-orig-size="730,1297" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="viewmoviescreen-sorted-release-date" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date-169x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date-576x1024.png" decoding="async" class="aligncenter size-full wp-image-156045 jetpack-lazy-image" src="../Images/d4baa2d52ceb51b3c329c397661ee9eb.png" alt="In the ViewMovieScreen, we can see a list of movies sorted by release date" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date-169x300.png 169w, https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date-576x1024.png 576w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156045" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/viewmoviescreen-sorted-release-date/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date.png" data-orig-size="730,1297" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="viewmoviescreen-sorted-release-date" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date-169x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date-576x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156045" src="../Images/d4baa2d52ceb51b3c329c397661ee9eb.png" alt="In the ViewMovieScreen, we can see a list of movies sorted by release date" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date-169x300.png 169w, https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date-576x1024.png 576w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/viewmoviescreen-sorted-release-date.png"/></noscript>
<p>如果在执行应用程序后更改模式，并且数据库中已经存在数据，则必须迁移模式或增加模式版本。您可以在<code>index.ts</code>文件中这样做，如下所示:</p>
<pre class="language-typescript hljs">import {createRealmContext} from '@realm/react';
import {Movie} from './Movie';
export const MovieRealmContext = createRealmContext({
  schema: [Movie],
  schemaVersion:2
});
</pre>
<p>模式更改的一个示例用例是更改属性的名称或类型。在这种情况下，增加模式版本是继续执行应用程序最简单的方法。如果不这样做，应用程序将无法运行，并引发一个关于迁移的错误。</p>
<h3 id="adding-update-functionality-realm-realm-studio">使用Realm Studio在Realm中添加<code>update</code>功能</h3>
<p>为了CRUD的任务，我决定打破常规。我使用MongoDB的realm Studio v 13.0来更轻松地管理我的Realm数据库，而不是创建一个类似于我们为操作Realm数据而构建的<code>View</code>、<code>Delete</code>和<code>Add</code>屏幕的屏幕。使用基于GUI的工具，打开现有领域并在其中添加和修改数据变得简单多了。</p>
<p><img data-attachment-id="156047" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/realm-studio-gui/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui.png" data-orig-size="730,380" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="realm-studio-gui" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui-300x156.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui.png" decoding="async" class="aligncenter size-full wp-image-156047 jetpack-lazy-image" src="../Images/6c678fedb8190f69f17f486eefc50670.png" alt="Realm Studio is a GUI editor" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui-300x156.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156047" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/realm-studio-gui/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui.png" data-orig-size="730,380" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="realm-studio-gui" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui-300x156.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156047" src="../Images/6c678fedb8190f69f17f486eefc50670.png" alt="Realm Studio is a GUI editor" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui-300x156.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-studio-gui.png"/></noscript>
<p>为了使用Realm Studio完成<code>Update</code>任务，让我们首先定位我们的Realm文件。您可以使用以下代码确定领域文件在您的设备或模拟器上的本地路径:</p>
<pre class="language-typescript hljs">Realm.open({}).then(realm =&gt; {
    console.log("Realm is located at: " + realm.path);
});
</pre>
<p>例如，在当前项目中，路径将是:</p>
<pre class="language-plaintext hljs">/data/data/com.reactrealmdemo/files/default.realm</pre>
<p>然后，我们可以通过Android Studio的<a href="https://developer.android.com/studio/debug/device-file-explorer">设备文件浏览器工具</a>打开这个文件，但只能在应用程序运行时打开。确保您已经将Android Studio配置为项目的框架，而不管您使用哪个IDE来编辑项目文件。例如，我使用VS代码编辑我的项目文件，所以当我第一次在Android Studio中打开项目时，我被提示配置框架。</p>
<p>一旦您通过了这一步，并打开了设备文件浏览器，向下滚动，直到您找到您的领域文件。</p>
<p><img data-attachment-id="156049" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/realm-file-realm-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio.jpg" data-orig-size="730,463" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="realm-file-realm-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio-300x190.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio.jpg" decoding="async" class="aligncenter size-full wp-image-156049 jetpack-lazy-image" src="../Images/ad9d0f07d3e6ed74ac2af99d6c3832b2.png" alt="Find and open your realm file in Realm Studio" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio-300x190.jpg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156049" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/realm-file-realm-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio.jpg" data-orig-size="730,463" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="realm-file-realm-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio-300x190.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio.jpg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156049" src="../Images/ad9d0f07d3e6ed74ac2af99d6c3832b2.png" alt="Find and open your realm file in Realm Studio" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio.jpg 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio-300x190.jpg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/realm-file-realm-studio.jpg"/></noscript>
<p>右键点击<strong> <code>default.realm</code> </strong>并点击<strong>另存为</strong>将领域文件保存到你的磁盘。完成后，您可以使用Realm Studio打开、查看和编辑该文件。</p>
<p>启动Realm Studio并在其主屏幕上点击<strong>打开Realm文件</strong>。选择您刚刚保存文件的位置。</p>
<p>这是我保存到<code>C:\Source Codes</code>的<code>default.realm</code>文件。我们的电影数据现在可以在GUI工具中看到。我可以单击任何属性(列)并进行编辑。</p>
<p><img data-attachment-id="156051" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/movie-data-visible-realm-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio.png" data-orig-size="730,143" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="movie-data-visible-realm-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio-300x59.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio.png" decoding="async" class="aligncenter size-full wp-image-156051 jetpack-lazy-image" src="../Images/2d37cda5f4e11223703a6fb44d4a0c02.png" alt="Our movie data is visible and editable in Realm Studio" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio-300x59.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156051" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/movie-data-visible-realm-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio.png" data-orig-size="730,143" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="movie-data-visible-realm-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio-300x59.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156051" src="../Images/2d37cda5f4e11223703a6fb44d4a0c02.png" alt="Our movie data is visible and editable in Realm Studio" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio-300x59.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/movie-data-visible-realm-studio.png"/></noscript>
<p>我甚至可以添加新的属性，删除现有的记录，等等。</p>
<p><img data-attachment-id="156053" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/create-movie-screen-realm-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio.png" data-orig-size="730,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="create-movie-screen-realm-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio.png" decoding="async" class="aligncenter size-full wp-image-156053 jetpack-lazy-image" src="../Images/ae89cb50bfb61c003018ae5dc6f8f1de.png" alt="Create a new movie listing within Realm Studio" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio-300x194.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156053" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/create-movie-screen-realm-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio.png" data-orig-size="730,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="create-movie-screen-realm-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156053" src="../Images/ae89cb50bfb61c003018ae5dc6f8f1de.png" alt="Create a new movie listing within Realm Studio" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio-300x194.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/create-movie-screen-realm-studio.png"/></noscript>
<p>请注意，这些数据现在存在于本地磁盘上，而不存在于模拟器或运行项目的设备上，因此原始的realm文件不会受到我们在这里所做的任何更改的影响，除非我们用更新的文件替换该文件。</p>
<p>也可以在第一次使用<code>Realm.Configuration</code>创建之前，将领域位置和名称设置为不同于默认的位置和名称。</p>
<h3 id="importing-exporting-data-realm-studio">使用Realm Studio导入和导出数据</h3>
<p>Realm Studio还允许您导入和导出领域数据。您可以从任何CSV导入数据，也可以将现有领域数据导出到CSV。</p>
<p><img data-attachment-id="156055" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/import-data-csv/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv.png" data-orig-size="730,646" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="import-data-csv" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv-300x265.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv.png" decoding="async" class="aligncenter size-full wp-image-156055 jetpack-lazy-image" src="../Images/cbe5bbd46bf6ef7c5efd3513f6df6da2.png" alt="You can import data into Realm via .csv file" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv-300x265.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156055" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/import-data-csv/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv.png" data-orig-size="730,646" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="import-data-csv" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv-300x265.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156055" src="../Images/cbe5bbd46bf6ef7c5efd3513f6df6da2.png" alt="You can import data into Realm via .csv file" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv-300x265.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/import-data-csv.png"/></noscript>
<p>您还可以将模型定义保存为特定的格式，并在其他应用程序中重用它们。</p>
<p><img data-attachment-id="156058" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/save-model-definitions-reuse/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse.png" data-orig-size="730,551" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="save-model-definitions-reuse" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse-300x226.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse.png" decoding="async" class="aligncenter size-full wp-image-156058 jetpack-lazy-image" src="../Images/4eb21ececc5ee48ede44d4f40ae369a2.png" alt="You can save your model definitions for reuse in other realms" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse-300x226.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156058" data-permalink="https://blog.logrocket.com/realm-react-native/attachment/save-model-definitions-reuse/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse.png" data-orig-size="730,551" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="save-model-definitions-reuse" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse-300x226.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156058" src="../Images/4eb21ececc5ee48ede44d4f40ae369a2.png" alt="You can save your model definitions for reuse in other realms" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse-300x226.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/save-model-definitions-reuse.png"/></noscript>
<p>您可以将数据保存为JSON格式或其他本地领域文件。</p>
<h2>结论</h2>
<p>因此，在React Native中使用Realm非常容易，在@realm/react库中更是如此。开发人员可以充分利用这个库、其现成的模板和Realm Studio，在移动应用程序中快速高效地处理数据存储和操作任务。</p>
<p>使用React Native领域时的一些最终注意事项:</p>
<ul>
<li>请注意领域数据库(现在是遗留/过时的)和MongoDB领域(当前和最新的领域)之间的区别</li>
<li>使用@react/realm库使得使用领域变得更加容易和快速</li>
<li>Realm Studio是一个GUI工具，可以让您快速查看、更新和删除Realm中的数据等等</li>
<li>不要在应用程序运行时删除领域文件</li>
</ul>
<h3>有用的链接</h3>

<p><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p><p>Start proactively monitoring your React Native apps — <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">try LogRocket for free</a>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>