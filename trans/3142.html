<html>
<head>
<title>React Native touchable vs. pressable components - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React 本机可触摸组件与可按压组件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/#0001-01-01">https://blog.logrocket.com/react-native-touchable-vs-pressable-components/#0001-01-01</a></blockquote><div><article class="article-post">
<p>现代智能手机通常配备触摸屏，而不是内置的物理键盘，移动操作系统提供各种手势功能来使用应用程序。例如，现在，移动应用程序支持屏幕点击、长屏幕点击、拖放和类似多点触摸的手势。用户可以通过按钮和其他交互式 UI 元素，利用简单的手指触摸事件来使用任何通用应用程序中的几乎所有功能。</p>
<p>React Native 最初提供了原生平台特定的按钮和几个可触摸的核心组件，用于处理基本的用户手势。后来，该框架引入了用于处理常见用户手势的 Pressable API。</p>
<p>在本文中，我们将讨论 React Native 的可触摸和可按压组件，使用示例来确定每种组件类型的优点和局限性。此外，我们将讨论何时需要根据 UI/UX 原则使用每个组件。你也可以随意浏览这篇文章，因为我们会涉及很多内容:</p>

<h2 id="react-native-touchable-components">反应本机可触摸组件</h2>
<p>在 React Native 中，我们可以使用<code>Button</code>组件来处理基本的触摸事件。组件<code>Button</code>在屏幕上呈现一个特定于平台的本地按钮元素，所以它不像<code>View</code>组件那样<a href="https://blog.logrocket.com/integrate-react-native-components-native-apps/">可以跨平台定制</a>。作为一种解决方案，React Native 引入了可触摸组件来创建定制风格的跨平台按钮。</p>
<p>在讨论可触摸组件之前，让我们创建一个本机按钮，并确定它的局限性。</p>
<h3 id="creating-native-button">创建本机按钮</h3>
<p>首先，使用以下命令创建一个新的 React 本地项目:</p>
<pre class="language-bash hljs">npx react-native init TouchableExample
cd TouchableExample
</pre>
<p>接下来，将以下代码添加到您的<code>App.js</code>源文件中:</p>
<pre class="&quot;language-javascript">import React from 'react';
import {
  SafeAreaView,
  Button,
  StyleSheet,
  View,
} from 'react-native';

const App = () =&gt; {
  const onTap = () =&gt; {
    console.log('Button touched!');
  };
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Button
        title="Default button"
        onPress={onTap}
      /&gt;
      &lt;View style={styles.separator}/&gt;
      &lt;Button
        title="Default button (disabled)"
        disabled={true}
        onPress={onTap}
      /&gt;
      &lt;View style={styles.separator}/&gt;
      &lt;Button
        title="Red button"
        color="red"
        onPress={onTap}
      /&gt;
    &lt;/SafeAreaView&gt;
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    marginHorizontal: 36,
  },
  separator: {
    height: 12
  }
});

export default App;
</pre>
<p>上面的代码片段创建了三个本机按钮:</p>
<ol>
<li>具有默认主题颜色的按钮</li>
<li>默认按钮，禁用</li>
<li>红色按钮</li>
</ol>
<p>使用以下命令运行上述代码:</p>
<pre class="language-bash hljs">npm start 
# --- or ---
yarn start

npx react-native run-android
# --- or ---
npx react-native run-ios
</pre>
<p>当您点击活动按钮时，您将看到三种不同样式的按钮元素和一个基于您当前移动平台的反馈动画。请看 Android 设备上显示的以下预览:</p>
<p><img data-attachment-id="123652" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/native-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/native-button.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="native-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/native-button-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/native-button-485x1024.gif" decoding="async" class="aligncenter size-full wp-image-123652 jetpack-lazy-image" src="../Images/fa2d1ae4df24b5d0b91b4eac96a3810d.png" alt="Our native buttons" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/native-button.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/native-button.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="123652" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/native-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/native-button.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="native-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/native-button-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/native-button-485x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-123652" src="../Images/fa2d1ae4df24b5d0b91b4eac96a3810d.png" alt="Our native buttons" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/native-button.gif"/></noscript>
<h3 id="limitations">限制</h3>
<p>在 Android 上，<code>color</code> prop 改变特定按钮的背景颜色，在 iOS 上改变文本颜色(也就是按钮的前景色)。<code>style</code>道具对于<code>Button</code>是不可用的，所以我们需要添加一个分隔符元素或者用<code>View</code>包裹它来相应地设置按钮边距。</p>
<p>如您所见，<code>Button</code>组件的 UI 定制仅限于<code>color</code>道具，并且按钮看起来基于移动平台而不同。</p>
<p>因此，React Native 为您提供了可触摸的组件，以创建用户可以触摸的可定制的跨平台元素。</p>
<h2 id="touchableopacity-component"><code>TouchableOpacity</code>组件</h2>
<p><code>TouchableOpacity</code>是作为触摸事件反馈降低不透明度级别的核心组件。它在内部使用<code>Animated.View</code>组件来实现不透明过渡——然后，您可以使用<code>style</code>道具进行造型，这与特定于平台的<code>Button</code>组件不同。它还支持子组件，允许您构建可触摸的图像、自定义按钮和复杂的列表项。</p>
<p>将以下代码添加到您的<code>App.js</code>文件中，用<code>TouchableOpacity</code>组件创建一些按钮:</p>
<pre class="language-javascript hljs">import React from 'react';
import {
  SafeAreaView,
  TouchableOpacity,
  StyleSheet,
  View,
  Text,
} from 'react-native';

const App = () =&gt; {
  const onTap = () =&gt; {
    console.log('Button touched!');
  };
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;TouchableOpacity
        style={[styles.button, { backgroundColor: '#ee2244' }]}
        onPress={onTap}&gt;
        &lt;Text&gt;Red button&lt;/Text&gt;
      &lt;/TouchableOpacity&gt;
      &lt;TouchableOpacity
        style={[styles.button, { backgroundColor: '#2277ee' }]}
        onPress={onTap}
        activeOpacity={0.6}&gt;
        &lt;Text&gt;Blue button&lt;/Text&gt;
      &lt;/TouchableOpacity&gt;
      &lt;TouchableOpacity
        style={[styles.button, { backgroundColor: '#22bb22' }]}
        onPress={onTap}
        activeOpacity={0.6}
        disabled={true}&gt;
        &lt;Text&gt;Green button (disabled)&lt;/Text&gt;
      &lt;/TouchableOpacity&gt;
    &lt;/SafeAreaView&gt;
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    marginHorizontal: 36,
  },
  button: {
    padding: 12,
    marginBottom: 12
  }
});

export default App;
</pre>
<p>这里，我们通过使用<code>TouchableOpacity</code>组件作为基本元素创建了三个定制按钮。我们可以:</p>
<ul>
<li>用<code>activeOpacity</code>按钮调整按下的不透明度</li>
<li>使用<code>disabled</code>道具禁用不透明度动画和触摸事件回调</li>
</ul>
<p>与特定于平台的<code>Button</code>组件不同，<code>TouchableOpacity</code>在所有支持的平台上看起来都是一样的。</p>
<p>运行上面的源代码，您将看到自定义按钮，如下所示:</p>
<p><img data-attachment-id="123654" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/custom-touchableopacity-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/custom-touchableopacity-button.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-touchableopacity-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/custom-touchableopacity-button-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/custom-touchableopacity-button-485x1024.gif" decoding="async" class="aligncenter size-full wp-image-123654 jetpack-lazy-image" src="../Images/f46a0c9cac555eb01db1905de41f4de6.png" alt="Our custom touchableOpacity button" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/custom-touchableopacity-button.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/custom-touchableopacity-button.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="123654" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/custom-touchableopacity-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/custom-touchableopacity-button.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-touchableopacity-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/custom-touchableopacity-button-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/custom-touchableopacity-button-485x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-123654" src="../Images/f46a0c9cac555eb01db1905de41f4de6.png" alt="Our custom touchableOpacity button" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/custom-touchableopacity-button.gif"/></noscript>
<p>该组件提供<code>hitSlop</code>和<code>pressRetentionOffset</code>来配置触摸动作行为和触敏区域。这些道具具有以下影响:</p>
<ul>
<li><code>hitSlop</code>:定义用户的触摸动作可以从原始按钮区域开始多远</li>
<li><code>pressRetentionOffset</code>:定义用户需要将手指从该区域移开多远才能取消激活一个按下的按钮。该偏移值也包括<code>hitSlop</code>值</li>
</ul>
<p>上述道具帮助您以用户友好的方式创建更小的可触摸元素，即添加一些交互式 UI 元素，在屏幕上呈现比指尖更小的可触摸区域。</p>
<p>下面的脚本实现了一个按钮，您可以通过触摸按钮上下边缘 100 像素，左右边缘 50 像素来激活该按钮。现在，您不需要点击按钮区域的顶部来激活它，但与默认配置相比，您必须将手指移得更远一点才能取消按下状态:</p>
<pre class="language-javascript hljs">&lt;TouchableOpacity
    style={[styles.button, { backgroundColor: '#ee2244' }]}
    onPress={onTap}
    hitSlop={{top: 100, left: 50, right: 50, bottom: 100}}
    pressRetentionOffset={200}&gt;
    &lt;Text&gt;Red button&lt;/Text&gt;
&lt;/TouchableOpacity&gt;
</pre>
<p>您可以使用该组件来创建任何可触摸的应用程序 UI 部分。例如，下面的代码片段呈现一个图像按钮:</p>
<pre class="language-javascript hljs">import React from 'react';
import {
  SafeAreaView,
  TouchableOpacity,
  StyleSheet,
  Text,
  Image,
} from 'react-native';

const App = () =&gt; {
  const onTap = () =&gt; {
    console.log('Button touched!');
  };
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;TouchableOpacity
        style={[styles.button, { backgroundColor: '#2277ee' }]}
        onPress={onTap}&gt;
        &lt;Image
          style={styles.tinyLogo}
          source={{
            uri: 'https://reactnative.dev/img/tiny_logo.png',
          }}
        /&gt;
        &lt;Text style={styles.buttonText}&gt;Image button&lt;/Text&gt;
      &lt;/TouchableOpacity&gt;
    &lt;/SafeAreaView&gt;
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    marginHorizontal: 36,
  },
  button: {
    padding: 12,
    marginBottom: 12,
    flexDirection: 'row',
    borderRadius: 6
  },
  buttonText: {
    marginTop: 10,
    marginLeft: 20,
    fontSize: 20
  },
  tinyLogo: {
    width: 50,
    height: 50,
  },
});

export default App;
</pre>
<p>上述源代码呈现了以下图像按钮:</p>
<p><img data-attachment-id="123656" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/image-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-485x1024.gif" decoding="async" class="aligncenter size-full wp-image-123656 jetpack-lazy-image" src="../Images/47e2195e20f5631feba48e3ffb3e9fc0.png" alt="Our image button" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="123656" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/image-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-485x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-123656" src="../Images/47e2195e20f5631feba48e3ffb3e9fc0.png" alt="Our image button" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button.gif"/></noscript>
<p>大多数开发人员用<code>FlatList</code>和<code>TouchableOpacity</code>创建现代列表组件。我在<a href="https://blog.logrocket.com/build-ecommerce-app-from-scratch-with-react-native/" target="_blank" rel="noopener">的这篇文章</a>中描述了如何开发一个可触摸的基于组件的电子商务应用。</p>
<p>您可以使用<code>onPress</code>、<code>onPressIn</code>、<code>onPressOut</code>和<code>onLongPress</code>回调将函数附加到特定触摸事件流中的各种事件。</p>
<h2 id="touchablehighlight-component"><code>TouchableHighlight</code>组件</h2>
<p>在按钮被按下的状态下，<code>TouchableHighlight</code>组件允许你改变子<code>View</code>组件的背景颜色。您不能将多个子元素放在这个组件中(因为它试图改变底层子组件的背景颜色)，但是您总是可以通过用<code>View</code>包装它们来添加嵌套元素。这个组件也接受<code>style</code>道具来应用<code>View</code>样式，类似于<code>TouchableOpacity</code>。</p>
<p>让我们在代码片段中使用<code>TouchableHighlight</code>组件，以便更熟悉它。下面的源代码重新实现了我们刚刚用<code>TouchableHighlight</code>组件构建的图像按钮:</p>
<pre class="language-javascript hljs">import React from 'react';
import {
  SafeAreaView,
  TouchableHighlight,
  StyleSheet,
  Text,
  View,
  Image,
} from 'react-native';

const App = () =&gt; {
  const onTap = () =&gt; {
    console.log('Button touched!');
  };
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;TouchableHighlight
        style={[styles.button, { backgroundColor: '#2277ee' }]}
        activeOpacity={0.7}
        underlayColor="#30aaff"
        onPress={onTap}&gt;
        &lt;View style={styles.buttonContent}&gt;
          &lt;Image
            style={styles.tinyLogo}
            source={{
              uri: 'https://reactnative.dev/img/tiny_logo.png',
            }}
          /&gt;
          &lt;Text style={styles.buttonText}&gt;Image button&lt;/Text&gt;
        &lt;/View&gt;
      &lt;/TouchableHighlight&gt;
    &lt;/SafeAreaView&gt;
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    marginHorizontal: 36,
  },
  button: {
    padding: 12,
    marginBottom: 12,
    borderRadius: 6
  },
  buttonContent: {
    flexDirection: 'row',
  },
  buttonText: {
    marginTop: 10,
    marginLeft: 20,
    fontSize: 20
  },
  tinyLogo: {
    width: 50,
    height: 50,
  },
});

export default App;
</pre>
<p>我们通过<code>underlayColor</code>属性改变默认按钮的按下状态颜色，然后我们可以看到自定义颜色作为触摸事件反馈。我们也可以通过<code>activeOpacity</code>道具改变底层组件的不透明度，就像我们对<code>TouchableOpacity</code>组件所做的那样。</p>
<p>请看下面的图片按钮预览:</p>
<p><img data-attachment-id="123658" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/image-button-touchablehighlight/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-touchablehighlight.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-button-touchablehighlight" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-touchablehighlight-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-touchablehighlight-485x1024.gif" decoding="async" class="aligncenter size-full wp-image-123658 jetpack-lazy-image" src="../Images/87dfde7fb05917eecfba090655f0ec53.png" alt="Our image button built with touchableHighlight" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-touchablehighlight.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-touchablehighlight.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="123658" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/image-button-touchablehighlight/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-touchablehighlight.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-button-touchablehighlight" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-touchablehighlight-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-touchablehighlight-485x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-123658" src="../Images/87dfde7fb05917eecfba090655f0ec53.png" alt="Our image button built with touchableHighlight" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/image-button-touchablehighlight.gif"/></noscript>
<p>您可以通过<code>onShowUnderlay</code>和<code>onHideUnderlay</code>回调订阅背景动画事件。</p>
<h2 id="touchablewithoutfeedback-component"><code>TouchableWithoutFeedback</code>组件</h2>
<p><code>TouchableOpacity</code>和<code>TouchableHighlight</code>组件都可以从<code>TouchableWithoutFeedback</code>组件定义中继承几个共享属性。例如，<code>disabled</code>和<code>onPress</code>式的道具就来源于<code>TouchableWithoutFeedback</code>的定义。</p>
<p>组件本身接受用户手势，但不显示任何反馈动画。通常，用户手势显示反馈动画是一种很好的 UI/UX 设计实践，所以<code>TouchableWithoutFeedback</code>在实际用例中很少有帮助。</p>
<p>这个组件只能附加一个子元素，就像<code>TouchableHighlight</code>组件一样，但是您总是可以通过用<code>View</code>包装它们来添加嵌套元素。</p>
<p>请看下面的示例源代码:</p>
<pre class="language-javascript hljs">import React, { useState } from 'react';
import {
  SafeAreaView,
  TouchableWithoutFeedback,
  StyleSheet,
  Text,
  View,
} from 'react-native';

const App = () =&gt; {
  let [counter, setCounter] = useState(0);
  const onTap = () =&gt; {
    setCounter(counter + 1);
  };
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;TouchableWithoutFeedback
        onPress={onTap}&gt;
        &lt;View style={[styles.button, { backgroundColor: '#2277ee' }]}&gt;
          &lt;Text style={styles.buttonText}&gt;Count ({ counter })&lt;/Text&gt;
        &lt;/View&gt;
      &lt;/TouchableWithoutFeedback&gt;
    &lt;/SafeAreaView&gt;
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    marginHorizontal: 36,
  },
  button: {
    padding: 12,
    marginBottom: 12,
    borderRadius: 6
  },
  buttonText: {
    fontSize: 20,
    textAlign: 'center'
  },
});

export default App;
</pre>
<p>上面的代码片段实现了一个简单的计数器应用程序，它随着每个按钮点击事件增加其显示值。这里，计数器值得到更新，但是我们看不到反馈动画。</p>
<p>看看下面 Android 上的预告:</p>
<p><img data-attachment-id="123660" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/button-no-feedback-touchablewithoutfeedback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-no-feedback-touchablewithoutfeedback.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-no-feedback-touchablewithoutfeedback" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-no-feedback-touchablewithoutfeedback-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-no-feedback-touchablewithoutfeedback-485x1024.gif" decoding="async" class="aligncenter size-full wp-image-123660 jetpack-lazy-image" src="../Images/8e7b0b7476d4ae29b43e326917c8b2e4.png" alt="A button with no feedback animation, built with touchableWithoutFeedback" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/button-no-feedback-touchablewithoutfeedback.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/button-no-feedback-touchablewithoutfeedback.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="123660" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/button-no-feedback-touchablewithoutfeedback/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-no-feedback-touchablewithoutfeedback.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-no-feedback-touchablewithoutfeedback" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-no-feedback-touchablewithoutfeedback-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-no-feedback-touchablewithoutfeedback-485x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-123660" src="../Images/8e7b0b7476d4ae29b43e326917c8b2e4.png" alt="A button with no feedback animation, built with touchableWithoutFeedback" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/button-no-feedback-touchablewithoutfeedback.gif"/></noscript>
<h2 id="touchablenativefeedback-component"><code>TouchableNativeFeedback</code>组件</h2>
<p>如前所述，可触摸组件是跨平台的 UI 组件，因此您可以实现一个独立于平台的 UI 部分来捕获用户手势。组件是一个 Android 独有的组件，帮助我们展示平台的连锁反应。</p>
<p>用<code>TouchableNativeFeedback</code>替换前面代码片段导入的<code>TouchableWithoutFeedback</code>核心组件，如下所示:</p>
<pre class="language-javascript hljs">import {
  SafeAreaView,
  TouchableNativeFeedback, // Updated
  StyleSheet,
  Text,
  View,
} from 'react-native';
</pre>
<p>接下来，将以下布局定义添加到<code>App</code>组件的<code>SafeAreaView</code>中:</p>
<pre class="language-javascript hljs">&lt;TouchableNativeFeedback
  onPress={onTap}&gt;
  &lt;View style={[styles.button, { backgroundColor: '#2277ee' }]}&gt;
    &lt;Text style={styles.buttonText}&gt;Count ({ counter })&lt;/Text&gt;
  &lt;/View&gt;
&lt;/TouchableNativeFeedback&gt;
</pre>
<p>上面的代码产生了下面的按钮:</p>
<p><img data-attachment-id="123662" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/button-touchablenativefeedback-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-component.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-touchablenativefeedback-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-component-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-component-485x1024.gif" decoding="async" class="aligncenter size-full wp-image-123662 jetpack-lazy-image" src="../Images/7c99c38ec259c974cc4910cd26cb98fa.png" alt="A button built with the touchableNativeFeedback component" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-component.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-component.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="123662" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/button-touchablenativefeedback-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-component.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-touchablenativefeedback-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-component-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-component-485x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-123662" src="../Images/7c99c38ec259c974cc4910cd26cb98fa.png" alt="A button built with the touchableNativeFeedback component" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-component.gif"/></noscript>
<p>还可以用组件道具自定义安卓涟漪效果，如下图:</p>
<pre class="language-javascript hljs">&lt;TouchableNativeFeedback
  onPress={onTap} background={TouchableNativeFeedback.Ripple('blue', false)}&gt;
  &lt;View style={[styles.button, { backgroundColor: '#2277ee' }]}&gt;
    &lt;Text style={styles.buttonText}&gt;Count ({ counter })&lt;/Text&gt;
  &lt;/View&gt;
&lt;/TouchableNativeFeedback&gt;
</pre>
<p>现在，您将看到一个与我们之前看到的默认涟漪效应不同的涟漪效应:</p>
<p><img data-attachment-id="123664" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/button-touchablenativefeedback-android-ripple/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-android-ripple.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-touchablenativefeedback-android-ripple" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-android-ripple-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-android-ripple-485x1024.gif" decoding="async" class="aligncenter size-full wp-image-123664 jetpack-lazy-image" src="../Images/3c0a0144a5dc8e52fd13c741b7a41878.png" alt="Our button built with the touchableNativeFeedback component and the Android ripple effect" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-android-ripple.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-android-ripple.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="123664" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/button-touchablenativefeedback-android-ripple/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-android-ripple.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-touchablenativefeedback-android-ripple" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-android-ripple-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-android-ripple-485x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-123664" src="../Images/3c0a0144a5dc8e52fd13c741b7a41878.png" alt="Our button built with the touchableNativeFeedback component and the Android ripple effect" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/button-touchablenativefeedback-android-ripple.gif"/></noscript>
<p>查看<a href="https://reactnative.dev/docs/touchablenativefeedback#ripple" target="_blank" rel="noopener"> <code>Ripple</code>静态方法文档</a>以了解更多关于所有支持参数的信息。</p>
<h2 id="touchableopacity-vs-touchablehighlight-vs-touchablewithoutfeedback-vs-touchablenativefeedback"><code>TouchableOpacity</code>对<code>TouchableHighlight</code>对<code>TouchableWithoutFeedback</code>对<code>TouchableNativeFeedback</code></h2>
<p>查看下表，了解何时在应用中使用每个可触摸组件:</p>
<table>
<thead>
<tr>
<th>可触摸组件名称</th>
<th>可触摸不透明度</th>
<th>可触摸高亮显示</th>
<th>TouchableWithoutFeedback</th>
<th>可触摸的反馈</th>
</tr>
</thead>
<tbody>
<tr>
<td>功能</td>
<td>当用户按下特定的可触摸元素时，减少不透明度</td>
<td>当用户按下特定的可触摸元素时，更改底层视图元素的背景色</td>
<td>当用户按下元素时不播放 UI 动画，但是触发事件处理程序</td>
<td>当用户按下该元素时，播放 Android 特有的涟漪效果</td>
</tr>
<tr>
<td>平台兼容性</td>
<td>适用于 Android 和 iOS 平台</td>
<td>适用于 Android 和 iOS 平台</td>
<td>适用于 Android 和 iOS 平台</td>
<td>仅适用于 Android 平台</td>
</tr>
<tr>
<td>支持子元素</td>
<td>能够包装多个子元素，而无需在视图中包装它们</td>
<td>只能包装一个子元素，但是通过在视图中包装它们来添加嵌套元素是可行的</td>
<td>只能包装一个子元素，但是通过在视图中包装它们来添加嵌套元素是可行的</td>
<td>只能包装一个子元素，但是可以通过在视图中包装来添加嵌套元素</td>
</tr>
<tr>
<td>合适的使用案例</td>
<td>开发人员可以使用该组件创建自定义按钮、菜单项和列表框</td>
<td>用例与 TouchableOpacity 相同，唯一的区别是反馈动画行为。许多开发人员使用这个组件来创建超链接</td>
<td>用例非常少——仅在不需要向用户显示任何按钮按压反馈时使用</td>
<td>适用于 Android 平台上的任何可触摸组件</td>
</tr>
</tbody>
</table>
<h2 id="react-native-pressable-components">反应本地可压制成分</h2>
<p>如前所述，React Native 提供了四种不同的可触摸组件来处理基本的用户手势。为了引入新的效果，比如缩放效果，React 本地团队需要创建另一个组件。当使用预先构建的可触摸组件时，我们也无法为一个可触摸元素组合任意动画，并且必须坚持使用开箱即用的特定、固定的反馈动画。</p>
<p>为了解决这个问题，React 本地团队在<a href="https://github.com/facebook/react-native/releases/tag/v0.63.0" target="_blank" rel="noopener"> v0.63 </a>中引入了带有可压性 API 的<a href="https://reactnative.dev/docs/pressable" target="_blank" rel="noopener"> <code>Pressable</code>组件</a>。如果你使用 Expo，你需要使用 Expo <a href="https://blog.expo.dev/expo-sdk-40-is-now-available-d4d73e67da33" target="_blank" rel="noopener"> SDK 40 </a>或更高版本来访问这个 API。</p>
<p>React Native Pressability API 不像可触摸组件那样提供多个内置的动画组件，而是提供一个名为<code>Pressable</code>的核心组件。<code>Pressable</code>组件非常灵活，允许应用开发者使用任何他们想要的反馈动画。我们可以用<code>Pressable</code>重新创建任何预定义的、可触摸的组件行为。</p>
<h3 id="pressable-component-examples">可压制组件示例</h3>
<p>让我们创建几个带有不同反馈动画的按钮来开始吧。我将示例项目源代码上传到了一个<a href="https://github.com/codezri/react-native-pressable-examples" target="_blank" rel="noopener"> GitHub 库</a>，因为直接添加到这里有点大。<br/>使用以下 Git 命令克隆存储库并安装依赖项:</p>
<pre class="language-bash hljs">git clone https://github.com/codezri/react-native-pressable-examples.git
cd react-native-pressable-examples

npm install
# --- or ---
yarn install
</pre>
<p>现在，在您的移动电话或模拟器上运行示例应用程序:</p>
<pre class="language-bash hljs">npm start
# --- or ---
yarn start

npx react-native run-android
# --- or ---
npx react-native run-ios
</pre>
<p>您将看到几个用<code>Pressable</code>组件创建的按钮，如下图所示:</p>
<p><img data-attachment-id="123666" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/implementing-touch-feedback-effects-pressable-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/implementing-touch-feedback-effects-pressable-component.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="implementing-touch-feedback-effects-pressable-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/implementing-touch-feedback-effects-pressable-component-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/implementing-touch-feedback-effects-pressable-component-485x1024.gif" decoding="async" class="aligncenter size-full wp-image-123666 jetpack-lazy-image" src="../Images/d96d83ef139a77e17d14d7d595f87a70.png" alt="Implementing touch feedback effects with the pressable component" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/implementing-touch-feedback-effects-pressable-component.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/implementing-touch-feedback-effects-pressable-component.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="123666" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/implementing-touch-feedback-effects-pressable-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/implementing-touch-feedback-effects-pressable-component.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="implementing-touch-feedback-effects-pressable-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/implementing-touch-feedback-effects-pressable-component-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/implementing-touch-feedback-effects-pressable-component-485x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-123666" src="../Images/d96d83ef139a77e17d14d7d595f87a70.png" alt="Implementing touch feedback effects with the pressable component" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/implementing-touch-feedback-effects-pressable-component.gif"/></noscript>
<p>前两个按钮分别实现类似于<code>TouchableOpacity</code>和<code>TouchableHighlight</code>的组件。接下来的三个按钮使用动态样式实现各种反馈效果。</p>
<p>我们可以用<code>pressed</code>状态变量动态更新任何<code>View</code>样式。例如，看看我们如何根据可按状态改变元素的不透明度值:</p>
<pre class="language-javascript hljs">const PressableOpacityButton = ({title, onTap}) =&gt; {
  return (
    &lt;Pressable
      onPress={onTap}
      style={({ pressed }) =&gt; [
        {
          opacity: pressed
            ? 0.2
            : 1,
          backgroundColor: '#2277ee'
        },
        styles.button,
      ]}&gt;
        &lt;Text style={styles.buttonText}&gt;{ title }&lt;/Text&gt;
    &lt;/Pressable&gt;
  );
}
</pre>
<p>我们还可以基于<code>pressed</code>状态变量更新<code>Pressable</code>组件的子元素——查看<a href="https://github.com/codezri/react-native-pressable-examples/blob/9472086715ab59ab928f9ddf1efa3bdda7f47fff/App.js#L80" target="_blank" rel="noopener"> <code>ComplexButton</code>组件源</a>,看看我们如何动态地改变文本颜色。</p>
<p>我们为演示创建了简单的按钮，但是您可以用<code>Pressable</code>包装任何复杂的组件。尝试在已经用可触摸组件开发的复杂应用中使用<code>Pressable</code>。</p>
<p>您也可以使用<code>android_ripple</code>道具启用 Android 涟漪效果，如下所示:</p>
<pre class="language-javascript hljs">android_ripple={{color: 'white'}}
</pre>
<p>尝试创建具有独特反馈效果的不同可按压元素。您可以使用<code>Pressable</code>创建任何交互式 UI 元素，作为内置可触摸组件的替代。</p>
<p>然而，这些反馈动画并不平滑，因为我们基于布尔可压状态切换样式，所以我们必须使用<a href="https://blog.logrocket.com/run-animations-react-react-native-one-codebase/" target="_blank" rel="noopener"> React 本地动画 API </a>来实现平滑的反馈动画。</p>
<p>好消息是，可压性和动画 API 的组合可以取代 React Native 中所有现有的可触摸组件！</p>
<p>例如，当用户触摸下面的图像按钮源时，它会平滑地改变其不透明度:</p>
<pre class="language-javascript hljs">import React from 'react';
import {
  SafeAreaView,
  Pressable,
  Animated,
  StyleSheet,
  Text,
  Image,
} from 'react-native';

const App = () =&gt; {
  const animated = new Animated.Value(1);
  const fadeIn = () =&gt; {
    Animated.timing(animated, {
      toValue: 0.4,
      duration: 150,
      useNativeDriver: true,
    }).start();
  };

  const fadeOut = () =&gt; {
    Animated.timing(animated, {
      toValue: 1,
      duration: 250,
      useNativeDriver: true,
    }).start();
  };
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Pressable onPressIn={fadeIn} onPressOut={fadeOut}&gt;
        &lt;Animated.View
          style={[styles.button, { backgroundColor: '#2277ee', opacity: animated }]}&gt;
          &lt;Image
            style={styles.tinyLogo}
            source={{
              uri: 'https://reactnative.dev/img/tiny_logo.png',
            }}
          /&gt;
          &lt;Text style={styles.buttonText}&gt;Image button&lt;/Text&gt;
        &lt;/Animated.View&gt;
      &lt;/Pressable&gt;
    &lt;/SafeAreaView&gt;
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    marginHorizontal: 36,
  },
  button: {
    padding: 12,
    marginBottom: 12,
    flexDirection: 'row',
    borderRadius: 6
  },
  buttonText: {
    marginTop: 10,
    marginLeft: 20,
    fontSize: 20
  },
  tinyLogo: {
    width: 50,
    height: 50,
  },
});

export default App;
</pre>
<p>运行上述代码后，您将看到下面的图像按钮:</p>
<p><img data-attachment-id="123668" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/pressable-image-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/pressable-image-button.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="pressable-image-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/pressable-image-button-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/pressable-image-button-485x1024.gif" decoding="async" class="aligncenter size-full wp-image-123668 jetpack-lazy-image" src="../Images/adb361ab9eb06a88b5cd3e0b8dda3528.png" alt="Our pressable image button" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/pressable-image-button.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/pressable-image-button.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="123668" data-permalink="https://blog.logrocket.com/react-native-touchable-vs-pressable-components/attachment/pressable-image-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/pressable-image-button.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="pressable-image-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/pressable-image-button-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/pressable-image-button-485x1024.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-123668" src="../Images/adb361ab9eb06a88b5cd3e0b8dda3528.png" alt="Our pressable image button" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/pressable-image-button.gif"/></noscript>
<p>上述组件的行为与内置的<code>TouchableOpacity</code>组件相同。</p>
<p>可按组件还支持<code>hitSlop</code>和<code>pressRetentionOffset</code>定制接受的用户手势，支持<code>onPress</code>、<code>onPressIn</code>、<code>onPressOut</code>和<code>onLongPress</code>订阅手势生命周期事件。</p>
<h2 id="touchable-vs-pressable-components">可触摸与可按压组件</h2>
<p>一些 React 本地开发人员会提到 Pressability API 是对现有可触摸组件的改进替代，而其他人则认为 Pressability API 是 React 本地代码库重构的结果。</p>
<p>查看以下对照表，为您的应用找到合适的组件类型:</p>
<table>
<thead>
<tr>
<th>可触的</th>
<th>可压制的</th>
</tr>
</thead>
<tbody>
<tr>
<td>内置反馈动画:<br/>不透明度变化<br/>背景颜色变化<br/>涟漪效应(仅适用于 Android)</td>
<td>不提供任何内置的反馈动画；开发者必须实现反馈效果</td>
</tr>
<tr>
<td>通过四个核心组件提供可触摸的功能</td>
<td>通过一个名为 Pressable 的核心组件提供可压性 API 特性</td>
</tr>
<tr>
<td>效果定制是有限的，但满足主要开发人员的要求</td>
<td>非常灵活和可定制，因为没有内置的反馈动画</td>
</tr>
<tr>
<td>一些动画是平滑且吸引人的(例如，可触摸不透明不透明过渡)</td>
<td>开发人员需要使用动画 API 来实现流畅的动画；否则，动画会变得即时和传统</td>
</tr>
<tr>
<td>适用于实现需要简单反馈效果的交互式元素，如不透明度变化和背景变化</td>
<td>适用于实现需要独特效果和动画的交互式元素。由于广泛的定制支持，开发人员还可以使用 Pressability API 来实现 UI 工具包和包装库。这些库具有内置的反馈动画，即<a href="https://github.com/mrousavy/react-native-pressable-opacity">反应-自然-可按压-不透明</a></td>
</tr>
</tbody>
</table>
<p>几乎所有的 React 本地应用程序都使用可触摸组件来实现定制按钮、交互式列表和平铺式通用 UI 元素。此外，流行的 UI 工具包如<a href="https://github.com/GeekyAnts/NativeBase" target="_blank" rel="noopener"> NativeBase </a>在内部使用可触摸组件作为 UI 元素的构建块。因此，React 本地团队可能不会很快弃用可触摸的组件。</p>
<p>然而，他们确实建议开发人员在构建新应用程序时使用 Pressability API，因为它为处理用户手势提供了更好的标准，正如他们在官方博客中提到的那样:</p>
<blockquote><p>我们期望大多数人会在幕后利用<code>Pressable</code>来构建和共享组件，而不是依赖于像<code>TouchableOpacity</code>这样的默认体验。— React Native <a href="https://reactnative.dev/blog/2020/07/06/version-0.63#pressable" target="_blank" rel="noopener"> v0.63 公告</a></p></blockquote>
<p>尝试灵活的 Pressability API 在新应用中构建交互式 UI 元素无疑是一个好主意。核心可触摸组件现在在内部使用 Pressability API，所以迁移到 Pressability API 不是强制性的——当然，直到我们收到一个 React 本机稳定版本，该版本不支持内置的可触摸组件。</p>
<h2>结论</h2>
<p>我们讨论并实际探索了 React Native 中可触摸和可按压的组件。这两种组件类型都为实现响应用户手势的交互式 UI 元素提供了解决方案。</p>
<p>显示用户手势的反馈效果是一种很好的 UI/UX 实践。例如，如果我们改变了某个菜单项的颜色，用户就知道这个程序接受了最近的用户手势。因此，每个应用程序通常都会显示交互式 UI 元素的反馈动画。</p>
<p>但是过度使用反馈动画会降低你的应用程序的质量，所以不要对用户手势使用过多的动画或彩色效果。符合应用程序主题的最小反馈动画将保持应用程序的专业外观。</p>
<p>可触摸组件带有预建的反馈动画，自定义选项有限，因此您可以更快地使用它们，但您将面临自定义问题。与此同时，Pressability API 允许您按照自己的意愿构建反馈动画，因此您可以完全自由地实现反馈效果，即使这需要一些努力来实现。如果你使用像<a href="https://blog.logrocket.com/using-nativebase-with-react-native/" target="_blank" rel="noopener"> NativeBase </a>这样的 UI 套件，你不需要直接使用这两种组件类型——因为 UI 套件通常带有预定义的手势反馈系统。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>