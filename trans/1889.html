<html>
<head>
<title>Creating a pop-up modal in React Native  - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 React Native - LogRocket 博客中创建弹出模式</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/creating-a-pop-up-modal-in-react-native/#0001-01-01">https://blog.logrocket.com/creating-a-pop-up-modal-in-react-native/#0001-01-01</a></blockquote><div><article class="article-post">
<p>模态是改善用户界面的一个很好的工具。从本质上来说，<a href="https://blog.logrocket.com/top-react-modal-components-for-2021/">模态是一个出现在另一个屏幕上方的屏幕</a>,引导用户注意关键信息或引导他们进入流程的下一步。一个活跃的模态禁用原始屏幕，它仍然可见，提示用户与新屏幕交互。</p>
<p>在本教程中，我们将查看一些模态的实际用例，并通过在 React Native 中创建以下内容来提高我们对它们的理解:</p>
<ul>
<li>当用户单击按钮时打开的模式</li>
<li>带有子组件的可重用模型</li>
<li>当用户导航到屏幕时打开的弹出模式</li>
</ul>
<p>你可以在我的<a href="https://github.com/claysimps/RNModalExample"> GitHub </a>上找到这个项目的源代码。</p>
<h2 id="initializetheproject">初始化项目</h2>
<p>首先，要初始化项目，请在终端中键入以下代码:</p>
<pre>expo init projectName &amp;&amp; cd projectName &amp;&amp; expo start
</pre>
<p>如果你要将模态添加到一个现有的项目中，而不是从头开始，跳过这一步，将<code>react-native-modal</code>添加到你的项目中，并选择<strong>标题</strong>选项。</p>
<p>选择<code>tabs (TypeScript)</code>选项，它应该类似于下面的代码块:</p>
<pre>tabs (TypeScript)     several example screens and tabs using react-navigation and TypeScript
</pre>
<p>将弹出一个浏览器窗口，显示打开 Expo 项目的说明。现在，您可以打开您最喜欢的 IDE。如果你正在使用 VS 代码，在你的终端中输入<code>code .</code>来打开它。</p>
<h2 id="installreactnativemodal">安装<code>react-native-modal</code></h2>
<p><code>react-native-modal</code>如果你带着 React Native 的模态组件去美容院要求全面改造，你会得到什么。它建立在 React Native 的模态组件之上，提供了漂亮的动画和可定制的样式选项。</p>
<p>运行下面的代码来<a href="https://github.com/react-native-modal/react-native-modal#react-native-modal">安装<code>react-native-modal</code>T2:</a></p>
<pre>yarn add react-native-modal
</pre>
<h2 id="creatingabasicmodal">创建基本模型</h2>
<p>模态是由前面的动作触发的，比如导航到屏幕或点击按钮。</p>
<p>打开<code>screens/TabOneScreen</code>。将代码更改为类似下面的代码块:</p>
<pre>import * as React from "react";
import { Button, StyleSheet, Text, View } from "react-native";
import Modal from "react-native-modal";

export default function TabOneScreen() {

  const [isModalVisible, setIsModalVisible] = React.useState(false);

  const handleModal = () =&gt; setIsModalVisible(() =&gt; !isModalVisible);

  return (
    &lt;View style={styles.container}&gt;
      &lt;Text style={styles.title}&gt;Tab One&lt;/Text&gt;
      &lt;View style={styles.separator} /&gt;
      &lt;Button title="button" onPress={handleModal} /&gt;
      &lt;Modal isVisible={isModalVisible}&gt;
        &lt;View style={{ flex: 1 }}&gt;
          &lt;Text&gt;Hello!&lt;/Text&gt;
          &lt;Button title="Hide modal" onPress={handleModal} /&gt;
        &lt;/View&gt;
      &lt;/Modal&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: "center",
    justifyContent: "center",
  },
  title: {
    fontSize: 20,
    fontWeight: "bold",
  },
  text: {
    fontSize: 16,
    fontWeight: "400",
    textAlign: "center",
  },
  separator: {
    marginVertical: 30,
    height: 1,
    width: "80%",
  },
});
</pre>
<p>让我们仔细看看。</p>
<h3><code>useState</code></h3>
<pre>const [isModalVisible, setIsModalVisible] = React.useState(false);
</pre>
<p>React <code>useState</code>钩子返回<code>isModalVisible</code>，一个有状态值，和<code>setIsModalVisible</code>，一个更新它的函数。</p>
<p>初始状态是<code>false</code>，所以我们在改变状态之前看不到模态。在我们的例子中，我们将使用一个按钮。</p>
<h3><code>handleModal</code></h3>
<pre>const handleModal = () =&gt; setIsModalVisible(() =&gt; !isModalVisible);
</pre>
<p>按下按钮将调用<code>handleModal</code>并返回相反的状态。真变假，假变真。</p>
<h3><code>&lt;Modal /&gt;</code></h3>
<pre>&lt;Modal isVisible={isModalVisible}&gt;
</pre>
<p><code>Modal</code>有一个名为<code>isVisible</code>的属性，它接受一个布尔值。因为我们将<code>isModalVisible</code>传递给<code>isVisible</code>，所以情态动词知道它应该在什么时候出现。</p>
<p>您完成的模型将如下图所示:</p>
<p><img data-attachment-id="55688" data-permalink="https://blog.logrocket.com/creating-a-pop-up-modal-in-react-native/finished-basic-react-native-modal-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1.png" data-orig-size="500,1082" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="finished-basic-react-native-modal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1-473x1024.png" decoding="async" class="aligncenter wp-image-55688 size-full jetpack-lazy-image" src="../Images/14810d860414c8c8040016373bec4090.png" alt="Finished Basic React Native Modal" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1.png 500w, https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1-473x1024.png 473w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="55688" data-permalink="https://blog.logrocket.com/creating-a-pop-up-modal-in-react-native/finished-basic-react-native-modal-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1.png" data-orig-size="500,1082" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="finished-basic-react-native-modal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1-473x1024.png" decoding="async" loading="lazy" class="aligncenter wp-image-55688 size-full" src="../Images/14810d860414c8c8040016373bec4090.png" alt="Finished Basic React Native Modal" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1.png 500w, https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1-473x1024.png 473w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-basic-react-native-modal-1.png"/></noscript>
<h2 id="creatingareusablemodal">创建可重用的模型</h2>
<p>前面的例子创建了一个模态和打开关闭它的按钮。现在我们知道了这些步骤，让我们构建一个定制的模态和一个启动它的按钮。</p>
<p>让我们从一个简单的按钮开始，打开和关闭我们的模态。在<code>components</code>文件夹中，创建一个名为<code>Button.tsx</code>的新文件，并添加以下代码:</p>
<pre>import React from "react";
import { StyleSheet, Text, TouchableOpacity, View } from "react-native";
export type ButtonProps = {
  title: string;
  onPress: () =&gt; void;
};
export const Button = ({ title, onPress }: ButtonProps) =&gt; {
  return (
    &lt;TouchableOpacity style={styles.button} onPress={onPress}&gt;
      &lt;Text style={styles.text}&gt;{title}&lt;/Text&gt;
    &lt;/TouchableOpacity&gt;
  );
};
const styles = StyleSheet.create({
  button: {
    backgroundColor: "blue",
    marginTop: 15,
    paddingVertical: 15,
    borderRadius: 25,
    width: "80%",
    alignItems: "center",
  },
  text: {
    color: "white",
    fontWeight: "700",
    fontSize: 18,
  },
});
</pre>
<p>您的输出应该如下图所示:</p>
<p><img data-attachment-id="55689" data-permalink="https://blog.logrocket.com/creating-a-pop-up-modal-in-react-native/button-react-native-modal-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1.png" data-orig-size="500,1082" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-react-native-modal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1-473x1024.png" decoding="async" class="aligncenter wp-image-55689 size-full jetpack-lazy-image" src="../Images/8fceec4e0abdd9746680337f4c77ccda.png" alt="Button React Native Modal" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1.png 500w, https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1-473x1024.png 473w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="55689" data-permalink="https://blog.logrocket.com/creating-a-pop-up-modal-in-react-native/button-react-native-modal-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1.png" data-orig-size="500,1082" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-react-native-modal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1-473x1024.png" decoding="async" loading="lazy" class="aligncenter wp-image-55689 size-full" src="../Images/8fceec4e0abdd9746680337f4c77ccda.png" alt="Button React Native Modal" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1.png 500w, https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1-473x1024.png 473w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/button-react-native-modal-1.png"/></noscript>
<p>现在我们已经构建了一个按钮，我们将创建我们的模态。在您的<code>components</code>文件夹中，创建一个名为<code>Modal.tsx</code>的文件，并添加以下代码:</p>
<pre>import React from "react";
import { StyleSheet, View, Text, Button } from "react-native";
import RNModal from "react-native-modal";
type ModalProps = {
  isVisible: boolean;
  children: React.ReactNode;
  [x: string]: any;
};
export const Modal = ({
  isVisible = false,
  children,
  ...props
}: ModalProps) =&gt; {
  return (
    &lt;RNModal
      isVisible={isVisible}
      animationInTiming={1000}
      animationOutTiming={1000}
      backdropTransitionInTiming={800}
      backdropTransitionOutTiming={800}
      {...props}&gt;
      {children}
    &lt;/RNModal&gt;
  );
};

const ModalContainer = ({ children }: { children: React.ReactNode }) =&gt; (
  &lt;View style={styles.container}&gt;{children}&lt;/View&gt;
);

const ModalHeader = ({ title }: { title: string }) =&gt; (
  &lt;View style={styles.header}&gt;
    &lt;Text style={styles.text}&gt;{title}&lt;/Text&gt;
  &lt;/View&gt;
);

const ModalBody = ({ children }: { children?: React.ReactNode }) =&gt; (
  &lt;View style={styles.body}&gt;{children}&lt;/View&gt;
);

const ModalFooter = ({ children }: { children?: React.ReactNode }) =&gt; (
  &lt;View style={styles.footer}&gt;{children}&lt;/View&gt;
);

const styles = StyleSheet.create({
  container: {
    backgroundColor: "#ffffff",
    borderRadius: 25,
    borderWidth: 1,
    borderColor: "#000",
    borderStyle: "solid",
  },
  header: {
    alignItems: "center",
    justifyContent: "center",
  },
  text: {
    paddingTop: 10,
    textAlign: "center",
    fontSize: 24,
  },
  body: {
    justifyContent: "center",
    paddingHorizontal: 15,
    minHeight: 100,
  },
  footer: {
    justifyContent: "center",
    alignItems: "center",
    padding: 10,
    flexDirection: "row",
  },
});

Modal.Header = ModalHeader;
Modal.Container = ModalContainer;
Modal.Body = ModalBody;
Modal.Footer = ModalFooter;
</pre>
<p>我们已经将第一个例子中的原始模态组件导出为<code>Modal</code>。你注意到<code>animation</code>和<code>backdropTransitions</code>道具了吗？这些道具赋予了原生模态组件我刚才说的改头换面。</p>
<p>有关可用道具的完整列表，请查看<a href="https://github.com/react-native-modal/react-native-modal#available-props">文档</a>。</p>
<h3>子组件和点符号</h3>
<p>使用<a href="https://reactjs.org/docs/jsx-in-depth.html#using-dot-notation-for-jsx-type">点符号</a>，我们将把<code>Modal</code>导出为一个带有子组件的模块。如果您想添加标题，您可以使用<code>Modal.Header</code>访问标题组件。</p>
<p><code>ModalHeader</code>接受<code>title</code>属性中的字符串。<code>Modal.Container</code>、<code>Modal.Body</code>、<code>Modal.Footer</code>接受儿童。子组件可以是你想要的任何东西，比如图像、一些文本、按钮或者一个<a href="https://blog.logrocket.com/common-bugs-react-native-scrollview/"> ScrollView </a>。</p>
<p>现在我们有了一个模态和一个按钮，回到<code>screens/TabOneScreen</code>。只需两步，我们就能把它们组装起来。</p>
<p>通过将上面代码块中的导入语句分别更改为下面的代码块，导入我们的新按钮和模式:</p>
<pre>import { Button, StyleSheet, Text, View } from "react-native";
import Modal from "react-native-modal";


import { StyleSheet, Text, View } from "react-native";
import { Button } from "../components/Button";
import { Modal } from "../components/Modal";
</pre>
<p>对 return 语句中的模态组件执行相同的操作:</p>
<pre>&lt;Modal isVisible={isModalVisible}&gt;
  &lt;View style={{ flex: 1 }}&gt;
    &lt;Text&gt;Hello!&lt;/Text&gt;
    &lt;Button title="Hide modal" onPress={handleModal} /&gt;
  &lt;/View&gt;
&lt;/Modal&gt;


&lt;Modal isVisible={isModalVisible}&gt;
  &lt;Modal.Container&gt;
    &lt;Modal.Header title="LogRocket is fab!" /&gt;
    &lt;Modal.Body&gt;
      &lt;Text style={styles.text}&gt;Agree to continue with this guide&lt;/Text&gt;
      &lt;/Modal.Body&gt;
    &lt;Modal.Footer&gt;
      &lt;Button title="I agree" onPress={handleModal} /&gt;
    &lt;/Modal.Footer&gt;
  &lt;/Modal.Container&gt;
&lt;/Modal&gt;
</pre>
<p>结果应该类似于下图:</p>
<p><img data-attachment-id="55690" data-permalink="https://blog.logrocket.com/creating-a-pop-up-modal-in-react-native/reusable-react-native-modal-buttons-dot-notation-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1.png" data-orig-size="500,1082" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="reusable-react-native-modal-buttons-dot-notation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1-473x1024.png" decoding="async" class="aligncenter wp-image-55690 size-full jetpack-lazy-image" src="../Images/38e42d8342ae84cfa73c49aeab5a9bb0.png" alt="Reusable React Native Modal Buttons Dot Notation" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1.png 500w, https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1-473x1024.png 473w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="55690" data-permalink="https://blog.logrocket.com/creating-a-pop-up-modal-in-react-native/reusable-react-native-modal-buttons-dot-notation-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1.png" data-orig-size="500,1082" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="reusable-react-native-modal-buttons-dot-notation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1-473x1024.png" decoding="async" loading="lazy" class="aligncenter wp-image-55690 size-full" src="../Images/38e42d8342ae84cfa73c49aeab5a9bb0.png" alt="Reusable React Native Modal Buttons Dot Notation" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1.png 500w, https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1-473x1024.png 473w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/reusable-react-native-modal-buttons-dot-notation-1.png"/></noscript>
<p>你可以在<a href="https://github.com/claysimps/RNModalExample/blob/modal-with-child-components/screens/TabOneScreen.tsx"> GitHub 上找到所有的变化。</a></p>

<p>现在，我们有了一个模态，当我们告诉它时，它就会出现。让我们添加当我们想要提示用户看到或做某事时出现的弹出窗口。首先，我们将创建一个行动号召场景。</p>
<h3>例子</h3>
<p>让我们假设用户必须订阅才能访问特定的屏幕。如果用户登陆屏幕但没有订阅，我们希望创建一个行动号召。</p>
<p>转到<code>screens/TabTwoScreen</code>，将当前代码替换为以下代码:</p>
<pre>import React, { useEffect } from "react";
import { StyleSheet, Text, TextInput, View } from "react-native";
import { Button } from "../components/Button";
import { Modal } from "../components/Modal";

export default function TabTwoScreen() {
  const [isModalVisible, setIsModalVisible] = React.useState(false);

  useEffect(() =&gt; {
    const checkForSubscription = setTimeout(() =&gt; {
      setIsModalVisible(() =&gt; !isModalVisible);
    }, 1500);
    return () =&gt; clearTimeout(checkForSubscription);
  }, []);

  const handleSignUp = () =&gt; {
    // sign up the user and close the modal
    setIsModalVisible(() =&gt; !isModalVisible);
  };

  const handleDecline = () =&gt; setIsModalVisible(() =&gt; !isModalVisible);

  return (
    &lt;View style={styles.container}&gt;
      &lt;Text style={styles.title}&gt;Premium stuff here&lt;/Text&gt;
      &lt;View style={styles.separator} /&gt;
      &lt;Modal isVisible={isModalVisible}&gt;
        &lt;Modal.Container&gt;
          &lt;View style={styles.modal}&gt;
            &lt;Modal.Header title="You're just one step away!" /&gt;
            &lt;Modal.Body&gt;
              &lt;Text style={styles.text}&gt;
                Want access? We just need your email address
              &lt;/Text&gt;
              &lt;TextInput
                style={styles.input}
                placeholder="email"
                keyboardType="email-address"
              /&gt;
            &lt;/Modal.Body&gt;
            &lt;Modal.Footer&gt;
              &lt;View style={styles.button}&gt;
                &lt;Button title="No thanks" onPress={handleDecline} /&gt;
                &lt;Button title="Sign me up!" onPress={handleSignUp} /&gt;
              &lt;/View&gt;
            &lt;/Modal.Footer&gt;
          &lt;/View&gt;
        &lt;/Modal.Container&gt;
      &lt;/Modal&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: "center",
    justifyContent: "center",
  },
  title: {
    fontSize: 20,
    fontWeight: "bold",
  },
  text: {
    fontSize: 16,
    fontWeight: "400",
    textAlign: "center",
  },
  separator: {
    marginVertical: 30,
    height: 1,
    width: "80%",
  },
  input: {
    paddingTop: 10,
    borderColor: "grey",
    borderBottomWidth: 2,
  },
  button: {
    flexDirection: "row",
    flex: 1,
    justifyContent: "center",
  },
  modal: {
    width: "100%",
    height: "90%",
    alignItems: "center",
    justifyContent: "center",
  },
});
</pre>
<p><code>useEffect</code>当依赖关系数组中的依赖关系改变时重新渲染，由<code>[]</code>表示。<code>useEffect</code>使<code>Modal</code>组件在您导航到屏幕时出现。</p>
<p>由于我们没有传递任何依赖项，<code>useEffect</code>只会渲染一次。<code>setTimeout</code>用于模拟检查用户是否订阅:</p>
<pre>useEffect(() =&gt; {
    // fake check to see if user is subscribed
    const checkForSubscription = setTimeout(() =&gt; {
      setIsModalVisible(() =&gt; !isModalVisible);
    }, 1500);
    return () =&gt; clearTimeout(checkForSubscription);
    // dependancy array 
  }, []);
</pre>
<p>您的模态应该如下图所示:</p>
<p><img data-attachment-id="55691" data-permalink="https://blog.logrocket.com/creating-a-pop-up-modal-in-react-native/finished-react-native-pop-up-module-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1.png" data-orig-size="500,1082" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="finished-react-native-pop-up-module" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1-473x1024.png" decoding="async" class="aligncenter wp-image-55691 size-full jetpack-lazy-image" src="../Images/6d84de652c53d07bfa34464793f18c75.png" alt="Finished React Native Pop Up Module" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1.png 500w, https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1-473x1024.png 473w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="55691" data-permalink="https://blog.logrocket.com/creating-a-pop-up-modal-in-react-native/finished-react-native-pop-up-module-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1.png" data-orig-size="500,1082" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="finished-react-native-pop-up-module" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1-473x1024.png" decoding="async" loading="lazy" class="aligncenter wp-image-55691 size-full" src="../Images/6d84de652c53d07bfa34464793f18c75.png" alt="Finished React Native Pop Up Module" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1.png 500w, https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1-473x1024.png 473w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/finished-react-native-pop-up-module-1.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>在本教程中，我们学习了什么是模态以及它们是如何工作的。然后，我们创建了三个定制模型，可以改进任何 React 本地应用程序。</p>
<p>正如你所看到的，模态是实现行动号召的一个很好的工具。还有其他几个类似的库，比如<a href="https://www.npmjs.com/package/react-native-modal-datetime-picker">r</a>T2】eact-native-modal-datetime-picker，所以值得在<a href="https://www.npmjs.com/search?q=modal%20react%20native"> npm </a>上浏览。根据您的用例，您可能会节省一些构建定制组件的时间！</p>
<p>我希望你喜欢在本教程中学习情态动词。编码快乐！</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
 </article>

</div>    
</body>
</html>