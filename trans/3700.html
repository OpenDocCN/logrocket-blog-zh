<html>
<head>
<title>Creating a single-page app with Laravel and Vue </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Laravel和Vue创建单页应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/#0001-01-01">https://blog.logrocket.com/create-single-page-app-laravel-and-vue/#0001-01-01</a></blockquote><div><article class="article-post">
<p>凭借其清晰的语法和表达能力，以及许多其他品质，Laravel是开发人员使用的最流行的PHP框架之一。</p>
<p>在Laravel UI推出之前，它的一个关键特性就是默认支持从Laravel v5.3到v6的Vue.js。Vue是一个现代的JavaScript前端框架，用于创建用户界面。</p>
<p>在本文中，我们将演示如何使用Laravel和Vue构建单页面应用程序。</p>

<h2 id="why-are-laravel-and-vue-good-together">为什么Laravel和Vue在一起很好？</h2>
<p>以下是使用Laravel和Vue为您的项目创建全栈工作流的一些主要优势:</p>
<ul>
<li>源代码被合并到一个项目中，而不是后端和前端有单独的项目</li>
<li>设置和配置很简单</li>
<li>一个部署可以同时处理两个框架</li>
</ul>
<h2 id="what-is-an-spa-single-page-application">什么是SPA？(单页应用程序)</h2>
<p>单页应用程序(简称SPA)从web服务器动态地将新数据加载到网页，而不需要刷新整个页面。</p>
<p>使用SPA的热门网站包括gmail.com和youtube.com——换句话说，SPA在很大程度上无处不在。您可能日常使用的大多数管理控制面板都是使用SPAs创建的。</p>
<p>水疗的好处:</p>
<ul>
<li>用户体验更加灵活</li>
<li>在浏览器中缓存数据</li>
<li>快速加载时间</li>
</ul>
<p>水疗的缺点:</p>
<ul>
<li>会损害SEO(搜索引擎优化)</li>
<li>潜在的安全问题</li>
<li>消耗大量浏览器资源</li>
</ul>
<h2 id="project-setup">项目设置</h2>
<p>这篇文章将演示如何开发一个允许用户注册账户和添加任务的待办应用。</p>
<p>本教程使用的是Laravel 9，调用了PHP 8.1和Vue 3；我们还需要安装PHP和NGINX。</p>
<p>让我们从下面的命令开始:</p>
<pre class="language-bash hljs">composer create-project --prefer-dist laravel/laravel laravel-vue-demo
</pre>
<p>接下来，我们将安装JavaScript依赖项。</p>
<pre class="language-bash hljs">npm install
</pre>
<p>在将Vue添加到我们的项目之前，我们必须安装一些软件包。</p>
<p>此外，必须安装plugin-vue，因为Laravel 9附带Vite，而不是webpack-mix，后者是以前的Laravel bundler for JavaScript。让我们现在就开始吧:</p>
<pre class="language-bash hljs">npm install <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="691f1c0c29070c111d">[email protected]</a> <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c4b2b1a1e9a8aba5a0a1b684aaa1bcb0">[email protected]</a> @vitejs/plugin-vue
</pre>
<p>打开名为<code>vite.config.js</code>的文件，并将<code>vue()</code>添加到配置中:</p>
<pre class="language-javascript hljs">import { defineConfig } from 'vite';
import laravel from 'laravel-vite-plugin';
import vue from '@vitejs/plugin-vue'

export default defineConfig({
    plugins: [
        vue(),
        laravel([
            'resources/css/app.css',
            'resources/js/app.js',
        ]),
    ],
});
</pre>
<p>编辑Vue 3应用程序引导程序的<code>app.js</code>文件和代码片段:</p>
<pre class="language-javascript hljs">require('./bootstrap');

import {createApp} from 'vue'

import App from './App.vue'

createApp(App).mount("#app")
</pre>
<p>创建一个名为<code>App.vue</code>的文件，并添加以下内容:</p>
<pre class="language-javascript hljs">&lt;template&gt;
  &lt;h1&gt; Hello, Vuejs with Laravel &lt;/h1&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  setup() {

   }
}
&lt;/script&gt;
</pre>
<p>最后，打开位于<code>resources/views</code>文件夹中的<code>welcome.blade.php</code>文件，并添加以下内容:</p>
<pre class="language-javascript hljs">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
 ....
        @vite('resources/css/app.css')
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="app"&gt;&lt;/div&gt;
  @vite('resources/js/app.js')
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>为了预览我们的应用程序，我们需要在两个不同的终端/命令行上启动我们的Vue应用程序和Laravel服务器:</p>
<pre class="language-shell hljs">npm run dev


php artisan serve
</pre>
<p><img data-attachment-id="145924" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/app-preview-local-host/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host.png" data-orig-size="730,103" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="app-preview-local-host" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host-300x42.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host.png" decoding="async" class="aligncenter wp-image-145924 size-full jetpack-lazy-image" src="../Images/05b358965b148c1ebea8267199320c16.png" alt="App Preview Local Host" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host-300x42.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145924" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/app-preview-local-host/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host.png" data-orig-size="730,103" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="app-preview-local-host" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host-300x42.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host.png" decoding="async" loading="lazy" class="aligncenter wp-image-145924 size-full" src="../Images/05b358965b148c1ebea8267199320c16.png" alt="App Preview Local Host" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host-300x42.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/app-preview-local-host.png"/></noscript>
<p>为了构建我们的待办事项应用程序，我们需要创建更多的文件。Vue将创建多个页面，主要包括:</p>
<ul>
<li>登录页面</li>
<li>注册页面</li>
<li>主页</li>
</ul>
<p>为了与Laravel端点通信，我们需要安装Axios:</p>
<pre class="language-shell hljs">npm install axios
</pre>
<h2 id="vue-routing">路由检视</h2>
<p>使用<a href="https://router.vuejs.org"> vue-router </a>包，可以在vue中使用各种路由策略；这些策略也被称为<a href="https://router.vuejs.org/guide/essentials/history-mode.html#hash-mode">历史模式</a>。</p>
<p>当用户请求像<code><a href="http://localhost:8000/home" rel="nofollow">http://localhost:8000/home</a></code>这样的路由时——当页面刷新时会返回404错误——我们可以依靠Laravel来检测任何备用路由，然后提供包含我们应用程序的刀片文件。</p>
<p>为此，我们将使用HTML5模式:</p>
<pre class="language-php hljs">Route::get('/{vue_capture?}', function() {
    return view('welcome');
})-&gt;where('vue_capture', '[\/\w\.-]*');
</pre>
<pre class="language-javascript hljs">import {createRouter, createWebHistory} from 'vue-router';

const router = createRouter({
    history: createWebHistory(),
    routes: [
        {
            path: '/',
            component: () =&gt; import('./pages/Login.vue')
        },
        {
            path: '/register',
            component: () =&gt; import('./pages/Register.vue')
        },
        {
            path: '/home',
            component: () =&gt; import('./pages/Home.vue')
        }
    ],
})
</pre>
<p>由于项目的简单性，我们本质上是使用<a href="https://laravel.com/docs/9.x/sanctum"> Laravel Sanctum </a>来处理登录页面的认证，然后我们将令牌保存在本地存储中。</p>
<p>对于其他成功的请求，令牌被连接到头部，这将允许Laravel识别发出请求的用户。</p>
<p>这是我们的登录页面的外观:</p>
<p><img data-attachment-id="145961" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/login-page-example-screenshot/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot.png" data-orig-size="730,576" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="login-page-example-screenshot" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot-300x237.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot.png" decoding="async" class="aligncenter wp-image-145961 size-full jetpack-lazy-image" src="../Images/3eb827aa566ba0b274187bb64d32f05c.png" alt="Login Page Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot-300x237.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145961" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/login-page-example-screenshot/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot.png" data-orig-size="730,576" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="login-page-example-screenshot" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot-300x237.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot.png" decoding="async" loading="lazy" class="aligncenter wp-image-145961 size-full" src="../Images/3eb827aa566ba0b274187bb64d32f05c.png" alt="Login Page Example" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot-300x237.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/login-page-example-screenshot.png"/></noscript>
<p>这是我们注册页面的外观:</p>
<p><img data-attachment-id="145963" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/registration-page-example-screenshot/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot.png" data-orig-size="730,707" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="registration-page-example-screenshot" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot-300x291.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot.png" decoding="async" class="aligncenter wp-image-145963 size-full jetpack-lazy-image" src="../Images/53fffe14c2f8f5b45170b1985b5bdfeb.png" alt="Registration Page Example Screenshot" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot-300x291.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145963" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/registration-page-example-screenshot/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot.png" data-orig-size="730,707" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="registration-page-example-screenshot" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot-300x291.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot.png" decoding="async" loading="lazy" class="aligncenter wp-image-145963 size-full" src="../Images/53fffe14c2f8f5b45170b1985b5bdfeb.png" alt="Registration Page Example Screenshot" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot-300x291.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/registration-page-example-screenshot.png"/></noscript>
<p>最后，以下是两者的相关代码块:</p>
<pre class="language-javascript hljs">&lt;!--Login.vue--&gt;
&lt;template&gt;
    &lt;div class="mx-auto w-4/12 mt-10 bg-blue-200 p-4 rounded-lg"&gt;
        &lt;div
            class="bg-white shadow-lg rounded-lg px-8 pt-6 pb-8 mb-2 flex flex-col"
        &gt;
            &lt;h1 class="text-gray-600 py-5 font-bold text-3xl"&gt; Login &lt;/h1&gt;
            &lt;ul class="list-disc text-red-400" v-for="(value, index) in errors" :key="index" v-if="typeof errors === 'object'"&gt;
                &lt;li&gt;{{value[0]}}&lt;/li&gt;
            &lt;/ul&gt;
            &lt;p class="list-disc text-red-400" v-if="typeof errors === 'string'"&gt;{{errors}}&lt;/p&gt;
            &lt;form method="post" @submit.prevent="handleLogin"&gt;
            &lt;div class="mb-4"&gt;
                &lt;label
                    class="block text-grey-darker text-sm font-bold mb-2"
                    for="username"
                &gt;
                    Email Address
                &lt;/label&gt;
                &lt;input
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker"
                    id="username"
                    type="text"
                    v-model="form.email"
                    required
                /&gt;
            &lt;/div&gt;
            &lt;div class="mb-4"&gt;
                &lt;label
                    class="block text-grey-darker text-sm font-bold mb-2"
                    for="password"
                &gt;
                    Password
                &lt;/label&gt;
                &lt;input
                    class="shadow appearance-none border border-red rounded w-full py-2 px-3 text-grey-darker mb-3"
                    id="password"
                    type="password"
                    v-model="form.password"
                    required
                /&gt;
            &lt;/div&gt;
            &lt;div class="flex items-center justify-between"&gt;
                &lt;button
                    class="bg-blue-500 hover:bg-blue-900 text-white font-bold py-2 px-4 rounded"
                    type="submit"
                &gt;
                    Sign In
                &lt;/button&gt;
                &lt;router-link
                    class="inline-block align-baseline font-bold text-sm text-blue hover:text-blue-darker"
                    to="register"
                &gt;
                    Sign Up
                &lt;/router-link&gt;
            &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;
</pre>
<pre class="language-javascript hljs">export default {
    setup() {
        const errors = ref()
        const router = useRouter();
        const form = reactive({
            email: '',
            password: '',
        })
        const handleLogin = async () =&gt; {
            try {
                const result = await axios.post('/api/auth/login', form)
                if (result.status === 200 &amp;&amp; result.data &amp;&amp; result.data.token) {
                    localStorage.setItem('APP_DEMO_USER_TOKEN', result.data.token)
                    await router.push('home')
                }
            } catch (e) {
                if(e &amp;&amp; e.response.data &amp;&amp; e.response.data.errors) {
                    errors.value = Object.values(e.response.data.errors)
                } else {
                    errors.value = e.response.data.message || ""
                }
            }
        }

        return {
            form,
            errors,
            handleLogin,
        }
    }
}
</pre>
<p>Vue <code>Home</code>视图/页面处理所有的待办事项，比如创建、删除、更新和列出待办事项。所有操作都使用用户令牌通过Axios向端点发出授权请求。</p>
<p>让我们看看它们会是什么样子，然后是相关的片段:</p>
<p><img data-attachment-id="145966" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/todo-example-screenshot-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1.png" data-orig-size="730,299" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="todo-example-screenshot-1" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1-300x123.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1.png" decoding="async" class="aligncenter wp-image-145966 size-full jetpack-lazy-image" src="../Images/f541ee4f849f446002b85dda753494ec.png" alt="Todo Example Screenshot " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1-300x123.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145966" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/todo-example-screenshot-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1.png" data-orig-size="730,299" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="todo-example-screenshot-1" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1-300x123.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1.png" decoding="async" loading="lazy" class="aligncenter wp-image-145966 size-full" src="../Images/f541ee4f849f446002b85dda753494ec.png" alt="Todo Example Screenshot " srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1-300x123.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-1.png"/></noscript>
<p><img data-attachment-id="145968" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/todo-example-screenshot-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2.png" data-orig-size="730,249" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="todo-example-screenshot-2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2-300x102.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2.png" decoding="async" class="aligncenter wp-image-145968 size-full jetpack-lazy-image" src="../Images/64080ca430567741bd9efaca5e4ca634.png" alt="Todo Example Screenshot" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2-300x102.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145968" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/todo-example-screenshot-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2.png" data-orig-size="730,249" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="todo-example-screenshot-2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2-300x102.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2.png" decoding="async" loading="lazy" class="aligncenter wp-image-145968 size-full" src="../Images/64080ca430567741bd9efaca5e4ca634.png" alt="Todo Example Screenshot" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2-300x102.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/todo-example-screenshot-2.png"/></noscript>
<pre class="language-javascript hljs">&lt;!-- Home --&gt;
&lt;template&gt;
    &lt;div class="w-6/12 p-10 mx-auto"&gt;
        &lt;div class="flex justify-between"&gt;
            &lt;h1 class="text-2xl"&gt; Todo &lt;/h1&gt;
            &lt;span class="capitalize"&gt;Welcome {{ user &amp;&amp; user.name }}, &lt;button
                class="text-orange-500 underline hover:no-underline rounded-md"
                @click="handleLogout"&gt;Logout&lt;/button&gt;&lt;/span&gt;
        &lt;/div&gt;
        &lt;input type="text" class="p-2 w-64 border rounded-md" v-model="todo" placeholder="Enter your todo"/&gt;
        &lt;button class="bg-blue-600 text-white px-5 py-2 rounded-md ml-2 hover:bg-blue-400" @click="addTodo"&gt;Add&lt;/button&gt;
        &lt;Loader v-if="isLoading"/&gt;
        &lt;ul class="border-t mt-3 cursor-pointer"&gt;
            &lt;li :class="`py-3 border-b text-gray-600 ${val.has_completed ? 'line-through' : ''}`"
                v-for="(val, idx) in todos" :key="idx"&gt;
                &lt;input type="checkbox" :checked="val.has_completed" @click="checked(idx)"/&gt;
                &lt;span @click="checked(val, idx)" class="pl-3"&gt;{{ val.title }} &lt;/span&gt;
                &lt;button class="float-right bg-red-400 px-2 text-white font-bold rounded-md hover:bg-red-600"
                        @click="deleteTodo(val, idx)"&gt;&amp;times;
                &lt;/button&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/template&gt;
</pre>
<pre class="language-javascript hljs">setup() {
    const todo = ref('')
    const todos = ref([])
    const user = ref()
    const isLoading = ref()

    let router = useRouter();
    onMounted(() =&gt; {
        authentication()
        handleTodos()
    });

    const authentication = async () =&gt; {
        isLoading.value = true
        try {
            const req = await request('get', '/api/user')
            user.value = req.data
        } catch (e) {
            await router.push('/')
        }
    }

    const handleTodos = async () =&gt; {
        try {
            const req = await request('get', '/api/todos')
            todos.value = req.data.data
        } catch (e) {
            await router.push('/')
        }
        isLoading.value = false
    }

    const handleNewTodo = async (title) =&gt; {
        try {
            const data = {title: title}
            const req = await request('post', '/api/todos', data)
            if (req.data.message) {
                isLoading.value = false
                return alert(req.data.message)
            }
            todos.value.push(req.data.data)
        } catch (e) {
            await router.push('/')
        }
        isLoading.value = false
    }

    const handleLogout = () =&gt; {
        localStorage.removeItem('APP_DEMO_USER_TOKEN')
        router.push('/')
    }

    const addTodo = () =&gt; {
        if (todo.value === "") {
            return alert("Todo cannot be empty");
        }
        isLoading.value = true
        handleNewTodo(todo.value)
        todo.value = ""
    }

    const checked = async (val, index) =&gt; {
        try {
            const data = {has_completed: !val.has_completed}
            const req = await request('put', `/api/todos/${val.id}`, data)
            if (req.data.message) {
                isLoading.value = false
                return alert(req.data.message)
            }
            todos.value[index].has_completed = !val.has_completed
        } catch (e) {
            await router.push('/')
        }
        isLoading.value = false
    }

    const deleteTodo = async (val, index) =&gt; {
        if (window.confirm("Are you sure")) {
            try {
                const req = await request('delete', `/api/todos/${val.id}`)
                if (req.data.message) {
                    isLoading.value = false
                    todos.value.splice(index, 1)
                }
            } catch (e) {
                await router.push('/')
            }
            isLoading.value = false
        }
    }
</pre>
<p>对于Laravel，我们将创建以下内容:</p>
<ul>
<li>控制器(<code>AuthController</code>、<code>TodoController</code>)</li>
<li>型号(<code>Todo</code>、<code>User</code>)</li>
<li>路线(<code>api</code>)</li>
<li>中间件(<code>auth:sanctum</code>)。</li>
</ul>
<p>我们的路由在<code>api.php</code>中，它处理Vue消耗的所有端点。</p>
<pre class="language-php hljs">Route::post('/auth/register', [AuthController::class, 'register']);
Route::post('/auth/login', [AuthController::class, 'login']);

Route::apiResource('todos', TodoController::class)-&gt;middleware('auth:sanctum');

Route::middleware('auth:sanctum')-&gt;get('/user', function (Request $request) {
    return $request-&gt;user();
});
</pre>
<p><code>AuthController</code>中的寄存器逻辑注册用户并创建令牌。</p>
<pre class="language-php hljs">public function register(Request $request): \Illuminate\Http\JsonResponse
{
    try {
        //Validated
        $validateUser = Validator::make($request-&gt;all(),
        [
            'name' =&gt; 'required',
            'email' =&gt; 'required|email|unique:users,email',
            'password' =&gt; 'required'
        ]);

        if($validateUser-&gt;fails()){
            return response()-&gt;json([
                'status' =&gt; false,
                'message' =&gt; 'validation error',
                'errors' =&gt; $validateUser-&gt;errors()
            ], 401);
        }

        $user = User::create([
            'name' =&gt; $request-&gt;name,
            'email' =&gt; $request-&gt;email,
            'password' =&gt; Hash::make($request-&gt;password)
        ], 201);

        return response()-&gt;json([
            'status' =&gt; true,
            'message' =&gt; 'User Created Successfully',
            'token' =&gt; $user-&gt;createToken("API_TOKEN")-&gt;plainTextToken
        ], 200);

    } catch (\Throwable $e) {
        return response()-&gt;json([
            'status' =&gt; false,
            'message' =&gt; $e-&gt;getMessage()
        ], 500);
    }
}
</pre>
<p>登录验证请求，检查用户是否存在，然后创建一个令牌:</p>
<pre class="language-php hljs">public function login(Request $request): \Illuminate\Http\JsonResponse
{
    try {
        //Validated
        $validateUser = Validator::make($request-&gt;all(),
            [
                'email' =&gt; 'required',
                'password' =&gt; 'required'
            ]);

        if($validateUser-&gt;fails()){
            return response()-&gt;json([
                'status' =&gt; false,
                'message' =&gt; 'validation error',
                'errors' =&gt; $validateUser-&gt;errors()
            ], 401);
        }

        if(!Auth::attempt($request-&gt;only(['email', 'password']))){
            return response()-&gt;json([
                'status' =&gt; false,
                'message' =&gt; 'Email &amp; Password does not exist.',
            ], 401);
        }

        $user = User::where('email', $request-&gt;email)-&gt;first();

        return response()-&gt;json([
            'status' =&gt; true,
            'message' =&gt; 'Logged In Successfully',
            'token' =&gt; $user-&gt;createToken("API_TOKEN")-&gt;plainTextToken
        ], 200);

    } catch (\Throwable $e) {
        return response()-&gt;json([
            'status' =&gt; false,
            'message' =&gt; $e-&gt;getMessage()
        ], 500);
    }
}
</pre>
<p>添加新待办事项的POST端点由待办事项控制器— <code>/api/todos</code>中的<code>store</code>方法管理。</p>
<pre class="language-php hljs">public function store(Request $request): \Illuminate\Http\JsonResponse
{
    $data = Todo::where('user_id', $request-&gt;user()-&gt;id)-&gt;where('title', $request-&gt;title);
    if ($data-&gt;first()) {
        return response()-&gt;json(['status' =&gt; false, 'message' =&gt; 'Already exist']);
    }
    $req = $request-&gt;all();
    $req['user_id'] = $request-&gt;user()-&gt;id;
    $data = Todo::create($req);
    return response()-&gt;json(['status' =&gt; true, 'data' =&gt; $data], 201);
}
</pre>
<p>它管理<code>Todo</code>更新端点，该端点在用户完成一个待办事项后被调用，位于<code>/api/todos/id</code>。</p>
<pre class="language-php hljs">public function update(Request $request, $id): \Illuminate\Http\JsonResponse
{
    $validateUser = Validator::make($request-&gt;all(),
        [
            'has_completed' =&gt; 'required',
        ]);

    if ($validateUser-&gt;fails()) {
        return response()-&gt;json([
            'status' =&gt; false,
            'message' =&gt; 'validation error',
            'errors' =&gt; $validateUser-&gt;errors()
        ], 401);
    }

    $data = Todo::find($id);
    $data-&gt;has_completed = $request-&gt;has_completed;
    $data-&gt;update();
    return response()-&gt;json(['status' =&gt; true, 'data' =&gt; $data], 202);
}
</pre>
<p>当一个用户删除一个<code>Todo</code>时，端点<code>/api/todos/id</code>被调用，它负责处理:</p>
<pre class="language-php hljs">public function destroy(int $id): \Illuminate\Http\JsonResponse
{
    throw_if(!$id, 'todo Id is missing');
    Todo::findOrFail($id)-&gt;delete();
    return response()-&gt;json(['status' =&gt; true, 'message' =&gt; 'todo deleted']);
}
</pre>
<p>干得好，我们已经使用Laravel和Vue创建了一个单页应用程序！🎉这是我们的待办事项应用程序的最终结果和一个到源代码的<a href="https://github.com/iamhabbeboy/laravel-vue-demo">链接:</a></p>
<p><img data-attachment-id="145926" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/laravel-vue-single-page-app-final-result/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/laravel-vue-single-page-app-final-result.gif" data-orig-size="470,311" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="laravel-vue-single-page-app-final-result" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/laravel-vue-single-page-app-final-result-300x199.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/laravel-vue-single-page-app-final-result.gif" decoding="async" class="aligncenter wp-image-145926 size-full jetpack-lazy-image" src="../Images/2455fed44e066c476dfc4fe9a320852e.png" alt="Laravel Vue Single Page App Final Result" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/laravel-vue-single-page-app-final-result.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/laravel-vue-single-page-app-final-result.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145926" data-permalink="https://blog.logrocket.com/create-single-page-app-laravel-and-vue/attachment/laravel-vue-single-page-app-final-result/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/laravel-vue-single-page-app-final-result.gif" data-orig-size="470,311" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="laravel-vue-single-page-app-final-result" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/laravel-vue-single-page-app-final-result-300x199.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/laravel-vue-single-page-app-final-result.gif" decoding="async" loading="lazy" class="aligncenter wp-image-145926 size-full" src="../Images/2455fed44e066c476dfc4fe9a320852e.png" alt="Laravel Vue Single Page App Final Result" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/laravel-vue-single-page-app-final-result.gif"/></noscript>
<h2 id="conclusion">结论</h2>
<p>我们能够确定，与传统的PHP/Vue组合相比，使用Vue和Laravel创建一个简单的用户认证和待办事项应用程序要简单得多——传统的PHP/Vue组合需要更多的设置工作。</p>
<p>在我看来，Vue和Laravel的结合使得开发单页面应用程序变得容易，因为不需要担心路由、中间件或处理CORS。请在下面的评论区告诉我你发展水疗的经历。</p>
<p>感谢阅读！✌️</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的Vue应用</h2><p>调试Vue.js应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的Vue突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Vue应用程序中发生的一切，包括网络请求、JavaScript错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex插件将Vuex突变记录到LogRocket控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试Vue应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>