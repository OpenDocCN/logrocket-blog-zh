<html>
<head>
<title>Adding CarPlay to your Flutter app </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>将CarPlay添加到您的Flutter应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/adding-carplay-flutter-app/#0001-01-01">https://blog.logrocket.com/adding-carplay-flutter-app/#0001-01-01</a></blockquote><div><article class="article-post">
 <p>就在不久前，你所能期待的手机和汽车之间最高水平的集成是从手机向汽车扬声器播放音乐。</p>
<p>随着时间的推移，随着Android Auto和苹果CarPlay等技术的引入，这种情况发生了巨大的变化。现在，您选择的音频、快餐或导航应用程序可以直接传输到您的汽车娱乐系统，以便轻松互动。</p>
<p>虽然Apple CarPlay和Android Audio的意图相似，但在本文中，我们将看看如何用一些CarPlay功能来补充我们的Flutter应用程序。我们将涵盖:</p>

<h2 id="setting-expectations">设定我们的期望</h2>
<p>现在，作为这篇文章的作者，我很乐意投入到如何做到这一点的激动人心的技术细节中去(因为我相信你会喜欢阅读它们！).然而，在我这样做之前，我们需要简要地提到一些可能会阻碍你获得Flutter CarPlay应用程序的事情。</p>
<p>作为开发人员，我们总是渴望找到一种方法来交付某种产品或特性。当我们被告知我们不能做某件事，或者某件事不受支持时，我们无论如何都想去做，只是为了看看我们是否能成为第一个做某事的人，或者因为我们真的想为我们的客户提供服务。</p>
<p>然而，在开发利用苹果CarPlay的应用程序的情况下，我们需要定义一些现实的期望。这篇文章与Flutter应用程序有关，但也适用于任何利用CarPlay的应用程序。让我们开始吧。</p>
<h3 id="carplay-app-requires-apple-approval">您的CarPlay应用程序需要Apple的特别批准</h3>
<p>创建一个包含CarPlay组件的Flutter应用程序并不简单，只是放入一个包，设置一些值，然后部署给用户。任何使用CarPlay的应用程序都必须经过苹果公司的特别批准。</p>
<p>这个批准过程可能很长，有时长达数月。也有报道称，苹果公司根本没有回复要求这一功能的开发者。你不能做什么或说什么来加速这个过程——你完全在苹果的时间线上。</p>
<p>尽管如此，这并不像勾选一个声明你的应用程序使用CarPlay的复选框那么简单。你的应用程序必须属于苹果公司预先定义的类别，这就引出了我们的下一个问题。</p>
<h3 id="can-t-run-any-app-carplay">你不能在CarPlay上运行任何类型的应用程序</h3>
<p>要在你的应用程序中使用CarPlay，它必须符合苹果规定的特定类别。这些类别基本上是:</p>
<ul>
<li>音频应用</li>
<li>沟通应用程序(如团队、懈怠或不和谐)</li>
<li>“驾驶任务”app(比如记录用户车内里程iOS 16新增)</li>
<li>电动汽车充电应用</li>
<li>加油应用程序(通过CarPlay支付燃料费用iOS 16中的新功能)</li>
<li>导航应用程序(如谷歌地图或苹果地图)</li>
<li>停车app(支付停车费)</li>
<li>快速订餐应用程序(如DoorDash或Uber Eats)</li>
</ul>
<p>仅此而已。</p>
<p>也许你觉得苹果公司对你能为CarPlay开发什么和不能为CarPlay开发什么施加这样的限制太苛刻了。然而，考虑一下CarPlay的前提:它是人们在车里用来完成基本任务的东西，不应该分散他们的驾驶注意力。</p>
<p><img data-attachment-id="138481" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img1-generic-photo-infotainment-system/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system.jpeg" data-orig-size="730,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Generic-photo-infotainment-system" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system-300x200.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system.jpeg" decoding="async" class="aligncenter size-full wp-image-138481 jetpack-lazy-image" src="../Images/5b5f41e56ee444f581922fd5c70c7666.png" alt="Stock Photo Showing Infotainment System Displayed On Front Dashboard Of Car" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system-300x200.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138481" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img1-generic-photo-infotainment-system/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system.jpeg" data-orig-size="730,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Generic-photo-infotainment-system" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system-300x200.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138481" src="../Images/5b5f41e56ee444f581922fd5c70c7666.png" alt="Stock Photo Showing Infotainment System Displayed On Front Dashboard Of Car" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system-300x200.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img1-Generic-photo-infotainment-system.jpeg"/></noscript>
<p>如果你开发了一个应用程序，让人们在开车时在他们的信息娱乐系统上玩Flappy Bird，并且他们撞了他们的车，那么司机确实会因为如此粗心而犯错。但是，苹果难道不应该为最初允许这款应用承担一些责任吗？从这个角度来看，这些限制似乎是合理的。</p>
<p>因此，考虑到上述情况，我们只有在以下情况下才会考虑将CarPlay添加到我们的Flutter应用程序中:</p>

<p>如果我们忽略上述内容，只是将应用程序发送给苹果公司认可，他们可能不会花时间来帮助你的应用程序变得合规。他们会拒绝你的申请，或者更糟的是，永远不会回复你，让你的应用程序在没有官方批准(你可以使用)或拒绝(你可能会升级)的情况下搁浅。</p>
<p>万一苹果不批准我们的应用程序，我们不要把应用程序的成败寄托在拥有CarPlay功能上，这一点很重要，尤其是考虑到苹果可能不会告诉我们应用程序被拒绝的原因。</p>
<p>所有这些都解决了，让我们深入研究如何将CarPlay添加到我们的Flutter应用程序中。</p>
<h2 id="setting-up-basics-carplay-flutter-app">设置我们的CarPlay Flutter应用程序的基础</h2>
<p>在今天的例子中，我们将把CarPlay功能引入我们的快餐订购应用程序EatUp。在我们的手机上，这个应用程序是这样的:</p>
<p><img data-attachment-id="138496" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img2-fast-food-ordering-app-demonstration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img2-Fast-food-ordering-app-demonstration.gif" data-orig-size="345,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fast-food-ordering-app-demonstration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img2-Fast-food-ordering-app-demonstration-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img2-Fast-food-ordering-app-demonstration.gif" decoding="async" class="aligncenter size-full wp-image-138496 jetpack-lazy-image" src="../Images/a2d25034c8f8a6ece70a426842f098b6.png" alt="Phone Screen Showing Example Fast Food Ordering App Features In Action, From Order Screen To Pizza Options And Ordering Feature" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img2-Fast-food-ordering-app-demonstration.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img2-Fast-food-ordering-app-demonstration.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138496" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img2-fast-food-ordering-app-demonstration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img2-Fast-food-ordering-app-demonstration.gif" data-orig-size="345,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fast-food-ordering-app-demonstration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img2-Fast-food-ordering-app-demonstration-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img2-Fast-food-ordering-app-demonstration.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138496" src="../Images/a2d25034c8f8a6ece70a426842f098b6.png" alt="Phone Screen Showing Example Fast Food Ordering App Features In Action, From Order Screen To Pizza Options And Ordering Feature" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img2-Fast-food-ordering-app-demonstration.gif"/></noscript>
<p>这篇文章的重点不是<a href="https://blog.logrocket.com/pros-cons-flutter-app-development/"> Flutter应用程序开发</a>本身，而是如何将CarPlay添加到应用程序中。欢迎你到<a href="https://github.com/flutterfromscratch/using-flutter-with-carplay">仔细阅读源代码</a>来了解我们是如何实现上面显示的布局的，但是我们不会在这里深入细节。</p>
<h2 id="adding-carplay-flutter-project">将CarPlay添加到我们的Flutter项目中</h2>
<p><code>flutter_carplay</code>的配置步骤在的发布网站<a href="https://pub.dev/packages/flutter_carplay#get-started">上可以找到，所以现在让我们浏览一下。</a></p>
<p>请注意，在这样做的时候，您将对您的Flutter项目进行更改。如果您正在将CarPlay添加到现有的应用程序中，那么现在是将您的更改提交到源代码控制的理想时机。这样，如果您的更改引起问题，您可以轻松地恢复它们。</p>
<p>首先，我们想在依赖项中添加对我们的<code>pubspec.yaml</code>的引用:</p>
<pre class="language-yaml hljs">dependencies:
  flutter:
    sdk: flutter
  ...other dependencies...
  flutter_carplay: ^1.0.3
</pre>
<p>然后，我们应该在项目中运行<code>flutter pub get</code>命令。这将创建一个<code>Podfile</code>，帮助将<code>flutter_carplay</code>的本地部分与我们的项目集成。</p>
<p>让我们打开<code>ios/Podfile</code>文件并取消顶行的注释，将全球平台设置为iOS 14.0:</p>
<pre class="language-yaml hljs"># Uncomment this line to define a global platform for your project
platform :ios, '14.0'
</pre>
<p>将目录切换到<code>ios</code>文件夹并运行<code>pod install --repo-update</code>。</p>
<h2 id="modifying-xcode-project">修改我们的XCode项目</h2>
<p>因为CarPlay是一个原生的iOS特性，我们需要对XCode项目进行修改。右击<code>ios</code>文件夹，然后选择<code>Flutter &gt; Open iOS module in Xcode</code>:</p>
<p><img data-attachment-id="138500" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img3-popup-menu-modifying-xcode-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project.png" data-orig-size="730,389" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Popup-menu-modifying-XCode-project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project-300x160.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project.png" decoding="async" class="aligncenter size-full wp-image-138500 jetpack-lazy-image" src="../Images/87ff4708d2d0601a26b2f3a14820be50.png" alt="Demonstration Of Steps To Modify Xcode Project Showing Submenus After Right Clicking Ios Folder And Hovering Over Flutter Menu Item" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project-300x160.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138500" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img3-popup-menu-modifying-xcode-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project.png" data-orig-size="730,389" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Popup-menu-modifying-XCode-project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project-300x160.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138500" src="../Images/87ff4708d2d0601a26b2f3a14820be50.png" alt="Demonstration Of Steps To Modify Xcode Project Showing Submenus After Right Clicking Ios Folder And Hovering Over Flutter Menu Item" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project-300x160.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img3-Popup-menu-modifying-XCode-project.png"/></noscript>
<p>在我们的项目中，导航到<code>Runner &gt; Runner &gt; AppDelegate</code>并用一个简单的<code>return true</code>替换我们的<code>application</code>函数的内容。在我的例子中，我注释掉了旧代码，并直接在它下面添加了新代码，所以它看起来应该是一样的:</p>
<p><img data-attachment-id="138503" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img4-runner-appdelegate-folder-contents/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents.png" data-orig-size="730,426" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Runner-AppDelegate-folder-contents" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents.png" decoding="async" class="aligncenter size-full wp-image-138503 jetpack-lazy-image" src="../Images/39e97c2437ef6ce028a840365307d589.png" alt="Appdelegate Folder Contents With Edited Application Function" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents-300x175.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138503" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img4-runner-appdelegate-folder-contents/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents.png" data-orig-size="730,426" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Runner-AppDelegate-folder-contents" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138503" src="../Images/39e97c2437ef6ce028a840365307d589.png" alt="Appdelegate Folder Contents With Edited Application Function" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents-300x175.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img4-Runner-AppDelegate-folder-contents.png"/></noscript>
<p>在我们的<code>Runner</code>文件夹(不是最顶层的，而是下一层的)中，创建一个<code>SceneDelegate.swift</code>文件，并将内容设置如下:</p>
<pre class="language-swift hljs">@available(iOS 13.0, *)
class SceneDelegate: UIResponder, UIWindowSceneDelegate {
    var window: UIWindow?

    func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
        guard let windowScene = scene as? UIWindowScene else { return }

        window = UIWindow(windowScene: windowScene)

        let flutterEngine = FlutterEngine(name: "SceneDelegateEngine")
        flutterEngine.run()
        GeneratedPluginRegistrant.register(with: flutterEngine)
        let controller = FlutterViewController.init(engine: flutterEngine, nibName: nil, bundle: nil)
        window?.rootViewController = controller
        window?.makeKeyAndVisible()
    }
}
</pre>
<p>完成这些后，<code>SceneDelegate</code>应该是这样的:</p>
<p><img data-attachment-id="138505" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img5-scenedelegate-contents/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents.png" data-orig-size="730,426" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SceneDelegate-contents" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents.png" decoding="async" class="aligncenter size-full wp-image-138505 jetpack-lazy-image" src="../Images/707f061c115bfa7eebafa5cb882ed1e5.png" alt="Scenedelegate File Contents" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents-300x175.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138505" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img5-scenedelegate-contents/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents.png" data-orig-size="730,426" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SceneDelegate-contents" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138505" src="../Images/707f061c115bfa7eebafa5cb882ed1e5.png" alt="Scenedelegate File Contents" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents-300x175.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img5-SceneDelegate-contents.png"/></noscript>
<p>现在，右键单击<code>Info.plist</code>文件，然后单击<code>Open As &gt; Source Code</code>。这将以纯文本方式打开<code>Info.plist</code>,以便您可以轻松地将下一个配置粘贴到文件中。</p>
<p>在这一步，我们应该格外小心，因为如果我们输入了错误的内容，很容易意外破坏这个文件:</p>
<p><img data-attachment-id="138508" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img6-steps-to-open-source-code-for-info-plist-file/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file.png" data-orig-size="730,613" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Steps-to-open-Source-Code-for-Info-plist-file" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file-300x252.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file.png" decoding="async" class="aligncenter size-full wp-image-138508 jetpack-lazy-image" src="../Images/763e49282b5bf93255ca07b834c98602.png" alt="Steps Within Runner File Showing How To Right Click Info File, Navigate To Open As Menu Option, And Select Correct Source Code File That Should Be Opened" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file-300x252.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138508" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img6-steps-to-open-source-code-for-info-plist-file/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file.png" data-orig-size="730,613" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Steps-to-open-Source-Code-for-Info-plist-file" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file-300x252.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138508" src="../Images/763e49282b5bf93255ca07b834c98602.png" alt="Steps Within Runner File Showing How To Right Click Info File, Navigate To Open As Menu Option, And Select Correct Source Code File That Should Be Opened" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file-300x252.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img6-Steps-to-open-Source-Code-for-Info-plist-file.png"/></noscript>
<p>在结束<code>&lt;/dict&gt;</code>之前，添加以下文字。这是默认配置，我们稍后将返回来对其进行自定义:</p>
<pre class="language-html hljs">&lt;key&gt;UIApplicationSceneManifest&lt;/key&gt;
&lt;dict&gt;
  &lt;key&gt;UIApplicationSupportsMultipleScenes&lt;/key&gt;
  &lt;true /&gt;
  &lt;key&gt;UISceneConfigurations&lt;/key&gt;
  &lt;dict&gt;
    &lt;key&gt;CPTemplateApplicationSceneSessionRoleApplication&lt;/key&gt;
    &lt;array&gt;
      &lt;dict&gt;
        &lt;key&gt;UISceneConfigurationName&lt;/key&gt;
        &lt;string&gt;CarPlay Configuration&lt;/string&gt;
        &lt;key&gt;UISceneDelegateClassName&lt;/key&gt;
        &lt;string&gt;flutter_carplay.FlutterCarPlaySceneDelegate&lt;/string&gt;
      &lt;/dict&gt;
    &lt;/array&gt;
    &lt;key&gt;UIWindowSceneSessionRoleApplication&lt;/key&gt;
    &lt;array&gt;
      &lt;dict&gt;
        &lt;key&gt;UISceneConfigurationName&lt;/key&gt;
        &lt;string&gt;Default Configuration&lt;/string&gt;
        &lt;key&gt;UISceneDelegateClassName&lt;/key&gt;
        &lt;string&gt;$(PRODUCT_MODULE_NAME).SceneDelegate&lt;/string&gt;
        &lt;key&gt;UISceneStoryboardFile&lt;/key&gt;
        &lt;string&gt;Main&lt;/string&gt;
      &lt;/dict&gt;
    &lt;/array&gt;
  &lt;/dict&gt;
&lt;/dict&gt;
</pre>
<h2 id="setting-up-entitlements">设置我们的权利</h2>
<p>即使在开发阶段，我们也需要允许我们的应用程序与我们电脑上的CarPlay模拟器进行交互。现在让我们配置这些权利。</p>
<p>在XCode中，点击<code>Runner</code>，然后点击<code>Signing &amp; Certificates</code>，再点击<code>All</code>左边的<code>+</code>按钮:</p>
<p><img data-attachment-id="138510" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img7-opening-list-all-signing-and-certificates/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates.png" data-orig-size="730,397" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Opening-list-all-signing-and-certificates" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates.png" decoding="async" class="aligncenter size-full wp-image-138510 jetpack-lazy-image" src="../Images/effcc465c92092eda294e55be44c1d08.png" alt="Opening List Of All Signing And Certificates Options To Configure Entitlements" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates-300x163.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138510" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img7-opening-list-all-signing-and-certificates/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates.png" data-orig-size="730,397" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Opening-list-all-signing-and-certificates" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138510" src="../Images/effcc465c92092eda294e55be44c1d08.png" alt="Opening List Of All Signing And Certificates Options To Configure Entitlements" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates-300x163.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img7-Opening-list-all-signing-and-certificates.png"/></noscript>
<p>在出现的列表中，选择<code>Keychain Sharing</code>。您的应用程序实际上不使用钥匙串共享，但这样做可以在您的项目中设置一个<code>Runner.entitlements</code>文件:</p>
<p><img data-attachment-id="138512" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img8-runner-entitlements-file-resulting-from-selecting-keychain-sharing/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing.png" data-orig-size="365,660" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing-166x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing.png" decoding="async" class="aligncenter size-full wp-image-138512 jetpack-lazy-image" src="../Images/17c51ab32e6e919bfc4a227b3fcbec00.png" alt="Red Arrow Pointing Left To Runner Entitlements File Resulting From Previous Step" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing.png 365w, https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing-166x300.png 166w" data-lazy-sizes="(max-width: 365px) 100vw, 365px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138512" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img8-runner-entitlements-file-resulting-from-selecting-keychain-sharing/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing.png" data-orig-size="365,660" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing-166x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138512" src="../Images/17c51ab32e6e919bfc4a227b3fcbec00.png" alt="Red Arrow Pointing Left To Runner Entitlements File Resulting From Previous Step" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing.png 365w, https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing-166x300.png 166w" sizes="(max-width: 365px) 100vw, 365px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img8-Runner-entitlements-file-resulting-from-selecting-Keychain-Sharing.png"/></noscript>
<p>在这个文件中，删除<code>Keychain Access Groups</code>并添加一个新的权限，这取决于您正在开发的应用程序的类型。你可以查看<a href="https://developer.apple.com/documentation/carplay/requesting_carplay_entitlements">苹果公司的可用授权列表</a>，看看你的项目使用哪一个。</p>
<p>完成后，您的<code>Runner.entitlements</code>文件应该如下所示:</p>
<p><img data-attachment-id="138514" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img9-runner-entitlements-file-contents/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents.png" data-orig-size="730,426" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Runner-entitlements-file-contents" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents.png" decoding="async" class="aligncenter size-full wp-image-138514 jetpack-lazy-image" src="../Images/8e9359ddab81ee4e0a6b5f1ae33bad15.png" alt="Runner Entitlements File Contents With Keychain Access Groups Removed And New Entitlement Added" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents-300x175.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138514" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img9-runner-entitlements-file-contents/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents.png" data-orig-size="730,426" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Runner-entitlements-file-contents" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138514" src="../Images/8e9359ddab81ee4e0a6b5f1ae33bad15.png" alt="Runner Entitlements File Contents With Keychain Access Groups Removed And New Entitlement Added" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents-300x175.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img9-Runner-entitlements-file-contents.png"/></noscript>
<p>现在我们终于准备好为我们的Flutter应用程序添加一些功能了！🎉</p>
<h2 id="calling-carplay-functionality-flutter-app">从我们的Flutter应用程序调用CarPlay功能</h2>
<p>现在，我们将在应用程序的CarPlay组件中添加以下UI。</p>
<p><img data-attachment-id="138518" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img10-carplay-flutter-ui-order-confirmation-dismissal/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img10-CarPlay-Flutter-UI-order-confirmation-dismissal.gif" data-orig-size="730,459" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="CarPlay-Flutter-UI-order-confirmation-dismissal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img10-CarPlay-Flutter-UI-order-confirmation-dismissal-300x189.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img10-CarPlay-Flutter-UI-order-confirmation-dismissal.gif" decoding="async" class="aligncenter size-full wp-image-138518 jetpack-lazy-image" src="../Images/c989c6d0e12c670cfc2789dbe0e6facd.png" alt="Gif Showing Carplay Ui For Pizza Ordering App Including Pizza Selection Options, Order Confirmation Options, And Order Confirmation Dismissal" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img10-CarPlay-Flutter-UI-order-confirmation-dismissal.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img10-CarPlay-Flutter-UI-order-confirmation-dismissal.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138518" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img10-carplay-flutter-ui-order-confirmation-dismissal/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img10-CarPlay-Flutter-UI-order-confirmation-dismissal.gif" data-orig-size="730,459" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="CarPlay-Flutter-UI-order-confirmation-dismissal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img10-CarPlay-Flutter-UI-order-confirmation-dismissal-300x189.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img10-CarPlay-Flutter-UI-order-confirmation-dismissal.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138518" src="../Images/c989c6d0e12c670cfc2789dbe0e6facd.png" alt="Gif Showing Carplay Ui For Pizza Ordering App Including Pizza Selection Options, Order Confirmation Options, And Order Confirmation Dismissal" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img10-CarPlay-Flutter-UI-order-confirmation-dismissal.gif"/></noscript>
<p>为了实现这一目标，我们需要做到以下几点:</p>
<ol>
<li>设置一个<code>RootTemplate</code>,它将构成我们CarPlay体验的基础</li>
<li>向模板添加详细信息</li>
<li>在我们的应用程序中设置回调</li>
</ol>
<p>现在，让我们继续处理这些步骤。</p>
<h2 id="setting-root-template">设置一个<code>RootTemplate</code></h2>
<p>在我们的<code>main.dart</code>文件中，我们将创建一个新的<code>FlutterCarplay</code>对象。该对象将负责处理我们与CarPlay的连接，并让我们控制CarPlay体验中发生的事情:</p>
<pre class="language-dart hljs">final FlutterCarplay _flutterCarplay = FlutterCarplay();
</pre>
<p>接下来，在小部件的<code>initState</code>中，我们想要设置带有一些选项的<code>RootTemplate</code>。创建一个网格模板，设置一个标题，然后描述一些我们希望能够被按下的按钮是相当容易的:</p>
<pre class="language-dart hljs">@override
void initState() {
  FlutterCarplay.setRootTemplate(
    rootTemplate: CPGridTemplate(
      title: "What pizza?",
      buttons: [
        ...Data.FoodItems.map(
          (e) =&gt; CPGridButton(
            titleVariants: [e.name],
            image: 'assets/images/${e.asset}',
            onPress: () {
              showOrderingConfirmationSheet(e);
              // showActionSheet();
            },
          ),
        )
      ],
    ),
    animated: true,
  );

  _flutterCarplay.forceUpdateRootTemplate(); // This makes the CarPlay experience reload on hot reload, useful during development.

  // TODO: implement initState
  super.initState();
}
</pre>
<p>正如所料，结果是这样的:</p>
<p><img data-attachment-id="138520" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img11-carplay-flutter-ui-order-options/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options.png" data-orig-size="730,477" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="CarPlay-Flutter-UI-order-options" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options.png" decoding="async" class="aligncenter size-full wp-image-138520 jetpack-lazy-image" src="../Images/ff392899b302a1aba5bffe584e41d61c.png" alt="Six Types Of Pizza Shown In Pizza Ordering Options Displayed Within Carplay Flutter App Ui" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options-300x196.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138520" data-permalink="https://blog.logrocket.com/adding-carplay-flutter-app/attachment/img11-carplay-flutter-ui-order-options/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options.png" data-orig-size="730,477" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="CarPlay-Flutter-UI-order-options" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138520" src="../Images/ff392899b302a1aba5bffe584e41d61c.png" alt="Six Types Of Pizza Shown In Pizza Ordering Options Displayed Within Carplay Flutter App Ui" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options-300x196.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/img11-CarPlay-Flutter-UI-order-options.png"/></noscript>
<p>现在，让我们实现<code>showOrderingConfirmationSheet</code>:</p>
<pre class="language-dart hljs">void showOrderingConfirmationSheet(FoodItem food) {
  FlutterCarplay.showActionSheet(
    template: CPActionSheetTemplate(
      title: "Order ${food.name}?",
      message: "Your pizza will be ready soon after confirmation.",
      actions: [
        CPAlertAction(
          title: "Cancel",
          style: CPAlertActionStyles.cancel,
          onPress: () {
            // print("Cancel pressed in action sheet");
            FlutterCarplay.popModal(animated: true);
          },
        ),
        CPAlertAction(
          title: "Ok",
          style: CPAlertActionStyles.normal,
          onPress: () {
            print("Ok pressed in action sheet");
            FlutterCarplay.popModal(animated: true);
            FlutterCarplay.showAlert(
                template: CPAlertTemplate(titleVariants: [
              '${food.name} ordered!'
            ], actions: [
              CPAlertAction(
                title: "Dismiss",
                style: CPAlertActionStyles.destructive,
                onPress: () {
                  print("Dismiss pressed in action sheet");
                  FlutterCarplay.popModal(animated: true);
                },
              ),
            ]));
          },
        ),
      ],
    ),
  );
}
</pre>
<p>这导致特定食品被打开并显示确认消息。在这个阶段，你还可以在你的Flutter应用程序中调用本地功能，比如根据你的需要在内部数据库中添加或删除项目。</p>
<h2 id="conclusion">结论</h2>
<p>和往常一样，您可以在Github 上检索到源代码的完整副本。在我实现CarPlay之前有一个提交，在我实现它之后有一个提交，所以你可以用这个来比较什么改变了。如果您在实现CarPlay时遇到困难，这种比较会很有用。</p>
<p>所以，这就是你如何将CarPlay添加到你的Flutter应用程序中。添加CarPlay最耗时的部分是让苹果批准你在应用中使用CarPlay。如果你想在你的Flutter应用程序中使用CarPlay，你应该尽快开始工作。</p>
<p>将CarPlay添加到您的Flutter应用程序可能是一个相当复杂的过程，但如果CarPlay非常适合您的应用程序，它可以为您的应用程序体验增加很多价值。</p><div class="code-block code-block-4">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>