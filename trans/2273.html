<html>
<head>
<title>React Native SectionList tutorial with examples - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React Native SectionList 教程示例</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/react-native-sectionlist-tutorial-examples/#0001-01-01">https://blog.logrocket.com/react-native-sectionlist-tutorial-examples/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在本教程中，我们将演示如何使用<code>SectionList</code>在 React 本地应用程序中呈现大型的分段列表。</p>
<h2>什么是 SectionList？</h2>
<p>顾名思义，SectionList 使您能够在 UI 中显示一个分段列表。这是一个高性能的界面，提供了有用的功能，包括滚动加载、拉动刷新、部分分隔符支持等。</p>
<p>为了展示<code>SectionList</code>如何工作，我们将创建一个显示新任务和已完成任务的待办事项应用程序。</p>
<p>最终结果将如下所示:</p>
<p><img data-attachment-id="72842" data-permalink="https://blog.logrocket.com/react-native-sectionlist-tutorial-examples/scrolling-section-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/scrolling-section-list.gif" data-orig-size="368,732" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Scrolling section list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/scrolling-section-list-151x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/scrolling-section-list.gif" decoding="async" class="aligncenter size-full wp-image-72842 jetpack-lazy-image" src="../Images/12f7c0cefad1d7ab57c8421a5a47464e.png" alt="Scrolling Section List" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/scrolling-section-list.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/scrolling-section-list.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="72842" data-permalink="https://blog.logrocket.com/react-native-sectionlist-tutorial-examples/scrolling-section-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/scrolling-section-list.gif" data-orig-size="368,732" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Scrolling section list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/scrolling-section-list-151x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/scrolling-section-list.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-72842" src="../Images/12f7c0cefad1d7ab57c8421a5a47464e.png" alt="Scrolling Section List" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/scrolling-section-list.gif"/></noscript>
<h2>创建新的 React 本机应用程序</h2>
<p>您可以使用<a href="https://reactnative.dev/blog/2017/03/13/introducing-create-react-native-app" target="_blank" rel="noopener"> Create React Native app </a> CLI 工具创建 React Native App。</p>
<p>打开 CMD 或终端，键入以下命令:</p>
<pre>create-react-native-app &lt;your-app-name&gt;   
</pre>
<p>这将为您的 React 本机应用程序创建新的样板代码。现在在代码编辑器中打开这个项目。</p>
<h2>将 SectionList 添加到 React 本机应用程序中</h2>
<p>在我们可以将<code>SectionList</code>添加到 React 本地应用程序之前，我们需要一些数据显示在我们的应用程序中。</p>
<p>打开您的<code>app.js</code>文件并添加以下数据(出于本演示的目的):</p>
<pre>  const newTaskData = [{
    title: "New Tasks",
    data: [
      {
        id: "1",
        task: "Buy groceries"
      },
      {
        id: "2",
        task: "Feed Cat"
      },
      {
        id: "3",
        task: "Sleep for 3 hours"
      },
      {
        id: "4",
        task: "Water Plants"
      },
      {
        id: "5",
        task: "Drink Water"
      },
    ]
  }];
  const completedTaskData = [{
    title: "Completed Tasks",
    data: [
      {
        id: "6",
        task: "Make a section list tutorial"
      },
      {
        id: "7",
        task: "Share this tutorial"
      },
      {
        id: "8",
        task: "Ask doubt in the Comments"
      },
      {
        id: "9",
        task: "Subscribe to logrocket"
      },
      {
        id: "10",
        task: "Read next Article"
      },
      {
        id: "11",
        task: "Read next Article 2"
      },
      {
        id: "12",
        task: "Read next Article 3"
      },
      {
        id: "13",
        task: "Read next Article 4"
      },
      {
        id: "14",
        task: "Read next Article 5"
      },
      {
        id: "15",
        task: "Read next Article 6"
      },
      {
        id: "16",
        task: "Read next Article 7"
      },
      {
        id: "17",
        task: "Read next Article 8"
      },
      {
        id: "18",
        task: "Read next Article 9"
      },
      {
        id: "19",
        task: "Read next Article 10"
      },
    ]
  }];
</pre>
<p>这是我们将在<code>SectionList</code>中使用的虚拟数据。</p>
<p>添加完数据后，就该实现<code>SectionList</code>了。使用下面的代码添加<code>SectionList</code>:</p>
<pre>import { SectionList } from 'react-native';
...
...
&lt;SectionList
        sections={[...newTaskData, ...completedTaskData]}
        renderItem={({item})=&gt;(
            &lt;Text style={styles.taskItem}&gt;{item.task}&lt;/Text&gt;
        )}
        renderSectionHeader={({section})=&gt;(
          &lt;Text style={styles.taskTitle}&gt;{section.title}&lt;/Text&gt;
        )}
        keyExtractor={item=&gt;item.id}
        stickySectionHeadersEnabled
      /&gt;
</pre>
<p>如您所见，我们将一些虚拟数据作为单个数组传递给了一个<code>sections</code> prop。这个数组负责创建不同的部分。我们只是将数组展开，然后将它们合并成一个截面支柱。</p>
<p>接下来，我们必须返回<code>renderItem prop</code>的单个项目视图。我们将返回一个<code>Text</code>组件，并在文本中显示该项目的任务属性。这将打印列表中的任务。</p>
<h2>向您的列表添加标题</h2>
<p>现在我们需要使用<code>renderSectionHeader</code>属性添加我们的头。</p>
<p>就像我们在<code>renderItem</code>属性中返回一个视图一样，我们也必须在这里返回一个视图。在这段代码中，我们再次返回一个<code>Text</code>组件。这一次，我们获取部分数据并打印其中的<code>title</code>属性。</p>
<p>当使用<code>SectionList</code>或者迭代和返回视图时，指定键是一个好习惯。</p>
<p>key 属性用于标识列表中的哪些项目被更新、更改或删除。这使得你的列表更有性能。</p>
<p>要为所有视图添加关键点，使用<code>keyExtractor</code>属性，如上面的代码所示。</p>
<p>我们必须返回一个唯一的值，某种 ID。如果数据中没有任何唯一的 ID，我们可以使用索引。</p>
<p>要使用<code>keyExtractor</code>中的索引，我们可以使用下面的代码:</p>
<pre>  keyExtractor={(item, index)=&gt;index.toString()}
</pre>
<p>注意，我们返回的是<code>index.toString()</code>，而不仅仅是<code>index</code>，因为键应该是一个字符串，而不是一个数字。</p>
<p>我们还添加了一个道具<code>stickySectionHeadersEnabled</code>，用于在滚动列表时将标题粘贴到顶部。</p>
<h2>将样式添加到<code>SectionList</code></h2>
<p>现在让我们给我们的列表添加一些样式。</p>
<p>在下面的代码示例中，我们向列表添加了一些基本样式。请随意添加您自己的风格，以适应您的个人偏好或项目的要求。</p>
<pre>const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#eafffe'
  },
  taskItem:{
    padding: 10,
    marginVertical: 15,
    fontSize: 16
  },
  taskTitle:{
    backgroundColor: "#ffffff",
    fontSize: 20,
    fontWeight: "bold",
    padding: 10,
    elevation: 4,
    margin: 10,
    marginBottom: 0,
    borderRadius: 10
  }
});
</pre>
<p>这些是用于本教程的基本样式；这里没什么特别的。</p>
<p>以下是完整的代码:</p>
<pre>import React from 'react';
import { SectionList, StyleSheet, Text, View } from 'react-native';
export default function App() {
  const newTaskData = [{
    title: "New Tasks",
    data: [
      {
        id: "1",
        task: "Buy groceries"
      },
      {
        id: "2",
        task: "Feed Cat"
      },
      {
        id: "3",
        task: "Sleep for 3 hours"
      },
      {
        id: "4",
        task: "Water Plants"
      },
      {
        id: "5",
        task: "Drink Water"
      },
    ]
  }];
  const completedTaskData = [{
    title: "Completed Tasks",
    data: [
      {
        id: "6",
        task: "Make a section list tutorial"
      },
      {
        id: "7",
        task: "Share this tutorial"
      },
      {
        id: "8",
        task: "Ask doubt in the Comments"
      },
      {
        id: "9",
        task: "Subscribe to logrocket"
      },
      {
        id: "10",
        task: "Read next Article"
      },
      {
        id: "11",
        task: "Read next Article 2"
      },
      {
        id: "12",
        task: "Read next Article 3"
      },
      {
        id: "13",
        task: "Read next Article 4"
      },
      {
        id: "14",
        task: "Read next Article 5"
      },
      {
        id: "15",
        task: "Read next Article 6"
      },
      {
        id: "16",
        task: "Read next Article 7"
      },
      {
        id: "17",
        task: "Read next Article 8"
      },
      {
        id: "18",
        task: "Read next Article 9"
      },
      {
        id: "19",
        task: "Read next Article 10"
      },
    ]
  }];
  return (
    &lt;View style={styles.container}&gt;
      &lt;SectionList
        sections={[...newTaskData, ...completedTaskData]}
        renderItem={({item})=&gt;(
            &lt;Text style={styles.taskItem}&gt;{item.task}&lt;/Text&gt;
        )}
        renderSectionHeader={({section})=&gt;(
          &lt;Text style={styles.taskTitle}&gt;{section.title}&lt;/Text&gt;
        )}
        keyExtractor={item=&gt;item.id}
        stickySectionHeadersEnabled
      /&gt;
    &lt;/View&gt;
  );
}
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#eafffe'
  },
  taskItem:{
    padding: 10,
    marginVertical: 15,
    fontSize: 16
  },
  taskTitle:{
    backgroundColor: "#ffffff",
    fontSize: 20,
    fontWeight: "bold",
    padding: 10,
    elevation: 4,
    margin: 10,
    marginBottom: 0,
    borderRadius: 10
  }
});
</pre>
<h2>有用的<code>SectionList</code>道具</h2>
<p>让我们简单地放大几个你应该知道的有用的 SectionList 道具:<code>ItemSeparatorComponent</code>和<code>onEnReached</code>。</p>
<ul>
<li>当您想要将任何视图显示为节列表中每个项目的分隔符时,<code>ItemSeparatorComponent</code>非常有用</li>
<li>当您滚动到列表底部时，会调用<code>onEndReached</code>。如果您想在列表底部加载一些数据，这会很有帮助</li>
</ul>
<h2>结论</h2>
<p>在本教程中，我们演示了如何使用<code>SectionList</code>在 React 本地应用程序中呈现大型的分段列表。我们介绍了创建 React 原生应用程序、添加<code>SectionList</code>、为列表创建标题以及添加自定义样式的过程。</p>
<p>正如你所看到的，在 React 本地应用中使用<code>SectionList</code>是一种非常方便的显示数据的方式，并且很容易维护你的应用的 UI。如果没有 SectionList 组件，由于维护 UI 及其变化的挑战，显示节列表将是一场噩梦。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>