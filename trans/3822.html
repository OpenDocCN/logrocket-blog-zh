<html>
<head>
<title>Using React Native VisionCamera: Demo and alternatives </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用React本机VisionCamera:演示和替代方案</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/react-native-visioncamera-demo-alternatives/#0001-01-01">https://blog.logrocket.com/react-native-visioncamera-demo-alternatives/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在之前的一篇文章中，我写过关于<a href="https://blog.logrocket.com/intro-to-react-native-camera/">如何使用React Native Camera </a>，不幸的是，现在已经弃用了。今天，我回来谈谈我们可以在React Native项目中使用的其他选项，以取代React Native Camera。</p>
<p>我们将介绍React Native VisionCamera，并评估一些其他备选方案，以帮助您选择在下一个应用中使用哪个相机库。在这篇文章中，我将通过开发一个二维码扫描仪来展示<span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o"> VisionCamera </span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz80zsz71zp75vz87zz85z1z122z0eqmtz74zz79zz82zfiz86zz74zz80zz66z6az87znjz75z">可以做什么</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o">。</span>我们开始吧！</p>
<p><em>向前跳转:</em></p>

<h2 id="introducing-react-native-visioncamera">介绍React本机VisionCamera</h2>
<p><a href="https://mrousavy.com/react-native-vision-camera/"> VisionCamera </a>是React Native的全功能相机库。一些主要优势包括:</p>
<ul>
<li>丰富的开发人员支持:VisionCamera有一个庞大的开发人员社区，每个功能都有很好的文档记录和支持</li>
<li><strong>功能丰富</strong> : VisionCamera提供您想要的现代智能手机相机的所有功能，以及对正在使用的设备的完全控制——它甚至可以调整帧率等设置</li>
<li><strong>易于使用</strong>:您可以轻松地开始使用带有钩子的库和具有完全控制权的函数</li>
</ul>
<p>让我们探索几个你会发现自己经常使用的关键功能。</p>
<h3>拍照</h3>
<p>首先，我们需要启用照片捕捉来拍照:</p>
<pre class="language-javascript hljs">&lt;Camera {...props} photo={true} /&gt;
</pre>
<p>然后，就用VisionCamera的<code><a href="https://mrousavy.com/react-native-vision-camera/docs/api/classes/Camera/#takephoto">takePhoto</a></code>方法:</p>
<pre class="language-javascript hljs">const photo = await camera.current.takePhoto({
  flash: 'on'
})
</pre>
<p><img data-attachment-id="155706" data-permalink="https://blog.logrocket.com/react-native-visioncamera-demo-alternatives/attachment/take-photo-react-native-visioncamera/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-photo-react-native-visioncamera.gif" data-orig-size="400,865" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Taking a photo with RN VisionCamera" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-photo-react-native-visioncamera-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-photo-react-native-visioncamera.gif" decoding="async" class="size-full wp-image-155706 aligncenter jetpack-lazy-image" src="../Images/19121945255e99e64788334d4c82cc73.png" alt="Taking a Photo With React Native VisionCamera" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/take-photo-react-native-visioncamera.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/take-photo-react-native-visioncamera.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="155706" data-permalink="https://blog.logrocket.com/react-native-visioncamera-demo-alternatives/attachment/take-photo-react-native-visioncamera/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-photo-react-native-visioncamera.gif" data-orig-size="400,865" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Taking a photo with RN VisionCamera" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-photo-react-native-visioncamera-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-photo-react-native-visioncamera.gif" decoding="async" loading="lazy" class="size-full wp-image-155706 aligncenter" src="../Images/19121945255e99e64788334d4c82cc73.png" alt="Taking a Photo With React Native VisionCamera" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/take-photo-react-native-visioncamera.gif"/></noscript>
<h3>拍摄快照</h3>
<p>使用VisionCamera的<code><a href="https://mrousavy.com/react-native-vision-camera/docs/api/classes/Camera#takesnapshot">takeSnapshot(...)</a></code>功能拍摄快照，如下所示:</p>
<pre class="language-javascript hljs">const snapshot = await camera.current.takeSnapshot({
  quality: 85,
  skipMetadata: true
})
</pre>
<p><img data-attachment-id="155708" data-permalink="https://blog.logrocket.com/react-native-visioncamera-demo-alternatives/attachment/take-snapshot-react-native-visioncamera/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera.png" data-orig-size="400,866" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Taking a snapshot with RN VisionCamera" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera.png" decoding="async" class="size-full wp-image-155708 aligncenter jetpack-lazy-image" src="../Images/496fe4d8448a53a5b467eca22a145b51.png" alt="Taking a Snapshot With React Native VisionCamera" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera.png 400w, https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera-139x300.png 139w" data-lazy-sizes="(max-width: 400px) 100vw, 400px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="155708" data-permalink="https://blog.logrocket.com/react-native-visioncamera-demo-alternatives/attachment/take-snapshot-react-native-visioncamera/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera.png" data-orig-size="400,866" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Taking a snapshot with RN VisionCamera" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera.png" decoding="async" loading="lazy" class="size-full wp-image-155708 aligncenter" src="../Images/496fe4d8448a53a5b467eca22a145b51.png" alt="Taking a Snapshot With React Native VisionCamera" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera.png 400w, https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera-139x300.png 139w" sizes="(max-width: 400px) 100vw, 400px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/take-snapshot-react-native-visioncamera.png"/></noscript>
<h3>录制视频</h3>
<p>要录制视频，您必须首先为视频录制启用视频捕获:</p>
<pre class="language-javascript hljs">&lt;Camera
  {...props}
  video={true}
  audio={true} <em>// &lt;-- optional</em>
/&gt;
</pre>
<p>然后我们可以通过VisionCamera的<code><a href="https://mrousavy.com/react-native-vision-camera/docs/api/classes/Camera#startrecording">startRecording(...)</a></code>功能录制视频:</p>
<pre class="language-javascript hljs">camera.current.startRecording({
  flash: 'on',
  onRecordingFinished: (video) =&gt; console.log(video),
  onRecordingError: (error) =&gt; console.error(error),
})
</pre>
<p>一旦我们开始记录，我们可以像这样停止它:</p>
<pre class="language-javascript hljs">await camera.current.stopRecording()
</pre>
<p><img data-attachment-id="155710" data-permalink="https://blog.logrocket.com/react-native-visioncamera-demo-alternatives/attachment/record-video-react-native-visioncamera/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/record-video-react-native-visioncamera.gif" data-orig-size="400,865" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Recording a video with RN VisionCamera" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/record-video-react-native-visioncamera-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/record-video-react-native-visioncamera.gif" decoding="async" class="size-full wp-image-155710 aligncenter jetpack-lazy-image" src="../Images/0a80929d021b1a3694d5428faedbefac.png" alt="Recording a Video With React Native VisionCamera" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/record-video-react-native-visioncamera.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/record-video-react-native-visioncamera.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="155710" data-permalink="https://blog.logrocket.com/react-native-visioncamera-demo-alternatives/attachment/record-video-react-native-visioncamera/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/record-video-react-native-visioncamera.gif" data-orig-size="400,865" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Recording a video with RN VisionCamera" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/record-video-react-native-visioncamera-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/record-video-react-native-visioncamera.gif" decoding="async" loading="lazy" class="size-full wp-image-155710 aligncenter" src="../Images/0a80929d021b1a3694d5428faedbefac.png" alt="Recording a Video With React Native VisionCamera" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/record-video-react-native-visioncamera.gif"/></noscript>
<h2 id="building-qr-code-scanner-visioncamera">用VisionCamera构建二维码扫描仪</h2>
<h3 id="setting-up-project">设置项目</h3>
<p>在我们开始之前，我们需要<a href="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/">创建一个新的React本地项目</a>。我们可以使用以下命令来实现这一点:</p>
<pre class="language-shell hljs">npx react-native init react_native_image_detector
cd react_native_image_detector
yarn ios
</pre>
<p>太好了，现在我们可以开始安装依赖项了！首先，我们需要使用以下命令安装React Native VisionCamera:</p>
<pre class="language-shell hljs">yarn add react-native-vision-camera
npx pod-install 
</pre>
<blockquote><p><strong>注意，</strong> VisionCamera要求iOS ≥11或Android SDK ≥21。</p></blockquote>
<p>现在，为了使用摄像头或麦克风，我们必须将iOS权限添加到<code>Info.plist</code>:</p>
<pre class="language-xml hljs">&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;
&lt;string&gt;$(PRODUCT_NAME) needs access to your Camera.&lt;/string&gt;

&lt;!-- optionally, if reac want to record audio: --&gt;
&lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt;
&lt;string&gt;$(PRODUCT_NAME) needs access to your Microphone.&lt;/string&gt;
</pre>
<p>对于Android，我们将把下面几行代码添加到我们的<code>AndroidManifest.xml</code>文件的<code>&lt;manifest&gt;</code>标签中:</p>
<pre class="language-xml hljs">&lt;uses-permission android:name="android.permission.CAMERA" /&gt;

&lt;!-- optionally, if you want to record audio: --&gt;
&lt;uses-permission android:name="android.permission.RECORD_AUDIO" /&gt;
</pre>
<p>我们还将使用<a href="https://github.com/rodgomesc/vision-camera-code-scanner">视觉-摄像机-代码-扫描仪插件</a> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o">使用ML Kit的条形码扫描API </span>扫描代码。让我们用下面的命令安装它:</p>
<pre class="language-shell hljs">yarn add vision-camera-code-scanner
</pre>
<p>要将相机二维码标记为文本，我们需要通过运行以下命令来安装<a href="https://blog.logrocket.com/smooth-animations-react-native-reanimated-3/">React Native realized</a>:</p>
<pre class="language-shell hljs">yarn add react-native-reanimated
</pre>
<p>最后，让我们更新我们的<code>babel.config.js</code>文件:</p>
<pre class="language-javascript hljs">module.exports = {
  presets: ['module:metro-react-native-babel-preset'],
  plugins: [
    [
      'react-native-reanimated/plugin',
      {
        globals: ['__scanCodes'],
      },
    ],
  ],
};
</pre>
<p>酷，现在我们准备编码了！</p>
<h3 id="qr-scanner-screen">创建QR扫描仪屏幕</h3>
<p>当您使用源代码库创建React原生项目时，您将拥有一个带有默认UI组件的应用程序屏幕。因此，我将更新我们的<code>App.js</code>文件，以便使用VisionCamera:</p>
<pre class="language-javascript hljs">export default function App() {
  return (
    &lt;View style={styles.screen}&gt;
      &lt;SafeAreaView style={styles.saveArea}&gt;
        &lt;View style={styles.header}&gt;
          &lt;Text style={styles.headerText}&gt;React Native Camera Libraries&lt;/Text&gt;
        &lt;/View&gt;
      &lt;/SafeAreaView&gt;

      &lt;View style={styles.caption}&gt;
        &lt;Text style={styles.captionText}&gt;
          Welcome To React-Native-Vision-Camera Tutorial
        &lt;/Text&gt;
      &lt;/View&gt;
    &lt;/View&gt;
  );
}</pre>
<p>接下来，为了录制视频或拍摄照片，我们将使用相机的物理或虚拟设备。让我们快速浏览一下两者:</p>
<ul>
<li><strong>物理</strong>:手机上的相机镜头。所有物理相机都有不同的特征和功能，如格式、帧速率、焦距等。此外，一些手机有多个物理摄像头</li>
<li><strong>虚拟</strong>:一个或多个物理摄像设备的组合</li>
</ul>
<p>我们可以用<code>useCameraDevices</code>挂钩拿到所有的摄像设备。让我们更新<code>App.js</code>并添加以下代码:</p>
<pre class="language-javascript hljs">const devices = useCameraDevices();
const cameraDevice = devices.back;
</pre>
<p>上面，我们有一个物理设备类型列表。对于单个物理摄像机设备，该属性总是一个元素的数组；我们还可以检查这台相机是正面还是背面。</p>
<p>但是在我们继续之前，我们需要为麦克风和摄像机启用权限。我们可以通过以下功能请求用户授予您的应用程序使用摄像头或麦克风的权限:</p>
<pre class="language-javascript hljs">const cameraPermission = await Camera.requestCameraPermission();
const microphonePermission = await Camera.requestMicrophonePermission();
</pre>
<p>权限请求状态可以是:</p>
<ul>
<li><strong>授权</strong>:你的app已经授权，有权限</li>
<li><strong>拒绝</strong>:用户明确拒绝权限请求，你的应用没有权限</li>
<li><strong>受限(仅限iOS)</strong>:你的应用的摄像头或麦克风受到限制，因此你不能使用它们</li>
</ul>
<p>让我们用请求的权限和相机设备修改我们的<code>App.js</code>文件:</p>
<pre class="language-javascript hljs">export default function App() {
  const [cameraPermission, setCameraPermission] = useState();

  useEffect(() =&gt; {
    (async () =&gt; {
      const cameraPermissionStatus = await Camera.requestCameraPermission();
      setCameraPermission(cameraPermissionStatus);
    })();
  }, []);

  console.log(`Camera permission status: ${cameraPermission}`);

  const devices = useCameraDevices();
  const cameraDevice = devices.back;

  const renderDetectorContent = () =&gt; {
    if (cameraDevice &amp;&amp; cameraPermission === 'authorized') {
      return (
        &lt;Camera
          style={styles.camera}
          device={cameraDevice}
          isActive={true}
        /&gt;
      );
    }
    return &lt;ActivityIndicator size="large" color="#1C6758" /&gt;;
  };

  return (
    &lt;View style={styles.screen}&gt;
      &lt;SafeAreaView style={styles.saveArea}&gt;
        &lt;View style={styles.header}&gt;
          &lt;Text style={styles.headerText}&gt;React Native Image Detector&lt;/Text&gt;
        &lt;/View&gt;
      &lt;/SafeAreaView&gt;

      &lt;View style={styles.caption}&gt;
        &lt;Text style={styles.captionText}&gt;
          Welcome To React-Native-Vision-Camera Tutorial
        &lt;/Text&gt;
      &lt;/View&gt;

      {renderDetectorContent()}
    &lt;/View&gt;
  );
}
</pre>
<p>在上面的代码中，我们收到了<code>useEffect</code>钩子内部的摄像头权限，得到了设备的后置摄像头。然后，我们检查<code>cameraDevice</code>是否存在，相机权限是否为<code>authorized</code>，之后app会显示相机组件。</p>
<h3 id="using-frame-processor-plugins">使用帧处理器插件</h3>
<p>如果你想用相机扫描或检测图像，你需要使用帧处理器。帧处理器是用JavaScript编写的简单而强大的函数，用于处理相机帧。通过使用帧处理器，我们可以:</p>
<ul>
<li>构建人工智能和面部识别功能</li>
<li>使用TensorFlow、ML Kit、Apple Vision或其他库</li>
<li>使用WebRTC实现实时视频聊天</li>
<li>检测和标记图像</li>
<li>创建类似Snapchat的过滤器</li>
<li>使用带有深度检测的颜色过滤器</li>
</ul>
<p>当我们需要满足特定的用例时，帧处理器插件就非常方便了。<span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o">在这个</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz80zsz71zp75vz87zz85z1z122z0eqmtz74zz79zz82zfiz86zz74zz80zz66z6az87znjz75z">案例</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o">中，我们将使用</span> <span class="attrlink url author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o">视觉-摄像-扫码器</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o">通过ML </span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o">套件扫描二维码。我们已经在</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz80zsz71zp75vz87zz85z1z122z0eqmtz74zz79zz82zfiz86zz74zz80zz66z6az87znjz75z"/><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o">前一节</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz80zsz71zp75vz87zz85z1z122z0eqmtz74zz79zz82zfiz86zz74zz80zz66z6az87znjz75z">中安装了它，所以l </span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o"> et现在用它</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz80zsz71zp75vz87zz85z1z122z0eqmtz74zz79zz82zfiz86zz74zz80zz66z6az87znjz75z"/><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z55tqvrz81zrcp0lwz85zz122zvimz66zqz71zz66zz68zz72zhepz85z3o">:</span></p>
<pre class="language-javascript hljs">const detectorResult = useSharedValue('');

const frameProcessor = useFrameProcessor(frame =&gt; {
  'worklet';
  const imageLabels = labelImage(frame);

  console.log('Image labels:', imageLabels);
  detectorResult.value = imageLabels[0]?.label;
}, []);
</pre>
<p>在这里，我们扫描了二维码，并用React Native realized<a href="https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/shared-values/">共享值</a>分配条形码字符串。太棒了——就是它！</p>
<p>这是最后一个应用程序:</p>
<p><img data-attachment-id="155713" data-permalink="https://blog.logrocket.com/react-native-visioncamera-demo-alternatives/attachment/react-native-visioncamera-final-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-visioncamera-final-app.gif" data-orig-size="400,865" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native VIsionCamera final app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-visioncamera-final-app-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-visioncamera-final-app.gif" decoding="async" class="size-full wp-image-155713 aligncenter jetpack-lazy-image" src="../Images/080485126449fdd1a7df409d17af9aef.png" alt="Using React Native VisionCamera to Scan a QR Code in Our Final App" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-visioncamera-final-app.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-visioncamera-final-app.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="155713" data-permalink="https://blog.logrocket.com/react-native-visioncamera-demo-alternatives/attachment/react-native-visioncamera-final-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-visioncamera-final-app.gif" data-orig-size="400,865" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native VIsionCamera final app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-visioncamera-final-app-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-visioncamera-final-app.gif" decoding="async" loading="lazy" class="size-full wp-image-155713 aligncenter" src="../Images/080485126449fdd1a7df409d17af9aef.png" alt="Using React Native VisionCamera to Scan a QR Code in Our Final App" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-visioncamera-final-app.gif"/></noscript>
<p>你可以在GitHub库中查看本教程的完整代码。</p>
<h2 id="react-native-camera-library-alternatives">React本机相机库备选方案</h2>
<p>值得注意的是，VisionCamera还有一些其他的替代产品，所以我冒昧地在下面列出了一个快速列表。与任何工具一样，您应该选择最适合您和您的用例的工具！</p>
<ul>
<li><strong><a href="https://github.com/teslamotors/react-native-camera-kit">React Native Camera Kit</a></strong>:一个健壮的、高性能的、轻量级的、易于使用的相机库，在撰写本文时用于GitHub上的React Native和1.9K stars。值得注意的是，它不支持视频，所以如果这对您的用例至关重要，您会希望找到一个替代方案</li>
<li><strong> <a href="https://github.com/react-native-video/react-native-video"> React Native视频</a> </strong>:编写时GitHub上React Native用6.4K星星的一个<code>&lt;Video/&gt;</code>组件。与相机套件相比，它只支持视频，所以请记住这一点</li>
<li><strong> <a href="https://github.com/react-native-image-picker/react-native-image-picker"> React原生图像拾取器</a> </strong>:该库允许您使用其原生UI从设备库或相机中选择照片/视频。在撰写本文时，它在GitHub上有7.9K颗星</li>
</ul>
<h2>结论</h2>
<p>如果您的应用程序需要访问设备摄像头来拍照或录制视频，React Native Camera是完美的选择。不幸的是，由于缺乏维护人员和增加的代码复杂性，它被弃用了，我们不得不转向其他选择。</p>
<p>如果相机在您的应用程序中起着重要作用，并且您需要完全控制相机，那么React Native VisionCamera可能是您的选择。React原生图像拾取器可能已经成熟并流行，但它的相机功能有限。</p>
<p>感谢阅读。我希望这篇文章对你有用。编码快乐！</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>