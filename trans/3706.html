<html>
<head>
<title>A guide to native routing in Expo for React Native </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Expo中的本地路由指南</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/native-routing-expo-react-native/#0001-01-01">https://blog.logrocket.com/native-routing-expo-react-native/#0001-01-01</a></blockquote><div><article class="article-post">
<p>十年前，如果有人告诉你，你可以使用JavaScript构建本地移动应用程序，而不会损害UX，你不会相信，对不对？然后React Native出现了，使之成为可能。</p>
<p>几年前，如果有人告诉你，你可以使用JavaScript构建跨平台的应用程序，而不需要像Android Studio或Xcode这样繁重的仿真器/开发环境，你也不会想到这是可行的，对吗？于是世博会诞生了。</p>
<p>Expo和React Native经常互换使用。这是可以理解的，因为它们具有相似的功能，但它们之间也有一些不同之处:</p>
<ul>
<li>Expo在React Native之上构建了一层工具，允许开发人员无需编写任何本机代码就可以构建应用程序</li>
<li>Expo有一个CLI ( <code>expo cli</code>)，允许开发者在他们的设备上创建项目、部署项目和打开应用程序</li>
<li>Expo有一个客户端应用程序Expo Go，你可以在那里打开你的项目，而不需要Android Studio或Xcode</li>
</ul>
<p>然而，Expo和React Native有一个共同的主要特点:导航。React本地应用中的路由是使用<a href="https://blog.logrocket.com/guide-react-native-navigation/"> React导航</a>实现的，它用一个<code>navigator</code>组件包装你的应用，该组件管理应用中的导航历史和屏幕显示。</p>
<p>这很有效，但也有它的问题:</p>
<ul>
<li>您必须安装对等依赖项，如<code>react-native-screens</code>、<code>react-native-safe-area-context</code>。这给你的应用增加了额外的重量</li>
<li>JavaScript开发人员喜欢基于文件的路由。Next.js基于文件的路由风格运行良好，并且很快成为JavaScript应用程序中路由的当前标准</li>
</ul>
<p>这促使Expo的创造者Evan Bacon建立了一个名为<a href="https://github.com/expo/router"> Expo Router的新图书馆。</a> Expo路由器的工作原理与Next.js路由器类似。它们都完全基于项目的文件结构生成嵌套导航和深层链接。</p>
<p>在本文中，我们将探讨Expo路由器的一些优点和缺点。Expo Router目前处于测试阶段，但我们将使用Expo Router构建一个React本地应用程序来演示其核心概念。</p>
<p><em>向前跳转:</em></p>

<h2 id="core-features-expo-router">Expo路由器的核心特性</h2>
<p>这些是新型Expo路由器的核心特性:</p>
<ul>
<li><strong>离线优先快速</strong>:本地应用必须在没有互联网连接的情况下处理传入的URL。Expo Router通过在整个框架中实现这些功能来实现这一点</li>
<li><strong>错误处理</strong>:您可以<a href="https://blog.logrocket.com/react-error-handling-react-error-boundary/">在每条路线上设置反应</a> <a href="https://blog.logrocket.com/react-error-handling-react-error-boundary/">错误边界</a></li>
<li><strong>布局路线</strong>:你应用中的大部分屏幕会共享相同的布局组件。Expo Router允许您在<code>app</code>目录中创建父布局组件</li>
<li><strong> Next.js类链接和动态静态路由</strong>:类似于<a href="https://blog.logrocket.com/what-you-need-know-new-next-js-router/"> Next.js路由器</a>，可以使用<code>Link</code>组件链接路由</li>
</ul>
<pre class="language-javascript hljs">import { Link } from "expo-router";

export default function Page() {
return (

Home
);
}</pre>
<p>到目前为止，新的Expo路由器唯一的主要缺点是它有局限性和固执己见。一些开发者可能喜欢Expo路由器的特性，但是想要重新安排文件目录结构。不幸的是，由于其局限性，您可能还不能定制您的Expo路由器实例来适应您的首选结构。</p>

<p>让我们继续构建一个联系人目录应用程序，它使用Expo路由器在屏幕之间导航。</p>
<p>要完成本教程，请确保您具备以下条件:</p>
<ul>
<li>已安装Node.js ≥v14</li>
<li>JavaScript和React知识</li>
<li>AWS Amplify CLI安装:<br/> <code>npm</code> <code>install -g @aws-amplify/cli</code></li>
<li>AWS放大器配置:<br/> <code>amplify configure</code></li>
<li>世博CLI安装:<br/> <code>npm install -g expo-cli</code></li>
<li>Expo Go(从您的手机游戏商店安装)</li>
</ul>
<p>这是带有完整演示代码的GitHub repo。</p>
<h2 id="getting-started">入门指南</h2>
<p>让我们从搭建一个新的Expo应用程序开始吧。在您的终端上运行以下命令:</p>
<pre class="language-bash hljs">npx create-react-native-app -t with-router
</pre>
<p>这将创建一个新的配置了Expo路由器的React本地应用程序。在您的终端上使用以下命令更改目录、初始化Amplify并安装对等依赖项:</p>
<pre class="language-bash hljs">cd ReactNativeContactExpoApp
npx <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="51303c213d3837287c302121113d3025342225">[email protected]</a>
npm install aws-amplify @react-native-community/netinfo @react-native-async-storage/async-storage
</pre>
<p>要运行应用程序，请运行<code>yarn start</code>或<code>npm run start</code>。</p>
<pre class="language-plaintext hljs">Starting Metro Bundler
▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄
█ ▄▄▄▄▄ █▄▄███▀ ███ ▄▄▄▄▄ █
█ █   █ █ ▀█ ▄ █▄██ █   █ █
█ █▄▄▄█ █▄ ▄▄▀▀█▄██ █▄▄▄█ █
█▄▄▄▄▄▄▄█▄▀▄▀▄█ █ █▄▄▄▄▄▄▄█
█▄▄▄ ▀▀▄█ ▀████▀██▄██▄ ▄▀▄█
█▀▄▀▄▄▄▄▀▄██▀▀▀▄█▄█ ▀██▀███
█▄▀█▀ ▄▄▀▄▄▀ ▄ █ ▄█ ▄ █ █▀█
█▀▄▀██▀▄█ ▀ █▀███ ▀▀█▀▀█ ▀█
███▄▄▄▄▄█ ▄▀ ▄  ▄ ▄▄▄ ▀▄█▀█
█ ▄▄▄▄▄ ███ ▀▄███ █▄█ █▄  █
█ █   █ █▀▀█▀ ▀▀▀▄▄   █▀▀ █
█ █▄▄▄█ █  ▄▄█▀ ▀▄▀▄█▄▄ ▄██
█▄▄▄▄▄▄▄█▄█▄██▄█▄██████▄▄▄█

› Metro waiting on exp://192.168.55.200:19000
› Scan the QR code above with Expo Go (Android) or the Camera app (iOS)

› Web is waiting on http://localhost:19000

› Press a │ open Android
› Press i │ open iOS simulator
› Press w │ open web

› Press j │ open debugger
› Press r │ reload app
› Press m │ toggle menu

› Press ? │ show all commands
</pre>
<p>扫描移动Expo Go应用程序上的二维码，它就会编译。</p>

<p>就像所有其他数据库一样，数据存储需要一个模型。要生成这个模型，请前往<strong> Amplify目录</strong> &gt; <strong>后端</strong>&gt;<strong>API</strong>&gt;<strong>(Amplify项目名称)</strong> &gt; <code>schema.graphql</code>。用这几行代码修改<code>schema.graphql</code>:</p>
<pre class="language-json hljs">type Contact @model {
  id: ID!
  name: String!
  phone: String!
  email: String!
  address: String
  message: String
}
</pre>
<p>接触模型有<code>id</code>、<code>name</code>、<code>title</code>、<code>phone</code>、<code>email</code>作为字段。现在让我们继续在您的终端上用这个命令生成模型:</p>
<pre class="language-bash hljs">npm run amplify-modelgen
</pre>
<p>这将创建一个包含模型和GraphQL模式的<code>src</code> / <code>models</code>文件夹。</p>
<h2 id="initializing-backend-environment">初始化后端环境</h2>
<p>我们需要为应用程序初始化一个Amplify后端环境。为此，请在您的终端上运行以下命令:</p>
<pre class="language-bash hljs">amplify init
? Enter a name for the environment dev
? Choose your default editor: Visual Studio Code
Using default provider  awscloudformation
? Select the authentication method you want to use: AWS profile
</pre>
<p>这将在<code>src/aws-config.js</code>中创建一个配置文件。接下来，我们将使用以下命令部署后端并创建AWS资源:</p>
<pre class="language-bash hljs">amplify push
...
Do you want to generate code for your newly created GraphQL API? No
...
</pre>
<p>根据您的互联网连接质量，这可能需要一些时间来部署。</p>
<h2 id="configuring-app-with-datastore">使用数据存储配置应用程序</h2>
<p>让我们继续配置Expo应用程序，以便与Amplify配合使用。创建一个<code>app/index.js</code>并添加以下代码行:</p>
<pre class="language-javascript hljs">import config from '../src/aws-exports';
import { DataStore, Amplify } from 'aws-amplify';

Amplify.configure(config)
</pre>

<p>让我们向数据存储添加一些联系人。要做到这一点，请在浏览器中打开AWS Amplify控制台。快捷方式是在你的终端运行<code>amplify console</code>并选择<strong> AWS控制台</strong>。</p>
<p>要使用Amplify Studio创建联系人，请转到Amplify仪表盘并点击<strong>启动Studio </strong>:</p>
<p><img data-attachment-id="146071" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/launch-studio-amplify-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio.png" data-orig-size="730,409" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="launch-studio-amplify-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio.png" decoding="async" class="aligncenter size-full wp-image-146071 jetpack-lazy-image" src="../Images/3ae308a7fb26c0f5195b0645962321ff.png" alt="Launch your studio in Amplify Studio" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="146071" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/launch-studio-amplify-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio.png" data-orig-size="730,409" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="launch-studio-amplify-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-146071" src="../Images/3ae308a7fb26c0f5195b0645962321ff.png" alt="Launch your studio in Amplify Studio" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/launch-studio-amplify-studio.png"/></noscript>
<p>您应该会看到类似这样的内容:</p>
<p><img data-attachment-id="146073" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/data-save-deploy/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="data-save-deploy" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy.png" decoding="async" class="aligncenter size-full wp-image-146073 jetpack-lazy-image" src="../Images/02fa90cc521a69e1fd3795495f84c096.png" alt="Click the Data menu and then save and deploy" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy-300x167.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="146073" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/data-save-deploy/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="data-save-deploy" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-146073" src="../Images/02fa90cc521a69e1fd3795495f84c096.png" alt="Click the Data menu and then save and deploy" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy-300x167.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/data-save-deploy.png"/></noscript>
<p>点击仪表盘左侧栏的<strong>数据</strong>菜单，点击<strong>保存部署</strong>。</p>
<p><img data-attachment-id="146075" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/data-modeling-amplify-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio.png" data-orig-size="730,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="data-modeling-amplify-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio.png" decoding="async" class="aligncenter size-full wp-image-146075 jetpack-lazy-image" src="../Images/54135b890f8f59746318ae420099c19e.png" alt="The Data modeling page in Amplify Studio" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio-300x164.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="146075" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/data-modeling-amplify-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio.png" data-orig-size="730,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="data-modeling-amplify-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-146075" src="../Images/54135b890f8f59746318ae420099c19e.png" alt="The Data modeling page in Amplify Studio" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio-300x164.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/data-modeling-amplify-studio.png"/></noscript>
<p>现在您可以看到我们创建的模式，并使用UI编辑它。部署数据模型可能需要几分钟时间，具体取决于您的互联网连接。</p>
<p><img data-attachment-id="146077" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/successfully-deployed-data-model/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model.png" data-orig-size="730,529" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="successfully-deployed-data-model" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model.png" decoding="async" class="aligncenter size-full wp-image-146077 jetpack-lazy-image" src="../Images/8d7e0ba82aa96cabf495c723b615ced0.png" alt="Our successfully deployed data model" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model-300x217.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="146077" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/successfully-deployed-data-model/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model.png" data-orig-size="730,529" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="successfully-deployed-data-model" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-146077" src="../Images/8d7e0ba82aa96cabf495c723b615ced0.png" alt="Our successfully deployed data model" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model-300x217.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/successfully-deployed-data-model.png"/></noscript>
<p>部署完成后，打开<strong>内容</strong>菜单。</p>
<p><img data-attachment-id="146079" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/content-menu-amplify-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio.png" data-orig-size="730,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="content-menu-amplify-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio-300x165.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio.png" decoding="async" class="aligncenter size-full wp-image-146079 jetpack-lazy-image" src="../Images/b55dfc8b1df275cb26497aa7f980b700.png" alt="The Content menu in Amplify Studio" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio-300x165.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="146079" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/content-menu-amplify-studio/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio.png" data-orig-size="730,402" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="content-menu-amplify-studio" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio-300x165.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-146079" src="../Images/b55dfc8b1df275cb26497aa7f980b700.png" alt="The Content menu in Amplify Studio" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio-300x165.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/content-menu-amplify-studio.png"/></noscript>
<p>点击<strong>创建联系人</strong>按钮创建一个新的联系人。您也可以通过点击<strong>动作</strong>下拉菜单并选择<strong>自动生成数据来自动生成种子数据。</strong></p>
<p>就是这样！我们已成功为该应用程序创建了联系人。</p>

<p>让我们渲染一下联系人。用这几行代码更新<code>app/index.js</code>:</p>
<pre class="language-javascript hljs">import { View, Text, Button } from "react-native";
import { Link, Stack } from "expo-router";
import config from '../src/aws-exports';
import { DataStore, Amplify } from 'aws-amplify';
import { Contact } from '../src/models'
import { useState } from "react";

Amplify.configure(config)

export default function Home() {
    const [contacts, setContacts] = useState([])

    async function fetchContacts() {
        const allContacts = await DataStore.query(Contact)
        setContacts(allContacts)
    }

    fetchContacts()

    return (
        &lt;View style={container}&gt;
            &lt;Stack.Screen options={{ title: "Contacts" }} /&gt;
            {
                contacts.map(contact =&gt; (
                    &lt;View key={contact.id} style={contactBox}&gt;

                        &lt;View&gt;
                            &lt;Text style={textStyleName}&gt;{contact.name}&lt;/Text&gt;
                            &lt;Text style={textStyle}&gt;{contact.phone}&lt;/Text&gt;

                        &lt;/View&gt;
                        &lt;Link href={`contacts/${contact.id}`}&gt;
                            &lt;Button
                                title="View contact"
                                color="#841584"
                            /&gt;
                        &lt;/Link&gt;
                    &lt;/View&gt;
                ))
            }
        &lt;/View&gt;
    );
}
</pre>
<p>这里，我们通过将模型传递给<code>DataStore .query()</code>方法来查询数据存储中的联系人。</p>
<pre class="language-javascript hljs">DataStore.query(Contact)
</pre>
<p>为了获得每个联系人的更多细节，我们使用了新的Expo路由器组件<code>link</code>，并将<code>[contact.id](&lt;<a href="http://contact.id&amp;gt" rel="nofollow">http://contact.id&amp;gt</a>;)</code>传递给了<code>href</code>属性。动态路线会是<code>contacts/[contactId]</code>。</p>

<p>让我们为联系人详细信息创建一个屏幕。在app目录下，创建一个<code>contacts</code>文件夹和一个<code>[id].js</code>文件。</p>
<pre class="language-javascript hljs">import { Text, View } from "react-native";
import { Stack } from "expo-router";
import { useEffect, useState } from "react";
import { Contact } from "../../src/models";
import { DataStore } from "aws-amplify";

export default function SingleContact({ route }) {
    const [contact, setContact] = useState('')
    useEffect(() =&gt; {
        if (!route.params?.id) {
            return
        }
        DataStore.query(Contact, route.params.id).then(setContact)
    }, [route.params?.id])
    return (
        &lt;View style={container}&gt;
            &lt;Stack.Screen options={{ title: contact.name }} /&gt;
            &lt;View style={contactBox}&gt;
                &lt;Text style={textStyleName}&gt;{contact.name}&lt;/Text&gt;
                &lt;Text style={textStyle}&gt;{contact.phone}&lt;/Text&gt;
                &lt;Text style={textStyle}&gt;{contact.email}&lt;/Text&gt;
                &lt;Text style={textStyle}&gt;{contact.address}&lt;/Text&gt;
                &lt;Text style={textStyle}&gt;{contact.message}&lt;/Text&gt;
            &lt;/View&gt;
        &lt;/View&gt;
    );
}
</pre>
<p>如果您使用过Next.js，这段代码应该很熟悉。主要区别在于Expo路由器使<code>route</code>对象可用，而无需导入它。</p>
<p>在DataStore中，要按ID查询单个项目，可以传递要查询的型号和ID。在我们的例子中，我们传递参数ID。厉害！运行您的应用程序，您应该会得到如下结果:</p>
<figure id="attachment_146081" aria-describedby="caption-attachment-146081" class="wp-caption aligncenter"><img data-attachment-id="146081" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/final-contacts-app-expo-router/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router.png" data-orig-size="730,1066" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="final-contacts-app-expo-router" data-image-description="" data-image-caption="&lt;p&gt;Our final contacts app, build with the new Expo Router&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router-205x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router-701x1024.png" decoding="async" class="size-full wp-image-146081 jetpack-lazy-image" src="../Images/ee0d16fc10607c11fdc18787eb8f18b8.png" alt="Our final contacts app, build with the new Expo Router" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router-205x300.png 205w, https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router-701x1024.png 701w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="146081" data-permalink="https://blog.logrocket.com/native-routing-expo-react-native/attachment/final-contacts-app-expo-router/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router.png" data-orig-size="730,1066" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="final-contacts-app-expo-router" data-image-description="" data-image-caption="&lt;p&gt;Our final contacts app, build with the new Expo Router&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router-205x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router-701x1024.png" decoding="async" loading="lazy" class="size-full wp-image-146081" src="../Images/ee0d16fc10607c11fdc18787eb8f18b8.png" alt="Our final contacts app, build with the new Expo Router" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router-205x300.png 205w, https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router-701x1024.png 701w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/final-contacts-app-expo-router.png"/></noscript><figcaption id="caption-attachment-146081" class="wp-caption-text">Our final contacts app, build with the new Expo Router</figcaption></figure>
<h2 id="conclusion">结论</h2>
<p>这篇文章向我们介绍了Expo路由器、它的工作原理、它的核心特性以及它的优缺点。我们用Expo和来自Amplify DataStore的数据构建了一个React本地应用程序。</p>
<p>基于文件的路由是移动应用平滑导航体验的未来。Expo路由器在其库中实现了该解决方案。虽然它只是在测试版，但Expo路由器的特性令人印象深刻，肯定会让React本地开发人员兴奋不已。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>