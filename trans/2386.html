<html>
<head>
<title>Exploring Motion One from Framer Motion - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>从 Framer Motion - LogRocket 博客探索 Motion One</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/exploring-motion-one-framer-motion/#0001-01-01">https://blog.logrocket.com/exploring-motion-one-framer-motion/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Motion One 是一个新的库，可以让你快速、轻松地在网站上添加小而流畅、功能强大的动画。您可以将它们添加到任何元素中，并轻松控制它们。</p>
<p>这篇文章会给你一个 Motion One 特性的快速概述。尽管它很小，但性能如此之好的原因是它建立在<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API" target="_blank" rel="noopener"> Web Animations API </a>之上，这是一种动画 DOM 元素的本地语言。Motion One 简单地提供了一种简单的方法，通过其自我解释的代码来实现这一点。</p>
<p>Motion One 动画也是完全响应的，它支持 SVG 和 CSS 转换、过渡和动画，除了一些用于使简单动画更加简单的 DSL。最后，它还得到了缓解(<a href="https://motion.dev/dom/animate#easing" target="_blank" rel="noopener">预定义和自定义</a>)。</p>
<p>在本文中，我们将介绍开始使用<a href="https://motion.dev/" target="_blank" rel="noopener"> Motion One </a>的所有基础知识。这是我们要经历的:</p>
<ol>
<li><a href="#benchmarking-motion-one">标杆动作一</a></li>
<li><a href="#using-animate-api">使用<code>animate()</code> API </a></li>
<li><a href="#using-keyframes-stagger-function">使用关键帧和交错功能</a></li>
<li><a href="#understanding-controls">了解控件</a></li>
</ol>
<p>为了跟进，我为本教程制作了一个<a href="https://github.com/GeoBrodas/motion-one-nextjs-example" target="_blank" rel="noopener"> GitHub 库</a>。如果你迷路了，一定要偷看一下。</p>
<h2 id="benchmarking-motion-one">基准动议一</h2>
<p>下面是来自<a href="https://bundlephobia.com/package/motion@10.4.0" target="_blank" rel="noopener"> BundlePhobia </a>的关于 Motion One 的束尺寸的一些详细信息。</p>
<p><img data-attachment-id="77823" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/motion-one-bundle-size-bundlephobia/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia.png" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="motion-one-bundle-size-bundlephobia" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia.png" decoding="async" class="aligncenter size-full wp-image-77823 jetpack-lazy-image" src="../Images/1ba877eb35ea27aab552db0e4c7f2031.png" alt="Detailed Motion One bundle size information from BundlePhobia" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia-300x169.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="77823" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/motion-one-bundle-size-bundlephobia/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia.png" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="motion-one-bundle-size-bundlephobia" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-77823" src="../Images/1ba877eb35ea27aab552db0e4c7f2031.png" alt="Detailed Motion One bundle size information from BundlePhobia" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia-300x169.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-bundle-size-bundlephobia.png"/></noscript>
<p>Motion One 中的核心函数是<code>animate()</code> API，大小只有 3.8kB。开发者马特·佩里打算<a href="https://motion.dev/guides/feature-comparison#bundlesize" target="_blank" rel="noopener">通过进一步的改进和版本升级把它减少到 1.8kB】！</a></p>
<p>与市场上的其他动画库相比，Motion One 的大小只有 Anime.js 的一半，GSAP 的七分之一。</p>
<p><img data-attachment-id="77825" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/motion-one-vs-similar-packages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages.png" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="motion-one-vs-similar-packages" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages.png" decoding="async" class="aligncenter size-full wp-image-77825 jetpack-lazy-image" src="../Images/879e584015cb84a42b20b986a8f506e0.png" alt="Motion One vs. similar packages on BundlePhobia" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages-300x169.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="77825" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/motion-one-vs-similar-packages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages.png" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="motion-one-vs-similar-packages" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-77825" src="../Images/879e584015cb84a42b20b986a8f506e0.png" alt="Motion One vs. similar packages on BundlePhobia" srcset="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages-300x169.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/motion-one-vs-similar-packages.png"/></noscript>
<p>Motion One 的另一个很酷的特性是，它可以在没有主 JavaScript 线程的情况下运行。这意味着在繁重的应用程序渲染过程中，动画仍然会执行。</p>
<h2 id="using-animate-api">使用<code>animate()</code> API</h2>
<p>开始之前，使用以下命令安装库:</p>
<pre class="language-bash hljs">npm install motion
</pre>
<p>完成后，让我们更深入地了解一下 Motion One 的核心功能之一。<code>animate()</code> API 提供了一种简单的方法，可以从当前方向或位置动画显示 DOM 上的元素。</p>
<p>Motion One 的核心功能之一是<code>animate()</code>功能，它接受三个参数:</p>
<ol>
<li>CSS 选择器</li>
<li>可赋予活力的价值观</li>
<li>选择</li>
</ol>
<p>让我们更详细地看看所有这些。</p>
<h3>1.CSS 选择器</h3>
<p>第一个参数是 DOM 上将被动画化的元素的<code>id</code>或<code>class</code>。</p>
<pre class="language-javascript hljs">import { animate } from "motion";

function Trigger ( ) {
  animate(".box", { x: 100} )
}
</pre>
<h3>2.可赋予活力的价值观</h3>
<p>第二个参数指定元素在动画中应该如何表现，比如在 DOM 中移动 100px 或者旋转 45 度。</p>
<pre class="language-javascript hljs">import { animate } from "motion";

function Trigger ( ) {
  animate(".box", { x: 100, rotate: 45 } );
}
</pre>
<h3>3.选择</h3>
<p>最后一个参数是选项，可用于控制动画的各个方面，如延迟、持续时间、重复次数等。</p>
<pre class="language-javascript hljs">import { animate } from "motion";

function Trigger ( ) {
  animate('.click', { transform: 'rotate(45deg)' }, { duration: 0.5 })
}
</pre>
<p><img data-attachment-id="78398" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/animate-api-demo-hq/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/animate-api-demo-hq.gif" data-orig-size="730,678" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="animate-api-demo-hq" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/animate-api-demo-hq-300x279.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/animate-api-demo-hq.gif" decoding="async" src="../Images/ef800fefa2865c50cd2aa1648fe0bdcf.png" alt="Animate API demo" class="aligncenter size-full wp-image-78398 jetpack-lazy-image" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/animate-api-demo-hq.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/animate-api-demo-hq.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="78398" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/animate-api-demo-hq/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/animate-api-demo-hq.gif" data-orig-size="730,678" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="animate-api-demo-hq" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/animate-api-demo-hq-300x279.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/animate-api-demo-hq.gif" decoding="async" loading="lazy" src="../Images/ef800fefa2865c50cd2aa1648fe0bdcf.png" alt="Animate API demo" class="aligncenter size-full wp-image-78398" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/animate-api-demo-hq.gif"/></noscript>
<p>使用绑定到按钮的<code>onClick</code>事件可以触发<code>animate()</code>功能。</p>
<pre class="language-javascript hljs">&lt;button
  className="rounded-md bg-gray-300 hover:bg-gray-400 p-1 text-sm"
  onClick={() =&gt;
    animate('.click', { transform: 'rotate(45deg)' }, { duration: 0.5 })
  }
&gt;
  Rotate 45 degrees
&lt;/button&gt;

// element to be animated
&lt;div className="click"&gt;&lt;/div&gt;
</pre>
<h2>使用 Motion One 创建交互式动画</h2>
<p>为什么不把我们到目前为止学到的所有东西结合起来，创造一个互动的动画呢？</p>
<p><img data-attachment-id="77831" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/example-interactive-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/example-interactive-animation.gif" data-orig-size="730,271" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="example-interactive-animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/example-interactive-animation-300x111.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/example-interactive-animation.gif" decoding="async" class="aligncenter size-full wp-image-77831 jetpack-lazy-image" src="../Images/65954b47fede90226eb2e9c454199fb6.png" alt="Our example interactive animation " data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/example-interactive-animation.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/example-interactive-animation.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="77831" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/example-interactive-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/example-interactive-animation.gif" data-orig-size="730,271" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="example-interactive-animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/example-interactive-animation-300x111.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/example-interactive-animation.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-77831" src="../Images/65954b47fede90226eb2e9c454199fb6.png" alt="Our example interactive animation " data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/example-interactive-animation.gif"/></noscript>
<p>在本教程中，我们将从 GitHub 的贡献者列表中获得这个动画的灵感。重新创建这个动画的主要目的是当鼠标悬停在水平轴上时，将化身图像向左移动。</p>
<p>在本教程中，我将使用<a href="https://tailwindcss.com/docs/guides/nextjs" target="_blank" rel="noopener"> Tailwind CSS </a>来加速开发过程，但是这个概念仍然适用于普通 CSS。</p>
<p>首先，我们需要这个动画的三个<code>&lt;image&gt;</code>元素，每个元素都被一个<code>&lt;div&gt;</code>标签包围。</p>
<pre class="language-javascript hljs">&lt;div
  onMouseOver={onHover}
  onMouseOut={onHoverOff}
&gt;
  &lt;div&gt;
    &lt;Image
      className="rounded-full"
      alt="one"
      src="/images/avataaars.png"
      width="60"
      height="60"
    /&gt;
  &lt;/div&gt;
    &lt;div&gt;
      &lt;Image
        className=" rounded-full"
        alt="two"
        src="/images/new.jpg"
        width="60"
        height="60"
       /&gt;
  &lt;/div&gt;
    &lt;div&gt;
     &lt;Image
      className="rounded-full"
      alt="three"
      src="/images/logo.png"
      width="60"
      height="60"
     /&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>
<p>我们将使父元素<code>&lt;div&gt;</code>成为相对元素，子元素成为绝对元素，然后增加每个子元素的 z-index，使照片上下对齐。</p>
<pre class="language-css hljs">&lt;div className="relative"&gt;
  &lt;div className="absolute z-0"&gt;&lt;Image {...attributes} /&gt;&lt;/div&gt;
  &lt;div className="absolute z-10"&gt;&lt;Image {...attributes} /&gt;&lt;/div&gt;
  &lt;div className="absolute z-20"&gt;&lt;Image {...attributes} /&gt;&lt;/div&gt;
&lt;/div&gt;
</pre>
<p>接下来，定位每个子元素，使所有图像在一行上对齐。</p>
<pre class="language-css hljs">&lt;div className="relative"&gt;
  &lt;div className="absolute z-0 right-10"&gt;&lt;Image {...attributes} /&gt;&lt;/div&gt;
  &lt;div className="absolute z-10 right-5"&gt;&lt;Image {...attributes} /&gt;&lt;/div&gt;
  &lt;div className="absolute z-20 right-0"&gt;&lt;Image {...attributes} /&gt;&lt;/div&gt;
&lt;/div&gt;
</pre>
<p>分别向父标签<code>&lt;div&gt;</code>添加两个事件<code>onMouseOver</code>和<code>onMouseOut</code>。现在需要做的就是将图像移动到一个特定的位置，使它们等距分布。</p>
<p>为每个事件创建一个处理函数:当鼠标在元素上时，以及当鼠标离开该区域时。</p>
<pre class="language-javascript hljs">function onHover () {
  // code goes here
}

function onHoverExit () {
  // code goes here
}
</pre>
<p>我们希望当鼠标指针悬停在图像上时，图像分散在 X 轴上的三个不同位置。</p>
<pre class="language-javascript hljs">function onHover() {
  animate('.one', { x: -70 }, { duration: 0.2 });
  animate('.two', { x: -40 }, { duration: 0.2 });
  animate('.three', { x: -10 }, { duration: 0.2 });
}
</pre>
<p>这里的减号将图像向左移动。类似地，在下面的事件中，我们希望它返回到原来的位置。</p>
<pre class="language-javascript hljs">function onHoverOff() {
  animate('.one', { x: 0 }, { duration: 0.2 });
  animate('.two', { x: 0 }, { duration: 0.2 });
  animate('.three', { x: 0 }, { duration: 0.2 });
}
</pre>
<p>事情就是这样！这个很容易就搞定了，是不是很神奇？让我们讨论一些更基本的问题。</p>
<h2 id="using-keyframes-stagger-function">使用关键帧和<code>stagger</code>功能</h2>
<h3>使用关键帧在 DOM 中移动元素</h3>
<p>当动画元素需要在 DOM 上移动多次，覆盖不同的坐标时，比如当加载指示器跳动时，可以使用关键帧。这些值可以以数组的形式提供，如下所示。</p>
<pre class="language-javascript hljs">function bounceHandler() {
   animate(
     '.bounce',
     { y: [-30, 120, 50, 120] },
    { duration: 1, direction: 'alternate' }
   );
}
</pre>
<p><img data-attachment-id="77833" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/bounce-click-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bounce-click-animation.gif" data-orig-size="730,432" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="bounce-click-animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bounce-click-animation-300x178.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bounce-click-animation.gif" decoding="async" class="aligncenter size-full wp-image-77833 jetpack-lazy-image" src="../Images/ab241853055d44cd5fae2665a2bdc1dd.png" alt="The bounce on click animation" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/bounce-click-animation.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/bounce-click-animation.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="77833" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/bounce-click-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bounce-click-animation.gif" data-orig-size="730,432" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="bounce-click-animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bounce-click-animation-300x178.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bounce-click-animation.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-77833" src="../Images/ab241853055d44cd5fae2665a2bdc1dd.png" alt="The bounce on click animation" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/bounce-click-animation.gif"/></noscript>
<h3>使用交错设置多个元素的动画</h3>
<p>交错是另一个很酷的功能。当制作多个元素的动画时，这可用于对具有相同<code>class</code>或<code>id</code>的每个元素应用延迟。</p>
<pre class="language-css hljs">&lt;div className="flex justify-center"&gt;
  &lt;div className="pawn"&gt;&lt;/div&gt;
  &lt;div className="pawn"&gt;&lt;/div&gt;
  &lt;div className="pawn"&gt;&lt;/div&gt;
  &lt;div className="pawn"&gt;&lt;/div&gt;
  &lt;div className="pawn"&gt;&lt;/div&gt;
&lt;/div&gt;
</pre>
<p>如果用<code>animate()</code>函数绑定单个元素，如下所示:</p>
<pre class="language-javascript hljs">// onClick trigger
function moveUsingStagger() {
  animate('.pawn', { y: 50 }, { delay: stagger(0.1) });
}
</pre>
<p>这是您可能希望看到的情况:</p>
<p><img data-attachment-id="77835" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/bind-individual-element-animate-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bind-individual-element-animate-function.gif" data-orig-size="730,378" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="bind-individual-element-animate-function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bind-individual-element-animate-function-300x155.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bind-individual-element-animate-function.gif" decoding="async" class="aligncenter size-full wp-image-77835 jetpack-lazy-image" src="../Images/0c6806eebef9b5ddaff5a9c4b353ee0b.png" alt="Binding individual elements with the animate function" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/bind-individual-element-animate-function.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/bind-individual-element-animate-function.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="77835" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/bind-individual-element-animate-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bind-individual-element-animate-function.gif" data-orig-size="730,378" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="bind-individual-element-animate-function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bind-individual-element-animate-function-300x155.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/bind-individual-element-animate-function.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-77835" src="../Images/0c6806eebef9b5ddaff5a9c4b353ee0b.png" alt="Binding individual elements with the animate function" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/bind-individual-element-animate-function.gif"/></noscript>
<p>为了在更具挑战性的例子中看到这些，让我们制作一个音乐波形，如下所示:</p>
<p><img data-attachment-id="77837" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/music-waveform/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/music-waveform.gif" data-orig-size="730,373" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="music-waveform" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/music-waveform-300x153.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/music-waveform.gif" decoding="async" class="aligncenter size-full wp-image-77837 jetpack-lazy-image" src="../Images/f3d712762cfc97f975142f811b48d495.png" alt="Demo music waveform" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/11/music-waveform.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/music-waveform.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="77837" data-permalink="https://blog.logrocket.com/exploring-motion-one-framer-motion/music-waveform/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/11/music-waveform.gif" data-orig-size="730,373" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="music-waveform" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/11/music-waveform-300x153.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/11/music-waveform.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-77837" src="../Images/f3d712762cfc97f975142f811b48d495.png" alt="Demo music waveform" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/11/music-waveform.gif"/></noscript>
<p>很棒，不是吗？首先，我们需要一个按钮和四个波形条。</p>
<pre class="language-javascript hljs">&lt;div&gt;
  // button trigger to animate waveform
  &lt;button onClick={play} &gt;
    &lt;PlayIcon /&gt;
  &lt;/button

  // waveform
  &lt;div className="flex overflow-hidden"&gt;
    &lt;span className="w-1 h-4" /&gt;
    &lt;span className="w-1 h-2" /&gt;
    &lt;span className="w-1 h-6" /&gt;
    &lt;span className="w-1 h-2" /&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>
<p>提醒一下，你可以在我为这篇文章创建的 GitHub repo 中查看完整代码。</p>
<p>然后我们将进入动画部分。向按钮添加一个<code>onClick</code>事件，并将其分配给一个函数。然后，指向每个<code>&lt;span /&gt;</code>并调用<code>animate()</code>函数。记住给每个子元素一个不同的名字。与其他动画不同，我们将在这里为每个<code>&lt;span /&gt;</code>制作不同的动画。</p>
<pre class="language-css hljs">function playWaveform ( ) {
  // some code here
  const animation1 = animate(
      '#bar1',
      {
        transform: [
          'scaleY(1.0) translateY(0rem)',
          'scaleY(1.5) translateY(-0.082rem)',
          'scaleY(1.0) translateY(0rem)',
        ],
      },
      {
        duration: 1.0,
        repeat: Infinity,
        easing: 'ease-in-out',
      }
    );
    const animation2 = animate(
      '#bar2',
      {
        transform: [
          'scaleY(1.0) translateY(0rem)',
          'scaleY(3) translateY(-0.083rem)',
          'scaleY(1.0) translateY(0rem)',
        ],
      },
      {
        delay: 0.2,
        duration: 1.5,
        repeat: Infinity,
        easing: 'ease-in-out',
      }
    );
    const animation3 = animate(
      '#bar3',
      {
        transform: [
          'scaleY(1.0)  translateY(0rem)',
          'scaleY(0.8) translateY(0.37rem)',
          'scaleY(1.0)  translateY(0rem)',
        ],
      },
      {
        delay: 0.3,
        duration: 1.5,
        repeat: Infinity,
        easing: 'ease-in-out',
      }
    );
    const animation4 = animate(
      '#bar4',
      {
        transform: [
          'scaleY(0.3)  translateY(0rem)',
          'scaleY(2.0) translateY(-0.05rem)',
          'scaleY(0.3)  translateY(0rem)',
        ],
      },
      {
        delay: 0.3,
        duration: 1.5,
        repeat: Infinity,
        easing: 'ease-in-out',
      }
    );

  // some more code here ( wait for it )
}
</pre>
<p>您可能已经注意到，我已经为每个<code>animate()</code>函数分配了一个参考常数。这是出于一个特定的原因，我们稍后会谈到。</p>
<p>目前，让我们先了解一下<code>animate()</code> API 是做什么的。首先，我们将两个关键帧传递给<code>transform</code>属性:</p>
<ul>
<li><code>ScaleY</code>:垂直调整元素大小</li>
<li><code>TranslateY</code>:沿 y 轴移动所选元素的位置</li>
</ul>
<p>因此，您可能已经注意到，我向父元素添加了一个<code>overflow-hidden</code>属性，以隐藏由这两个属性引起的溢出。接下来，<code>repeat</code>属性被设置为<code>infinity</code>，这导致相同的动画无限重复。</p>
<p>将<code>delay</code>属性添加到最后三个子元素中，可以将它们区分开来，并产生每个条形独立于其他条形的感觉。</p>
<p>缓动属性控制动画播放的速度。在这个例子中，我们将它设置为<code>ease-in-out</code>，这意味着动画缓慢开始，在中间加快速度，然后在接近结束时再次减速。</p>
<h2 id="understanding-controls">了解控件</h2>
<p><code>animate()</code>函数返回一个叫做<code>controls</code>的东西。我们可以使用控件来控制动画的回放。每次调用<code>animate()</code>函数时都会返回控件，这可以通过将<code>animate()</code>函数实例化为一个变量来访问。</p>
<p>再来看最后一个例子，我们可能想只在音乐播放时让波形变成动画。这就是控件非常有用的地方。</p>
<p>要获得<code>controls</code>，请参考<code>animate</code>函数。</p>
<pre class="language-javascript hljs">const animation1 = animate("#bar1", ...options )
</pre>
<p>接下来，为了控制动画，在给定的布尔条件下使用<code>pause()</code>或<code>play()</code>方法。</p>
<pre class="language-javascript hljs">// if music is playing
animation1.play( );

// if the music stops playing
animation1.pause( );
</pre>
<p>现在让我们回到我们之前的动画！为了控制回放，我们可以使用在布尔条件之间切换的状态。</p>
<pre class="language-javascript hljs">import { useState } from "react";

// component
function MusicWaveform () {
  const [ isPlaying, setIsPlaying ] = useState(false);

  // toggles between state
  function switchModeHandler() {
    setIsPlaying((prevState) =&gt; !prevState);
  }

  // animation code goes here
  function playWaveform() {
    switchModeHandler();
    // animate functions for each bar ...
  }
  // JSX code
}

export default MusicWaveform;
&gt;</pre>
<p>现在，当点击按钮时，<code>playWaveform</code>功能被触发，状态被切换。剩下的就是当按钮被触发时播放波形。</p>
<pre class="language-javascript hljs">function playWaveform() {
  switchModeHandler();
  // useState
  // animate functions for each bar
  if (isPlaying) {
    animation1.pause();
    animation2.pause();
    animation3.pause();
    animation4.pause();
  } else {
    animation1.play();
    animation2.play();
    animation3.play();
    animation4.play();
  }
}
</pre>
<p>这就是全部了！你应该能看到酒吧在跳舞！</p>
<h2>结论</h2>
<p>Motion One 是一个功能齐全的网络动画库。它基于 web Animations API，这是一种 Web 标准，允许 Web 动画甚至在没有主 JavaScript 线程的情况下运行(因此保持流畅)。</p>
<p>Motion One 是一款非常轻量级的产品，拥有制作优秀动画所需的一切。你可以通过访问<a href="https://motion.dev" target="_blank" rel="noopener"> https://motion.dev </a>了解更多关于 Motion One 的信息。</p><div class="code-block code-block-28">
<div class="blog-plug inline-plug js-libraries-plug"><h2>您是否添加了新的 JS 库来提高性能或构建新特性？如果他们反其道而行之呢？</h2><p>毫无疑问，前端变得越来越复杂。当您向应用程序添加新的 JavaScript 库和其他依赖项时，您将需要更多的可见性，以确保您的用户不会遇到未知的问题。</p>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放 JavaScript 错误，就像它们发生在您自己的浏览器中一样，这样您就可以更有效地对错误做出反应。</p><a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/></noscript></a>
<a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自 Redux、Vuex 和@ngrx/store 的额外上下文。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket 还可以监控应用的性能，报告客户端 CPU 负载、客户端内存使用等指标。</p><p>自信地构建— <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>