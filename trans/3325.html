<html>
<head>
<title>Remult: Build a type-safe, full-stack app - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Remult:构建一个类型安全、全栈的应用日志博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/remult-build-type-safe-full-stack-app-typescript/#0001-01-01">https://blog.logrocket.com/remult-build-type-safe-full-stack-app-typescript/#0001-01-01</a></blockquote><div><article class="article-post">
<p>简单的基于CRUD的模块是任何业务的常见需求，应该易于构建和维护。Remult 是一个全面的框架，允许开发人员仅使用TypeScript代码构建全栈、类型安全的应用程序。</p>
<p>本文将介绍Remult的基本概念，并演示如何使用Remult来简化和加速您的web应用程序开发过程！</p>
<p>在本指南中，我们将创建一个简单的预订表单，并将表单提交存储在MongoDB集合中。我们将使用React构建UI，然后使用<a href="https://picturepan2.github.io/spectre/" target="_blank" rel="noopener"> Spectre.css </a>添加样式。</p>
<p><em>向前跳转</em></p>

<h2 id="get-to-know-the-remult-framework">了解Remult框架</h2>
<p>Remult是一个CRUD框架，它使用TypeScript实体进行CRUD操作。它还为后端数据库操作提供了类型安全的API客户端和ORM。</p>
<p>这个框架抽象掉并减少了应用程序中的样板代码。它使使用TypeScript构建全栈应用程序变得容易，也允许开发人员与其他框架(如Express.js和Angular)集成。</p>
<p>Remult是一个中间立场。它不会强迫你以某种方式工作；相反，它为您的项目提供了许多选项。</p>
<h2 id="set-up-the-react-project-with-remult">使用Remult设置React项目</h2>
<p>让我们首先使用<a href="https://create-react-app.dev" target="_blank" rel="noopener"> Create React App </a>创建一个React项目，并选择TypeScript模板:</p>
<pre class="language-typescript hljs">&gt; npx create-react-app remult-react-booking-app --template typescript
&gt; cd remult-react-booking-app
</pre>
<p>接下来，我们将安装所需的依赖项。</p>
<pre class="language-typescript hljs">&gt; npm i axios express remult dotenv
&gt; npm i -D @types/express ts-node-dev concurrently
</pre>
<p>在上面的代码中，我们使用了<code>concurrently</code>包。这个包是必需的，因为我们将从React项目的根目录同时提供客户机和服务器代码。</p>
<p>现在，为服务器创建一个<code>tsconfig</code>文件，如下所示:</p>
<pre class="language-typescript hljs">// tsconfig.server.json
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "module": "commonjs",
    "emitDecoratorMetadata": true
  }
}
</pre>
<p>然后，在主<code>tsconfig.json</code>文件中，添加<code>experimentalDecorators</code>选项来启用装饰器的使用。</p>
<pre class="language-typescript hljs">// tsconfig.json

{
  "compilerOptions": {
    // ...
    "experimentalDecorators": true
  },
}
</pre>
<p>更新<code>package.json</code>文件，像这样:</p>
<pre class="language-typescript hljs">// package.json

{
  "proxy": "http://localhost:3002",
  // ...
  "scripts": {
  // ...
    "start:dev": "concurrently -k -n \"SERVER,WEB\" -c \"bgBlue.bold,bgGreen.bold\" \"ts-node-dev -P tsconfig.server.json src/server/\" \"react-scripts start\""
  },
}
</pre>
<p>这里，我们添加了<code>proxy</code>选项，让webpack dev服务器知道当应用程序在本地环境中运行时，代理端口3000到3002上的API请求。我们还添加了一个npm脚本来同时启动前端和API开发服务器。</p>
<h2 id="initialize-the-remultexpress-middleware">初始化<code>remultExpress</code>中间件</h2>
<p>现在，让我们在Create React App创建的<code>src</code>文件夹中创建一个<code>server</code>文件夹，并创建一个将初始化<code>remultExpress</code>中间件的<code>api.ts</code>文件。</p>
<pre class="language-typescript hljs">// src/server/api.ts

import { remultExpress } from "remult/remult-express";

export const api = remultExpress();
</pre>
<p>接下来，为服务器创建一个<code>.env</code>文件，并指定API端口号。</p>
<pre class="language-typescript hljs">// src/server/.env

API_PORT=3002
</pre>
<p>接下来，创建一个作为服务器根文件的<code>index.ts</code>文件，初始化<code>express</code>，加载环境变量，并注册<code>remultExpress</code>中间件。</p>
<pre class="language-typescript hljs">// src/server/index.ts

import { config } from "dotenv";
config({ path: __dirname + "/.env" });

import express from "express";
import { api } from "./api";

const app = express();
app.use(api);

app.listen(process.env.API_PORT || 3002, () =&gt; console.log("Server started"));
</pre>
<h2 id="initialize-remult-on-the-frontend">在前端初始化内存</h2>
<p>我们将使用React应用程序中的全局<code>Remult</code>对象通过<code>axios</code> HTTP客户端与API服务器通信。</p>
<pre class="language-typescript hljs">// src/common.ts

import axios from "axios";
import { Remult } from "remult";

export const remult = new Remult(axios);
</pre>
<p>此时，主项目设置已经完成，可以在本地服务器上运行了。</p>
<p>使用以下命令:</p>
<pre class="language-typescript hljs">&gt; npm run start:dev
</pre>
<h2 id="add-the-database-connection">添加数据库连接</h2>
<p>在本指南中，我们将使用MongoDB来存储表单提交。要为Remult设置MongoDB连接池，请使用<code>remultExpress</code>中间件的<code>dataProvider</code>选项。</p>
<p>首先，您必须将<code>mongodb</code>作为一个依赖项安装在您的项目中，就像这样:</p>
<pre class="language-typescript hljs">&gt; npm i mongodb
</pre>
<p><code>dataProvider</code>选项可以接受一个连接到MongoDB并返回<code>MongoDataProvider</code>对象的<code>async()</code>函数，该对象充当Remult的连接器。</p>
<pre class="language-typescript hljs">// src/server/api.ts

import { MongoDataProvider } from "remult/remult-mongo";

export const api = remultExpress({
  dataProvider: async () =&gt; {
    const client = new MongoClient(process.env.MONGO_URL || "");
    await client.connect();
    console.log("Database connected");
    return new MongoDataProvider(client.db("remult-booking"), client);
  },
});
</pre>
<h2 id="generate-the-api-endpoints-with-remult-entities">用Remult实体生成API端点</h2>
<p>Remult使用实体来生成API端点、API查询和数据库命令。<code>entity</code>用作前端和后端代码的模型类。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p>我们需要两个实体来定义预订对象和可用的每日时段。</p>
<p>在<code>src</code>中创建一个<code>shared</code>文件夹，它将包含前端和后端共享的代码。然后，在<code>shared</code>文件夹下再创建一个存放实体的子文件夹，并创建实体类文件:<code>Booking.entity.ts</code>和<code>Slot.entity.ts</code>。</p>
<p>要创建一个实体，定义一个具有所需属性的类，并使用<code>@Entity</code>装饰器。<code>@Entity</code> decorator接受一个用于确定API路径的基本参数、默认的数据库集合或表名，以及一个用于定义实体相关属性和操作的选项参数。</p>
<p>在本指南中，<code>Slot</code>实体可定义如下:</p>
<pre class="language-typescript hljs">// src/shared/entities/Slot.entity.ts

import { Entity, Fields, IdEntity } from "remult";

@Entity("slots")
export class Slot extends IdEntity {
  @Fields.string()
  startTime: String;

  @Fields.string()
  endTime: String;
}
</pre>
<p><code>@Fields.string</code>装饰器定义了一个类型为<code>String</code>的实体数据字段。这个装饰器也用于描述与字段相关的属性，比如验证规则和操作。</p>
<pre class="language-typescript hljs">// src/shared/entities/Booking.entity.ts

import { Entity, Fields, IdEntity, Validators } from "remult";

@Entity("bookings", {
  allowApiCrud: true
})
export class Booking extends IdEntity {
  @Fields.string({
    validate: Validators.required,
  })
  name: String;

  @Fields.string({
    validate: Validators.required,
  })
  email: String;

  @Fields.string({ validate: Validators.required })
  description: String;

  @Fields.string({
    validate: Validators.required,
  })
  date: String;

  @Fields.string({
    validate: Validators.required,
  })
  slotId: string;
}
</pre>
<p>既然两个实体都已定义，让我们将它们添加到<code>remultExpress</code>中间件的<code>entities</code>属性。我们还可以使用<code>initApi</code>属性将初始数据植入插槽集合。</p>
<pre class="language-typescript hljs">// src/server/api.ts

import { Slot } from "../shared/entities/Slot.entity";
import { Booking } from "../shared/entities/Booking.entity";

export const api = remultExpress({
  entities: [Slot, Booking],
  initApi: async (remult) =&gt; {
    const slotRepo = remult.repo(Slot);
    const shouldAddAvailablSlots = (await slotRepo.count()) === 0;

    if (shouldAddAvailablSlots) {
      const availableSlots = [10, 11, 12, 13, 14, 15, 16, 17].map((time) =&gt; ({
        startTime: `${time}:00`,
        endTime: `${time}:45`,
      }));

      await slotRepo.insert(availableSlots);
    }
  },
  dataProvider: async () =&gt; {
    // ...
  },
});
</pre>
<h2 id="build-and-style-the-frontend">构建和设计前端</h2>
<p>让我们通过构建表单UI来开始应用程序的前端工作。</p>
<p><img data-attachment-id="130271" data-permalink="https://blog.logrocket.com/remult-build-type-safe-full-stack-app-typescript/attachment/book-appointment-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form.png" data-orig-size="730,470" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Book appointment form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form-300x193.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form.png" decoding="async" class="aligncenter size-full wp-image-130271 jetpack-lazy-image" src="../Images/8e43afd2c953b6aa45866b45dce47a82.png" alt="Book Appointment Form" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form-300x193.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="130271" data-permalink="https://blog.logrocket.com/remult-build-type-safe-full-stack-app-typescript/attachment/book-appointment-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form.png" data-orig-size="730,470" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Book appointment form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form-300x193.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-130271" src="../Images/8e43afd2c953b6aa45866b45dce47a82.png" alt="Book Appointment Form" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form-300x193.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/book-appointment-form.png"/></noscript>
<p>首先，用以下代码替换<code>src/App.tsx</code>文件中的默认样板代码:</p>
<pre class="language-typescript hljs">// src/App.tsx

import "./App.css";
import { BookingForm } from "./components/BookingForm";

function App() {
  return (
    &lt;div className="App"&gt;
      &lt;header className="hero hero-sm bg-primary "&gt;
        &lt;div className="hero-body text-center"&gt;
          &lt;div className="container grid-md"&gt;
            &lt;h1&gt;Book an appointment&lt;/h1&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/header&gt;
      &lt;BookingForm /&gt;
    &lt;/div&gt;
  );
}

export default App;
</pre>
<p>现在，让我们添加Spectre.css库，使用户界面看起来像样。</p>
<pre class="language-typescript hljs">&gt; npm i spectre.css
</pre>
<p>对于<code>BookingForm</code>组件可以参考下面的代码:</p>
<pre class="language-typescript hljs">// src/components/BookingForm.tsx

import { useEffect, useState } from "react";
import { useForm } from "react-hook-form";
import { remult } from "../common";
import { Booking } from "../shared/entities/Booking.entity";
import { Slot } from "../shared/entities/Slot.entity";

const bookingRepo = remult.repo(Booking);

export const BookingForm = () =&gt; {
  const {
    register,
    handleSubmit,
    setValue,
    watch,
    setError,
    clearErrors,
    reset,
    formState: { errors },
  } = useForm();

  const [availableDates, setAvailableDates] = useState&lt;string[]&gt;([]);
  const [availableSlots, setAvailableSlots] = useState&lt;Slot[]&gt;([]);

  const [isSubmitting, setSubmitting] = useState&lt;boolean&gt;(false);

  const bookingDate = watch("date");

  const onSubmit = async (values: Record&lt;string, any&gt;) =&gt; {
    try {
      setSubmitting(true);
      const data = await bookingRepo.save(values);
      console.log({ data });
      reset();
    } catch (error: any) {
      setError("formError", {
        message: error?.message,
      });
    } finally {
      setSubmitting(false);
    }
  };

  // JSX code
  return (
    &lt;form onSubmit={handleSubmit(onSubmit)}&gt;
      &lt;&gt;...&lt;/&gt;
    &lt;/form&gt;
  );
};
</pre>
<p>这里，我们使用<code>react-hook-form</code>库来管理表单状态和输入值。</p>
<p>为了在<code>bookings</code>集合中保存提交的值，我们需要为<code>Booking</code>实体创建一个存储库对象。</p>
<pre class="language-typescript hljs">const bookingRepo = remult.repo(Booking);
</pre>
<p>Remult存储库对象提供了在实体上执行CRUD操作的方法。在本例中，我们使用<code>save()</code> repository方法将数据插入到集合中。</p>
<pre class="language-typescript hljs">await bookingRepo.save(values);
</pre>
<h2 id="add-backend-only-methods">添加仅后端方法</h2>
<p>有时，您可能希望创建带有附加逻辑的自定义API，比如发送电子邮件、执行多个数据库操作或完成其他顺序任务。</p>
<p>多个数据库操作只能在后端执行，因为在前端使用各种实体级功能可能会影响应用程序的性能。</p>
<p>在Remult中实现仅后端方法的一种方式是创建一个控制器类并使用<code>@BackendMethod</code>装饰器。</p>
<p>对于我们项目的预订表单，让我们创建两个后端方法。第一种方法<code>getAvailableDates()</code>，将获得接下来的五个可用工作日。第二种方法是<code>getAvailableSlots()</code>，将按日期获取可用的预订时段。</p>
<pre class="language-typescript hljs">// src/shared/controllers/Booking.controller.ts

import { BackendMethod, Remult } from "remult";
import { Booking } from "../entities/Booking.entity";
import { Slot } from "../entities/Slot.entity";
import { addWeekDays, formattedDate } from "../utils/date";

export class BookingsController {
  @BackendMethod({ allowed: true })
  static async getAvailableDates() {
    const addDates = (date: Date, count = 0) =&gt;
      formattedDate(addWeekDays(date, count));

    return Array.from({ length: 5 }).map((v, idx) =&gt; addDates(new Date(), idx));
  }

  @BackendMethod({ allowed: true })
  static async getAvailableSlots(date: string, remult?: Remult) {
    if (!remult) return [];
    const unavailableSlotIds = (
      await remult.repo(Booking).find({ where: { date } })
    ).map((booking) =&gt; booking.slotId);

    const availableSlots = await remult
      .repo(Slot)
      .find({ where: { id: { $ne: unavailableSlotIds } } });

    return availableSlots;
  }
}
</pre>
<p><code>@BackendMethod</code>装饰器中的<code>allowed</code>属性定义了请求用户是否有权访问API。在这种情况下，这是真的，因为我们希望API是公共的。</p>
<p>您可以拥有控制<code>allowed</code>属性的值的授权规则。后端方法也可以访问<code>remult</code>对象，以便执行DB操作。</p>
<p>要使用后端方法，您不必手动进行任何API调用。只需在前端代码中导入控制器，然后像对任何其他模块一样直接调用这些方法。</p>
<p>在内部，Remult使用HTTP客户端为您进行API调用，该客户端是在您初始化Remult时在前端代码中定义的。这样，就可以保证API是类型安全的，并且更容易维护。</p>
<pre class="language-typescript hljs">// src/components/BookingForm.tsx

import { BookingsController } from "../shared/controllers/Booking.controller";

export const BookingForm = () =&gt; {
   // ...
  useEffect(() =&gt; {
    BookingsController.getAvailableDates().then(setAvailableDates);
  }, []);

  useEffect(() =&gt; {
    if (!availableDates.length) return;
    setValue("date", availableDates[0]);
    BookingsController.getAvailableSlots(availableDates[0]).then(
      setAvailableSlots
    );
  }, [availableDates]);

  useEffect(() =&gt; {
    BookingsController.getAvailableSlots(bookingDate).then(setAvailableSlots);
  }, [bookingDate]);

  useEffect(() =&gt; {
    setValue("slotId", availableSlots[0]?.id);
  }, [availableSlots]);
 // ...
}
</pre>
<p>如下图所示，默认情况下，<strong>日期</strong>和<strong>可用</strong>下拉式表单字段已经预填。</p>
<p><img data-attachment-id="130275" data-permalink="https://blog.logrocket.com/remult-build-type-safe-full-stack-app-typescript/attachment/date-available-slots-filled/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled.png" data-orig-size="730,208" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Date and available slots filled" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled-300x85.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled.png" decoding="async" class="aligncenter size-full wp-image-130275 jetpack-lazy-image" src="../Images/30dc2de75480817f532891f81de6bf80.png" alt="Date and Available Slots Filled" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled-300x85.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="130275" data-permalink="https://blog.logrocket.com/remult-build-type-safe-full-stack-app-typescript/attachment/date-available-slots-filled/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled.png" data-orig-size="730,208" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Date and available slots filled" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled-300x85.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-130275" src="../Images/30dc2de75480817f532891f81de6bf80.png" alt="Date and Available Slots Filled" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled-300x85.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/date-available-slots-filled.png"/></noscript>
<p><img data-attachment-id="130277" data-permalink="https://blog.logrocket.com/remult-build-type-safe-full-stack-app-typescript/attachment/available-slots-dropdown/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown.png" data-orig-size="730,274" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Available slots dropdown" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown-300x113.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown.png" decoding="async" class="aligncenter size-full wp-image-130277 jetpack-lazy-image" src="../Images/2cebc1b830d6222e5fcb16e939bff911.png" alt="Available Slots Dropdown" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown-300x113.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="130277" data-permalink="https://blog.logrocket.com/remult-build-type-safe-full-stack-app-typescript/attachment/available-slots-dropdown/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown.png" data-orig-size="730,274" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Available slots dropdown" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown-300x113.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-130277" src="../Images/2cebc1b830d6222e5fcb16e939bff911.png" alt="Available Slots Dropdown" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown-300x113.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/available-slots-dropdown.png"/></noscript>
<p>如果我们试图提交带有不完整值的表单，添加到<code>Booking</code>实体中的验证规则将会失败并返回一个错误。</p>
<p><img data-attachment-id="130279" data-permalink="https://blog.logrocket.com/remult-build-type-safe-full-stack-app-typescript/attachment/name-field-error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error.png" data-orig-size="730,201" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Name field error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error-300x83.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error.png" decoding="async" class="aligncenter size-full wp-image-130279 jetpack-lazy-image" src="../Images/4a7626909e9ba04829a41d8b973fc59d.png" alt="Name Field Error" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error-300x83.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="130279" data-permalink="https://blog.logrocket.com/remult-build-type-safe-full-stack-app-typescript/attachment/name-field-error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error.png" data-orig-size="730,201" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Name field error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error-300x83.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-130279" src="../Images/4a7626909e9ba04829a41d8b973fc59d.png" alt="Name Field Error" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error-300x83.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/name-field-error.png"/></noscript>
<p>要查看本文的完整代码，请参见<a href="https://github.com/vijitail/remult-demo" target="_blank" rel="noopener"> GitHub repo </a>。</p>
<h2 id="conclusion">结论</h2>
<p>Remult是一个很棒的框架，允许你快速简单地构建类型安全的全栈应用。它简单明了的语法使Remult成为任何希望开始类型安全编程的开发人员的完美工具。你可以查阅官方文档来获得本指南中所涉及的方法的更深入的解释。</p>
<p>你还在等什么？今天就给Remult一个机会吧！</p><div class="code-block code-block-21">
<div class="blog-plug inline-plug typescript-plug"><h2><a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>:全面了解您的网络和移动应用</h2>
<a href="https://lp.logrocket.com/blg/typescript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放问题，就像问题发生在您自己的浏览器中一样。LogRocket不需要猜测错误发生的原因，也不需要向用户询问截图和日志转储，而是让您重放会话以快速了解哪里出错了。它可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。</p>
<p>除了记录Redux操作和状态，LogRocket还记录控制台日志、JavaScript错误、堆栈跟踪、带有头+正文的网络请求/响应、浏览器元数据和自定义日志。它还使用DOM来记录页面上的HTML和CSS，甚至为最复杂的单页面和移动应用程序重新创建像素级完美视频。</p>
<a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>