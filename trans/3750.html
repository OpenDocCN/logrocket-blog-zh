<html>
<head>
<title>Using the HTML inert property to manage user focus </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用HTML惰性属性管理用户焦点</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/#0001-01-01">https://blog.logrocket.com/using-html-inert-property-manage-user-focus/#0001-01-01</a></blockquote><div><article class="article-post">
<p>由<a href="https://hacks.mozilla.org/2022/03/interop-2022/"> Interop 2022 </a>所做工作的一个产品是<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/inert"> HTML <code>inert</code>属性</a>，这是一个跨浏览器倡议，旨在发现并解决web上最重要的互操作性痛点。作为改进<code>&lt;dialog&gt;</code>规范的一部分，<code>inert</code>属性是一个布尔值，它使浏览器忽略它所应用的元素上触发的所有事件。我们最感兴趣的是它忽略来自用户和辅助技术的事件的能力。</p>
<p>在本文中，我们将探索<code>inert</code>属性，观察我们在引入它之前所面临的一些棘手问题，并决定在为web编程时是否可以使用它来减轻或完全克服这些问题。我们将讨论以下内容:</p>

<p>本文中的例子的完整代码可以在GitHub 上找到。我们开始吧！</p>
<h2 id="user-focus-managed-before-inert">在<code>inert</code>之前，用户焦点是如何管理的？</h2>
<p>保持与W3C规范保持一致是一个很好的实践，W3C规范<a href="https://www.w3.org/TR/2017/NOTE-wai-aria-practices-1.1-20171214/#dialog_modal">规定了交互元素和页面的其余部分在活动时应该如何表现。</a></p>
<p>在创建<code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog">&lt;dialog&gt;</a></code>和<code>inert</code>属性之前，在需要更多关注的元素(如模态)上实现焦点需要开发人员将焦点限制在交互空间内，监听焦点改变事件，并在焦点泄漏到目标元素边界之外的情况下强制焦点返回。所有这些都必须在交互元素仍然活跃的时候完成。</p>
<p>焦点实现还包括确保不可能与交互元素之外的页面元素进行交互，将用户限制在交互空间。下面的JavaScript代码显示了在交互式元素中实现焦点循环的示例:</p>
<pre class="language-javascript hljs">// trap-focus.js

const FOCUSABLE_SELECTORS_LIST = 'a[href]:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), area[href], [tabindex="0"], [contenteditable], object, iframe',
  TAB_KEY_CODE = 9
let firstFocusElement,
  lastFocusElement

function initiateFocusLooping(modal){
  let focusableModelElements = modal.querySelectorAll(FOCUSABLE_SELECTORS_LIST)
  firstFocusElement = focusableModelElements[0]
  lastFocusElement = focusableModelElements[focusableModelElements.length - 1]

  firstFocusElement.focus({focusVisible: true});
  modal.addEventListener("keydown", throttleFocus, false)
}

function endFocusLooping(modal){
  modal.removeEventListener("keydown", throttleFocus, false)
}

function throttleFocus(el){
  if(el.keyCode === TAB_KEY_CODE || el.key === "Tab"){
    if(el.shiftKey &amp;&amp; document.activeElement === firstFocusElement) {
      el.preventDefault();
      lastFocusElement.focus();
    } else if(!el.shiftKey &amp;&amp; document.activeElement === lastFocusElement) {
      el.preventDefault();
      firstFocusElement.focus()
    }
  }
}
</pre>
<p>在上面的代码中，我们首先通过了解交互式组件中所有可聚焦的元素来处理键盘导航。然后，我们监控键盘导航尝试，将它们限制在交互组件的位置，并主动实现在HTML文档中自动实现的预期顺序导航。</p>
<p>因此我们不会重复不必要的代码，我们将在下面的例子中引用<code>trap-focus.js</code>文件。</p>
<p>就交互空间而言，开发者必须意识到页面中可能发生的所有可能的动作。首先，你必须通过<strong> Tab </strong>和<strong> Shift + Tab </strong>来处理键盘导航，迫使焦点在交互空间的可聚焦元素中循环。但是，您还必须监听键盘<code>EscKeyDown</code>事件，该事件导致交互式组件的关闭:</p>
<pre class="language-html hljs">// Listening to Esc key press and returning focus to element that triggered the interactive element
function listenToEscKeyDown(el) {
  if(!modal.classList.contains("hide") &amp;&amp; (el.key === "Esc" || el.keyCode === 27)){
    toggleModal()
    ELEMENT_THAT_OPENED_INTERACTIVE_ELEMENT.focus()
  }
}
</pre>
<p>对于示例代码的其余部分，我们将引用上面的<code>listenToEscKeyDown()</code>函数，以免重复。</p>
<p>当考虑使用鼠标和触摸屏的用户的视觉交互时，我们需要在交互组件和页面的其余元素之间放置一个固定位置的覆盖块，就像模态一样。或者，你可以把它放在不应该被访问的页面元素上面，就像全屏和侧边滑动导航菜单一样，防止用户意外地与它们交互。</p>
<p>在下面的代码中，我们完成了使用上面的<code>trap-focus.js</code>示例中的函数的模态示例。我们还添加了一个覆盖容器:</p>
<pre class="language-javascript hljs">&lt;style&gt;
  /* modal, modal-overlay, and hide styles */
&lt;/style&gt;

&lt;body&gt;
  &lt;main&gt;
    &lt;h1&gt;Legacy Modal&lt;/h1&gt;
    &lt;div&gt;
      &lt;p&gt;
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Phasellus vestibulum lorem sed risus.
      &lt;/p&gt;
      &lt;button class="open-modal"&gt;Register&lt;/button&gt;
    &lt;/div&gt;
  &lt;/main&gt;
  &lt;div id="registration-modal" class="modal-overlay hide" role="dialog"&gt;
    &lt;div class="modal"&gt;
      &lt;h2 aria-label="Registration Modal"&gt;Registration&lt;/h2&gt;
      &lt;p&gt;Hello there, you can't focus outside my boundaries! :-)&lt;p&gt;
      &lt;form action=""&gt;
        &lt;div&gt;
          &lt;input type="text" name="name" placeholder="Thunder Storm"&gt;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;input type="email" name="email" placeholder="<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a8cdd0c9c5d8c4cde8c5c9c1c486cbc7c5">[email protected]</a>"&gt;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;input type="password" name="password"&gt;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;legend&gt;
            Pet of choice:
          &lt;/legend&gt;
          &lt;label&gt;
            &lt;input type="radio" value="cat" name="pet"&gt; Cat
          &lt;/label&gt;
          &lt;label&gt;
            &lt;input type="radio"  value="dog" name="pet"&gt; Dog
          &lt;/label&gt;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;label for="terms"&gt;
            &lt;input type="checkbox"&gt; Agree to &lt;a href="#terms"&gt;terms&lt;/a&gt;
          &lt;/label&gt;
        &lt;/div&gt;
        &lt;div&gt;
          &lt;button&gt;Save&lt;/button&gt;
          &lt;button type="button" class="close-modal"&gt;Discard&lt;/button&gt;
        &lt;/div&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;script src="/trap-focus.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    let modal = document.getElementById("registration-modal")
    let closeModalButton = document.querySelector(".close-modal")
    let openModalButton = document.querySelector(".open-modal")

    function toggleModal() {
      if(modal.classList.contains("hide")){
        modal.classList.remove("hide")
        initiateFocusLooping(modal)
        document.addEventListener("keydown", listenToEscKeyDown, false)
      } else {
        modal.classList.add("hide")
        endFocusLooping(modal)
        document.removeEventListener("keydown", listenToEscKeyDown, false)
      }
    }

    modal.addEventListener("keydown", throttleFocus, false)
    openModalButton.addEventListener("click", toggleModal, false)
    closeModalButton.addEventListener("click", toggleModal, false)
  &lt;/script&gt;
&lt;/body&gt;
</pre>
<p><code>toggleModal()</code>函数通过使用类来切换模态的可见性，并实现我们的模态组件各自的监听器。</p>
<p>通过上面的实现，我们得到了下面的模态组件:</p>
<figure id="attachment_152080" aria-describedby="caption-attachment-152080" class="wp-caption aligncenter"><img data-attachment-id="152080" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/modal-component-visibility-toggle/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/modal-component-visibility-toggle.gif" data-orig-size="730,346" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="modal-component-visibility-toggle" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/modal-component-visibility-toggle-300x142.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/modal-component-visibility-toggle.gif" decoding="async" class="wp-image-152080 size-full jetpack-lazy-image" src="../Images/a8053871d4a9fb21aa0967451703a908.png" alt="Modal Component Visibility Toggle" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/modal-component-visibility-toggle.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/modal-component-visibility-toggle.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="152080" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/modal-component-visibility-toggle/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/modal-component-visibility-toggle.gif" data-orig-size="730,346" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="modal-component-visibility-toggle" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/modal-component-visibility-toggle-300x142.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/modal-component-visibility-toggle.gif" decoding="async" loading="lazy" class="wp-image-152080 size-full" src="../Images/a8053871d4a9fb21aa0967451703a908.png" alt="Modal Component Visibility Toggle" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/modal-component-visibility-toggle.gif"/></noscript><figcaption id="caption-attachment-152080" class="wp-caption-text">Implementing a modal using focus trapping</figcaption></figure>
<p>这种聚焦策略被称为聚焦陷阱。正如在上面的实现中所看到的，我们已经执行了所有必需的步骤，将焦点放在所有可能的导航类型的交互空间中，直到在该空间中完成了预期的任务。</p>
<h2 id="problems-focus-trapping-method">焦点补漏白方法的问题</h2>
<p>聚焦捕获法面临许多挑战；一个主要问题是处理网页可访问性，特别是在移动设备上。</p>
<p>这些设备上的辅助技术，如TalkBack和VoiceOver，通过双击和滑动事件提供帮助。在撰写本文的时候，我们还没有一个标准的方法来实现这些事件的逻辑，否则我们会用按键和点击来实现。</p>
<p>如果我们用移动对讲测试我们在前面的例子中实现的模型，我们最终得到如下结果:</p>
<figure id="attachment_152083" aria-describedby="caption-attachment-152083" class="wp-caption aligncenter"><img data-attachment-id="152083" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/focus-trap-issue-assistive-tech/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech.png" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="focus-trap-issue-assistive-tech" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech.png" decoding="async" class="wp-image-152083 size-full jetpack-lazy-image" src="../Images/10cd16d96f40898b2e203d0519e891c0.png" alt="Focus Trap Issue Assistive Tech" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech-300x169.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="152083" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/focus-trap-issue-assistive-tech/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech.png" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="focus-trap-issue-assistive-tech" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech.png" decoding="async" loading="lazy" class="wp-image-152083 size-full" src="../Images/10cd16d96f40898b2e203d0519e891c0.png" alt="Focus Trap Issue Assistive Tech" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech-300x169.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-issue-assistive-tech.png"/></noscript><figcaption id="caption-attachment-152083" class="wp-caption-text">Focus trap issue with assistive tech</figcaption></figure>
<p>正如我们在上面的演示中所看到的，导航焦点超出了我们的陷阱，到达了底层元素，实际上，当模态处于活动状态时，这些元素是不应该被访问的。</p>
<p>为了实现这一点，我们可以对辅助技术隐藏所有的元素，除了交互元素，模态元素。</p>
<p>我们可以通过添加<code>aria-hidden</code>属性并在除了焦点中的交互组件之外的所有元素上将它设置为<code>true</code>来做到这一点。这样做将通知屏幕阅读器，除了我们的组件，当前文档中的其他元素应该是禁止的:</p>
<pre class="language-html hljs">&lt;!-- ... page HTML ... --&gt;
&lt;script src="/trap-focus.js"&gt;&lt;/script&gt;
&lt;script&gt;
  let modal = document.getElementById("registration-modal")
  let closeModalButton = document.querySelector(".close-modal")
  let openModalButton = document.querySelector(".open-modal")

  function toggleAriaHidden(allElements, exception, apply = true){
    for(const el of allElements){
      if(el.tagName !== "script" &amp;&amp; el !== exception)
        if(apply){
          el.setAttribute("aria-hidden", "true")
        } else {
          el.removeAttribute("aria-hidden")
        }
    }
  }

  function toggleModal() {
    if(modal.classList.contains("hide")){
      modal.classList.remove("hide")
      initiateFocusLooping(modal)
      document.addEventListener("keydown", listenToEscKeyDown, false)
    } else {
      modal.classList.add("hide")
      endFocusLooping(modal)
      document.removeEventListener("keydown", listenToEscKeyDown, false)
    }
    toggleAriaHidden(document.querySelector("body").children, modal, false)
  }

  modal.addEventListener("keydown", throttleFocus, false)
  openModalButton.addEventListener("click", toggleModal, false)
  closeModalButton.addEventListener("click", toggleModal, false)
&lt;/script&gt;
</pre>
<p>上面代码中的<code>toggleAriaHidden()</code>函数有助于将<code>aria-hidden</code>添加到所有不可访问的元素中:</p>
<figure id="attachment_152087" aria-describedby="caption-attachment-152087" class="wp-caption aligncenter"><img data-attachment-id="152087" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/focus-trap-aria-hidden/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden.png" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="focus-trap-aria-hidden" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden.png" decoding="async" class="wp-image-152087 size-full jetpack-lazy-image" src="../Images/f7cf501771f41446100255d0049ca17b.png" alt="Focus Trap Aria Hidden" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden-300x169.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="152087" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/focus-trap-aria-hidden/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden.png" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="focus-trap-aria-hidden" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden-300x169.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden.png" decoding="async" loading="lazy" class="wp-image-152087 size-full" src="../Images/f7cf501771f41446100255d0049ca17b.png" alt="Focus Trap Aria Hidden" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden-300x169.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/focus-trap-aria-hidden.png"/></noscript><figcaption id="caption-attachment-152087" class="wp-caption-text">Focus trap assistive tech issue fix with aria-hidden</figcaption></figure>
<p>在上面的演示中，我们可以看到在应用了<code>aria-hidden</code>之后，焦点导航并没有泄漏到底层元素中。然而，这种方法的问题在于，当页面中存在大量元素时，它不仅效率低下，而且不切实际。</p>
<p>为了克服这一点，我们可以利用<code>aria-hidden</code>特性，在应用它的容器元素下的所有子元素都变得不可访问。然而，这需要对HTML文档进行布局，使得页面层次结构中较高的元素不能被<code>aria-hidden</code>访问，同时仍然保持页面中的正常行为。</p>
<p>这样做的话，我们的交互元素不能是使用<code>aria-hidden</code>不可访问的元素的子元素。因此，我们可以减少应用于DOM的操作数量。</p>
<p>我们面临的焦点捕捉的另一个问题是模态的情况。我们需要在交互组件和页面的其余部分之间添加固定位置的包装容器和覆盖层。否则，当交互组件处于焦点时，我们可以将这些包装容器放在页面暂时不可访问的部分之上。</p>
<p>我们需要包装器作为所有鼠标事件的缓冲区或陷阱，否则这些事件会出现在不可访问的区域。通过观察上一个例子中的<code>.modal-overlay</code>容器，您可以在实践中看到这个实现。</p>
<h2 id="inert-focus-guard">如何<code>inert</code>充当焦点护卫</h2>
<p>属性将对交互空间的关注从一个陷阱转移到更像守卫的活动。通过使暂时不需要的页面区域不可访问，而不是将用户困在特定的区域，它将所有焦点相关的活动留给交互空间本身。</p>
<p>它的实现类似于我们在使用JavaScript <code>alert()</code>函数时看到的。当<code>inert</code>被添加到一个元素中时，那部分标记被冻结或保护。鼠标和键盘的可能交互(如点击和焦点改变尝试)变得不可用。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p>通过实现以交互空间为中心的逻辑，开发人员的工作变得简单了，而不必在意页面的其他标记及其行为。</p>
<p><code>inert</code>也是可访问性的同义词，意思是，不仅它所应用的元素对于视觉交互变得不可访问，而且对于移动设备中的辅助技术也是不可访问的。</p>
<p>在我们上面的例子中，使用<code>inert</code>将大大减少用于实现模态的代码量。</p>
<p>当使用<code>inert</code>属性时，最好实现屏幕非活动区域的可视化指示，而不是活动区域。我们需要实现它，因为属性本身并不处理它，正如我们对像<code>&lt;dialog&gt;</code>和它的<code>::backdrop</code>伪类这样的元素所期望的那样。让惰性区域变得明显是很重要的，这样网页应用程序的用户就能知道网页上发生了什么。否则，他们可能会感到沮丧。</p>
<p>我们可以如下设计包含<code>inert</code>属性的元素:</p>
<pre class="language-html hljs">[inert]{
  filter: grayscale(1);
  opacity: .2;
}
</pre>
<p>使用<code>inert</code>，前面的例子看起来如下:</p>
<pre class="language-html hljs">&lt;style&gt;
  /* Remove .modal-overlay from styles, leaving .modal and .hide classes  */
&lt;/style&gt;

&lt;body&gt;
  &lt;main&gt;    
    &lt;h1&gt;Replacing Legacy Focus Trapping with `inert`&lt;/h1&gt;
    &lt;div&gt;
      &lt;p&gt;
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Phasellus vestibulum lorem sed risus.
      &lt;/p&gt;
      &lt;button class="open-modal"&gt;Register&lt;/button&gt;
    &lt;/div&gt;
  &lt;/main&gt;
  &lt;!-- Removed modal overlay container --&gt;
  &lt;div class="modal hide"&gt;
    &lt;h2&gt;Registration&lt;/h2&gt;
    &lt;p&gt;Hello there, you can't focus outside my boundaries! :-)&lt;p&gt;
    &lt;form action=""&gt;
      &lt;div&gt;
        &lt;input type="text" name="name" placeholder="Thunder Storm"&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;input type="email" name="email" placeholder="<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a9ccd1c8c4d9c5cce9c4c8c0c587cac6c4">[email protected]</a>"&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;input type="password" name="password"&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;legend&gt;
          Pet of choice:
        &lt;/legend&gt;
        &lt;label&gt;
          &lt;input type="radio" value="cat" name="pet"&gt; Cat
        &lt;/label&gt;
        &lt;label&gt;
          &lt;input type="radio"  value="dog" name="pet"&gt; Dog
        &lt;/label&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;label for="terms"&gt;
          &lt;input type="checkbox"&gt; Agree to &lt;a href="#terms"&gt;terms&lt;/a&gt;
        &lt;/label&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;button&gt;Save&lt;/button&gt;
        &lt;button type="button" class="close-modal"&gt;Discard&lt;/button&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
  &lt;script src="/trap-focus.js"&gt;&lt;/script&gt;
  &lt;script&gt;
    let modal = document.querySelector("modal")
    let closeModalButton = document.querySelector(".close-modal")
    let openModalButton = document.querySelector(".open-modal")
    let otherPageElements = document.querySelector("main")

    // Remove toggleAriaHidden() function

    function toggleModal() {
      if(modal.classList.contains("hide")){
        modal.classList.remove("hide")
        initiateFocusLooping(modal)
        document.addEventListener("keydown", listenToEscKeyDown, false)
        otherPageElements.toggleAttribute("inert")
      } else {
        modal.classList.add("hide")
        endFocusLooping(modal)
        document.removeEventListener("keydown", listenToEscKeyDown, false)
        otherPageElements.toggleAttribute("inert")
      }
    }

    modal.addEventListener("keydown", throttleFocus, false)
    openModalButton.addEventListener("click", toggleModal, false)
    closeModalButton.addEventListener("click", toggleModal, false)
  &lt;/script&gt;
&lt;/body&gt;
</pre>
<h2 id="potential-use-cases-inert"><code>inert</code>的潜在使用案例</h2>
<p><code>inert</code>在为网站和网络应用程序实现大量基于交互空间的组件时会很有用。让我们看几个这些组件的例子。</p>
<h3 id="custom-confirm-boxes">自定义确认框</h3>
<p>我们可以使用<code>inert</code>来实现定制的确认框，以适应我们构建的应用程序的模式，去掉默认的特定于浏览器的定制框。</p>
<p>这种类型的实现不仅为我们提供了样式化确认框或模态的能力，还提供了放置任何可能数量的选项的能力，除了JavaScript的<code>confirm()</code>提供的两个默认选项。</p>
<p>下面是一个使用<code>inert</code>的确认框的例子:</p>
<pre class="language-html hljs">&lt;style&gt;
  /* Custom styles */
&lt;/style&gt;
&lt;body&gt;
  &lt;main&gt;
    &lt;h1 tabindex="0"&gt;Simple confirm box with `inert`&lt;/h1&gt;
    &lt;div&gt;
      &lt;textarea name="" id="" cols="30" rows="10"&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Phasellus vestibulum lorem sed risus.&lt;/textarea&gt;
    &lt;/div&gt;
    &lt;div&gt;
      &lt;button class="delete-prompt"&gt;Delete Comment&lt;/button&gt;
    &lt;/div&gt;
  &lt;/main&gt;

  &lt;div class="confirm hide" role="dialog"&gt;
    &lt;p&gt;Are you sure about deleting this text?&lt;p&gt;
    &lt;button class="keep-text"&gt;Continue writing&lt;/button&gt;
    &lt;button class="delete-text"&gt;Yes&lt;/button&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;script src="/js/trap-focus.js"&gt;&lt;/script&gt;
&lt;script&gt;
  let confirmBox = document.querySelector(".confirm"),
    agreeBtn = document.querySelector(".delete-text"),
    disagreeBtn = document.querySelector(".keep-text"),
    deletionConfirmationBtn = document.querySelector(".delete-prompt"),
    mainElement = document.querySelector("main"),
    textArea = document.querySelector("textarea")

  deletionConfirmationBtn.addEventListener("click", toggleModal, false)
  disagreeBtn.addEventListener("click", toggleModal, false)
  agreeBtn.addEventListener("click", function(){
    toggleModal();
    textArea.innerText = ""
  }, false)

  function toggleModal() {
    mainElement.toggleAttribute("inert")
    if(confirmBox.classList.contains("hide")){
      confirmBox.classList.remove("hide")
      confirmBox.setAttribute("aria-modal", "true")
      initiateFocusLooping(confirmBox)
      document.addEventListener("keydown", listenToEscKeyDown, false)
    } else {
      confirmBox.classList.add("hide")
      confirmBox.removeAttribute("aria-modal")
      endFocusLooping(confirmBox)
      document.removeEventListener("keydown", listenToEscKeyDown, false)
    }
  }
&lt;/script&gt;
</pre>
<p>下面是我们的确认框的运行演示:</p>
<figure id="attachment_152103" aria-describedby="caption-attachment-152103" class="wp-caption aligncenter"><img data-attachment-id="152103" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/confirm-box-demonstration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/confirm-box-demonstration.gif" data-orig-size="730,343" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="confirm-box-demonstration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/confirm-box-demonstration-300x141.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/confirm-box-demonstration.gif" decoding="async" class="wp-image-152103 size-full jetpack-lazy-image" src="../Images/0eba39de85c4c118aecb3370dab57d0c.png" alt="Confirm Box Demonstration" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/confirm-box-demonstration.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/confirm-box-demonstration.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="152103" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/confirm-box-demonstration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/confirm-box-demonstration.gif" data-orig-size="730,343" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="confirm-box-demonstration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/confirm-box-demonstration-300x141.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/confirm-box-demonstration.gif" decoding="async" loading="lazy" class="wp-image-152103 size-full" src="../Images/0eba39de85c4c118aecb3370dab57d0c.png" alt="Confirm Box Demonstration" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/confirm-box-demonstration.gif"/></noscript><figcaption id="caption-attachment-152103" class="wp-caption-text">A custom confirm box</figcaption></figure>
<h3 id="authentication-forms">认证表格</h3>
<p>对于像提示、重要通知和强制身份验证表单这样的模态组件，使用<code>inert</code>是合适的。使用<code>inert</code>，我们可以轻松地将用户引导到交互元素，而不用担心可访问性；<code>inert</code>也得到辅助技术的认可和支持。</p>
<p>主要社交媒体web应用的流行趋势之一是条件身份验证表单。通过这些表单，对未经身份验证的用户可以查看的提要数量进行了限制。在浏览了一定量的内容后，未经身份验证的访问者会被提示注册并登录，同时被禁止在活动页面上导航。</p>
<p>让我们看看如何在使用<code>inert</code>的同时实现这样的表单:</p>
<pre class="language-html hljs">&lt;style&gt;
  /* [inert], main, form, .feed, .feed-item, main, .feed-item, .target-item, .authentication-form, .hide */
&lt;/style&gt;
&lt;body&gt;
  &lt;main&gt;
    &lt;div class="feed"&gt;
      &lt;div class="feed-item"&gt;
        &lt;p&gt;
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Phasellus vestibulum lorem sed risus.
        &lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/main&gt;
  &lt;div class="authentication-form hide" role="dialog"&gt;
    &lt;h2 aria-label="Authentication Form"&gt;Super Login&lt;/h2&gt;
    &lt;p&gt;Hello there, to keep enjoying our feed, please sign in! :-)&lt;p&gt;
    &lt;form action=""&gt;
      &lt;input type="text" name="email" placeholder="email"&gt;
      &lt;input type="password" name="password" placeholder="password"&gt;
      &lt;div&gt;
        &lt;button class="close-modal"&gt;Sign In&lt;/button&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;script src="/js/trap-focus.js"&gt;
&lt;/script&gt;
&lt;script&gt;
  let loginModal = document.querySelector(".authentication-form"),
    feed = document.querySelector(".feed"),
    feedSample = document.querySelector(".feed-item"),
    targetElement, feedGuarded = false;

  // populate feed
  for(let i = 1; i &lt; 20; i++){
    let newFeedNode = feedSample.cloneNode(true)
    newFeedNode.classList.add(i)
    if(i === 10) { // make the tenth post our target item
      newFeedNode.classList.add("target-item")
      targetElement = newFeedNode
    }
    feed.appendChild(newFeedNode)
  }

  function monitorFeed(){
    if(targetElement.getBoundingClientRect().top &lt;= 100){
      guardFeed()
    }
  }
  document.addEventListener("scroll", monitorFeed, false)

  function guardFeed() {
    if(!feedGuarded){
      feed.toggleAttribute("inert")
      loginModal.classList.remove("hide")
      initiateFocusLooping(loginModal)
      feedGuarded = true
      // limit scrolling
      window.onscroll = function(){
        window.scrollTo(
          window.scrollY || document.documentElement.scrollTop,
          window.scrollX || document.documentElement.scrollLeft
        )
      }
      // stop scroll event listening
      document.removeEventListener("scroll", monitorFeed, false)
    }
  }
&lt;/script&gt;
</pre>
<p>下面是验证表单的运行演示。</p>
<p><img data-attachment-id="152128" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/conditional-form-validation-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/conditional-form-validation-demo.gif" data-orig-size="730,652" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="conditional-form-validation-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/conditional-form-validation-demo-300x268.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/conditional-form-validation-demo.gif" decoding="async" class="aligncenter wp-image-152128 size-full jetpack-lazy-image" src="../Images/07023bf33714c663723e28b1f99bdc3f.png" alt="Conditional Form Validation Demo" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/conditional-form-validation-demo.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/conditional-form-validation-demo.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="152128" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/conditional-form-validation-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/conditional-form-validation-demo.gif" data-orig-size="730,652" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="conditional-form-validation-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/conditional-form-validation-demo-300x268.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/conditional-form-validation-demo.gif" decoding="async" loading="lazy" class="aligncenter wp-image-152128 size-full" src="../Images/07023bf33714c663723e28b1f99bdc3f.png" alt="Conditional Form Validation Demo" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/conditional-form-validation-demo.gif"/></noscript>

<p>对于滑出式导航菜单，我们希望用户的注意力在导航元素上，避免鼠标点击和键盘导航。在这样的场景下，我们可以用<code>inert</code>来引导用户。</p>
<p>让我们看一个工作示例:</p>
<pre class="language-html hljs">&lt;body&gt;
  &lt;input type="checkbox" class="nav-hum" id="nav-hum"&gt;
  &lt;label for="nav-hum" tabindex="0"&gt;&lt;/label&gt;

  &lt;nav class="navigation" aria-label="Main"&gt;
    &lt;h3&gt;Slide-out Nav&lt;/h3&gt;
    &lt;ul&gt;
      &lt;li&gt;
        &lt;a class="side-nav" href="example-1.html"&gt;Example 1&lt;/a&gt;
      &lt;/li&gt;
      &lt;!-- More links --&gt;
      &lt;li&gt;
        &lt;a class="side-nav" href="example-5.html"&gt;Example 7&lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/nav&gt;

  &lt;main class="page-content"&gt;
    &lt;h1&gt;Slide-out side navigation menu&lt;/h1&gt;
    &lt;p tabindex="0"&gt;
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Phasellus vestibulum lorem sed risus.
    &lt;/p&gt;

    &lt;!-- more items --&gt;
  &lt;/main&gt;
&lt;/body&gt;

&lt;script&gt;
  let navBtn = document.querySelector("#nav-hum")
  let pageContents = document.querySelector("main")

  navBtn.addEventListener("change", (el) =&gt; {
    pageContents.toggleAttribute("inert")
  })
&lt;/script&gt;
</pre>
<p>本例中涉及显示和隐藏滑出菜单的大部分逻辑都是在CSS样式表中实现的:</p>
<pre class="language-css hljs">.page-content{
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  z-index: 1;
  margin: 0;
  display: flex;
  height: 100%;
  flex-direction: column;
  background-color: white;
}
.page-content &gt; *{
  width: 100%;
}
nav.navigation{
  position: fixed;
  display: flex;
  flex-direction: column;
  justify-content: start;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  z-index: 0;
  margin: auto;
  padding: 1rem;
  padding-top: 1.5rem;
  background-color: bisque;
}
.navigation &gt; ul{
  list-style: none;
}
.navigation &gt; ul &gt; li{
  margin-top: 1rem;
}
.nav-hum {
  position: absolute;
  clip: rect(0, 0, 0, 0);
}
label[for="nav-hum"] {
  position: fixed;
  top: 1rem;
  left: 1rem;
  z-index: 2;
  width: 30px;
  height: 30px;
  cursor: pointer;
  background-image: url("data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'&gt;&lt;path fill='none' d='M0 0H24V24H0z'/&gt;&lt;path d='M21 18v2H3v-2h18zM17.404 3.904L22 8.5l-4.596 4.596-1.414-1.414L19.172 8.5 15.99 5.318l1.414-1.414zM12 11v2H3v-2h9zm0-7v2H3V4h9z'/&gt;&lt;/svg&gt;");
  background-size: contain;
}
.nav-hum:checked + label {
  left: 215px;
  background-image: url("data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'&gt;&lt;path fill='none' d='M0 0H24V24H0z'/&gt;&lt;path d='M21 18v2H3v-2h18zM6.596 3.904L8.01 5.318 4.828 8.5l3.182 3.182-1.414 1.414L2 8.5l4.596-4.596zM21 11v2h-9v-2h9zm0-7v2h-9V4h9z'/&gt;&lt;/svg&gt;");
}
.nav-hum:checked ~ .page-content {
  box-shadow: inset -1px 0 3px 0px rgba(0,0,0,0.5);
  transform: translate(200px);
  overflow: hidden;
}
</pre>
<p>将两者放在一起，我们得到以下输出:</p>
<p><img data-attachment-id="152095" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/gil-six/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/gil-six.gif" data-orig-size="730,657" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="slide-out-navigation-menu" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/gil-six-300x270.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/gil-six.gif" decoding="async" class="aligncenter wp-image-152095 size-full jetpack-lazy-image" src="../Images/3a851a0e77d49ab1ed4deca0ec789edd.png" alt="Slide Out Navigation Menu" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/gil-six.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/gil-six.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="152095" data-permalink="https://blog.logrocket.com/using-html-inert-property-manage-user-focus/attachment/gil-six/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/gil-six.gif" data-orig-size="730,657" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="slide-out-navigation-menu" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/gil-six-300x270.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/gil-six.gif" decoding="async" loading="lazy" class="aligncenter wp-image-152095 size-full" src="../Images/3a851a0e77d49ab1ed4deca0ec789edd.png" alt="Slide Out Navigation Menu" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/gil-six.gif"/></noscript>
<h2 id="browser-compatibility">浏览器兼容性</h2>
<p>在撰写本文时，HTML <code>inert</code>功能已经兼容了除Firefox之外的所有最新版本的主流浏览器，包括移动和桌面。请随时查看兼容性图表以了解更多信息。</p>
<h3 id="using-inert-compatible-browsers">在不兼容的浏览器中使用<code>inert</code></h3>
<p>考虑新特性可能不被支持的情况，并努力使它们得到尽可能广泛的支持，尤其是在web上工作时，这是一个很好的做法。</p>
<p>为了确保我们的网络应用在使用<code>inert</code>时不会中断或出现故障，不兼容的浏览器可能会出现这种情况，我们应该使用<a href="https://github.com/WICG/inert">这是polyfill </a>。</p>
<p>从安装npm模块开始:</p>
<pre class="language-bash hljs">npm install --save wicg-inert
</pre>
<p>将聚合填充导入到项目中:</p>
<pre class="language-html hljs">import "wicg-inert"
</pre>
<p>将脚本添加到HTML页面:</p>
<pre class="language-html hljs">&lt;html&gt;
  ...
  &lt;script src="/node_modules/wicg-inert/dist/inert.min.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>对于遗留浏览器，您必须为<code>Map</code>、<code>Set</code>、<code>Element.prototype.matches</code>和<code>Node.prototype.contains</code>包含额外的polyfills。为了避免提供不必要的聚合填充并符合W3C聚合填充指南，<code>inert</code>聚合填充不捆绑所有其他聚合填充。</p>
<h2 id="summary">摘要</h2>
<p>在本文中，我们学习了<code>inert</code> HTML属性，探索了如何在实现交互式空间组件(如模态)时使用它，同时以比陷阱更具指导性的方式管理用户焦点活动。</p>
<p>我们已经看到了如何使用<code>inert</code>的实际例子，并了解了它在当前主流浏览器列表中的支持。我们还回顾了使用<code>inert</code>时的一些最佳实践，比如添加HTML页面惰性区域的可视指示，以及添加对不兼容浏览器的支持。</p>
<p>有关<code>inert</code>属性的更多信息，它的初始、指导方针和进展，您可以查看以下参考资料:</p>

<p> </p><div class="code-block code-block-4">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>