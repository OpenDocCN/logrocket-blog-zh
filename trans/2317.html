<html>
<head>
<title>Build your own component library with Svelte - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用 Svelte - LogRocket 博客构建自己的组件库</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-your-own-component-library-svelte/#0001-01-01">https://blog.logrocket.com/build-your-own-component-library-svelte/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<p>Svelte 是一个用于构建 web 应用程序的开源 JavaScript 组件框架。Svelte 采用了一种不同于 React、Angular 和 Vue 等现有 web 框架的方法，这些框架遵循声明性的、状态驱动的代码。</p>
<p>Svelte 包的大小比大多数框架小得多，因为它没有任何依赖关系(在<code>package.js</code>文件中只有 dev 依赖关系)。由于这些特性，Svelte 已经成为 2021 年最受欢迎、最令人畏惧和最受欢迎的 web 框架。</p>
<p>由于这种流行，开发人员已经引入了几个令人敬畏的 UI 组件框架/库，如<a href="https://sveltematerialui.com/" target="_blank" rel="noopener">苗条材质 UI </a>、<a href="https://smeltejs.com/" target="_blank" rel="noopener">冶炼</a>、<a href="https://svelte-materialify.vercel.app/" target="_blank" rel="noopener">苗条材质化</a>和<a href="https://sveltestrap.js.org/" target="_blank" rel="noopener">苗条带</a>。</p>
<p>但是构建自己的苗条组件库会是什么样的呢？幸运的是，你可以从几个模板开始，比如 svelete 提供的官方<a href="https://github.com/sveltejs/component-template" target="_blank" rel="noopener">模板和</a><a href="https://github.com/YogliB/svelte-component-template" target="_blank" rel="noopener">svelete 3 组件模板</a>，它们被认为是构建你自己的组件库的必备工具。</p>
<p>然而，这些模板非常固执己见，您可能看不到构建组件库本身所需的底层工具和技术。在这篇文章中，我们将学习如何使用 Svelte 的新 SvelteKit 自己构建一个组件库。</p>
<h2>什么是 SvelteKit？</h2>
<p>SvelteKit 可以被认为是 Svelte 的<a href="https://sapper.svelte.dev/" target="_blank" rel="noopener"> Sapper </a>或 NextJS 的继承者。它包含了大量很酷的特性，比如服务器端渲染、路由和代码分割。</p>
<p id="sveltekitusesvitehttpsvitejsdevunderthehoodwhichisquitesurprisingassapperandmosttoolsaredevelopedusingsnowpackhttpswwwsnowpackdevvite2isframeworkagnosticanddesignedwithssratitscore">SvelteKit 在引擎盖下使用<a href="https://vitejs.dev/" target="_blank" rel="noopener"> Vite </a>，这很令人惊讶，因为 Sapper 和大多数工具都是使用<a href="https://www.snowpack.dev/" target="_blank" rel="noopener"> Snowpack </a>开发的。Vite 2 是框架无关的，并且以 SSR 为核心进行设计。</p>
<p id="sveltekitisstillinbetabutitsverystableandtherearemanyprojectsinproductionusingthisframework">SvelteKit 仍处于测试阶段，但它非常稳定，并且有许多项目正在使用该框架。</p>
<h2>开始使用 SvelteKit</h2>
<p>对于这个项目，我们将使用一个框架项目作为我们库的基础。</p>
<p>让我们使用 SvelteKit 初始化项目。您将需要执行以下命令并选择 Svelte 给出的选项:</p>
<p><img data-attachment-id="74762" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/initializing-sveltekit/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit.png" data-orig-size="730,221" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Initializing-sveltekit" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit-300x91.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit.png" decoding="async" class="size-full wp-image-74762 aligncenter jetpack-lazy-image" src="../Images/7506a7beec1fe446690f0a897f718b52.png" alt="Initializing sveltekit" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit-300x91.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74762" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/initializing-sveltekit/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit.png" data-orig-size="730,221" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Initializing-sveltekit" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit-300x91.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit.png" decoding="async" loading="lazy" class="size-full wp-image-74762 aligncenter" src="../Images/7506a7beec1fe446690f0a897f718b52.png" alt="Initializing sveltekit" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit-300x91.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Initializing-sveltekit.png"/></noscript>
<h2>集成故事书</h2>
<p>是时候集成 Storybook 了，story book 是一个用于孤立地构建 UI 组件和页面的开源工具。它简化了 UI 开发和测试，这对于我们的组件库开发来说是理想的。它允许我们构建组件，而不用担心 SvelteKit 中的配置或开发服务器。</p>
<p>在您的 SvelteKit 项目根目录中，执行以下命令。这将确定并生成苗条身材所需的配置:</p>
<pre class="language-shell hljs">npx sb init</pre>
<p>在用一个 SvelteKit 项目设置 Storybook 时，你可能会遇到一些问题。Storybook 会在你启动服务器时抛出一个错误，像这样:</p>
<p><img data-attachment-id="74766" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/storybook-error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error.png" data-orig-size="730,121" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="storybook-error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error-300x50.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error.png" decoding="async" class="size-full wp-image-74766 aligncenter jetpack-lazy-image" src="../Images/dc767a64601912794466bb81453f922f.png" alt="storybook error" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error-300x50.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74766" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/storybook-error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error.png" data-orig-size="730,121" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="storybook-error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error-300x50.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error.png" decoding="async" loading="lazy" class="size-full wp-image-74766 aligncenter" src="../Images/dc767a64601912794466bb81453f922f.png" alt="storybook error" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error-300x50.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-error.png"/></noscript>
<p>这个问题是由于<code>package.json</code>文件下的<code>“type”:”module”</code>的属性引起的，这意味着我们不能使用 ESM 要求的语法。</p>
<p>为了克服这一点，您可以在 Storybook 配置文件中做一个小小的调整。只需将你的细长故事书配置文件的扩展名从<code>.js</code>更改为<code>.jcs</code>，并且在<code>main.cjs</code>文件中，确保你注释掉了由<code>require</code>命令组成的<code>svelteOptions</code>属性。</p>
<p><img data-attachment-id="74770" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/storybook-configuration-files/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files.png" data-orig-size="378,694" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="storybook-configuration-files" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files-163x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files.png" decoding="async" class="size-full wp-image-74770 aligncenter jetpack-lazy-image" src="../Images/bd738b1624eaaa6d7d68a0dce00ef4b1.png" alt="Storybook configuration files" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files.png 378w, https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files-163x300.png 163w" data-lazy-sizes="(max-width: 378px) 100vw, 378px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74770" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/storybook-configuration-files/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files.png" data-orig-size="378,694" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="storybook-configuration-files" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files-163x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files.png" decoding="async" loading="lazy" class="size-full wp-image-74770 aligncenter" src="../Images/bd738b1624eaaa6d7d68a0dce00ef4b1.png" alt="Storybook configuration files" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files.png 378w, https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files-163x300.png 163w" sizes="(max-width: 378px) 100vw, 378px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/storybook-configuration-files.png"/></noscript>
<p>完成上述调整后，您可以运行下面的命令来启动 Storybook 服务器:</p>
<pre class="language-shell hljs">npm run storybook</pre>
<p>该命令将在浏览器中打开一个新的选项卡，为我们的 SvelteKit 项目加载 Storybook 应用程序。</p>
<p><img data-attachment-id="74772" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/storybook-welcome-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page.png" data-orig-size="730,375" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Storybook-welcome-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page-300x154.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page.png" decoding="async" class="size-full wp-image-74772 aligncenter jetpack-lazy-image" src="../Images/0a4b6491febeee95859675dcd6412c71.png" alt="Storybook welcome page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page-300x154.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74772" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/storybook-welcome-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page.png" data-orig-size="730,375" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Storybook-welcome-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page-300x154.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page.png" decoding="async" loading="lazy" class="size-full wp-image-74772 aligncenter" src="../Images/0a4b6491febeee95859675dcd6412c71.png" alt="Storybook welcome page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page-300x154.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-welcome-page.png"/></noscript>
<h2>构建组件之前要考虑的因素</h2>
<p>在构建组件之前，请考虑以下因素，因为它们将帮助我们遵循正确的准则。</p>
<h3>道具用法</h3>
<p>“props”这个词在所有主流框架和库(如 Vue 和 React)中都很常见。Props 将数据传递给子组件或启用组件通信。</p>
<h3 id="slotsandddslotsusage">插槽和<code>$$slots</code>用法</h3>
<p>即使 props 允许你通过传递数据来重用组件，但这会带来严格的父子关系。这意味着它的 HTML 内容将始终控制子组件，而父组件只能传递不同的值，因此组件不能与道具组合在一起。</p>
<p>这就是老虎机派上用场的地方。插槽保持可重用性，同时允许父组件控制子组件的内容，包括其中的 HTML 元素。通过添加<code>&lt;slots/&gt;</code>标签，您可以从父代传递 HTML 或 markdown，而不仅仅是值。</p>
<h3>避免嵌套和全局 CSS</h3>
<p>构建组件时，避免嵌套和全局 CSS，因为它们不会被限定范围，这意味着它们会泄漏到所有子组件。</p>
<h3>处理事件</h3>
<p>构建组件时，确保添加或处理适当的事件。你将不得不使用一个叫做<code>createEventDispatcher</code>的轻量级 API，这在调度事件时会很有用。</p>
<h2>创建组件</h2>
<p>让我们为我们的库创建一些组件。首先删除 Storybook 生成的默认<code>story</code>文件夹，在<code>src</code>目录下创建一个<code>stories</code>文件。</p>
<p>接下来，我们将关注项目结构。在<code>src</code>目录下创建一个名为<code>lib</code>的目录。这个<code>lib</code>目录是 SvelteKit 的一个特殊目录，因为它允许我们使用一个叫做<code><a href="https://kit.svelte.dev/docs#modules-%24lib" target="_blank" rel="noopener">$lib</a></code>的特殊符号。<code>$lib</code>可以用作<code>src</code> / <code>lib</code>目录的别名，帮助我们在不使用<code>../../../../ .</code>等相对路径的情况下访问组件和实用模块</p>
<h3 id="buttoncomponent">按钮组件</h3>
<p>现在让我们在名为<code>Button.svelte</code>的<code>lib</code>目录下创建我们的按钮组件:</p>
<pre class="language-svelte hljs">&lt;script&gt;
  import { createEventDispatcher } from 'svelte';

  export let primary = false;
  export let size = 'medium';
  export let label = '';

  const dispatch = createEventDispatcher();
   /**
   * Button click handler
   */
   function onClick(event) {
    dispatch('click', event);
  }
&lt;/script&gt;

&lt;button
  type="button"
  class={['sveltio-button', `sveltio-button--${size}`,
   `sveltio-button--${primary?'primary':'secondary'}`].join(' ')
   }
  on:click={onClick}&gt;
  {label}
&lt;/button&gt;

&lt;style&gt;
.sveltio-button {
    font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-weight: 700;
    border: 0;
    border-radius: 3px;
    cursor: pointer;
    display: inline-block;
    line-height: 1;
}
.sveltio-button--primary {
    color: #1b116e;
    background-color: #6bedb5;
}
.sveltio-button--secondary {
    color: #ffffff;
    background-color: #1b116e;
    box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset;
}
.sveltio-button--small {
    font-size: 12px;
    padding: 10px 16px;
}
.sveltio-button--medium {
    font-size: 14px;
    padding: 11px 20px;
}
.sveltio-button--large {
    font-size: 16px;
    padding: 12px 24px;
}

.sveltio-button--primary :hover {
    color: #1b116e;
    background-color: #55bd90;
}

.sveltio-button--primary :active {
    color: #1b116e;
    background-color: #55bd90;
    border: solid 2px #1b116e;
}

.sveltio-button--primary :disabled {
    color: #1b116e;
    opacity: 0.5;
    background-color: #6bedb5;
}

.sveltio-button--secondary :hover {
    color: #1b116e;
    background-color: #55bd90;
}

.sveltio-button--secondary :active {
    color: #1b116e;
    background-color: #6bedb5;
    border: solid 2px #1b116e;
}

.sveltio-button--secondary :disabled {
    color: #ffffff;
    opacity: 0.5;
    background-color: #1b116e;
}

&lt;/style&gt;
</pre>
<p>注意，我们已经在同一个文件中的<code>&lt;style&gt;</code>标签下添加了样式。</p>
<p>现在让我们为名为<code>Button.stories.svelte</code>的按钮组件创建一个故事文件:</p>
<pre class="language-svelte hljs">  &lt;script&gt;
    import { Meta, Template, Story } from "@storybook/addon-svelte-csf";
    import Button from "./Button.svelte";
  &lt;/script&gt;


  &lt;Meta
    title="Sveltio/Button"
    component={Button}
    argTypes={{
      label: { control: "text" },
      primary: { control: "boolean" },
      backgroundColor: { control: "color" },
      size: {
        control: { type: "select", options: ["small", "medium", "large"] },
      },
      onClick: { action: "onClick" },
    }}
  /&gt;


  &lt;Template let:args&gt;
    &lt;Button {...args} on:click={args.onClick} /&gt;
  &lt;/Template&gt;


  &lt;Story
    name="Primary"
    args={{
      primary: true,
      label: "Button",
    }}
  /&gt;


  &lt;Story
    name="Secondary"
    args={{
      label: "Button",
    }}
  /&gt;
  &lt;Story
    name="Large"
    args={{
      size: "large",
      label: "Button",
    }}
  /&gt;


  &lt;Story
    name="Small"
    args={{
      size: "small",
      label: "Button",
    }}
  /&gt;


</pre>
<p>请注意，我们已经通过向模板传递几个参数为按钮组件创建了几个模板。</p>
<p>现在，在故事书窗口中，您将能够看到一个按钮。</p>
<p><img data-attachment-id="74782" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/storybook-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button.png" data-orig-size="730,488" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Storybook-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button-300x201.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button.png" decoding="async" class="size-full wp-image-74782 aligncenter jetpack-lazy-image" src="../Images/0ac52399a62a5753fd2c446125c46d3d.png" alt="Storybook button" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button-300x201.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74782" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/storybook-button/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button.png" data-orig-size="730,488" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Storybook-button" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button-300x201.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button.png" decoding="async" loading="lazy" class="size-full wp-image-74782 aligncenter" src="../Images/0ac52399a62a5753fd2c446125c46d3d.png" alt="Storybook button" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button-300x201.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-button.png"/></noscript>
<p>您可以从下面提供的控制器中从<strong>主</strong>按钮切换到<strong>副</strong>按钮。您还可以从<strong>动作</strong>日志中清楚地查看该定制组件可用的事件类型。</p>
<h3>切换组件</h3>
<p>现在让我们创建一个切换组件。首先创建<code>Toggle.svelte</code>和<code>Toggle.stories.svelte</code>文件:</p>
<p><code>Toggle.svelte</code>:</p>
<pre class="language-svelte hljs">&lt;script&gt;
    export let label = '';
    export let isToggled = false;
    export let style = '';
&lt;/script&gt;

&lt;label {style} class="sveltio-toggle-label"&gt;
    &lt;input type="checkbox" class="sveltio-input" bind:checked={isToggled} /&gt;
    &lt;div class="sveltio-toggle" /&gt;
    {label}
&lt;/label&gt;

&lt;style&gt;
    .sveltio-toggle-label {
    --width: 40px;
    --height: calc(var(--width) / 2);
    --radius: calc(var(--height) / 2);
    display: flex;
}

.sveltio-toggle {
    position: relative;
    width: var(--width);
    height: var(--height);
    border-radius: var(--radius);
    border: solid 1px #c2c2c3;
    transition: background-color 0.3s ease;
    margin-right: 5px;
    background-color: var(--toggleBackgroundColor, #c2c2c3);
}

.sveltio-toggle::after {
    content: '';
    position: absolute;
    top: -1px;
    left: -1px;
    height: var(--height);
    width: var(--height);
    border-radius: var(--radius);
    background-color: var(--toggleButtonColor, #ffffff);
    box-shadow: 2px 4px 6px rgba(0, 0, 0, 0.3);
    transition: transform 0.3s ease;
}
.sveltio-input {
    display: none;
}

.sveltio-input:checked + .toggle {
    background-color: var(--toggleCheckedBackgroundColor, #1b116e);
}

.sveltio-input:checked + .toggle::after {
    transform: translate3d(100%, 0, 0);
}

&lt;/style&gt;
</pre>
<p><code>Toggle.stories.svelte</code>:</p>
<pre class="prettyprint">&lt;script&gt;
    import { Meta, Template, Story } from "@storybook/addon-svelte-csf";
    import Toggle from "./Toggle.svelte";
  &lt;/script&gt;


  &lt;Meta
    title="Sveltio/Toggle"
    component={Toggle}
    argTypes={{
      label: { control: "text" },
      primary: { control: "boolean" },
      backgroundColor: { control: "color" },
      size: {
        control: { type: "select", options: ["small", "medium", "large"] },
      },
      onClick: { action: "onClick" },
    }}
  /&gt;


  &lt;Template let:args&gt;
    &lt;Toggle {...args} on:click={args.onClick} /&gt;
  &lt;/Template&gt;


  &lt;Story
    name="Labeled"
    args={{
      primary: true,
      label: "Check me",
    }}
  /&gt;


  &lt;Story
    name="Blank"
    args={{
      label: "",
    }}
  /&gt;
</pre>
<p>现在让我们看看这个组件将如何在 Storybook 中呈现。这个故事由两个名为<strong>的模板组成，分别标记为</strong>和<strong>空白</strong>，并将使用不同的道具或参数呈现同一组件的两个实例。</p>
<p><img data-attachment-id="74787" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/storybook-toggle-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component.png" data-orig-size="730,347" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Storybook-toggle-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component-300x143.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component.png" decoding="async" class="size-full wp-image-74787 aligncenter jetpack-lazy-image" src="../Images/7db781f8f01fcb6900be25c29646d0ab.png" alt="Storybook toggle component" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component-300x143.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74787" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/storybook-toggle-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component.png" data-orig-size="730,347" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Storybook-toggle-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component-300x143.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component.png" decoding="async" loading="lazy" class="size-full wp-image-74787 aligncenter" src="../Images/7db781f8f01fcb6900be25c29646d0ab.png" alt="Storybook toggle component" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component-300x143.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Storybook-toggle-component.png"/></noscript>
<h3>输入字段组件</h3>
<p>最后，我们将创建一个输入字段组件，其样式为输入的每个状态显示令人愉快的颜色。</p>
<p>在您的<code>Input.svelte</code>文件中写入以下内容:</p>
<pre class="language-svelte hljs">&lt;script&gt;
    import { createEventDispatcher } from 'svelte';

    export let placeholder = '';
    export let label = '';
    export let disabled = false;


    export let state = "active";


    const dispatch = createEventDispatcher();

     /**
     * input change handler
     */
     function onChange(event) {
      dispatch('click', event);
    }
&lt;/script&gt;

&lt;label &gt;

    {#if label}
        &lt;span class="sveltio-input-label"&gt;{label}&lt;/span&gt;
    {/if}


    &lt;input
    disabled={disabled}
    type="text"
    class={['sveltio-input',`sveltio-input--${state}`].join(' ')}
    placeholder={placeholder}
    &gt;
&lt;/label&gt;

&lt;style&gt;
    .sveltio-input {
    font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-weight: 700;
    min-height: 25px;
    margin: 2px;
    border-radius: 3px;
    border: solid 2px #353637;
    background-color: #ffffff;
}

.sveltio-input ::focus {
    border: solid 2px #1b116e;
}

.sveltio-input--success {
    border: solid 2px #067d68;
}

.sveltio-input--error {
    border: solid 2px #a9150b;
}

.sveltio-input--disabled {
    color: #e4e3ea;
    border: solid 2px #e4e3ea;
}

.sveltio-input ::-webkit-input-placeholder {
    color: red;
}

.sveltio-input-label {
    font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-weight: 700;
}

&lt;/style&gt;
</pre>
<p>现在，因为我们已经创建了带有样式的<code>input</code>组件，让我们看看如何为这些组件编写故事，以及它是如何呈现的。这里，我们将传入一些像<code>backgroundColor</code>和<code>state</code>这样的参数。</p>
<p><code>Input.stories.svelte:</code></p>
<pre class="prettyprint">&lt;script&gt;
    import { Meta, Template, Story } from "@storybook/addon-svelte-csf";
    import Input from "./Input.svelte";
  &lt;/script&gt;


  &lt;Meta
    title="Sveltio/Input"
    component={Input}
    argTypes={{
      backgroundColor: { control: "color" },
      state: {
        control: { type: "select", options: ["active","success", "error"] },
      },
      onChange: { action: "onChange" },
      disabled:{ control: "boolean" }
    }}
  /&gt;


  &lt;Template let:args&gt;
    &lt;Input {...args} on:change={args.onChange} /&gt;
  &lt;/Template&gt;


  &lt;Story
    name="Active"
    args={{
      placeholder: "Text Input Active",
      state:"active"
    }}
  /&gt;


  &lt;Story
    name="Success"
    args={{
      placeholder: "Text Input Success",
      state: "success",
    }}
  /&gt;
  &lt;Story
    name="Error"
    args={{
      placeholder: "Text Input Error",
      state: "error"
    }}
  /&gt;


  &lt;Story
    name="Disabled"
    args={{
      state: "disabled",
      disabled:true
    }}
  /&gt;


</pre>
<p>以类似的方式，您可以创建其他 web 组件，并为其他组件创建故事，以继续构建您的组件库。你可以通过这个<a href="https://github.com/LMPerera/sveltio" target="_blank" rel="noopener">链接</a>找到我们构建的组件的完整代码。</p>
<h2 id="testingwithsveltetestinglibraryandjest">使用苗条测试库和 Jest 进行测试</h2>
<p>开发 web 应用程序的一个最重要的方面是为我们的组件运行和维护测试。使用 Svelte，运行测试的过程类似于我们使用 React、Vue 或 Angular 得到的结果。</p>
<p>有几个工具可以编写和运行测试，比如 Mocha、Karma、Jasmine 和<a href="https://jestjs.io/"> Jest </a>。对于这个项目，我们将使用 Jest 作为我们的测试运行程序。然而，Jest 也稍有不足，因为我们需要呈现我们的组件，并在对它们执行操作后检查它的行为。</p>
<p>为此，我们将使用一个叫做<a href="https://testing-library.com/" target="_blank" rel="noopener">测试库</a>的工具。这个工具帮助我们编写测试，就像一个真实的用户正在处理元素一样，并且支持所有主要的前端框架和库。</p>
<p>我们还将使用一个名为<a href="https://testing-library.com/docs/ecosystem-user-event/" target="_blank" rel="noopener">用户事件</a>的测试库附加插件，它允许我们模拟用户事件，比如在输入中打字或点击按钮。我们还将使用一个名为<a href="https://testing-library.com/docs/ecosystem-jest-dom/"> jest-dom </a>的插件，它扩展了 jest 的 dom 相关匹配功能，我们需要它是因为我们正在处理 web 组件。</p>
<p>现在，让我们将这些库作为开发依赖项安装到我们的项目中，如下所示:</p>
<pre class="language-shell hljs">npm install --save-dev jest babel-jest svelte-jester  @testing-library/svelte @testing-library/user-event @testing-library/jest-dom @testing-library/dom</pre>
<p>现在，让我们向项目的根目录添加一些配置文件。从保存 Jest 配置的<code>Jest.config.cjs</code>文件开始，还有一个带有一些预设的<code>.babelrc</code>文件，用于将文件转换为 ES2015 JavaScript。</p>
<p><code>Jest.config.cjs</code>:</p>
<pre class="language-cjs hljs">module.exports = {
    transform: {
        "^.+\\.js$": "babel-jest",
        "^.+\\.svelte$": "svelte-jester"
    },
    moduleFileExtensions: ['js', 'svelte'],
    moduleNameMapper: {
        '^\\$lib(.*)$': '&lt;rootDir&gt;/src/lib$1',
        '^\\$app(.*)$': [
            '&lt;rootDir&gt;/.svelte-kit/dev/runtime/app$1',
            '&lt;rootDir&gt;/.svelte-kit/build/runtime/app$1'
        ]
    },
    setupFilesAfterEnv: ["@testing-library/jest-dom/extend-expect"],
    testEnvironment: "jsdom"
};
</pre>
<p><code>.babelrc</code>:</p>
<pre class="prettyprint">{
    "presets": [["@babel/preset-env", {"targets": {"node": "current"}}]]
}
</pre>
<p>上面的测试将检查按钮中的文本是否可用，并做一些断言。</p>
<p>让我们为已经创建的<code>Input</code>文件添加另一个测试。我们把这个叫做<code>test</code>目录下的<code>Input.test.js</code>:</p>
<pre class="language-javascript hljs">import '@testing-library/jest-dom';
import Input from '$lib/Input/Input.svelte';
import { render } from '@testing-library/svelte';

describe('Input component', () =&gt; {
    it('Input Has Placeholder', () =&gt; {
        const { getByPlaceholderText } = render(Input, { placeholder: 'Hello Sveltio' });
        expect(getByPlaceholderText('Hello Sveltio')).toBeInTheDocument();
    });
});
The above test will check if the input field consists of the placeholder we pass as a prop.</pre>
<p>在我们运行这些测试之前，我们将在<code>package.json</code>文件的<code>scripts</code>下添加一个名为<code>“test”:”jest”</code>的小属性。</p>
<p>现在，您所要做的就是在项目根目录下运行以下命令:</p>
<p><img data-attachment-id="74795" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/jest-button-test-pass/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass.png" data-orig-size="730,320" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Jest-button-test-pass" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass-300x132.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass.png" decoding="async" class="size-full wp-image-74795 aligncenter jetpack-lazy-image" src="../Images/09429805c0f03de0bba08c8bd72c2dbd.png" alt="Jest button test" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass-300x132.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="74795" data-permalink="https://blog.logrocket.com/build-your-own-component-library-svelte/jest-button-test-pass/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass.png" data-orig-size="730,320" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Jest-button-test-pass" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass-300x132.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass.png" decoding="async" loading="lazy" class="size-full wp-image-74795 aligncenter" src="../Images/09429805c0f03de0bba08c8bd72c2dbd.png" alt="Jest button test" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass-300x132.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Jest-button-test-pass.png"/></noscript>
<p>这样，您就可以维护单元测试，从而提高组件的质量。</p>
<h2>打包并发布到 npm</h2>
<p>现在是时候向全世界发布您的项目了！有几个工具可以用来导出你的组件作为一个包，但我们将使用一个很酷的功能，内置于 SvelteKit。首先，将这个属性添加到<code>package.json</code>文件中:</p>
<pre class="language-json hljs">"package": "svelte-kit package"</pre>
<p>现在，您所要做的就是从项目的根目录运行以下命令:</p>
<pre class="language-shell hljs">npm run package</pre>
<blockquote><p>如果您没有初始化 TypeScript SvelteKit 项目，您将需要安装一个名为<code>svelte2tsx</code>的依赖项，它将 Svelte 组件源转换成 TSX。</p></blockquote>
<p>该命令将获取<code>src/lib</code>文件夹下的所有文件，并将其打包。这个命令在项目的根目录下生成一个名为<code>package</code>的新目录，在这个目录中，您会注意到有一个新的<code>package.json</code>文件。这个文件包含一个名为<code>exports</code>的属性，它包含了我们开发的各个组件的所有路径或入口点。</p>
<p>将以下代码输入到<code>package</code>目录下的<code>package.json</code>文件中:</p>
<pre class="language-json hljs">{
  "name": "sveltio",
  "version": "0.0.1",
  "devDependencies": {
   //some dependencies
  },
  "type": "module",
  "dependencies": {},
  "exports": {
    "./package.json": "./package.json",
    "./Button.svelte": "./Button/Button.svelte",
    "./Input.svelte": "./Input/Input.svelte",
    "./Modal.svelte": "./Modal/Modal.svelte",
    "./Toggle.svelte": "./Toggle/Toggle.svelte"
  }
}
</pre>
<p>如果您的库包含类似于<code>src</code> / <code>lib</code> / <code>index.js</code>或<code>src</code> / <code>lib</code> / <code>index.svelte</code>的文件，它将被视为包根。这使得使用我们库的组件作为 es 模块导入变得更加容易。</p>
<p>例如，如果你有一个<code>src</code> / <code>lib</code> / <code>Button.svelte</code>组件和一个<code>src</code> / <code>lib</code> / <code>index.js</code>模块将其重新导出，则你的库的使用者可以执行以下任一操作:</p>
<pre class="language-shell hljs">import { Button } from 'your-library';</pre>
<p>或者</p>
<pre class="language-shell hljs">import Button from 'your-library/Button.svelte';</pre>
<p>现在我们已经使用 SvelteKit 创建了一个包，是时候将它发布为一个 npm 模块了。您需要做的就是从项目的根目录执行以下命令:</p>
<pre class="language-shell hljs">npm publish ./package</pre>
<p>上面的命令将发布我们使用 SvelteKit 创建的包。请确保包名称和包版本组合不存在；如果是这样，该包将不会在 npm 上发布。</p>
<h2>结论</h2>
<p>你可以看到为什么 SvelteKit 值得开发者社区更多的关注。SvelteKit 包含了很多奇妙的特性，创建软件包非常容易。有了 Storybook 和 Jest 这样的工具，孤立地创建一个组件并维护组件的测试变得简单而高效。更多信息，请浏览 SvelteKit <a href="https://kit.svelte.dev/docs" target="_blank" rel="noopener">文档</a>。</p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>