<html>
<head>
<title>A complete guide to declarative diagramming with D2 </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>D2声明性绘图完全指南</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/#0001-01-01">https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/#0001-01-01</a></blockquote><div><article class="article-post">
<p>声明性图表使用声明性方法创建图表，从流程图到组织结构图。在声明性方法中，用户使用正式语言指定图表元素的关系和逻辑，而不是手动在画布上放置和连接形状。</p>
<p>结果图是根据用户的输入自动生成的。声明性图表对于创建难以手动创建的复杂图表或从存储在数据库或电子表格中的数据生成图表特别有用。</p>
<p>此外，声明性图表允许图表设计中的更大灵活性，以及在节省时间的同时根据需要容易地更新和改变图表的能力。</p>
<p><em>向前跳跃</em>:</p>

<h2 id="what-d2">什么是D2？</h2>
<p><img data-attachment-id="162056" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/d2-header/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="D2 header image" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header.png" decoding="async" class="aligncenter size-full wp-image-162056 jetpack-lazy-image" src="../Images/788100f5173f285594dc49c01cd9907d.png" alt="D2 Header Image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header-300x84.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162056" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/d2-header/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="D2 header image" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162056" src="../Images/788100f5173f285594dc49c01cd9907d.png" alt="D2 Header Image" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header-300x84.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/d2-header.png"/></noscript>
<p><a href="https://d2-lang.com/"> D2 (D2lang) </a>是一种特定领域的图表脚本语言，它将文本转换成图表。D2采用声明式图表方法，并基于声明的代码语法(文本)生成图像。D2不是面向设计师，而是面向工程师。使用D2，您可以创建声明形状、连接、容器和特殊对象的图表。您还可以通过编程进行更多的定制，包括字符串、注释和重写。</p>
<p>D2支持各种图表，包括流程图、状态图和实体关系图。D2还提供了广泛的定制选项，允许用户改变图表的外观，以符合他们组织的品牌和需求，或者符合特定的标准。</p>
<p>您还可以使用D2创建自定义形状和元素，从而轻松创建准确反映项目特定需求的图表。</p>
<p>D2是开源的，Terrastruct项目支持它。Terrastruct项目提供了一套工具，用于创建和维护基础设施代码。D2语法简单易学，是Terraform、Ansible等其他工具的优秀补充。</p>
<h2 id="getting-started-d2">D2入门</h2>
<p>你需要在电脑上安装D2软件来将文本转换成图表。前往<a href="https://d2lang.com/tour/install">安装文档页面</a>根据您计算机的资源和架构安装D2。</p>
<p>如果你的电脑上安装了Go编程语言，下面是安装D2的方法。</p>
<pre class="language-go hljs">go install oss.terrastruct.com/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6e0a5c2e020f1a0b1d1a">[email protected]</a>
</pre>
<p>在安装目录中运行以下命令，验证D2是否正在运行:</p>
<pre class="language-go hljs"># creates a D2 file and adds the text
echo 'x -&gt; y' &gt; input.d2

# runs the text as with D2 and outputs an SVG diagram
d2 -w input.d2 out.svg
</pre>
<p>该命令应该会启动服务器，打开默认的web浏览器，并显示下图:</p>
<p><img data-attachment-id="162058" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/displaying-d2-diagram/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram.png" data-orig-size="730,427" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Displaying a D2 diagram" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram.png" decoding="async" class="aligncenter size-full wp-image-162058 jetpack-lazy-image" src="../Images/7b0c40a4cd1345724752cd6c5acf1c3a.png" alt="Displaying A D2 Diagram" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram-300x175.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162058" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/displaying-d2-diagram/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram.png" data-orig-size="730,427" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Displaying a D2 diagram" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162058" src="../Images/7b0c40a4cd1345724752cd6c5acf1c3a.png" alt="Displaying A D2 Diagram" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram-300x175.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/displaying-d2-diagram.png"/></noscript>
<p>如果你对这种方法有任何问题，你也可以选择用CURL脚本安装D2。</p>
<p>或者，您可以使用提供常规GUI模式和IDE模式的Terrastruct控制台来编写和编译D2代码:</p>
<p><img data-attachment-id="162060" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/terrastruct-console-compile-d2-code/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code.png" data-orig-size="730,614" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The Terrastruct console provides a mode to write and compile D2 code" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code-300x252.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code.png" decoding="async" class="aligncenter size-full wp-image-162060 jetpack-lazy-image" src="../Images/dc24aba0f096790c5fdc410d1255b433.png" alt="The Terrastruct Console Provides A Mode To Write And Compile D2 Code" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code-300x252.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162060" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/terrastruct-console-compile-d2-code/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code.png" data-orig-size="730,614" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The Terrastruct console provides a mode to write and compile D2 code" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code-300x252.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162060" src="../Images/dc24aba0f096790c5fdc410d1255b433.png" alt="The Terrastruct Console Provides A Mode To Write And Compile D2 Code" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code-300x252.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/terrastruct-console-compile-d2-code.png"/></noscript>
<p>D2还为流行的应用程序提供扩展和插件。还有D2 <a href="https://d2lang.com/tour/vscode"> VSCode扩展</a>和<a href="https://d2lang.com/tour/vim"> Vim </a>、<a href="https://d2lang.com/tour/obsidian">曜</a>、<a href="https://d2lang.com/tour/slack"> Slack </a>和<a href="https://d2lang.com/tour/discord"> Discord </a>插件。D2社区还为Telegram、Postgres importer、Emacs等应用程序中的D2支持构建了第三方插件和扩展。</p>
<h2 id="diagramming-d2">用D2作图</h2>
<p>D2的声明性图表使用特定的语法规则，您必须遵循这些规则才能得到您想要的图表。</p>
<p>D2支持大多数数据类型。在D2，您可以通过在diagram指令后指定文本来编写Hello World或文本作为标签:</p>
<pre class="language-go hljs">"Hello" -&gt; "World!"
</pre>
<p>上面的语法声明了两个形状<code>Hello</code>和<code>World!</code>之间的连接。这些形状从<code>Hello</code>到<code>World!</code>用一条直线连接:</p>
<p><img data-attachment-id="162062" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/syntax-declares-connection-between-shapes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes.png" data-orig-size="730,242" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The syntax declares a connection between two shapes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes-300x99.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes.png" decoding="async" class="aligncenter size-full wp-image-162062 jetpack-lazy-image" src="../Images/371f3cfcc10a1cc9d20e419fa2b9e07e.png" alt="The Syntax Declares A Connection Between Two Shapes" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes-300x99.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162062" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/syntax-declares-connection-between-shapes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes.png" data-orig-size="730,242" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The syntax declares a connection between two shapes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes-300x99.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162062" src="../Images/371f3cfcc10a1cc9d20e419fa2b9e07e.png" alt="The Syntax Declares A Connection Between Two Shapes" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes-300x99.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/syntax-declares-connection-between-shapes.png"/></noscript>
<h3 id="working-shapes-d2">在D2使用形状</h3>
<p>您可以通过指定文本来声明D2中的形状。D2的默认形状是正方形:</p>
<pre class="language-go hljs">this
</pre>
<p>您可以使用分号在图表中声明多个形状:</p>
<pre class="language-go hljs">this; that
</pre>
<p>正方形不是D2唯一的形状；您可以使用文本的形状字段创建一个<a href="https://d2lang.com/tour/shapes/">替代形状</a>:</p>
<pre class="language-go hljs">Google Cloud.shape: cloud 
Myapp.shape: circle
</pre>
<p>您也可以用大括号将形状括在另一个形状中，并为父形状指定一个标识符:</p>
<pre class="language-go hljs">big square: {
  Google Cloud.shape: cloud
  Myapp.shape: circle
}
</pre>
<p><img data-attachment-id="162064" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/working-with-shapes-d2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2.png" data-orig-size="730,930" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Working with shapes in D2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2-235x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2.png" decoding="async" class="aligncenter size-full wp-image-162064 jetpack-lazy-image" src="../Images/f42d9a3ab6f4cfdd62990600a5f683c8.png" alt="Working With Shapes In D2" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2-235x300.png 235w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162064" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/working-with-shapes-d2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2.png" data-orig-size="730,930" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Working with shapes in D2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2-235x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162064" src="../Images/f42d9a3ab6f4cfdd62990600a5f683c8.png" alt="Working With Shapes In D2" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2-235x300.png 235w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/working-with-shapes-d2.png"/></noscript>
<h3 id="connections-labels-d2">D2的关系和标签</h3>
<p>您可以在D2中使用连接运算符连接形状和文本，并通过在冒号(:)运算符后指定标签来标记连接。</p>
<p>D2提供了四种连接运算符:</p>
<ul>
<li>正向连接器<code>-&gt;</code></li>
<li>直线连接器<code>--</code></li>
<li>正向连接器<code>&lt;-</code></li>
<li>两侧连接器<code>&lt;-&gt;</code></li>
</ul>
<p>以下是在D2使用上述运算符连接和标注形状的方法:</p>
<pre class="language-go hljs">Google Cloud.shape: cloud
Microservice1.shape: circle

#  -&gt; connects the google cloud shape to the Microservice1 shape with a "comment" label
Google Cloud -&gt; Microservice1: Comments

Microservice2.shape: Parallelogram
AWS.shape: hexagon

# --  creates a straight line from the AWS shape to the Microservice2 shape

AWS -- Microservice2

Digital Ocean.shape: rectangle
Microservice3.shape: oval

#  -&gt; connects the Microservice3 shape to the Digital ocean shape.

Digital Ocean &lt;- Microservice3

Microservice4.shape: person
WebSocket.shape: callout

#  -&gt; connects websocket and microservice4 shapes to each other with a "chat" label

WebSocket &lt;-&gt; Microservice4: Chat
</pre>
<p><img data-attachment-id="162067" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/connecting-labeling-shapes-d2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2.png" data-orig-size="730,610" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Connecting and labeling shapes in D2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2-300x251.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2.png" decoding="async" class="aligncenter size-full wp-image-162067 jetpack-lazy-image" src="../Images/967060171936d233e529943cebb6c806.png" alt="Connecting And Labeling Shapes In D2" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2-300x251.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162067" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/connecting-labeling-shapes-d2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2.png" data-orig-size="730,610" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Connecting and labeling shapes in D2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2-300x251.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162067" src="../Images/967060171936d233e529943cebb6c806.png" alt="Connecting And Labeling Shapes In D2" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2-300x251.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/connecting-labeling-shapes-d2.png"/></noscript>
<h2 id="styling-d2-diagrams">设计D2图表</h2>
<p>样式和主题是图表的调味品。它们为所呈现的信息增加了额外的内容和多样性。D2提供了向图中添加主题、样式和维度的功能。</p>
<h3 id="adding-themes-d2-diagrams">向D2图添加主题</h3>
<p>D2支持许多主题，使您的图表看起来更专业。您可以将主题应用于特定的形状和表格。</p>
<p>您可以在D2 CLI上通过在命令中使用<code>-t</code>或<code>--theme</code>标志指定主题(主题编号)来设置主题。</p>
<p>您可以使用<code>d2</code>命令来指定主题，如下所示:</p>
<pre class="language-go hljs"># specifies the usage of theme 101
d2 -t 101 input.d2 out.svg
</pre>
<p>下面是不同主题的安装图的输出:</p>
<p><img data-attachment-id="162069" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/adding-themes-d2-diagrams/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams.png" data-orig-size="730,447" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Using D2 to specify themes in diagrams" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams.png" decoding="async" class="aligncenter size-full wp-image-162069 jetpack-lazy-image" src="../Images/d8189af2d3470676f36a8485cddfdab1.png" alt="Using D2 To Specify Themes In Diagrams" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams-300x184.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162069" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/adding-themes-d2-diagrams/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams.png" data-orig-size="730,447" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Using D2 to specify themes in diagrams" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162069" src="../Images/d8189af2d3470676f36a8485cddfdab1.png" alt="Using D2 To Specify Themes In Diagrams" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams-300x184.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/adding-themes-d2-diagrams.png"/></noscript>
<p>或者，您可以使用<code>D2_THEME</code>环境变量来为图表指定主题:</p>
<pre class="language-go hljs">D2_THEME=101 d2 input.d2 out.svg
</pre>
<h3 id="customizing-d2-diagrams">自定义D2图</h3>
<p>您可以使用<code>style</code>字段自定义形状和图表的样式。大多数样式使用CSS关键字并遵循CSS惯例。以下是D2目前提供的风格选项列表:</p>
<ul>
<li>不透明</li>
<li>中风</li>
<li>填充(仅形状)</li>
<li>笔画宽度</li>
<li>划-划</li>
<li>阴影(仅形状)</li>
<li>字体大小</li>
<li>字体颜色</li>
<li>大胆的</li>
<li>意大利语族的</li>
<li>强调</li>
<li>划-划</li>
<li>边框半径(仅形状)</li>
<li>3D(仅矩形/正方形)</li>
<li>多个(仅形状)</li>
<li>动画(仅连接)</li>
</ul>
<p>以下是如何使用样式字段来设置图表的样式:</p>
<pre class="language-go hljs">x -&gt; y: hi {
        # styles in the braces
  style: {
    opacity: 0.9
    stroke-dash: 3
    shadow: true
    font-size: 10
  }
}
</pre>
<p><img data-attachment-id="162072" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/styling-diagram-style-fields/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields.png" data-orig-size="730,492" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Styling diagrams with style fields" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields-300x202.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields.png" decoding="async" class="aligncenter size-full wp-image-162072 jetpack-lazy-image" src="../Images/d0bb464da850dd857fc912ef39038f62.png" alt="Styling Diagrams With Style Fields" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields-300x202.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162072" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/styling-diagram-style-fields/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields.png" data-orig-size="730,492" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Styling diagrams with style fields" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields-300x202.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162072" src="../Images/d0bb464da850dd857fc912ef39038f62.png" alt="Styling Diagrams With Style Fields" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields-300x202.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-diagram-style-fields.png"/></noscript>
<p>或者，使用<code>&lt;element&gt;.style.&lt;style-option&gt;</code>语法来设计图中特定元素的样式:</p>
<pre class="language-go hljs">x -&gt; y: hi
x.style.opacity: 0.9
x.style.stroke-dash: 3
x.style.shadow: true
x.style.font-size: 10
x.style.3d: true
</pre>
<p><img data-attachment-id="162074" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/styling-specific-elements-diagram/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram.png" data-orig-size="730,744" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Styling specific elements of your diagram" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram-294x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram.png" decoding="async" class="aligncenter size-full wp-image-162074 jetpack-lazy-image" src="../Images/1528dcc00c2fe402dd2b86ea8e2cf78e.png" alt="Styling Specific Elements Of Your Diagram" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram-294x300.png 294w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162074" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/styling-specific-elements-diagram/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram.png" data-orig-size="730,744" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Styling specific elements of your diagram" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram-294x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162074" src="../Images/1528dcc00c2fe402dd2b86ea8e2cf78e.png" alt="Styling Specific Elements Of Your Diagram" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram-294x300.png 294w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/styling-specific-elements-diagram.png"/></noscript>
<h3 id="adding-dimensions-d2-diagrams">向D2图添加维度</h3>
<p>此外，您可以在您的图中使用关键字<code>width</code>和<code>height</code>来指定您的图的尺寸。您需要添加引号操作符<code>""</code>来指定维度:</p>
<pre class="language-go hljs">print : "" {
  width: 50
  height: 50
}
</pre>
<p>以下是dimensions声明的结果:</p>
<p><img data-attachment-id="162076" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/result-dimension-declaration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration.png" data-orig-size="730,245" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Result of dimensions declaration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration-300x101.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration.png" decoding="async" class="aligncenter size-full wp-image-162076 jetpack-lazy-image" src="../Images/31ffdb6c9bdd829bf56562b5da5d7541.png" alt="Result Of Dimensions Declaration" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration-300x101.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162076" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/result-dimension-declaration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration.png" data-orig-size="730,245" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Result of dimensions declaration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration-300x101.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162076" src="../Images/31ffdb6c9bdd829bf56562b5da5d7541.png" alt="Result Of Dimensions Declaration" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration-300x101.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/result-dimension-declaration.png"/></noscript>

<h3 id="strings-d2">D2的弦乐</h3>
<p>D2提供带引号和不带引号的字符串以增加灵活性；您可以在您的图中使用这两者。</p>
<p>使用字母数字值时，不带引号的字符串很方便。D2修剪前导和尾随空白，所以你不必担心这一点:</p>
<pre class="language-go hljs">My Name: Goodness
Name -&gt; My Name
</pre>
<p><img data-attachment-id="162078" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/strings-d2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2.png" data-orig-size="521,291" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Strings in D2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2.png" decoding="async" class="aligncenter size-full wp-image-162078 jetpack-lazy-image" src="../Images/1d5d7477f42c9f65a8b955e7c3572892.png" alt="Strings In D2" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2.png 521w, https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2-300x168.png 300w" data-lazy-sizes="(max-width: 521px) 100vw, 521px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162078" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/strings-d2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2.png" data-orig-size="521,291" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Strings in D2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162078" src="../Images/1d5d7477f42c9f65a8b955e7c3572892.png" alt="Strings In D2" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2.png 521w, https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2-300x168.png 300w" sizes="(max-width: 521px) 100vw, 521px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/strings-d2.png"/></noscript>
<p>带引号的字符串对于使用符号很有用。单引号和双引号对D2有同样的效果:</p>
<pre class="language-go hljs">"$$$$" -&gt; '?/?/'
</pre>
<p><img data-attachment-id="162080" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/quoted-strings-using-symbols/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols.png" data-orig-size="521,284" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Quoted strings for using symbols" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols.png" decoding="async" class="aligncenter size-full wp-image-162080 jetpack-lazy-image" src="../Images/09896c3ac01876583fc0a82c51dfd550.png" alt="Quoted Strings For Using Symbols" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols.png 521w, https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols-300x164.png 300w" data-lazy-sizes="(max-width: 521px) 100vw, 521px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162080" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/quoted-strings-using-symbols/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols.png" data-orig-size="521,284" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Quoted strings for using symbols" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162080" src="../Images/09896c3ac01876583fc0a82c51dfd550.png" alt="Quoted Strings For Using Symbols" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols.png 521w, https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols-300x164.png 300w" sizes="(max-width: 521px) 100vw, 521px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/quoted-strings-using-symbols.png"/></noscript>

<p>D2使用Bash风格的注释语法。这意味着您可以用<code>#</code>符号对您的D2代码进行注释:</p>
<pre class="language-go hljs"># top of line comment
name -&gt; Goodness

name -&gt; Goodness # end of line comment
</pre>
<p>在D2，多行注释没有不同的语法。只需添加更多单行注释即可创建多行注释:</p>
<p><img data-attachment-id="162082" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/creating-multiline-comments-d2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2.png" data-orig-size="730,415" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating multiline comments in D2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2-300x171.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2.png" decoding="async" class="aligncenter size-full wp-image-162082 jetpack-lazy-image" src="../Images/80ad7cd72c4dc1895cf59cbfa93dd33a.png" alt="Creating Multiline Comments In D2" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2-300x171.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162082" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/creating-multiline-comments-d2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2.png" data-orig-size="730,415" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating multiline comments in D2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2-300x171.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162082" src="../Images/80ad7cd72c4dc1895cf59cbfa93dd33a.png" alt="Creating Multiline Comments In D2" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2-300x171.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/creating-multiline-comments-d2.png"/></noscript>
<h3 id="overrides-d2">D2的覆盖</h3>
<p>当你重新声明形状，D2合并新的声明与前一个。最新的显式标签优先。</p>
<p>这里有一个在D2如何覆盖的例子:</p>
<pre class="language-go hljs">name: Goodness {
  Language: English
}
name: Goodness {
  Book: Code
}

# is equivalent to this

name: Goodness {
  Language: English
  Book: Code
}
</pre>
<p><code>name</code>用不同的数据声明了两次，D2将它们合并成了形状:</p>
<p><img data-attachment-id="162084" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/overrides-d2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2.png" data-orig-size="730,555" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Overrides in D2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2-300x228.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2.png" decoding="async" class="aligncenter size-full wp-image-162084 jetpack-lazy-image" src="../Images/5a014205b8b7417b780cea88e80c27b4.png" alt="Overrides In D2" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2-300x228.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="162084" data-permalink="https://blog.logrocket.com/complete-guide-declarative-diagramming-d2/attachment/overrides-d2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2.png" data-orig-size="730,555" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Overrides in D2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2-300x228.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-162084" src="../Images/5a014205b8b7417b780cea88e80c27b4.png" alt="Overrides In D2" srcset="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2-300x228.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/03/overrides-d2.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>在本文中，您了解了如何安装和开始使用声明性图表语言D2。您学习了如何创建图表，以及如何设计它们的形状、主题和尺寸。</p>
<p>D2在很多情况下都很有帮助，尤其是在自动生成随时间变化的图表方面。大多数D2用户在他们的文档和ERD图中使用这种语言。</p><div class="code-block code-block-4">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>