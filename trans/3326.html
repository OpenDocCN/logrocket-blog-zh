<html>
<head>
<title>Comparing control flow statements in Kotlin and Swift - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Kotlin和Swift - LogRocket博客中控制流语句的比较</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/kotlin-swift-control-flow-statements/#0001-01-01">https://blog.logrocket.com/kotlin-swift-control-flow-statements/#0001-01-01</a></blockquote><div><article class="article-post">
<p>控制流语句采用决策来有条件地执行特定的代码块，并用于分解典型的自顶向下的执行流。这类语句的一些例子是众所周知的<code>if-else</code>语句，像<code>for</code>或<code>while</code>这样的循环语句，以及更通用的<code>switch</code>或<code>when</code>语句。</p>
<p>在本文中，我将比较Swift编程语言中的传统<code>switch</code>语句和Kotlin中的类似<code>when</code>语句。</p>
<p>两个控制流语句<a href="https://kotlinlang.org/docs/control-flow.html#when-expression" target="_blank" rel="noopener">都定义了一个带有多个分支</a>的条件表达式，然后依次将它们的参数与所有分支进行匹配，直到满足某个分支条件。最后，它们执行匹配分支的代码块，并继续执行任何后续代码段。</p>
<p>在这篇文章中:</p>

<h2 id="similarities-switch-when-statements">Swift和Kotlin中<code>switch</code>和<code>when</code>语句的相似性</h2>
<p>虽然Swift和Kotlin有许多不同之处，但它们的<code>switch</code>和<code>when</code>控制流语句也有一些相似之处。</p>
<h3 id="default-case-swift-kotlin">斯威夫特和科特林案中的默认情况</h3>
<p><code>switch</code>和<code>when</code>控制流语句之间最明显的相似之处是默认情况。</p>
<p>Swift的<code>switch</code>语句简单地继承了其C前辈的<code>default</code>关键字，而Kotlin则选择使用不同但众所周知的<code>else</code>关键字来定义其现代<code>when</code>语句的默认情况。</p>
<p>以下是Swift中的一个<code>switch</code>语句示例:</p>
<pre class="language-swift hljs">switch (expression) {
    case value1:
        // content
    case value2:
        // content
    ...
    default:
        // content of default case
}
</pre>
<p>这里有一个Kotlin中的<code>when</code>语句的例子:</p>
<pre class="language-kotlin hljs">when (expression) {
    value1 -&gt; //content
    value2 -&gt; //content
    ...
    else -&gt; // content of default case
}
</pre>
<p>这两个语句都可以被一系列的<code>if-else-if</code>语句主动替换，其中后面的<code>else</code>语句作为默认情况。然而，<code>switch</code>和<code>when</code>语句与具有多个分支的<code>if-else</code>语句实现了相同的功能，但是代码更少，语法更简单:</p>
<pre class="language-kotlin hljs">if (expression == value1) {
    // content
} else if (expression == value2) {
    // content
...
} else {
    // content of default case
} 
</pre>
<h3 id="object-types-expression">作为表达式的对象类型</h3>
<p>相反，两个条件语句都可以使用任何种类的本机数据类型作为主体或表达式，用于分支内的比较。</p>
<p>他们可以使用的不同数据类型的一些例子包括<code>Integer</code>、<code>Double</code>、<code>Char</code>和<code>String</code>类型。</p>
<p>以下是Swift中比较<code>Character</code>类型的<code>switch</code>语句的示例:</p>
<pre class="language-swift hljs">let charToCompare: Character = "i"
switch someCharacter {
    case "a":
        // content
    case "i":
        // content
    case "n":
        // content
    case "v":
        // content
}
</pre>
<p>此外，这两个语句都支持使用<code>Enumeration</code>类型，也称为<code>enum</code>，作为用于比较的条件表达式。</p>
<p>下面是一个在Kotlin中比较<code>enum</code>类型的<code>when</code>语句的例子:</p>
<pre class="language-kotlin hljs">enum class Color { BLUE, PURPLE, BLACK, GOLD }
when (getColor()) {
    Color.BLUE -&gt; // content
    Color.PURPLE -&gt; // content
    Color.BLACK -&gt; // content
    Color.GOLD -&gt; // content
}
</pre>
<p>请注意，在上面的示例中，枚举的所有情况都已用尽。这允许我们忽略默认情况，这将是一个<code>else</code>分支。</p>
<h3 id="numeric-ranges-swift-kotlin">在Swift和Kotlin中使用数值范围</h3>
<p><code>when</code>和<code>switch</code>的另一个相似之处是能够使用数值范围作为与提供的表达式进行比较的值。</p>
<p>以下是Swift中使用数值范围的<code>switch</code>语句的示例:</p>
<pre class="language-swift hljs">let count = 42
switch count {
    case 0..25:
        // content
    case 26..50:
        // content
    case 51..75:
        // content
    case 76..100:
        // content
    default:
        // default case content
}
</pre>
<p>下面是一个在Kotlin中使用数值范围的<code>when</code>语句的例子:</p>
<pre class="language-kotlin hljs">val count = 42
when (count) {
    in 0..25 -&gt; // content
    in 26..50 -&gt; // content
    in 51..75 -&gt; // content
    in 76..100 -&gt; // content
    else -&gt; // default case content
}
</pre>
<h3 id="capturing-multiple-cases-switch-when-statements">在<code>switch</code>和<code>when</code>语句中捕获多个案例</h3>
<p>使用<code>switch</code>和<code>when</code>语句，也可以通过简单地用逗号分隔所有附加条件，将多个案例分组到同一个条件分支中。</p>
<p>下面是一个在Kotlin的一个分支中捕获多个案例的<code>when</code>语句示例:</p>
<pre class="language-kotlin hljs">val x = 6
when (x) {
    in 1, 2 -&gt; // content
  in 3, 4 -&gt; // content
    in 5, 6 -&gt; // content
    else -&gt; // default case content
}
</pre>
<h3 id="checking-inheritance-swift-kotlin">在Swift和Kotlin中检查继承</h3>
<p>另一个强大的相似之处是<code>when</code>和<code>switch</code>都有检查继承的能力。只要要比较的表达式是超类的一个实例，我们就可以通过检查我们正在处理哪种对象来做到这一点。</p>
<p>这里有一个在Swift中检查对象类型的<code>switch</code>语句的例子:</p>
<pre class="language-swift hljs">let vehicle: Vehicle = Car()
switch vehicle {
    case is Car:
        // content
    case is Motorcycle:
        // content
    case is Tricycle:
        //content
} // where Car, Motorcycle &amp; Tricycle all extend the Vehicle class
</pre>
<h3 id="variable-assignment-switch-when-statements"><code>switch</code>和<code>when</code>语句中的变量赋值</h3>
<p>我们要讨论的最后一个相似之处是两个表达式都可以做的事情，因为Swift和Kotlin都将函数式编程模式集成到了他们的语言库中。</p>
<p>我们可以使用<code>switch</code>或<code>when</code>语句作为变量的赋值，两者都将得到结果，并将其用作任何类型变量的值。</p>
<p>下面是一个在Kotlin中将<code>when</code>语句赋给变量的例子:</p>
<pre class="language-kotlin hljs">val seasonOfTheYear: String = when (getMonthByNumber()) {
    3, 4, 5 -&gt; "Spring"
    6, 7, 8 -&gt; "Summer"
    9, 10, 11 -&gt; "Autumn"
    12, 1, 2 -&gt; "Winter"
}
</pre>
<h2 id="differences-switch-when-statements"><code>switch</code>和<code>when</code>语句的区别</h2>
<p>尽管Swift的<code>switch</code>和Kotlin的<code>when</code>语句有很多相似之处，但由于各自编程语言的独特性，它们也有一些根本性的差异。</p>
<h3 id="exhaustiveness-swift-switch-statement">Swift <code>switch</code>声明中的详尽性</h3>
<p><code>switch</code>和<code>when</code>之间值得注意的第一个区别是，尽管Swift的<code>switch</code>语句必须在任何时候都是详尽的，尽管添加一个默认分支可能足以在编译器级别使其详尽，但Kotlin的<code>when</code>语句并非如此。</p>
<p>Kotlin <code>when</code>语句只有在用作表达式时才需要是详尽的——例如，每当它被赋给一个变量时，或者当一个<code>else</code>分支可能被用来捕获一个默认行为时。另一方面，每当<code>when</code>模式被用作语句时，它的行为就像一个常规的<code>if-else-if</code>语句，其中条件块的所有分支都将被评估，但是除非匹配，否则不会执行任何分支。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<h3 id="fallthrough-cases-swift-kotlin"><code>Fallthrough</code>斯威夫特和科特林案</h3>
<p>回到代码中，<code>switch</code>和<code>when</code>表达式的一个很大的区别是使用了<code>fallthrough</code>关键字。</p>
<p>Swift中的<code>fallthrough</code>行为与基于C语言的行为非常相似。例如，在下面的Java代码块中，省略<code>break</code>关键字会通过执行<code>switch</code>语句的下一个条件分支包含的代码来触发<code>fallthrough</code>行为。</p>
<pre class="language-java hljs">final int x = 6;
switch {
    case 1, 2:
        // not executed
        break;
    case 3, 4:
        // not executed
        break;
    case 5, 6:
        // executed
    case 7, 8, 9:
        // also executed because it will fall through
    break;
}
</pre>
<p>在契约中，Swift <code>switch</code>语句需要一个特殊的关键字，即<code>fallthrough</code>，以表明我们希望<code>switch</code>语句的任何给定条件分支落入下一个分支，并执行那里的代码。</p>
<p>以下是Swift中带有<code>fallthrough</code>行为的<code>switch</code>语句的示例:</p>
<pre class="language-swift hljs">let x = 6
switch x {
    case 1, 2:
        // not executed
    case 3, 4:
        // not executed
    case 5, 6:
        // executed
        fallthrough
    case 7, 8, 9:
        // also executed because it will fall through
}
</pre>
<h3 id="when-statement-advantage-conditional-statement-empty-expression"><code>when</code>优点:带有空表达式的条件语句</h3>
<p>转到Kotlin场景中，<code>when</code>语句有一个优势:它可以与显式主体或表达式一起使用，允许它进入典型的<code>if-else-if</code>模式，但语法要干净得多。</p>
<p>无论何时采用这种方法，<code>else</code>分支也可以作为默认情况使用，但并不是在所有情况下都需要。</p>
<p>下面是一个Kotlin中带有空表达式的<code>when</code>语句的示例:</p>
<pre class="language-kotlin hljs">when {
    x.isOdd() -&gt; // content
    x.isEven -&gt; // content
    else -&gt; // default case content
}
</pre>
<blockquote><p>额外收获:在<code>switch</code>语句中有一种简单的方法可以实现这一点，你只需将<code>true</code>作为你的表达式，然后逐一检查每个分支，但是这种情况不应该选择常规的<code>if-else-if</code>表达式树。</p></blockquote>
<h3 id="tuple-switch-statement-expression">使用元组作为<code>switch</code>语句的表达式</h3>
<p>我们将讨论的<code>when</code>和<code>switch</code>之间的最后一个区别来自于Swift中根深蒂固的一种模式，这种模式包括传递一个元组作为<code>switch</code>语句的表达式。</p>
<p>尽管这种数据结构类型类似于常规的Java或Kotlin <code>Pair</code>，但它并不直接支持将此作为表达式接收的<code>when</code>语句，并且它的使用方式与Swift通过一次比较两个值来使用它的方式不同。</p>
<p>下面是一个在Swift中使用元组的<code>switch</code>语句的例子:</p>
<pre class="language-swift hljs">let coordinates = (0, 1)
switch coordinates {
    case (0, 0):
        // point is at the center
    case (_, 0):
        // point is on the x-axis
    case (0, _):
        // point is on the y-axis
}
</pre>
<h2 id="conclusion">结论</h2>
<p>众所周知，虽然Swift建立在基于C语言的<code>switch</code>语句的传统用法之上，但Kotlin通过用条件分支转换其<code>when</code>语句而有点误入歧途。</p>
<p>然而，这些语句有许多相似之处，同时也有基于每种编程语言所支持的模式和范例的差异。</p>
<p>最终，<code>switch</code>和<code>when</code>语句都应该带着相同的目标使用:打破通常的自顶向下的执行顺序，为我们的类增加决策、灵活性和多功能性。</p><div class="code-block code-block-32">
<div class="blog-plug inline-plug kotlin-plug"><h2>LogRocket :即时重现你的安卓应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/kotlin-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/b5ae4bd0ecde7aa9d5288746416d5e18.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-plug_android-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-plug_android-1.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/b5ae4bd0ecde7aa9d5288746416d5e18.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-plug_android-1.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/kotlin-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款Android监控解决方案，可以帮助您即时重现问题，确定bug的优先级，并了解您的Android应用程序的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的Android应用程序— <a class="signup" href="hhttps://lp.logrocket.com/blg/kotlin-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>