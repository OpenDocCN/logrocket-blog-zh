<html>
<head>
<title>CSS custom properties as of 2021 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>截至 2021 年的 CSS 自定义属性</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/css-custom-properties-as-of-2021/#0001-01-01">https://blog.logrocket.com/css-custom-properties-as-of-2021/#0001-01-01</a></blockquote><div><article class="article-post">
<p>许多 web 应用程序包含大量 CSS，这些 CSS 通常包含重复的值。例如，如果一种颜色在多个组件中多次使用，为了改变颜色，将启动全局搜索和替换。这既费时又令人望而生畏。</p>
<p>自定义属性允许开发人员将值存储在单个文件中，并在许多组件中引用该值。自定义属性也允许语义标识符，例如如果在多个组件中使用,<code>--main-button-color</code>将比<code>#99efbe</code>更容易理解。同样重要的是，要注意自定义属性受 CSS 级联规则的约束。<br/>在本文中，我将简要概述 CSS 自定义属性以及如何使用它们，并讨论它们与 JavaScript、API 和 React 的功能。</p>
<h2>什么是自定义属性？</h2>
<p>自定义属性也称为 CSS 变量，是由开发人员定义的特定值，可在 web 应用程序或文档中重用。通常 CSS 变量是用属性符号来设置的。</p>
<p>下面是一个基本自定义属性的示例:</p>
<pre>button {
   background-color: var(--main-bg-color);
}
</pre>
<p>在上面的代码块中，button 元素被赋予了背景色<code>main</code>，这已经在一个单独的文件中定义了。下面让我们看看如何使用自定义属性。</p>
<h2>声明自定义属性</h2>
<p>要声明一个定制属性，首先我们通过在一个有效的 CSS 值旁边添加一个双连字符<code>(--)</code>来声明属性名。</p>
<p>像任何其他变量一样，我们将它写在一个规则集内，如下所示:</p>
<pre>element {
  --main-color: red;
}
</pre>
<p>要在属性声明中使用一个值，我们需要用一个类似下面代码块的<code>var()</code>函数来调用它:</p>
<pre>p {
 color: var(--color-primary);
}
</pre>
<p>值得注意的是，赋予规则集的选择器定义了自定义属性的使用范围。另一个常见的用法是将自定义属性的范围定义为<code>:root</code>，它是全局的。这样做是为了让它可以在全球范围内应用于许多文档和组件。</p>
<h2>CSS 自定义属性的用例</h2>
<p>在这一节中，我们将看看自定义属性和 CSS 变量的用例。</p>
<h3>颜色；色彩；色调</h3>
<p>颜色可以设置为 CSS 自定义属性。此示例将包括颜色更改的自定义属性的范围。</p>
<p>在我们的例子中，我们可以为一个特定的元素定义一种颜色<code>danger</code>红色，比如说<code>h2</code>。然而，该应用程序还为<code>&lt;article&gt;</code>导航栏中的字幕使用了一个<code>h2</code>元素。</p>
<p>我们可以在一个<code>&lt;article&gt;</code>中声明<code>--color-love</code>值。现在字幕中的任何<code>&lt;h2&gt;</code>都将是蓝色而不是红色:</p>
<pre>:root {
  --color-danger: red;
}

h2 {
  color: var(--color-danger);
}

article {
  --color-love: #0000FF;
}
</pre>
<h3>字体大小</h3>
<p>字体大小是使用自定义属性的另一种方式，因为字体大小可以使用 CSS 作用域来更改。</p>
<p>这方面的一个例子可以用与上述例子相同的方式找到:</p>
<pre>:root {
  --heading-size: 24px;
}

h2 {
  font-size: var(--heading-size);
}

article {
  --heading-size: 18px;
}
</pre>
<p>在上面的代码块中，全局标题大小被设置为<code>24px</code>。在<code>article</code>选择器中，我们将其更新为<code>18px</code>。</p>
<h3>网格布局</h3>
<p>网格布局是 web 开发中最现代的趋势之一。我们可以使用 CSS 自定义属性为网格设置自定义布局，如下面的代码块所示:</p>
<pre>:root {
  --grid-width: 30%;
}

.grid-box {
  align-items: flex-end;
  width: var(--grid-width);
}

.product-grid {
  --grid-width: 35%;
}
</pre>
<h3>小跟班</h3>
<p>按钮是使用自定义 CSS 属性的好方法。这方面的一个例子是，一个按钮被全局设置样式，并可以用另一个自定义值更新，如下所示:</p>
<pre>:root {
  --button-color: blue;
  --button-color-white: white;
  --button-color-danger: red;
}

.button {
  background-color: var(--button-color);
  box-shadow: 2px 4px 0 var(--button-color-dark);
}
.button:hover {
  background-color: var(--button-color-dark);
  box-shadow: 0 0 0 var(--button-color-dark);
}

.form {
  --button-color: #ff571c;
  --button-color-dark: #cc5600;
  --button-color-light: #ffb64f;
}
</pre>
<h2>更改 JavaScript 状态</h2>
<p>自定义 CSS 属性可以使用 JavaScript 实时更改。当构建用户启用的主题、更改或演示多个布局或者为用户更改配色方案时，这很好。</p>
<p>CSS 自定义属性可用于更改任何应用程序的状态，如下面的代码块:</p>
<pre>const body = document.getElementByTagName("body")[0];
function change_vars(){
  if (!body.classsList.contains('changed') ) {
    body.style.setProperty('--color-primary', '#ff54ef');
    body.classList.add('changed');
  } else {
    body.style.setProperty('--color-primary', '#13efdc');
    body.classList.remove('changed');
  }
}
</pre>
<h2>作为 API 的 CSS 自定义属性</h2>
<p>CSS 自定义属性可以用作 API，特别是当它们作为 cdn 托管时。</p>
<p>让我们看看下面的代码块:</p>
<pre>// today's special is 
.today::after {
  content: var(--todaysSpecial); 
}
</pre>
<p>上面的代码块可以用来喜欢一个 API，使它易于使用，但是这是有挑战性的，不太容易访问。</p>
<h2>带有 React 的 CSS 自定义属性</h2>
<p>CSS 自定义属性可以在 React 应用程序中使用，这可以为 React 开发人员打开新的可能性。使用 CSS 变量，你可以做很多 JavaScript 做不到的事情。</p>
<p>要在 React 应用程序中使用自定义属性，首先需要一个文件。在我们的例子中，<code>constants.js</code>，保存所有与下面相似的设计符号:</p>
<pre>const SIZES = [
  4,
  8,
  12,
  16,
  20,
  24,
  28,
  32,
  36
];

const COLORS = {
  text: 'black',
  background: 'white',
  primary: 'purple',
  secondary: 'blue'
};
</pre>
<p>接下来，将文件直接导入到组件中，如下面的代码块所示:</p>
<pre>import { COLORS } from '../constant';

const Button = styled.button`
  background: ${COLORS.secondary};
`;
</pre>
<p>有了 CSS 变量，我们可以对变量做更多的事情，而不是改变它们，我们只能在需要的地方改变值。</p>
<p>在下一节中，我们将讨论一个著名的库，它使开发人员能够更容易地在 React 应用程序上执行自定义属性。</p>
<h2>反应自定义属性</h2>
<p><a href="https://github.com/danbahrami/react-custom-properties"> React 自定义属性</a>是一个应用 CSS 变量的 React 组件。使用 React 自定义属性，开发人员可以声明性地应用 CSS 自定义属性。</p>
<p>React 自定义属性可以使用节点程序包管理器通过以下命令进行安装:</p>
<pre>npm install react-custom-properties
</pre>
<p>接下来，像这样导入<code>CustomProperties</code>:</p>
<pre>import CustomProperties from 'react-custom-properties';
</pre>
<p>React Custom Properties 提供了一个<code>&lt;CustomProperties/&gt;</code>组件，该组件可用于在挂载时将传递给<code>properties</code>的 CSS 变量应用到其子节点。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>我们可以如下使用它:</p>
<pre>import React, { Component } from 'react';
import CustomProperties from 'react-custom-properties';

class App extends Component {
  render() {
    return {
      &lt;div&gt;
         &lt;CustomProperties properties={{ '--branding-color': '#000FFE' }}&gt;
          &lt;div className="navbar"&gt;
            this will have the background color #000FFE
          &lt;/div&gt;
        &lt;/CustomProperties&gt;
      &lt;/div&gt;
    );
  }
}
</pre>
<p>React 自定义属性还支持嵌套，以便父实例可以被子实例覆盖。你可以在这里了解更多关于 React 自定义属性的信息。</p>
<h2 id="conclusion">结论</h2>
<p>自定义 CSS 属性不仅可以帮助用户定义布局，还可以更新应用程序中的 CSS 值和变量。</p>
<p>虽然处于实验阶段，CSS 变量可以用作 API 和控制 JavaScript 状态。像 React 自定义属性这样的库使得在 React 应用程序中使用自定义变量变得更加容易。</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>你的前端是否占用了用户的 CPU？</h2><p>随着 web 前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端 CPU 使用、内存使用等感兴趣，</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>.</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用的 DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><p>现代化您调试 web 和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>