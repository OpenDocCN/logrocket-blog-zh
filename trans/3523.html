<html>
<head>
<title>Create a React Native app using Ignite boilerplate </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用Ignite样板文件创建React本机应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/#0001-01-01">https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在本教程中，我们将了解一下<a href="https://github.com/infinitered/ignite"> React本机Ignite样板文件</a>。具体来说，我们将用它来构建一个应用程序。在本教程结束时，您应该能够在自己的React本地项目中使用Ignite。</p>
<p>我们将讨论以下主题:</p>
<ul>
<li>使用Ignite创建新的React本地项目</li>
<li>点燃文件夹结构</li>
<li>加速开发的发电机</li>
<li>设计系统</li>
<li>定制组件</li>
<li>带反应导航的导航</li>
<li>用于状态管理的MobX状态树</li>
<li>调试用电抗器</li>
<li>隔离组件开发的故事书</li>
<li>测试数据存储的Jest</li>
<li>端到端测试的排毒</li>
</ul>
<h2 id="table-of-contents">目录</h2>

<h2 id="prerequisites">先决条件</h2>
<p>本教程假设您已经有了创建React本地应用的经验，并且您的机器已经安装了<a href="https://reactnative.dev/docs/environment-setup"> React本地开发环境</a>。</p>
<p>Ignite使用TypeScript，因此TypeScript知识会很有用，尽管您应该能够在没有任何TypeScript经验的情况下学习本教程。</p>
<h2 id="what-is-ignite">什么是Ignite？</h2>
<p>Ignite是React本地项目的样板文件。它是由Infinite Red的团队创建的，主要是因为他们在项目中使用了React Native。这意味着Ignite包含了他们应用于自己项目的所有最佳实践。</p>
<p>您可以<a href="https://github.com/infinitered/ignite">从他们的文档中了解关于Ignite </a>的更多信息。</p>
<h2 id="creating-a-new-react-native-project-with-ignite">使用Ignite创建新的React本地项目</h2>
<p>首先，您可以使用以下命令创建一个新的Ignite项目:</p>
<pre class="language-bash hljs">npx ignite-cli new HealthTracker
</pre>
<p>这将生成一个新的React本地项目，具有我在介绍中提到的所有功能。请注意，这将生成一个裸露的React原生项目。如果你想用<a href="https://expo.dev/"> Expo </a>代替，那么指定<code>--expo</code>选项如下:</p>
<pre class="language-bash hljs">npx ignite-cli new HealthTracker --expo
</pre>
<p>这是您生成新项目时的样子:</p>
<p><img data-attachment-id="138963" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/new-ignite-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project.png" data-orig-size="730,642" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="New Ignite project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project-300x264.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project.png" decoding="async" class="aligncenter size-full wp-image-138963 jetpack-lazy-image" src="../Images/fc75af73bdfead45d996f3e6bcff4e46.png" alt="New Ignite Project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project-300x264.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138963" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/new-ignite-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project.png" data-orig-size="730,642" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="New Ignite project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project-300x264.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138963" src="../Images/fc75af73bdfead45d996f3e6bcff4e46.png" alt="New Ignite Project" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project-300x264.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/new-ignite-project.png"/></noscript>
<p>如果您在安装时遇到问题，请务必查看GitHub repo上的<a href="https://github.com/infinitered/ignite#troubleshooting">故障排除</a>部分。就我个人而言，我在初始化Ignite项目时遇到了一个问题，因为我没有安装Node的LTS版本。在撰写本文时，它的版本是16.6.0。</p>
<p>安装后，您现在可以像在一个简单的React原生项目中一样运行该应用程序:</p>
<pre class="language-bash hljs">npx react-native run-android
npx react-native run-ios
</pre>
<p>您应该会看到这个欢迎屏幕:</p>
<p><img data-attachment-id="138966" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/ignite-welcome-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen.png" data-orig-size="694,1428" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Ignite welcome screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen-146x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen-498x1024.png" decoding="async" class="aligncenter size-full wp-image-138966 jetpack-lazy-image" src="../Images/e9eee070bc75038cd62ce48a5ea04f9c.png" alt="Ignite Welcome Screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen.png 694w, https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen-146x300.png 146w, https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen-498x1024.png 498w" data-lazy-sizes="(max-width: 694px) 100vw, 694px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138966" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/ignite-welcome-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen.png" data-orig-size="694,1428" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Ignite welcome screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen-146x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen-498x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138966" src="../Images/e9eee070bc75038cd62ce48a5ea04f9c.png" alt="Ignite Welcome Screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen.png 694w, https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen-146x300.png 146w, https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen-498x1024.png 498w" sizes="(max-width: 694px) 100vw, 694px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/ignite-welcome-screen.png"/></noscript>
<p>当您按下<strong>继续</strong>时，它会显示如何使用的快速指南:</p>
<p><img data-attachment-id="138968" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/quick-guide-to-ignite/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite.png" data-orig-size="696,1412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Quick guide to Ignite" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite-148x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite-505x1024.png" decoding="async" class="aligncenter size-full wp-image-138968 jetpack-lazy-image" src="../Images/ab269425cbbd23e7fed50d77e0154cd5.png" alt="Quick Guide to Ignite" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite.png 696w, https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite-148x300.png 148w, https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite-505x1024.png 505w" data-lazy-sizes="(max-width: 696px) 100vw, 696px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138968" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/quick-guide-to-ignite/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite.png" data-orig-size="696,1412" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Quick guide to Ignite" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite-148x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite-505x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138968" src="../Images/ab269425cbbd23e7fed50d77e0154cd5.png" alt="Quick Guide to Ignite" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite.png 696w, https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite-148x300.png 148w, https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite-505x1024.png 505w" sizes="(max-width: 696px) 100vw, 696px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/quick-guide-to-ignite.png"/></noscript>
<h3 id="additional-dependencies">其他依赖项</h3>
<p>除了Ignite依赖项之外，应用本身也依赖于以下库:</p>

<p>下面是安装所有这些组件的命令:</p>
<pre class="language-bash hljs">npm install date-fns random-id @react-navigation/bottom-tabs react-native-vector-icons
</pre>
<p>不要忘记遵循如何设置库的附加说明。这些通常会在他们的GitHub回购中指出，我在上面已经链接过了。</p>
<h2 id="ignite-folder-structure">点燃文件夹结构</h2>
<p>以下文件夹将出现在新生成的Ignite项目中。它上面已经有一些文件了。我们的项目并不需要其中的大部分，但在构建应用程序时将其作为参考是很有用的。</p>
<ul>
<li>这是你的导航器、配置、组件、屏幕、主题、实用程序以及其他所有与你的应用程序直接相关的东西的所在位置<ul>
<li><code>components</code> —这是所有组件将驻留的地方。每个组件都有自己的文件夹，并且包含组件文件及其故事文件。如果有任何特定于组件的资产，它们也可以驻留在这里</li>
<li><code>i18n</code> —包含应用程序的翻译文件</li>
<li><code>models</code> —您所有的应用模型及其测试文件都将驻留在这里。如果您有其他与模型相关的文件，比如类型，它们也应该驻留在这里</li>
<li>所有导航器和导航工具都将驻留在这里</li>
<li><code>screens</code> —这是所有屏幕组件将驻留的地方。每个屏幕都有自己的文件夹。屏幕直接需要的任何文件都应该添加到同一个文件夹中</li>
<li>这是应用程序主题的所在。这包括字体、版式、颜色和间距</li>
<li><code>utils</code> —放置整个应用程序中使用的助手和实用程序的地方</li>
<li><code>app.tsx</code> —应用程序的入口点</li>
</ul>
</li>
<li><code>bin</code> —包含初始化新应用程序时Ignite使用的设置和安装后脚本</li>
<li><code>e2e</code>——这是您放置所有与排毒端到端测试相关的文件的地方</li>
<li><code>ignite</code> —包含所有Ignite生成器模板</li>
<li>这是所有故事书配置和故事将驻留的地方</li>
<li><code>test</code> —包含Jest配置和模拟</li>
</ul>
<h2 id="project-overview">项目概述</h2>
<p>既然所有的基础都已经处理好了，现在让我们来看看我们将在本教程中构建什么。我们将建立一个简单的健康跟踪应用程序，有三个屏幕。</p>
<h3 id="create-food-screen">创建食物屏幕</h3>
<p>该屏幕用于添加用户通常食用的食物。这包括对食物健康程度的1到5级评价，1级为最不健康，5级为最健康。</p>
<p><img data-attachment-id="138970" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/food-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen.png" data-orig-size="730,1580" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Food screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen-473x1024.png" decoding="async" class="aligncenter size-full wp-image-138970 jetpack-lazy-image" src="../Images/36031c70ed36a055f67c1f8478094a37.png" alt="Food Screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen-473x1024.png 473w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen-710x1536.png 710w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138970" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/food-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen.png" data-orig-size="730,1580" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Food screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen-473x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138970" src="../Images/36031c70ed36a055f67c1f8478094a37.png" alt="Food Screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen-473x1024.png 473w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen-710x1536.png 710w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/food-screen.png"/></noscript>
<h3 id="log-food-screen">记录食物屏幕</h3>
<p>该屏幕用于记录用户正在食用的食物。</p>
<p><img data-attachment-id="138972" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/food-input-field/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field.png" data-orig-size="730,1580" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Food input field" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field-473x1024.png" decoding="async" class="aligncenter size-full wp-image-138972 jetpack-lazy-image" src="../Images/f36e9576b13bd5cd8088836d4b1b55b5.png" alt="Food Input Field" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field-473x1024.png 473w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field-710x1536.png 710w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138972" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/food-input-field/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field.png" data-orig-size="730,1580" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Food input field" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field-473x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138972" src="../Images/f36e9576b13bd5cd8088836d4b1b55b5.png" alt="Food Input Field" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field-473x1024.png 473w, https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field-710x1536.png 710w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/food-input-field.png"/></noscript>
<h3 id="report-screen">报告屏幕</h3>
<p>最后，该屏幕用于显示用户在特定时间段内所吃食物的总体评级。</p>
<p><img data-attachment-id="138974" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/time-filter/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter.png" data-orig-size="730,1580" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Time filter" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter-473x1024.png" decoding="async" class="aligncenter size-full wp-image-138974 jetpack-lazy-image" src="../Images/a37c6b5939029c17e0171f7442b118b0.png" alt="Time Filter" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter-473x1024.png 473w, https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter-710x1536.png 710w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138974" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/time-filter/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter.png" data-orig-size="730,1580" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Time filter" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter-473x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138974" src="../Images/a37c6b5939029c17e0171f7442b118b0.png" alt="Time Filter" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter-473x1024.png 473w, https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter-710x1536.png 710w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/time-filter.png"/></noscript>
<p>你可以在这个<a href="https://github.com/anchetaWern/React-Native-Ignite-HealthTracker"> GitHub repo </a>上找到该应用的完整源代码。</p>
<h2 id="building-the-app">构建应用程序</h2>
<p>现在是时候开始构建应用程序了。首先，创建添加新食物的屏幕:</p>
<pre class="language-bash hljs">npx ignite-cli generate screen create-food
</pre>
<p>这将生成<code>app/screens/create-food/create-food-screen.tsx</code>文件。使用Ignite的生成器生成的所有新屏幕都将在<code>app/screens</code>目录中创建一个新文件夹。它还会自动将其添加到<code>app/screens/index.ts</code>文件中。</p>
<h3 id="generators">发电机</h3>
<p>这就是生成器的强大之处:它们让您的生活变得简单，因为您不再需要手动创建您想要创建的文件。它们也已经带有一些默认代码；这使得从一开始就遵循特定的标准变得容易。</p>
<p>但是对于Ignite来说，只有一个标准，那就是Infinite Red的标准。如果您想创建自己的标准，Ignite还提供了一种方法来创建自己的生成器，或者至少定制Ignite已经有的生成器。但是我们不会在本教程中讨论这个问题。你可以通过<a href="https://github.com/infinitered/ignite/blob/master/docs/Generators.md#making-your-own-generators">查看文档</a>来了解。</p>
<h3 id="navigation">航行</h3>
<p>Ignite使用<a href="https://reactnavigation.org/"> React导航</a>实现导航。它允许我们根据用户当前导航到的位置显示不同的屏幕。如果你之前看过欢迎屏幕，这个屏幕使用了一个<a href="https://reactnavigation.org/docs/stack-navigator/">堆栈导航器</a>。您可以在<code>app/navigators/app-navigator.tsx</code>文件中找到代码。下面是该文件的一个片段:</p>
<pre class="language-javascript hljs">// app/navigators/app-navigator.tsx

import { createNativeStackNavigator } from "@react-navigation/native-stack"
import { WelcomeScreen, DemoScreen, DemoListScreen } from "../screens"

export type NavigatorParamList = {
  welcome: undefined
  demo: undefined
  demoList: undefined
  // 🔥 Your screens go here
}

// Documentation: https://reactnavigation.org/docs/stack-navigator/
const Stack = createNativeStackNavigator&lt;NavigatorParamList&gt;()

const AppStack = () =&gt; {
  return (
    &lt;Stack.Navigator
      screenOptions={{
        headerShown: false,
      }}
      initialRouteName="welcome"
    &gt;
      &lt;Stack.Screen name="welcome" component={WelcomeScreen} /&gt;
      &lt;Stack.Screen name="demo" component={DemoScreen} /&gt;
      &lt;Stack.Screen name="demoList" component={DemoListScreen} /&gt;
      {/** 🔥 Your screens go here */}
    &lt;/Stack.Navigator&gt;
  )
}
</pre>
<p>如果你以前使用过React导航，这应该很容易理解。如果没有，那么您可以查看以前就该主题编写的一些教程:</p>

<p>因此，为了显示我们新创建的屏幕，我们需要首先导入它:</p>
<pre class="language-javascript hljs">import { CreateFoodScreen } from "../screens"
</pre>
<p>然后把它加在<code>NavigatorParamList</code>上:</p>
<pre class="language-javascript hljs">export type NavigatorParamList = {
  CreateFoodScreen: undefined
}
</pre>
<p>最后，我们将它添加到stack navigator下，并将其设置为初始屏幕:</p>
<pre class="language-javascript hljs">const AppStack = () =&gt; {
  return (
    &lt;Stack.Navigator
      screenOptions={{
        headerShown: false,
      }}
      initialRouteName="createfood"
    &gt;
      &lt;Stack.Screen name="createfood" component={CreateFoodScreen} /&gt;
    &lt;/Stack.Navigator&gt;
  )
}
</pre>
<p>这将显示创建食物屏幕。继续创建其余的屏幕:</p>
<pre class="language-bash hljs">npx ignite-cli generate screen food-logger
npx ignite-cli generate screen report
</pre>
<h3 id="bottom-tab-navigator">底部选项卡导航器</h3>
<p>我们实际上不会使用堆栈导航器。我们将使用<a href="https://reactnavigation.org/docs/bottom-tab-navigator/">底部选项卡导航器</a>来代替。</p>
<p>更新<code>app/navigators/app-navigator.tsx</code>文件以包含并使用所有屏幕:</p>
<pre class="language-javascript hljs">// app/navigators/app-navigator.tsx
import Icon from "react-native-vector-icons/FontAwesome5"

import { CreateFoodScreen, FoodLoggerScreen, ReportScreen } from "../screens"

export type NavigatorParamList = {
  createFood: undefined
  foodLogger: undefined
  report: undefined
}

const Tab = createBottomTabNavigator&lt;NavigatorParamList&gt;()

const AppStack = () =&gt; {
  return (
    &lt;Tab.Navigator
      screenOptions={{
        headerShown: false,
      }}
      initialRouteName="createFood"
    &gt;
      &lt;Tab.Screen
        name="createFood"
        component={CreateFoodScreen}
        options={{
          tabBarIcon: () =&gt; &lt;Icon name="carrot" size={30} color="#333" /&gt;,
          title: "Create Food",
        }}
      /&gt;

      &lt;Tab.Screen
        name="foodLogger"
        component={FoodLoggerScreen}
        options={{
          tabBarIcon: () =&gt; &lt;Icon name="clipboard-list" size={30} color="#333" /&gt;,
          title: "Add Log",
        }}
      /&gt;

      &lt;Tab.Screen
        name="report"
        component={ReportScreen}
        options={{
          tabBarIcon: () =&gt; &lt;Icon name="chart-area" size={30} color="#333" /&gt;,
          title: "Report",
        }}
      /&gt;
    &lt;/Tab.Navigator&gt;
  )
}
</pre>
<p>完成后，您应该会看到所有可以使用底部选项卡导航的屏幕:</p>
<p><img data-attachment-id="138976" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/create-food-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen.png" data-orig-size="698,1406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create food screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen-149x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen-508x1024.png" decoding="async" class="aligncenter size-full wp-image-138976 jetpack-lazy-image" src="../Images/a866c03f1c5ef450dfa036c0042f25cc.png" alt="Create Food Screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen.png 698w, https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen-149x300.png 149w, https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen-508x1024.png 508w" data-lazy-sizes="(max-width: 698px) 100vw, 698px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138976" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/create-food-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen.png" data-orig-size="698,1406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create food screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen-149x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen-508x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138976" src="../Images/a866c03f1c5ef450dfa036c0042f25cc.png" alt="Create Food Screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen.png 698w, https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen-149x300.png 149w, https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen-508x1024.png 508w" sizes="(max-width: 698px) 100vw, 698px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/create-food-screen.png"/></noscript>
<h3 id="components">成分</h3>
<p>在添加屏幕功能之前，我们先来看看如何使用Ignite创建新组件。Ignite已经提供了一些组件，可以用来构建应用程序的UI。它们的设计考虑到了灵活性和可定制性，因此您应该能够轻松应用自己的定制设计系统。</p>
<p>您可以使用生成器创建新零部件:</p>
<pre>npx ignite-cli generate component Radio
</pre>
<p>这将在<code>app/components</code>目录下创建一个新文件夹。文件夹中有两个文件:一个用于组件本身，另一个用于故事书测试。让我们首先添加实际组件的代码:</p>
<pre class="language-javascript hljs">// app/components/radio/radio.tsx
import * as React from "react"
import { TextStyle, View, ViewStyle, TouchableOpacity } from "react-native"
import { observer } from "mobx-react-lite"
import { color, typography } from "../../theme"
import { Text } from "../text/text"
import { RadioProps } from "./radio.props"

const CONTAINER: ViewStyle = {
  flexDirection: "row",
  alignItems: "center",
  marginRight: 45,
  marginBottom: 10,
}

const ICON: ViewStyle = {
  height: 10,
  width: 10,
  borderRadius: 7,
  backgroundColor: "#187DE6",
}

const TEXT: TextStyle = {
  fontFamily: typography.primary,
  fontSize: 16,
  color: color.primary,
  marginLeft: 5,
}

const BODY: ViewStyle = {
  height: 20,
  width: 20,
  backgroundColor: "#F8F8F8",
  borderRadius: 10,
  borderWidth: 1,
  borderColor: "#E6E6E6",
  alignItems: "center",
  justifyContent: "center",
}

/**
 * Describe your component here
 */
export const Radio = observer(function Radio(props: RadioProps) {
  const { style, item, selected, setSelected } = props
  const styles = Object.assign({}, CONTAINER, style)

  return (
    &lt;View style={styles}&gt;
      &lt;TouchableOpacity
        onPress={() =&gt; {
          setSelected(item.value)
        }}
        style={BODY}
      &gt;
        {selected ? &lt;View style={ICON} /&gt; : null}
      &lt;/TouchableOpacity&gt;
      &lt;TouchableOpacity
        onPress={() =&gt; {
          setSelected(item.value)
        }}
      &gt;
        &lt;Text style={TEXT}&gt;{item.title}&lt;/Text&gt;
      &lt;/TouchableOpacity&gt;
    &lt;/View&gt;
  )
})
</pre>
<p>prop类型与代码的其余部分是分开的。这是关于你可以作为道具传入什么值(以及它们的类型)的文档。这也是Ignite默认使用TypeScript的原因之一。由于类型被大量使用，它在代码库中不会像二等公民一样:</p>
<pre class="language-javascript hljs">// app/components/radio/radio.props.ts
import React from "react"
import { StyleProp, ViewStyle } from "react-native"

export interface RadioProps {
  /**
   * An optional style override useful for padding &amp; margin.
   */
  style?: StyleProp&lt;ViewStyle&gt;

  item?: Object

  selected?: boolean

  setSelected: Function
}
</pre>
<h3 id="design-system">设计系统</h3>
<p>Ignite让定制应用程序的外观变得非常容易。与更改<code>app/theme</code>文件夹中的应用主题相关的所有内容。以下是这些文件的简要概述:</p>
<ul>
<li><code>palette.ts</code> —您可以在此添加应用程序的调色板</li>
<li><code>color.ts</code> —为颜色赋予更多的描述性角色(例如，主要、错误、警告)</li>
<li><code>spacing.ts</code> —用于指定空白尺寸</li>
<li><code>timing.ts</code> —用于动画计时</li>
<li><code>typography.ts</code> —用于改变字体样式</li>
</ul>
<p>您也可以使用自定义字体。将自定义字体复制到<code>theme/fonts</code>文件夹中。</p>
<p>接下来，您需要将其复制到Xcode项目中。您可以使用React原生矢量图标使用的同一<code>Fonts</code>文件夹:</p>
<p><img data-attachment-id="138978" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/custom-font/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font.png" data-orig-size="674,1104" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Custom font" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font-183x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font-625x1024.png" decoding="async" class="aligncenter size-full wp-image-138978 jetpack-lazy-image" src="../Images/35dab136a054a312451075350a8ab1cd.png" alt="Custom Font" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font.png 674w, https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font-183x300.png 183w, https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font-625x1024.png 625w" data-lazy-sizes="(max-width: 674px) 100vw, 674px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138978" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/custom-font/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font.png" data-orig-size="674,1104" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Custom font" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font-183x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font-625x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138978" src="../Images/35dab136a054a312451075350a8ab1cd.png" alt="Custom Font" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font.png 674w, https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font-183x300.png 183w, https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font-625x1024.png 625w" sizes="(max-width: 674px) 100vw, 674px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-font.png"/></noscript>
<p>接下来，将其添加到<code>UIAppFonts</code>字段下的<code>ios/HealthTracker/Info.plist file</code>:</p>
<pre class="language-xml hljs">&lt;key&gt;UIAppFonts&lt;/key&gt;
&lt;array&gt;

  &lt;string&gt;Zocial.ttf&lt;/string&gt;
  &lt;string&gt;PassionsConflict-Regular.ttf&lt;/string&gt;
&lt;/array&gt;
</pre>
<p>最后，用字体的名称更新<code>app/theme/typography.ts</code>文件。这是区分大小写的，所以请确保使用该字体的文件名:</p>
<pre class="language-javascript hljs">// app/theme/typography.ts
export const typography = {
  /**
   * The primary font.  Used in most places.
   */
  primary: Platform.select({
    ios: "PassionsConflict-Regular",
    android: "PassionsConflict-Regular",
  }),
</pre>
<p>完成后，自定义字体就可用了。请注意，这不会改变应用程序中使用的所有字体。如您所见，底部标签文本仍然使用默认字体。我让你自己去想:</p>
<p><img data-attachment-id="138980" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/fancy-font/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font.png" data-orig-size="730,1580" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fancy font" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font-473x1024.png" decoding="async" class="aligncenter size-full wp-image-138980 jetpack-lazy-image" src="../Images/fe6b9a3d0ca242449275bc0d4b3fcc37.png" alt="Fancy Font" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font-473x1024.png 473w, https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font-710x1536.png 710w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138980" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/fancy-font/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font.png" data-orig-size="730,1580" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fancy font" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font-473x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138980" src="../Images/fe6b9a3d0ca242449275bc0d4b3fcc37.png" alt="Fancy Font" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font-473x1024.png 473w, https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font-710x1536.png 710w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/fancy-font.png"/></noscript>
<p>对于Android，请参考您项目中的<code>assets/fonts/custom-fonts.md</code>文件，了解如何在Android中使用自定义字体。</p>
<h3 id="storybook">故事书</h3>
<p>使用Ignite的一个主要优点是，它使得在项目中采用最佳实践变得非常容易。</p>
<p>这些最佳实践之一是隔离组件开发和测试。这项工作的最佳工具是故事书。通过简单地使用组件生成器，您已经可以免费获得它了。因此，您所要做的就是更新代码，为组件添加每个可能的用例:</p>
<pre class="language-javascript hljs">// app/components/radio/radio.story.tsx

import * as React from "react"
import { storiesOf } from "@storybook/react-native"
import { StoryScreen, Story, UseCase } from "../../../storybook/views"

import { Radio } from "./radio"

declare let module

storiesOf("Radio", module)
  .addDecorator((fn) =&gt; &lt;StoryScreen&gt;{fn()}&lt;/StoryScreen&gt;)
  .add("States", () =&gt; (
    &lt;Story&gt;
      &lt;UseCase text="Unselected" usage="When not yet selected."&gt;
        &lt;Radio
          item={{ title: "title", value: "value" }}
          setSelected={false}
          setSelected={() =&gt; {
            console.log("selected radio")
          }}
        /&gt;
      &lt;/UseCase&gt;

      &lt;UseCase text="Selected" usage="When selected."&gt;
        &lt;Radio
          item={{ title: "title", value: "value" }}
          selected
          setSelected={() =&gt; {
            console.log("selected radio")
          }}
        /&gt;
      &lt;/UseCase&gt;
    &lt;/Story&gt;
  ))
</pre>
<p>如果你是故事书的新手，一定要浏览一下<a href="https://storybook.js.org/tutorials/intro-to-storybook/react-native/en/get-started/">故事书的React Native教程</a>。</p>
<p>要查看Storybook，请在项目的根目录下执行以下命令:</p>
<pre class="language-bash hljs">npm run storybook
</pre>
<p>这将打开一个新的浏览器窗口，但我们并不真的需要它，所以你可以关闭它。在模拟器上，按下<strong> Ctrl </strong> + <strong> M </strong>(或<strong> Command </strong> + <strong> M </strong>)查看应用程序中的组件。这显示了React本地开发菜单。点击<strong>切换故事书</strong>:</p>
<p><img data-attachment-id="138982" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/react-native-devmenu/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu.png" data-orig-size="594,850" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native devmenu" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu-210x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu.png" decoding="async" class="aligncenter size-full wp-image-138982 jetpack-lazy-image" src="../Images/b0df74ab712ebc9646d129683cee372b.png" alt="React Native dev menu" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu.png 594w, https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu-210x300.png 210w" data-lazy-sizes="(max-width: 594px) 100vw, 594px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138982" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/react-native-devmenu/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu.png" data-orig-size="594,850" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native devmenu" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu-210x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138982" src="../Images/b0df74ab712ebc9646d129683cee372b.png" alt="React Native dev menu" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu.png 594w, https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu-210x300.png 210w" sizes="(max-width: 594px) 100vw, 594px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-devmenu.png"/></noscript>
<p>单击它将显示默认的文本组件。点击左下角的<strong>导航器</strong>，将会显示所有已经添加到故事书的组件。默认情况下，Ignite的所有内置组件都已经列在这里了。您也可以使用过滤器来搜索特定组件:</p>
<p><img data-attachment-id="138984" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/filter-components/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components.png" data-orig-size="700,1360" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Filter components" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components-154x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components-527x1024.png" decoding="async" class="aligncenter size-full wp-image-138984 jetpack-lazy-image" src="../Images/35425867c47ba96755aa1ca9260df072.png" alt="Filter Components" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components.png 700w, https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components-154x300.png 154w, https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components-527x1024.png 527w" data-lazy-sizes="(max-width: 700px) 100vw, 700px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138984" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/filter-components/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components.png" data-orig-size="700,1360" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Filter components" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components-154x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components-527x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138984" src="../Images/35425867c47ba96755aa1ca9260df072.png" alt="Filter Components" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components.png 700w, https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components-154x300.png 154w, https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components-527x1024.png 527w" sizes="(max-width: 700px) 100vw, 700px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/filter-components.png"/></noscript>
<p>我们刚刚创建的radio组件不会在此列出。您需要首先将它添加到<code>storybook/storybook-registry.ts</code>文件中，因为当您生成一个新组件时，它不会自动添加到这里:</p>
<pre class="language-javascript hljs">// storybook/storybook-registry.ts
require("../app/components/header/header.story")

// add this
require("../app/components/radio/radio.story")
</pre>
<p>完成后，您应该会看到无线电组件:</p>
<p><img data-attachment-id="138986" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/selected-title/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title.png" data-orig-size="698,1366" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Selected title" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title-153x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title-523x1024.png" decoding="async" class="aligncenter size-full wp-image-138986 jetpack-lazy-image" src="../Images/bcfa505ce3a5e43103809aea0afba977.png" alt="Selected Title" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title.png 698w, https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title-153x300.png 153w, https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title-523x1024.png 523w" data-lazy-sizes="(max-width: 698px) 100vw, 698px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138986" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/selected-title/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title.png" data-orig-size="698,1366" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Selected title" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title-153x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title-523x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138986" src="../Images/bcfa505ce3a5e43103809aea0afba977.png" alt="Selected Title" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title.png 698w, https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title-153x300.png 153w, https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title-523x1024.png 523w" sizes="(max-width: 698px) 100vw, 698px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/selected-title.png"/></noscript>
<h3 id="create-the-food-screen">创建食物屏幕</h3>
<p>现在让我们回到创建食物屏幕:</p>
<pre class="language-javascript hljs">// app/screens/create-food/create-food-screen.tsx

import React, { FC, useState, useEffect } from "react"
import { observer } from "mobx-react-lite"
import { ViewStyle } from "react-native"
import { StackScreenProps } from "@react-navigation/stack"

var randomId = require("random-id")

import { NavigatorParamList } from "../../navigators"
import { Screen, Text, TextField, Button, Radio, Spacer } from "../../components"

import { color } from "../../theme"

import { FoodStoreModel } from "../../models/food-store/food-store"

import { food_ratings } from "../../config/app"

import { useStores } from "../../models"

const ROOT_STYLE: ViewStyle = {
  backgroundColor: color.palette.black,
  flex: 1,
  padding: 20,
}

export const CreateFoodScreen: FC&lt;StackScreenProps&lt;NavigatorParamList, "createFood"&gt;&gt; = observer(
  ({ navigation }) =&gt; {
    const [food, setFood] = useState("")
    const [rating, setRating] = useState(2)

    const [saveButtonText, setSaveButtonText] = useState("Save")

    const { foodStore } = useStores()

    const resetForm = () =&gt; {
      setFood("")
      setRating(2)
    }

    const saveFood = () =&gt; {
      foodStore.saveFood({
        id: randomId(10),
        name: food,
        rating,
      })

      resetForm()

      setSaveButtonText("Saved!")

      setTimeout(() =&gt; {
        setSaveButtonText("Save")
      }, 1800)
    }

    return (
      &lt;Screen style={ROOT_STYLE} preset="scroll"&gt;
        &lt;TextField
          onChangeText={(value) =&gt; setFood(value)}
          inputStyle={{ color: color.palette.black }}
          value={food}
          label="Food"
          placeholder="Pinakbet"
          testID="food"
        /&gt;

        &lt;Spacer size={10} /&gt;

        &lt;Text preset="bold" text="Rating" /&gt;
        {food_ratings.map((item, index) =&gt; {
          const selected = item.rating === rating
          return (
            &lt;Radio
              item={{ title: item.title, value: item.rating }}
              key={index}
              selected={selected}
              setSelected={setRating}
            /&gt;
          )
        })}

        &lt;Spacer size={30} /&gt;

        &lt;Button text={saveButtonText} preset="large" onPress={saveFood} /&gt;
      &lt;/Screen&gt;
    )
    // },
  },
)
</pre>
<p>从上面的代码中，您可以看到它遵循React Native中屏幕代码的常见模式:顶部导入，然后是样式，最后是屏幕主体。只要你在所有的屏幕代码中应用相同的模式，任何事情都会发生。</p>
<p>请使用<a href="https://github.com/anchetaWern/React-Native-Ignite-HealthTracker"> GitHub repo </a>作为上述代码使用的所有代码的参考，因为我们不会在本教程中遍历所有代码。</p>
<h3 id="the-mobx-state-tree-library">MobX状态树库</h3>
<p>在创建食物屏幕的代码中，我们使用了<code>FoodStoreModel</code>作为数据存储。实现这一点的底层库是<a href="https://mobx-state-tree.js.org/intro/welcome"> MobX-state-tree </a>。</p>
<p>如果你已经使用过<a href="https://mobx.js.org/README.html"> MobX </a>，这两者之间的主要区别在于MobX-state-tree提供了一个结构，否则将是一个普通的MobX。MobX-state-tree允许您轻松实现应用程序数据的集中存储，拍摄快照，并从快照恢复应用程序状态。</p>
<p>仍然在<code>app/screens/create-food/create-food-screen.tsx</code>文件中，这里是我们如何使用MobX-state-tree的。首先，您需要导入商店模型:</p>
<pre class="language-javascript hljs">import { FoodStoreModel } from "../../models/food-store/food-store"
</pre>
<p>接下来，导入<code>useStores</code>上下文。这允许您访问添加到根存储的所有存储:</p>
<pre class="language-javascript hljs">import { useStores } from "../../models"
</pre>
<p>然后，您可以使用它来访问<code>foodStore</code>:</p>
<pre class="language-javascript hljs">const { foodStore } = useStores()
</pre>
<p>这允许您调用存储中的任何方法。这包括保存食物的方法:</p>
<pre class="language-javascript hljs">foodStore.saveFood({
  id: randomId(10),
  name: food,
  rating,
})
</pre>
<p>您可以通过执行以下命令在Ignite中生成模型:</p>
<pre class="language-bash hljs">npx ignite-cli generate model &lt;name of model&gt;
</pre>
<p>在本例中，我们希望生成食品商店模型:</p>
<pre class="language-bash hljs">npx ignite-cli generate model food-store
</pre>
<p>这将在<code>app/models</code>目录下创建一个名为<code>food-store</code>的新文件夹。文件夹中有两个文件:<code>food-store.ts</code>是模型本身的文件，<code>food-store.test.ts</code>是模型的Jest测试。在本教程的后面部分，我们将看看如何使用Jest来测试模型。</p>
<p>在模型中，您需要声明以下内容:</p>
<ul>
<li>道具—该模型的字段。在这种情况下，我们只有一个数组<code>foods</code>。我们可以通过使用另一个模型(<code>FoodModel</code>)来指定各个字段的数据类型</li>
<li>视图—允许您返回、过滤或排序存储的数据。所有视图都可以像模型中的属性一样被访问</li>
<li>操作—这些是在存储中操作数据的方法。在这种情况下，我们只想向它推送新数据</li>
</ul>
<p>以下是食品店模型的代码:</p>
<pre class="language-javascript hljs">// app/models/food-store/food-store.ts
import { Instance, SnapshotIn, SnapshotOut, types } from "mobx-state-tree"

import { FoodModel, FoodSnapshotIn } from "../food/food"
/**
 * Model description here for TypeScript hints.
 */

export const FoodStoreModel = types
  .model("FoodStore")
  .props({
    foods: types.optional(types.array(FoodModel), []),
  })
  .views((self) =&gt; ({
    get allFoods() {
      return self.foods
    },
  })) // eslint-disable-line @typescript-eslint/no-unused-vars
  .actions((self) =&gt; ({
    saveFood: (foodSnapshot: FoodSnapshotIn) =&gt; {
      self.foods.push(foodSnapshot)
    },
  })) // eslint-disable-line @typescript-eslint/no-unused-vars

export interface FoodStore extends Instance&lt;typeof FoodStoreModel&gt; {}
export interface FoodStoreSnapshotOut extends SnapshotOut&lt;typeof FoodStoreModel&gt; {}
export interface FoodStoreSnapshotIn extends SnapshotIn&lt;typeof FoodStoreModel&gt; {}
export const createFoodStoreDefaultModel = () =&gt; types.optional(FoodStoreModel, {})
</pre>
<p>接下来，生成食物模型:</p>
<pre class="language-bash hljs">npx ignite-cli generate model food
</pre>
<p>这是食物模型的代码。这允许您指定需要传递给食品商店模型的每个对象的形状:</p>
<pre class="language-javascript hljs">// app/models/food/food.ts
import { Instance, SnapshotIn, SnapshotOut, types } from "mobx-state-tree"

/**
 * Model description here for TypeScript hints.
 */

export const FoodModel = types
  .model("Food")
  .props({
    id: types.identifier,
    name: types.string,
    rating: types.integer,
  })
  .views((self) =&gt; ({})) // eslint-disable-line @typescript-eslint/no-unused-vars
  .actions((self) =&gt; ({})) // eslint-disable-line @typescript-eslint/no-unused-vars

export interface Food extends Instance&lt;typeof FoodModel&gt; {}
export interface FoodSnapshotOut extends SnapshotOut&lt;typeof FoodModel&gt; {}
export interface FoodSnapshotIn extends SnapshotIn&lt;typeof FoodModel&gt; {}
export const createFoodDefaultModel = () =&gt; types.optional(FoodModel, {})
</pre>
<p>最后一步是将食物存储包含在根存储中。如果您想要全局访问您创建的每个商店，您需要对它们执行此操作:</p>
<pre class="language-javascript hljs">// app/models/root-store/root-store.ts

// ...
import { FoodStoreModel } from "../../models/food-store/food-store" // add this

export const RootStoreModel = types.model("RootStore").props({
  // ...
  // add this
  foodStore: types.optional(FoodStoreModel, {} as any),

})
</pre>
<h3 id="testing-models-with-jest">用Jest测试模型</h3>
<p>Jest是一个JavaScript测试框架。默认情况下，每次生成新模型时，Ignite都会生成一个测试。我们之前已经创建了食品店模型，所以它应该在<code>app/models/food-store/food-store.test.ts</code>生成了相应的测试文件。添加以下代码来验证保存新食物的API是否有效。我们可以分三步实施测试:</p>
<ol>
<li>创建食品店模型的新实例</li>
<li>调用<code>saveFood()</code>方法</li>
<li>使用Jest比较由<code>allFoods</code>视图返回的值和我们期望的硬编码值</li>
</ol>
<p>代码如下:</p>
<pre class="language-javascript hljs">// app/models/food-store/food-store.test.ts

import { FoodStoreModel } from "./food-store"

test("can be created", () =&gt; {
  const instance = FoodStoreModel.create()

  instance.saveFood({
    id: "somerandomid123",
    name: "fried chicken",
    rating: 2,
  })

  expect(instance.allFoods).toStrictEqual([
    {
      id: "somerandomid123",
      name: "fried chicken",
      rating: 2,
    },
  ])
})
</pre>
<p>要运行所有测试:</p>
<pre class="language-bash hljs">npm run test
</pre>
<p>这将返回以下内容:</p>
<p><img data-attachment-id="138988" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/jest-run-all-tests/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests.png" data-orig-size="730,517" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Jest run all tests" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests-300x212.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests.png" decoding="async" class="aligncenter size-full wp-image-138988 jetpack-lazy-image" src="../Images/b7654979f3dcd402786a169b90297e1a.png" alt="Jest Run All Tests" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests-300x212.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138988" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/jest-run-all-tests/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests.png" data-orig-size="730,517" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Jest run all tests" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests-300x212.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138988" src="../Images/b7654979f3dcd402786a169b90297e1a.png" alt="Jest Run All Tests" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests-300x212.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/jest-run-all-tests.png"/></noscript>
<p>如果您想要运行一个特定的测试(例如，只运行食品商店中的测试)，您可以使用文件的名称来实现:</p>
<pre class="language-bash hljs">npm run test -t 'food-store'
</pre>
<h3 id="the-food-logger-screen">食物记录器屏幕</h3>
<p>回到屏幕，我们需要实现的下一个是食物记录器屏幕:</p>
<pre class="language-bash hljs">npx ignite-cli generate screen food-logger
</pre>
<p>该屏幕允许用户搜索和选择通过创建食物屏幕添加的食物。保存后，它会设置食物的详细信息和日期。日期是至关重要的一部分，因为它是用于稍后在报告屏幕中对数据进行排序的。以下是食物记录器屏幕的代码:</p>
<pre class="language-javascript hljs">// app/screens/food-logger/food-logger-screen.tsx

import React, { FC, useState } from "react"
import { observer } from "mobx-react-lite"
import { ViewStyle } from "react-native"
import { StackScreenProps } from "@react-navigation/stack"

var randomId = require("random-id")

import { NavigatorParamList } from "../../navigators"
import { Screen, Text, TextField, SelectableText, Button, Spacer } from "../../components"

import { color } from "../../theme"

import { useStores } from "../../models"

const ROOT_STYLE: ViewStyle = {
  backgroundColor: color.palette.black,
  flex: 1,
  padding: 20,
}

export const FoodLoggerScreen: FC&lt;StackScreenProps&lt;NavigatorParamList, "foodLogger"&gt;&gt; = observer(
  function FoodLoggerScreen() {
    const { foodStore, foodLogStore } = useStores()

    const [food, setFood] = useState("")
    const [selectedFood, setSelectedFood] = useState(null)

    const filteredFoods = food
      ? foodStore.allFoods.filter((item) =&gt; {
          return item.name.toLowerCase().includes(food.toLowerCase())
        })
      : []

    const hasNoFoods = foodStore.allFoods.length === 0
    const hasFoodsButNotFiltered = foodStore.allFoods.length &gt; 0 &amp;&amp; filteredFoods.length === 0

    const resetForm = () =&gt; {
      setFood("")
      setSelectedFood(null)
    }

    const saveLog = () =&gt; {
      const selected_food_data = foodStore.allFoods.find((item) =&gt; item.id === selectedFood)

      foodLogStore.saveLog({
        id: randomId(10),
        food_id: selectedFood,
        rating: selected_food_data.rating,
        date: new Date(),
      })

      resetForm()
    }

    return (
      &lt;Screen style={ROOT_STYLE} preset="scroll"&gt;
        &lt;TextField
          onChangeText={(value) =&gt; setFood(value)}
          inputStyle={{ color: color.palette.black }}
          value={food}
          label="Food"
          placeholder="Pinakbet"
        /&gt;

        {hasNoFoods &amp;&amp; &lt;Text text="Create some foods first.." /&gt;}

        {hasFoodsButNotFiltered &amp;&amp; &lt;Text text="Type something.." /&gt;}

        {filteredFoods.map((item) =&gt; {
          const isSelected = item.id === selectedFood
          return (
            &lt;SelectableText
              text={item.name}
              key={item.id}
              id={item.id}
              setSelected={setSelectedFood}
              isSelected={isSelected}
            /&gt;
          )
        })}

        &lt;Spacer size={30} /&gt;

        &lt;Button text="Save" preset="large" onPress={saveLog} /&gt;
      &lt;/Screen&gt;
    )
  },
)
</pre>
<p>您可以在repo中查看<code>SelectableText</code>组件、食物日志存储和食物日志模型的代码。</p>
<h3 id="the-report-screen">报告屏幕</h3>
<p>最后，我们看到了报告屏幕:</p>
<pre class="language-bash hljs">npx ignite-cli generate screen report
</pre>
<p>这允许用户从过滤所基于的一组时间范围列表中进行选择。在<a href="https://date-fns.org/"> date-fns </a>库的帮助下，实现变得更加容易。从那里开始，我们所做的就是使用<code>reduce</code>并求平均值来找出结果属于哪个等级:</p>
<pre class="language-javascript hljs">import React, { FC, useState, useEffect } from "react"
import { observer } from "mobx-react-lite"
import { ViewStyle, View } from "react-native"
import { StackScreenProps } from "@react-navigation/stack"

import { isToday, isThisWeek, isThisMonth } from "date-fns"

import { NavigatorParamList } from "../../navigators"
import { Screen, Text, Radio } from "../../components"

import { isWhatPercentOf } from "../../utils/numbers"

import { color, spacing } from "../../theme"

import { time_ranges, health_ratings } from "../../config/app"

import { useStores } from "../../models"

const ROOT_STYLE: ViewStyle = {
  backgroundColor: color.palette.black,
  flex: 1,
  padding: spacing.large,
}

const RATING_CONTAINER_STYLE: ViewStyle = {
  flex: 1,
  justifyContent: "center",
  alignItems: "center",
}

export const ReportScreen: FC&lt;StackScreenProps&lt;NavigatorParamList, "report"&gt;&gt; = observer(
  function ReportScreen({ navigation }) {
    const { foodLogStore } = useStores()

    const [timeRange, setTimeRange] = useState("today")
    const [rating, setRating] = useState("---")

    const getRating = (timeRange) =&gt; {
      const filteredLog = foodLogStore.allLogs.filter((item) =&gt; {
        const currentDateTime = item.date

        if (timeRange === "today") {
          return isToday(currentDateTime)
        } else if (timeRange === "this week") {
          return isThisWeek(currentDateTime)
        } else if (timeRange === "this month") {
          return isThisMonth(currentDateTime)
        }
        return false
      })

      const ratings = filteredLog.map((item) =&gt; {
        return item.rating
      })

      const reduced = ratings.reduce((a, b) =&gt; a + b, 0)

      const avg = reduced / ratings.length
      const max_avg = (5 * ratings.length) / ratings.length

      const percent = isWhatPercentOf(avg, max_avg)

      const found = health_ratings.find((item) =&gt; {
        return percent &gt;= item.range[0] &amp;&amp; percent &lt;= item.range[1]
      })

      if (found) {
        setRating(found.title)
      }
    }

    useEffect(() =&gt; {
      const unsubscribe = navigation.addListener("focus", () =&gt; {
        getRating(timeRange)
      })

      // Return the function to unsubscribe from the event so it gets removed on unmount
      return unsubscribe
    }, [navigation, timeRange])

    useEffect(() =&gt; {
      getRating(timeRange)
    }, [timeRange])

    return (
      &lt;Screen style={ROOT_STYLE} preset="scroll"&gt;
        &lt;View&gt;
          &lt;Text preset="bold" text="Filter" /&gt;
          {time_ranges.map((item, index) =&gt; {
            const selected = item == timeRange
            return (
              &lt;Radio
                item={{ title: item, value: item }}
                key={index}
                selected={selected}
                setSelected={setTimeRange}
              /&gt;
            )
          })}
        &lt;/View&gt;

        &lt;View style={RATING_CONTAINER_STYLE}&gt;
          &lt;Text preset="header" text={rating} /&gt;
          &lt;Text text="Rating" /&gt;
        &lt;/View&gt;
      &lt;/Screen&gt;
    )
  },
)
</pre>
<p>你知道该怎么做:检查所有丢失代码的回购。</p>
<h3 id="debugging-with-reactotron">用Reactotron调试</h3>
<p>使用<code>console.log()</code>来调试所有的东西没有错，但是为了更快的反馈循环，我推荐<a href="https://github.com/infinitered/reactotron"> Reactotron </a>来调试你的React原生应用。如果您还没有安装它，请继续安装。</p>
<p>为了让Reactotron检测到应用程序，Reactotron必须在应用程序之前首先启动。因此，如果您已经有一个正在运行的应用程序实例，请停止它，启动Reactotron，然后再次启动应用程序。</p>
<p>Reactotron看起来是这样的:</p>
<p><img data-attachment-id="138990" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/reactotron/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron.png" data-orig-size="730,902" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Reactotron" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-243x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron.png" decoding="async" class="aligncenter size-full wp-image-138990 jetpack-lazy-image" src="../Images/388ab398cc393d6f29215095d76e08f7.png" alt="Reactotron" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-243x300.png 243w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138990" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/reactotron/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron.png" data-orig-size="730,902" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Reactotron" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-243x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138990" src="../Images/388ab398cc393d6f29215095d76e08f7.png" alt="Reactotron" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-243x300.png 243w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron.png"/></noscript>
<p>大多数时候，你只会触及<strong>时间线</strong>和<strong>状态</strong>。从上面的截图可以看出，它已经默认记录了异步存储、导航和MobX-state-tree存储。</p>
<p>想要类似<code>console.log()</code>的东西，还是可以的:</p>
<pre class="language-javascript hljs">import Reactotron from "reactotron-react-native"

Reactotron.log('something')
</pre>
<p>还可以监控店铺。这里我添加了<code>foodStore.foods</code>用于监控，所以每次我保存一个新的食物，它都会被添加到这个数组中:</p>
<p><img data-attachment-id="138992" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/reactotron-state/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state.png" data-orig-size="730,492" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Reactotron state" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state-300x202.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state.png" decoding="async" class="aligncenter size-full wp-image-138992 jetpack-lazy-image" src="../Images/dcf11d4f2c874ba6c60dcc5bf6b02942.png" alt="Reactotron State" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state-300x202.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138992" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/reactotron-state/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state.png" data-orig-size="730,492" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Reactotron state" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state-300x202.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138992" src="../Images/dcf11d4f2c874ba6c60dcc5bf6b02942.png" alt="Reactotron State" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state-300x202.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/reactotron-state.png"/></noscript>
<p>这就是如何使用Reactotron的快速教程。如果你想了解更多，请务必查看Reactotron文档。</p>
<h3 id="end-to-end-testing-with-detox">利用Detox进行端到端测试</h3>
<p><a href="https://wix.github.io/Detox/"> Detox </a>是React原生应用的端到端测试自动化框架。</p>
<p>Ignite只负责在项目本身内部设置排毒。你仍然需要在你的机器中设置排毒依赖来让它工作。我们不会在本教程中详细介绍排毒，所以一定要看看下面的指南，以便做好准备。</p>
<p>跳过在您的项目中设置Detox的说明，因为在您使用Ignite生成新项目时，Ignite已经被考虑到了:</p>

<p>设置好机器后，打开项目目录根目录下的<code>package.json</code>文件，并更新<code>detox.configurations.ios.sim.debug.build</code>属性:</p>
<pre>"xcodebuild -workspace ios/HealthTracker.xcworkspace -scheme HealthTracker -sdk iphonesimulator -derivedDataPath ios/build"
</pre>
<p>您还需要将设备<code>name</code>和<code>os</code>更新为您机器上安装的东西。您可以通过执行以下命令列出所有可用的模拟器:</p>
<pre class="language-bash hljs">xcrun simctl list devices available
</pre>
<p>这将返回如下内容:</p>
<p><img data-attachment-id="138994" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/list-of-ios-devices/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices.png" data-orig-size="730,404" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="List of iOS devices" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices-300x166.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices.png" decoding="async" class="aligncenter size-full wp-image-138994 jetpack-lazy-image" src="../Images/9764de7d5c7b66e9704103667206f5ee.png" alt="List of iOS Devices" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices-300x166.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138994" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/list-of-ios-devices/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices.png" data-orig-size="730,404" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="List of iOS devices" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices-300x166.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138994" src="../Images/9764de7d5c7b66e9704103667206f5ee.png" alt="List of iOS Devices" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices-300x166.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/list-of-ios-devices.png"/></noscript>
<p>因此，如果你想使用iPhone 11进行测试，你的排毒配置应该是这样的:</p>
<pre class="language-json hljs">"detox": {
    "test-runner": "jest",
    "configurations": {
      "ios.sim.debug": {
        "binaryPath": "ios/build/Build/Products/Debug-iphonesimulator/HealthTracker.app",
        "build": "xcodebuild -workspace ios/HealthTracker.xcworkspace -scheme HealthTracker -sdk iphonesimulator -derivedDataPath ios/build",
        "type": "ios.simulator",
        "device": {
          "name": "iPhone 11",
          "os": "iOS 14.4"
        }
      },
    }
  },
</pre>
<p>接下来，您可以添加测试。我们将只为create food屏幕添加测试:</p>
<pre class="language-javascript hljs">// e2e/firstTest.spec.js

const { reloadApp } = require("./reload")

describe("Example", () =&gt; {
  beforeEach(async () =&gt; {
    await reloadApp()
  })

  it("should save the food", async () =&gt; {
    // check if the food input field is displayed on the screen
    await expect(element(by.text("Food"))).toBeVisible()

    // type "Fries" in the text field for entering the name of the food
    await element(by.id("food")).typeText("Fries")

    // verify if "Fries" has indeed been typed in to the text field
    await expect(element(by.text("Fries"))).toExist()

    // tap on the rating for "Very Healthy"
    await element(by.text("Very Healthy")).tap()

    // tap the save button
    await element(by.text("Save")).tap()

    // check if the text of the save button has changed to "Saved!"
    // indicating that the code for saving has indeed been called
    await expect(element(by.text("Saved!"))).toBeVisible()

    // check if the form has been reset
    await expect(element(by.text("Fries"))).toNotExist()
  })
})
</pre>
<p>接下来，您需要构建应用程序:</p>
<pre class="language-bash hljs">npm run build:e2e
</pre>
<p>如果您检查<code>package.json</code>文件，这将简单地调用<code>detox build -c ios.sim.debug</code>命令。</p>
<p>一旦完成了应用程序的构建，您现在就可以运行测试了:</p>
<pre class="language-bash hljs">npm run test:e2e
</pre>
<p>它看起来是这样的:</p>
<p><img data-attachment-id="138996" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/detox-test/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test.png" data-orig-size="730,429" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Detox test" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test-300x176.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test.png" decoding="async" class="aligncenter size-full wp-image-138996 jetpack-lazy-image" src="../Images/1d661f6690666356128e137f744385c4.png" alt="Detox Test" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test-300x176.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138996" data-permalink="https://blog.logrocket.com/create-react-native-app-using-ignite-boilerplate/attachment/detox-test/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test.png" data-orig-size="730,429" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Detox test" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test-300x176.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138996" src="../Images/1d661f6690666356128e137f744385c4.png" alt="Detox Test" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test-300x176.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/detox-test.png"/></noscript>
<p>我们只讲述了如何在iOS模拟器上设置和运行Detox。如果你想在Android上运行你的测试，一定要查看Android上运行排毒的官方指南。</p>
<h2 id="conclusion">结论</h2>
<p>此时，您应该有信心在自己的React原生项目中使用Ignite。如您所见，Ignite使得遵循React本地应用开发的最佳实践变得非常容易。它节省了大量的时间，尤其是在创建新项目时，因为你不再需要从头开始设置一切。</p>
<p>Ignite附带了一个关于应该如何做事情的意见，但它为您提供了全面定制应用外观和感觉以及如何编写代码所需的所有工具。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>