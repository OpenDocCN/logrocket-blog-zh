<html>
<head>
<title>How to use Rockpack - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何使用 Rockpack - LogRocket 博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-use-rockpack/#0001-01-01">https://blog.logrocket.com/how-to-use-rockpack/#0001-01-01</a></blockquote><div><article class="article-post">
<p>简单地说，<a href="https://www.rockpack.io/" target="_blank" rel="noopener"> Rockpack </a>是<a href="https://reactjs.org/docs/create-a-new-react-app.html" target="_blank" rel="noopener">创造的 React App (CRA) </a>的兴奋剂。这是一个 React 引导工具，旨在完成繁重的工作，并简化 React 应用程序的设置过程。</p>
<p>Rockpack 使开发人员能够引导 React 应用程序，支持服务器端渲染、捆绑、林挺、测试、日志、本地化等。</p>
<p>想到 Rockpack 最简单的方式是，它是 CRA，有许多有用的、经过深思熟虑的、通常是必需的附加功能。</p>
<p>在本帖中，我们将了解 Rockpack，它的架构，模块，以及为什么需要它。</p>
<h2>Rockpack 模块</h2>
<p>Rockpack 最大的优点之一是它有一个模块化的架构，因此您可以只使用您想要的 Rockpack 模块。</p>
<p>在本节中，我们将详细了解每个 Rockpack 模块。</p>

<p>这是一个基于<code>Webpack</code>的反应捆绑器。它预先配置了必要的加载程序和插件，并使用开箱即用的最佳实践。</p>
<h4>用法:</h4>
<p>要使用此模块，请执行以下步骤。</p>
<ol>
<li>安装模块:<pre>#NPM npm install  @rockpack/compiler --save-dev #YARN yarn add @rockpack/compiler --dev</pre></li>
<li>用下面的代码在根目录下创建一个<code>build.js</code>文件:<pre>const { frontendCompiler } = require('@rockpack/compiler');   frontendCompiler();</pre></li>
<li>运行<code>build.js</code> : <pre>#DEVELOPMENT cross-env NODE_ENV=development node build #PRODUCTION cross-env NODE_ENV=production node build</pre></li>
</ol>
<p>当您运行生产版本时，它会创建一个带有生产优化的应用程序的缩小版本。</p>
<p>Rockpack 编译器附带了许多令人惊叹的特性。以下是其中的一些:</p>
<ul>
<li>类型脚本支持</li>
<li>支持使用 nodemon、livereload、source maps 构建 nodejs 脚本</li>
<li>反应优化</li>
<li>seo 优化</li>
<li>图像缩小</li>
<li>GraphQL 支持(web package graph QL loader)</li>
</ul>
<p>这个清单还在继续。你可以在这里获得完整的列表<a href="https://github.com/AlexSergey/rockpack/blob/master/packages/compiler/README.md#features" target="_blank" rel="noopener">。</a></p>

<p>这个重要的库为 Rockpack 项目提供了通用的服务器端渲染(<code>SSR</code>)支持。据说它提供了通用的<code>SSR</code>支持，因为它可以与 Redux (thunk，sagas)、Apollo、Mobx 和其他解决方案一起工作。</p>
<p>React 支持开箱即用的<code>SSR</code>，但是它不考虑异步操作。<code>@rockpack/ussr</code>增加了对异步操作的支持，以在<code>SSR</code>期间做出反应。</p>
<p>它提供了一些类似于 React 的 API(定制钩子)。其中一些是<code>useUssrState</code>和<code>useUssrEffect</code>。这些类似于<code>useState</code>和<code>useEffect</code>吊钩。然而，<code>useUssrState</code>和<code>useUssrEffect</code>支持异步操作和<code>SSR</code>。</p>
<h4>用法:</h4>
<p>要使用<code>@rockpack/ussr</code>，请遵循以下步骤。</p>
<ol>
<li>安装模块:<pre># NPM  npm install @rockpack/ussr --save  npm install @rockpack/compiler --save-dev   # YARN  yarn add @rockpack/ussr  yarn add @rockpack/compiler --dev</pre></li>
<li>像这样导入并使用带有<code>SSR</code>支持的钩子:<pre>import React from 'react';  import { useUssrState, useUssrEffect } from '@rockpack/ussr';   const getUsers = async () =&gt; {   // performs some async operation }   export const App = () =&gt; {    const [users, setUsers] = useUssrState({ users: [] });    useUssrEffect(async () =&gt; {          const allUsers = await getUsers();          setUsers(allUsers);    });    return {     // performs some operations to render the list of users   };  };</pre></li>
<li>配置<code>client.jsx</code> : <pre>import React from 'react';  import { hydrate } from 'react-dom';  import createUssr from '@rockpack/ussr';  import { App } from './App';   const [Ussr] = createUssr(window.USSR_DATA);  hydrate(      &lt;Ussr&gt;          &lt;App /&gt;      &lt;/Ussr&gt;,      document.getElementById('root')  );</pre></li>
</ol>
<p>该行:</p>
<pre>const [Ussr] = createUssr(window.USSR_DATA); 
</pre>
<p>通过将服务器上执行的状态与客户端相关联，确保<code>useUssrState</code>正常工作。</p>
<p>另外，一旦我们选择引导一个<code>SSR</code>应用程序，<code>build.js</code>和一个<code>server.jsx</code>(它使用一个<code>Koa</code>)文件是默认设置的。这些文件经过预先配置，可以相互配合使用，无需进一步编辑。</p>
<p>你可以在这里获得更多关于使用<code>@rockpack/ussr</code>模块<a href="https://github.com/AlexSergey/rockpack/blob/master/packages/ussr/README.md#using" target="_blank" rel="noopener">的细节。</a></p>

<p>这使用了 Jest 和一些推荐的模块和插件。它具有一个健壮的测试套件，配置了最佳实践。并且完全支持 TypeScript 和 babel。</p>
<h4>用法:</h4>
<p>要使用此模块，请遵循以下步骤。</p>
<ol>
<li>安装:<pre># NPM  npm install @rockpack/tester --save-dev   # YARN  yarn add @rockpack/tester --dev</pre></li>
<li>在您的项目根目录中创建<code>test.js</code>，并添加以下代码:<pre>const tests = require('@rockpack/tester');  tests();</pre></li>
<li>使用以下命令运行测试:<pre>node tests.js  #Development node tests.js --watch</pre></li>
</ol>

<p>这是使用最佳实践配置的<a href="https://eslint.org/" target="_blank" rel="noopener"> Eslint </a>。</p>
<h4>用法:</h4>
<p>要使用此模块，请遵循以下步骤。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<ol>
<li>安装:<pre># NPM npm install @rockpack/codestyle --save-dev  # YARN yarn add @rockpack/codestyle --dev</pre></li>
<li>用下面的代码创建一个<code>eslintrc.js</code>文件:<pre>const { rockConfig } = require('@rockpack/codestyle');  module.exports = rockConfig({   'no-plusplus': 'error' });</pre></li>
<li>要覆盖所有的配置，你可以传递一秒给如下所示的<code>rockConfig()</code>函数:<pre>module.exports = rockConfig({}, {   plugins: [     'some new plugin'   ] });</pre></li>
</ol>
<p>您可以在此了解更多关于本模块<a href="https://github.com/AlexSergey/rockpack/blob/master/packages/codestyle/README.md#rockpackcodestyle" target="_blank" rel="noopener">的信息。</a></p>

<p>这是事情变得真正有趣的地方，也是 Rockpack 大放异彩的地方。<code>@rockpack/logger</code>模块是一个高级记录系统，记录所有用户操作(按下的按钮、操作系统信息、显示等)。).然后可以在调试部分分析这些动作。</p>
<h4>用法:</h4>
<p>要使用此模块，请遵循以下步骤。</p>
<ol>
<li>安装:<pre># NPM  npm install @rockpack/logger --save  # YARN  yarn add @rockpack/logger</pre></li>
<li>将<code>App.js</code>组件包在<code>LoggerContainer</code>组件中，如下图:<pre>...   &lt;LoggerContainer     sessionID={window.sessionID}     limit={75}      getCurrentDate={() =&gt; dayjs().format('YYYY-MM-DD HH:mm:ss')}     stdout={showMessage}     onError={stackData =&gt; sendToServer(stack)}     onPrepareStack={stack =&gt; stack.language = window.navigator.language}   &gt;     &lt;App/&gt;   &lt;/LoggerContainer&gt; ...</pre></li>
</ol>
<p>上面的代码片段应该是一个<code>exported</code>匿名函数的返回值。<code>@rockpack/logger</code>模块的完整设置和使用要求有点高。</p>

<p>这是一个高级定位器模块，使用<a href="https://en.wikipedia.org/wiki/Gettext#:~:text=In%20computing%2C%20gettext%20is%20an,it%20separates%20programming%20from%20translating." target="_blank" rel="noopener"> gettext </a>。它提供了一种简单的方法来使我们的应用程序适应不同的语言和地区。</p>
<h4>使用</h4>
<ol>
<li>安装:<pre># NPM npm install @rockpack/localaser --save npm install @rockpack/compiler --save-dev  # YARN yarn add @rockpack/localaser yarn add @rockpack/compiler --dev</pre></li>
<li>接下来你必须将<code>App.js</code>包装在<code>LocalizationObserver</code>组件中，如下所示:<pre>import { LocalizationObserver } from '@rockpack/localaser';  const Root = () =&gt; {     return (       &lt;LocalizationObserver          currentLanguage={this.state.currentLanguage}          languages={this.state.languages}       &gt;         &lt;App/&gt;       &lt;/LocalizationObserver&gt;     ) }</pre></li>
</ol>
<p><code>@rockpack/localaser</code>模块的设置和使用要求有点高。</p>
<h2>为什么选择 Rockpack？</h2>
<p>一些著名的 Rockpack 替代品是<code>Next.js</code>和<code>Create React App</code>。然而，Rockpack 在许多方面都超过了它的竞争对手。</p>
<p>首先，所有 Rockpack 应用程序都支持以下开箱即用功能:</p>
<ul>
<li>不同文件格式的导入(<a href="https://github.com/AlexSergey/rockpack/blob/master/packages/compiler/README.md" target="_blank" rel="noopener">格式列表</a></li>
<li>图像优化，SVG 优化</li>
<li>将 SVG 文件作为 React 组件加载</li>
<li>CSS/SCSS/less 模块</li>
<li>巴别塔或 TS，TS 支持 CSS/SCSS/less 模块</li>
<li>PostCSS autoprefixer</li>
<li>SEO 优化，React 优化</li>
<li>束分析器</li>
<li>GraphQL 支持</li>
</ul>
<p>完整的列表可以在<a href="https://github.com/AlexSergey/rockpack/blob/master/packages/compiler/README.md" target="_blank" rel="noopener">这里</a>找到(这些都是使用最佳实践整理的)。通过提供所有这些现成的东西，Rockpack 旨在减少应用程序的安装时间。这与应用程序的大小和开发者的技能无关。</p>
<p>使用 Rockpack 的其他原因包括:</p>
<ol>
<li>它是模块化的，可以选择性地导入到遗留应用程序中</li>
<li>它提供了一个易于使用且对初学者非常友好的 API(只需一行代码就可以引导一个具有上述特性的应用程序)</li>
<li>它有一个非常灵活的架构，因此你可以使用你喜欢的库进行状态管理</li>
<li>它为日志和本地化提供了强大的工具</li>
</ol>
<p>Rockpack 的优点是令人兴奋和伟大的，任何开发人员都会对使用这个令人敬畏的库感兴趣。我们将在下一节研究如何使用 Rockpack 引导 React 应用程序。</p>
<h2>如何开始使用 Rockpack</h2>
<p>开始使用 Rockpack 最简单的方法是使用<code><a href="https://www.rockpack.io/fast-setup" target="_blank" rel="noopener">@rockpack/starter</a></code>模块。这是 Rockpack 项目的一部分。</p>
<p>它支持三种不同类型的应用程序:</p>
<ol>
<li>   <ol>
<li><strong> React 客户端渲染</strong>(<code>React CSR</code>)——这给出了类似于创建 React 应用程序的样板代码</li>
<li><strong> React 服务器端呈现</strong> ( <code>React SSR Light Pack</code> ) —这给出了如下样板代码:<ul>
<li>服务器端渲染(<code>SSR</code>)</li>
<li>它使用<code>Koa</code>作为它的<code>Node.js</code>服务器</li>
<li><code>@loadable/components</code></li>
</ul>
</li>
<li><strong> React 服务器端呈现</strong> ( <code>React SSR Full Pack</code> ) —这给出了包含以下内容的样板代码:<ul>
<li>我们所有的一切都在<code>React SSR Light Pack</code></li>
<li>反应路由器</li>
<li>Redux</li>
<li>还原传奇</li>
<li>反应头盔异步</li>
</ul>
</li>
<li><strong>库或 React 组件</strong> <strong> — </strong>这为 it 部门提供了开发 React 库或组件所需的高效配置的 Webpack，支持 esm/cjs 版本以及精简版本。</li>
</ol>
</li>
</ol>
<p>要引导任何应用程序，请遵循以下步骤。</p>
<ol>
<li>安装:<pre>#NPM npm install @rockpack/starter -g </pre></li>
<li>创建您的应用:<pre>rockpack &lt; your project name&gt;</pre></li>
<li>回答终端问题，其余的由 Rockpack 处理。当一切完成后，你应该得到这个:<br/> <img data-attachment-id="33204" data-permalink="https://blog.logrocket.com/how-to-use-rockpack/rockpack-results/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results.png" data-orig-size="730,293" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Rockpack results" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results-300x120.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results.png" decoding="async" class="aligncenter size-full wp-image-33204 jetpack-lazy-image" src="../Images/98f2bcc3d4caa6b11f19d65421b35424.png" alt="Rockpack Results" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results-300x120.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results.png"/> <noscript> <img data-lazy-fallback="1" data-attachment-id="33204" data-permalink="https://blog.logrocket.com/how-to-use-rockpack/rockpack-results/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results.png" data-orig-size="730,293" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Rockpack results" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results-300x120.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-33204" src="../Images/98f2bcc3d4caa6b11f19d65421b35424.png" alt="Rockpack Results" srcset="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results-300x120.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/01/rockpack-results.png"/> </noscript></li>
<li>开始你的项目:<pre>cd &lt; your project name&gt; # and run npm start</pre></li>
</ol>
<h2>结论</h2>
<p>Rockpack 是一个经过深思熟虑的库。我已经对使用它感到兴奋了。Rockpack 的一个优点是没有真正的学习曲线，因为您仍然可以编写 React 代码。它还为您提供了使用首选库进行状态管理的灵活性。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产 React 应用</h2><p>调试 React 应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪 Redux 状态、自动显示 JavaScript 错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的 web 和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket 不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试 React 应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>