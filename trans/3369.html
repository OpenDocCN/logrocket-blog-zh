<html>
<head>
<title>Tauri vs. Electron: A comparison, how-to, and migration guide - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Tauri vs. Electron:比较、操作和迁移指南</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/tauri-electron-comparison-migration-guide/#0001-01-01">https://blog.logrocket.com/tauri-electron-comparison-migration-guide/#0001-01-01</a></blockquote><div><article class="article-post">
 <p>九年前，Electron团队引入了一个框架，允许我们用基本的HTML、CSS和JavaScript知识快速构建桌面应用程序，从而彻底改变了我们创建桌面应用程序的方式。除了有效的批评，Electron完成了工作，我们已经看到许多公司使用它，包括Slack、WhatsApp(桌面)，甚至是开发人员社区最喜欢的文本编辑器VS Code。然而，最近Tauri作为电子的替代品被引入。</p>
<p>在本文中，我们将探索Tauri，一个新的闪亮的桌面应用程序框架。我们将了解如何开始使用它，它是如何工作的，它与electronic的比较，以及将现有的electronic项目迁移到Tauri会是什么样子。</p>
<p>以下是我们将详细介绍的内容:</p>

<h2 id="what-is-tauri">Tauri是什么？</h2>
<p>Tauri是一个相对较新的框架，允许您通过利用基本的web技术以及Rust编程语言来快速创建跨平台的应用程序。</p>
<p>Tauri构建于Rust之上，设计上安全且高性能，兼容任何前端框架，并允许您为所有主要桌面平台创建可执行的应用程序，包括macOS、Windows和Linux操作系统。</p>
<h3 id="how-tauri-works">Tauri是如何工作的</h3>
<p>每个Tauri应用程序都包含一个核心进程，作为应用程序的入口点，并且是唯一可以完全访问操作系统的组件。然而，核心进程并不呈现实际的应用程序界面；相反，它启动使用操作系统提供的WebView库的子流程，使得使用web技术构建Tauri应用成为可能。</p>
<p>与使用Chromium引擎打包和呈现应用程序而不考虑底层操作系统的Electron不同，Tauri使用操作系统的WebView库。Tauri方法的优势在于WebView库不包含在最终的可执行文件中，而是在运行时动态链接，这大大降低了捆绑应用的大小和性能。</p>
<h3 id="tauri-pros">Tauri pros</h3>
<p>如前所述，Tauri应用程序比电子应用程序轻得多，因为它们采用了webview方法。事实上，一个用Electron构建的重量超过52MB的示例应用程序，在3MB周围，用Tauri构建时会轻得多。</p>
<p>Tauri框架的其他一些主要优势包括:</p>
<ul>
<li>更好的性能:在性能、启动时间和内存消耗方面，Tauri应用也优于Electron应用</li>
<li>自我更新:Tauri包含一个自我更新特性，您可以快速地将它集成到您的应用程序中，而无需依赖任何第三方库</li>
<li>跨平台:当然，您可以为所有主流桌面操作系统生成可执行文件</li>
</ul>
<h3 id="major-tauri-drawbacks">Tauri的主要缺点</h3>
<ul>
<li>浏览器兼容性:Tauri的一个主要缺点是你必须担心浏览器的兼容性。有些web APIs适用于macOS WebView，但可能不适用于Windows，反之亦然。此外，web元素(如输入、按钮等)的设计会因操作系统WebView的不同而略有不同。你需要记住这些不同之处</li>
<li>资源和生态系统:Tauri仍然很新，它的资源和生态系统也是如此。不像你可以快速找到插件和StackOverflow对大多数电子问题的答案，Tauri还没有。然而，这无疑将在未来改变</li>
<li>铁锈知识:当与Tauri一起工作时，你在大多数情况下不需要铁锈。然而，当你深入到更高级的东西时，你可能不得不学习它，例如，如果Tauri的JavaScript插件不支持Rust，你就不得不用Rust进行更高级的操作系统调用</li>
</ul>
<h2 id="creating-tauri-apps">创建Tauri应用程序</h2>
<p>在开始创建Tauri应用程序之前，您必须首先安装一些必备的依赖项/包，最主要的是Windows上的Microsoft Visual Studio c++ build tools和WebView 2，macOS的CLang和Xcode开发依赖项，以及Rust without OS。你可以在他们的<a href="https://tauri.app/v1/guides/getting-started/prerequisites" target="_blank" rel="noopener">先决条件页面</a>上找到如何设置所有这些的说明(也包括不同Linux发行版的说明)。</p>
<p>安装完所有必备组件后，您可以使用以下组件创建一个新的Tauri应用程序:</p>
<pre class="language-bash hljs">npm create tauri-app</pre>
<p>运行该命令将要求您选择应用程序名称、窗口名称和首选方法，即，您是否更喜欢使用基本的HTML、CSS和JavaScript或其他JavaScript框架，如React、Vue和Svelte。为了这个教程，我们将使用<strong>create-react-app</strong>&gt;<strong>create-react-app(JavaScript)</strong>的方法。</p>
<p>该过程完成后，您可以使用以下命令运行该应用程序:</p>
<pre class="language-bash hljs">npm run tauri dev</pre>
<p>第一次运行这个命令需要几秒钟的时间，完成后，您应该会看到新的桌面应用程序在一个新窗口中弹出，如下图所示:</p>
<p><img data-attachment-id="132538" data-permalink="https://blog.logrocket.com/tauri-electron-comparison-migration-guide/attachment/tauri-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app.png" data-orig-size="730,570" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Tauri app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-300x234.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app.png" decoding="async" class="aligncenter size-full wp-image-132538 jetpack-lazy-image" src="../Images/e3944bff075434b68ca9f9193492fd8a.png" alt="Tauri App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-300x234.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="132538" data-permalink="https://blog.logrocket.com/tauri-electron-comparison-migration-guide/attachment/tauri-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app.png" data-orig-size="730,570" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Tauri app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-300x234.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-132538" src="../Images/e3944bff075434b68ca9f9193492fd8a.png" alt="Tauri App" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-300x234.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app.png"/></noscript>
<p>当然，还支持热重载，这意味着我们可以对代码进行更改，这些更改会立即反映在我们的应用程序中。</p>
<h3 id="file-structure">文件结构</h3>
<p>如果在您喜欢的文本编辑器中打开新的应用程序文件夹，您应该会看到以下文件和目录:</p>
<p><img data-attachment-id="132541" data-permalink="https://blog.logrocket.com/tauri-electron-comparison-migration-guide/attachment/tauri-app-file-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure.png" data-orig-size="454,826" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Tauri app file structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure-165x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure.png" decoding="async" class="aligncenter size-full wp-image-132541 jetpack-lazy-image" src="../Images/23f450173e1ad42274b0f06c55c84976.png" alt="Tauri App File Structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure.png 454w, https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure-165x300.png 165w" data-lazy-sizes="(max-width: 454px) 100vw, 454px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="132541" data-permalink="https://blog.logrocket.com/tauri-electron-comparison-migration-guide/attachment/tauri-app-file-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure.png" data-orig-size="454,826" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Tauri app file structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure-165x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-132541" src="../Images/23f450173e1ad42274b0f06c55c84976.png" alt="Tauri App File Structure" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure.png 454w, https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure-165x300.png 165w" sizes="(max-width: 454px) 100vw, 454px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-app-file-structure.png"/></noscript>
<p><code>/public</code>和<code>/src</code>目录是React的默认目录。这里相当新的是<code>/src-tauri</code>文件夹。让我们快速浏览一下这个目录中的重要文件:</p>
<ul>
<li>这个rust文件是我们的Tauri应用程序的入口点；它基本上包含了引导我们应用程序的代码。在这里，我们还可以包含自定义的Rust函数，我们可以通过JavaScript直接调用这些函数，我们将在后面看到</li>
<li><code>Cargo.toml</code> —这个文件类似于PWA <code>manifest.json</code>，包含我们的应用程序的元数据</li>
<li><code>target/</code> —运行构建命令后，该文件夹将包含我们的应用程序可执行文件</li>
<li>tauri.conf.json —该文件允许您配置和自定义tauri应用程序的各个方面，例如应用程序的名称和允许的API列表</li>
</ul>
<h3 id="rust">生锈？</h3>
<p>是的。除了运行普通的web相关(HTML、CSS和JavaScript)代码，Tauri还提供了一个有用的特性，叫做<strong>命令</strong>。它基本上允许您创建定制的Rust函数，并通过JavaScript调用它们。如果您需要处理繁重的处理任务，或者在性能更高的Rust代码中进行操作系统调用，这将非常有用。</p>
<p>为了开始使用这个特性，我们需要在用<code>#[tauri::command]</code>注释的同时在<code>src-tauri/src/main.rs</code>文件中定义我们的函数。这里有一个例子:</p>
<pre class="language-rust hljs">#[tauri::command]
fn sample_command() {
  println!("Rust code invoked from JavaScript!");
}</pre>
<p>之后，我们将提供我们在builder函数中创建的所有命令的列表，如下所示:</p>
<pre class="language-rust hljs">fn main() {
  tauri::Builder::default()
    // Commands list here 👇
    .invoke_handler(tauri::generate_handler![sample_command])
    .run(tauri::generate_context!())
    .expect("error while running tauri application");
}</pre>
<p>有了这些，我们的<code>main.rs</code>文件的完整代码应该是这样的；</p>
<pre class="language-rust hljs">#![cfg_attr(
  all(not(debug_assertions), target_os = "windows"),
  windows_subsystem = "windows"
)]

#[tauri::command]
fn sample_command() {
  println!("Rust code invoked from JavaScript!");
}

fn main() {
  tauri::Builder::default()
  // Commands list here 
  .invoke_handler(tauri::generate_handler![sample_command])
    .run(tauri::generate_context!())
    .expect("error while running tauri application");
}</pre>
<p>现在，我们可以简单地通过使用Tauri的内置<code>invoke()</code>函数调用这个函数，如下所示:</p>
<pre class="language-javascript hljs">import { invoke } from "@tauri-apps/api/tauri";
invoke("sample_command");</pre>
<p>在我们的项目中运行这段代码后，我们应该会看到输出“Rust code invoked from JavaScript！”印在我们的控制台上。</p>
<p>命令特性允许您做更多的事情，比如传递参数、运行异步信任函数、管理状态等等。关于<a href="https://tauri.app/v1/guides/features/command" target="_blank" rel="noopener"> Tauri命令功能的更多信息可以在这里找到</a>。</p>
<h3 id="desktop-api">桌面API</h3>
<p>Tauri包括访问桌面功能的方法，比如文件系统、剪贴板、对话框、shell等等，您可以在应用程序中的任何地方轻松地导入和使用这些功能。下面是一个如何使用剪贴板的<code>writeText()</code>方法复制文本的例子:</p>
<pre class="language-javascript hljs">import { writeText } from "@tauri-apps/api/clipboard";

const copyToClipboard = async () =&gt; {
  await writeText("Sample Text");
};</pre>
<p>如果您也熟悉Rust编程语言，您可以编写自定义的Rust方法，调用操作系统函数并通过JavaScript调用它们，就像我们前面所做的那样。</p>
<h3 id="building-the-app">构建应用程序</h3>
<p>将Tauri项目打包成一个独立的桌面应用程序相当简单，但是首先，您需要将<code>tauri.config.json</code>文件中的<code>tauri.bundle.identifier</code>从<code>com.tauri.dev</code>更改为您喜欢的惟一标识符。之后，您可以通过运行以下命令继续操作:</p>
<pre class="language-bash hljs">npm run tauri build</pre>
<p>运行<code>build</code>命令，Tauri将自动检测你的操作系统，并相应地生成独立的可执行应用。</p>
<h2 id="migrating-from-electron">从电子迁移</h2>
<p>将现有电子项目的基本用户界面迁移到Tauri应该相当简单。当您需要开始使用桌面API、窗口和菜单时，复杂性就会出现。但是，让我们快速比较一下差异，以便简化迁移过程。</p>
<p>一个电子项目的入口点是主脚本文件(例如，<code>main.js</code>)，它通常包含一个<code>BrowserWindow()</code>函数，负责加载静态web页面并将其呈现为桌面应用程序。并且在这个相同的功能中，你还能够自定义桌面的默认选项，比如它的默认大小、位置、可选样式，以及自定义事件。</p>
<p>在Tauri的例子中，虽然app入口点是<code>src/main.rs file</code>，但是上面提到的所有等效定制都可以在<code><a href="https://tauri.app/v1/api/config" target="_blank" rel="noopener">tauri.conf.json</a></code>文件中完成。</p>
<p>为了跨应用程序异步通信，Electron包括一个用于发出和处理定制事件的<code>ipcMain</code>模块。Tauri中的对应模块是<a href="https://tauri.app/v1/api/js/modules/event/#listen" target="_blank" rel="noopener">事件模块</a>，它使用起来也非常简单。</p>
<p>最后，桌面API的使用和集成在两个库中也是相似的，并且可以从各自的文档页面中快速提取出来。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<h2>结论</h2>
<p>这篇文章介绍了Tauri的基本原理，它与Electron的工作原理相比是如何工作的，如何开始使用它，以及如何迁移现有的Electron项目的指南。</p>
<p>Tauri仍处于早期阶段，但它已经提供了许多令人惊叹的功能，甚至更多功能正在开发中，例如支持为所有主流移动操作系统捆绑二进制文件。</p>
<p>你认为Tauri会是一个电子杀手吗？下面听听大家的想法。</p>
<p>感谢阅读！</p><div class="code-block code-block-4">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>