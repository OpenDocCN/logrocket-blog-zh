<html>
<head>
<title>How to configure worker plugins in Vite 2.8 </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Vite 2.8中配置worker插件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/configure-worker-plugins-vite-2/#0001-01-01">https://blog.logrocket.com/configure-worker-plugins-vite-2/#0001-01-01</a></blockquote><div><article class="article-post">
<p>如果您已经使用了框架无关的Vite进行前端开发，那么您可能已经熟悉了服务工作者。在本文中，我们将探讨如何使用Vite为功能性渐进式web应用程序(PWA)正确配置worker插件。但是首先，我们有必要熟悉一些术语。我们开始吧！</p>

<h2 id="what-is-vite">Vite是什么？</h2>
<p>如果您以前使用过Vue框架，那么您很可能使用Vue CLI来开发大型复杂的项目。虽然Vue CLI是Vue开发人员管理webpack内部的一个很好的构建工具，但Vue的创始人尤雨溪在2020年创造了一个名为Vite的快速构建工具。</p>
<p>与<a href="https://blog.logrocket.com/vite-3-vs-create-react-app-comparison-migration-guide/#what-is-vite"> Vue CLI不同，Vite不是Vue </a>特有的；您还可以使用它来开发任何JavaScript或TypeScript应用程序。有了Vite，当你保存你的代码时，你会很快在浏览器上看到变化，因为Vite只在浏览器请求时服务和改变源代码。</p>
<h2 id="what-is-a-pwa">什么是PWA？</h2>
<p>PWA代表progressive web application，我认为这是一个概念，而不是一项实际的技术。<a href="https://blog.logrocket.com/building-pwa-react/"> PWAs定义了web应用</a>,这些应用使用清单、服务人员和其他web平台功能，并结合渐进式增强，为用户提供与本地应用相对相似的体验。</p>
<p>使用PWA的一些优势包括易于安装、渐进增强、网络独立性、安全性和SEO好处。</p>
<h2 id="what-are-service-workers">什么是服务人员？</h2>
<p>你可以把服务人员想象成一个代理服务器，它位于web应用程序、浏览器和网络(如果可用的话)之间。服务人员的目标是创建有效的离线体验，更新服务器上的资产，拦截网络请求，并根据网络是否可用采取行动。</p>
<p>服务人员还可以访问推送通知和执行后台API同步，包括添加到屏幕功能。</p>
<h2 id="what-is-manifest">什么是货单？</h2>
<p>Web应用程序清单是pwa集合的一部分，它在JSON文本文件中提供有关web应用程序的信息。PWA清单包括其名称、版本、描述、图标和任何其他与应用程序相关的必要资源。</p>
<h2 id="project-setup">项目设置</h2>
<p>现在我们知道了所有关于渐进式web应用程序的技术术语，我们将学习如何用Vite配置worker插件。</p>
<p>在我们的演示中，我们将使用Anthony Fu创建的<a href="https://vite-pwa-org.netlify.app/"> VitePWA插件</a>。此插件有助于在Vite应用程序中添加服务人员，以处理:</p>
<ul>
<li>缓存资源</li>
<li>离线支持</li>
<li>新内容可用时推送通知</li>
</ul>
<h3 id="scaffolding-vite-project">搭建Vite项目</h3>
<p>如果您还没有想要用来配置PWA的基于Vite的项目，请随意从任何可用的<a href="https://vitejs.dev/guide/#community-templates">模板</a>中<a href="https://vitejs.dev/guide/#scaffolding-your-first-vite-project">创建一个</a>。您还可以通过运行以下命令来创建新的Vite项目:</p>
<pre class="language-bash hljs">npm create <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="85f3ecf1e0c5e9e4f1e0f6f1">[email protected]</a>
</pre>
<p>在创建我的Vite应用时，我选择了<strong> Vue </strong>框架和<strong> JavaScript </strong>变体。app scaffold完成后，使用下面的命令在项目中安装应用程序依赖项:</p>
<pre class="language-bash hljs">npm install
</pre>
<p>现在，我们可以通过运行以下命令来加速本地服务器:</p>
<pre class="language-bash hljs">npm run dev
</pre>
<p>至此，我们已经启动并运行了Vite应用程序。</p>
<h3 id="configuration">配置</h3>
<p>让我们继续在应用程序中配置workers插件VitePWA。首先，我们将通过运行以下命令，将该包作为开发依赖项进行安装:</p>
<pre class="language-bash hljs">npm i vite-plugin-pwa -D
</pre>
<h2 id="workers-registration">为我们的Vite应用程序注册工人</h2>
<p>现在我们已经安装了workers插件，我们需要注册服务工作者。<code>vite-plugin-pwa</code>插件使用可选的<code>injectRegister</code>配置选项自动注册服务人员。</p>
<p>要注册服务人员，根据您在项目搭建时选择的变量，更新<code>vite.config.js</code>或<code>vite.config.ts</code>文件。从<code>vite-plugin-pwa</code>和插件中导入<code>VitePWA</code>，使其看起来像下面的代码:</p>
<pre class="language-javascript hljs">import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';
import { VitePWA } from 'vite-plugin-pwa';

export default defineConfig({
  plugins: [vue(), VitePWA({ registerType: 'autoUpdate' })],
});
</pre>
<p>现在我们已经注册了<code>vite-plugin-pwa</code>，我们的应用程序能够生成它的web应用程序清单，并在应用程序构建时在入口点注入它。</p>
<p>您可以通过运行以下命令构建您的Vite应用程序:</p>
<pre class="language-bash hljs">npm run build
</pre>
<p>有了这个<code>vite-plugin-pwa</code>插件的最小配置，我们的应用程序现在能够生成<a href="https://developer.mozilla.org/en-US/docs/Web/Manifest"> web应用程序清单</a>，在应用程序构建时在入口点注入它，生成服务工人，并在浏览器中注册它。</p>
<p>如果您的<code>vite-plugin-pwa</code>版本≤v0.12.2，请确保您自己的配置使用<code>injectRegister</code>而不是<code>registerType</code>，如下所示:</p>
<pre class="language-javascript hljs">...
import { VitePWA } from 'vite-plugin-pwa'

export default defineConfig({
  plugins: [
    ...,
    VitePWA({
      injectRegister: 'auto'
    })
  ]
})
</pre>
<p>现在，我们将使用下面的命令构建Vite应用程序:</p>
<pre class="language-bash hljs">npm run build
</pre>
<p>在构建应用程序时，会创建一个保存各种文件的<code>dist</code>文件夹，包括web应用程序清单和服务人员文件的JavaScript变体。</p>
<p>至此，我们已经成功地用我们的Vite应用程序配置了服务人员。该应用程序现在可以作为一个功能完整的渐进式网络应用程序运行，并可以离线工作。我们确保构建我们的Vite应用程序，因为该应用程序只能在生产环境中作为PWA使用，而不是在开发环境中。</p>
<h2 id="conclusion">结论</h2>
<p><code>vite-plugin-pwa</code>提供了一个超级方便和易于集成的选项，将一个用Vite构建的标准web应用程序变成一个完全成熟的PWA。</p>
<p>虽然构建一个渐进式web应用程序最初看起来是一项艰巨的任务，但我们有像VitePWA插件这样的工具来简化我们的工作，这真是太棒了。只需安装插件，看着它完成所有繁重的工作。</p>
<p>我们没有深入更复杂的开发活动，但我们可以肯定的是，在构建离线应用程序时，可以将VitePWA插件作为起点。</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的Vue应用</h2><p>调试Vue.js应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的Vue突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Vue应用程序中发生的一切，包括网络请求、JavaScript错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex插件将Vuex突变记录到LogRocket控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试Vue应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
 <p class="clearfix"/>
</article>

</div>    
</body>
</html>