<html>
<head>
<title>Create an API in Rust with SQLite and Rocket </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用SQLite和Rocket在Rust中创建一个API</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/create-api-rust-sqlite-rocket/#0001-01-01">https://blog.logrocket.com/create-api-rust-sqlite-rocket/#0001-01-01</a></blockquote><div><article class="article-post">
<p>无论你使用SQLite是因为它是世界上最流行的数据库引擎，还是使用Rust是因为它是T2最受欢迎的语言，这两种技术都不会出错。SQLite和Rust将为您提供速度和效率。</p>
<p>本教程将演示如何使用SQLite作为Rust APIs的数据库上下文系统。我们将创建一个SQLite数据库，设置并安装Rocket框架来编写服务器逻辑，然后使用Diesel框架来处理到SQLite数据库的连接。</p>
<p>我们开始吧！</p>
<p><em>向前跳转:</em></p>

<h2 id="prerequisites">先决条件</h2>
<p>要跟随本教程，您需要以下内容:</p>
<ul>
<li>熟悉Rust编程语言和货物构建系统和软件包管理器</li>
<li>对数据库连接有基本了解</li>
<li>能够在您喜欢的环境中启动开发项目</li>
</ul>
<h2 id="what-is-sqlite">什么是SQLite？</h2>
<p>SQLite是一个关系数据库管理系统，在设置复杂性和资源使用方面有一种轻量级的感觉。它是无服务器的，不需要任何配置。因为SQLite实际上是驻留在单个跨平台文件中的数据库，所以它不需要管理。</p>
<p>SQLite事务是ACID兼容的(原子的、一致的、隔离的和持久的)，提供了对多线程操作的安全访问。尽管听起来很轻量级和“精简”,但它拥有SQL2标准中大多数重要的查询语言特性。</p>
<h2 id="initializing-project-cargo">用Cargo初始化项目</h2>
<p>Cargo使得启动任何类型的防锈项目变得更加容易。对于我们的SQLite API项目，我们将使用以下命令进行初始化:</p>
<pre class="language-rust hljs">cargo new rust-rocket-sqlite-api --bin
</pre>
<p>这就创建了<code>Cargo.toml</code>文件。</p>
<h2 id="setting-up-sqlite">为SQLite设置</h2>
<p>SQLite是本教程中默认的数据库存储，所以下一步，为您的机器安装SQLite驱动程序。</p>
<p>SQLite预装在新的Mac电脑上，但是(如果需要)Mac命令如下:</p>
<pre class="language-rust hljs">brew install sqlite 
</pre>
<p>以下是适用于Linux用户的安装命令:</p>
<pre class="language-rust hljs">sudo apt install sqlite3
</pre>
<p>现在，确认安装，就像这样:</p>
<pre class="language-rust hljs">sqlite3 --version
</pre>
<p>接下来，运行一个实例:</p>
<pre class="language-rust hljs">sqlite3
</pre>
<p>您应该会看到下面的输出:</p>
<p><img data-attachment-id="152735" data-permalink="https://blog.logrocket.com/create-api-rust-sqlite-rocket/attachment/terminal-output-confirming-sqlite-installaton/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton.png" data-orig-size="575,139" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Terminal output confirming SQLite installation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton.png" decoding="async" class="aligncenter wp-image-152735 size-full jetpack-lazy-image" src="../Images/1ca4a5ac580c572c370d5519a7cfc352.png" alt="Terminal Output Confirming SQLite Installation" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton.png 575w, https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton-300x73.png 300w" data-lazy-sizes="(max-width: 575px) 100vw, 575px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="152735" data-permalink="https://blog.logrocket.com/create-api-rust-sqlite-rocket/attachment/terminal-output-confirming-sqlite-installaton/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton.png" data-orig-size="575,139" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Terminal output confirming SQLite installation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton.png" decoding="async" loading="lazy" class="aligncenter wp-image-152735 size-full" src="../Images/1ca4a5ac580c572c370d5519a7cfc352.png" alt="Terminal Output Confirming SQLite Installation" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton.png 575w, https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton-300x73.png 300w" sizes="(max-width: 575px) 100vw, 575px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/terminal-output-confirming-sqlite-installaton.png"/></noscript>
<p>如果你不熟悉如何使用SQLite3数据库，你可以在这里了解更多。</p>
<h2 id="connecting-sqlite-database-rust">用Rust连接到SQLite数据库</h2>
<p>现在，让我们连接到SQLite数据库。</p>
<p>首先，在终端中使用以下命令运行SQLite实例:</p>
<pre class="language-rust hljs">sqlite3
</pre>
<p>接下来，我们需要一个数据文件。使用下面的命令创建一个名为<code>data</code>的文件夹，并导航到其中:</p>
<pre class="language-rust hljs">sqlite filename.db
</pre>
<p>我们将创建一个名为<code>data.db</code>的文件。接下来，我们将创建一个包含用户名和密码的表:</p>
<pre class="language-rust hljs">create table users(username text PRIMARY KEY, password text);
</pre>
<p>如果我们运行<code>.tables</code>命令，我们会看到<code>users</code>现在是数据库引擎中的一个表:</p>
<p><img data-attachment-id="152740" data-permalink="https://blog.logrocket.com/create-api-rust-sqlite-rocket/attachment/creating-sqlite-table-usernames-passwords/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords.png" data-orig-size="720,59" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating SQLite table usernames passwords" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords-300x25.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords.png" decoding="async" class="aligncenter wp-image-152740 size-full jetpack-lazy-image" src="../Images/efaf3b647b76101ceefa5af4149c7b77.png" alt="Creating SQLite Table Usernames Passwords" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords.png 720w, https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords-300x25.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="152740" data-permalink="https://blog.logrocket.com/create-api-rust-sqlite-rocket/attachment/creating-sqlite-table-usernames-passwords/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords.png" data-orig-size="720,59" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating SQLite table usernames passwords" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords-300x25.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords.png" decoding="async" loading="lazy" class="aligncenter wp-image-152740 size-full" src="../Images/efaf3b647b76101ceefa5af4149c7b77.png" alt="Creating SQLite Table Usernames Passwords" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords.png 720w, https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords-300x25.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/creating-sqlite-table-usernames-passwords.png"/></noscript>
<p>接下来，让我们用值填充用户表:</p>
<pre class="language-rust hljs"> insert into users(username, password) values ("Jon Doe", "j0hnd03");
sqlite&gt; select * from users;
</pre>
<p>在<code>Cargo.toml</code>文件中，将<code>SQLite</code>机箱添加到依赖关系部分:</p>
<pre class="language-rust hljs">[dependencies]
sqlite = "0.30.1"
</pre>
<p>现在，构建项目以确保没有错误:</p>
<pre class="language-rust hljs">cargo build
</pre>
<p>该命令将下载并构建依赖关系箱，并编译项目。</p>
<h2 id="getting-familiar-rocket">熟悉Rocket框架</h2>
<p>Rocket是一个像Actix web框架一样的Rust后端Web开发的流行框架。它比Actix Web更新，提供了一些优势。首先，<a href="https://blog.logrocket.com/rust-web-apps-using-rocket-framework/">用Rocket </a>编写应用程序更容易，因为大部分样板代码都在幕后。</p>
<p>另一个优势是Rocket的中间件组件和处理程序更容易实现，因为它们不需要对过程有任何深刻的理解。</p>
<p>要安装Rocket，只需在<code>Cargo.toml</code>文件中的依赖项下指定框架及其版本。因为我们使用Rocket作为web框架，所以我们不需要在依赖文件中指定SQLite及其版本:</p>
<pre class="language-rust hljs">[dependencies]
rocket = "0.5.0-rc.2"
</pre>
<h2 id="getting-familiar-diesel">熟悉Diesel框架</h2>
<p><a href="https://diesel.rs"> Diesel </a>是一个<a href="https://blog.logrocket.com/interacting-databases-rust-diesel-vs-sqlx/"> ORM框架，可以用来创建和处理到SQLite数据库的连接</a>。柴油依赖于<code>libpq</code>、<code>libmysqlclient</code>和<code>libsqlite3</code>。要安装Diesel，我们只需要在依赖文件中指定它。我们可以给生锈的火箭添加柴油，就像这样:</p>
<pre class="language-rust hljs">[dependencies]
rocket = "0.5.0-rc.2"
diesel = { version = "2.0.2", features = ["sqlite"] }
dotenvy = "0.15"
</pre>
<p>这里，我们还添加了<code>dotenvy</code>库来管理环境变量。这个库查找以<code>.env</code>结尾的文件，以找到要加载的所有环境变量。我们现在将创建一个名为<code>.env</code>的文件，并输入以下变量:</p>
<pre class="language-rust hljs">DATABASE_URL=data.db
</pre>
<p>我们将在本地使用<code>diesel cli</code>来管理项目。要安装它，只需运行以下命令:</p>
<pre class="language-rust hljs">cargo install diesel_cli
</pre>
<p>虽然这是一个通用命令，但是我们可以去掉任何不需要的库并指定我们想要的库。在这种情况下，我们需要SQLite，因此我们将运行以下代码:</p>
<pre class="language-rust hljs">cargo install diesel_cli --no-default-features --features sqlite 
</pre>
<p>该命令阻止安装默认设置，SQLite除外。接下来，我们将使用Diesel来设置迁移:</p>
<pre class="language-rust hljs">diesel setup
</pre>
<h2 id="building-to-do-api">构建待办事项API</h2>
<p>为了演示我们已经安装的包的用法，我们将构建一个待办事项API。</p>
<p>让我们首先创建一个新项目:</p>
<pre class="language-rust hljs">cargo new rusty-rocket --bin
</pre>
<h3 id="creating-migrations-diesel">使用Diesel创建迁移</h3>
<p>接下来，我们将使用Diesel创建一个目录来处理迁移。在您运行以下命令后，Diesel会自动执行此操作:</p>
<pre class="language-rust hljs">diesel migration generate create_tasks
</pre>
<p>结果目录被命名为<code>create_tasks</code>，它包含两个文件:</p>
<ul>
<li><code>up.sql</code>:申请迁移的语句</li>
<li><code>down.sql</code>:恢复迁移的语句</li>
</ul>
<p>您可以在这些文件中编写迁移。例如，我们的<code>CREATE</code>语句将在<code>up.sql</code>文件中:</p>
<pre class="language-rust hljs">-- Your SQL goes here
CREATE TABLE IF NOT EXISTS tasks
(
    id INTEGER PRIMARY KEY NOT NULL,
    name TEXT NOT NULL,
    description TEXT NOT NULL
);
</pre>
<p>并且相应的语句将在<code>down.sql</code>文件中:</p>
<pre class="language-rust hljs">DROP TABLE tasks;
</pre>
<p>将这些语句添加到各自的文件后，使用以下命令应用迁移:</p>
<pre class="language-rust hljs">diesel migration run
</pre>
<p>要确认这是否有效，请检查父目录中名为<code>db.sqlite3</code>的新文件。你可以把它添加到你的<code>.gitignore</code>文件中，如果你使用的话，还有<code>target/</code>和<code>.env</code>文件。</p>
<p>同样，尝试运行<code>diesel migration redo</code>来确认<code>down.sql</code>文件正确地撤销了<code>up.sql</code>文件。</p>
<h3 id="writing-api-logic-rust">用Rust编写API逻辑</h3>
<p>到目前为止，我们已经使用Diesel创建了数据库。现在，我们需要编写一个模块来连接数据库，还需要编写待办事项API逻辑。</p>
<p>但是首先，让我们对我们的<code>Cargo.toml</code>文件做如下修改:</p>
<pre class="language-rust hljs">[package]
name = "rusty-rocket"
version = "0.1.0"
edition = "2021"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
rocket = { version = "0.5.0-rc.2", features = ["json"] }
sqlx = { version = "0.6", features = ["runtime-tokio-native-tls", "sqlite"] }
tokio = { version = "1", features = ["full"] }
</pre>
<p>我们以前所有的依赖项以及更多的依赖项都包含在这些父包中。</p>
<p>接下来，我们将通过创建一个以模块名称命名的文件夹以及一个同名的Rust源文件来添加一个模块。我们将创建一个<code>database.rs</code>文件和一个名为<code>database</code>的目录。在这个目录中，我们将添加两个文件，一个用于请求，一个用于响应:</p>
<ol>
<li><code>requests</code>的<code>requests.rs</code>文件:</li>
</ol>
<pre class="language-rust hljs">use rocket::serde::Deserialize;

#[derive(Deserialize, Debug)]
#[serde(crate = "rocket::serde")]
pub struct TaskRequest {
    pub name: String,
    pub description: String,
}
</pre>
<p><code>responses</code>的<code>2) responses.rs</code>文件:</p>
<pre class="language-rust hljs">use rocket::serde::Serialize;
use sqlx::FromRow;

#[derive(Serialize, FromRow, Debug)]
#[serde(crate = "rocket::serde")]
pub struct Task {
    pub id: i64,
    pub name: String,
    pub description: String,
}
</pre>
<p>现在。我们将通过在<code>database.rs</code>文件中调用它来公开这个模块。我们还将连接到数据库，并编写用于创建和轮询任务的<code>create</code>和<code>get</code>函数。</p>
<p>逻辑是这样的:</p>
<pre class="language-rust hljs">use sqlx::{Pool, Sqlite};

pub mod requests;
pub mod responses;

use responses::Task;

pub type DBResult&lt;T, E = rocket::response::Debug&lt;sqlx::Error&gt;&gt; = std::result::Result&lt;T, E&gt;;

pub async fn create_task(
    pool: &amp;Pool&lt;Sqlite&gt;,
    name: &amp;String,
    description: &amp;String,
) -&gt; DBResult&lt;i64&gt; {
    let mut connection = pool
        .acquire()
        .await?;
    let id = sqlx::query_as!(
            Task,
            r#"
        INSERT INTO tasks (name, description) VALUES (?, ?);
        "#,
            name,
            description
    )
        .execute(&amp;mut connection)
        .await?
        .last_insert_rowid();
        Ok(id)
}

pub async fn get_task(pool: &amp;Pool&lt;Sqlite&gt; id: i64) -&gt; DBResult&lt;Task&gt; {
    let mut connection = pool.acquire()
        .await?;
    let task = sqlx::query_as!(
        Task,
        r#"
        SELECT id, name, description from tasks
        WHERE id = ?;
        "#,
            id
    )
        .fetch_one(&amp;mut connection)
        .await?;
        Ok(task)
}

pub async fn get_tasks(pool: &amp;Pool&lt;Sqlite&gt;) -&gt; DBResult&lt;Vec&lt;Task&gt;&gt; {
    let mut connection = pool.acquire()
        .await
        .unwrap();
    let tasks = sqlx::query_as::&lt;_, Task&gt;(
        r#"
        select id, name, description from tasks;
        "#
    )
        .fetch_all(&amp;mut connection)
        .await?;
        Ok(tasks)
}
</pre>
<h3 id="routing-rusty-rocket">给生锈的火箭布线</h3>
<p>是时候在Rocket框架的帮助下在<code>main.rs</code>文件中编写路由逻辑了:</p>
<pre class="language-rust hljs">#[macro_use]
extern crate rocket;
mod database;

use database::requests::TaskRequest;
use database::responses::Task;
use database::{create_task, get_task, get_tasks, DBResult};
use rocket::serde::json::Json;
use rocket::State;
use sqlx::{Pool, Sqlite, SqlitePool};

#[post("/tasks", format = "json", data = "&lt;task&gt;")]
async fn create(task: Json&lt;TaskRequest&gt;, pool: &amp;State&lt;Pool&lt;Sqlite&gt;&gt;) -&gt; DBResult&lt;Json&lt;Task&gt;&gt; {
    let id = create_task(pool, &amp;task.name, &amp;task.description).await?;
    let task = get_task(pool, id).await?;
    Ok(Json(task))
}

#[get("/tasks")]
async fn index(pool: &amp;State&lt;Pool&lt;Sqlite&gt;&gt;) -&gt; DBResult&lt;Json&lt;Vec&lt;Task&gt;&gt;&gt; {
    let tasks = get_tasks(pool).await?;
    Ok(Json(tasks))
}

#[get("/tasks/&lt;id&gt;")]
async fn detail(id: i64, pool: &amp;State&lt;Pool&lt;Sqlite&gt;&gt;) -&gt; DBResult&lt;Json&lt;Task&gt;&gt; {
    let task = get_task(pool, id).await?;
    Ok(Json(task))
}

#[rocket::main]
async fn main() -&gt; Result&lt;(), rocket::Error&gt; {
    let pool = SqlitePool::connect("sqlite://db.sqlite3")
        .await
        .expect("Couldn't connect to sqlite database");

    sqlx::migrate!()
        .run(&amp;pool)
        .await
        .expect("Couldn't migrate the database tables");

    let _rocket = rocket::build()
        .mount("/", routes![index, create, detail])
        .manage(pool)
        .launch()
        .await?;
    Ok(())
}
</pre>
<p>现在，我们可以继续运行项目，在父目录中使用以下命令:</p>
<pre class="language-rust hljs">cargo run
</pre>
<p>下面是构建后Rocket在控制台中运行的输出:</p>
<p><img data-attachment-id="152738" data-permalink="https://blog.logrocket.com/create-api-rust-sqlite-rocket/attachment/rocket-running-background-after-api-build/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build.png" data-orig-size="720,521" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Rocket running background after API build" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build.png" decoding="async" class="aligncenter wp-image-152738 size-full jetpack-lazy-image" src="../Images/eb468ae7b550776ff7efb16c3aff1a03.png" alt="Rocket Running Background After API Build" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build.png 720w, https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build-300x217.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="152738" data-permalink="https://blog.logrocket.com/create-api-rust-sqlite-rocket/attachment/rocket-running-background-after-api-build/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build.png" data-orig-size="720,521" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Rocket running background after API build" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build.png" decoding="async" loading="lazy" class="aligncenter wp-image-152738 size-full" src="../Images/eb468ae7b550776ff7efb16c3aff1a03.png" alt="Rocket Running Background After API Build" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build.png 720w, https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build-300x217.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/rocket-running-background-after-api-build.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>在本教程中，我们演示了如何使用Rocket和Diesel构建一个简单的待办事项API。我们看到Rust如何使用Rocket处理与SQLite数据库的连接。</p>
<p>这个示例项目可以按照您喜欢的任何方式构建。例如，使用这里描述的概念，您可以为模式和模型创建模块，而不是将它们写在<code>database.rs</code>文件中。</p><div class="code-block code-block-29">
<div class="blog-plug inline-plug rust-plug"><h2><a href="https://lp.logrocket.com/blg/rust-signup" target="_blank">log rocket</a>:Rust应用的web前端的全面可见性</h2><p>调试Rust应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监控和跟踪Rust应用程序的性能、自动显示错误、跟踪缓慢的网络请求和加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/rust-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p>LogRocket 就像是网络和移动应用程序的DVR，记录你的Rust应用程序上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>现代化调试Rust应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>