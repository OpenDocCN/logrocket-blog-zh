<html>
<head>
<title>Getting an element within a component with Vue querySelector - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用 Vue querySelector 获取组件中的元素</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/getting-element-component-vue-queryselector/#0001-01-01">https://blog.logrocket.com/getting-element-component-vue-queryselector/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Vue 是一个用于构建动态用户界面的渐进式 JavaScript 框架。Vue 的设计逐渐灵活，侧重于声明性渲染和组件组合。核心 Vue 库只关注 MVC 模式的视图层，然而，它有一个庞大的支持库的生态系统，使得创建响应迅速的 web 体验变得简单。</p>
<p>使用 Vue 中的<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector"> <code>querySelector</code> </a>，我们可以访问和改变第一个选中元素的属性，在这个过程中创建动态的交互式网站。我们可以出于各种原因使用<code>querySelector </code>,包括但不限于下列原因:</p>
<ul>
<li>添加或移除选定元素的 CSS 样式</li>
<li>检索或设置选定输入元素的值</li>
<li>获取或设置选定元素的属性</li>
</ul>
<p><code>querySelector</code>在 Vue 代码内部实现简单，因此熟悉 Vue 的所有级别的开发人员都可以使用。在本教程中，我们将演示如何在 Vue 中使用<code>querySelector</code>来获取组件中的元素，按照一步一步的说明来访问或更改这个元素属性。</p>
<h3>先决条件</h3>
<p>要跟随本教程，您需要以下内容:</p>
<ul>
<li>已安装 Node.js ≥v10</li>
<li>npm v≥6.7 已安装</li>
<li>熟悉 Vue</li>
</ul>
<p>注意，您可以通过在终端或命令提示符下运行<code>node -v</code>来验证 Node.js 版本。我们开始吧！</p>
<h2>安装 Vue</h2>
<p>有几种方法可以安装 Vue，但是，安装 Vue CLI 是最简单的。一般来说，处理单个文件组件和 Vue API 更容易。您可以通过运行以下命令来全局安装 Vue CLI:</p>
<pre class="language-bash hljs">npm install -g @vue/cli  
</pre>
<p>安装完成后，您可以使用以下命令创建一个新项目:</p>
<pre class="language-go hljs">vue create my-project
</pre>
<h3>Vue 组件</h3>
<p>组件允许我们创建自定义元素，我们可以在应用程序中任意多次重用这些元素。我们可以在另一个组件中使用一个组件，使我们的应用程序是动态的。</p>
<h2><code>querySelector</code>在望</h2>
<p>我们可以使用<code>querySelector</code>来选择一个 HTML 元素，该元素返回文档中匹配指定选择器的第一个元素。它可用于设置、获取、修改或删除 Vue 中所选元素的属性。</p>
<p>在 Vue 中查询一个元素的对象模型和 JavaScript 的<code>document.querySelector()</code>很像。虽然我们也可以在 Vue 中使用<code>document.querySelector()</code>，但是 Vue 组件被设计成可重用和动态的。因此，我们不能保证带有自定义<code>className</code>的元素是唯一的。</p>
<p><code>querySelector()</code>函数接受一个用于获取指定元素的参数。该参数可以是 HTML 元素的标记名、类名或 ID。<code>querySelector()</code>函数的语法如下:</p>
<pre class="language-vue hljs">this.$el.querySelector("input").value = "Enter name" 
</pre>
<p>注意<code>this.</code>只能在 Vue 组件内部使用。</p>
<h2><code>this.$el.querySelector</code>在望</h2>
<p>Vue 中的<code>$el</code>选项为 Vue 提供了一个现有的 HTML 元素来挂载使用 new 关键字生成的 Vue 实例。<code>this.$el.querySelector</code>用于访问 HTML 元素并修改元素的属性。</p>
<p><code>this.$el.querySelector</code>在 Vue 组件中遵循以下语法:</p>
<pre class="language-vue hljs">this.$el.querySelector(parameter).value;
</pre>
<p>与<code>this.$refs</code>不同的是，<code>this.$el.querySelector()</code>不需要你添加<code>ref</code>属性到你的 HTML 标签元素来访问元素。您可以使用元素的标记名、类名或 ID 直接访问元素。</p>
<p>我们将在组件内部使用<code>this.$el.querySelector</code>来访问 HTML 元素，并更改元素的一些属性。</p>
<h3>通过标签获取元素</h3>
<p>让我们选择一个组件中的 HTML 元素标记，并将元素的文本更改为“您单击了按钮”。我们将通过使用标记名来访问元素，将其文本颜色属性设置为粉红色:</p>
<pre class="language-vue hljs">&lt;div id="app" &gt;
    &lt;span  &gt;{{ message }}&lt;/span&gt;
    &lt;button @click="myFunctionClick()"&gt;Click Here&lt;/button&gt;
&lt;/div&gt;

&lt;/body&gt;

&lt;script type="text/javascript"&gt;
 new Vue({
    el: '#app',
    data: { 
          message:"You clicked me"
      },
      methods:{
        myFunctionClick: function () {        
            this.$el.querySelector("span").innerText = ' you clicked the button';
            this.$el.querySelector("span").style.color = 'pink';
        }
    }
});
&lt;/script&gt;
</pre>
<p>当您单击按钮时，span 元素的文本颜色应该变成粉红色。</p>
<h3>通过 ID 获取元素</h3>
<p>通过将 ID 名称传递给<code>querySelector</code>方法，可以通过 ID 选择元素。为了演示，让我们创建一个隐藏文本页面，带有一个名为<strong>的按钮来显示隐藏文本。</strong>点击按钮时，将显示文本，并将按钮设置为<code>hidden</code>。我们将使用下面的代码:</p>
<pre class="language-vue hljs">&lt;div id="app" &gt;
    &lt;span hidden id="hide" &gt;&lt;/span&gt;
    &lt;button id="bn" @click="myFunctionClick()"&gt;show hidden text&lt;/button&gt;
&lt;/div&gt;

&lt;/body&gt;

&lt;script type="text/javascript"&gt;
 new Vue({
    el: '#app',
    data: { 
          message:"You clicked me"
      },
      methods:{
        myFunctionClick: function () {        
            this.$el.querySelector("#bn").style.display = 'none';
            var hide = this.$el.querySelector("#hide");
             hide.innerText = 'this is the hidden text show time';
             hide.style.display = 'block';
             hide.style.color = 'pink';
        }
    }
});

&lt;/script&gt;
</pre>
<p>当您想要在所选元素上应用多个属性时，您可以将<code>this.$el.querySelector()</code>存储在一个变量中。</p>
<h3>按类获取元素</h3>
<p>我们还可以使用<code>querySelector</code>通过类名获得元素，就像我们对标签和 id 所做的那样。让我们通过创建一个允许用户从 input 元素插入 URL 的简单应用程序来进行演示。图像将显示在一个<code>img</code> HTML 元素中:</p>
<pre class="language-vue hljs">&lt;body&gt;

&lt;div id="app" &gt;
    &lt;img src="" class="image"&gt;
    &lt;input type="url" class="urlinput"&gt;
    &lt;button id="bn" @click="myFunctionClick()"&gt;Load image&lt;/button&gt;
&lt;/div&gt;

&lt;/body&gt;

&lt;script type="text/javascript"&gt;
 new Vue({
    el: '#app',
    data: { 
          Message:"load image"
      },
      methods:{
        myFunctionClick: function () {        
            this.$el.querySelector(".image").src = this.$el.querySelector(".urlinput").value;

        }
    }
});
&lt;/script&gt;
</pre>
<p>在上面的代码中，<code>this.$el.querySelector(".image").src</code>属性用于更改图像 src (URL)。从指定输入元素获得的值被分配给所选的<code>img</code>元素。</p>
<h2>包扎</h2>
<p>当使用<code>querySelector()</code>功能选择一个元素时，可以获得或改变所选元素的属性。有许多属性<code>querySelector()</code>支持，比如输入元素的自动聚焦，使用<code>innerHTML</code>访问元素的文本，元素样式等等。</p>
<p>例如，我们将使用前面代码中的以下代码:</p>
<pre class="language-vue hljs">this.$el.querySelector(".image").src ="logo.jpg"
</pre>
<p>让我们将所选图像类名的图像 src 改为<code>logo.jpg</code>:</p>
<pre class="language-vue hljs">this.$el.querySelector(".image").src
</pre>
<p>上面的代码用于获取所选图像 ID 的属性(URL)值，我们可以将它存储在一个变量中。让我们使用<code>querySelector</code>在<code>input</code>元素上设置自动对焦:</p>
<pre class="language-vue hljs">this.$el.querySelector("input").focus
</pre>
<p>如果有两个或更多的元素具有相同的标记名、类名或 ID，并且使用<code>querySelector</code>来访问元素，那么只有第一个元素是可访问的。让我们使用以下示例来演示这一点:</p>
<pre class="language-vue hljs">&lt;body&gt;

&lt;div id="app" &gt;
    &lt;img src="" class="image"&gt;
    &lt;span&gt;first element&lt;/span&gt;&lt;br&gt;  
    &lt;span&gt;second element&lt;/span&gt; &lt;br&gt;  
    &lt;button id="bn" @click="myFunctionClick()"&gt;change background color&lt;/button&gt;
&lt;/div&gt;

&amp;lt;/body&gt;

&lt;script type="text/javascript"&gt;
 new Vue({
    el: '#app',
    data: { 
          message:"You clicked me"
      },
      methods:{
        myFunctionClick: function () {        
            this.$el.querySelector("span").style.backgroundColor ="red";

        }
    }
});
&lt;/script&gt;
</pre>
<p>我们可以从上面的代码中看到，当单击按钮时，只有第一个 span 元素的背景色变为红色。</p>
<h2>结论</h2>
<p>在本教程中，我们学习了如何使用<code>querySelector</code>访问 Vue 应用程序中组件内部的元素。我们还可以使用标记名、类名或 ID 来访问每个元素。现在，你应该能够让你的网页更加动态和互动。我希望你喜欢这个教程。</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的 Vue 应用</h2><p>调试 Vue.js 应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的 Vue 突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的 DVR，记录你的 Vue 应用程序中发生的一切，包括网络请求、JavaScript 错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex 插件将 Vuex 突变记录到 LogRocket 控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试 Vue 应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>