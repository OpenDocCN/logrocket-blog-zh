<html>
<head>
<title>Pug.js tutorial: A beginner's guide with examples - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Pug.js 教程:带示例的初学者指南</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-pug-js-with-vue-js/#0001-01-01">https://blog.logrocket.com/using-pug-js-with-vue-js/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在这个 Pug.js 教程中，我们将向您展示如何使用 Pug 作为模板引擎将 Vue.js 集成到后端应用程序中。</p>
<p>关于 Pug.js 的介绍，请查看“<a href="https://blog.logrocket.com/getting-started-with-pug/" target="_blank" rel="noopener">开始使用 Pug </a>”</p>
<h2 id="whatispugjs">Pug.js 是什么？</h2>
<p><a href="https://pugjs.org/api/getting-started.html" target="_blank" rel="noopener"> Pug.js </a>，原名 Jade，是 Node.js 等服务器端技术中用于渲染 HTML 的模板引擎，与任何 JavaScript 模板引擎一样，Pug.js 支持编写可重用的 HTML 代码和渲染动态数据。</p>
<p>Vue.js 是一个用于 JavaScript 的渐进式框架，用于构建 web 界面和单页应用程序。不仅仅是网络界面，Vue.js 还被用于桌面和移动应用开发，使用<a href="https://github.com/SimulatedGREG/electron-vue" target="_blank" rel="noopener">电子</a>框架。</p>
<h2 id="whyusepugwithvuejs">为什么要用 Pug 搭配 Vue.js？</h2>
<p>大多数后端开发人员选择将 Pug 与 Vue.js 一起使用，因为它更容易实现和阅读，并且不需要大量的配置。任何有效的 HTML 也是有效的 Vue.js 模板。使用 Pug.js 作为 Vue.js 模板的预处理器，可以更容易地迁移现有项目，以利用 Vue 的反应特性。</p>
<p>Pug.js 经常与后端技术一起使用，如<a href="https://pugjs.org/api/express.html" target="_blank" rel="noopener"> Express </a> <a href="https://pugjs.org/api/express.html">。</a> <a href="https://pugjs.org/api/express.html"> js </a>用于模板化，因为它向下编译为 HTML。与后端开发人员不同，大多数前端开发人员发现编写和维护 Pug 令人沮丧，因为它对空白敏感，这意味着它使用缩进来确定哪些标签嵌套在彼此内部。</p>
<p>要跟随本教程，您应该了解 JavaScript 和 Vue.js，并有使用文本编辑器的经验，例如<a href="https://code.visualstudio.com/" target="_blank" rel="noopener"> VS Code </a>。</p>
<h2 id="settingupanodejsproject">设置 Node.js 项目</h2>
<p>在设置 nodejs 项目时，我们需要初始化一个<code>package.json</code>文件，以便使用<code>npm init -y</code>命令跟踪我们的应用程序依赖关系。</p>
<p>接下来，我们将创建一个<code>index.js</code>文件，这将是我们的根 Node.js 文件。我们将使用 Express.js 作为我们的服务器，所以我们需要安装 Express，将其导入到我们的根<code>index.js</code>文件中，并创建它的一个实例。我们将使用该实例监听运行在<code>3000</code>上的一个端口。</p>
<h3>在 Node.js 应用程序中安装 Express.js</h3>
<p>要安装 Express.js，打开你的终端，输入<code>npm i express</code> <code>--``save</code>。</p>
<pre>let express = require('express');
let app = express();

app.get('/', (req, res) =&gt; res.json({msg:"Hello World"}))

app.listen(3000, () =&gt; console.log('Test running'))
</pre>
<p>要运行该应用程序，请打开您的终端并键入<code>node index.js</code>。这个命令会在终端上显示<code>Test running</code>，表示服务器正在运行。现在，我们可以在浏览器中访问<code><a href="http://localhost:3000/" rel="nofollow">http://localhost:3000/</a></code>上的应用程序:</p>
<p><img data-attachment-id="33941" data-permalink="https://blog.logrocket.com/using-pug-js-with-vue-js/pugjs-hello-world-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1.png" data-orig-size="720,143" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pug.js: ‘Hello World’" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1-300x60.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1.png" decoding="async" class="aligncenter size-full wp-image-33941 jetpack-lazy-image" src="../Images/71b101726bf0685eefefb3c364ca1ca1.png" alt="Pug.js: 'Hello World'" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1-300x60.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="33941" data-permalink="https://blog.logrocket.com/using-pug-js-with-vue-js/pugjs-hello-world-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1.png" data-orig-size="720,143" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pug.js: ‘Hello World’" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1-300x60.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-33941" src="../Images/71b101726bf0685eefefb3c364ca1ca1.png" alt="Pug.js: 'Hello World'" srcset="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1-300x60.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/02/pugjs-hello-world-1.png"/></noscript>
<h3>设置 Pug.js</h3>
<p>要将 Pug 设置为您的模板引擎，首先通过运行<code>npm install pug</code>安装它。</p>
<p>安装 Pug 后，我们需要将它设置为默认的 Express 模板引擎，并指向一个目录，在那里我们所有的模板都将被定义。我们可以将我们的<code>index.js</code>文件修改为:</p>
<pre>let express = require('express');
let pug = require("pug")
let path = require('path')
let app = express();

app.set(path.join(__dirname, './views'))
app.set('view engine', 'pug')


app.get('/', (req, res) =&gt; res.render('home'))

app.listen(3000, () =&gt; console.log('Test running'))
</pre>
<p>注意，我们需要 Node.js <code>path</code>模块，它提供了处理文件和目录路径的工具。</p>
<p>让我们创建一个<code>views</code>目录，在这里我们将定义所有的 Pug 模板。我们将使用<code>path</code>模块来定位<code>views</code>目录，并将其设置为所有模板的根目录。</p>
<p>接下来，在<code>views</code>目录中创建一个<code>home.pug</code>文件，并添加如下内容:</p>
<pre>.container
    h1 Hello World
</pre>
<p>我们的应用程序现在将在浏览器中呈现<code>Hello World</code>，因为我们改变了呈现<code>home.pug</code>模板的路径。注意 Pug 是如何使用缩进来找出哪些标签相互嵌套的。</p>
<h2 id="usingpugwithvuejs">使用 Pug 和 Vue.js</h2>
<p>为了在我们的 Pug 模板中设置 Vue.js，我们需要安装并设置<a href="https://webpack.js.org/" target="_blank" rel="noopener"> webpack </a>。</p>
<p>webpack 基本上是一个模块捆绑器。它的主要目的是捆绑 JavaScript 文件，以便在浏览器中使用。</p>
<p>要安装 webpack 及其 CLI，请打开终端并键入以下内容:</p>
<pre>npm i -D webpack webpack-cli
</pre>
<p>安装 webpack 后，我们需要安装一些其他的包来帮助 bootstrap Vue.js:</p>
<ul>
<li><code>vue-loader</code>，一个 webpack 的加载器，允许你将 Vue.js 组件设置为一个单文件组件</li>
<li><code>vue-loader-plugin</code>，帮助解决 Webpack5 配置的兼容性问题。</li>
<li><code>vue-template-compiler</code>，用于将 Vue.js 2.0 模板预编译成渲染函数，以避免运行时编译开销和 CSP 限制。</li>
<li><code>css-loader</code>，它像<code>import/require()</code>一样解释和解析<code>@import</code>和<code>url()</code></li>
</ul>
<p>要安装这些软件包，请打开您的终端并键入以下内容:</p>
<pre>npm i -D vue-loader vue-loader-plugin vue-template-compiler css-loader
</pre>
<p>标志会将这些包作为开发依赖项安装。</p>
<p>接下来我们要安装<a href="https://blog.logrocket.com/whats-coming-in-babel-8/" target="_blank" rel="noopener"> <code>babel</code> </a>，这是一个工具链，主要用于将 ECMAScript 2015+代码转换成当前和旧版本浏览器和环境下的向后兼容版本的 JavaScript。安装了这个之后，我们就可以在 JavaScript 文件中使用像<code>import</code>和<code>export</code>这样的东西了。</p>
<p>我们将通过在我们的终端上运行<code>npm i babel-watch</code>来使用 npm 安装<code>babel-watch</code>，然后安装<code>babel-core</code>和<code>babel-loader</code>作为开发依赖项:</p>
<pre>npm i -D babel-core babel-loader
</pre>
<p>让我们创建一个<code>client</code>目录，在这里我们将编写我们的 Vuejs 代码。在目录中，创建一个<code>home.js</code>文件并添加以下内容:</p>
<pre>import Vue from "vue";
let app = new Vue({
    el: '#home',
    data: {
        names: ['Wisdom', "Ekpot", "Ubongabasi"]
    },
    methods: {
        logSomeThing() {
            return 'Hello Wisdom Ekpot'
        }
    },
    mounted() {
        console.log(this.logSomeThing());
    }
})
</pre>
<p>如果你熟悉 Vue.js，你应该认识到这是一个简单的 Vuejs 设置。这里，根元素的目标是一个 div，其<code>id</code>为<code>home</code>。一旦安装了模板，就会调用<code>logSomething</code>方法，该方法在<code>methods</code>对象中定义。</p>
<p>为了将它包含在我们的 Pug 文件中，我们必须添加一些 webpack 配置。让我们创建一个<code>webpack.config.js</code>文件，导入 webpack，并为 Vue.js 编写一些配置。</p>
<p>我们将从导入 webpack、<code>path</code>和<code>VueLoaderPlugin</code>开始:</p>
<pre>const webpack = require('webpack');
const path = require('path');
const VueLoaderPlugin = require('vue-loader/lib/plugin');
</pre>
<p>我们的 webpack 配置将被包装在一个<code>config</code>对象中。我们首先将<code>mode</code>设置为<code>development</code>，并定义我们的入口文件。</p>
<p>在设置了入口文件之后，我们需要设置一个输出，所有转换后的代码都将存储在这个输出中。属性告诉 webpack 在哪里发出它创建的包，以及如何命名这些文件。基本上，webpack 将我们的 Vue.js 代码转换成普通的 JavaScript。</p>
<pre>const config = {
    mode: 'development',
    entry: {
        'home': './client/home.js',
    },
    output: {
        path: path.resolve(__dirname, 'public/js'),
        filename: '[name].bundle.js'
    },
}
</pre>
<p>我们将创建一个<code>public</code>目录来存储我们编译的代码。我们还需要提出一些 webpack 规则，以便在规则匹配时使用。仅当父规则条件匹配时，才会评估这些规则。每个嵌套规则都可以包含自己的条件。</p>
<pre> module: {
        rules: [
            {
                test: /\.vue$/,
                loader: 'vue-loader'
            },
            {
                test: /\.js$/,
                use: 'babel-loader',
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: [
                    'vue-style-loader',
                    'css-loader'
                ]
            }
        ]
    },
</pre>
<p>基本上，webpack 检查是否有任何<code>.vue</code>文件扩展名，并使用<code>vue-loader</code>插件将其捆绑到 JavaScript。</p>
<p>我们还需要定义一个<code>resolve</code>对象来配置如何解析模块:</p>
<pre> resolve: {
        alias: {
            'vue$': 'vue/dist/vue.esm.js'
        },
        extensions: [
            '.js',
            '.vue'
        ]
    },
</pre>
<p>接下来，我们需要定义一个新的<code>VueLoaderPlugin</code>实例来帮助处理<a href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/">web pack</a>T3】5 的一些配置:</p>
<pre> plugins: [
        new VueLoaderPlugin(),
    ],
</pre>
<p>这样做之后，我们必须导出我们的<code>config</code>对象:</p>
<pre>module.exports = config;
</pre>
<p>为了引导这个 webpack 配置，我们需要在我们的<code>package.json</code>文件中添加一些脚本来引导它:</p>
<pre> "watch": "babel-watch  --watch -- index",
    "dev": "npm run watch &amp; npm run client:build-dev ",
    "client:build-dev": "webpack --watch"
</pre>
<p><code>client:build-dev</code>命令将启动 Bootstrap 并观察我们的文件是否有任何变化。要启动应用程序，请在您的终端上运行<code>npm run dev</code>。</p>
<p>现在我们可以将我们的<code>home.pug</code>文件修改为:</p>
<pre>.container#home
    h1 Hello World
script(src="/js/home.bundle.js")
</pre>
<p>如果我们在终端上运行<code>npm run dev</code>,它会在我们的公共目录中创建一个<code>home.bundle.js</code>文件，这就是我们经过转换的代码。</p>
<p>如果我们查看我们的浏览器控制台，我们会看到打印的<code>logSomeThing()</code>方法:</p>
<p><img data-attachment-id="33942" data-permalink="https://blog.logrocket.com/using-pug-js-with-vue-js/vuejs-pug-template-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1.png" data-orig-size="720,158" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Vue.js in a Pug template" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1-300x66.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1.png" decoding="async" class="aligncenter size-full wp-image-33942 jetpack-lazy-image" src="../Images/66cf5cfb61cd708b839818a068f05410.png" alt="Vue.js in a Pug Template" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1-300x66.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="33942" data-permalink="https://blog.logrocket.com/using-pug-js-with-vue-js/vuejs-pug-template-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1.png" data-orig-size="720,158" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Vue.js in a Pug template" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1-300x66.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-33942" src="../Images/66cf5cfb61cd708b839818a068f05410.png" alt="Vue.js in a Pug Template" srcset="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1.png 720w, https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1-300x66.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/02/vuejs-pug-template-1.png"/></noscript>
<p>以上表明 Vue.js 正在我们的 Pug 模板中使用。</p>
<p>我们要做的最后一件事是创建一个<code>.gitignore</code>文件并添加以下内容:</p>
<pre>public/js
node_modules
</pre>
<p>这将防止在 git 中提交<code>node_modules</code>目录和<code>public</code>目录。</p>
<h2 id="conclusion">结论</h2>
<p>当在后端处理大型复杂的前端任务时，使用 Pug 和 Vue.js 是简化和扩展开发过程的好方法。</p>
<p>本文中使用的示例的源代码可以在<a href="https://github.com/Wisdom132/webpack-Vue-pug-express" target="_blank" rel="noopener"> GitHub </a>上获得。</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的 Vue 应用</h2><p>调试 Vue.js 应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的 Vue 突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的 DVR，记录你的 Vue 应用程序中发生的一切，包括网络请求、JavaScript 错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex 插件将 Vuex 突变记录到 LogRocket 控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试 Vue 应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>