<html>
<head>
<title>Using the React.cloneElement() function to clone elements - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用 React.cloneElement()函数克隆元素</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-react-cloneelement-function/#0001-01-01">https://blog.logrocket.com/using-react-cloneelement-function/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<h3>什么是<code>React.cloneElement()</code>？</h3>
<p><code><a href="https://reactjs.org/docs/react-api.html#cloneelement" target="blank" rel="noopener">React.cloneElement()</a></code>是用来操作元素的 React 顶级 API 的一部分。它克隆并返回一个新元素，使用它的第一个参数作为起点。该参数可以是 React 元素或呈现 React 元素的组件。</p>
<p>新元素将具有以下特征:</p>
<ul>
<li>原有元素的道具与新道具的融合</li>
<li>新的子代替换现有的子代</li>
<li>保留原始元素中的<code>key</code>和<code>ref</code></li>
</ul>
<p>当您想要添加或修改父组件的子组件的属性，同时避免不必要的重复代码时,<code>React.cloneElement()</code>非常有用。</p>
<h3><code>React.cloneElement()</code>的语法和用法</h3>
<p>在看一些例子之前，我们先来看看<code>React.cloneElement()</code>的语法。下一个代码块给出了语法，后面是一些术语定义。</p>
<pre>React.cloneElement(element, [props], [...children])
</pre>
<ul>
<li><code>element</code>:要克隆的元素</li>
<li><code>[props]</code>:除了原始元素的属性之外，将被添加到克隆元素的属性</li>
<li><code>[...children]</code>:克隆对象的子对象。请注意，现有对象的子对象不会被复制</li>
</ul>
<p>您可以在父组件的定义中使用<code>React.cloneElement()</code>来执行以下过程:</p>
<ul>
<li>修改子属性</li>
<li>添加到子属性</li>
<li>扩展子组件的功能</li>
</ul>
<p>本文使用以下示例深入探讨了这三种操作中的每一种:</p>

<h2 id="modify-children-properties">修改子属性</h2>
<p>当您修改子属性时，这意味着您通过将它们传递给父组件来改变子属性。</p>
<p>没有比通过真实的代码示例来解释更好的方法了。我们将用下面的例子来说明这个概念:</p>
<ol>
<li>重复字符</li>
<li>花式儿童按钮</li>
<li>一次性修改单选按钮的属性</li>
<li>将 React 元素克隆为属性</li>
</ol>
<p>在我们继续之前，请注意在这些例子中，修改后的属性被简单地合并——保留了<code>key</code>和<code>ref</code>。虽然我们将在本文的最后一个示例中查看，但是还没有创建新的子对象。</p>
<h3>1.重复字符</h3>
<p>在下一个代码块中，<code>RepeatCharacters</code>是父组件，<code>CreateTextWithProps</code>是子组件。</p>
<p><code>CreateTextWithProps</code>有一个名为<code>ASCIIChar</code>的属性，它的值是任何有效的 ASCII 字符。<code>RepeatCharacters</code>将使用<code>React.cloneElement()</code>在克隆的元素中重复这个字符，重复的次数在其<code>times</code>属性中指定。</p>
<pre>import React from "react";
​
const CreateTextWithProps = ({ text, ASCIIChar, ...props }) =&gt; {
 return (
   &lt;span {...props}&gt;
    {text}{ASCIIChar}
   &lt;/span&gt;
)
};
​
const RepeatCharacters = ({ times, children }) =&gt; {
 return React.cloneElement(children, {
   // This will override the original ASCIIChar in the text.
   ASCIIChar: children.props.ASCIIChar.repeat(times),
})
};
​
function App() {
 return (
   &lt;div&gt;
     &lt;RepeatCharacters times={3}&gt;
       &lt;CreateTextWithProps
         text="Habdul Hazeez"
         ASCIIChar='.'
         /&gt;
     &lt;/RepeatCharacters&gt;
   &lt;/div&gt;
)
}
​
export default App
</pre>
<p>以下是在 Web 浏览器中看到的结果:</p>
<p><img data-attachment-id="60754" data-permalink="https://blog.logrocket.com/using-react-cloneelement-function/repeating-characters-result-browser/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser.png" data-orig-size="730,339" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="repeating-characters-result-browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser-300x139.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser.png" decoding="async" class="aligncenter size-full wp-image-60754 jetpack-lazy-image" src="../Images/930a8d47c5c2c5b86eac450e149323c3.png" alt="Result of the repeating characters as seen in the web browser" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser-300x139.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="60754" data-permalink="https://blog.logrocket.com/using-react-cloneelement-function/repeating-characters-result-browser/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser.png" data-orig-size="730,339" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="repeating-characters-result-browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser-300x139.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-60754" src="../Images/930a8d47c5c2c5b86eac450e149323c3.png" alt="Result of the repeating characters as seen in the web browser" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser-300x139.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/repeating-characters-result-browser.png"/></noscript>
<h3>2.花式儿童按钮</h3>
<p>这里没有什么新奇的东西——这是一些代码，显示了一个带有文本“新奇按钮”的按钮。这证明您可以定制这些组件来满足您的需求。</p>
<p><code>ButtonContainer</code>组件使用<code>React.cloneElement()</code>来修改由<code>Button</code>组件呈现的元素的外观。</p>
<p>在这种情况下，您提供<code>null</code>作为<code>React.cloneElement()</code>的第三个参数，因为，提醒一下，您没有创建任何新的子元素。</p>
<pre>import React from "react";
​
const ButtonContainer = (props) =&gt; {
 let newProp = {
   backgroundColor: "#1560bd",
   textColor: '#ffffff',
   border: '1px solid #cccccc',
   padding: '0.2em',
}
​
 return (
   &lt;div&gt;
    {React.Children.map(props.children, child =&gt; {
       return React.cloneElement(child, {newProp}, null)
    })}
   &lt;/div&gt;
)
};
​
const Button = (props) =&gt; {
 return &lt;button
   style={{
     color: props.newProp.textColor,
     border: props.newProp.border,
     padding: props.newProp.padding,
     backgroundColor: props.newProp.backgroundColor
  }}&gt;Fancy Button&lt;/button&gt;
}
​
function App() {
 return (
   &lt;ButtonContainer&gt;
     &lt;Button /&gt;
   &lt;/ButtonContainer&gt;
)
}
​
export default App
</pre>
<p>当您在 Web 浏览器中查看结果时，您会看到类似下图的内容。</p>
<p><img data-attachment-id="60750" data-permalink="https://blog.logrocket.com/using-react-cloneelement-function/fancy-button-web-browser/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser.png" data-orig-size="730,299" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="fancy-button-web-browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser-300x123.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser.png" decoding="async" class="aligncenter size-full wp-image-60750 jetpack-lazy-image" src="../Images/4f3c4b89b9889e98437cb5ea095b3850.png" alt="The fancy button in the web browser" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser-300x123.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="60750" data-permalink="https://blog.logrocket.com/using-react-cloneelement-function/fancy-button-web-browser/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser.png" data-orig-size="730,299" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="fancy-button-web-browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser-300x123.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-60750" src="../Images/4f3c4b89b9889e98437cb5ea095b3850.png" alt="The fancy button in the web browser" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser-300x123.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/fancy-button-web-browser.png"/></noscript>
<h3>3.修改单选按钮的属性</h3>
<p>在 HTML 中，单选按钮被分组。您只能选择所提供的选项中的一个，并且它们似乎总是附带有一个<code>name</code>属性。</p>
<p>利用您目前所获得的知识，您可以通过单个父组件将这个<code>name</code>属性动态地添加到多个子组件中。</p>
<p>在这种情况下，子组件应该是单选按钮或呈现单选按钮的组件。</p>
<pre>import React from "react";
​
const RadioGroup = (props) =&gt; {
 const RenderChildren = () =&gt; (
   React.Children.map(props.children, child =&gt; {
     return React.cloneElement(child, {
       name: props.name,
    })
  })
)
​
 return (
   &lt;div&gt;
    {&lt;RenderChildren /&gt;}
   &lt;/div&gt;
)
}
​
const RadioButton = (props) =&gt; {
 return (
   &lt;label&gt;
     &lt;input type="radio" value={props.value} name={props.name} /&gt;
    {props.children}
   &lt;/label&gt;
)
}
​
function App() {
 return (
 &lt;RadioGroup name="numbers"&gt;
   &lt;RadioButton value="first"&gt;First&lt;/RadioButton&gt;
   &lt;RadioButton value="second"&gt;Second&lt;/RadioButton&gt;
   &lt;RadioButton value="third"&gt;Third&lt;/RadioButton&gt;
 &lt;/RadioGroup&gt;
)
}
​
export default App
</pre>
<p>您可以使用浏览器的<strong> Inspect Element </strong>功能来确认这一点。</p>
<p><img data-attachment-id="60756" data-permalink="https://blog.logrocket.com/using-react-cloneelement-function/radio-buttons-confirmation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation.png" data-orig-size="730,559" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="radio-buttons-confirmation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation-300x230.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation.png" decoding="async" class="aligncenter size-full wp-image-60756 jetpack-lazy-image" src="../Images/039856e7bafb644613c53e26ff69538b.png" alt="Confirming the radio buttons in your browser" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation-300x230.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="60756" data-permalink="https://blog.logrocket.com/using-react-cloneelement-function/radio-buttons-confirmation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation.png" data-orig-size="730,559" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="radio-buttons-confirmation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation-300x230.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-60756" src="../Images/039856e7bafb644613c53e26ff69538b.png" alt="Confirming the radio buttons in your browser" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation-300x230.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/radio-buttons-confirmation.png"/></noscript>
<h3>4.克隆另一个反应元素作为道具</h3>
<p>您可能会发现自己处于这样一种情况:您必须为不同的网页创建一个带有不同文本的网站标题。</p>
<p>React 库中有多个选项，可能包括将标题文本存储在一个变量中，将这个变量作为道具传递给一个组件，以及呈现文本。然后，您可能会在每个需要标题文本的组件中这样做。</p>
<p>正如您可能猜到的那样，这造成了不必要的代码重复，正如软件开发人员所知道的那样，我们应该始终提倡保持简单。</p>
<p>相反，你可以使用<code>React.cloneElement</code>来更容易地实现同样的目标。创建三个可重用组件，即:</p>
<ul>
<li><code>Header</code></li>
<li><code>DefaultHeader</code></li>
<li><code>BigHeader</code></li>
</ul>
<p><code>Header</code>组件将接收一个组件作为道具。该组件最终将呈现标题文本。为了安全起见，<code>DefaultHeader</code>将是传递给<code>Header</code>的默认组件。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p><code>DefaultHeader</code>将呈现默认文本。当不带任何属性调用<code>Header</code>时，会呈现这个默认文本。</p>
<p>同时，<code>BigHeader</code>组件将有一个<code>message</code>属性，其值是您选择的标题文本。每次通过<code>BigHeader</code>到<code>Header</code>，都可以在<code>BigHeader</code>渲染之前修改这个<code>message</code>道具的值。</p>
<p>所有这些都将在下一个代码块中演示。</p>
<pre>import React from "react";
import { BrowserRouter as Router, Route, Link } from 'react-router-dom';
​
const DefaultHeader = (color) =&gt; {
 return (
   &lt;div style={{ color: "#1560bd" }}&gt;
     &lt;p&gt;Website of Habdul Hazeez&lt;/p&gt;
   &lt;/div&gt;
)
}
​
const defaultMessage = 'Website of Habdul Hazeez';
​
const BigHeader = ({ color, message = defaultMessage }) =&gt; {
 return (
   &lt;div style={{ color, fontSize: '2em' }}&gt;
    {message}
   &lt;/div&gt;
)
}
​
const Header = ({ hero = &lt;DefaultHeader /&gt;}) =&gt; {
 return (
   &lt;div&gt;
    {React.cloneElement(hero, { color: "#1560bd"})}
   &lt;/div&gt;
)
}
​
const HomePage = () =&gt; {
 return (

&lt;Header hero={&lt;BigHeader message="This is the home page" /&gt;} /&gt;
)
}
​
const AboutMe = () =&gt; {
 return (
   &lt;Header hero={&lt;BigHeader message="Information about me" /&gt;} /&gt;
)
}
​
const ContactPage = () =&gt; {
 return (
   &lt;Header hero={&lt;BigHeader message="This contains my contact information." /&gt;} /&gt;
)
}
​
function App() {
 return (
   &lt;React.Fragment&gt;
     &lt;Router&gt;
       &lt;nav&gt;
         &lt;ul&gt;
           &lt;li&gt;
             &lt;Link to="/"&gt;Home&lt;/Link&gt;
           &lt;/li&gt;
           &lt;li&gt;
             &lt;Link to="/contact-page"&gt;Contact&lt;/Link&gt;
           &lt;/li&gt;
           &lt;li&gt;
             &lt;Link to="about-me"&gt;About&lt;/Link&gt;
           &lt;/li&gt;
         &lt;/ul&gt;
       &lt;/nav&gt;
       
       &lt;Route exact path="/"&gt;&lt;HomePage /&gt;&lt;/Route&gt;
        &lt;Route path="/contact-page"&gt;&lt;ContactPage /&gt;&lt;/Route&gt;
        &lt;Route path="/about-me"&gt;&lt;AboutMe /&gt;&lt;/Route&gt;
      &lt;/Router&gt;
    &lt;/React.Fragment&gt;
)
}
​
export default App
</pre>
<h2 id="add-children-properties">添加到子属性</h2>
<p>当您添加到一个子属性时，这意味着您已经通过父组件在子属性中插入了新的内容。</p>
<p>本节讨论的以下例子将解释如何通过<code>React.cloneElement()</code>添加道具。</p>
<p>注意，正如我在上一节中所说的，新的道具被合并进来，<code>key</code>和<code>ref</code>被保留，新的子元素没有被创建(至少现在是这样)。</p>
<h3>粗体文本</h3>
<p>当你读到这一节的标题并认为:“这很容易”时，不要气馁。我知道这很“容易”——从表面上看。这里的课程是使用<code>React.cloneElement()</code>向子元素添加属性。</p>
<p>为了向您展示这是如何工作的，我们将重温本文中关于重复字符的第一个例子。不过，您不会重复任何字符——相反，您将使用<code>React.cloneElement()</code>函数定义一个添加到子元素的自定义 CSS 样式。</p>
<p>这将在下一个代码块中演示。</p>
<pre>import React from "react";

const CreateTextWithProps = ({ text, ...props }) =&gt; {
  return (
    &lt;span {...props}&gt;
      {text}
    &lt;/span&gt;
  )
};

const BoldText = ({ children }) =&gt; {
  return React.cloneElement(children, {
    style: {
      fontWeight: 'bold'
    },
  })
};

function App() {
  return (
    &lt;div&gt;
      &lt;BoldText&gt;
        &lt;CreateTextWithProps
          text="Habdul Hazeez"
        /&gt;
      &lt;/BoldText&gt;
    &lt;/div&gt;
  )
}

export default App;
</pre>
<h3>将 prop 传递给通过<code>React.cloneElement()</code>接收的元素</h3>
<p>这与上一节“将另一个 React 元素克隆为道具”中的操作类似，但在这里，您将使用<code>React.cloneElement()</code>克隆一个道具。这个属性必须是一个有效的 React 元素，比如<code>&lt;h1&gt;</code>或者<code>&lt;button&gt;</code>。</p>
<p>当您克隆这个属性时，您可以传递额外的属性，如 CSS 样式或事件处理程序。</p>
<p>在下一个代码块中，您将传递一个<code>handleClick</code>函数给由<code>AlertOnClick</code>渲染的道具。因此，每次点击元素时，都会执行<code>handleClick</code>中的代码。</p>
<pre>import React from "react";
​
const AlertOnClick = (props) =&gt; {
 
 function handleClick () {
   alert("Hello World")
}
​
 const Trigger = props.trigger;
​
 return (
   &lt;div&gt;
    {React.cloneElement(Trigger, {
       onClick: handleClick
    })}
   &lt;/div&gt;
)
}
​
function App() {
 
 return (
   &lt;div&gt;
    {
       &lt;AlertOnClick trigger={&lt;button&gt;Click me&lt;/button&gt;} /&gt;
    }
   &lt;/div&gt;
)
}
​
export default App
</pre>
<h2 id="extend-functionality-children-components">扩展子组件的功能</h2>
<p>到目前为止，您已经修改并添加了儿童道具。这个例子展示了一个克隆元素的最后的特征，因为我们最终创建了一个新的子元素！这个新的子节点作为第三个参数传递给<code>React.cloneElement()</code>。</p>
<h3>点击时提醒</h3>
<p>在这个例子中，我们将<a href="https://blog.logrocket.com/a-guide-to-react-onclick-event-handlers" target="_blank" rel="noopener">扩展孩子的功能</a>。</p>
<p>在下一个代码块中，通过<code>Button</code>组件的<code>React.cloneElement()</code>创建的新按钮元素有两个额外的变化:一个<code>onClick</code>事件处理程序和新文本。</p>
<pre>import React from "react";
const Button = () =&gt; {
 return (
   &lt;button type="button" style={{ padding: "10px" }}&gt;
     This is a styled button
   &lt;/button&gt;
)
}
​
function App() {
 return (
   &lt;section&gt;
    {
       React.cloneElement(
         Button(), // component to overwrite
        {
           
           onClick: () =&gt; { // additional props
             alert("You are making progress!!!")
          }
        },
         &lt;&gt;
           Styled button with onClick
         &lt;/&gt;
      )
    }
   &lt;/section&gt;
)
}
​
export default App
</pre>
<p>当执行这段代码时，按钮将呈现通过<code>React.cloneElement()</code>函数添加的文本，如下图所示，该文本将显示为“带有 onClick 的样式化按钮”。</p>
<p><img data-attachment-id="60761" data-permalink="https://blog.logrocket.com/using-react-cloneelement-function/styled-button-on-click/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click.png" data-orig-size="730,371" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="styled-button-on-click" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click.png" decoding="async" class="aligncenter size-full wp-image-60761 jetpack-lazy-image" src="../Images/a7dd35ef5a2c82ff78dee59ceb812082.png" alt="The styled button" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click-300x152.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="60761" data-permalink="https://blog.logrocket.com/using-react-cloneelement-function/styled-button-on-click/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click.png" data-orig-size="730,371" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="styled-button-on-click" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-60761" src="../Images/a7dd35ef5a2c82ff78dee59ceb812082.png" alt="The styled button" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click-300x152.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/styled-button-on-click.png"/></noscript>
<h2>结论</h2>
<p>本文通过七个不同的例子解释了如何使用<code>React.cloneElement()</code>函数。其中四个例子解释了如何修改子组件的属性；另外两个例子详细说明了如何给子组件添加道具；最后，我们的最后一个例子展示了如何扩展子组件的功能。</p>
<p>希望您在本文中学到的东西能够为您的 React 应用程序增加一些创造性！</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用 LogRocket 消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款 React analytics 解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket 告诉您 React 应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS 异常、前端性能指标和用户交互。然后，LogRocket 使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的 React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试 LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>