<html>
<head>
<title>Implementing authentication in Next.js with Firebase - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用 Firebase - LogRocket 博客在 Next.js 中实现认证</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/implementing-authentication-in-next-js-with-firebase/#0001-01-01">https://blog.logrocket.com/implementing-authentication-in-next-js-with-firebase/#0001-01-01</a></blockquote><div><article class="article-post">
<p>身份验证在当今的 web 应用程序中至关重要。这是许多开发人员过去不得不实现的一个特性。幸运的是，许多图书馆通过提供许多内置功能使这项工作变得更加容易。特别是，Firebase 是处理用户管理和认证的优秀工具。</p>
<p>在本教程中，我们将介绍如何使用 Firebase 实现身份验证。</p>
<h2>什么是 Firebase？</h2>
<p><a href="https://firebase.google.com/"> Firebase </a>于 2014 年被谷歌收购，是一个提供一系列产品的平台，包括但不限于:</p>
<ul>
<li>实时数据库</li>
<li>证明</li>
<li>云消息传递</li>
</ul>
<p>这些产品允许开发人员轻松快速地创建和运行应用程序。</p>
<h2 id="creating-firebase-account">创建 Firebase 帐户</h2>
<p>在编写一行代码之前，您需要一个 Firebase 帐户。头<a href="https://firebase.google.com/">此处</a>创建一个。</p>
<p>在 Firebase 中，如果您想要 API 密钥，您将需要创建应用程序。这些应用程序必须属于项目。因此，如果您还没有建立项目，您需要创建一个。一旦你这样做了，创建一个应用程序来获取你的钥匙。</p>
<figure id="attachment_51004" aria-describedby="caption-attachment-51004" class="wp-caption aligncenter"><img data-attachment-id="51004" data-permalink="https://blog.logrocket.com/implementing-authentication-in-next-js-with-firebase/app-formats-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1.png" data-orig-size="730,197" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding new app in Firebase" data-image-description="" data-image-caption="&lt;p&gt;iOS, Android, and web are some of the formats available.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1-300x81.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1.png" decoding="async" class="size-full wp-image-51004 jetpack-lazy-image" src="../Images/de349ceacd56c31fe8906bf2a8b1d293.png" alt="Creating a new app for our project in Firebase" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1-300x81.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="51004" data-permalink="https://blog.logrocket.com/implementing-authentication-in-next-js-with-firebase/app-formats-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1.png" data-orig-size="730,197" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding new app in Firebase" data-image-description="" data-image-caption="&lt;p&gt;iOS, Android, and web are some of the formats available.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1-300x81.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1.png" decoding="async" loading="lazy" class="size-full wp-image-51004" src="../Images/de349ceacd56c31fe8906bf2a8b1d293.png" alt="Creating a new app for our project in Firebase" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1-300x81.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/app-formats-1.png"/></noscript><figcaption id="caption-attachment-51004" class="wp-caption-text">iOS, Android, and web are some of the formats available.</figcaption></figure>
<p>现在，点击项目概述右侧的<strong>设置图标</strong>(在屏幕的左上方)。在<strong>项目设置</strong>和<strong>常规</strong>下，你应该看到你的应用及其配置。</p>
<p>在开始编写代码之前，您需要启用想要使用的登录方法。为此，点击<strong>认证</strong>，然后<strong>登录方法</strong>。每一个都有不同的配置，但是为了这个教程，我将把重点放在传统的电子邮件/密码方法上。</p>
<figure id="attachment_51009" aria-describedby="caption-attachment-51009" class="wp-caption aligncenter"><img data-attachment-id="51009" data-permalink="https://blog.logrocket.com/implementing-authentication-in-next-js-with-firebase/api-app-athentication/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication.png" data-orig-size="730,266" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Enabling email/password method" data-image-description="" data-image-caption="&lt;p&gt;Enable your sign-in providers&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication-300x109.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication.png" decoding="async" class="wp-image-51009 size-full jetpack-lazy-image" src="../Images/32342f07bd73ab39e28861d618f3a775.png" alt="Email/password sign in method enabled" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication-300x109.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="51009" data-permalink="https://blog.logrocket.com/implementing-authentication-in-next-js-with-firebase/api-app-athentication/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication.png" data-orig-size="730,266" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Enabling email/password method" data-image-description="" data-image-caption="&lt;p&gt;Enable your sign-in providers&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication-300x109.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication.png" decoding="async" loading="lazy" class="wp-image-51009 size-full" src="../Images/32342f07bd73ab39e28861d618f3a775.png" alt="Email/password sign in method enabled" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication-300x109.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/api-app-athentication.png"/></noscript><figcaption id="caption-attachment-51009" class="wp-caption-text">Enable your sign-in providers.</figcaption></figure>
<h2 id="adding-local-environments-next-js">将本地环境添加到 Next.js</h2>
<p>现在您已经有了自己的键，是时候将它们添加到您的 Next.js 项目中了。</p>
<p>提示:如果你还没有创建一个，不要着急。这个命令将使您开始:</p>
<pre>npx create-next-app
# or
yarn create next-app
</pre>
<p>由于有了<code>.gitignore</code>文件，Next.js 项目会自动忽略<code>.env.local</code>,因此您可以复制/粘贴您的密钥，而不用担心它们会被意外提交到 GitHub。</p>
<pre>NEXT_PUBLIC_FIREBASE_PUBLIC_API_KEY=&lt;YOUR_API_KEY&gt;
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=&lt;YOUR_DOMAIN&gt;
NEXT_PUBLIC_FIREBASE_PROJECT_ID=&lt;YOUR_PROJECT_ID&gt;
</pre>
<p>不要忘记:在 Next.js 中，命名环境变量的惯例是它们必须以 NEXT_PUBLIC 开头。</p>
<h2>安装 Firebase</h2>
<p>继续安装 Firebase 库。</p>
<pre>npm install --save Firebase
# or
yarn add Firebase
</pre>
<h2>在 Next.js 中创建 Firebase 实例</h2>
<p>太好了！安装了库并设置了 API 密钥。是时候使用这些键创建一个 Firebase 实例了。当然，Firebase 附带了许多有用的工具，但是出于本文的考虑，我们将只关注身份验证。因此，您只需要<code>Firebase/auth</code>和<code>apiKey</code>、<code>authDomain</code>和<code>projectId</code>凭证。</p>
<pre>import Firebase from 'Firebase/app';
import 'Firebase/auth';

const FirebaseCredentials = {
  apiKey: process.env.NEXT_PUBLIC_FIREBASE_PUBLIC_API_KEY,
  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID
}
// if a Firebase instance doesn't exist, create one
if (!Firebase.apps.length) {
  Firebase.initializeApp(FirebaseCredentials)
}

export default Firebase;
</pre>
<h2>监听 Firebase 的变化</h2>
<p>你首先需要的是一个可以在整个应用程序中访问的<code>authUser</code>。该变量不仅有助于用户管理，也有助于相应地重定向路由。</p>
<p>例如，如果<code>authUser</code>为空，意味着用户没有登录，当这个人试图访问一个受保护的路由(比如一个仪表板)时，您应该将他们重定向到登录页面。</p>
<p>幸运的是，<code>Firebase.auth</code>跟踪状态，并带有一个名为<code>onAuthStateChanged</code>的内置函数，允许您监听状态变化。</p>
<p>当状态改变时，根据您的需要格式化用户，最后，将其设置为您的<code>authUser</code>变量。使用<code>loading</code>变量来指示 Firebase 是否正在获取数据。</p>
<pre>import { useState, useEffect } from 'react'
import Firebase from './Firebase';

const formatAuthUser = (user) =&gt; ({
  uid: user.uid,
  email: user.email
});

export default function useFirebaseAuth() {
  const [authUser, setAuthUser] = useState(null);
  const [loading, setLoading] = useState(true);

  const authStateChanged = async (authState) =&gt; {
    if (!authState) {
      setAuthUser(null)
      setLoading(false)
      return;
    }

    setLoading(true)
    var formattedUser = formatAuthUser(authState);
    setAuthUser(formattedUser);    
    setLoading(false);
  };

// listen for Firebase state change
  useEffect(() =&gt; {
    const unsubscribe = Firebase.auth().onAuthStateChanged(authStateChanged);
    return () =&gt; unsubscribe();
  }, []);

  return {
    authUser,
    loading
  };
}
</pre>
<h2>创建用户上下文</h2>
<p>要在整个应用程序中访问<code>authUser</code>和加载变量，您将使用上下文 API。</p>
<p>提示:不熟悉 React 上下文？不要犹豫去查看<a href="https://reactjs.org/docs/context.html">官方文件</a>。</p>
<p>首先，用带有默认值的<code>createContext</code>创建上下文对象(<code>authUser</code>作为<code>null</code>，加载作为<code>true</code>)。然后，从<code>useFirebaseAuth</code>中获取实际的<code>authUser</code>和<code>loading</code>变量，并将其传递给提供者组件。</p>
<p>您还应该添加一个定制钩子，在本例中是<code>useAuth</code>，来访问当前的上下文值。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<pre>import { createContext, useContext, Context } from 'react'
import useFirebaseAuth from '../lib/useFirebaseAuth';

const authUserContext = createContext({
  authUser: null,
  loading: true
});

export function AuthUserProvider({ children }) {
  const auth = useFirebaseAuth();
  return &lt;authUserContext.Provider value={auth}&gt;{children}&lt;/authUserContext.Provider&gt;;
}
// custom hook to use the authUserContext and access authUser and loading
export const useAuth = () =&gt; useContext(authUserContext);
</pre>
<p>然后，在我们的<code>_app.js</code>中，将这个提供者包装到您的应用程序中。这确保了子组件能够访问您的用户上下文。</p>
<pre>import { AuthUserProvider } from '../context/AuthUserContext';

function MyApp({ Component, pageProps }) {
  return &lt;AuthUserProvider&gt;&lt;Component {...pageProps} /&gt;&lt;/AuthUserProvider&gt;
}

export default MyApp
</pre>
<h2>创建受保护的路由</h2>
<p>受保护的路径是应用程序的页面或部分，只应由特定用户访问。在这种情况下，只有登录的用户才能访问这些内容。要设置这个，从你的自定义<code>useAuth()</code>钩子中获取<code>authUser</code>和<code>loading</code>。</p>
<p>有了这些变量，检查 Firebase 是否还在获取数据(即，loading 是<code>true</code>)，如果不是，检查<code>authUser</code>是否是<code>null</code>。如果是这种情况，那么用户没有登录，您应该将他们重定向到登录页面。</p>
<p>在你的应用中测试它，并确保重定向正确发生。</p>
<pre>import { useEffect } from 'react';
import { useRouter } from 'next/router';
import { useAuth } from '../context/AuthUserContext';

import {Container, Row, Col} from 'reactstrap';

const LoggedIn = () =&gt; {
  const { authUser, loading } = useAuth();
  const router = useRouter();

  // Listen for changes on loading and authUser, redirect if needed
  useEffect(() =&gt; {
    if (!loading &amp;&amp; !authUser)
      router.push('/')
  }, [authUser, loading])

  return (
    //Your logged in page
  )
}

export default LoggedIn;
</pre>
<h2>在 Next.js 中添加登录、注册和注销功能</h2>
<p>现在，让我们进入有趣的部分。Firebase 的一个优点是，它带有许多用于登录、创建用户和注销的内置功能。</p>
<p>因此，让我们将它们添加到 useFirebaseAuth 函数中。使用<code>Firebase.auth()</code>进入不同的功能(<code>signInWithEmailAndPassword</code>、<code>createUserWithEmailAndPassword</code>和<code>signOut</code>):</p>
<pre>export default function useFirebaseAuth() {
  // ...
  const clear = () =&gt; {
    setAuthUser(null);
    setLoading(true);
  };

  const signInWithEmailAndPassword = (email, password) =&gt;
    Firebase.auth().signInWithEmailAndPassword(email, password);

  const createUserWithEmailAndPassword = (email, password) =&gt;
    Firebase.auth().createUserWithEmailAndPassword(email, password);

  const signOut = () =&gt;
    Firebase.auth().signOut().then(clear);

  useEffect(() =&gt; {
    const unsubscribe = Firebase.auth().onAuthStateChanged(authStateChanged);
    return () =&gt; unsubscribe();
  }, []);

  return {
    authUser,
    loading,
    signInWithEmailAndPassword,
    createUserWithEmailAndPassword,
    signOut
  };
}
</pre>
<p>不要忘记更新上下文文件中的默认值。</p>
<pre>const authUserContext = createContext({
  authUser: null,
  loading: true,
  signInWithEmailAndPassword: async () =&gt; {},
  createUserWithEmailAndPassword: async () =&gt; {},
  signOut: async () =&gt; {}
});

export function AuthUserProvider({ children }) {
  const auth = useFirebaseAuth();
  return &lt;authUserContext.Provider value={auth}&gt;{children}&lt;/authUserContext.Provider&gt;;
}
</pre>
<h2>创建注册页面</h2>
<p>在您的注册页面中，使用您的<code>useAuth hook</code>来检索您的函数，以便再次创建用户。<code>createUserWithEmailAndPassword</code>带两个参数:邮箱和密码。</p>
<p>完成表单验证后，调用该函数。如果它成功返回一个<code>authUser</code>，那么您可以相应地重定向用户。</p>
<pre>import { useState } from 'react';
import { useRouter } from 'next/router';

import { useAuth } from '../context/AuthUserContext';

import {Container, Row, Col, Button, Form, FormGroup, Label, Input, Alert} from 'reactstrap';

const SignUp = () =&gt; {
  const [email, setEmail] = useState("");
  const [passwordOne, setPasswordOne] = useState("");
  const [passwordTwo, setPasswordTwo] = useState("");
  const router = useRouter();
  const [error, setError] = useState(null);

  const { createUserWithEmailAndPassword } = useAuth();

  const onSubmit = event =&gt; {
    setError(null)
    //check if passwords match. If they do, create user in Firebase
    // and redirect to your logged in page.
    if(passwordOne === passwordTwo)
      createUserWithEmailAndPassword(email, passwordOne)
      .then(authUser =&gt; {
        console.log("Success. The user is created in Firebase")
        router.push("/logged_in");
      })
      .catch(error =&gt; {
        // An error occurred. Set error message to be displayed to user
        setError(error.message)
      });
    else
      setError("Password do not match")
    event.preventDefault();
  };

  return (
    &lt;Container className="text-center custom-container"&gt;
      &lt;Row&gt;
        &lt;Col&gt;
          &lt;Form 
            className="custom-form"
            onSubmit={onSubmit}&gt;
          { error &amp;&amp; &lt;Alert color="danger"&gt;{error}&lt;/Alert&gt;}
            &lt;FormGroup row&gt;
              &lt;Label for="signUpEmail" sm={4}&gt;Email&lt;/Label&gt;
              &lt;Col sm={8}&gt;
                &lt;Input
                  type="email"
                  value={email}
                  onChange={(event) =&gt; setEmail(event.target.value)}
                  name="email"
                  id="signUpEmail"
                  placeholder="Email" /&gt;
              &lt;/Col&gt;
            &lt;/FormGroup&gt;
            &lt;FormGroup row&gt;
              &lt;Label for="signUpPassword" sm={4}&gt;Password&lt;/Label&gt;
              &lt;Col sm={8}&gt;
                &lt;Input
                  type="password"
                  name="passwordOne"
                  value={passwordOne}
                  onChange={(event) =&gt; setPasswordOne(event.target.value)}
                  id="signUpPassword"
                  placeholder="Password" /&gt;
              &lt;/Col&gt;
            &lt;/FormGroup&gt;
            &lt;FormGroup row&gt;
              &lt;Label for="signUpPassword2" sm={4}&gt;Confirm Password&lt;/Label&gt;
              &lt;Col sm={8}&gt;
                &lt;Input
                  type="password"
                  name="password"
                  value={passwordTwo}
                  onChange={(event) =&gt; setPasswordTwo(event.target.value)}
                  id="signUpPassword2"
                  placeholder="Password" /&gt;
              &lt;/Col&gt;
            &lt;/FormGroup&gt;
            &lt;FormGroup row&gt;
             &lt;Col&gt;
               &lt;Button&gt;Sign Up&lt;/Button&gt;
             &lt;/Col&gt;
           &lt;/FormGroup&gt;
          &lt;/Form&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    &lt;/Container&gt;
  )
}

export default SignUp;
</pre>
<h2>添加注销按钮</h2>
<p>注销也很简单。从<code>useAuth()</code>中抓取<code>signOut()</code>函数，并将其添加到按钮或链接中。</p>
<pre>import { useEffect } from 'react';
import { useRouter } from 'next/router';
import { useAuth } from '../context/AuthUserContext';

import {Container, Row, Col, Button} from 'reactstrap';

const LoggedIn = () =&gt; {
  const { authUser, loading, signOut } = useAuth();
  const router = useRouter();

  // Listen for changes on loading and authUser, redirect if needed
  useEffect(() =&gt; {
    if (!loading &amp;&amp; !authUser)
      router.push('/')
  }, [authUser, loading])

  return (
    &lt;Container&gt;
      // ...
      &lt;Button onClick={signOut}&gt;Sign out&lt;/Button&gt;
      // ...
    &lt;/Container&gt;
  )
}

export default LoggedIn;
</pre>
<h2>创建登录页面</h2>
<p>最后，登录功能！和前面两个一模一样。从<code>useAuth()</code>中检索<code>signInWithEmailAndPassword()</code>，并传入用户的电子邮件和密码。如果正确，则重定向用户，如果不正确，则显示正确的错误消息。</p>
<pre>import { useState } from 'react';
import Link from 'next/link';
import { useRouter } from 'next/router';

import { useAuth } from '../context/AuthUserContext';

import {Container, Row, Col, Button, Form, FormGroup, Label, Input, Alert} from 'reactstrap';

export default function Home() {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [error, setError] = useState(null);
  const router = useRouter();
  const { signInWithEmailAndPassword } = useAuth();

  const onSubmit = event =&gt; {
    setError(null)
    signInWithEmailAndPassword(email, password)
    .then(authUser =&gt; {
      router.push('/logged_in');
    })
    .catch(error =&gt; {
      setError(error.message)
    });
    event.preventDefault();
  };

  return (
    &lt;Container className="text-center" style={{ padding: '40px 0px'}}&gt;
      &lt;Row&gt;
        &lt;Col&gt;
          &lt;h2&gt;Login&lt;/h2&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
      &lt;Row style={{maxWidth: '400px', margin: 'auto'}}&gt;
        &lt;Col&gt;
          &lt;Form onSubmit={onSubmit}&gt;
          { error &amp;&amp; &lt;Alert color="danger"&gt;{error}&lt;/Alert&gt;}
            &lt;FormGroup row&gt;
              &lt;Label for="loginEmail" sm={4}&gt;Email&lt;/Label&gt;
              &lt;Col sm={8}&gt;
                &lt;Input
                  type="email"
                  value={email}
                  onChange={(event) =&gt; setEmail(event.target.value)}
                  name="email"
                  id="loginEmail"
                  placeholder="Email" /&gt;
              &lt;/Col&gt;
            &lt;/FormGroup&gt;
            &lt;FormGroup row&gt;
              &lt;Label for="loginPassword" sm={4}&gt;Password&lt;/Label&gt;
              &lt;Col sm={8}&gt;
                &lt;Input
                  type="password"
                  name="password"
                  value={password}
                  onChange={(event) =&gt; setPassword(event.target.value)}
                  id="loginPassword"
                  placeholder="Password" /&gt;
              &lt;/Col&gt;
            &lt;/FormGroup&gt;
            &lt;FormGroup row&gt;
             &lt;Col&gt;
               &lt;Button&gt;Login&lt;/Button&gt;
             &lt;/Col&gt;
           &lt;/FormGroup&gt;
           &lt;FormGroup row&gt;
            &lt;Col&gt;
              No account? &lt;Link href="/sign_up"&gt;Create one&lt;/Link&gt;
            &lt;/Col&gt;
          &lt;/FormGroup&gt;
          &lt;/Form&gt;
        &lt;/Col&gt;
      &lt;/Row&gt;
    &lt;/Container&gt;
  )
}
</pre>
<h2>结论</h2>
<p>在本教程中，我们介绍了如何创建 Firebase 帐户、项目和应用程序。然后，我们学习了如何使用 React 上下文来创建用户上下文。在这个上下文中，我们添加了用户和加载变量以及登录、注册和注销功能。最后，多亏了 Firebase，我们使用这些函数在 Next.js 应用程序中实现了身份验证。</p>
<p>本教程的完整代码可以在 GitHub 上找到。</p><div class="code-block code-block-30">
<div class="blog-plug inline-plug next-plug"><h2><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank"> LogRocket </a>:全面了解生产 Next.js 应用</h2><p>调试下一个应用程序可能会很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪状态、自动显示 JavaScript 错误、跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-lazy-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/></noscript></a><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p>LogRocket 就像是网络和移动应用的 DVR，记录下你的 Next.js 应用上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket 还可以监控应用程序的性能，报告客户端 CPU 负载、客户端内存使用等指标。</p><p>LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p><p>让您调试 Next.js 应用的方式现代化— <a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>