<html>
<head>
<title>Build a React Native credit card scanner for chipless cards - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>为无芯片卡构建一个React原生信用卡扫描仪</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-react-native-credit-card-scanner-chipless-cards/#0001-01-01">https://blog.logrocket.com/build-react-native-credit-card-scanner-chipless-cards/#0001-01-01</a></blockquote><div><article class="article-post">
<p>无线通信不断发展和改进，带来了更常见、更先进的功能，如用信用卡点击支付。如今，几乎在任何一家商店，你只要在他们的机器上刷一下信用卡就可以立即付款。</p>
<p>我们可以在手机中使用同样的技术，这样我们就不必手动将信用卡信息输入支付系统。NFC，或<a href="https://blog.logrocket.com/using-nfc-tags-react-native/">近场通信</a>，允许我们以类似的方式读取卡的细节。在本教程中，我们将学习如何通过在支持NFC的智能手机上点击信用卡来收集卡的详细信息。</p>
<p>请注意，在撰写本文时，您无法在苹果iPhone设备上通过NFC收集卡的详细信息。苹果已经将这项功能限制在Apple Pay上，无论何时你打算将NFC用于支付以外的功能，都需要获得批准。因此，您应该在任何支持NFC的Android设备上尝试本教程。</p>
<p>要跟随本教程，您需要以下内容:</p>
<ul>
<li>React Native的工作知识</li>
<li>支持NFC的Android设备:本教程不能在Android Studio模拟器上运行，因为它们不能模拟NFC，所以您需要一个物理设备</li>
<li>用于测试的具有NFC功能的信用卡:任何最近发行的信用卡都将内置该功能</li>
</ul>
<p>一旦满足了这些要求，就可以开始构建应用程序了！</p>
<h2 id="tableofcontents">目录</h2>


<p>NFC是一种使用无线电波在两个设备之间建立联系的技术，以便它们可以相互通信和共享信息。</p>
<p>支持NFC的设备也可以使用NFC标签进行通信。NFC标签没有电源，但是，当靠近支持NFC的设备时，NFC标签会发射无线电波，允许设备与NFC标签通信。</p>
<p>NFC标签有许多实际应用。例如，当开车到另一个城市时，NFC读取器用于检测附在您车辆上的NFC标签，然后它会向您收取通行费，而您不必手动支付给工作人员。</p>
<p>信用卡也是如此。现在的信用卡读卡器都自带NFC读卡器，可以通过嵌入信用卡的NFC标签读取卡的详细信息。因此，您可以快速轻松地支付，而无需与读卡器进行任何身体接触。</p>
<h2 id="create-react-native-application">创建一个React本机应用程序</h2>
<p>要创建新的React本机应用程序，请打开终端，导航到一个安全目录，然后运行以下命令:</p>
<pre class="language-bash hljs">npx react-native init &lt;project-name&gt;
</pre>
<p>您可以用任何字母数字名称替换<code>&lt;project-name&gt;</code>，例如<code>nfccardreader123</code>。运行上面的命令后，React本机安装工具将开始下载模板并创建您的React本机应用程序。根据您的系统和互联网连接速度，这可能需要一些时间。</p>
<p>应用程序安装完成后，导航到您的项目目录。通过进入Android目录并检查<code>build.gradle</code>文件来检查你的Gradle版本。Gradle版本影响您将用于安装<a href="https://www.npmjs.com/package/react-native-nfc-card-reader"> <code>react-native-nfc-card-reader</code> </a>包的命令，这将帮助我们读取卡的详细信息。</p>
<p>如果您使用的是Gradle ≤v7.0，请运行以下命令:</p>
<pre class="language-bash hljs">npm install react-native-nfc-card-reader
</pre>
<p>如果您使用的是Gradle ≥7.0，请运行以下命令:</p>
<pre class="language-bash hljs">npm install "https://github.com/jackbayliss/react-native-nfc-card-reader.git#gradle7.0" --save
</pre>
<p>你可以在这个GitHub库的<a href="https://github.com/jackbayliss/react-native-nfc-card-reader"> README.md文件中找到更多关于不同Gradle版本的安装步骤的信息。此页面会定期更新，以防将来的Gradle版本需要任何新命令。</a></p>
<h2 id="using-nfc-android">在Android上使用NFC</h2>
<p>现在，您需要向Android添加提及，您将在该应用程序中使用NFC。为此，导航到<code>android/app/src/main</code>，打开<code>AndroidManifest.xml</code>文件，并添加以下活动:</p>
<pre class="language-xml hljs">&lt;activity android:name="com.jackbayliss.nfcreader.NfcCardReaderActivity"/&gt;
</pre>
<p>您的<code>AndroidManifest.xml</code>文件应该看起来像下面的代码，但是，基本布局可能会因为React本机更新而改变:</p>
<pre class="language-xml hljs">&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.e"&gt;
    &lt;uses-permission android:name="android.permission.INTERNET" /&gt;
    &lt;application
      android:name=".MainApplication"
      android:label="@string/app_name"
      android:icon="@mipmap/ic_launcher"
      android:roundIcon="@mipmap/ic_launcher_round"
      android:allowBackup="false"
      android:theme="@style/AppTheme"&gt;
      &lt;activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|screenSize|smallestScreenSize|uiMode"
        android:launchMode="singleTask"
        android:windowSoftInputMode="adjustResize"
        android:exported="true"&gt;
        &lt;intent-filter&gt;
            &lt;action android:name="android.intent.action.MAIN" /&gt;
            &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
        &lt;/intent-filter&gt;
      &lt;/activity&gt;
      &lt;activity android:name="com.jackbayliss.nfcreader.NfcCardReaderActivity"/&gt;
    &lt;/application&gt;
&lt;/manifest&gt;
</pre>
<p>现在，使用以下命令运行应用程序:</p>
<pre class="language-bash hljs">npx react-native run-android
</pre>
<p>确保您的Android设备已接通电源，并打开了USB调试功能。您可以在开发人员设置中添加这个配置，您应该会看到基本的React本机样板文件。</p>
<h2 id="designing-layout">设计布局</h2>
<p>转到项目根目录中的<code>App.js</code>并创建以下布局:</p>
<pre class="language-javascript hljs">import React, {useState} from 'react';
import {
  Button,
  SafeAreaView,
  ScrollView,
  StatusBar,
  TextInput,
  useColorScheme,
  View,
} from 'react-native';
import {Colors} from 'react-native/Libraries/NewAppScreen';
const App = () =&gt; {
  const [cardNumber, setCardNumber] = useState('');
  const [expiry, setExpiry] = useState('');
  const [name, setName] = useState('');
  const isDarkMode = useColorScheme() === 'dark';
  const backgroundStyle = {
    backgroundColor: isDarkMode ? Colors.darker : Colors.lighter,
  };
  const scanCard = async () =&gt; {};
  return (
    &lt;SafeAreaView style={backgroundStyle}&gt;
      &lt;StatusBar
        barStyle={isDarkMode ? 'light-content' : 'dark-content'}
        backgroundColor={backgroundStyle.backgroundColor}
      /&gt;
      &lt;ScrollView
        contentInsetAdjustmentBehavior="automatic"
        style={backgroundStyle}&gt;
        &lt;View
          style={{
            flex: 1,
          }}&gt;
          &lt;TextInput
            style={{
              margin: 10,
              padding: 10,
              borderWidth: 1,
              borderColor: 'gray',
            }}
            placeholder="Card number"
            value={cardNumber}
            onChangeText={t =&gt; setCardNumber(t)}
          /&gt;
          &lt;TextInput
            style={{
              margin: 10,
              padding: 10,
              borderWidth: 1,
              borderColor: 'gray',
            }}
            placeholder="Expiry"
            value={expiry}
            onChangeText={t =&gt; setExpiry(t)}
          /&gt;
          &lt;TextInput
            style={{
              margin: 10,
              padding: 10,
              borderWidth: 1,
              borderColor: 'gray',
            }}
            placeholder="Name on card"
            value={name}
            onChangeText={t =&gt; setName(t)}
          /&gt;
          &lt;Button title="Scan Card" onPress={scanCard} /&gt;
        &lt;/View&gt;
      &lt;/ScrollView&gt;
    &lt;/SafeAreaView&gt;
  );
};
export default App;
</pre>
<p>在上面的代码块中，我们已经创建了基本的布局并将输入映射到一个状态，这样我们就可以在以后扫描卡片时更改它们。我们还创建了一个名为<code>scanCard</code>的空函数，我们现在将对其进行处理。您生成的布局应该如下图所示:</p>
<p><img data-attachment-id="132006" data-permalink="https://blog.logrocket.com/build-react-native-credit-card-scanner-chipless-cards/attachment/react-native-card-scanner-app-layout/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout.jpeg" data-orig-size="730,1583" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="react-native-card-scanner-app-layout" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout-138x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout-472x1024.jpeg" decoding="async" class="aligncenter wp-image-132006 size-full jetpack-lazy-image" src="../Images/70d968046985de4cad64403ec71ad3c5.png" alt="React Native Card Scanner App Layout" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout-138x300.jpeg 138w, https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout-472x1024.jpeg 472w, https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout-708x1536.jpeg 708w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="132006" data-permalink="https://blog.logrocket.com/build-react-native-credit-card-scanner-chipless-cards/attachment/react-native-card-scanner-app-layout/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout.jpeg" data-orig-size="730,1583" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="react-native-card-scanner-app-layout" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout-138x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout-472x1024.jpeg" decoding="async" loading="lazy" class="aligncenter wp-image-132006 size-full" src="../Images/70d968046985de4cad64403ec71ad3c5.png" alt="React Native Card Scanner App Layout" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout-138x300.jpeg 138w, https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout-472x1024.jpeg 472w, https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout-708x1536.jpeg 708w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-card-scanner-app-layout.jpeg"/></noscript>
<p>现在，在这个文件的顶部导入<code>react-native-nfc-card-reader</code>:</p>
<pre>import NfcCardReader from 'react-native-nfc-card-reader';
</pre>
<p>在<code>scanCard()</code>函数中，我们只需要调用一个函数来调用设备的NFC读卡器，这样我们就可以读取卡的详细信息:</p>
<pre>NfcCardReader.startNfc(function(cardDetails){
     setCardNumber(cardDetails.cardNumber)
     setExpiry(cardDetails.expiryDate)
     setName(cardDetails.firstName + cardDetails.lastName)
 })
</pre>
<p>这样做应该映射状态并在文本框中显示数据。现在，您的<code>App.jsx</code>文件应该看起来像下面的代码:</p>
<pre class="language-jsx hljs">import React, {useState} from 'react';
import {
  Button,
  SafeAreaView,
  ScrollView,
  StatusBar,
  TextInput,
  useColorScheme,
  View,
} from 'react-native';
import {Colors} from 'react-native/Libraries/NewAppScreen';
import NfcCardReader from 'react-native-nfc-card-reader';
const App = () =&gt; {
  const [cardNumber, setCardNumber] = useState('');
  const [expiry, setExpiry] = useState('');
  const [name, setName] = useState('');
  const isDarkMode = useColorScheme() === 'dark';
  const backgroundStyle = {
    backgroundColor: isDarkMode ? Colors.darker : Colors.lighter,
  };
  const scanCard = () =&gt; {
    NfcCardReader.startNfc(function (cardDetails) {
      setCardNumber(cardDetails.cardNumber);
      setExpiry(cardDetails.expiryDate);
      setName(cardDetails.firstName + cardDetails.lastName);
    });
  };
  return (
    &lt;SafeAreaView style={backgroundStyle}&gt;
      &lt;StatusBar
        barStyle={isDarkMode ? 'light-content' : 'dark-content'}
        backgroundColor={backgroundStyle.backgroundColor}
      /&gt;
      &lt;ScrollView
        contentInsetAdjustmentBehavior="automatic"
        style={backgroundStyle}&gt;
        &lt;View
          style={{
            flex: 1,
          }}&gt;
          &lt;TextInput
            style={{
              margin: 10,
              padding: 10,
              borderWidth: 1,
              borderColor: 'gray',
            }}
            placeholder="Card number"
            value={cardNumber}
            onChangeText={t =&gt; setCardNumber(t)}
          /&gt;
          &lt;TextInput
            style={{
              margin: 10,
              padding: 10,
              borderWidth: 1,
              borderColor: 'gray',
            }}
            placeholder="Expiry"
            value={expiry}
            onChangeText={t =&gt; setExpiry(t)}
          /&gt;
          &lt;TextInput
            style={{
              margin: 10,
              padding: 10,
              borderWidth: 1,
              borderColor: 'gray',
            }}
            placeholder="Name on card"
            value={name}
            onChangeText={t =&gt; setName(t)}
          /&gt;
          &lt;Button title="Scan Card" onPress={scanCard} /&gt;
        &lt;/View&gt;
      &lt;/ScrollView&gt;
    &lt;/SafeAreaView&gt;
  );
};
export default App;
</pre>
<p>现在，我们可以开始测试了！打开手机上的app，让React原生捆绑JavaScript，然后点击<strong>扫卡</strong>。您可能不会收到任何提示，但当您将嵌入NFC的信用卡带到附近时，您会看到您的卡详细信息自动输入到字段中！</p>
<h2 id="conclusion">结论</h2>
<p>NFC带来的机会是无限的。在本教程中，我们学习了如何使用NFC在我们的Android设备中实现点击支付功能。我们探讨了NFC标签的工作原理，然后设置了React Native项目，以便在我们的Android设备中使用NFC。</p>
<p>在本教程中，我们没有看到如何使用卡的详细信息进行支付，但是您可以使用<a href="https://blog.logrocket.com/react-stripe-payment-system-tutorial/"> any provider，例如Stripe </a>来实现这一目的。我希望你喜欢这个教程，如果你有任何问题，一定要留下评论。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>