<html>
<head>
<title>Creating React Native badge components in iOS - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在iOS - LogRocket博客中创建React原生徽章组件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/creating-react-native-badge-components-ios/#0001-01-01">https://blog.logrocket.com/creating-react-native-badge-components-ios/#0001-01-01</a></blockquote><div><article class="article-post">
<p>徽章是提醒用户与应用程序相关的重要发展的有效工具。它们可以显示应用程序的未决通知数量，显示离某个截止日期还有几天，提醒用户有评论等等。</p>
<p>在本文中，我们将学习如何将通知徽章组件集成到一个<a href="https://reactnative.dev/" target="_blank" rel="noopener"> React Native </a>项目中，并探索徽章如何提高用户体验‌and驱动参与度。我们还将了解<a href="https://notifee.app/" target="_blank" rel="noopener">通知</a>，设置徽章数量的各种方法，以及如何动态清除徽章数量。我们还将简要了解推送通知如何使徽章计数器被动态触发。要了解更多关于React Native的信息，请查看<a href="https://blog.logrocket.com/tag/react-native/" target="_blank" rel="noopener"> React Native档案</a>。</p>
<p><em>向前跳转:</em></p>


<h2 id="prerequisites-background">先决条件</h2>
<p>要跟随本教程，您需要:</p>
<ul>
<li>Node.js :异步事件驱动的JavaScript运行时，设计用于构建可伸缩的应用程序</li>
<li>Watchman:监视文件并在有变化时触发动作的服务</li>
<li>Xcode :这个IDE包含了在苹果平台上开发、测试和发布应用程序所需的一切</li>
<li><a href="https://cocoapods.org/" target="_blank" rel="noopener"> CocoaPods </a>:负责<a href="https://developer.apple.com/xcode/swiftui/" target="_blank" rel="noopener"> Swift </a>和<a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html" target="_blank" rel="noopener"> Objective-C </a>可可项目的依赖关系经理</li>
<li>这个库为Android和iOS应用程序都带来了本地通知支持，但是没有集成第三方消息服务</li>
</ul>
<h2 id="badge-manager-React-Native">在React Native中管理徽章</h2>
<p>让我们探索使用通知库<a href="https://notifee.app/react-native/docs/ios/badges" target="_blank" rel="noopener">notifie</a>在iOS中设置和操作通知徽章的不同方法。首先，参考React Native <a href="https://reactnative.dev/docs/environment-setup" target="_blank" rel="noopener">文档</a>，通过设置开发环境来创建React Native app。</p>
<p>现在，使用React Native CLI，让我们使用以下命令创建我们的项目:</p>
<pre class="language-TypeScript hljs">$ npx react-native init reactBadge --template react-native-template-typescript</pre>
<p>一旦项目被创建，在终端窗口中<code>cd</code>进入项目目录。</p>
<pre class="language-TypeScript hljs">$ cd
$ yarn start</pre>
<p>运行以下命令添加Notifee包:</p>
<pre class="language-TypeScript hljs">$ yarn add @notifee/react-native</pre>
<p><span>一旦完成，就从<code>cd</code>变成<code>iOS</code>。</span></p>
<pre class="language-TypeScript hljs">$ cd ios
$ pod install</pre>
<p>对于本教程，我使用了一台Mac M1架构的机器。然而，CocoaPods与该架构不兼容，所以请记住，以下命令在其他MAC上可能会有所不同。如果你没有使用M1架构，你可以在<code>iOS</code>的<code>cd</code>之后运行<code>pod install</code>。</p>
<p>如果使用装有Mac M1的计算机，请运行以下命令:</p>
<pre class="language-TypeScript hljs">$ cd ios 
$ sudo arch -x86_64 gem install ffi
$ arch -x86-64 pod install</pre>
<p>这些命令会安装<code><a href="https://pub.dev/packages/ffi" target="_blank" rel="noopener">ffi</a></code>，它会加载动态链接库，并使Mac M1能够顺利运行<code>pod install</code>。</p>
<p>现在打开Xcode，点击<strong>打开一个项目</strong> <strong>或者</strong> <strong>文件</strong>。</p>
<p><img data-attachment-id="133552" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/xcode-project-opening/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening.png" data-orig-size="512,464" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Xcode-project-opening" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening-300x272.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening.png" decoding="async" class="aligncenter size-full wp-image-133552 jetpack-lazy-image" src="../Images/71996ffb72f8f2012ff6b582255e372e.png" alt="Example of how to open Xcode" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening-300x272.png 300w" data-lazy-sizes="(max-width: 512px) 100vw, 512px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133552" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/xcode-project-opening/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening.png" data-orig-size="512,464" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Xcode-project-opening" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening-300x272.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133552" src="../Images/71996ffb72f8f2012ff6b582255e372e.png" alt="Example of how to open Xcode" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening-300x272.png 300w" sizes="(max-width: 512px) 100vw, 512px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Xcode-project-opening.png"/></noscript>
<p>导航到保存<code>reactBadge</code>的文件夹目录，并打开<code>iOS</code>文件夹。然后，双击<strong> <code>reactBadge.xcworkspace</code> </strong>，在Xcode中打开我们的iOS项目。</p>
<p><img data-attachment-id="133554" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/react-badge-file-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example.png" data-orig-size="437,512" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-badge-file-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example-256x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example.png" decoding="async" class="aligncenter size-full wp-image-133554 jetpack-lazy-image" src="../Images/9244f29bcdb5ea8cd0b7c0012ab7438b.png" alt="reactBadge in iOS folder" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example.png 437w, https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example-256x300.png 256w" data-lazy-sizes="(max-width: 437px) 100vw, 437px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133554" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/react-badge-file-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example.png" data-orig-size="437,512" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-badge-file-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example-256x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133554" src="../Images/9244f29bcdb5ea8cd0b7c0012ab7438b.png" alt="reactBadge in iOS folder" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example.png 437w, https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example-256x300.png 256w" sizes="(max-width: 437px) 100vw, 437px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/react-badge-file-example.png"/></noscript>
<p>一旦完成，我们的文件夹结构应该看起来像上面的图片。点击顶部的<strong>播放</strong>，在模拟器中构建我们的iOS应用程序。</p>
<p><img data-attachment-id="133556" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/react-native-app-tsx/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_.png" data-orig-size="242,512" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-native-app.tsx" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_-142x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_.png" decoding="async" class="aligncenter size-full wp-image-133556 jetpack-lazy-image" src="../Images/ad14990a2210313fbac4165d12df68d9.png" alt="Steps in React Native app" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_.png 242w, https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_-142x300.png 142w" data-lazy-sizes="(max-width: 242px) 100vw, 242px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133556" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/react-native-app-tsx/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_.png" data-orig-size="242,512" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-native-app.tsx" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_-142x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133556" src="../Images/ad14990a2210313fbac4165d12df68d9.png" alt="Steps in React Native app" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_.png 242w, https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_-142x300.png 142w" sizes="(max-width: 242px) 100vw, 242px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/react-native-app.tsx_.png"/></noscript>
<h2 id="using-Notifee-library">将Notifee与React Native一起使用</h2>
<p>要设置徽章计数，请将<code>notifee</code>导入<code>App.tsx</code>。</p>
<pre class="language-TypeScript hljs">import notifee from '@notifee/react-native';</pre>
<p>通知是在移动设备中构建徽章通知系统的关键，因为徽章数量取决于接收和清除通知的数量。让我们看看如何使用Notifee在React Native中触发通知。</p>
<h3 id="creating-notification-trigger-function">创建通知触发功能</h3>
<p>对于iOS设备，我们必须在触发通知之前请求用户许可，而对于Android设备，我们必须创建一个通道。幸运的是，Notifee提供了两个有用的函数来克服这些挑战:</p>
<ul>
<li><code>notifee.requestPermission()</code>在iOS设备的应用程序上显示通知或徽章计数之前，请求其许可</li>
<li><code>notifee.createChannel({})</code>为Android设备应用程序创建一个<code>channelId</code></li>
</ul>
<p>让我们深入研究代码。首先，在<code>App.tsx</code>中，我们将创建一个用于显示通知的异步函数。单击时，这有两个目的:请求显示通知或创建频道的权限，以及显示我们创建的应用程序。</p>
<p>为此，将代码块粘贴到<code>App.tsx</code>中。</p>
<pre class="language-TypeScript hljs">const App = () =&gt; {
 const isDarkMode = useColorScheme() === 'dark';

 const backgroundStyle = {
   backgroundColor: isDarkMode ? Colors.darker : Colors.lighter,
 };

 async function onDisplayNotification() {
   // Request permissions (required for iOS)
   await notifee.requestPermission();

   // Create a channel (required for Android)
   const channelId = await notifee.createChannel({
     id: 'default',
     name: 'Default Channel',
   });

   // Display a notification
   await notifee.displayNotification({
     title: 'Notification Title',
     body: 'Display a notification using notifee',
     android: {
       channelId,
       smallIcon: 'name-of-a-small-icon', // optional, defaults to 'ic_launcher'.
       // pressAction is needed if you want the notification to open the app when pressed
       pressAction: {
         id: 'default',
       },
     },
   });
 }</pre>
<p>现在我们需要使用<code>Button from React Native</code>来触发通知。</p>
<pre class="language-TypeScript hljs">import {Button} from 'react-native';</pre>
<p>一旦按钮被导入，我们将把<code>onDisplayNotification</code>传递给<code>Button</code>组件的<code>onPress</code>处理程序。</p>
<pre class="language-TypeScript hljs">return (
   &lt;SafeAreaView style={backgroundStyle}&gt;
     &lt;StatusBar barStyle={isDarkMode ? 'light-content' : 'dark-content'} /&gt;
     &lt;ScrollView
       contentInsetAdjustmentBehavior="automatic"
       style={backgroundStyle}&gt;
       &lt;Header /&gt;
       &lt;View
         style={{
           backgroundColor: isDarkMode ? Colors.black : Colors.white,
         }}&gt;
         &lt;Section title="Step One"&gt;
           &lt;Text style={styles.highlight}&gt;Set badge count&lt;/Text&gt;
         &lt;/Section&gt;
         &lt;Button
           title="Display Notification"
           onPress={() =&gt; onDisplayNotification()}
         /&gt;
       &lt;/View&gt;
     &lt;/ScrollView&gt;
   &lt;/SafeAreaView&gt;
 );</pre>
<p>当我们点击<strong> <code>Display Notification</code> </strong>时，会触发并显示我们创建的通知。</p>
<p><img data-attachment-id="133558" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/display-notification-react-native-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app.png" data-orig-size="243,512" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="display-notification-react-native-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app-142x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app.png" decoding="async" class="aligncenter size-full wp-image-133558 jetpack-lazy-image" src="../Images/25f736a8d310c6c931e6dae749fa2f04.png" alt="Display a notification using Notifee" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app.png 243w, https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app-142x300.png 142w" data-lazy-sizes="(max-width: 243px) 100vw, 243px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133558" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/display-notification-react-native-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app.png" data-orig-size="243,512" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="display-notification-react-native-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app-142x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133558" src="../Images/25f736a8d310c6c931e6dae749fa2f04.png" alt="Display a notification using Notifee" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app.png 243w, https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app-142x300.png 142w" sizes="(max-width: 243px) 100vw, 243px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/display-notification-react-native-app.png"/></noscript>
<h3 id="setting-badge-count">在React Native中设置徽章计数</h3>
<p>在iOS设备中，设备主屏幕上的应用程序图标将徽章数量显示为红色圆圈，图标的右上角有一个数字。这个数字表示用户有多少未读通知。</p>
<p><img data-attachment-id="133562" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/badge-components-app-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example.jpeg" data-orig-size="434,116" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="badge-components-app-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example-300x80.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example.jpeg" decoding="async" class="aligncenter size-full wp-image-133562 jetpack-lazy-image" src="../Images/467b1ddffdf824adaf75bd77e30e0730.png" alt="Badge count example for iOS apps" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example.jpeg 434w, https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example-300x80.jpeg 300w" data-lazy-sizes="(max-width: 434px) 100vw, 434px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133562" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/badge-components-app-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example.jpeg" data-orig-size="434,116" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="badge-components-app-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example-300x80.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133562" src="../Images/467b1ddffdf824adaf75bd77e30e0730.png" alt="Badge count example for iOS apps" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example.jpeg 434w, https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example-300x80.jpeg 300w" sizes="(max-width: 434px) 100vw, 434px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-components-app-example.jpeg"/></noscript>
<p>为了创建一个设置徽章数量的函数，我们将使用<code>setBadgeCount</code>。在<code>App.tsx</code>中，创建<code>setBadgeCount</code>，如下图所示:</p>
<pre class="language-TypeScript hljs"> async function setBadgeCount() {
   // Set badge count
   notifee.setBadgeCount(53).then(() =&gt; console.log('Badge count set'));
 }</pre>
<p>从那里，将<code>setBadgeCount</code>传递给<code>onPress</code>处理程序，以触发徽章计数的设置。</p>
<pre class="language-TypeScript hljs">     &lt;View
         style={{
           backgroundColor: isDarkMode ? Colors.black : Colors.white,
         }}&gt;
         &lt;Section title="Step One"&gt;
           &lt;Text style={styles.highlight}&gt;Display a notification&lt;/Text&gt;
         &lt;/Section&gt;
         &lt;Button
           title="Display Notification"
           onPress={() =&gt; onDisplayNotification()}
         /&gt;
         &lt;Section title="Step Two"&gt;
           &lt;Text style={styles.highlight}&gt;Set badge count&lt;/Text&gt;
         &lt;/Section&gt;
         &lt;Button title="Set badge count" onPress={() =&gt; setBadgeCount()} /&gt;
       &lt;/View&gt;
</pre>
<p><img data-attachment-id="133569" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/setting-badge-count/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459.png" data-orig-size="226,433" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="setting-badge-count" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459-157x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459.png" decoding="async" class="aligncenter wp-image-133569 size-full jetpack-lazy-image" src="../Images/c8057b2edeaed85393953945297da2ce.png" alt="Setting a badge count in the React Native app" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459.png 226w, https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459-157x300.png 157w" data-lazy-sizes="(max-width: 226px) 100vw, 226px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133569" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/setting-badge-count/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459.png" data-orig-size="226,433" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="setting-badge-count" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459-157x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459.png" decoding="async" loading="lazy" class="aligncenter wp-image-133569 size-full" src="../Images/c8057b2edeaed85393953945297da2ce.png" alt="Setting a badge count in the React Native app" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459.png 226w, https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459-157x300.png 157w" sizes="(max-width: 226px) 100vw, 226px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/setting-badge-count-e1663781119459.png"/></noscript>
<p>点击<code>setBadgeCount</code>，通过该方法传递的任何一个整数都将显示为<code>badgeCount</code>。</p>
<p><img data-attachment-id="133573" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/badge-count-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example.png" data-orig-size="451,386" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="badge-count-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example-300x257.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example.png" decoding="async" class="aligncenter size-full wp-image-133573 jetpack-lazy-image" src="../Images/3396df7db46f6d6cc29b37ddd2fa2c32.png" alt="Example of badge count with integers" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example.png 451w, https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example-300x257.png 300w" data-lazy-sizes="(max-width: 451px) 100vw, 451px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133573" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/badge-count-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example.png" data-orig-size="451,386" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="badge-count-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example-300x257.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133573" src="../Images/3396df7db46f6d6cc29b37ddd2fa2c32.png" alt="Example of badge count with integers" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example.png 451w, https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example-300x257.png 300w" sizes="(max-width: 451px) 100vw, 451px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-count-example.png"/></noscript>
<h3 id="clearing-notifications">在React Native中清除徽章组件通知</h3>
<p>创建通知时，UX是需要考虑的重要因素。为了创建一个更好的UX，我们希望<code>badgeCount</code>在应用程序打开时清除。为此，我们将通过将代码块粘贴到<code>App.tsx</code>中来使用<code><a href="https://blog.logrocket.com/react-hooks-cheat-sheet-unlock-solutions-to-common-problems-af4caf699e70/" target="_blank" rel="noopener">useEffect</a></code>。</p>
<pre class="language-TypeScript hljs">React.useEffect(() =&gt; {
   // App launched, remove the badge count
   notifee.setBadgeCount(0).then(() =&gt; console.log('Badge count removed'));
 }, []);</pre>
<p><img data-attachment-id="133577" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/badge-compenent-cleared-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example.png" data-orig-size="431,240" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="badge-compenent-cleared-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example.png" decoding="async" class="aligncenter size-full wp-image-133577 jetpack-lazy-image" src="../Images/534854caf0e868efe4e740621337c3d0.png" alt="Example of cleared badge count" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example.png 431w, https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example-300x167.png 300w" data-lazy-sizes="(max-width: 431px) 100vw, 431px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133577" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/badge-compenent-cleared-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example.png" data-orig-size="431,240" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="badge-compenent-cleared-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133577" src="../Images/534854caf0e868efe4e740621337c3d0.png" alt="Example of cleared badge count" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example.png 431w, https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example-300x167.png 300w" sizes="(max-width: 431px) 100vw, 431px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/badge-compenent-cleared-example.png"/></noscript>
<h2 id="remote-push-notifications">启用远程推送通知</h2>
<p>在iOS应用中启用远程推送通知是动态触发徽章计数器的另一种方式，并且无需用户操作。远程推送通知最能触发我们的徽章计数，从而提供更好的UX。它们还包含少量数据，并将这些数据推送到我们的应用程序，即使设备没有运行。</p>
<p>在iOS设备上，发送通知需要四个关键组件:</p>
<ul>
<li>公司的服务器</li>
<li>APNs</li>
<li>用户的设备</li>
<li>在用户设备上运行的应用程序</li>
</ul>
<p>公司的服务器创建远程通知来确定发送什么通知以及发送时间，然后创建通知请求。这包含通知数据和用户设备的唯一标识符，然后转发给APNs，由APNs处理对用户的交付。</p>
<p>然而，其他操作，如设置提供者服务器和配置应用程序来处理通知，是开发人员的责任。</p>
<p>要了解如何在iOS中设置远程推送通知服务，请查看这篇关于在React Native with OneSignal中实现推送通知的文章。对于希望为Android设置推送通知的开发人员，请参考这篇关于React和Firebase推送通知的<a href="https://blog.logrocket.com/push-notifications-react-firebase/" target="_blank" rel="noopener">实用指南</a>。</p>
<p>在本文中，我们将探索通知服务扩展的使用，它支持对原始通知的修改。</p>
<h2 id="using-notification-service-extension">使用<code>UNNotificationServiceExtension</code></h2>
<p><a href="https://developer.apple.com/documentation/usernotifications/unnotificationserviceextension" target="_blank" rel="noopener"> <code>UNNotificationServiceExtension</code> </a>对象为通知服务应用扩展提供了一个入口点。该扩展在系统向用户设备发送通知时启动。Xcode为通知服务扩展目标提供了一个模板，并提供了我们将修改的子类。当我们的应用程序收到远程通知时，系统加载扩展并在以下条件下调用<code><a href="https://developer.apple.com/documentation/usernotifications/unnotificationserviceextension/1648229-didreceive" target="_blank" rel="noopener">didReceive(_:withContentHandler:)</a></code>方法。</p>
<ul>
<li>应用程序必须配置为接收远程通知以显示警报</li>
<li>远程通知<code>aps</code>字典包括值设置为1的<code>mutable-content</code>。</li>
</ul>
<p>在本节中，我们将修改收到的推送通知的内容，并在收到新的推送通知时增加徽章计数。</p>
<p>让我们开始吧。</p>
<p>首先，在Xcode内部我们的React原生项目的iOS应用中添加<code>UNNotificationServiceExtension</code>。</p>
<p><img data-attachment-id="133903" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/add-unnotificationserviceextension-in-react-native/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native.png" data-orig-size="512,369" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-UNNotificationServiceExtension-react-native" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native-300x216.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native.png" decoding="async" class="aligncenter size-full wp-image-133903 jetpack-lazy-image" src="../Images/2cab41bdbe9981b93a5fc4bb618c9095.png" alt="Adding the UNNotificationServiceExtension in React Native" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native-300x216.png 300w" data-lazy-sizes="(max-width: 512px) 100vw, 512px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133903" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/add-unnotificationserviceextension-in-react-native/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native.png" data-orig-size="512,369" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-UNNotificationServiceExtension-react-native" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native-300x216.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133903" src="../Images/2cab41bdbe9981b93a5fc4bb618c9095.png" alt="Adding the UNNotificationServiceExtension in React Native" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native-300x216.png 300w" sizes="(max-width: 512px) 100vw, 512px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-UNNotificationServiceExtension-in-react-native.png"/></noscript>
<p>然后，添加一个适合您项目的产品名称。</p>
<p><img data-attachment-id="133924" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/add-product-name-react-native/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native.png" data-orig-size="512,370" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-product-name-react-native" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native.png" decoding="async" class="aligncenter size-full wp-image-133924 jetpack-lazy-image" src="../Images/4389231f2d016fe76595d0f08ec203cd.png" alt="Add a product name in React Native" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native-300x217.png 300w" data-lazy-sizes="(max-width: 512px) 100vw, 512px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133924" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/add-product-name-react-native/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native.png" data-orig-size="512,370" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-product-name-react-native" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133924" src="../Images/4389231f2d016fe76595d0f08ec203cd.png" alt="Add a product name in React Native" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native-300x217.png 300w" sizes="(max-width: 512px) 100vw, 512px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-product-name-react-native.png"/></noscript>
<p>要设置app群组，我们需要导航到Xcode，选择<strong>项目</strong> - &gt; <strong>目标</strong> - &gt; <strong>你的app目标</strong> - &gt; <strong>签约&amp;能力</strong>-&gt;<strong>[+]</strong>-&gt;<strong>App群组</strong>。</p>
<p><img data-attachment-id="133922" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/select-app-groups/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups.png" data-orig-size="512,391" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="select-app-groups" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups-300x229.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups.png" decoding="async" class="aligncenter size-full wp-image-133922 jetpack-lazy-image" src="../Images/0a38b2bb62e3015b2e3f7c19a21715d3.png" alt="Select app groups" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups-300x229.png 300w" data-lazy-sizes="(max-width: 512px) 100vw, 512px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133922" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/select-app-groups/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups.png" data-orig-size="512,391" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="select-app-groups" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups-300x229.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133922" src="../Images/0a38b2bb62e3015b2e3f7c19a21715d3.png" alt="Select app groups" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups-300x229.png 300w" sizes="(max-width: 512px) 100vw, 512px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/select-app-groups.png"/></noscript>
<p>现在，在<code>App Groups</code>部分，选择<strong>[+]</strong>-&gt;-<strong>添加一个新容器</strong>-&gt;-<strong>输入组名</strong> - &gt; <strong> OK </strong>。</p>
<p><img data-attachment-id="133929" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/add-new-container-badge-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component.png" data-orig-size="512,171" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-new-container-badge-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component-300x100.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component.png" decoding="async" class="aligncenter size-full wp-image-133929 jetpack-lazy-image" src="../Images/46e8fa7031c3924ca0217e0ff92034a3.png" alt="Add a new container for badge component" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component-300x100.png 300w" data-lazy-sizes="(max-width: 512px) 100vw, 512px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133929" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/add-new-container-badge-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component.png" data-orig-size="512,171" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-new-container-badge-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component-300x100.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133929" src="../Images/46e8fa7031c3924ca0217e0ff92034a3.png" alt="Add a new container for badge component" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component-300x100.png 300w" sizes="(max-width: 512px) 100vw, 512px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-new-container-badge-component.png"/></noscript>
<p>确保选择了之前创建的选定应用程序组。</p>
<p><img data-attachment-id="133917" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/app-groups-bundled/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled.png" data-orig-size="512,85" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="app-groups-bundled" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled-300x50.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled.png" decoding="async" class="aligncenter size-full wp-image-133917 jetpack-lazy-image" src="../Images/10f2a37e1d59d9730275125db47193b1.png" alt="Bundle your app groups" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled-300x50.png 300w" data-lazy-sizes="(max-width: 512px) 100vw, 512px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133917" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/app-groups-bundled/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled.png" data-orig-size="512,85" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="app-groups-bundled" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled-300x50.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133917" src="../Images/10f2a37e1d59d9730275125db47193b1.png" alt="Bundle your app groups" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled-300x50.png 300w" sizes="(max-width: 512px) 100vw, 512px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/app-groups-bundled.png"/></noscript>
<p>最后，是时候为我们的<code>NotificationServiceExtension</code>创建<code>App Group</code>了。</p>
<p>在我们Xcode的项目目录下，点击<strong>目标</strong> - &gt; <strong>通知服务扩展目标</strong> - &gt; <strong>签约和能力</strong>-&gt;<strong>[+】</strong>-&gt;<strong>App组</strong>。</p>
<p><img data-attachment-id="133915" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/add-target-notification-app-group/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group.png" data-orig-size="512,391" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-target-notification-app-group" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group-300x229.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group.png" decoding="async" class="aligncenter size-full wp-image-133915 jetpack-lazy-image" src="../Images/ebabfe9822c1c436499009ca63a893bc.png" alt="Add the target notification for badge component" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group-300x229.png 300w" data-lazy-sizes="(max-width: 512px) 100vw, 512px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133915" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/add-target-notification-app-group/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group.png" data-orig-size="512,391" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-target-notification-app-group" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group-300x229.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133915" src="../Images/ebabfe9822c1c436499009ca63a893bc.png" alt="Add the target notification for badge component" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group-300x229.png 300w" sizes="(max-width: 512px) 100vw, 512px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/add-target-notification-app-group.png"/></noscript>
<p>选择之前在<strong>应用目标</strong>中创建的同一个<strong>应用组</strong>。</p>
<p><img data-attachment-id="133913" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/notification-service-extension/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension.png" data-orig-size="512,278" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="notification-service-extension" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension.png" decoding="async" class="aligncenter size-full wp-image-133913 jetpack-lazy-image" src="../Images/d057687f414f4f971bd0f630ad9b7707.png" alt="Example of notification service extension for badge components" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension-300x163.png 300w" data-lazy-sizes="(max-width: 512px) 100vw, 512px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133913" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/notification-service-extension/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension.png" data-orig-size="512,278" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="notification-service-extension" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133913" src="../Images/d057687f414f4f971bd0f630ad9b7707.png" alt="Example of notification service extension for badge components" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension-300x163.png 300w" sizes="(max-width: 512px) 100vw, 512px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/notification-service-extension.png"/></noscript>
<h3 id="setting-user-suite-store-badge-count">设置<code>usersuite</code>以存储徽章计数</h3>
<p>我们需要创建一个<code>usersuite</code>来在我们的应用程序目标和通知服务目标之间传递数据。为此，请遵循以下步骤:</p>
<p>将代码块粘贴到<code>AppDelegate.swift</code>文件夹中。</p>
<pre class="language-swift hljs">func applicationWillEnterForeground(_ application: UIApplication) {    
 
 UserDefaults(suiteName: "group.com.yourApp.bundleId")?.set(1, forKey: "count")      UIApplication.shared.applicationIconBadgeNumber = 0  
 
}
</pre>
<p>接下来，我们将创建一个逻辑，用于在收到通知时增加我们的工卡计数。</p>
<pre class="language-swift hljs">import UserNotifications

class NotificationService: UNNotificationServiceExtension {
   
    var contentHandler: ((UNNotificationContent) -&gt; Void)?
    var bestAttemptContent: UNMutableNotificationContent?
    let defaults = UserDefaults(suiteName: "group.com.yourApp.bundleId")
   
    override func didReceive(_ request: UNNotificationRequest, withContentHandler contentHandler: @escaping (UNNotificationContent) -&gt; Void) {
        self.contentHandler = contentHandler
        bestAttemptContent = (request.content.mutableCopy() as? UNMutableNotificationContent)
        var count: Int = defaults?.value(forKey: "count") as! Int
        if let bestAttemptContent = bestAttemptContent {
            bestAttemptContent.title = "\(bestAttemptContent.title) "
            bestAttemptContent.body = "\(bestAttemptContent.body) "
            bestAttemptContent.badge = count as? NSNumber
            count = count + 1
            defaults?.set(count, forKey: "count")
            contentHandler(bestAttemptContent)
        }
    }
   
    override func serviceExtensionTimeWillExpire() {
     
        if let contentHandler = contentHandler, let bestAttemptContent =  bestAttemptContent {
            contentHandler(bestAttemptContent)
        }
    }
}</pre>
<p>现在，我们可以运行应用程序，并在收到每个通知后看到徽章计数的增加。</p>
<p><img data-attachment-id="133911" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/run-application-badge-components-react-native/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/run-application-badge-components-react-native.gif" data-orig-size="204,204" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="run-application-badge-components-react-native" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/run-application-badge-components-react-native.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/run-application-badge-components-react-native.gif" decoding="async" class="aligncenter size-full wp-image-133911 jetpack-lazy-image" src="../Images/ffbb2199a5e4f019685e5e2ff5ebe19d.png" alt="Badge components running in React Native" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/run-application-badge-components-react-native.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/run-application-badge-components-react-native.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="133911" data-permalink="https://blog.logrocket.com/creating-react-native-badge-components-ios/attachment/run-application-badge-components-react-native/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/run-application-badge-components-react-native.gif" data-orig-size="204,204" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="run-application-badge-components-react-native" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/run-application-badge-components-react-native.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/run-application-badge-components-react-native.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-133911" src="../Images/ffbb2199a5e4f019685e5e2ff5ebe19d.png" alt="Badge components running in React Native" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/run-application-badge-components-react-native.gif"/></noscript>
<h2>结论</h2>
<p>在本文中，我们将通知徽章集成到React原生项目中，并了解了如何启用徽章来提高UX并引导用户使用应用程序来提高参与度。我们还研究了Notifee和其他技术如何设置和动态清除徽章计数。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>