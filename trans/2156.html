<html>
<head>
<title>How to play sounds in React Native using react-native-sound - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何使用 react-native-sound - LogRocket 博客在 React Native 中播放声音</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-play-sounds-in-react-native-using-react-native-sound/#0001-01-01">https://blog.logrocket.com/how-to-play-sounds-in-react-native-using-react-native-sound/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在你的应用程序中添加声音是吸引用户的好方法。发出新通知时的轻微铃声，发出电子邮件时的“嗖”声，或者删除文件时的破碎声，都有助于为 React 原生应用程序建立更好的用户体验。</p>
<p>在本指南中，我们将探索 react-native-sound，这是一个强大的音频组件，可以为 React Native 应用程序处理与声音相关的任务。</p>
<p>我们将通过实际例子介绍以下内容:</p>

<p>为了跟上进度，你应该熟悉 React Native 的<a href="https://blog.logrocket.com/how-to-build-ios-apps-using-react-native/">基础知识，包括</a><a href="https://blog.logrocket.com/diving-into-the-new-jsx-transform/"> JSX </a>、<a href="https://blog.logrocket.com/a-complete-guide-to-default-props-in-react-984ea8e6972d/">c</a>T6】组件 (class 和<a href="https://blog.logrocket.com/react-pure-components-functional/">f</a>functional)，以及<a href="https://blog.logrocket.com/react-native-styling-tutorial-with-examples/">造型</a>。</p>
<p>您可以简单地复制并粘贴本指南中的代码块，但是我建议您通读整个教程以获得完整的理解。本指南假设您已经完成了应用程序的基本设置。</p>
<h2 id="what-is-react-native-sound">什么是反应原生音？</h2>
<p><a href="https://github.com/zmxv/react-native-sound"> react-native-sound </a>是 React Native 中的一个模块，用于在 iOS、Android 和 Windows 上播放声音片段。此模块使您能够添加各种来源的音频，如 app bundle(本机)、JavaScript bundle 或远程路径(本地存储或远程 URL)。</p>
<p>react-native-sound 更像是一个类，而不是一个类组件，这有助于使用预定义的方法来控制实例，而无需更新状态或属性。这缓解了与应用程序的缓慢重新呈现相关的担忧。</p>
<p>虽然它的文档警告 react-native-sound 是“alpha 质量，可能有错误”，但它是当今最受欢迎和使用最广泛的 React Native sound 库之一。</p>
<h2 id="setting-up-react-native-sound-ios-and-android">设置 react-native-sound (iOS 和 Android)</h2>
<p>要开始使用 react-native-sound，如果您想要在应用程序中播放的声音无法远程获得(即，它们在应用程序的包中，而不是在设备的外部存储设备或远程服务器上)，您需要这些声音。</p>
<p>要将 react-native-sound 添加到您的应用程序中，只需使用您首选的包管理器(如 npm 或 yarn)在应用程序目录中输入以下命令:</p>
<pre>$ yarn add react-native-sound 
</pre>
<p>如果你正在为 Android 构建，链接是在构建过程中处理的。</p>
<p>对于 iOS，只需导航到 iOS 目录并调用<code>pod install</code>。这将增加反应原生声音所需的吊舱。</p>
<h2 id="adding-sounds-to-your-react-native-app">向 React 本机应用程序添加声音</h2>
<p>现在是时候添加你想要播放的声音了。这一步只是为了学习如何将音频文件捆绑到原生包中。我们还将讨论一种从资产目录中获取音频文件的简单方法。</p>
<p>对于 Android，创建原始目录并将声音复制到:</p>
<pre>{appDirectory}/android/app/src/main/res/raw
</pre>
<p>对于 iOS，在 Xcode 中打开工作区，然后右键单击项目，点击<strong>将文件添加到{project_name} </strong>，如下图所示:</p>
<p><img data-attachment-id="66652" data-permalink="https://blog.logrocket.com/how-to-play-sounds-in-react-native-using-react-native-sound/adding-sounds-react-native-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app.png" data-orig-size="720,450" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding sound files to a React Native app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app-300x188.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app.png" decoding="async" class="aligncenter size-full wp-image-66652 jetpack-lazy-image" src="../Images/bce6ea3449f9158959d89d28fdbbd3d9.png" alt="Adding Sound Files to a React Native App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app.png 720w, https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app-300x188.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="66652" data-permalink="https://blog.logrocket.com/how-to-play-sounds-in-react-native-using-react-native-sound/adding-sounds-react-native-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app.png" data-orig-size="720,450" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding sound files to a React Native app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app-300x188.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-66652" src="../Images/bce6ea3449f9158959d89d28fdbbd3d9.png" alt="Adding Sound Files to a React Native App" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app.png 720w, https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app-300x188.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/adding-sounds-react-native-app.png"/></noscript>
<p><img data-attachment-id="66654" data-permalink="https://blog.logrocket.com/how-to-play-sounds-in-react-native-using-react-native-sound/select-audio-files-react-native-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app.png" data-orig-size="720,450" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Selecting audio files to use in a React Native app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app-300x188.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app.png" decoding="async" class="aligncenter size-full wp-image-66654 jetpack-lazy-image" src="../Images/f0c645f20e1f46a2112f13bdd7fb1f03.png" alt="Selecting Audio Files to Use in a React Native App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app.png 720w, https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app-300x188.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="66654" data-permalink="https://blog.logrocket.com/how-to-play-sounds-in-react-native-using-react-native-sound/select-audio-files-react-native-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app.png" data-orig-size="720,450" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Selecting audio files to use in a React Native app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app-300x188.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-66654" src="../Images/f0c645f20e1f46a2112f13bdd7fb1f03.png" alt="Selecting Audio Files to Use in a React Native App" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app.png 720w, https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app-300x188.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/select-audio-files-react-native-app.png"/></noscript>
<p>结果应该是这样的:</p>
<p><img data-attachment-id="66650" data-permalink="https://blog.logrocket.com/how-to-play-sounds-in-react-native-using-react-native-sound/reactn-native-list-of-sound-files/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files.png" data-orig-size="536,1012" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Directory of sound files in a React Native app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files-159x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files.png" decoding="async" class="aligncenter size-full wp-image-66650 jetpack-lazy-image" src="../Images/58f96b0dc2a1efbca4581531769c8a5c.png" alt="Directory of Sound Files in a React Native App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files.png 536w, https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files-159x300.png 159w" data-lazy-sizes="(max-width: 536px) 100vw, 536px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="66650" data-permalink="https://blog.logrocket.com/how-to-play-sounds-in-react-native-using-react-native-sound/reactn-native-list-of-sound-files/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files.png" data-orig-size="536,1012" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Directory of sound files in a React Native app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files-159x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-66650" src="../Images/58f96b0dc2a1efbca4581531769c8a5c.png" alt="Directory of Sound Files in a React Native App" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files.png 536w, https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files-159x300.png 159w" sizes="(max-width: 536px) 100vw, 536px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/reactn-native-list-of-sound-files.png"/></noscript>
<p>添加声音文件后，只需构建应用程序并在模拟器上运行，最好是在真实设备上运行。</p>
<h2 id="playing-sounds-from-a-bundle-in-react-native">播放捆绑包中的声音</h2>
<p>成功运行 app 后，就该开始编码了。</p>
<p>首先，我们需要在应用程序中导入声音组件:</p>
<pre>import Sound from 'react-native-sound';
</pre>
<p>在设置我们将要播放的声音之前，我们需要指定声音的类别:</p>
<pre>Sound.setCategory('Playback');
</pre>
<p>要初始化声音，请使用以下代码:</p>
<pre>var ding = new Sound('ding.mp3', Sound.MAIN_BUNDLE, (error) =&gt; {
  if (error) {
    console.log('failed to load the sound', error);
    return;
  }
  // when loaded successfully
  console.log('duration in seconds: ' + whoosh.getDuration() + 'number of channels: ' + whoosh.getNumberOfChannels());
});
</pre>
<p>上面的代码使用第一个参数<code>ding.mp3</code>，这是使用第二个参数<code>Sound.MAIN_BUNDLE</code>指定的包中的一个文件，并在第三个参数中返回一个回调。</p>
<p><code>\``getDuration</code>用于获取音频文件的持续时间，单位为秒，<code>getNumberOfChannels</code>用于获取音频通道的计数。</p>
<p>要设置播放的音量，我们可以使用以下方法:</p>
<pre>ding.setVolume(1);
</pre>
<p>这里，<code>1</code>是最高音量，<code>0</code>是最低音量，两者之间的差值以小数位表示——例如，要将音量减小到 50%，您可以将其设置为<code>0.5</code>。</p>
<p>要播放文件，我们可以使用来自<code>Sound</code>的<code>play</code>方法，如下所示:</p>
<pre>ding.play(success =&gt; {
  if (success) {
    console.log('successfully finished playing');
  } else {
    console.log('playback failed due to audio decoding errors');
  }
});
</pre>
<p>在成功完成投资回报后会有一个回调(或者如果出了什么问题，就此而言)。</p>
<p>总结上述步骤:</p>
<ol>
<li>设置要播放的声音的类别</li>
<li>初始化声音文件</li>
<li>如有必要，调节音量</li>
<li>播放声音</li>
</ol>
<p>下面是播放包中声音的最终代码:</p>
<pre>import React, {useEffect} from 'react';
import {View, StyleSheet, TouchableOpacity} from 'react-native';
import Ionicons from 'react-native-vector-icons/Ionicons';

var Sound = require('react-native-sound');


Sound.setCategory('Playback');


var ding = new Sound('ding.mp3', Sound.MAIN_BUNDLE, (error) =&gt; {
if (error) {
    console.log('failed to load the sound', error);
    return;
  }
  // if loaded successfully
  console.log('duration in seconds: ' + ding.getDuration() + 'number of channels: ' + ding.getNumberOfChannels());

});
const App = () =&gt; {
  useEffect(() =&gt; {
    ding.setVolume(1);
    return () =&gt; {
      ding.release();
    };
  }, []);
  const playPause = () =&gt; {
    ding.play(success =&gt; {
      if (success) {
        console.log('successfully finished playing');
      } else {
        console.log('playback failed due to audio decoding errors');
      }
    });
  };
  return (
    &lt;View style={styles.container}&gt;
      &lt;TouchableOpacity style={styles.playBtn} onPress={playPause}&gt;
        &lt;Ionicons name={'ios-play-outline'} size={36} color={'#fff'} /&gt;
      &lt;/TouchableOpacity&gt;
    &lt;/View&gt;
  );
};
const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#000',
  },
  playBtn: {
    padding: 20,
  },
});
export default App;
</pre>
<h2 id="importing-sound-files-in-react-native">导入声音文件</h2>
<p>现在，对于来自 assets 目录(或应用程序中的任何目录)的文件，我们可以使用相同的旧的<code>require</code>或<code>import</code>来获取文件的实例，并使用 react-native-sound 播放它。</p>
<p>只需导入文件—</p>
<pre>import dings from './src/assets/ding.mp3';
</pre>
<p>—并在<code>Sound</code>包中使用它，如下所示:</p>
<pre>var ding = new Sound(dings, error =&gt; {
  if (error) {
    console.log('failed to load the sound', error);
    return;
  }
  // if loaded successfully
  console.log('duration in seconds: ' + ding.getDuration() + 'number of channels: ' + ding.getNumberOfChannels());
});
</pre>
<p>与捆绑文件相比，使用从资产中导入或需要的文件的不同之处在于，您不必为文件指定<code>basePath</code>。相反，回调会取代它的位置。</p>
<p>下面是组件播放导入文件的代码:</p>
<pre>import React, {useEffect} from 'react';
import {View, StyleSheet, TouchableOpacity} from 'react-native';
import dings from './src/assets/ding.mp3';
import Ionicons from 'react-native-vector-icons/Ionicons';

var Sound = require('react-native-sound');

Sound.setCategory('Playback');

var ding = new Sound(dings, error =&gt; {
  if (error) {
    console.log('failed to load the sound', error);
    return;
  }
  // if loaded successfully
  console.log(
    'duration in seconds: ' +
      ding.getDuration() +
      'number of channels: ' +
      ding.getNumberOfChannels(),
  );
});
const App = () =&gt; {
  useEffect(() =&gt; {
    ding.setVolume(1);
    return () =&gt; {
      ding.release();
    };
  }, []);
  const playPause = () =&gt; {
    ding.play(success =&gt; {
      if (success) {
        console.log('successfully finished playing');
      } else {
        console.log('playback failed due to audio decoding errors');
      }
    });
  };
  return (
    &lt;View style={styles.container}&gt;
      &lt;TouchableOpacity style={styles.playBtn} onPress={playPause}&gt;
        &lt;Ionicons name={'ios-play-outline'} size={36} color={'#fff'} /&gt;
      &lt;/TouchableOpacity&gt;
    &lt;/View&gt;
  );
};
const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#000',
  },
  playBtn: {
    padding: 20,
  },
});
export default App;
</pre>
<p>下面是上面代码的结果。只需点击播放按钮即可播放声音。</p>
<p><img data-attachment-id="66648" data-permalink="https://blog.logrocket.com/how-to-play-sounds-in-react-native-using-react-native-sound/react-native-play-sound-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo.png" data-orig-size="500,1082" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Playing sounds in a React Native app demo using react-native-sound" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo-473x1024.png" decoding="async" class="aligncenter size-full wp-image-66648 jetpack-lazy-image" src="../Images/cef89d5516ae88e7caf6736344bfe24d.png" alt="Playing Sounds in a React Native App Demo Using react-native-sound" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo.png 500w, https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo-473x1024.png 473w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="66648" data-permalink="https://blog.logrocket.com/how-to-play-sounds-in-react-native-using-react-native-sound/react-native-play-sound-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo.png" data-orig-size="500,1082" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Playing sounds in a React Native app demo using react-native-sound" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo-139x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo-473x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-66648" src="../Images/cef89d5516ae88e7caf6736344bfe24d.png" alt="Playing Sounds in a React Native App Demo Using react-native-sound" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo.png 500w, https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo-139x300.png 139w, https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo-473x1024.png 473w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/react-native-play-sound-demo.png"/></noscript>
<h2 id="playing-sound-files-from-a-remote-path">从远程路径播放声音文件</h2>
<p>您可能想要播放远程文件或本地存储中的文件。这基本上和使用 react-native-sound 播放捆绑文件一样简单。您只需要将 URL 作为第一个参数添加到<code>Sound</code>并将第二个参数设置为 null，因为该文件来自远程或本地存储，而不是来自应用程序。</p>
<pre>var audio = new Sound(
  'https://file-examples-com.github.io/uploads/2017/11/file_example_MP3_700KB.mp3',
  null,
  error =&gt; {
    if (error) {
      console.log('failed to load the sound', error);
      return;
    }
    // if loaded successfully
    console.log(
      'duration in seconds: ' +
        audio.getDuration() +
        'number of channels: ' +
        audio.getNumberOfChannels(),
    );
  },
);
</pre>
<p>下面是在应用程序关闭或组件卸载后如何播放、暂停和释放音频的完整示例:</p>
<pre>import React, {useEffect, useState} from 'react';
import {View, StyleSheet, TouchableOpacity} from 'react-native';
import Ionicons from 'react-native-vector-icons/Ionicons';

var Sound = require('react-native-sound');


Sound.setCategory('Playback');

var audio = new Sound(
  'https://file-examples-com.github.io/uploads/2017/11/file_example_MP3_700KB.mp3',
  null,
  error =&gt; {
    if (error) {
      console.log('failed to load the sound', error);
      return;
    }
    // if loaded successfully
    console.log(
      'duration in seconds: ' +
        audio.getDuration() +
        'number of channels: ' +
        audio.getNumberOfChannels(),
    );
  },
);
const App = () =&gt; {
  const [playing, setPlaying] = useState();
  useEffect(() =&gt; {
    audio.setVolume(1);
    return () =&gt; {
      audio.release();
    };
  }, []);
  const playPause = () =&gt; {
    if (audio.isPlaying()) {
      audio.pause();
      setPlaying(false);
    } else {
      setPlaying(true);
      audio.play(success =&gt; {
        if (success) {
          setPlaying(false);
          console.log('successfully finished playing');
        } else {
          setPlaying(false);
          console.log('playback failed due to audio decoding errors');
        }
      });
    }
  };
  return (
    &lt;View style={styles.container}&gt;
      &lt;TouchableOpacity style={styles.playBtn} onPress={playPause}&gt;
        &lt;Ionicons
          name={playing ? 'ios-pause-outline' : 'ios-play-outline'}
          size={36}
          color={'#fff'}
        /&gt;
      &lt;/TouchableOpacity&gt;
    &lt;/View&gt;
  );
};
const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#000',
  },
  playBtn: {
    padding: 20,
  },
});
export default App;
</pre>
<p><code>.release()</code>用于释放为播放音频文件而保留的内存。在组件卸载后释放内存或音频不再播放是非常重要的。这有助于避免内存泄漏或其他错误。</p>
<p> </p><h2 data-usually-unique-id="025711952378144544455574"/>

<p><span class="inline-code author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za"> react-native-sound </span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za">是一个很棒的模块</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">用于</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za">添加</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">ing</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">s</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za">o</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">unds</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za">或者为您的 React Native app 构建一个</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">ing</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za">简单的音频播放器。</span></p>
<p/>
<div><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">In this tutorial, w</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za">e </span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">went over</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za"> how to add and play audio from </span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">a</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za"> native bundle as well as from </span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">a</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za"> remote file. If you want to explore more options in this regard, I would suggest </span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">trying out </span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za">the </span><span class="inline-code attrlink url author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za"><a class="attrlink" href="https://docs.expo.dev/versions/latest/sdk/av/" target="_blank" rel="noreferrer nofollow noopener" data-target-href="https://docs.expo.dev/versions/latest/sdk/av/">expo-av</a></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za"> module of </span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z">E</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za">xpo </span><span class="attrlink url author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za"><a class="attrlink" href="https://docs.expo.dev/bare/installing-unimodules/" target="_blank" rel="noreferrer nofollow noopener" data-target-href="https://docs.expo.dev/bare/installing-unimodules/">unimodules</a></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za"> to play audio or video files in your</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxuz87z6z70zbqvqm3z65z7pz75zz71znmoz69zdz66zhz81zqz69znffz88zkz90z"> React Native</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qowz82z5fcz73zz72zoz82zyz82zz85ztz80zz78z6z84zz71zz89zz75zlnwz81zz73z1z84zqiwz82za"> app.</span></div>
<p> </p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>