<html>
<head>
<title>Building a TypeScript CLI with Node.js and Commander </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用Node.js和Commander构建TypeScript CLI</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-typescript-cli-node-js-commander/#0001-01-01">https://blog.logrocket.com/building-typescript-cli-node-js-commander/#0001-01-01</a></blockquote><div><article class="article-post">
<p>命令行有数以千计的工具，如<code>awk</code>、<code>sed</code>、<code>grep</code>和<code>find</code>供您使用，这些工具可以减少开发时间并自动化繁琐的任务。在Node.js中创建命令行工具并不复杂，这要感谢像<a href="https://github.com/tj/commander.js"> Commander.js </a>这样强大的库。</p>
<p>将Node.js与TypeScript配对有助于您在开发过程的早期捕捉错误，以便您可以发布更可靠、错误更少的CLI。</p>
<p>在本教程中，我们将讨论CLI is以及如何使用Commander.js和TypeScript来构建一个。然后，我们将使CLI可以全局访问，以便用户可以在其系统中的任何位置访问它。</p>
<p><em>向前跳转:</em></p>

<h2 id="prerequisites">先决条件</h2>
<p>要学习本教程，您需要:</p>

<h2 id="why-commander-js">为什么是Commander.js？</h2>
<p>命令行界面，通常称为CLI，是一种允许用户键入指令并与处理输入并产生输出的脚本进行交互的程序。Node.js有很多可以让你构建CLI的包，比如<a href="https://github.com/leo/args"> args </a>、<a href="https://github.com/minimistjs/minimist">minimit</a>和<a href="https://github.com/oclif/oclif"> oclif </a>。</p>
<p>Commander.js提供了许多特性，允许您简洁地构建命令行界面。此外，Node.js社区提供了诸如<a href="https://github.com/chalk/chalk"> Chalk </a>和<a href="https://github.com/patorjk/figlet.js"> Figlet </a>之类的库来补充Commander.js CLIs，使它们看起来更具视觉吸引力。</p>
<p>由于以下特性，我们将使用Commander.js:</p>
<ul>
<li>支持子命令</li>
<li>支持各种命令行选项，如required、variadic或optional</li>
<li>自定义事件侦听器</li>
<li>自动化帮助</li>
</ul>
<h2 id="understanding-command-line-interface">了解命令行界面</h2>
<p>在我们开始构建CLI之前，让我们看看现有CLI是如何工作的。</p>
<p>如果您正在学习本教程，那么您的机器上可能已经安装了Node.js。Node.js提供了一个CLI，您可以通过在终端中键入<code>node</code>来访问它:</p>
<pre class="language-bash hljs">node
</pre>
<p>键入命令允许您访问node . js read–eval–print循环(REPL ),您可以在其中输入和执行JavaScript代码。</p>
<p>您可以修改Node.js CLI，使用命令行标志或选项来做其他事情。用<code>CTRL+D</code>退出REPL，然后用<code>-v</code>选项检查Node.js版本:</p>
<pre class="language-bash hljs">node -v
// v18.11.0
</pre>
<p>正如您在输出中看到的，传递<code>-v</code>选项改变了<code>node</code> CLI的行为，以显示Node.js版本。您还可以选择长格式选项:</p>
<pre class="language-bash hljs">node --version
// v18.11.0
</pre>
<p>其他Node.js CLI选项需要将参数与选项一起传递。例如，<code>-e</code>选项是<code>--eval</code>的缩写，它接受包含JavaScript代码的字符串参数。节点执行代码并将结果记录在终端中:</p>
<pre class="language-bash hljs">node -e "console.log(4 * 2)"
// 8
</pre>
<p>如果没有传递参数，<code>-e</code>选项会返回一个错误:</p>
<pre class="language-bash hljs">node -e
// node: -e requires an argument
</pre>
<p>现在我们已经了解了CLI的工作原理。让我们来看看Commander.js术语，这些术语是我们到目前为止看到的节点CLI选项:</p>
<ul>
<li>布尔选项:这些选项不需要参数。<code>-v</code>是布尔选项的一个例子；其他熟悉的例子有<code>ls -l</code>或<code>sudo -i</code></li>
<li>必需选项:这些选项需要参数。例如，如果参数没有通过，<code>node -e "console.log(4 * 2)"</code>就会抛出一个错误</li>
<li>Option-argument:这些是传递给选项的参数。在<code>node -e "console.log(4 * 2)"</code>命令中，<code>"console.log(4 * 2)"</code>是一个选项参数；另一个例子是<code>git status -m "commit message"</code>，这里的<code>"commit message"</code>是<code>-m</code>选项的选项参数</li>
</ul>
<p>现在您已经了解了什么是CLI，我们将创建一个目录，并将其配置为使用TypeScript和Commander.js。</p>
<h2 id="getting-started-configuring-typescript">开始使用和配置TypeScript</h2>
<p>在本节中，我们将为项目创建一个目录，将其初始化为npm包，安装所有必需的依赖项，并配置TypeScript。</p>
<p>首先，为项目创建目录:</p>
<pre class="language-bash hljs">mkdir directory_manager
</pre>
<p>转到目录:</p>
<pre class="language-bash hljs">cd directory_manager
</pre>
<p>将目录初始化为npm项目:</p>
<pre class="language-bash hljs">npm init -y
</pre>
<p>这将创建一个<code>package.json</code>文件，其中包含关于您的项目和跟踪依赖项的重要信息。</p>
<p>接下来，运行以下命令:</p>
<pre class="language-bash hljs">npm install commander figlet
</pre>
<p>Commander.js是我们构建CLI的库，Figlet将用于将CLI文本转换为ASCII艺术。</p>
<p>接下来，下载TypeScript和<code>ts-node</code>包:</p>
<pre class="language-bash hljs">npm install @types/node typescript --save-dev
</pre>
<p>现在，在文本编辑器中创建一个<code>tsconfig.json</code>文件，并为TypeScript添加以下配置设置:</p>
<pre class="language-json hljs">{
  "compilerOptions": {
    "rootDir": "src",
    "outDir": "dist",
    "strict": true,
    "target": "es6",
    "module": "commonjs",
    "sourceMap": true,
    "esModuleInterop": true,
    "moduleResolution": "node"
  }
}
</pre>
<p>让我们回顾一些选项:</p>
<ul>
<li><code>rootDir</code>:一个包含CLI的类型脚本文件(<code>.ts</code>文件)的目录，我们将这些文件保存在<code>src</code>目录中</li>
<li><code>outDir</code>:包含TypeScript编译的JavaScript源代码的目录。我们将使用<code>dist</code>目录</li>
<li><code>strict</code>:这将禁用可选类型，并确保您编写的所有TypeScript代码都有类型</li>
<li>【TypeScript将JavaScript编译到的<a href="https://en.wikipedia.org/wiki/ECMAScript"> ECMAScript </a>的版本</li>
</ul>
<p>要全面了解所有选项，请访问<a href="https://www.typescriptlang.org/tsconfig"> TypeScript文档</a>。</p>
<p>接下来，在<code>package.json</code>文件中，创建一个用于编译TypeScript的<code>build</code>脚本:</p>
<pre class="language-json hljs">{
  ...
  "scripts": {
    // add the following line
    "build": "npx tsc",
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  ...
}
</pre>
<p>为了编译TypeScript，您将运行带有<code>npm run build</code>的构建脚本，它将运行将TypeScript编译成JavaScript的<code>npx tsc</code>命令。</p>
<p>我们现在已经配置了TypeScript，并添加了一个用于编译TypeScript的脚本。接下来，我们将开始构建CLI。</p>
<h2 id="creating-cli-typescript">使用TypeScript创建CLI</h2>
<p>在本节中，我们将开始使用TypeScript和Commander.js构建一个CLI。</p>
<p><img data-attachment-id="139095" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli.png" data-orig-size="730,333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-300x137.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli.png" decoding="async" class="aligncenter wp-image-139095 size-full jetpack-lazy-image" src="../Images/1e5513ebfab2c1b03e78bec73df763a2.png" alt="Screenshot of the CLI" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-300x137.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139095" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli.png" data-orig-size="730,333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-300x137.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli.png" decoding="async" loading="lazy" class="aligncenter wp-image-139095 size-full" src="../Images/1e5513ebfab2c1b03e78bec73df763a2.png" alt="Screenshot of the CLI" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-300x137.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli.png"/></noscript>
<p>CLI将用于管理目录，它将有一个<code>-l</code>选项，以表格格式列出目录内容。对于每个项目，它将显示其名称、大小和创建日期。它还有一个用于创建目录的<code>-m</code>和一个用于创建空文件的<code>-t</code>选项。</p>
<p>现在，您已经知道我们将构建什么了，我们将把CLI分成更小的块，并开始构建每个部分。</p>
<h3 id="creating-name-cli">创建CLI的名称</h3>
<p>在本节中，我们将创建CLI的名称，并使用Figlet包将其转换为ASCII艺术文本。</p>
<p>完成后，它将看起来像这样:</p>
<p><img data-attachment-id="139098" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli-name-ascii-art/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art.png" data-orig-size="730,123" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli-name-ascii-art" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-300x51.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art.png" decoding="async" class="aligncenter wp-image-139098 size-full jetpack-lazy-image" src="../Images/4fe1856d9d55b3772aec360a4a96d10b.png" alt="Screenshot of CLI name in ASCII Art" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-300x51.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139098" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli-name-ascii-art/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art.png" data-orig-size="730,123" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli-name-ascii-art" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-300x51.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art.png" decoding="async" loading="lazy" class="aligncenter wp-image-139098 size-full" src="../Images/4fe1856d9d55b3772aec360a4a96d10b.png" alt="Screenshot of CLI name in ASCII Art" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-300x51.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art.png"/></noscript>
<p>在您的项目目录中，创建<code>src</code>目录并导航到该目录:</p>
<pre class="language-bash hljs">mkdir src &amp;&amp; cd src
</pre>
<p>该目录将包含TypeScript文件。您可能还记得，在本教程前面用<code>tsconfig.js</code>文件配置TypeScript时，我们在<code>rootDir</code>选项中指定了这个目录。</p>
<p>接下来，创建一个<code>index.ts</code>文件，并添加以下内容:</p>
<pre class="language-typescript hljs">const figlet = require("figlet");

console.log(figlet.textSync("Dir Manager"));
</pre>
<p>在第一行中，我们导入Figlet模块。接下来，我们调用带有字符串<code>Dir Manager</code>作为参数的<code>figlet.textSync()</code>方法，将文本转换成ASCII艺术。最后，我们在控制台中记录文本。</p>
<p>要验证更改是否有效，请保存您的文件。使用以下命令将TypeScript文件编译为JavaScript:</p>
<pre class="language-bash hljs">npm run build
</pre>
<p>当TypeScript完成编译时，您将看到如下输出:</p>
<pre class="language-bash hljs">// output
&gt; <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3f4b464f5a4c5c4d564f4b605e4f4f7f0e110f110f">[email protected]</a> build
&gt; npx tsc
</pre>
<p>如果成功，您将不会在这里看到任何错误。</p>
<p>您可能还记得，我们添加了一个<code>outDir</code>选项，并将其设置为<code>tsconfig.json</code>文件中的<code>dist</code>目录。编译完TypeScript后，会在根目录下自动创建目录。</p>
<p>进入<code>dist</code>目录:</p>
<pre class="language-bash hljs">cd ../dist
</pre>
<p>列出目录内容:</p>
<pre class="language-bash hljs">ls

// output
index.js  index.js.map
</pre>
<p>您将看到<code>index.js</code>文件已经创建。您可以使用Node.js运行该文件，如下所示:</p>
<pre class="language-bash hljs">node index.js
</pre>
<p>运行该命令后，您将看到ASCII艺术形式的CLI名称:</p>
<p><img data-attachment-id="139104" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli-name-ascii-art-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1.png" data-orig-size="730,123" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli-name-ascii-art" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1-300x51.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1.png" decoding="async" class="aligncenter wp-image-139104 size-full jetpack-lazy-image" src="../Images/440a3fe50f7393b647e36a5af09d3403.png" alt="Screenshot of the CLI name" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1-300x51.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139104" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli-name-ascii-art-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1.png" data-orig-size="730,123" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli-name-ascii-art" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1-300x51.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1.png" decoding="async" loading="lazy" class="aligncenter wp-image-139104 size-full" src="../Images/440a3fe50f7393b647e36a5af09d3403.png" alt="Screenshot of the CLI name" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1-300x51.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-1.png"/></noscript>
<p>现在，回到根目录:</p>
<pre class="language-bash hljs">cd ..
</pre>
<p>接下来，我们不会登录到<code>dist</code>目录来运行该文件。我们将在根目录中以<code>node dist/index.js</code>的身份执行此操作。</p>
<p>既然您可以用ASCII文本创建CLI的名称，我们将创建CLI选项。</p>
<h3 id="creating-cli-options-using-commander-js">使用Commander.js创建CLI选项</h3>
<p>在本节中，我们将使用Commander.js为CLI及其选项创建描述。</p>
<p>我们将创建以下选项:</p>
<p><img data-attachment-id="139106" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/cli-options/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options.png" data-orig-size="730,216" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cli-options" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options-300x89.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options.png" decoding="async" class="aligncenter wp-image-139106 size-full jetpack-lazy-image" src="../Images/a0cd8392f362570c6fd69ed3fcbc8e65.png" alt="Using Commander.js to create a description for the CLI and its options." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options-300x89.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139106" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/cli-options/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options.png" data-orig-size="730,216" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cli-options" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options-300x89.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options.png" decoding="async" loading="lazy" class="aligncenter wp-image-139106 size-full" src="../Images/a0cd8392f362570c6fd69ed3fcbc8e65.png" alt="Using Commander.js to create a description for the CLI and its options." srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options-300x89.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-options.png"/></noscript>
<p><code>-V</code>选项将调用Commander.js <code>version()</code>方法，默认提供<code>-h</code>。我们现在需要定义三个选项:</p>
<ul>
<li><code>-l</code> / <code>--ls</code>:修改CLI，在表格中列出目录内容。它还将接受一个可选的目录路径参数</li>
<li><code>-m</code> / <code>--mkdir</code>:用于创建目录。它需要一个选项参数，即要创建的目录的名称</li>
<li><code>-t</code> / <code>--touch</code>:修改CLI创建空文件。它需要一个选项参数，即文件的名称</li>
</ul>
<p>现在我们知道了将要创建的选项，我们将使用Commander.js来定义它们。</p>
<h3 id="defining-options-using-commander-js">使用Commander.js定义选项</h3>
<p>在文本编辑器中，打开<code>index.ts</code>文件，添加以下代码以导入并初始化Commander.js:</p>
<pre class="language-typescript hljs">const { Command } = require("commander"); // add this line
const figlet = require("figlet");

//add the following line
const program = new Command();

console.log(figlet.textSync("Dir Manager"));
</pre>
<p>在第一行中，我们导入Commander.js模块并提取<code>Command</code>类。然后我们将<code>program</code>变量设置为<code>Command</code>类的一个实例。该类为我们提供了几种可用于设置版本、描述和CLI选项的方法。</p>
<p>接下来，在您的<code>index.ts</code>文件中定义CLI选项:</p>
<pre class="language-typescript hljs">...

program
  .version("1.0.0")
  .description("An example CLI for managing a directory")
  .option("-l, --ls  [value]", "List directory contents")
  .option("-m, --mkdir &lt;value&gt;", "Create a directory")
  .option("-t, --touch &lt;value&gt;", "Create a file")
  .parse(process.argv);

const options = program.opts();
</pre>
<p>在前面的代码中，我们使用包含Commander实例的<code>program</code>变量来调用<code>version()</code>方法。该方法接受一个包含CLI版本的字符串，Commander会为您创建<code>-V</code>选项。</p>
<p>接下来，我们将<code>description()</code>方法调用与描述CLI程序的文本链接起来。接下来，您将调用Commander package的<code>option()</code>方法，该方法带有两个参数:一个选项和一个描述。第一个参数是一个字符串，指定了<code>-l</code>选项和长名称<code>--ls</code>。然后我们将<code>value</code>包装在<code>[]</code>中，这样选项就可以接受可选参数。第二个参数是当用户使用<code>-h</code>标志时显示的帮助文本。</p>
<p>之后，我们链接另一个<code>option()</code>方法调用来定义<code>-m</code> / <code>--mkdir</code>选项。<code>&lt;value&gt;</code>中的<code>&lt;&gt;</code>表示它需要一个参数。接下来，我们链接另一个<code>option()</code>来定义<code>-t</code>选项和长名称<code>--touch</code>，这也需要一个参数。</p>
<p>然后我们链接<code>parse()</code>方法调用，它处理<code>process.argv</code>中的参数，这是一个包含用户传递的参数的数组。第一个参数是<code>node</code>，第二个参数是程序文件名，其余都是附加参数。</p>
<p>最后，我们将<code>options</code>变量设置为<code>program.opts()</code>调用，该调用返回一个对象。该对象将CLI选项作为属性，其值是用户传递的参数。</p>
<p>此时，<code>index.ts</code>文件将如下所示:</p>
<pre class="language-typescript hljs">const { Command } = require("commander");
const figlet = require("figlet");

const program = new Command();

console.log(figlet.textSync("Dir Manager"));

program
  .version("1.0.0")
  .description("An example CLI for managing a directory")
  .option("-l, --ls  [value]", "List directory contents")
  .option("-m, --mkdir &lt;value&gt;", "Create a directory")
  .option("-t, --touch &lt;value&gt;", "Create a file")
  .parse(process.argv);

const options = program.opts();
</pre>
<p>完成更改后，保存文件，然后编译TypeScript:</p>
<pre class="language-bash hljs">npm run build
</pre>
<p>使用<code>-h</code>选项运行<code>index.js</code>以查看CLI帮助页面:</p>
<pre class="language-bash hljs">node dist/index.js -h
</pre>
<p>运行该命令后，页面将如下所示:</p>
<p><img data-attachment-id="139115" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli-help-page-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1.png" data-orig-size="730,333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli-help-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1-300x137.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1.png" decoding="async" class="aligncenter wp-image-139115 size-full jetpack-lazy-image" src="../Images/bafb3800327e2f4f8d1062e8e74c0d1e.png" alt="Screenshot of the CLI help page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1-300x137.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139115" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli-help-page-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1.png" data-orig-size="730,333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli-help-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1-300x137.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1.png" decoding="async" loading="lazy" class="aligncenter wp-image-139115 size-full" src="../Images/bafb3800327e2f4f8d1062e8e74c0d1e.png" alt="Screenshot of the CLI help page" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1-300x137.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-1.png"/></noscript>
<p>让我们也试试<code>-V</code>选项:</p>
<pre class="language-bash hljs">node dist/index.js -V
// 1.0.0
</pre>
<p>到目前为止，<code>-h</code>和<code>-V</code>选项工作正常，没有任何问题。如果您尝试我们定义的其他选项，您将只能看到CLI名称。</p>
<pre class="language-bash hljs">node dist/index.js -l
</pre>
<p><img data-attachment-id="139118" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/cli-name-after-using-option/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option.png" data-orig-size="730,123" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cli-name-after-using-option" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option-300x51.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option.png" decoding="async" class="aligncenter wp-image-139118 size-full jetpack-lazy-image" src="../Images/81e0bf046b2c8912b6ae3910703403e9.png" alt="Screenshot of CLI name in ASCII art after using the &lt;code&gt;-l&lt;/code&gt; option" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option-300x51.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139118" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/cli-name-after-using-option/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option.png" data-orig-size="730,123" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cli-name-after-using-option" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option-300x51.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option.png" decoding="async" loading="lazy" class="aligncenter wp-image-139118 size-full" src="../Images/81e0bf046b2c8912b6ae3910703403e9.png" alt="Screenshot of CLI name in ASCII art after using the &lt;code&gt;-l&lt;/code&gt; option" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option-300x51.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/cli-name-after-using-option.png"/></noscript>
<p>这是因为我们没有为其他选项定义操作。</p>
<h2 id="creating-actions-cli">为CLI创建操作</h2>
<p>到目前为止，我们已经为CLI定义了选项，但是没有与之关联的操作。在本节中，我们将为选项创建操作，以便当用户使用这些选项时，CLI将执行相关任务。</p>
<p>我们将从<code>-l</code>选项开始。我们希望CLI在包含以下字段的表格中显示目录内容:</p>
<ul>
<li>文件名</li>
<li>大小(KB)</li>
<li><code>created_at</code></li>
</ul>
<p>用户还可以提供可选的目录路径:</p>
<pre class="language-bash hljs">node dist/index.js -l /home/username/Documents
</pre>
<p>如果用户没有传递任何选项参数，CLI将只显示我们正在执行的<code>index.js</code>文件位置中的内容:</p>
<pre class="language-bash hljs">node dist/index.js -l
</pre>
<p>在您的<code>index.ts</code>文件中，导入<code>fs</code>和<code>path</code>模块:</p>
<pre class="language-typescript hljs">const { Command } = require("commander");
// import fs and path modules
const fs = require("fs");
const path = require("path");
const figlet = require("figlet");
</pre>
<p>在文件末尾定义一个带有<a href="https://blog.logrocket.com/exception-handling-in-javascript/">异常处理程序</a>的<code>listDirContents()</code>函数:</p>
<pre class="language-typescript hljs">const { Command } = require("commander");
...
const options = program.opts();

//define the following function
async function listDirContents(filepath: string) {
  try {

  } catch (error) {
    console.error("Error occurred while reading the directory!", error);
  }
}
</pre>
<p><code>listDirContents()</code>异步函数接受一个<code>filepath</code>参数，该参数有一个<code>string</code>的TypeScript类型声明。该类型确保函数只接受字符串作为参数，并且您添加的关键字<code>async</code>使函数异步。这将允许我们在函数中使用<code>await</code>关键字，我们很快就会这么做。</p>
<p>在这个函数中，我们定义了<code>try</code>块，它现在是空的。它将包含列出目录内容并将结果格式化成表格的功能。之后，我们定义了<code>catch</code>块，如果<code>try</code>块中包含的代码有异常，它将在控制台中记录一条消息。</p>
<p>让我们在<code>listDirContents()</code>函数中添加列出目录内容的代码:</p>
<pre class="language-typescript hljs">async function listDirContents(filepath: string) {
  try {
    // add the following
    const files = await fs.promises.readdir(filepath);
    const detailedFilesPromises = files.map(async (file: string) =&gt; {
      let fileDetails = await fs.promises.lstat(path.resolve(filepath, file));
      const { size, birthtime } = fileDetails;
      return { filename: file, "size(KB)": size, created_at: birthtime };
    });
  } catch (error) {
    console.error("Error occurred while reading the directory!", error);
  }
}
</pre>
<p>首先，我们用参数<code>filepath</code>中的值调用<code>fs.promises.readdir()</code>来读取目录内容。该函数返回一个承诺，所以我们在它前面加上<code>await</code>关键字，等待它的解析。解析后，<code>files</code>被设置为一个数组。</p>
<p>其次，我们迭代<code>files</code>数组中的每个元素，并使用<code>map()</code>方法返回一个新数组，该方法采用异步回调。回调接受<code>file</code>参数。在回调中，我们用文件的完整路径调用<code>fs.promises.lstat()</code>来获得文件的更多细节，比如<code>size</code>、<code>birthtime</code>和<code>info</code>。然后我们提取<code>size</code>和<code>birthtime</code>属性，并将带有<code>filename</code>、<code>size(KB)</code>和<code>created_at</code>属性的对象返回到数组中，由<code>map()</code>方法返回到<code>detailedFilesPromise</code>变量中。</p>
<p>现在，将以下代码添加到<code>try</code>块的末尾，以创建一个显示目录内容的表:</p>
<pre class="language-typescript hljs">async function listDirContents(filepath: string) {
  try {
    const files = await fs.promises.readdir(filepath);
    const detailedFilesPromises = files.map(async (file: string) =&gt; {
      let fileDetails = await fs.promises.lstat(path.resolve(filepath, file));
      const { size, birthtime } = fileDetails;
      return { filename: file, "size(KB)": size, created_at: birthtime };
    });
    // add the following
    const detailedFiles = await Promise.all(detailedFilesPromises);
    console.table(detailedFiles);
  } catch (error) {
    console.error("Error occurred while reading the directory!", error);
  }
}
</pre>
<p>现在，<code>detailedFilesPromise</code>中的每个元素将返回一个承诺，并在解析后对一个对象求值。为了等待它们全部解决，我们调用了<code>Promise.all()</code>方法。</p>
<p>最后，我们用<code>detailedFiles</code>数组调用<code>console.table()</code>来记录控制台中的数据。</p>
<p>现在让我们为<code>-m</code>选项定义一个动作。为此，在<code>listDirContents()</code>函数下面定义<code>createDir()</code>函数:</p>
<pre class="language-typescript hljs">async function listDirContents(filepath: string) {
  ...
}

// create the following function
function createDir(filepath: string) {
  if (!fs.existsSync(filepath)) {
    fs.mkdirSync(filepath);
    console.log("The directory has been created successfully");
  }
}
</pre>
<p>在<code>CreateDir()</code>函数中，我们检查给定的目录路径是否存在。如果它不存在，我们调用<code>fs.mkdirSync()</code>来创建一个目录，然后记录一个成功消息。</p>
<p>在我们调用函数之前，为<code>-t</code>标志定义一个<code>createFile()</code>函数:</p>
<pre class="language-typescript hljs">async function listDirContents(filepath: string) {
  ...
}

function createDir(filepath: string) {
  ...
}
// create the following function
function createFile(filepath: string) {
  fs.openSync(filepath, "w");
  console.log("An empty file has been created");
}
</pre>
<p>在<code>createFile()</code>函数中，我们调用<code>fs.openSync()</code>在给定的路径中创建一个空文件。然后，我们向终端记录一条确认消息。</p>
<p>到目前为止，我们已经创建了三个函数，但是还没有调用它们。为此，我们需要检查用户是否使用了选项，这样我们就可以调用合适的函数。</p>
<p>要检查用户是否使用了<code>-l</code>或<code>--ls</code>选项，在<code>index.ts</code>中添加以下内容:</p>
<pre class="language-typescript hljs">...
function createFile(filepath: string) {
  ...
}
// check if the option has been used the user
if (options.ls) {
  const filepath = typeof options.ls === "string" ? options.ls : __dirname;
  listDirContents(filepath);
}
</pre>
<p>如果<code>options.ls</code>被设置为一个值，我们将<code>filepath</code>变量设置为用户提供的路径，如果<code>option.ls</code>是一个字符串；否则，它被设置为<code>dist</code>目录中<code>index.js</code>文件的文件路径。之后，我们用<code>filepath</code>变量调用<code>listDirContents()</code>。</p>
<p>现在让我们在用户使用适当的选项时调用<code>createDir()</code>和<code>createFile()</code>函数:</p>
<pre class="language-typescript hljs">if (options.ls) {
  ...
}

// add the following code
if (options.mkdir) {
  createDir(path.resolve(__dirname, options.mkdir));
}
if (options.touch) {
  createFile(path.resolve(__dirname, options.touch));
}
</pre>
<p>如果用户使用了<code>-m</code>标志并传递了一个参数，我们就用<code>index.js</code>文件的完整路径调用<code>createDir()</code>来创建目录。</p>
<p>如果用户使用了<code>-t</code>标志并传递了一个参数，我们将调用带有<code>index.js</code>位置完整路径的<code>createFile()</code>函数。</p>
<p>此时，完整的<code>index.ts</code>文件将如下所示:</p>
<pre class="language-typescript hljs">const { Command } = require("commander");
const fs = require("fs");
const path = require("path");
const figlet = require("figlet");

const program = new Command();

console.log(figlet.textSync("Dir Manager"));

program
  .version("1.0.0")
  .description("An example CLI for managing a directory")
  .option("-l, --ls  [value]", "List directory contents")
  .option("-m, --mkdir &lt;value&gt;", "Create a directory")
  .option("-t, --touch &lt;value&gt;", "Create a file")
  .parse(process.argv);

const options = program.opts();

async function listDirContents(filepath: string) {
  try {
    const files = await fs.promises.readdir(filepath);
    const detailedFilesPromises = files.map(async (file: string) =&gt; {
      let fileDetails = await fs.promises.lstat(path.resolve(filepath, file));
      const { size, birthtime } = fileDetails;
      return { filename: file, "size(KB)": size, created_at: birthtime };
    });
    const detailedFiles = await Promise.all(detailedFilesPromises);
    console.table(detailedFiles);
  } catch (error) {
    console.error("Error occurred while reading the directory!", error);
  }
}
function createDir(filepath: string) {
  if (!fs.existsSync(filepath)) {
    fs.mkdirSync(filepath);
    console.log("The directory has been created successfully");
  }
}

function createFile(filepath: string) {
  fs.openSync(filepath, "w");
  console.log("An empty file has been created");
}

if (options.ls) {
  const filepath = typeof options.ls === "string" ? options.ls : __dirname;
  listDirContents(filepath);
}
if (options.mkdir) {
  createDir(path.resolve(__dirname, options.mkdir));
}
if (options.touch) {
  createFile(path.resolve(__dirname, options.touch));
}
</pre>
<p>保存文件并编译TypeScript:</p>
<pre class="language-bash hljs">npm run build
</pre>
<p>让我们验证一下这些选项是否有效。在您的终端中，输入以下内容以尝试<code>-l</code>选项:</p>
<pre class="language-bash hljs">node dist/index.js -l
</pre>
<p>您将在类似如下的表格中看到目录内容:</p>
<p><img data-attachment-id="139121" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-directory-contents-table/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table.png" data-orig-size="730,224" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-directory-contents-table" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table-300x92.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table.png" decoding="async" class="aligncenter wp-image-139121 size-full jetpack-lazy-image" src="../Images/018379145bf6bda8f56c86287eeb97f2.png" alt="Screenshot of directory contents in a table" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table-300x92.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139121" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-directory-contents-table/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table.png" data-orig-size="730,224" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-directory-contents-table" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table-300x92.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table.png" decoding="async" loading="lazy" class="aligncenter wp-image-139121 size-full" src="../Images/018379145bf6bda8f56c86287eeb97f2.png" alt="Screenshot of directory contents in a table" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table-300x92.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-directory-contents-table.png"/></noscript>
<p>接下来，将您选择的目录路径作为参数传递:</p>
<pre class="language-bash hljs">node dist/index.js -l /home/node-user/
</pre>
<p>在输出中，您将看到所选路径的目录内容:</p>
<p><img data-attachment-id="139123" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/directory-contents-home-directory/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory.png" data-orig-size="730,432" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="directory-contents-home-directory" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory-300x178.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory.png" decoding="async" class="aligncenter wp-image-139123 size-full jetpack-lazy-image" src="../Images/5475f9ff91a785f072b331f823b8c164.png" alt="Screenshot of directory contents in the home directory" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory-300x178.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139123" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/directory-contents-home-directory/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory.png" data-orig-size="730,432" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="directory-contents-home-directory" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory-300x178.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory.png" decoding="async" loading="lazy" class="aligncenter wp-image-139123 size-full" src="../Images/5475f9ff91a785f072b331f823b8c164.png" alt="Screenshot of directory contents in the home directory" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory-300x178.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/directory-contents-home-directory.png"/></noscript>
<p>使用<code>-m</code>选项，用您喜欢的任何名称创建一个新目录:</p>
<pre class="language-bash hljs">node dist/index.js -m new_directory
// The directory has been created successfully
</pre>
<p>让我们使用<code>-t</code>选项创建一个空文件:</p>
<pre class="language-bash hljs">node dist/index.js -t empty_file.txt
// An empty file has been created
</pre>
<p>接下来，让我们检查目录和空文件是否是用以下代码创建的:</p>
<pre class="language-bash hljs">node dist/index.js -l
</pre>
<p><img data-attachment-id="139128" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/new-directory-empty-filme-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1.png" data-orig-size="730,272" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="new-directory-empty-filme" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1-300x112.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1.png" decoding="async" class="aligncenter wp-image-139128 size-full jetpack-lazy-image" src="../Images/7a4ffd787b8ad4135b1c0ee51d1c85a0.png" alt="Screenshot of directory contents showing a new directory and an empty file that was created" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1-300x112.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139128" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/new-directory-empty-filme-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1.png" data-orig-size="730,272" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="new-directory-empty-filme" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1-300x112.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1.png" decoding="async" loading="lazy" class="aligncenter wp-image-139128 size-full" src="../Images/7a4ffd787b8ad4135b1c0ee51d1c85a0.png" alt="Screenshot of directory contents showing a new directory and an empty file that was created" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1-300x112.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/new-directory-empty-filme-1.png"/></noscript>
<p>输出显示了<code>new_directory</code>和<code>empty_file.txt</code>文件，确认它们已被创建。</p>
<p>现在，如果您使用不带任何选项的<code>node dist/index.js</code>命令，它将显示CLI名称:</p>
<pre class="language-bash hljs">node dist/index.js
</pre>
<p><img data-attachment-id="139130" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli-name-ascii-art-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2.png" data-orig-size="730,123" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli-name-ascii-art" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2-300x51.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2.png" decoding="async" class="aligncenter wp-image-139130 size-full jetpack-lazy-image" src="../Images/43560d1c9880680cee25ffb532e773a6.png" alt="Screenshot of CLI name in ASCII Art" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2-300x51.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139130" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli-name-ascii-art-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2.png" data-orig-size="730,123" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli-name-ascii-art" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2-300x51.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2.png" decoding="async" loading="lazy" class="aligncenter wp-image-139130 size-full" src="../Images/43560d1c9880680cee25ffb532e773a6.png" alt="Screenshot of CLI name in ASCII Art" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2-300x51.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-name-ascii-art-2.png"/></noscript>
<h2 id="showing-help-page">显示帮助页面</h2>
<p>当没有选项被传递时，显示帮助页面是一个好主意。在<code>index.ts</code>文件中，在文件末尾添加以下内容:</p>
<pre class="language-typescript hljs">...
if (!process.argv.slice(2).length) {
  program.outputHelp();
}
</pre>
<p>如果传递的参数个数等于2——也就是说，<code>process.argv</code>只有<code>node</code>和文件名作为参数——您可以调用<code>outputHelp()</code>来显示输出。</p>
<p>与任何更改一样，将TypeScript编译为JavaScript:</p>
<pre class="language-bash hljs">npm run build
</pre>
<p>运行以下命令:</p>
<pre class="language-bash hljs">node dist/index.js
</pre>
<p><img data-attachment-id="139134" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli-help-page-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2.png" data-orig-size="730,333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli-help-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2-300x137.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2.png" decoding="async" class="aligncenter wp-image-139134 size-full jetpack-lazy-image" src="../Images/d11a8b4103f0f5c30610e305c28df98b.png" alt="Screenshot of the CLI help page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2-300x137.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139134" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/screenshot-cli-help-page-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2.png" data-orig-size="730,333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screenshot-cli-help-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2-300x137.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2.png" decoding="async" loading="lazy" class="aligncenter wp-image-139134 size-full" src="../Images/d11a8b4103f0f5c30610e305c28df98b.png" alt="Screenshot of the CLI help page" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2-300x137.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/screenshot-cli-help-page-2.png"/></noscript>
<h2 id="making-cli-globally-accessible">使CLI可全局访问</h2>
<p>至此，我们的CLI已经完成。您可能会注意到，使用CLI非常繁琐。每天，我们必须将目录更改为CLI项目目录，然后调用<code>index.js</code>来使用它。如果我们能给它起一个像<code>dirmanager</code>这样的名字，它在我们的系统中的任何地方都有效，就更容易了，就像这样:</p>
<pre class="language-bash hljs">dirmanager -l
</pre>
<p>为此，打开<code>package.json</code>文件并添加以下内容:</p>
<pre class="language-json hljs">{
  ...
  "main": "dist/index.js",
  "bin": {
    "dirmanager": "./dist/index.js"
  },
  ...
}
</pre>
<p>在前面的代码中，我们将<code>main</code>更新为编译后的<code>index.js</code>文件。然后添加<code>bin</code>,用一个对象作为它的值。在对象中，我们将<code>dirmanager</code>设置为<code>./dist/index.js</code>，这是编译后脚本的位置。我们将使用<code>dirmanager</code>来访问CLI，但是您可以使用任何您喜欢的名称。</p>
<p>接下来，打开<code>index.ts</code>文件，在文件顶部添加以下一行:</p>
<pre class="language-typescript hljs">#! /usr/bin/env node

const { Command } = require("commander");
const fs = require("fs");
</pre>
<p>这条线被称为<a href="https://en.wikipedia.org/wiki/Shebang_(Unix)"> shebang线</a>，它告诉操作系统用<code>node</code>解释器运行文件。</p>
<p>保存文件并再次编译TypeScript:</p>
<pre class="language-bash hljs">npm run build
</pre>
<p>运行以下命令:</p>
<pre><code>npm install -g .
</code></pre>
<p><code>-g</code>选项告诉npm全局安装软件包。</p>
<p>此时，您可以打开一个新的终端或使用当前的终端，然后输入以下命令:</p>
<pre class="language-bash hljs">dirmanager
</pre>
<p><img data-attachment-id="139138" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/typing-cli-name-terminal-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1.png" data-orig-size="730,339" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="typing-cli-name-terminal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1-300x139.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1.png" decoding="async" class="aligncenter wp-image-139138 size-full jetpack-lazy-image" src="../Images/cd0f95c64b8a3711b8954b67bec51b5f.png" alt="Screenshot of CLI after typing the CLI name in the terminal" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1-300x139.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139138" data-permalink="https://blog.logrocket.com/building-typescript-cli-node-js-commander/attachment/typing-cli-name-terminal-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1.png" data-orig-size="730,339" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="typing-cli-name-terminal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1-300x139.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1.png" decoding="async" loading="lazy" class="aligncenter wp-image-139138 size-full" src="../Images/cd0f95c64b8a3711b8954b67bec51b5f.png" alt="Screenshot of CLI after typing the CLI name in the terminal" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1-300x139.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/typing-cli-name-terminal-1.png"/></noscript>
<p>您也可以尝试其他选项，它们会工作得很好:</p>
<pre class="language-bash hljs">dirmanager -l
</pre>
<p>我们现在已经成功地创建了一个可以在系统中任何地方工作的TypeScript CLI。</p>
<h2 id="conclusion">结论</h2>
<p>在本文中，我们了解了什么是CLI，然后使用Commander.js和TypeScript构建了一个CLI。然后，我们让CLI在系统中的任何地方都可以全局访问。现在，您已经掌握了如何使用TypeScript创建CLI的知识。</p>
<p>下一步，你可以访问<a href="https://www.npmjs.com/package/commander"> Commander文档</a>来了解更多信息。要继续您的打字之旅，请访问<a href="https://www.typescriptlang.org/docs/handbook/2/basic-types.html">打字文档</a>。你也可以在<a href="https://blog.logrocket.com/tag/typescript/">博客</a>上查看打字教程。</p><div class="code-block code-block-23">
<div class="blog-plug inline-plug node-plug"><h2>200只<img src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> <noscript> <img data-lazy-fallback="1" src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> </noscript>显示器出现故障，生产中网络请求缓慢</h2><p>部署基于节点的web应用程序或网站是容易的部分。确保您的节点实例继续为您的应用程序提供资源是事情变得更加困难的地方。如果您对确保对后端或第三方服务的请求成功感兴趣，</p><a href="https://lp.logrocket.com/blg/node-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer"><img src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/><noscript><img data-lazy-fallback="1" src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/></noscript></a><a href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录下用户与你的应用程序交互时发生的一切。您可以汇总并报告有问题的网络请求，以快速了解根本原因，而不是猜测问题发生的原因。</p><p>LogRocket检测您的应用程序以记录基线性能计时，如页面加载时间、到达第一个字节的时间、慢速网络请求，还记录Redux、NgRx和Vuex操作/状态。</p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a><p>. </p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>