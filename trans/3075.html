<html>
<head>
<title>Build a task tracker with SolidJS and TypeScript - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用 SolidJS 和 TypeScript - LogRocket 博客构建一个任务跟踪器</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/#0001-01-01">https://blog.logrocket.com/build-task-tracker-solidjs-typescript/#0001-01-01</a></blockquote><div><article class="article-post">
<p>SolidJS 正迅速成为 web 开发社区关注的焦点。凭借其简单的状态管理、细粒度的反应能力和高性能，SolidJS 为其他 JavaScript 框架奠定了基础。</p>
<p>SolidJS 是 React 开发人员一直在寻求的一切，在本文中，我将带您通过 SolidJS 构建一个任务跟踪器。我们将讨论以下主题:</p>

<h3>先决条件</h3>
<p>要学习本教程，您需要了解 JavaScript 和 TypeScript、Node.js 模块以及前端框架中的组件。</p>
<h2 id="why-solid-js">为什么是 SolidJS？</h2>
<p>如果你以前用过 React，SolidJS 看起来会很熟悉。当 React Hooks 首次发布时，我非常高兴，因为我认为它将解决我们的国家管理危机。钩子使得组件中的本地状态管理变得更容易，但是全局状态管理仍然很复杂。</p>
<p>断开连接的组件共享数据仍然很困难，许多库出现试图解决状态管理问题——这增加了开发疲劳，并给我们的代码库增加了不必要的复杂性。</p>
<p>我也看到同样的问题发生在其他前端框架中；好像全局状态管理是事后才想到的，而不是从一开始就计划好的。</p>
<p>有了 SolidJS，事情就不一样了。全局状态管理就像创建状态并导出它一样简单。不需要任何复杂的设置或第三方库。</p>
<p>SolidJS 还使用 JSX，这是流行的 JavaScript 的类似 HTML 的语法扩展。这使得处理 UI 逻辑、事件和状态更改变得简单明了。此外，SolidJS 编译成普通的 JavaScript，因此不需要虚拟 DOM，这使得它比 React 和 Angular 等框架相对更快。</p>
<p>SolidJS 也有一个简单的工作流程。组件只呈现一次，就像在 JavaScript 中一样，所以更容易预测代码的结果。</p>
<p>SolidJS 的另一个巨大优势是，它建立在其他 web 框架的基础上，因此它自豪地模仿好的部分，并改进不太好的部分。</p>
<p>让我们继续设置我们的 SolidJS 应用程序，一步一步地学习如何使用 SolidJS 构建 web 应用程序。</p>
<h2 id="setting-up-solidjs-app">使用 typescript 设置实体应用程序</h2>
<p>要在本地机器上设置 SolidJS 应用程序，您需要安装<a href="https://nodejs.org/en/" target="_blank" rel="noopener"> Node.js </a>。如果您已经安装了它，那么在您的终端上运行以下命令应该会返回您当前的 Node.js 版本:</p>
<pre class="language-bash hljs">node --version
</pre>
<p>接下来，让我们通过在终端上运行以下命令来创建一个新的 SolidJS 应用程序:</p>
<pre class="language-bash hljs">npx degit solidjs/templates/ts task-tracker
</pre>
<p>使用<code>solidjs/templates/ts</code>生成一个 Solid/TypeScript app。对于 JavaScript，您必须将命令改为<code>solidjs/templates/js</code>。</p>
<p>运行该命令后，您应该会看到如下所示的成功消息:</p>
<pre class="language-bash hljs">&gt; cloned solidjs/templates#HEAD to task-tracker
</pre>
<p>现在，在您选择的代码编辑器或 IDE 中打开生成的应用程序。应用程序结构应该是这样的:</p>
<p><img data-attachment-id="120697" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/task-tracker-app-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure.png" data-orig-size="730,397" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Task tracker app structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure.png" decoding="async" class="aligncenter wp-image-120697 size-full jetpack-lazy-image" src="../Images/58e508b200ca3327922e76cba3a784cc.png" alt="View of the generated app structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure-300x163.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="120697" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/task-tracker-app-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure.png" data-orig-size="730,397" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Task tracker app structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure.png" decoding="async" loading="lazy" class="aligncenter wp-image-120697 size-full" src="../Images/58e508b200ca3327922e76cba3a784cc.png" alt="View of the generated app structure" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure-300x163.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/task-tracker-app-structure.png"/></noscript>
<p>注意，我们的 SolidJS 应用程序使用<a href="https://blog.logrocket.com/getting-started-with-vite/" target="_blank" rel="noopener"> Vite </a>作为它的默认构建工具，使用<a href="https://blog.logrocket.com/javascript-package-managers-compared/" target="_blank" rel="noopener"> pnpm </a>作为默认的包管理器。这些工具相结合，为组件渲染、应用启动时间和包管理提供了出色的开发体验。</p>
<p>我们的应用程序组件目前位于<code>./src/App.tsx</code>文件中:</p>
<pre class="language-typescript hljs">import type { Component } from 'solid-js'
...
const App: Component = () =&gt; {
  return (
    &lt;div&gt;
      ...
    &lt;/div&gt;
  );
}

export default App
</pre>
<p>首先，我们从<code>solid-js</code>导入<code>Component</code>类型，然后将其用作我们的<code>App</code>组件的类型。</p>
<p>SolidJS 中的组件是 JavaScript 函数。它们是可重用的，并且可以使用 props 进行定制，props 类似于函数参数/自变量。</p>
<p>在<code>./src/index.tsx</code>文件中，我们呈现了我们的<code>App</code>组件:</p>
<pre class="language-typescript hljs">import { render } from 'solid-js/web'
import App from './App'

render(() =&gt; &lt;App /&gt;, document.getElementById('root') as HTMLElement)
</pre>
<p>来自<code>solid-js/web</code>的<code>render()</code>方法需要两个参数:</p>
<ol>
<li>一个返回我们的<code>&lt;App /&gt;</code>组件的函数</li>
<li>HTML 元素</li>
</ol>
<p>当您导航到<code>./index.html</code>文件时，您将通过<code>&lt;script /&gt;</code>标签看到根<code>div</code>和我们的<code>./src/index.tsx</code>文件的使用:</p>
<pre class="language-html hljs">...
&lt;body&gt;
  &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;
  &lt;div id="root"&gt;&lt;/div&gt;
  &lt;script src="/src/index.tsx" type="module"&gt;&lt;/script&gt;
&lt;/body&gt;
</pre>
<p>要运行我们的 SolidJS 应用程序，我们必须首先通过在终端上运行命令<code>pnpm install</code>来安装我们的包，然后在开发模式下运行<code>pnpm dev</code>来启动我们的应用程序。您应该会看到如下所示的成功消息:</p>
<pre class="language-bash hljs"> vite v2.9.9 dev server running at:

 &gt; Local: http://localhost:3001/
 &gt; Network: use `--host` to expose

 ready in 378ms.
</pre>
<p>当您导航到<code><a href="http://localhost:3001" rel="nofollow">http://localhost:3001</a></code>或终端上显示的 URL 时，您应该会看到如下页面:</p>
<p><img data-attachment-id="120701" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/local-host-3001/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001.png" data-orig-size="730,392" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Run SolidJS app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001.png" decoding="async" class="aligncenter size-full wp-image-120701 jetpack-lazy-image" src="../Images/0fbc7c8fbf158aa5fa2ac273314dea6b.png" alt="Edit src/App.tsx and save to reload." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001-300x161.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="120701" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/local-host-3001/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001.png" data-orig-size="730,392" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Run SolidJS app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-120701" src="../Images/0fbc7c8fbf158aa5fa2ac273314dea6b.png" alt="Edit src/App.tsx and save to reload." srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001-300x161.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/local-host-3001.png"/></noscript>
<h3 id="installing-bootstrap-style-solidjs">安装 bootstrap 来设计我们的 solids 应用程序</h3>
<p>现在我们已经成功地设置了 SolidJS 应用程序，让我们安装 Bootstrap 进行样式化，这样我们就不必为 CSS 而烦恼了。</p>
<p>要安装引导程序，请在终端上运行以下命令:</p>
<pre class="language-bash hljs">pnpm install bootstrap
</pre>
<p>接下来，我们将使用以下代码行在我们的<code>./src/index.tsx</code>文件中导入引导程序:</p>
<pre class="language-typescript hljs">import 'bootstrap/dist/css/bootstrap.min.css'
</pre>
<p>我们也可以删除当前的<code>./index.css</code>导入，因为我们不再需要它。我们的<code>index.tsx</code>文件现在应该是这样的:</p>
<pre class="language-typescript hljs">import { render } from 'solid-js/web'
import App from './App'
import 'bootstrap/dist/css/bootstrap.min.css'

render(() =&gt; &lt;App /&gt;, document.getElementById('root') as HTMLElement)
</pre>
<h2 id="using-jsx-structure-task-tracker">利用 JSX 构建我们的任务跟踪器</h2>
<p>让我们用 JSX 来构建我们的任务跟踪器。在<code>./src/App.tsx</code>文件中，用以下内容替换您当前拥有的内容:</p>
<pre class="language-typescript hljs">import type { Component } from 'solid-js'

const App: Component = () =&gt; {
  return (
    &lt;div class="container mt-5 text-center"&gt;
      &lt;h1 class="mb-4"&gt;Whattodo!&lt;/h1&gt;

      &lt;form class="mb-5 row row-cols-2 justify-content-center"&gt;
        &lt;input type="text" class="input-group-text p-1 w-25" placeholder="Add task here..." id="taskInput" required /&gt;

        &lt;button class="btn btn-primary ms-3 w-auto" type="submit"&gt;
          Add task
        &lt;/button&gt;
      &lt;/form&gt;

      &lt;div&gt;
        &lt;h4 class="text-muted mb-4"&gt;Tasks&lt;/h4&gt;
        &lt;div class="row row-cols-3 mb-3 justify-content-center"&gt;
          &lt;button class="btn btn-danger w-auto"&gt;X&lt;/button&gt;
          &lt;div class="bg-light p-2 mx-2"&gt;Push code to GitHub&lt;/div&gt;
          &lt;input type="checkbox" role="button" class="form-check-input h-auto px-3" /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}
export default App
</pre>
<p>我们的 JSX 代码包含输入新任务的表单和任务部分。目前，我们使用硬编码数据，但我们将学习如何使我们的应用程序动态化，以便当用户在表单中输入新任务并单击<strong>提交</strong>按钮时，我们的 SolidJS 应用程序会使用新数据进行更新。</p>
<p>当您返回浏览器时，您的页面现在应该是这样的:</p>
<p><img data-attachment-id="120703" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/solidjs-browser-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example.png" data-orig-size="730,341" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SolidJS app in browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example-300x140.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example.png" decoding="async" class="aligncenter size-full wp-image-120703 jetpack-lazy-image" src="../Images/d208aba3747659c7703097dfab11e9ba.png" alt="SolidJS App in browser" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example-300x140.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="120703" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/solidjs-browser-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example.png" data-orig-size="730,341" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SolidJS app in browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example-300x140.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-120703" src="../Images/d208aba3747659c7703097dfab11e9ba.png" alt="SolidJS App in browser" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example-300x140.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/solidjs-browser-example.png"/></noscript>
<p>接下来，让我们学习如何在 SolidJS 中创建和管理状态。我们将通过创建一个<code>taskList</code>状态来做到这一点，我们还将创建向状态添加新任务、删除它们以及更新它们的完成状态的函数。</p>
<h2 id="creating-updating-state-solidjs">创建和更新实体中的状态</h2>
<p>SolidJS 有一个<code>createSignal</code>钩子来创建状态。例如，让我们创建一个<code>taskList</code>状态来存放我们的任务。在<code>./src/App.tsx</code>文件中，我们将首先为每个任务创建一个类型:</p>
<pre class="language-typescript hljs">const App: Component = () =&gt; {
  type Task = {
    text: string
    text: string
    completed: boolean
  }

  return (...)
}
</pre>
<p>接下来，我们将创建我们的<code>taskList</code>状态:</p>
<pre class="language-typescript hljs">import { Component, createSignal } from 'solid-js'

...
const [taskList, setTaskList] = createSignal([] as Task[])
...
</pre>
<p><code>createSignal()</code>钩子返回一个包含两个变量的数组，<code>taskList</code>和<code>setTaskList</code>。与你将在 React 钩子上看到的不同，这两个变量都是函数。我们调用<code>taskList()</code>函数来访问我们的任务数据，调用<code>setTaskList()</code>函数来更新我们的<code>taskList</code>状态。</p>
<h3 id="adding-tasks-state">向我们的状态添加任务</h3>
<p>现在我们已经创建了我们的<code>taskList</code>状态，让我们创建一个向我们的状态添加任务的函数。我们将其命名为<code>addTask</code>:</p>
<pre class="language-typescript hljs">const [taskList, setTaskList] = createSignal([] as Task[])

const addTask = (e: Event) =&gt; {
  e.preventDefault()

  const taskInput = document.querySelector('#taskInput') as HTMLInputElement

  const newTask: Task = {
    id: Math.random().toString(36).substring(2),
    text: taskInput.value,
    completed: false,
  }

  setTaskList([newTask, ...taskList()])
  taskInput.value = ''
}
</pre>
<p>在我们的<code>addTask()</code>函数中，我们已经开始使用<code>e.preventDefault()</code>方法来防止提交表单时的默认重载行为。我们还从 ID 为“taskInput”的<code>&lt;input /&gt;</code>元素中获取了我们的<code>taskInput</code>。</p>
<p>对于每个新任务，我们创建一个名为<code>newTask</code>的对象，它具有属性<code>id</code>、<code>text</code>和<code>completed</code>。当创建一个新任务时，我们的函数将使用<code>Math.random()</code>方法为我们的任务 ID 生成一个随机字符串，并将默认的<code>completed</code>值设置为<code>false</code>。</p>
<p>最后，<code>setTaskList()</code>函数将被调用，使用一个数组作为它的参数，将当前的<code>taskList</code>状态添加到<code>newTask</code>中。</p>
<p>让我们也创建一个删除任务的函数:</p>
<pre class="language-typescript hljs">...
const deleteTask = (taskId: string) =&gt; {
  const newTaskList = taskList().filter((task) =&gt; task.id !== taskId)
  setTaskList(newTaskList)
}
</pre>
<p>当我们使用任务 ID 作为参数调用我们的<code>deleteTask()</code>函数时，它将过滤我们的<code>taskList</code>状态，并返回除了具有我们想要删除的 ID 的任务之外的每个任务。然后，将以新的任务列表作为参数调用<code>setTaskList()</code>方法。</p>
<p>为了使用我们的<code>addTask()</code>函数，我们将向 JSX 代码中的<code>&lt;form /&gt;</code>标签添加一个<code>onSubmit</code>事件监听器，每当单击提交按钮时，它将调用我们的函数。</p>
<pre class="language-javascript hljs">...
return (
 &lt;div class="container mt-5 text-center"&gt;
    &lt;h1 class="mb-4"&gt;Whattodo!&lt;/h1&gt;
    &lt;form class="mb-5 row row-cols-2 justify-content-center" onSubmit={(e) =&gt; addTask(e)}&gt;
     ...
    &lt;/form&gt;
  &lt;/div&gt;
)
</pre>
<p>接下来，让我们看看每当用户添加新任务时，我们如何在应用程序中显示我们的<code>taskList</code>数据。</p>
<h2 id="control-flow-looping-data-solidjs">控制 SolidJS 中的流程和数据循环</h2>
<p>SolidJS 有一个用于循环数据的<code>&lt;For /&gt;</code>组件。虽然 JavaScript <code>Array.map()</code>方法可以工作，但是当它被更新时，我们的组件将总是映射<code>taskList</code>状态。使用<code>&lt;For /&gt;</code>组件，我们的应用程序将只更新 DOM 中需要更新的部分。</p>
<p>让我们将任务<code>div</code>中现有的内容替换为:</p>
<pre class="language-javascript hljs">...
&lt;div&gt;
  &lt;h4 class="text-muted mb-4"&gt;Tasks&lt;/h4&gt;
  &lt;For each={taskList()}&gt;
    {(task: Task) =&gt; (
      &lt;div class="row row-cols-3 mb-3 justify-content-center"&gt;
        &lt;button class="btn btn-danger w-auto"&gt;X&lt;/button&gt;
        &lt;div class="bg-light p-2 mx-2"&gt;{task.text}&lt;/div&gt;
        &lt;input type="checkbox" checked={task.completed} role="button" class="form-check-input h-auto px-3" /&gt;
      &lt;/div&gt;
    )}
  &lt;/For&gt;
&lt;/div&gt;
...
</pre>
<p>注意我们是如何将<code>taskList</code>包装在<code>&lt;For /&gt;</code>组件中的。我们还从参数<code>task</code>中将任务文本从“将代码推送到 GitHub”更新为<code>task.text</code>。</p>
<p>我们现在可以继续使用我们之前创建的<code>deleteTask()</code>方法。我们将向<strong>删除</strong>按钮添加一个<code>onClick</code>事件监听器:</p>
<pre class="language-javascript hljs">...
&lt;button class="btn btn-danger w-auto" onclick={() =&gt; deleteTask(task.id)}&gt;
  X
&lt;/button&gt;
...
</pre>
<p>如果我们转到我们的浏览器，我们的 SolidJS 应用程序现在应该这样工作:</p>
<p><img data-attachment-id="120735" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/typing-tasks-solidjs/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/typing-tasks-solidjs.gif" data-orig-size="710,357" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="typing-tasks-solidjs" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/typing-tasks-solidjs-300x151.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/typing-tasks-solidjs.gif" decoding="async" class="aligncenter wp-image-120735 size-full jetpack-lazy-image" src="../Images/feb5a095a7b4002f46e929b4e9b24bff.png" alt="Adding tasks by typing in the task bar" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/typing-tasks-solidjs.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/typing-tasks-solidjs.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="120735" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/typing-tasks-solidjs/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/typing-tasks-solidjs.gif" data-orig-size="710,357" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="typing-tasks-solidjs" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/typing-tasks-solidjs-300x151.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/typing-tasks-solidjs.gif" decoding="async" loading="lazy" class="aligncenter wp-image-120735 size-full" src="../Images/feb5a095a7b4002f46e929b4e9b24bff.png" alt="Adding tasks by typing in the task bar" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/typing-tasks-solidjs.gif"/></noscript>
<h2 id="updating-tasks-status-nested-state">更新嵌套状态中的任务状态</h2>
<p>SolidJS 有一个用于创建和管理嵌套状态的<code>createStore()</code>钩子。但是在我们谈论它之前，让我们看看如何在我们的<code>createSignal()</code>状态中对预先存在的任务进行更新。我们将在<code>deleteTask()</code>函数下创建一个名为<code>toggleStatus</code>的新函数:</p>
<pre class="language-typescript hljs">...
const toggleStatus = (taskId: string) =&gt; {
  const newTaskList = taskList().map((task) =&gt; {
    if (task.id === taskId) {
      return { ...task, completed: !task.completed }
    }
    return task
  })
  setTaskList(newTaskList)
}
</pre>
<p>我们的<code>toggleStatus()</code>函数需要一个<code>taskId</code>参数，我们将使用它来获取我们想要标记为完成或未完成的特定任务。我们还使用了<code>map()</code>方法来遍历我们的<code>taskList</code>状态，如果我们找到与参数<code>taskId</code>具有相同 ID 的任务，我们将把它的<code>completed</code>属性改为与当前相反的属性。所以，如果<code>true</code>，我们就做成<code>false</code>，如果<code>false</code>，<code>true</code>。</p>
<p>最后，我们使用<code>setTaskList()</code>方法用新的<code>taskList</code>数据更新<code>taskList</code>状态。</p>
<p>在我们使用<code>toggleStatus()</code>函数之前，让我们在 JSX 代码中添加一个已完成任务和未完成任务的区别。如果任务文本的<code>completed</code>属性为<code>true</code>，我们将为其添加引导类<em>“文本-装饰-线条-穿透文本-成功”</em>。在我们的 JSX 代码中，就在<strong>删除</strong>按钮下面，让我们将任务文本<code>div</code>更新为:</p>
<pre class="language-javascript hljs">&lt;div class={`bg-light p-2 mx-2 ${task.completed &amp;&amp; 'text-decoration-line-through text-success'}`}&gt;
  {task.text}
&lt;/div&gt;
</pre>
<p>接下来，我们将向 checkbox 输入标签添加一个<code>onClick</code>事件监听器，每当它被点击时，我们将调用<code>toggleStatus()</code>方法:</p>
<pre class="language-javascript hljs">&lt;input
  type="checkbox"
  checked={task.completed}
  role="button"
  class="form-check-input h-auto px-3"
  onClick={() =&gt; {
    toggleStatus(task.id)
  }}
/&gt;
</pre>
<p>我们的<code>&lt;App /&gt;</code>组件返回的 JSX 代码应该是这样的:</p>
<pre class="language-html hljs">&lt;div class="container mt-5 text-center"&gt;
      &lt;h1 class="mb-4"&gt;Whattodo!&lt;/h1&gt;
      &lt;form class="mb-5 row row-cols-2 justify-content-center" onSubmit={(e) =&gt; addTask(e)}&gt;
        &lt;input type="text" class="input-group-text p-1 w-25" placeholder="Add task here..." id="taskInput" required /&gt;
        &lt;button class="btn btn-primary ms-3 w-auto" type="submit"&gt;
          Add task
        &lt;/button&gt;
      &lt;/form&gt;
      &lt;div&gt;
        &lt;h4 class="text-muted mb-4"&gt;Tasks&lt;/h4&gt;
        &lt;For each={taskList()}&gt;
          {(task: Task) =&gt; (
            &lt;div class="row row-cols-3 mb-3 justify-content-center"&gt;
              &lt;button class="btn btn-danger w-auto" onclick={() =&gt; deleteTask(task.id)}&gt;
                X
              &lt;/button&gt;
              &lt;div class={`bg-light p-2 mx-2 ${task.completed &amp;&amp; 'text-decoration-line-through text-success'}`}&gt;
                {task.text}
              &lt;/div&gt;
              &lt;input
                type="checkbox"
                checked={task.completed}
                role="button"
                class="form-check-input h-auto px-3"
                onClick={() =&gt; {
                  toggleStatus(task.id)
                }}
              /&gt;
            &lt;/div&gt;
          )}
        &lt;/For&gt;
      &lt;/div&gt;
    &lt;/div&gt;
</pre>
<p>当我们转到浏览器时，我们的 SolidJS 应用程序应该能够像这样工作:</p>
<p><img data-attachment-id="120739" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/checking-boxes-deleting-tasks/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-deleting-tasks.gif" data-orig-size="710,357" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Web app checking tasks" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-deleting-tasks-300x151.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-deleting-tasks.gif" decoding="async" class="aligncenter wp-image-120739 size-full jetpack-lazy-image" src="../Images/d0519f63403b2e190097ac4846b0b4ed.png" alt="Adding tasks, checking them off, and deleting in web app" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-deleting-tasks.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-deleting-tasks.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="120739" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/checking-boxes-deleting-tasks/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-deleting-tasks.gif" data-orig-size="710,357" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Web app checking tasks" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-deleting-tasks-300x151.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-deleting-tasks.gif" decoding="async" loading="lazy" class="aligncenter wp-image-120739 size-full" src="../Images/d0519f63403b2e190097ac4846b0b4ed.png" alt="Adding tasks, checking them off, and deleting in web app" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-deleting-tasks.gif"/></noscript>
<h2 id="using-create-store-nested-reactivity">将<code>createStore</code>用于 SolidJS 中的嵌套反应性</h2>
<p>在总结之前，让我们看看如何使用 SolidJS 中的<code>createStore</code>钩子来创建和更新嵌套状态。我们可以直接使用 ID 更新需要更新的任务，而不是映射我们的状态，创建一个新的任务列表，并用新列表替换我们所有的状态数据。</p>
<p>为了使用<code>createStore</code>钩子，我们将首先从<code>solid-js/store</code>导入它:</p>
<pre class="language-typescript hljs">import { createStore } from 'solid-js/store'
</pre>
<p>注意<code>createSignal</code>是从<code>solid-js</code>导入的，而<code>createStore</code>是从<code>solid-js/store</code>导入的。</p>
<p>接下来，我们将把我们的<code>taskList</code>状态创建更新为:</p>
<pre class="language-javascript hljs">const [taskList, setTaskList] = createStore([] as Task[])
</pre>
<p>我们用<code>createStore()</code>钩子创建的商店不是一个函数，不像用<code>createSignal()</code>钩子创建的商店。因此，我们将在代码中修改所有的<code>taskList</code>实例，只修改为<code>taskList</code>，而不是<code>taskList()</code>。第二个变量<code>setTaskList</code>仍然是一个函数，我们将使用它来更新我们的商店。</p>
<p>让我们继续使用<code>setTaskList()</code>方法来修改<code>toggleStatus()</code>函数:</p>
<pre class="language-javascript hljs">const toggleStatus = (taskId: string) =&gt; {
  setTaskList(
    (task) =&gt; task.id === taskId,
    'completed',
    (completed) =&gt; !completed,
  )
}
</pre>
<p>在<code>toggleStatus()</code>函数中，我们向<code>setTaskList()</code>方法传递三个参数:</p>
<ol>
<li>获取我们想要更新的特定任务的函数。在我们的例子中，我们返回与参数<code>taskId</code>具有相同 id 的任务</li>
<li>我们要修改的属性— <code>completed</code></li>
<li>对于第三个参数，我们将传递另一个函数，该函数接受我们选择的属性的当前值并返回一个新值。在这里，我们返回的是与当前相反的东西</li>
</ol>
<p>当我们回到浏览器时，我们的应用程序应该仍能像预期的那样工作:</p>
<p><img data-attachment-id="120776" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/checking-boxes-still-working-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-still-working-1.gif" data-orig-size="710,357" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Task tracker app web browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-still-working-1-300x151.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-still-working-1.gif" decoding="async" class="aligncenter wp-image-120776 size-full jetpack-lazy-image" src="../Images/e00ffdafda61c58132b21b5beb5d6a18.png" alt="Task tracker app is still working" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-still-working-1.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-still-working-1.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="120776" data-permalink="https://blog.logrocket.com/build-task-tracker-solidjs-typescript/attachment/checking-boxes-still-working-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-still-working-1.gif" data-orig-size="710,357" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Task tracker app web browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-still-working-1-300x151.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-still-working-1.gif" decoding="async" loading="lazy" class="aligncenter wp-image-120776 size-full" src="../Images/e00ffdafda61c58132b21b5beb5d6a18.png" alt="Task tracker app is still working" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/checking-boxes-still-working-1.gif"/></noscript>
<h2 id="conclusion">结论</h2>
<p>在本文中，我们已经通过构建一个任务跟踪器介绍了 SolidJS 的基础知识。与 Angular 和 React 等其他前端框架相比，Solid 构建 web 应用程序的方法令人印象深刻，也相对简单。由于直接编译到真实的 DOM 节点，并且不需要虚拟 DOM，用 SolidJS 构建的 web 应用程序具有不寻常的快速优势。</p>
<p>也就是说，SolidJS 仍然是新的，与 React、Vue 和 Angular 等框架相比，它的生态系统和社区都很小，所以很有可能你会首先遇到问题或需要特定的功能、库或集成。但是 SolidJS 发展很快，很多人已经开始将现有的应用移植到这个框架中。SolidJS 社区反应相当迅速，当你需要帮助的时候，你应该不会有任何问题。</p>
<p>你可以在我的 GitHub 上找到我们的任务跟踪器的<a href="https://github.com/ebenezerdon/solid-task-tracker" target="_blank" rel="noopener"> repo。我在 YouTube 频道上也有一个</a><a href="https://youtu.be/WDodWU-B-aY" target="_blank" rel="noopener"> SolidJS 速成班</a>，我很想让你看看。如果你想保持联系，可以考虑在<a href="https://linkedin.com/in/ebenezerdon" target="_blank" rel="noopener"> LinkedIn </a>上关注我。继续建！</p><div class="code-block code-block-21">
<div class="blog-plug inline-plug typescript-plug"><h2><a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>:全面了解您的网络和移动应用</h2>
<a href="https://lp.logrocket.com/blg/typescript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放问题，就像问题发生在您自己的浏览器中一样。LogRocket 不需要猜测错误发生的原因，也不需要向用户询问截图和日志转储，而是让您重放会话以快速了解哪里出错了。它可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自 Redux、Vuex 和@ngrx/store 的额外上下文。</p>
<p>除了记录 Redux 操作和状态，LogRocket 还记录控制台日志、JavaScript 错误、堆栈跟踪、带有头+正文的网络请求/响应、浏览器元数据和自定义日志。它还使用 DOM 来记录页面上的 HTML 和 CSS，甚至为最复杂的单页面和移动应用程序重新创建像素级完美视频。</p>
<a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>