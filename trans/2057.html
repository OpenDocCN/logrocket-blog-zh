<html>
<head>
<title>How to create a search bar in Flutter - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在 Flutter - LogRocket 博客中创建搜索栏</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-create-search-bar-flutter/#0001-01-01">https://blog.logrocket.com/how-to-create-search-bar-flutter/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Flutter 以其为各种各样的程序提供的灵活性而闻名，从电子商务到教育到银行应用等等。所有这些都可以通过使用<a href="https://blog.logrocket.com/widgets-the-building-blocks-of-flutter-apps/" target="_blank" rel="noopener">小部件</a>来实现，这些小部件充当复杂应用程序的简单构件。你可以将每个应用程序分解成不同的组件，其中一些是所有应用程序通用的，而另一些是特定的。</p>
<p>本文基于各种应用程序中使用的一个更通用的组件:搜索栏。搜索栏用于在数据库中查询特定的数据。</p>
<p>在本文中，我们将从头开始构建一个搜索栏，使用 Flutter 的<code>container</code>小部件和 box decoration 提供的各种属性。</p>
<p>包含搜索栏的应用程序将是一个基本的期刊应用程序。它将由一个<code>textField</code>类组成，当单击示例应用程序中的“搜索”图标时出现，当“取消”时消失。</p>
<p>在我们开始之前，请注意，本文假设您已经建立了 Flutter 开发环境，并且熟悉 Flutter 小部件和开发的基础知识。</p>
<h2>设置一个示例颤振应用程序</h2>
<p>第一步是使用 Flutter create 命令创建一个新项目:</p>
<pre>flutter create search_bar
</pre>
<p>接下来，我们需要清除<code>main.dart</code>文件的内容并创建一个新的<code>MaterialApp</code>:</p>
<pre>import 'package:flutter/material.dart';
void main() =&gt; runApp(MyApp());
class MyApp extends StatelessWidget {
 @override
 Widget build(BuildContext context) {
 return const MaterialApp(
  debugShowCheckedModeBanner: false,
  title: 'Material App',
  home: HomeScreen(),
 );
 }
}
</pre>
<p>我们正在为这个应用程序使用<a href="https://blog.logrocket.com/new-material-buttons-in-flutter/" target="_blank" rel="noopener">材质设计</a>,以便于设置；我们的主要重点将是创建搜索栏，而不是设计应用程序本身。</p>
<p>现在让我们创建一个名为<code>HomeScreen</code>的新的有状态小部件，并将其传递给<code>MaterialApp</code>的 home 属性:</p>
<pre>class HomeScreen extends StatefulWidget {
 const HomeScreen({Key? key}) : super(key: key);
 @override
 _HomeScreenState createState() =&gt; _HomeScreenState();
}
class _HomeScreenState extends State&lt;HomeScreen&gt; {
 @override
 Widget build(BuildContext context) {
 return Scaffold(
  appBar: AppBar(
  title: const Text('My Personal Journal'),
  automaticallyImplyLeading: false,
  centerTitle: true,
  ),
  body: Column(
  mainAxisAlignment: MainAxisAlignment.center,
  children: [
   const Center(
   child: Text('Hi'),
   ),
  ],
  ),
 );
 }
}
</pre>
<p>你会注意到我在上面的代码中添加了一些细节，包括一个<code>appBar</code>和一个<code>title</code>。同样，这些都是不太重要的附加功能，我们可以忽略，专注于创建搜索栏，但如果你在本教程中练习应用程序构建技巧，它们可能会派上用场。</p>
<h2>创建搜索按钮</h2>
<p>下一步是创建搜索按钮。<code>AppBar</code>为我们提供了一个名为<code>actions</code>的属性，我们可以使用这个集合来列出各种活动:</p>
<pre> appBar: AppBar(
  title: const Text('My Personal Journal'),
  automaticallyImplyLeading: false,
  actions: [
   IconButton(
   onPressed: () {},
   icon: const Icon(Icons.search),
   )
  ],
  centerTitle: true,
  ),
</pre>
<p>因为我们正在制作一个按钮，当它被点击时会显示一些东西(搜索栏)，所以我们将使用<code>IconButton</code>小部件。这个小部件在按下时会生成一个小动画，表明用户的选择被应用程序注册了。我们将名称传递给<code>icon</code>参数；你可以在下图中看到，我选择了放大镜图标来代表“搜索”</p>
<p>下图描述了我们的应用程序的当前状态:</p>
<p><img data-attachment-id="63487" data-permalink="https://blog.logrocket.com/how-to-create-search-bar-flutter/basic-flutter-search-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app.png" data-orig-size="359,620" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Basic-flutter-search-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app-174x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app.png" decoding="async" class="size-full wp-image-63487 aligncenter jetpack-lazy-image" src="../Images/43c6c3d3c3ab50551d3594a5f622895f.png" alt="Screenshot of a basic Flutter app with a search bar at the top" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app.png 359w, https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app-174x300.png 174w" data-lazy-sizes="(max-width: 359px) 100vw, 359px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63487" data-permalink="https://blog.logrocket.com/how-to-create-search-bar-flutter/basic-flutter-search-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app.png" data-orig-size="359,620" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Basic-flutter-search-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app-174x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app.png" decoding="async" loading="lazy" class="size-full wp-image-63487 aligncenter" src="../Images/43c6c3d3c3ab50551d3594a5f622895f.png" alt="Screenshot of a basic Flutter app with a search bar at the top" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app.png 359w, https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app-174x300.png 174w" sizes="(max-width: 359px) 100vw, 359px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/Basic-flutter-search-app.png"/></noscript>
<p>我们需要实现<code>onPressed</code>功能来触发显示文本字段的状态重建。一旦显示文本字段，我们还必须将当前的放大镜搜索图标更改为“取消”图标。顾名思义，cancel 按钮将用于取消搜索操作。</p>
<p>下一步是在<code>HomeScreen</code>小部件中创建两个变量:第一个是图标，第二个是小部件。他们将持有默认的搜索按钮以及<code>AppBar</code>的标题。</p>
<p>我们不再像前面那样对它们进行硬编码，而是将它们传递到变量中，然后将变量传递到任何需要它们的地方:</p>
<pre> @override
 _HomeScreenState createState() =&gt; _HomeScreenState();
}
class _HomeScreenState extends State&lt;HomeScreen&gt; {
 Icon customIcon = const Icon(Icons.search);
 Widget customSearchBar = const Text('My Personal Journal');
 @override
 Widget build(BuildContext context) {
 return Scaffold(
  appBar: AppBar(
  title: customSearchBar,
  automaticallyImplyLeading: false,
  actions: [
   IconButton(
   onPressed: () {},
   icon: customIcon,
   )
  ],
  centerTitle: true,
  ),
</pre>
<h2>管理国家</h2>
<p>因为我们希望在搜索按钮被按下时在应用程序栏中显示文本字段，所以我们必须更新应用程序的状态。对于本文，我们将使用<code>setState({})</code>函数来更新状态。</p>
<p>在<code>IconButton</code>的<code>onPressed</code>函数中，我们调用<code>setState</code>函数来更新我们之前声明的变量(即<code>customIcon</code>变量和<code>customSearchBar</code>变量)的状态。</p>
<p>然后，我们运行 if-else 条件来检查当前图标并做出正确的决定:</p>
<pre> onPressed: () {
    setState(() {
    if (customIcon.icon == Icons.search) {
     // Perform set of instructions.
    } else {
     customIcon = const Icon(Icons.search);
     customSearchBar = const Text('My Personal Journal');
    }
    });
   },
</pre>
<p>目前，它检查<code>customIcon</code>是否是一个<code>searchIcon</code>，然后根据结果执行一些指令。如果不是搜索图标，它会将变量更新为它们的<code>defaults/original</code>值:</p>
<pre>if (customIcon.icon == Icons.search) {
   customIcon = const Icon(Icons.cancel);
   customSearchBar = const ListTile(
   leading: Icon(
    Icons.search,
    color: Colors.white,
    size: 28,
   ),
   title: TextField(
    decoration: InputDecoration(
    hintText: 'type in journal name...',
    hintStyle: TextStyle(
     color: Colors.white,
     fontSize: 18,
     fontStyle: FontStyle.italic,
    ),
    border: InputBorder.none,
    ),
    style: TextStyle(
    color: Colors.white,
    ),
   ),
   );
  } 
</pre>
<p>在 if-else 逻辑块中，我们传递我们想要调用的新状态值:<code>customIcon</code>被赋予取消图标(<code>Icon.cancel</code>),<code>customSearchBar</code>被赋予包含<code>TextField</code>的<code>ListTile</code>。</p>
<p>在上面的代码中，搜索图标被传递给应用程序的前导参数，<code>TextField</code>被赋予<code>title</code>小部件。通过<code>InputDecoration</code>小部件调整<code>hintText</code>和样式，使用<code>InputBorder.none</code>属性移除<code>InputBorder</code>。</p>
<p>最后，我们的搜索栏已经完全实现了！</p>
<p><img data-attachment-id="63490" data-permalink="https://blog.logrocket.com/how-to-create-search-bar-flutter/flutter-search-bar-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app.png" data-orig-size="369,612" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flutter-search-bar-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app-181x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app.png" decoding="async" class="size-full wp-image-63490 aligncenter jetpack-lazy-image" src="../Images/b8a91612be1646cf46d58cfd4c68edaa.png" alt="Screenshot of basic Flutter app with search bar open" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app.png 369w, https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app-181x300.png 181w" data-lazy-sizes="(max-width: 369px) 100vw, 369px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63490" data-permalink="https://blog.logrocket.com/how-to-create-search-bar-flutter/flutter-search-bar-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app.png" data-orig-size="369,612" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flutter-search-bar-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app-181x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app.png" decoding="async" loading="lazy" class="size-full wp-image-63490 aligncenter" src="../Images/b8a91612be1646cf46d58cfd4c68edaa.png" alt="Screenshot of basic Flutter app with search bar open" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app.png 369w, https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app-181x300.png 181w" sizes="(max-width: 369px) 100vw, 369px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/Flutter-search-bar-app.png"/></noscript>
<h2>结论</h2>
<p>有些组件对于<a href="https://blog.logrocket.com/why-flutter-is-overtaking-react-native/" target="_blank" rel="noopener"> Flutter 应用</a>是通用的，不管它们是什么类型的应用，其中之一就是搜索栏。在数据库中查询特定的信息是大量移动应用程序都需要的工具。根据本文所学，现在可以在 Flutter 应用程序中构建和定制搜索栏。</p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>