<html>
<head>
<title>Write more readable code with TypeScript 4.4 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用 TypeScript 4.4 编写更可读的代码</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/typescript-4-4-and-more-readable-code/#0001-01-01">https://blog.logrocket.com/typescript-4-4-and-more-readable-code/#0001-01-01</a></blockquote><div><div class="mainheading">

<div class="row post-top-meta hidden-md-down">

<div class="col-md-10 col-xs-12">
<a class="text-capitalize link-dark" href="https://blog.logrocket.com/author/johnreilly/">
John Reilly <span class="btn follow">Follow</span></a>
<span class="author-description d-block">MacGyver turned Dev 🌻❤️ TypeScript / ts-loader / fork-ts-checker-webpack-plugin / DefinitelyTyped: The Movie</span>
</div>
</div>
<h1 class="posttitle">用 TypeScript 4.4 编写可读性更好的代码</h1>
<h2 class="post-subtitle"/>
<p><span class="post-date"><time class="post-date">2021 年 7 月 21 日</time> </span> <span class="dot"/> <span class="readingtime"> 2 分钟阅读</span> <span class="wordcount"> 672 </span> <span class="logrocket_editor"/></p>
</div>
<article class="article-post">
<p>TypeScript 4.4 附带了一个令人兴奋的特性。叫做<a href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-4-beta/#cfa-aliased-conditions" target="_blank" rel="noopener">别名条件</a>的控制流分析，相当拗口。</p>
<p>在本帖中，我们将解开这个新特性，并展示它如何有助于提高代码的可读性。</p>
<h2 id="indirecttypenarrowingviaconst">通过<code>const</code>的间接类型缩小</h2>
<p>2021 年 6 月 24 日，<a href="https://www.twitter.com/ahejlsberg">安德斯·海尔斯伯格</a>关闭了 TypeScript GitHub 存储库上的一个问题，标题是“通过<code>const</code>的间接类型收缩”该问题自 2016 年以来一直未解决，因为它被一个解决别名条件表达式和判别式的控制流分析的<a href="https://github.com/microsoft/TypeScript/pull/44730" target="_blank" rel="noopener">拉请求</a>所覆盖，所以被关闭。</p>
<p>公平地说，TypeScript 社区对此非常兴奋，从对这个问题的两种反应来看:</p>
<p><img data-attachment-id="59801" data-permalink="https://blog.logrocket.com/typescript-4-4-and-more-readable-code/attachment/reactions-on-github/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github.png" data-orig-size="730,737" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Reactions on GitHub to TypeScript’s indirect type narrowing" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github-297x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github.png" decoding="async" class="aligncenter size-full wp-image-59801 jetpack-lazy-image" src="../Images/7f7ebd121396ab3f32e8740e1d8cf0ea.png" alt="Reactions on GitHub to TypeScript's Indirect Type Narrowing" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github-297x300.png 297w, https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github-150x150.png?crop=1 150w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59801" data-permalink="https://blog.logrocket.com/typescript-4-4-and-more-readable-code/attachment/reactions-on-github/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github.png" data-orig-size="730,737" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Reactions on GitHub to TypeScript’s indirect type narrowing" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github-297x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-59801" src="../Images/7f7ebd121396ab3f32e8740e1d8cf0ea.png" alt="Reactions on GitHub to TypeScript's Indirect Type Narrowing" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github-297x300.png 297w, https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github-150x150.png?crop=1 150w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-github.png"/></noscript>
<p>更不用说推特上的普遍喜悦了:</p>
<p><img data-attachment-id="59802" data-permalink="https://blog.logrocket.com/typescript-4-4-and-more-readable-code/attachment/reactions-on-twitter/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter.png" data-orig-size="730,996" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Reactions on Twitter to TypeScript’s indirect type narrowing" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter-220x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter.png" decoding="async" class="aligncenter size-full wp-image-59802 jetpack-lazy-image" src="../Images/e589cdc2636424a9b0ecacff30b6b08b.png" alt="Reactions on Twitter to TypeScript's Indirect Type Narrowing" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter-220x300.png 220w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59802" data-permalink="https://blog.logrocket.com/typescript-4-4-and-more-readable-code/attachment/reactions-on-twitter/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter.png" data-orig-size="730,996" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Reactions on Twitter to TypeScript’s indirect type narrowing" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter-220x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-59802" src="../Images/e589cdc2636424a9b0ecacff30b6b08b.png" alt="Reactions on Twitter to TypeScript's Indirect Type Narrowing" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter-220x300.png 220w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/reactions-on-twitter.png"/></noscript>
<p>泽赫的推特很好地总结了别名条件的控制流分析的重要性:</p>
<blockquote><p>缺少使用常量的类型收缩使我重复代码，或者避免使用常量命名，这很有帮助</p></blockquote>
<p>有了这个特性，我们可以用更少的重复来编写更可读的代码。太神奇了！</p>
<h2 id="thecodewewouldliketowrite">使用 TypeScript 4.4 编写更具表现力的代码</h2>
<p>与其直接解释这种新的语言特性是什么，不如让我们从编写一些代码的位置开始，看看 TypeScript 4.4 有哪些我们以前无法解决的功能。</p>
<p>下面是一个简单的函数，它将接收到的所有参数相加并返回总数。这是一个宽容的函数，允许你以字符串的形式提供数字。所以它会像处理<code>2</code>一样成功地处理<code>'2'</code>。</p>
<p>当然，这是一个略显做作的例子，但这是展示新特性的好方法:</p>
<pre>function add(...thingsToAdd: (string | number)[]): number {
    let total = 0;
    for (const thingToAdd of thingsToAdd) {
        if (typeof thingToAdd === 'string') {
            total += Number(thingToAdd);
        } else {
            total += thingToAdd;
        }
    }
    return total;
}

console.log(add(1, '7', '3', 9))
</pre>
<p>在<a href="https://www.typescriptlang.org/play?ts=4.3.5#code/GYVwdgxgLglg9mABAQwCaoBQDodQBYxgDmAzgCpwCC6AXIhiVAE6FGIA+iYIAtgEYBTJgEoA2gF1hdbvyGIA3gChEKxABsBURFDhRkaxAF5EABgDcy1cDhN6EBI20FiFaqkRxgT1uSrphCpaqqjBeGFAAngAOAp7eLn7uhsmIAOSMLMSpAUrBeao6egYA1MYAcryCTOHORK7+FvkqAL6IAmokAoFNeYX6iKXxdYmNTc1BiOPBTJogTEh9ahbjivZgJHAaWGpwRBhomACMADRpAOypp6kAzJeIAJzCwkA"> TypeScript playground </a>里试试吧。</p>
<p>这个功能虽然管用，但是表现力不是很强。<code>typeof thingToAdd === 'string'</code>有两个用途:</p>
<ol>
<li>它将类型从<code>string | number</code>缩小到<code>string</code></li>
<li>它对逻辑进行分支，使得<code>string</code>可以被强制转换成<code>number</code>并添加到总数中</li>
</ol>
<p>你可以通过阅读代码来推断这一点。然而，如果我们重写它来捕捉意图呢？</p>
<p>让我们试着创建一个<code>shouldCoerceToNumber</code>常量来表达我们需要采取的行动:</p>
<pre>function add(...thingsToAdd: (string | number)[]): number {
    let total = 0;
    for (const thingToAdd of thingsToAdd) {
        const shouldCoerceToNumber = typeof thingToAdd === 'string';
        if (shouldCoerceToNumber) {
            total += Number(thingToAdd);
        } else {
            total += thingToAdd;
        }
    }
    return total;
}

console.log(add(1, '7', '3', 9))
</pre>
<p>在<a href="https://www.typescriptlang.org/play?ts=4.3.5#code/GYVwdgxgLglg9mABAQwCaoBQDodQBYxgDmAzgCpwCC6AXIhiVAE6FGIA+iYIAtgEYBTJgEoA2gF1hdbvyGIA3gChEKxABsBURFDhRkaxAF5EABgDcy1cDhN6EBI20FiFaqkRxgT1uSrphCpaqqvZgjiR4cCBqqADCcEIQAhQAcryCtsZQAJ4ADgKe3i5+7oZliADkjCzEFRbBwTBeDJHRcQlMSanpQgFKDQPauvqIANTGabJMGPisrv71gwC+iAJqJAKBgw06egbjRUTzqIsDS0GI58FMmiBMSLv6FueKoSRwGlhqcEQYaJgARgANJUAOwVEEVADMEMQAE5hMIgA"> TypeScript playground </a>里试试吧。</p>
<p>这是有效的代码。然而，TypeScript 4.3 因一个错误而令人窒息:</p>
<p><img data-attachment-id="59800" data-permalink="https://blog.logrocket.com/typescript-4-4-and-more-readable-code/attachment/doesnt-work-in-typescript-4-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3.png" data-orig-size="730,370" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="TypeScript 4.3 error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3.png" decoding="async" class="aligncenter size-full wp-image-59800 jetpack-lazy-image" src="../Images/8c6a866d926a6ef6515ee6202726d43f.png" alt="TypeScript 4.3 Error" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3-300x152.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59800" data-permalink="https://blog.logrocket.com/typescript-4-4-and-more-readable-code/attachment/doesnt-work-in-typescript-4-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3.png" data-orig-size="730,370" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="TypeScript 4.3 error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-59800" src="../Images/8c6a866d926a6ef6515ee6202726d43f.png" alt="TypeScript 4.3 Error" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3-300x152.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/doesnt-work-in-typescript-4-3.png"/></noscript>
<p>出现的错误是:</p>
<pre>Operator '+=' cannot be applied to types 'number' and 'string | number'.(2365)</pre>
<p>这里发生了什么事？TypeScript 不记得<code>shouldCoerceToNumber</code>表示从<code>string | number</code>到<code>string</code>的<code>thingToAdd</code>的类型收缩。所以当我们编写依赖于它的代码时，<code>thingToAdd</code>的类型从<code>string | number</code>开始就保持不变。</p>
<p>这造成了可怕的后果。这意味着我们不能编写我们感兴趣的更具表达性的代码，这对我们代码库的维护者来说会更好。这就是 TypeScript 4.4 通过我们的新特性打开的锁。</p>
<p>让我们将操场改为使用 TypeScript 4.4:</p>
<p><img data-attachment-id="59799" data-permalink="https://blog.logrocket.com/typescript-4-4-and-more-readable-code/attachment/does-work-in-typescript-4-4/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4.png" data-orig-size="730,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="No error in TypeScript 4.4" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4.png" decoding="async" class="aligncenter size-full wp-image-59799 jetpack-lazy-image" src="../Images/d844935ca24d397f5d391ed382456a9a.png" alt="No Error in TypeScript 4.4" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4-300x194.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59799" data-permalink="https://blog.logrocket.com/typescript-4-4-and-more-readable-code/attachment/does-work-in-typescript-4-4/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4.png" data-orig-size="730,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="No error in TypeScript 4.4" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-59799" src="../Images/d844935ca24d397f5d391ed382456a9a.png" alt="No Error in TypeScript 4.4" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4-300x194.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/does-work-in-typescript-4-4.png"/></noscript>
<p>在<a href="https://www.typescriptlang.org/play?ts=4.4.0-beta#code/GYVwdgxgLglg9mABAQwCaoBQDodQBYxgDmAzgCpwCC6AXIhiVAE6FGIA+iYIAtgEYBTJgEoA2gF1hdbvyGIA3gChEKxABsBURFDhRkaxAF5EABgDcy1cDhN6EBI20FiFaqkRxgT1uSrphCpaqqvZgjiR4cCBqqADCcEIQAhQAcryCtsZQAJ4ADgKe3i5+7oZliADkjCzEFRbBwTBeDJHRcQlMSanpQgFKDQPauvqIANTGabJMGPisrv71gwC+iAJqJAKBgw06egbjRUTzqIsDS0GI58FMmiBMSLv6FueKoSRwGlhqcEQYaJgARgANJUAOwVEEVADMEMQAE5hMIgA"> TypeScript playground </a>里试试吧。</p>
<p>令人高兴的是，现在我们已经切换到了 TypeScript 4.4，不再有错误了。如截图所示，<code>thingToAdd</code>变量被缩小为<code>string</code>。这是因为别名条件的控制流分析正在进行中。</p>
<p>我们现在正在编写更具表达性的代码，TypeScript 希望我们继续前进。</p>
<h2 id="readmore">阅读更多</h2>
<p>这个特性是对 TypeScript 语言的巨大补充。它应该对人们如何用 TypeScript 编写代码产生重大的、长期的、积极的影响。</p>
<p>要阅读更多内容，请查看优秀的<a href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-4-beta/#cfa-aliased-conditions"> TypeScript 4.4 beta 发行说明</a>。这个版本还附带了一些其他令人兴奋的特性。</p>
<p>非常感谢 TypeScript 团队再次改进了语言，并为人们能够编写可读的代码做出了真正的贡献。</p><div class="code-block code-block-21">
<div class="blog-plug inline-plug typescript-plug"><h2><a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>:全面了解您的网络和移动应用</h2>
<a href="https://lp.logrocket.com/blg/typescript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放问题，就像问题发生在您自己的浏览器中一样。LogRocket 不需要猜测错误发生的原因，也不需要向用户询问截图和日志转储，而是让您重放会话以快速了解哪里出错了。它可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自 Redux、Vuex 和@ngrx/store 的额外上下文。</p>
<p>除了记录 Redux 操作和状态，LogRocket 还记录控制台日志、JavaScript 错误、堆栈跟踪、带有头+正文的网络请求/响应、浏览器元数据和自定义日志。它还使用 DOM 来记录页面上的 HTML 和 CSS，甚至为最复杂的单页面和移动应用程序重新创建像素级完美视频。</p>
<a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>