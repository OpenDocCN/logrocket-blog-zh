<html>
<head>
<title>Using React useState with an object - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>将 React useState 与对象日志火箭博客一起使用</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-react-usestate-object/#0001-01-01">https://blog.logrocket.com/using-react-usestate-object/#0001-01-01</a></blockquote><div><article class="article-post">
<p>React 的创建是为了帮助开发人员在他们的浏览器中比使用普通 Javascript 的传统方式更容易和有效地执行文档对象模型(DOM)操作。</p>
<p>React 最常用的钩子之一是<code>useState</code>，它管理 React 项目中的状态以及对象的状态。但是，对于一个对象，我们不能直接更新它，否则组件不会重新呈现。</p>
<p>为了解决这个问题，我们将看看在处理对象时如何使用<code>useState</code>，包括用一个属性创建一个临时对象的方法，以及使用对象析构从两个现有对象创建一个新对象的方法。</p>
<h2>更新 React 对象中项目的状态</h2>
<p>为了理解<a href="https://blog.logrocket.com/how-to-choose-the-right-react-state-management-solution/">如何管理一个对象的状态</a>，我们必须更新对象中一个项目的状态。</p>
<p>在下面的代码示例中，我们将创建一个状态对象<code>shopCart,</code>及其设置者<code>setShopCart</code>。然后<code>shopCart</code>携带对象的当前状态，同时<code>setShopCart</code>更新<code>shopCart</code>的状态值:</p>
<pre class="language-javascript hljs">const [shopCart, setShopCart] = useState({});

let updatedValue = {};
updatedValue = {"item1":"juice"};
setShopCart(shopCart =&gt; ({
      ...shopCart,
      ...updatedValue
    }));</pre>
<p>然后我们可以创建另一个对象<code>updatedValue</code>，它携带状态值来更新<code>shopCart</code>。</p>
<p>通过将<code>updatedValue</code>对象设置为新的<code>{"item1":"juice"}</code>值，<code>setShopCart</code>可以将<code>shopCart</code>状态对象的值更新为<code>updatedValue</code>中的值。</p>
<p>为了更进一步，我们可以创建一个函数来包装提交表单所触发的删除逻辑:</p>
<pre class="language-javascript hljs">import React, { useState } from 'react';
 
function App() {
 const [shopCart, setShopCart] = useState({item1:"Juice"});
 const handleChange = (e) =&gt; {
 let updatedValue = {};
 updatedValue = {item1:e.target.value};
 setShopCart(shopCart =&gt; ({
      ...shopCart,
      ...updatedValue
    }));
  }
  return (
    &lt;div classname="App"&gt;
      &lt;h3&gt;useState with object in React Hooks - &lt;a href="https://www.logrocket.com"&gt;LogRocket&lt;/a&gt;&lt;/h3&gt;
      &lt;br/&gt;
      &lt;label&gt;Name:&lt;/label&gt;
      &lt;input type="text" name="item1" defaultValue={shopCart.item1} onChange={(e) =&gt; handleChange(e)}/&gt;
      &lt;br&gt;&lt;/br&gt;
      &lt;label&gt;Output:&lt;/label&gt;
      &lt;pre&gt;{JSON.stringify(shopCart, null, 2)}&lt;/pre&gt;
    &lt;/div&gt;
  );
}
 
export default App;
</pre>
<p>通过将我们之前讨论的逻辑包装在一个<code>handleChange</code>函数中，我们可以处理输入字段中的任何变化。</p>
<p>在输入字段中，让我们将输入元素的值设置为<code>shopCart</code>对象中<code>item1</code>的值，这允许用户在输入字段中对其进行更改时看到它的值。</p>
<p>接下来，让我们向每个输入元素添加<code>onChange</code>事件处理程序，确保当我们在输入字段中进行任何更改时，都会触发<code>handleChange</code>函数。最后，当我们对<code>shopCart</code>对象进行修改时，我们可以显示它的当前状态。</p>
<p><img data-attachment-id="81960" data-permalink="https://blog.logrocket.com/using-react-usestate-object/updating-objects-state-react-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Updating-objects-state-React-2.gif" data-orig-size="730,393" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Updating objects state React" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Updating-objects-state-React-2-300x162.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Updating-objects-state-React-2.gif" decoding="async" class="aligncenter size-full wp-image-81960 jetpack-lazy-image" src="../Images/afeb6eafd78253215f88d2c8e1b2d721.png" alt="Updating An Object's State In React By Adding Words To Name Field" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Updating-objects-state-React-2.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Updating-objects-state-React-2.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="81960" data-permalink="https://blog.logrocket.com/using-react-usestate-object/updating-objects-state-react-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Updating-objects-state-React-2.gif" data-orig-size="730,393" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Updating objects state React" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Updating-objects-state-React-2-300x162.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Updating-objects-state-React-2.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-81960" src="../Images/afeb6eafd78253215f88d2c8e1b2d721.png" alt="Updating An Object's State In React By Adding Words To Name Field" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Updating-objects-state-React-2.gif"/></noscript>
<h2>在 React 中从对象中移除项目</h2>
<p>可以使用相同的技术从对象中移除项目:</p>
<pre class="language-javascript hljs">const [shopCart, setShopCart] = useState({item1:"Juice", item2: "Icrecream"});

let copyOfObject = { ...shopCart }
delete copyOfObject['propertyToRemove']

setShopCart( shopCart =&gt; ({
      ...copyOfObject
    }));
</pre>
<p>通过创建一个<code>shopCart</code>状态对象的副本，我们可以从它的副本<code>copyOfObject</code>中删除一个项目。然后，我们可以使用之前定义的 setter 对象<code>setShopCart</code>，将原始对象<code>shopCart</code>的状态设置为复制对象<code>copyOfObject</code>的值。</p>
<p>为了更进一步，我们可以创建一个函数来包装逻辑，然后通过单击一个按钮来触发:</p>
<pre class="language-javascript hljs">import React, { useState } from 'react';
 
function App() {
 
  const [shopCart, setShopCart] = useState({item1:"Juice", item2:"Icrecream"});

const handleClick = (item_id,e) =&gt; {
  let copiedShopCart = {...shopCart};
  delete copiedShopCart[item_id];
  setShopCart( shopCart =&gt; ({
      ...copiedShopCart
    }));
  console.log(shopCart);
}
 
  return (
    &lt;div classname="App"&gt;
      &lt;h3&gt;useState with object in React Hooks - &lt;a href="https://www.logrocket.com"&gt;LogRocket&lt;/a&gt;&lt;/h3&gt;
      &lt;br/&gt;
      1.{shopCart.item1}
      &lt;button onClick={(e) =&gt; handleClick("item1",e)}&gt;delete&lt;/button&gt;
      &lt;br/&gt;
      &lt;br/&gt;
      {shopCart.item2}
      &lt;button onClick={(e) =&gt; handleClick("item2",e)}&gt;delete&lt;/button&gt;
      &lt;pre&gt;{JSON.stringify(shopCart, null, 2)}&lt;/pre&gt;
    &lt;/div&gt;
  );
}
 
export default App;
</pre>
<p>同样，我们将之前讨论过的逻辑包装在<code>handleClick</code>函数中，该函数处理来自附加到它的按钮的任何点击事件。</p>
<p>这允许我们在<code>shopCart</code>对象中列出两个项目，并为每个项目创建一个按钮。</p>
<p>通过使用<code>onClick</code>事件将<code>handleClick</code>函数附加到按钮上，我们可以将<code>shopCart</code>对象中每个项目的 ID 传递给<code>handleClick</code>函数，以检测当函数触发时要删除哪个项目。</p>
<p><img data-attachment-id="81962" data-permalink="https://blog.logrocket.com/using-react-usestate-object/removing-item-object-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Removing-item-object-2.gif" data-orig-size="730,452" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Removing item object" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Removing-item-object-2-300x186.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Removing-item-object-2.gif" decoding="async" class="aligncenter size-full wp-image-81962 jetpack-lazy-image" src="../Images/5f8e74d01ba1d17a65d1edd3ea3c841a.png" alt="Removing An Item From An Object By Pressing The Delete Button" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Removing-item-object-2.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Removing-item-object-2.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="81962" data-permalink="https://blog.logrocket.com/using-react-usestate-object/removing-item-object-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Removing-item-object-2.gif" data-orig-size="730,452" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Removing item object" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Removing-item-object-2-300x186.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Removing-item-object-2.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-81962" src="../Images/5f8e74d01ba1d17a65d1edd3ea3c841a.png" alt="Removing An Item From An Object By Pressing The Delete Button" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Removing-item-object-2.gif"/></noscript>
<h2>结论</h2>
<p>本文教你如何使用对象的使用状态，以及如何使用对象更新和删除条目。</p>
<p>我推荐阅读这篇文章来了解更多关于使用状态的信息。如果你有任何问题，不要犹豫，在推特上联系我，电话:<a href="https://twitter.com/LordChuks3"> @LordChuks3 </a>。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用 LogRocket 消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款 React analytics 解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket 告诉您 React 应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS 异常、前端性能指标和用户交互。然后，LogRocket 使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的 React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试 LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
 <p class="clearfix"/>
</article>

</div>    
</body>
</html>