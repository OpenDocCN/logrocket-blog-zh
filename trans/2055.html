<html>
<head>
<title>Using React Query for state management in React Native - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 React Native - LogRocket 博客中使用 React Query 进行状态管理</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/react-query-state-management-react-native/#0001-01-01">https://blog.logrocket.com/react-query-state-management-react-native/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<p>状态管理是 React Native 开发不可或缺的一部分。</p>
<p>状态是一个 JavaScript 对象，用于处理组件中可变的 React 本机数据。在 React 本地组件中，状态可能会随着时间而变化，这主要是用户事件的结果。</p>
<p>React Native 中简单的本地状态可以用<code>setState</code>方法或<code>useState</code>钩子来管理。</p>
<p>然而，随着我们的应用程序越来越大，您可能需要一个状态管理库，因为管理跨组件共享的状态变得越来越困难。</p>
<h3>React Native 的数据提取库</h3>
<p>因此，状态管理是您在开发 React 应用程序时可能遇到的常见问题之一。这可能是一个很难掌握的方面，因为 React 中有大量的状态管理库。</p>
<p>下面是一些受欢迎的:</p>
<h4>语境</h4>
<p>在 React 中，数据流是单向的，从上到下——从父组件到子组件。<a href="https://reactjs.org/docs/context.html">上下文 API </a>提供了一种通过组件树传递数据的方式，而不需要适当的钻取。</p>
<h4>Redux</h4>
<p>Redux 是一个框架无关的状态管理层。它非常强大，非常适合大型应用程序。可以和 React，React Native，Vue 等一起使用 Redux。</p>
<p>Redux 提供了一个名为 store 的全局状态对象，它使用了几个概念，如 actions、action creators 和 reducers。在大多数情况下，您会将 Redux 与诸如 Redux Thunk 或 Redux-Saga 之类的中间件一起使用，这引入了更多的复杂性，因为您需要学习更多的东西。然而，Redux 非常适合客户端状态管理。</p>
<p>你可以在这里获得使用 Redux 和 React Native 的<a href="https://blog.logrocket.com/comprehensive-guide-to-using-redux-in-react-native/">全面指南。</a></p>
<h4>反应查询</h4>
<p>本文重点关注 React Native 中使用<a href="https://react-query.tanstack.com"> React Query </a>的状态管理，这种技术将自己描述为 React 缺少的数据获取库。</p>
<p>让我们在下一节学习更多关于 React Query 的知识。</p>
<h2>什么是 React 查询 3？</h2>
<p>React Query 是我们应用程序中的一个轻量级缓存层。作为一个数据获取库，我们如何获取数据是不可知的。React Query 唯一需要知道的是 Axios 或 Fetch 返回的承诺。</p>
<p>React 查询的两个主要概念是<a href="https://react-query.tanstack.com/guides/queries">查询</a>和<a href="https://react-query.tanstack.com/guides/mutations">突变</a>。查询处理获取数据，而变异处理修改服务器上的数据。</p>
<p>React Query 导出一个用于处理查询的<code>useQuery</code>钩子。<code>useQuery</code>钩子有两个参数。第一个参数是一个惟一的标识符，用来描述我们正在获取的内容。第二个标识符是 fetcher 函数——一个异步函数，负责获取数据或抛出错误。</p>
<p>考虑下面的代码:</p>
<pre>import { useQuery } from 'react-query';
import axios from 'axios';

const fetchPosts = async () =&gt; {
    const { data } = await axios.get('https://jsonplaceholder.typicode.com/posts');
    return data;
};

const usePosts = () =&gt; useQuery('posts', fetchPosts);
</pre>
<p><code>useQuery</code>钩子返回一个查询对象，并处理我们获取的所有生命周期，所以我们不需要使用<code>useEffect</code>。</p>
<p>查询对象由<a href="https://react-query.tanstack.com/guides/queries"> React Query 的文档</a>中提到的一些重要状态组成:</p>
<ul>
<li><code>isLoading</code>或<code>status === 'loading'</code> —查询没有数据，当前正在获取</li>
<li><code>isError</code>或<code>status === 'error'</code> —查询遇到错误</li>
<li><code>isSuccess</code>或<code>status === 'success'</code> —查询成功，数据可用</li>
<li><code>isIdle</code>或<code>status === 'idle'</code> —该查询当前被禁用(稍后您将了解更多相关信息)</li>
</ul>
<p>查询只能处于这些状态之一。除了这些主要状态，它还包含更多信息，例如:</p>
<ul>
<li><code>error</code> —如果查询处于<code>isError</code>状态，则错误可通过<code>error</code>属性获得</li>
<li><code>data</code> —如果查询处于<code>success</code>状态，则可以通过<code>data</code>属性获得数据</li>
<li><code>isFetching</code> —在任何状态下，如果查询在任何时候被抓取(包括后台重抓取)，<code>isFetching</code>将为<code>true</code></li>
</ul>
<p>如果没有 React Query，这些状态中的每一个都可能使用不同的<code>useState</code>钩子来处理。因此，我们可以看到 React 查询帮助我们减少了样板文件。这是开发者体验上的一个收获——<code>DX</code>收获。</p>
<p>此外，React Query 有助于开箱即用的缓存。这对我们的最终用户有着直接的影响，因为它让我们的应用程序感觉更快，响应更快。</p>
<p>在本文中，我们将了解如何使用 React Query 管理 React 本机状态。让我们从下一节的先决条件开始。</p>
<h2>先决条件</h2>
<ul>
<li>JavaScript 的基础知识</li>
<li>React 和 React Native 的基本知识</li>
</ul>
<h2>React Query 和 React Native 入门</h2>
<p>首先，我们使用<a href="https://docs.expo.dev/get-started/create-a-new-app/"> Expo CLI </a>创建一个新的 React 本地应用程序，如下所示:</p>
<pre class="language-bash hljs">npm i --global expo-cli

// bootstrap a new project
expo init &lt;-- your app name --&gt;
</pre>
<p>将提示您一个模板列表:</p>
<p><img data-attachment-id="63398" data-permalink="https://blog.logrocket.com/react-query-state-management-react-native/expo-cli-template-list-react-query-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/expo-cli-template-list-react-query-project-e1629227286226.png" data-orig-size="730,83" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Expo CLI template list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/expo-cli-template-list-react-query-project-300x34.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/expo-cli-template-list-react-query-project-1024x116.png" decoding="async" class="aligncenter wp-image-63398 size-full jetpack-lazy-image" src="../Images/10c0e563d60c01c784a2a6e1cc5c5039.png" alt="Expo CLI Template List" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/expo-cli-template-list-react-query-project-e1629227286226.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/expo-cli-template-list-react-query-project-e1629227286226.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63398" data-permalink="https://blog.logrocket.com/react-query-state-management-react-native/expo-cli-template-list-react-query-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/expo-cli-template-list-react-query-project-e1629227286226.png" data-orig-size="730,83" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Expo CLI template list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/expo-cli-template-list-react-query-project-300x34.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/expo-cli-template-list-react-query-project-1024x116.png" decoding="async" loading="lazy" class="aligncenter wp-image-63398 size-full" src="../Images/10c0e563d60c01c784a2a6e1cc5c5039.png" alt="Expo CLI Template List" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/expo-cli-template-list-react-query-project-e1629227286226.png"/></noscript>
<p>选择第一个并通过运行以下命令进入您的应用程序目录:</p>
<pre class="language-bash hljs">cd &lt;-- your app name --&gt;
</pre>
<p>接下来，安装依赖项:</p>
<pre class="language-bash hljs">// install dependencies
npm i @react-navigation/native @react-navigation/stack axios 
react-native-gesture-handler react-native-safe-area-context react-native-screens 
react-query
</pre>
<p>启动开发服务器:</p>
<pre class="language-bash hljs">npm start 
</pre>
<p>在下一节中，我们将通过使用来自<a href="https://jsonplaceholder.typicode.com"> JSON 占位符</a>的数据构建一个简单的应用程序来深入研究 React Query。</p>
<h2>使用 React 查询进行复杂状态管理</h2>
<h3>设置样式</h3>
<p>我们将从创建一个包含一个<code>color.js</code>文件的<code>constants</code>文件夹开始。将以下代码添加到<code>color.js</code>文件中:</p>
<pre>export default {
    primary: '#202c41',
    border: '#c6c6c6',
    white: '#fff',
    gray: '#9ca5ab'
};
</pre>
<p>这是用于我们的应用程序的风格。</p>
<h3>设置导航</h3>
<p>接下来，我们设置导航。创建一个包含<code>Main.js</code>文件的导航文件夹。<br/>将以下代码添加到<code>Main.js</code>文件中:</p>
<pre>import React from 'react';
import { createStackNavigator } from '@react-navigation/stack';
import { Posts } from '../screens/Posts';
import { Post } from '../screens/Post';
const MainStack = createStackNavigator();
export const Main = () =&gt; (
    &lt;MainStack.Navigator&gt;
        &lt;MainStack.Screen name="Home" component={Posts} /&gt;
        &lt;MainStack.Screen name="Post" component={Post} /&gt;
    &lt;/MainStack.Navigator&gt;
);
</pre>
<p>在上面的代码中，我们为两个屏幕设置了导航，即<code>Home</code>和<code>Post</code>。<br/>我们稍后将创建<code>Posts</code>和<code>Post</code>组件。</p>
<h3>添加反应查询</h3>
<p>现在我们必须设置 React 查询。修改我们的<code>App.js</code>文件，如下所示:</p>
<pre>import React from 'react';
import { StatusBar } from 'expo-status-bar';
import { NavigationContainer } from '@react-navigation/native';
import { QueryClient, QueryClientProvider } from 'react-query';
import { Main } from './navigation/Main';

const queryClient = new QueryClient();

export default function App() {
    return (
        &lt;React.Fragment&gt;
            &lt;StatusBar style="auto" /&gt;
            &lt;NavigationContainer&gt;
                &lt;QueryClientProvider client={queryClient}&gt;
                    &lt;Main /&gt;
                &lt;/QueryClientProvider&gt;
            &lt;/NavigationContainer&gt;
        &lt;/React.Fragment&gt;
    );
}
</pre>
<p>在上面的代码中，React Query 使用<code>QueryClient</code>与缓存进行交互。而<code>QueryClientProvider</code>组件用于连接并向我们的应用程序提供<code>QueryClient</code>。</p>
<h3>创建应用程序的屏幕</h3>
<p>接下来，让我们为屏幕创建可重用的组件。创建一个<code>components</code>文件夹，里面有一个<code>Text.js</code>文件。将下面的代码添加到<code>Text.js</code>中:</p>
<pre>import React from 'react';
import { StyleSheet, Text as RNText } from 'react-native';
import colors from '../constants/colors';
const styles = StyleSheet.create({
    defaultText: {
        color: colors.primary,
        fontSize: 18
    }
});
export const Text = ({ children, style = {} }) =&gt; {
    const textStyles = [ styles.defaultText ];
    textStyles.push(style);
    return &lt;RNText style={textStyles}&gt;{children}&lt;/RNText&gt;;
};
</pre>
<p>上面，我们有一个默认样式的可重用的<code>Text</code>组件。我们将在整个应用程序中使用它来设计我们的文本。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>在我们创建屏幕——<code>Post.js</code>和<code>Posts.js</code>文件之前，我们需要设置钩子来获取这些屏幕呈现的数据。</p>
<p><code>Posts.js</code>文件呈现从 JSON 占位符获得的所有帖子，当<code>Post.js</code>文件处理每个帖子的细节时，它充当主屏幕。</p>
<p>创建两个文件夹，分别是<code>screens</code>和<code>hooks</code>。在<code>hooks</code>文件夹中，创建一个<code>usePosts.js</code>文件，并添加以下代码:</p>
<pre>import { useQuery } from 'react-query';
import axios from 'axios';

const fetchPosts = async () =&gt; {
    const { data } = await axios.get('https://jsonplaceholder.typicode.com/posts');
    return data;
};

const usePosts = () =&gt; useQuery('posts', fetchPosts);
export default usePosts;
</pre>
<p>另外，创建一个<code>usePost.js</code>文件和以下代码:</p>
<pre>import { useQuery } from 'react-query';
import axios from 'axios';

const fetchPost = async (postId) =&gt; {
    const { data } = await axios.get(`https://jsonplaceholder.typicode.com/comments?postId=${postId}`);
    return data;
};

const usePost = (postId) =&gt; useQuery([ 'posts', postId ], () =&gt; fetchPost(postId));
export default usePost;
</pre>
<p>在上面的代码示例中，<code>useQuery</code>将名为<code>posts</code>的唯一标识符作为其第一个参数，将一个 fetcher 函数作为其第二个参数。我们现在可以导入<code>usePosts</code>和<code>usePost</code>在我们的<code>screens</code>中使用。</p>
<p>在<code>screens</code>文件夹中，创建两个文件，分别是<code>Posts.js</code>和<code>Post.js</code>。将以下代码添加到<code>Posts.js</code>文件中:</p>
<pre>import React from 'react';
import { View, StyleSheet, FlatList, TouchableOpacity } from 'react-native';
import usePosts from '../hooks/usePosts';
import { Text } from '../components/Text';
import colors from '../constants/colors';

export const Posts = ({ navigation }) =&gt; {
    const { data, isLoading, isSuccess } = usePosts();
    return (
        &lt;View style={styles.container}&gt;
            {isLoading &amp;&amp; (
                &lt;React.Fragment&gt;
                    &lt;Text&gt;Loading...&lt;/Text&gt;
                &lt;/React.Fragment&gt;
            )}

            {isSuccess &amp;&amp; (
                &lt;React.Fragment&gt;
                    &lt;Text style={styles.header}&gt;all posts&lt;/Text&gt;
                    &lt;FlatList
                        data={data}
                        style={styles.wrapper}
                        keyExtractor={(item) =&gt; `${item.id}`}
                        renderItem={({ item }) =&gt; (
                            &lt;TouchableOpacity
                                onPress={() =&gt; 
                                  navigation.push('Post', { post: item })}
                                style={styles.post}
                            &gt;
                                &lt;View style={styles.item}&gt;
                                    &lt;Text style={styles.postTitle}&gt;
                                      {item.title}
                                    &lt;/Text&gt;
                                &lt;/View&gt;
                            &lt;/TouchableOpacity&gt;
                        )}
                    /&gt;
                &lt;/React.Fragment&gt;
            )}
        &lt;/View&gt;
    );
};

const styles = StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: colors.white,
        padding: 10
    },
    wrapper: {
        flex: 1,
        paddingVertical: 30
    },
    item: {
        paddingVertical: 10,
        paddingHorizontal: 20
    },
    header: {
        textAlign: 'center',
        textTransform: 'capitalize',
        fontWeight: 'bold',
        fontSize: 30,
        color: colors.primary,
        paddingVertical: 10
    },
    post: {
        backgroundColor: colors.primary,
        padding: 15,
        borderRadius: 10,
        marginBottom: 20
    },
    postTitle: { color: colors.white, textTransform: 'capitalize' }
});
</pre>
<p>在上面的代码中，如果<code>isLoading</code>为真，我们将呈现一个<code>loading…</code>文本。如果<code>isSuccess</code>为真，我们使用<code><a href="https://blog.logrocket.com/deep-dive-react-native-flatlist/">FlatList</a></code>渲染我们的帖子列表。</p>
<p>现在我们有:</p>
<p><img data-attachment-id="63400" data-permalink="https://blog.logrocket.com/react-query-state-management-react-native/flatlist-issuccess-rn-react-query/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query.png" data-orig-size="435,751" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN FlatList for React Query project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query-174x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query.png" decoding="async" class="size-full wp-image-63400 aligncenter jetpack-lazy-image" src="../Images/a385cc76953e2f460e33ed4943b9992c.png" alt="RN FlatList for React Query project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query.png 435w, https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query-174x300.png 174w" data-lazy-sizes="(max-width: 435px) 100vw, 435px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63400" data-permalink="https://blog.logrocket.com/react-query-state-management-react-native/flatlist-issuccess-rn-react-query/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query.png" data-orig-size="435,751" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN FlatList for React Query project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query-174x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query.png" decoding="async" loading="lazy" class="size-full wp-image-63400 aligncenter" src="../Images/a385cc76953e2f460e33ed4943b9992c.png" alt="RN FlatList for React Query project" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query.png 435w, https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query-174x300.png 174w" sizes="(max-width: 435px) 100vw, 435px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/flatlist-issuccess-rn-react-query.png"/></noscript>
<p>接下来，在<code>Post.js</code>文件中，添加以下代码:</p>
<pre>import React from 'react';
import { View, StyleSheet, ScrollView } from 'react-native';
import usePost from '../hooks/usePost';
import { Text } from '../components/Text';
import colors from '../constants/colors';

export const Post = ({ route }) =&gt; {
    const { post } = route &amp;&amp; route.params;
    const { data: comments, isSuccess, isLoading } = usePost(post.id);
    return (
        &lt;ScrollView style={styles.container}&gt;
            &lt;Text style={styles.header}&gt;{post.title}&lt;/Text&gt;
            &lt;View style={styles.post}&gt;
                &lt;Text&gt;{post.body}&lt;/Text&gt;
            &lt;/View&gt;
            {isLoading &amp;&amp; &lt;Text style={{ textAlign: 'center' }}&gt;Loading...&lt;/Text&gt;}

            {isSuccess &amp;&amp; (
                &lt;React.Fragment&gt;
                    &lt;Text style={styles.commentHeader}&gt;Comments&lt;/Text&gt;
                    {comments.map((comment) =&gt; (
                        &lt;View key={comment.id} style={styles.post}&gt;
                            &lt;Text&gt;{comment.body}&lt;/Text&gt;
                            &lt;Text&gt;{comment.email}&lt;/Text&gt;
                        &lt;/View&gt;
                    ))}
                &lt;/React.Fragment&gt;
            )}
        &lt;/ScrollView&gt;
    );
};
const styles = StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: colors.white,
        padding: 30
    },
    header: {
        textAlign: 'center',
        textTransform: 'capitalize',
        fontWeight: 'bold',
        fontSize: 40,
        color: colors.primary,
        paddingVertical: 10
    },
    commentHeader: {
        textAlign: 'center',
        textTransform: 'capitalize',
        fontWeight: 'bold',
        fontSize: 30,
        color: colors.primary,
        paddingVertical: 30
    },
    post: {
        flex: 1,
        paddingVertical: 10,
        alignItems: 'center'
    }
});
</pre>
<p>在上面的代码中，我们将用户点击的帖子作为<a href="https://reactnavigation.org/docs/params/">路由参数</a>接收，并使用其<code>ID</code>获取评论。以下是开机自检屏幕的示例:</p>
<p><img data-attachment-id="63402" data-permalink="https://blog.logrocket.com/react-query-state-management-react-native/react-query-post-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen.png" data-orig-size="448,782" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Query post screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen-172x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen.png" decoding="async" class="size-full wp-image-63402 aligncenter jetpack-lazy-image" src="../Images/0ca175b35bdcbbdf28420907668d0ae2.png" alt="React Query Post Screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen.png 448w, https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen-172x300.png 172w" data-lazy-sizes="(max-width: 448px) 100vw, 448px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="63402" data-permalink="https://blog.logrocket.com/react-query-state-management-react-native/react-query-post-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen.png" data-orig-size="448,782" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Query post screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen-172x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen.png" decoding="async" loading="lazy" class="size-full wp-image-63402 aligncenter" src="../Images/0ca175b35bdcbbdf28420907668d0ae2.png" alt="React Query Post Screen" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen.png 448w, https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen-172x300.png 172w" sizes="(max-width: 448px) 100vw, 448px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/react-query-post-screen.png"/></noscript>
<p>此外，在第一次加载时，你会看到文章和评论的加载，但之后当你来回导航时，你不会再看到它们。这是因为 React Query 在幕后缓存了我们的数据，使得后续的加载时间变得“即时”</p>
<h2>结论</h2>
<p>React Query 是一个经过深思熟虑的数据获取库，具有许多有趣的特性。正如我们所看到的，它在<code>DX</code>和<code>UX</code>方面提供了增益，也提升了我们的应用性能。</p>
<p>我真的希望在看完这篇文章后，你已经学到了足够的知识，可以在你的下一个项目中尝试一下。</p>
<p>最后，你可以在 GitHub 上获得完整的应用程序。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>