<html>
<head>
<title>Using KeyboardAwareScrollView and KeyboardAvoidingView in React Native - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 React Native - LogRocket 博客中使用 KeyboardAwareScrollView 和 KeyboardAvoidingView</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/keyboardawarescrollview-keyboardavoidingview-react-native/#0001-01-01">https://blog.logrocket.com/keyboardawarescrollview-keyboardavoidingview-react-native/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在 React Native 中开发移动屏幕时，需要考虑的最重要的事情之一就是滚动。在 web 上，当内容超出屏幕大小时，浏览器会自动处理滚动。您还可以使用 CSS overflow 属性来处理 web 上的滚动行为。</p>
<p>然而，反应原生动物并非如此。在 react native 中，您必须使用由 React Native 提供的 ScrollView 组件或通过第三方组件(如<code>KeyboardAwareScrollView</code>、<code>KeyboardAwareSectionList</code>、或<code>KeyboardAwareFlatList</code>)来处理滚动。</p>
<h2>什么是<code>KeyboardAwareScrollView</code>和<code>KeyboardAvoidingView</code>？</h2>
<p>一般来说，当你的内容大于设备高度时，你应该使用由<a href="https://github.com/APSL/react-native-keyboard-aware-scroll-view" target="_blank" rel="noopener">react-native-keyboard-aware-scroll-view 包</a>提供的组件，这样你的屏幕就可以滚动了。</p>
<p>但是，当你不需要在屏幕上滚动，但需要确保输入字段不隐藏在键盘后面时，你应该使用 React Native 提供的<code><a href="https://reactnative.dev/docs/keyboardavoidingview" target="_blank" rel="noopener">KeyboardAvoidingView</a></code>组件。</p>
<p>下面是几个使用<code>KeyboardAvoidingView</code>，以及 react-native-keyboard-aware-scroll-view 的例子。</p>
<h2>在 React Native 中使用<code>KeyboardAvoidingView</code></h2>
<p>当您的屏幕上有输入字段时，您不希望键盘出现在它们前面，否则，用户将看不到输入字段。</p>
<p>为了处理这种情况，您将希望使用<code>KeyboardAvoidingView</code>以便每当键盘打开时，您的焦点字段将被向上提升以出现在键盘上方。</p>
<p>让我们首先看看我们试图使用<code>KeyboardAvoidingView</code>解决的问题的例子。考虑以下组件，其中我们有几个文本字段，但它们不与<code>KeyboardAvoidingView</code>结合使用:</p>
<pre>import React from 'react';
import {
  View,
  KeyboardAvoidingView,
  TextInput,
  StyleSheet,
  Text,
  TouchableWithoutFeedback,
  Button,
  Keyboard,
} from 'react-native';
const KeyboardAvoidingComponent = () =&gt; {
  return (
    &lt;TouchableWithoutFeedback onPress={Keyboard.dismiss}&gt;
      &lt;View style={styles.inner}&gt;
        &lt;Text style={styles.header}&gt;Header&lt;/Text&gt;
        &lt;TextInput placeholder="Username" style={styles.textInput} /&gt;
        &lt;View style={styles.btnContainer}&gt;
          &lt;TextInput placeholder="Password" style={styles.textInput} /&gt;
          &lt;Button title="Submit" onPress={() =&gt; null} /&gt;
        &lt;/View&gt;
      &lt;/View&gt;
    &lt;/TouchableWithoutFeedback&gt;
  );
};
const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  inner: {
    padding: 24,
    flex: 1,
    justifyContent: 'space-around',
  },
  header: {
    fontSize: 36,
    marginBottom: 48,
  },
  textInput: {
    height: 40,
    borderColor: '#000000',
    borderBottomWidth: 1,
    marginBottom: 36,
  },
  btnContainer: {
    backgroundColor: 'white',
    marginTop: 12,
  },
});
export default KeyboardAvoidingComponent;
</pre>
<p>上述组件产生以下行为:</p>
<p><img data-attachment-id="73051" data-permalink="https://blog.logrocket.com/keyboardawarescrollview-keyboardavoidingview-react-native/input-field-covered-by-keyboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-covered-by-keyboard.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Input field covered by keyboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-covered-by-keyboard-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-covered-by-keyboard.gif" decoding="async" class="aligncenter size-full wp-image-73051 jetpack-lazy-image" src="../Images/1ad8b0a2ec0062c0a56372c950267b0d.png" alt="Input Field Covered by Keyboard" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-covered-by-keyboard.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-covered-by-keyboard.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="73051" data-permalink="https://blog.logrocket.com/keyboardawarescrollview-keyboardavoidingview-react-native/input-field-covered-by-keyboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-covered-by-keyboard.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Input field covered by keyboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-covered-by-keyboard-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-covered-by-keyboard.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-73051" src="../Images/1ad8b0a2ec0062c0a56372c950267b0d.png" alt="Input Field Covered by Keyboard" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-covered-by-keyboard.gif"/></noscript>
<p>如您所见，当键盘打开时，输入字段隐藏在键盘后面。这是一个问题，而这正是<code>KeyboardAvoidingView</code>来拯救的地方。</p>
<p>让我们看看如何在<code>KeyboardAvoidingView</code>中包装文本字段。</p>
<p>考虑下面的组件，我们在<code>KeyboardAvoidingView</code>中包装了几个文本字段:</p>
<pre>import React from 'react';
import {
  View,
  KeyboardAvoidingView,
  TextInput,
  StyleSheet,
  Text,
  TouchableWithoutFeedback,
  Button,
  Keyboard,
} from 'react-native';
const KeyboardAvoidingComponent = () =&gt; {
  return (
    &lt;KeyboardAvoidingView behavior="padding" style={styles.container}&gt;
      &lt;TouchableWithoutFeedback onPress={Keyboard.dismiss}&gt;
        &lt;View style={styles.inner}&gt;
          &lt;Text style={styles.header}&gt;Header&lt;/Text&gt;
          &lt;TextInput placeholder="Username" style={styles.textInput} /&gt;
          &lt;View style={styles.btnContainer}&gt;
            &lt;TextInput placeholder="Username" style={styles.textInput} /&gt;
            &lt;Button title="Submit" onPress={() =&gt; null} /&gt;
          &lt;/View&gt;
        &lt;/View&gt;
      &lt;/TouchableWithoutFeedback&gt;
    &lt;/KeyboardAvoidingView&gt;
  );
};
const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  inner: {
    padding: 24,
    flex: 1,
    justifyContent: 'space-around',
  },
  header: {
    fontSize: 36,
    marginBottom: 48,
  },
  textInput: {
    height: 40,
    borderColor: '#000000',
    borderBottomWidth: 1,
    marginBottom: 36,
  },
  btnContainer: {
    backgroundColor: 'white',
    marginTop: 12,
  },
});
export default KeyboardAvoidingComponent;
</pre>
<p>上述组件产生以下行为:</p>
<p><img data-attachment-id="73054" data-permalink="https://blog.logrocket.com/keyboardawarescrollview-keyboardavoidingview-react-native/input-field-lifted-above-keyboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-lifted-above-keyboard.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Input field lifted above keyboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-lifted-above-keyboard-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-lifted-above-keyboard.gif" decoding="async" class="aligncenter size-full wp-image-73054 jetpack-lazy-image" src="../Images/ff6c7528d16f5031b141ed8e4b770f1c.png" alt="Input Field Lifted Above by Keyboard" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-lifted-above-keyboard.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-lifted-above-keyboard.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="73054" data-permalink="https://blog.logrocket.com/keyboardawarescrollview-keyboardavoidingview-react-native/input-field-lifted-above-keyboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-lifted-above-keyboard.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Input field lifted above keyboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-lifted-above-keyboard-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-lifted-above-keyboard.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-73054" src="../Images/ff6c7528d16f5031b141ed8e4b770f1c.png" alt="Input Field Lifted Above by Keyboard" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/input-field-lifted-above-keyboard.gif"/></noscript>
<p>正如您在上面看到的，当键盘打开时，输入字段被提升到键盘上方，因为我们在<code>KeyboardAvoidingView</code>中包装了我们的组件。</p>
<p><code>KeyboardAvoidingView</code>当我们知道我们的内容不会超出设备高度时，效果很好。然而，总有一些设计的内容比设备高度多。</p>
<p>在那些情况下，<code>KeyboardAvoidingView</code>帮不了你多少。这就是<code>KeyboardAwareScrollView</code>的用武之地。让我们在下一节看看<code>KeyboardAwareScrollView</code>。</p>
<h2>在 React Native 中实现<code>KeyboardAwareScrollView</code></h2>
<p>与<code>KeyboardAvoidingView</code>不同的是，<code>KeyboardAwareScrollView</code>让你的整个屏幕可以滚动。您可以添加任意数量的组件，并且仍然可以滚动屏幕。</p>
<p>如果您不使用<code>KeyboardAwareScrollView</code>并且您的内容不适合屏幕，您的内容将被截断，用户将无法滚动。</p>
<p>通过使用<code>KeyboardAwareScrollView</code>，您的整个屏幕变得可滚动。此外，它会自动处理输入字段焦点，并在打开键盘时向上提升字段。</p>
<p>考虑下面的组件，我们已经在<code>KeyboardAwareScrollView</code>中包装了一些文本字段:</p>
<pre>import React from 'react';
import {
  View,
  KeyboardAvoidingView,
  TextInput,
  StyleSheet,
  Text,
  TouchableWithoutFeedback,
  Button,
  Keyboard,
} from 'react-native';
import {KeyboardAwareScrollView} from 'react-native-keyboard-aware-scroll-view';
const KeyboardAwareScrollViewComponent = () =&gt; {
  return (
    &lt;KeyboardAwareScrollView&gt;
      &lt;View style={styles.inner}&gt;
        &lt;Text style={styles.header}&gt;Header&lt;/Text&gt;
        &lt;TextInput placeholder="Username" style={styles.textInput} /&gt;
        &lt;View style={styles.btnContainer}&gt;
          &lt;TextInput placeholder="Username 1" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 2" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 3" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 4" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 5" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 6" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 7" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 8" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 9" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 10" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 11" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 12" style={styles.textInput} /&gt;
          &lt;TextInput placeholder="Username 13" style={styles.textInput} /&gt;
          &lt;Button title="Submit" onPress={() =&gt; null} /&gt;
        &lt;/View&gt;
      &lt;/View&gt;
    &lt;/KeyboardAwareScrollView&gt;
  );
};
const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  inner: {
    padding: 24,
    flex: 1,
    justifyContent: 'space-around',
  },
  header: {
    fontSize: 36,
    marginBottom: 48,
  },
  textInput: {
    height: 40,
    borderColor: '#000000',
    borderBottomWidth: 1,
    marginBottom: 36,
  },
  btnContainer: {
    backgroundColor: 'white',
    marginTop: 12,
  },
});
export default KeyboardAwareScrollViewComponent;
</pre>
<p>当键盘打开时，上面的组件会将文本字段推到键盘上方，如下所示:</p>
<p><img data-attachment-id="73056" data-permalink="https://blog.logrocket.com/keyboardawarescrollview-keyboardavoidingview-react-native/text-fields-raised-above-keyboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-fields-raised-above-keyboard.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text fields raised above keyboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-fields-raised-above-keyboard-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-fields-raised-above-keyboard.gif" decoding="async" class="aligncenter size-full wp-image-73056 jetpack-lazy-image" src="../Images/536c5496d91575e47251d67d36947746.png" alt="Text Fields Raised Above Keyboard" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-fields-raised-above-keyboard.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-fields-raised-above-keyboard.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="73056" data-permalink="https://blog.logrocket.com/keyboardawarescrollview-keyboardavoidingview-react-native/text-fields-raised-above-keyboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-fields-raised-above-keyboard.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text fields raised above keyboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-fields-raised-above-keyboard-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-fields-raised-above-keyboard.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-73056" src="../Images/536c5496d91575e47251d67d36947746.png" alt="Text Fields Raised Above Keyboard" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-fields-raised-above-keyboard.gif"/></noscript>
<p><code>KeyboardAwareScrollView</code>接受<a href="https://reactnative.dev/docs/scrollview#props" target="_blank" rel="noopener">滚动查看</a>的所有道具。此外，在<a href="https://www.npmjs.com/package/react-native-keyboard-aware-scroll-view" target="_blank" rel="noopener">react-native-keyboard-aware-scroll-view</a>包中，还有其他可用的组件，比如<code>KeyboardAwareSectionList</code>和<code>KeyboardAwareFlatList</code>。你可以点击查看这些组件的道具列表<a href="https://github.com/APSL/react-native-keyboard-aware-scroll-view#props" target="_blank" rel="noopener">。</a></p>
<h2>结论</h2>
<p>在本教程中，我们介绍了什么是<code>KeyboardAvoidingView</code>和<code>KeyboardAwareScrollView</code>以及如何使用它们。请记住，这些组件有不同的用途。</p>
<p>使用<code>KeyboardAvoidingView</code>组件的主要目的是确保您的输入字段不会隐藏在键盘后面。这样，每当用户点击文本字段时，键盘就会打开，字段就会向上抬起，显示在键盘上方。</p>
<p>另一方面，<code>KeyboardAwareScrollView</code>服务于两个不同的目的:</p>
<ol>
<li>它将孩子包装在<code>ScrollView</code>中，这样屏幕就可以滚动了</li>
<li>当键盘打开时，它会提升输入栏</li>
</ol>
<p>可以肯定地说，<code>KeyboardAwareScrollView</code>是<code>KeyboardAvoidingView</code>的超集。在大多数情况下，使用<code>KeyboardAwareScrollView</code>应该足够了，因为它处理滚动和键盘行为。你应该只在你不希望用户滚动的屏幕上使用<code>KeyboardAvoidingView</code>。感谢阅读！</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
 </article>

</div>    
</body>
</html>