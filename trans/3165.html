<html>
<head>
<title>How to implement typo-friendly search components in your React app - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在 React app - LogRocket 博客中实现输入友好的搜索组件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/implement-typo-friendly-search-react/#0001-01-01">https://blog.logrocket.com/implement-typo-friendly-search-react/#0001-01-01</a></blockquote><div><article class="article-post">
<p>搜索组件是一种在应用程序中轻松查找和访问数据的方法。用户将搜索组件视为与应用程序通信的界面。它使他们能够通过输入字段查找、排序和过滤应用程序内容的各个部分，他们可以在输入字段中指定搜索关键字和/或过滤选项来过滤结果。</p>
<p>向 web 应用程序添加搜索功能有多种方法，例如从头开始创建搜索组件，或者使用搜索工具来节省时间并提高准确性和生产率。在这篇博文中，你将一步一步地学习如何使用一个简单的 API 在 React 应用中实现一个输入友好的搜索组件。</p>
<p>本文还将比较两个搜索引擎(Algolia 和 Typesense ),并查看它们之间的优势，根据您的应用程序需求，为您提供关于哪一个是搜索功能的更好选择的基本知识。</p>
<h2 id="prerequisites">先决条件</h2>
<p>本文假设您熟悉以下内容:</p>
<ul>
<li>反应</li>
<li>API 的基本使用</li>
<li>基本 CSS</li>
</ul>
<h3>目录</h3>

<h2 id="what-to-consider">在 React 中构建输入友好的搜索组件时需要考虑什么</h2>
<p>拥有一个输入友好的搜索组件将为用户在浏览应用程序时提供更好的用户体验。当创建一个搜索组件时，重要的是要注意你应该考虑哪些特性来提供一个有效的搜索组件和一个总体上令人满意的用户体验。</p>
<h3>自动完成功能</h3>
<p>该功能会在用户开始键入单词时自动提供完成单词的预测。它节省时间，因为它帮助用户快速完成他们想要的搜索查询。</p>
<h3>自动更正功能</h3>
<p>此功能提供了纠正拼写错误、拼写错误和大小写错误的建议。这使得用户在搜索应用程序时，无需确保术语是否准确无误。</p>
<h3>建议相关结果功能</h3>
<p>该功能为用户提供了与他们正在搜索的术语相关的建议单词列表。</p>
<h2 id="demo-application-typosearch"><strong>演示</strong> <strong>应用</strong><strong>:</strong><strong>排版搜索</strong></h2>
<p>本演示教程将介绍如何使用 React 构建一个简单的搜索应用程序，以及如何添加一些对输入友好的特性，比如更正建议和下一个单词预测。</p>
<p>该应用程序由三个主要组件组成:组件<code>SearchBar.js</code>、组件<code>Suggestion.js</code>和包装所有其他组件的整体组件<code>App.js</code>。</p>
<p>当您键入关键字时，该组件会做两件事:</p>
<ul>
<li>它试图预测下一个可能的单词——例如，单词“separate”最有可能跟在“from”后面</li>
<li>当你打错一个单词时，它会提示一些单词。例如，当您键入“poople”时，它会建议将“people”作为修复输入错误的建议选项之一</li>
</ul>
<p>这些功能将使用免费的<a href="https://www.datamuse.com/api/" target="_blank" rel="noopener"> Datamuse API </a>来实现，该 API 的每日 API 调用限制为 100，000 次。</p>
<h3 id="installation">装置</h3>
<p>首先，从<a href="https://github.com/IkehAkinyemi/react_search_component" target="_blank" rel="noopener"> GitHub </a>克隆项目。通过在终端中运行以下命令来安装依赖项:</p>
<pre class="language-bash hljs">npm install
</pre>
<p>您的文件夹结构应该如下所示:</p>
<p><img data-attachment-id="124725" data-permalink="https://blog.logrocket.com/implement-typo-friendly-search-react/attachment/screenshot-2022-06-21/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21.png" data-orig-size="416,790" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Folder structure" data-image-description="" data-image-caption="&lt;p&gt;Screenshot 2022-06-21 at 11.42.56 PM.png&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21-158x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21.png" decoding="async" class="aligncenter wp-image-124725 size-full jetpack-lazy-image" src="../Images/1bd6de847d4a491849bb85fce8693df1.png" alt="Typosearch folder structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21.png 416w, https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21-158x300.png 158w" data-lazy-sizes="(max-width: 416px) 100vw, 416px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="124725" data-permalink="https://blog.logrocket.com/implement-typo-friendly-search-react/attachment/screenshot-2022-06-21/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21.png" data-orig-size="416,790" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Folder structure" data-image-description="" data-image-caption="&lt;p&gt;Screenshot 2022-06-21 at 11.42.56 PM.png&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21-158x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21.png" decoding="async" loading="lazy" class="aligncenter wp-image-124725 size-full" src="../Images/1bd6de847d4a491849bb85fce8693df1.png" alt="Typosearch folder structure" srcset="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21.png 416w, https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21-158x300.png 158w" sizes="(max-width: 416px) 100vw, 416px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/screenshot-2022-06-21.png"/></noscript>
<p>运行以下命令启动本地服务器以预览应用程序:</p>
<pre class="language-bash hljs">npm run start
</pre>
<h3 id="the-components">构建组件</h3>
<p>如上所述，这个项目有三个组成部分。</p>
<p>首先是<code>SearchBar</code>组件。这是一个简单的搜索字段，您可以在其中键入搜索关键字。</p>
<pre class="language-javascript hljs">import React from 'react';
import './SearchBar.css';
import SearchIcon from './SearchIcon';
function SearchBar({ handleSearch, nextWord, searchValue, selectSug }) {
  const handleKeyDown = (e) =&gt; {
    if (e.key === 'Tab') selectSug(false, nextWord);
  }
  return (
    &lt;&gt;
    { searchValue &amp;&amp; &lt;p className="tip"&gt;Hit the &lt;span&gt;Tab&lt;/span&gt; key to accept suggestion&lt;/p&gt; }
    &lt;div className="search-bar" tabIndex="0"&gt;
        &lt;input 
          className="search-bar__input" 
          type="text" 
          name="search" 
          placeholder="Enter search keyword..." 
          onChange={handleSearch}
          value={searchValue}
          spellCheck={true}
          onKeyDown={handleKeyDown}
        /&gt;
        { searchValue &amp;&amp; nextWord &amp;&amp; &lt;span className="search-bar__suggestion"&gt;&lt;i&gt;{nextWord}&lt;/i&gt;&lt;/span&gt; }
        &lt;span className="search-bar__icon" onClick={() =&gt; alert(searchValue)}&gt;
          &lt;SearchIcon /&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;/&gt;
  )
}
export default SearchBar;
</pre>
<p>第二个是<code>Suggestion</code>组件。该组件基本上包含三个单词的建议，旨在纠正输入到<code>SearchBar</code>组件中的输入错误。</p>
<pre class="language-javascript hljs">import React from 'react';
import './Suggestion.css';
function Suggestion({ correctionSugs, searchValue, selectSug }) {
  return (
    &lt;&gt;
    {
      searchValue &amp;&amp; correctionSugs.length &gt; 1 &amp;&amp;
      &lt;div className="suggestion"&gt;
          &lt;h4 className="suggestion__header"&gt;Did you mean?&lt;/h4&gt;
          {
            correctionSugs.map(item =&gt; {
              return &lt;p className="suggestion__sug" key={item} onClick={() =&gt; selectSug(item)}&gt;{item}&lt;/p&gt;
            })
          }
      &lt;/div&gt;
    }
    &lt;/&gt;
  )
}
export default Suggestion;</pre>
<p>最后，我们有了<code>App</code>组件。这是封装所有其他组件的 home 组件。它执行计算，并在必要时将道具传递给其他组件。</p>
<p><img data-attachment-id="124723" data-permalink="https://blog.logrocket.com/implement-typo-friendly-search-react/attachment/typo-friendly-search-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo.png" data-orig-size="730,420" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Search demo" data-image-description="" data-image-caption="&lt;p&gt;Search component demo&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo-300x173.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo.png" decoding="async" class="size-full wp-image-124723 jetpack-lazy-image" src="../Images/71ae690928672988b4878c5533e5b121.png" alt="Typo friendly search demo" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo-300x173.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="124723" data-permalink="https://blog.logrocket.com/implement-typo-friendly-search-react/attachment/typo-friendly-search-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo.png" data-orig-size="730,420" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Search demo" data-image-description="" data-image-caption="&lt;p&gt;Search component demo&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo-300x173.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo.png" decoding="async" loading="lazy" class="size-full wp-image-124723" src="../Images/71ae690928672988b4878c5533e5b121.png" alt="Typo friendly search demo" srcset="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo-300x173.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/typo-friendly-search-demo.png"/></noscript>
<h3 id="how-it-works">它是如何工作的</h3>
<p>当您在输入字段中键入内容时，应用程序会进行两次 API 调用。第一个调用用于预测搜索关键字最常见的下一个单词。当这个数据从 API 返回时，它被存储在一个状态变量<code>nextWordSug</code>中，并作为一个道具传递给呈现它的<code>SearchBar.js</code>组件。您可以点击<strong>标签</strong>按钮，自动将下一个单词建议添加到您的搜索关键词中。</p>
<pre class="language-javascript hljs">try {
  const res = await fetch(`https://api.datamuse.com/words?lc=${word}`);
  const data = await res.json();
  if (data.length &gt; 1) setNextWordSug(data[0].word);
} catch (err) {
  alert('Error occured while getting susggestions!');
}
</pre>
<p>另一个是对一个打错的单词的建议更正。当数据从 API 返回时，前三个建议被提取出来，存储在<code>correctionSugs</code>状态变量中，并作为一个道具传递给<code>Suggestion.js</code>组件。您可以点击任何建议来接受建议——这会用接受的建议替换您的打字错误。</p>
<pre class="language-javascript hljs">try {
  const res = await fetch(`https://api.datamuse.com/words?sp=${word}`);
  const data = await res.json();
  let _data = [];
  for (let i = 0; i &lt; 3; i++) {
    if (data.length &gt;= 3) {
      if (data[0].word !== word.toLowerCase()) _data.push(data[i].word);
    }
    setCorrectionSugs(_data);
  }
} catch (err) {
  alert('Error occured while getting susggestions!');
  console.log(err);
}
</pre>
<p>这就是全部了！可以参考<a href="https://github.com/IkehAkinyemi/react_search_component" target="_blank" rel="noopener">源代码</a>进行深入复习。</p>
<h2 id="algolia-vs-typesense">Algolia vs. Typesense</h2>
<p>虽然您可以使用上面的方法在 React 应用程序中构建搜索组件，但是您也可以利用搜索工具在 React 应用程序中快速启动搜索组件。本文的这一部分比较了两种高效的搜索工具——Algolia 和 Typesense，您可以轻松地将它们集成到 React 应用程序中，以改善最终用户的搜索体验。</p>
<p>与自己创建自定义搜索组件不同，这些搜索工具更易于使用、更直观，并提供了一些内置功能，如自动完成和自动更正，因此您不必自己手动编写这些功能。</p>
<h3 id="what-is-algolia">什么是 Algolia？</h3>
<p>Algolia 是一个搜索引擎产品，它提供了一组构建模块，为您的用户创建快速、直观和全面的惊人搜索体验。它为您提供自动更正和自动完成搜索功能，帮助您的用户更快地找到答案。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>它提供了一个开发人员友好的 API 客户端、直观的 UX 工具和几个集成来帮助您在应用程序中快速创建搜索组件。它为开发人员提供了一个仪表板来管理他们的搜索分析，并允许您集成自己的分析工具来查看用户如何搜索。</p>
<h4>全球语言支持</h4>
<p>Algolia 是语言无关的，它支持基于符号的语言，包括中文、日文、阿拉伯文和其他不需要额外配置的语言。这意味着它支持从左到右(LTR)和从右到左(RTL)脚本<strong> <em>。</em>T3】</strong></p>
<h4>错别字公差</h4>
<p>错别字容忍是一种容忍用户拼写错误的功能，并为他们提供他们搜索的项目。Algolia 通过匹配与搜索单词拼写最接近的单词来提供这一功能。</p>
<h3 id="what-is-typesense">什么是 Typesense？</h3>
<p>Typesense 是一个允许输入错误的搜索引擎，它使用最先进的搜索算法构建，优化了即时搜索体验。</p>
<p>它通过自动完成、过滤器、查询建议和特性增强了搜索体验。与 Algolia 不同，Typesense 是开源的，这意味着你可以自己托管它，但他们确实提供了一个基于云的解决方案:Typesense Cloud。</p>
<h4>没有运行时依赖性</h4>
<p>Typesense 是一个不需要运行时依赖的单一二进制文件。这意味着您可以在本地或在生产环境中用一个命令运行 Typsense。</p>
<h4>设置简单</h4>
<p>Typesense 易于设置、管理、集成、操作和扩展。</p>
<h3 id="key-differences-similarities">主要差异和相似之处</h3>
<ul>
<li>Algolia 提供个性化和基于服务器的搜索分析。另一方面，Typesense 允许您在客户端创建搜索，并将搜索指标发送到您首选的 web 分析工具</li>
<li>Typesense 是完全开源的，这意味着你可以自己托管它(免费)或者使用它的托管 SaaS 产品 Typesense Cloud。Algolia 是一个专有的闭源选项</li>
<li>Typesense 和 Algolia 都提供了一个仪表板，你可以使用它来访问你的数据和索引配置，并监控你的搜索分析</li>
<li>Typesense 为可容纳在高达 24TB RAM 中的数据集提供即时搜索体验，而 Algolia 为最大 128GB 的数据集提供即时搜索体验</li>
<li>它们都提供自动完成、自动更正、允许输入错误、分面等功能</li>
</ul>
<h2 id="conclusion">结论</h2>
<p>搜索是一个重要的功能，在几乎每个现代应用程序中都很有用，尤其是在电子商务应用程序、文档、数据库和聊天应用程序中。</p>
<p>在 React 中创建一个输入友好的组件可能是一项非常困难的任务，尤其是如果您必须自己构建功能的话。然而，利用像 Algolia 和 Typesense 这样的搜索引擎服务可以减轻你的麻烦。</p>
<p>React 应用的最佳选择取决于您的使用案例。如果成本不是问题，Algolia 是一个很好的选择，而 Typesense 提供了一个开源版本，你可以免费自己托管。Algolia 和 Typesense 都被归类为搜索即服务工具，具有几个内置功能来改善整体用户体验。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用 LogRocket 消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款 React analytics 解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket 告诉您 React 应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS 异常、前端性能指标和用户交互。然后，LogRocket 使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的 React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试 LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>