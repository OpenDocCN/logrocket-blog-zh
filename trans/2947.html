<html>
<head>
<title>Test and debug Android apps like a pro with Charles Web Proxy - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用 Charles Web Proxy - LogRocket 博客像专家一样测试和调试 Android 应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/#0001-01-01">https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<p>测试和调试是任何好的应用程序开发生命周期的一部分。虽然有很多工具和库可以用来构建 Android 应用程序，但是当您考虑它所执行的功能时，Charles Web debugging proxy 是一个非常不错的选择。</p>
<p>使用这个工具，您可以减少花费在调试和解决问题上的时间。在我自己进行了几次尝试之后，我对我所能完成的事情以及我调试和解决问题的简单快捷印象深刻。</p>
<p>在本文中，您将了解 Charles Web Proxy 以及如何设置它。我们将讨论以下内容:</p>

<h2 id="what-is-charles-web-proxy">什么是查尔斯网络代理？</h2>
<p>据<a href="https://www.charlesproxy.com/" target="_blank" rel="noopener">查尔斯网代理网站</a>显示，查尔斯是</p>
<blockquote><p>一个 HTTP 代理/HTTP 监控/反向代理，使开发人员能够查看他们的机器和互联网之间的所有 HTTP 和 SSL/HTTPS 流量。这包括请求、响应和 HTTP 头，其中包含 cookies 和缓存信息。</p></blockquote>
<p>简而言之，Charles Web 调试代理是一个软件应用程序，它监视个人计算机上的网络活动，如网络请求和服务器响应。它会实时拦截和更改数据包。</p>
<p><img data-attachment-id="108109" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/charles-middle-man/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="charles-middle-man" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man.png" decoding="async" class="aligncenter size-full wp-image-108109 jetpack-lazy-image" src="../Images/0d22ba62f6c85b4d7cc2025e4305d5e9.png" alt="Charles Web Proxy serves as the middle man" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108109" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/charles-middle-man/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="charles-middle-man" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108109" src="../Images/0d22ba62f6c85b4d7cc2025e4305d5e9.png" alt="Charles Web Proxy serves as the middle man" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/charles-middle-man.png"/></noscript>
<h2 id="use-cases-consider-when-using-charles-web-proxy">使用 Charles Web 代理时要考虑的用例</h2>
<p>测试和调试可能会非常令人沮丧和疲惫。查尔斯的存在就是为了减少这种由工作引起的压力；有了 Charles，您可以快速诊断问题并实现快速修复。我将列出几个我觉得 Charles 很方便的用例。</p>
<h3 id="testing-feature-implementation-states">1.用状态测试功能实现</h3>
<p>一个典型的场景是，您依赖来自后端的值来确定客户端的某些行为。通常，您可以请求后端工程师进行更改，这是可行的。然而，这并不是一个流畅的过程——通常，你会在关于需要改变的讨论中结束，这降低了生产力。</p>
<p>有了 Charles，在响应被传送到客户端之前，您可以编辑网络响应到您选择的任何数据结构，以满足测试需求，并更有效地测试应用程序对不同状态的响应。</p>
<h3 id="api-endpoints-not-deployed-staging-server">2.API 端点未部署到临时服务器</h3>
<p>假设您正在开发一个需要向后端服务器发出请求的特性。您可能会因为后端工程师尚未将 API 端点部署到登台环境中而受阻。在这种情况下，你能做的最好的事情就是在等待后端满足你的需求的同时，起草一份 PR。这种方法效率不高，降低了生产率。</p>
<p>使用 Charles，您可以模拟业务需求中陈述的网络响应，以测试所做的工作。此外，你可以放心地准备一份公关审查。</p>
<h3 id="debugging-testing-errors">3.调试和测试错误</h3>
<p>构建移动应用程序时，不能忽略网络错误。它们是由网络请求引起的(即内部服务器错误)。测试您的客户端逻辑如何响应不同的网络错误响应可以加速开发。</p>
<p>您可以使用 Charles Web Proxy 方便地模拟这些响应。</p>
<p>概括地说，从上面的用例中，我们可以通过 Charles 实现以下目标:</p>
<ul>
<li>拦截和编辑网络请求和响应</li>
<li>模拟 HTTP 失败响应，如<code>Internal Server Error - 500, Bad Request (400)</code></li>
<li>从 JSON 文件加载 HTTP 响应</li>
</ul>
<h2 id="how-to-set-up-charles-web-proxy-with-android">如何用 Android 设置 Charles Web 代理</h2>
<p>我将概述在您的 PC 和 Android 设备上设置 Charles 的一些步骤。</p>
<h3 id="install-charles-pc">在你的电脑上安装查尔斯</h3>
<p>从<a href="https://www.charlesproxy.com/download/" target="_blank" rel="noopener">官网</a>下载最新版的查尔斯。如下图所示，您应该选择符合您电脑规格的文件。</p>
<figure id="attachment_108114" aria-describedby="caption-attachment-108114" class="wp-caption aligncenter"><img data-attachment-id="108114" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/download-latest-version-charles/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles.png" data-orig-size="730,279" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="download-latest-version-charles" data-image-description="" data-image-caption="&lt;p&gt;Download the latest version of Charles Web Proxy&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles-300x115.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles.png" decoding="async" class="size-full wp-image-108114 jetpack-lazy-image" src="../Images/1e1a8089b09b54b50525ce995452a8e2.png" alt="Download the latest version of Charles Web Proxy" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles-300x115.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108114" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/download-latest-version-charles/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles.png" data-orig-size="730,279" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="download-latest-version-charles" data-image-description="" data-image-caption="&lt;p&gt;Download the latest version of Charles Web Proxy&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles-300x115.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles.png" decoding="async" loading="lazy" class="size-full wp-image-108114" src="../Images/1e1a8089b09b54b50525ce995452a8e2.png" alt="Download the latest version of Charles Web Proxy" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles-300x115.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/download-latest-version-charles.png"/></noscript><figcaption id="caption-attachment-108114" class="wp-caption-text">Download the latest version of Charles Web Proxy</figcaption></figure>
<p>安装后，您将看到一个如下所示的窗口:</p>
<p><img data-attachment-id="108117" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/post-installation-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="post-installation-screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen.png" decoding="async" class="aligncenter size-full wp-image-108117 jetpack-lazy-image" src="../Images/349c419490f627fd5f2c7320fc70b9fa.png" alt="Post-installation screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108117" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/post-installation-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="post-installation-screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108117" src="../Images/349c419490f627fd5f2c7320fc70b9fa.png" alt="Post-installation screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/post-installation-screen.png"/></noscript>
<h3 id="enable-ssl-proxy-charles">在 Charles 上启用 SSL 代理</h3>
<p>SSL 代理拦截所有 SSL 请求，并以这样一种方式代理它们，即您可以以纯文本方式查看 SSL 请求和响应的内容，而不仅仅是查看加密文本。</p>
<p>为所有 HTTPS 连接设置代理，如下所示:</p>
<p><img data-attachment-id="108119" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/set-up-proxying-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="set-up-proxying-1" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1.png" decoding="async" class="aligncenter size-full wp-image-108119 jetpack-lazy-image" src="../Images/38fb2c3480893de290c958416c8f3c00.png" alt="First screen to set up the proxy" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108119" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/set-up-proxying-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="set-up-proxying-1" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108119" src="../Images/38fb2c3480893de290c958416c8f3c00.png" alt="First screen to set up the proxy" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-1.png"/></noscript>
<p><img data-attachment-id="108121" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/set-up-proxying-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="set-up-proxying-2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2.png" decoding="async" class="aligncenter size-full wp-image-108121 jetpack-lazy-image" src="../Images/bb78b66ed9a22d32e232ec63b4a483e2.png" alt="Second screen to set up the proxy" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108121" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/set-up-proxying-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="set-up-proxying-2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108121" src="../Images/bb78b66ed9a22d32e232ec63b4a483e2.png" alt="Second screen to set up the proxy" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-2.png"/></noscript>
<p><img data-attachment-id="108125" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/set-up-proxying-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="set-up-proxying-3" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3.png" decoding="async" class="aligncenter size-full wp-image-108125 jetpack-lazy-image" src="../Images/238cadb37b8af533b51248de9ca4d146.png" alt="Third and final screen to set up the proxy" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108125" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/set-up-proxying-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="set-up-proxying-3" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108125" src="../Images/238cadb37b8af533b51248de9ca4d146.png" alt="Third and final screen to set up the proxy" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/set-up-proxying-3.png"/></noscript>
<p>我们将主机定义为<code>*</code>，它告诉 Charles 拦截每个网络流量事件。端口设置为 443，表示主机是安全的— HTTPS 是 HTTP 的安全加密版本，所有 HTTPS web 流量都流向端口 443。</p>
<h3 id="configuring-android-device-use-charles-http-proxy">配置 Android 设备以使用 Charles 作为其 HTTP 代理</h3>
<p>Android 允许对每个无线网络进行代理配置。我们将使用从 Charles 帮助窗口中检索的 HTTP 代理设置将 PC 和 Android 设备连接到同一个网络。</p>
<p>从 Charles 帮助窗口中检索 HTTP 配置，如下:<br/> <img data-attachment-id="108128" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/retrieve-http-configuration-charles-help-window-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="retrieve-http-configuration-charles-help-window-1" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1.png" decoding="async" class="aligncenter size-full wp-image-108128 jetpack-lazy-image" src="../Images/28579cb053eee19a5b17695b99d51799.png" alt="Retrieve the HTTP configurations from Charles's Help window" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108128" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/retrieve-http-configuration-charles-help-window-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="retrieve-http-configuration-charles-help-window-1" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108128" src="../Images/28579cb053eee19a5b17695b99d51799.png" alt="Retrieve the HTTP configurations from Charles's Help window" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configuration-charles-help-window-1.png"/></noscript><br/>
<img data-attachment-id="108130" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/retrieve-http-configurations-charles-help-window-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="retrieve-http-configurations-charles-help-window-2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2.png" decoding="async" class="aligncenter size-full wp-image-108130 jetpack-lazy-image" src="../Images/101ddfe86ecf80b30177b593c0967787.png" alt="Retrieve the HTTP configurations from Charles's Help window" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108130" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/retrieve-http-configurations-charles-help-window-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="retrieve-http-configurations-charles-help-window-2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108130" src="../Images/101ddfe86ecf80b30177b593c0967787.png" alt="Retrieve the HTTP configurations from Charles's Help window" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/retrieve-http-configurations-charles-help-window-2.png"/></noscript>
<p>现在，在 Android 上设置代理设置。</p>
<figure id="attachment_108133" aria-describedby="caption-attachment-108133" class="wp-caption aligncenter"><img data-attachment-id="108133" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/steps-set-up-proxy-android/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="steps-set-up-proxy-android" data-image-description="" data-image-caption="&lt;p&gt;Step 1: Click the edit icon on the top right.&lt;br /&gt;&#10;Step 2: Under &lt;strong&gt;Proxy label&lt;/strong&gt;, click the dropdown icon to reveal more options&lt;br /&gt;&#10;3. Select &lt;strong&gt;Manual&lt;/strong&gt;&lt;br /&gt;&#10;4. Enter the HTTP config retrieved from the Charles help window&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android.png" decoding="async" class="size-full wp-image-108133 jetpack-lazy-image" src="../Images/c85871d80e9c651741445883a8474ccc.png" alt="There are four steps to setting up the proxy for Android" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android-300x167.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108133" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/steps-set-up-proxy-android/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="steps-set-up-proxy-android" data-image-description="" data-image-caption="&lt;p&gt;Step 1: Click the edit icon on the top right.&lt;br /&gt;&#10;Step 2: Under &lt;strong&gt;Proxy label&lt;/strong&gt;, click the dropdown icon to reveal more options&lt;br /&gt;&#10;3. Select &lt;strong&gt;Manual&lt;/strong&gt;&lt;br /&gt;&#10;4. Enter the HTTP config retrieved from the Charles help window&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android.png" decoding="async" loading="lazy" class="size-full wp-image-108133" src="../Images/c85871d80e9c651741445883a8474ccc.png" alt="There are four steps to setting up the proxy for Android" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android-300x167.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/steps-set-up-proxy-android.png"/></noscript><figcaption id="caption-attachment-108133" class="wp-caption-text">Step 1: Click the edit icon on the top right<br/>Step 2: Under <strong>Proxy label</strong>, click the dropdown icon to reveal more options<br/>Step 3: Select <strong>Manual</strong><br/>Step 4: Enter the HTTP config retrieved from the Charles help window</figcaption></figure>
<p>Charles 将提示您接受来自移动设备的连接。点击<strong>允许</strong>。<br/>T3】</p><noscript><img data-lazy-fallback="1" data-attachment-id="108138" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/accept-connection-mobile-device/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/accept-connection-mobile-device.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="accept-connection-mobile-device" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/accept-connection-mobile-device-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/accept-connection-mobile-device.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108138" src="../Images/eac59b6d48fe7fcbb42a36dd14784ba3.png" alt="Accept the connection from your mobile device" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/accept-connection-mobile-device.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/accept-connection-mobile-device-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/accept-connection-mobile-device.png"/></noscript>
<p>前往<code><a href="http://chls.pro/ssl" rel="nofollow">http://chls.pro/ssl</a></code>下载您的查尔斯证书，该证书将安装在您的 Android 设备上。</p>
<p>导航至<strong>设备设置</strong>，并按照下面的屏幕截图获取安装指南。</p>
<figure id="attachment_108143" aria-describedby="caption-attachment-108143" class="wp-caption aligncenter"><img data-attachment-id="108143" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/first-three-steps-for-installation-guide/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide.png" data-orig-size="730,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="first-three-steps-for-installation-guide" data-image-description="" data-image-caption="&lt;p&gt;Step 1: Click &lt;strong&gt;Security&lt;/strong&gt;&lt;br /&gt;&#10;Step 2: Click &lt;strong&gt;Encryption and Credentials&lt;/strong&gt;&lt;br /&gt;&#10;Step 3: Click &lt;strong&gt;Install a certificate&lt;/strong&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide-300x200.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide.png" decoding="async" class="size-full wp-image-108143 jetpack-lazy-image" src="../Images/00141e7ee970008e3131f7d4ddaa331d.png" alt="The first three steps of the installation guide" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide-300x200.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108143" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/first-three-steps-for-installation-guide/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide.png" data-orig-size="730,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="first-three-steps-for-installation-guide" data-image-description="" data-image-caption="&lt;p&gt;Step 1: Click &lt;strong&gt;Security&lt;/strong&gt;&lt;br /&gt;&#10;Step 2: Click &lt;strong&gt;Encryption and Credentials&lt;/strong&gt;&lt;br /&gt;&#10;Step 3: Click &lt;strong&gt;Install a certificate&lt;/strong&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide-300x200.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide.png" decoding="async" loading="lazy" class="size-full wp-image-108143" src="../Images/00141e7ee970008e3131f7d4ddaa331d.png" alt="The first three steps of the installation guide" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide-300x200.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/first-three-steps-for-installation-guide.png"/></noscript><figcaption id="caption-attachment-108143" class="wp-caption-text">Step 1: Click <strong>Security</strong><br/>Step 2: Click <strong>Encryption and Credentials</strong><br/>Step 3: Click <strong>Install a certificate</strong></figcaption></figure>
<figure id="attachment_108145" aria-describedby="caption-attachment-108145" class="wp-caption aligncenter"><img data-attachment-id="108145" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/last-three-steps-for-installation-guide/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide.png" data-orig-size="730,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="last-three-steps-for-installation-guide" data-image-description="" data-image-caption="&lt;p&gt;Step 4: Select &lt;strong&gt;CA certificate&lt;/strong&gt;&lt;br /&gt;&#10;Step 5: Click &lt;strong&gt;Install anyway&lt;/strong&gt;&lt;br /&gt;&#10;Step 6: Select the Charles cert dowloaded in previous steps&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide-300x200.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide.png" decoding="async" class="size-full wp-image-108145 jetpack-lazy-image" src="../Images/410fbfe97dec977e7351cfb9c4aa2321.png" alt="The final three steps of the installation guide" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide-300x200.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108145" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/last-three-steps-for-installation-guide/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide.png" data-orig-size="730,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="last-three-steps-for-installation-guide" data-image-description="" data-image-caption="&lt;p&gt;Step 4: Select &lt;strong&gt;CA certificate&lt;/strong&gt;&lt;br /&gt;&#10;Step 5: Click &lt;strong&gt;Install anyway&lt;/strong&gt;&lt;br /&gt;&#10;Step 6: Select the Charles cert dowloaded in previous steps&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide-300x200.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide.png" decoding="async" loading="lazy" class="size-full wp-image-108145" src="../Images/410fbfe97dec977e7351cfb9c4aa2321.png" alt="The final three steps of the installation guide" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide-300x200.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/last-three-steps-for-installation-guide.png"/></noscript><figcaption id="caption-attachment-108145" class="wp-caption-text">Step 4: Select <strong>CA certificate</strong><br/>Step 5: Click <strong>Install anyway</strong><br/>Step 6: Select the Charles cert dowloaded in previous steps</figcaption></figure>
<p>完成这些步骤后，Charles 应该开始拦截来自您的移动应用程序的网络流量。</p>
<h2 id="debugging-android-project-with-charles-web-proxy">使用 Charles Web 代理调试 Android 项目</h2>
<p>我们在上面配置的代理将被 web 浏览器使用，但可能不会被其他应用程序使用。您需要向您的应用程序添加配置，以便让它信任由 Charles SSL 代理生成的 SSL 证书。</p>
<p>为了配置您的应用程序以信任 Charles，您需要向您的应用程序添加一个<a href="https://developer.android.com/training/articles/security-config.html" target="_blank" rel="noopener">网络安全配置文件</a>。该文件可以覆盖系统默认值，使您的应用程序能够信任用户安装的 CA 证书(例如，Charles 根证书)。您可以指定这只应用于应用程序的调试版本，以便生产版本使用默认的信任配置文件。你可以在 Charles 的网站的<a href="https://www.charlesproxy.com/documentation/using-charles/ssl-certificates/" target="_blank" rel="noopener"> SSL 证书部分了解更多信息。</a></p>
<p>将一个<code>network_security_config.xml</code>文件添加到应用程序的<code>res/xml/</code>文件夹中:</p>
<pre class="language-xml hljs">&lt;network-security-config&gt; 
  &lt;debug-overrides&gt; 
    &lt;trust-anchors&gt; 
      &lt;!-- Trust user added CAs while debuggable only --&gt;
      &lt;certificates src="user" /&gt; 
    &lt;/trust-anchors&gt; 
  &lt;/debug-overrides&gt; 
&lt;/network-security-config&gt;
</pre>
<p>在应用程序的<code>Manifest.xml</code>文件中指定网络配置设置。</p>
<pre class="language-xml hljs">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest ... &gt;
    &lt;application android:networkSecurityConfig="@xml/network_security_config" ... &gt;
        ...
    &lt;/application&gt;
&lt;/manifest&gt;
</pre>
<p>我们已经准备好开始使用 Charles 来代理来自我们移动应用程序的流量。</p>
<p>出于本文的目的，接下来我将使用一个电影浏览器 Android 项目来演示我们之前强调的用例。从<a href="https://github.com/enyason/Emovie" target="_blank" rel="noopener"> my GitHub repo </a>中克隆项目。</p>
<h2 id="testing-app-behavior-when-internal-server-error-thrown-by-server">当服务器引发内部服务器错误时测试应用程序行为</h2>
<p>在编写软件时，您希望采用<a href="https://en.wikipedia.org/wiki/Defensive_programming" target="_blank" rel="noopener">防御编程</a>方法，以避免在生产中出现意外的结果，比如确保您的应用程序能够像处理 500 内部服务器错误一样优雅地处理网络错误。</p>
<p>出于以下原因，让您的后端工程师在端点上强制执行 500 服务器错误并不是运行此测试的好方法:</p>
<ol>
<li>使用此端点的其他设备可能会被阻止，因为该端点出现故障</li>
<li>开发人员可能会忘记恢复更改，这甚至会在生产级别引起问题</li>
<li>它降低了生产率</li>
</ol>
<p>记住这些，我们将依靠 Charles 和<a href="https://httpstat.us/" target="_blank" rel="noopener"> httpstat </a>为我们的移动应用模拟一个 500 内部服务器错误。</p>
<h3 id="mocking-error-response">模仿错误响应</h3>
<p>在我们继续模拟错误响应之前，请确保您可以拦截并解密来自<a href="https://www.themoviedb.org/documentation/api" target="_blank" rel="noopener"> TMDB API </a>的响应。如果设置正确，您应该会看到类似下面的截图:</p>
<p><img data-attachment-id="108201" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/correct-decryption-tmdb-api-response/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="correct-decryption-tmdb-api-response" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response.png" decoding="async" class="aligncenter size-full wp-image-108201 jetpack-lazy-image" src="../Images/e0fe6aaf6268855931255da9ddfc7277.png" alt="A correctly decrypted TMDB API response" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108201" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/correct-decryption-tmdb-api-response/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="correct-decryption-tmdb-api-response" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108201" src="../Images/e0fe6aaf6268855931255da9ddfc7277.png" alt="A correctly decrypted TMDB API response" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/correct-decryption-tmdb-api-response.png"/></noscript>
<p>然后，我们可以将 API 响应映射到 Remote，如下所示:</p>
<p><img data-attachment-id="108203" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/map-api-response-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="map-api-response-1" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1.png" decoding="async" class="aligncenter size-full wp-image-108203 jetpack-lazy-image" src="../Images/542dcb7eaa695d032e530d59f41f7ef0.png" alt="Map the API response" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108203" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/map-api-response-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="map-api-response-1" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108203" src="../Images/542dcb7eaa695d032e530d59f41f7ef0.png" alt="Map the API response" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-1.png"/></noscript>
<p><img data-attachment-id="108205" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/map-api-response-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="map-api-response-2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2.png" decoding="async" class="aligncenter size-full wp-image-108205 jetpack-lazy-image" src="../Images/3e9e83383166e341ad8d5e7b73fd74fc.png" alt="Edit your map settings and click OK" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108205" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/map-api-response-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="map-api-response-2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108205" src="../Images/3e9e83383166e341ad8d5e7b73fd74fc.png" alt="Edit your map settings and click OK" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/map-api-response-2.png"/></noscript>
<p>保存此设置，并从您的应用程序再次触发 API 调用。您应该看到视图结构中列出的<code><a href="https://httpstat.us/" rel="nofollow">https://httpstat.us/</a></code>,如下所示:</p>
<p><img data-attachment-id="108207" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/httpstat-listed-view-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="httpstat-listed-view-structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure.png" decoding="async" class="aligncenter size-full wp-image-108207 jetpack-lazy-image" src="../Images/549b4f253c39b62325454f0ebe849bdc.png" alt="httpstat is listed in the view structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108207" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/httpstat-listed-view-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="httpstat-listed-view-structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108207" src="../Images/549b4f253c39b62325454f0ebe849bdc.png" alt="httpstat is listed in the view structure" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/httpstat-listed-view-structure.png"/></noscript>
<p>基本上，我们已经指示 Charles 拦截对<a href="https://api.themoviedb.org/3/discover/movie?release_date.gte=2021&amp;api_key=1cbad9b5142e8231f3c5a6d49bb8be0a" target="_blank" rel="noopener"> <code>https://api.themoviedb.org</code> </a>的任何请求，并将来自<code><a href="https://httpstat.us/500" rel="nofollow">https://httpstat.us/500</a></code>的响应传递到移动设备，而不是来自<code><a href="https://api.themoviedb.org/3/discover/movierelease_date.gte=2021&amp;api_key=1cbad9b5142e8231f3c5a6d49bb8be0a" rel="nofollow">https://api.themoviedb.org/3/discover/movierelease_date.gte=2021&amp;api_key=1cbad9b5142e8231f3c5a6d49bb8be0a</a></code>的原始响应。</p>
<p>在下面的截图中，我显示了一条提示消息，通知用户服务器出错。</p>
<figure id="attachment_108209" aria-describedby="caption-attachment-108209" class="wp-caption aligncenter"><img data-attachment-id="108209" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/http-500-toast/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast.png" data-orig-size="730,1622" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="http-500-toast" data-image-description="" data-image-caption="&lt;p&gt;Displaying the HTTP 500 server error in a toast message at the bottom of the screen&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast-135x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast-461x1024.png" decoding="async" class="size-full wp-image-108209 jetpack-lazy-image" src="../Images/8115a7fffcc5b788b8f56b4811cec8dc.png" alt="Displaying the HTTP 500 server error in a toast message" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast-135x300.png 135w, https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast-461x1024.png 461w, https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast-691x1536.png 691w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108209" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/http-500-toast/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast.png" data-orig-size="730,1622" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="http-500-toast" data-image-description="" data-image-caption="&lt;p&gt;Displaying the HTTP 500 server error in a toast message at the bottom of the screen&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast-135x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast-461x1024.png" decoding="async" loading="lazy" class="size-full wp-image-108209" src="../Images/8115a7fffcc5b788b8f56b4811cec8dc.png" alt="Displaying the HTTP 500 server error in a toast message" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast-135x300.png 135w, https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast-461x1024.png 461w, https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast-691x1536.png 691w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/http-500-toast.png"/></noscript><figcaption id="caption-attachment-108209" class="wp-caption-text">Displaying the HTTP 500 server error in a toast message at the bottom of the screen</figcaption></figure>
<p>瞧啊！我们已经成功地模拟了一个内部服务器错误，而不需要关闭 TMDB 服务器。😀</p>
<h2 id="testing-client-side-app-logic-with-mock-web-responses">使用模拟 web 响应测试客户端应用程序逻辑</h2>
<p>除了<strong>地图遥控</strong>，还有一个对应的功能，<strong>地图本地</strong>。它们具有相似的功能，但是它们之间的区别在于提供响应的位置。前者从在线服务器返回响应，而后者通过 JSON 文件从本地机器提供响应。</p>
<p>当端点未准备好使用时，此功能对于测试客户端应用程序功能非常方便。<br/>使用 Map Remote 时概述的以下步骤适用于使用 Map Local。</p>
<p>不要选择<strong> Map Remote </strong>，而是选择<strong> Map Local </strong>并使用本地机器上的 JSON 文件。参见以下截图，以供参考:</p>
<figure id="attachment_108214" aria-describedby="caption-attachment-108214" class="wp-caption aligncenter"><img data-attachment-id="108214" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/map-local-settings-click-add/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="map-local-settings-click-add" data-image-description="" data-image-caption="&lt;p&gt;Under &lt;strong&gt;Map Local Settings&lt;/strong&gt;, click &lt;strong&gt;Add&lt;/strong&gt; &lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add.png" decoding="async" class="size-full wp-image-108214 jetpack-lazy-image" src="../Images/5e93a879a95fc5e9ef60834de89dae30.png" alt="Under Map Local Settings, click Add " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108214" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/map-local-settings-click-add/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="map-local-settings-click-add" data-image-description="" data-image-caption="&lt;p&gt;Under &lt;strong&gt;Map Local Settings&lt;/strong&gt;, click &lt;strong&gt;Add&lt;/strong&gt; &lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add.png" decoding="async" loading="lazy" class="size-full wp-image-108214" src="../Images/5e93a879a95fc5e9ef60834de89dae30.png" alt="Under Map Local Settings, click Add " srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/map-local-settings-click-add.png"/></noscript><figcaption id="caption-attachment-108214" class="wp-caption-text">Under <strong>Map Local Settings</strong>, click <strong>Add</strong></figcaption></figure>
<p><img data-attachment-id="108212" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/choose-file-pc/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="choose-file-pc" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc.png" decoding="async" class="aligncenter size-full wp-image-108212 jetpack-lazy-image" src="../Images/d193782bcc419b8190ab7961f378c4c4.png" alt="Choose the file from your PC" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="108212" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/choose-file-pc/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="choose-file-pc" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-108212" src="../Images/d193782bcc419b8190ab7961f378c4c4.png" alt="Choose the file from your PC" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/choose-file-pc.png"/></noscript>
<figure id="attachment_108216" aria-describedby="caption-attachment-108216" class="wp-caption aligncenter"><img data-attachment-id="108216" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/use-map-local-instead-map-remote/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="use-map-local-instead-map-remote" data-image-description="" data-image-caption="&lt;p&gt;Select &lt;strong&gt;Map Local&lt;/strong&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote.png" decoding="async" class="size-full wp-image-108216 jetpack-lazy-image" src="../Images/617a404d32e918fd7ab3d000a3ac2ac9.png" alt="How to use map local instead of map remote" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108216" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/use-map-local-instead-map-remote/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="use-map-local-instead-map-remote" data-image-description="" data-image-caption="&lt;p&gt;Select &lt;strong&gt;Map Local&lt;/strong&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote.png" decoding="async" loading="lazy" class="size-full wp-image-108216" src="../Images/617a404d32e918fd7ab3d000a3ac2ac9.png" alt="How to use map local instead of map remote" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/use-map-local-instead-map-remote.png"/></noscript><figcaption id="caption-attachment-108216" class="wp-caption-text">Select <strong>Map Local</strong></figcaption></figure>
<h3 id="using-breakpoints">使用断点</h3>
<p>断点！是啊，没错。您可以真正地实时暂停网络请求和响应，并对它们进行编辑。然后，您的客户端应用程序将接收来自 Charles 的经过编辑的响应——与您在 Android Studio 中放置断点的方式相同，但这更加复杂，因为您可以操纵数据。</p>
<p>请参见下面的屏幕截图，了解如何在网络请求上设置断点:</p>
<figure id="attachment_108219" aria-describedby="caption-attachment-108219" class="wp-caption aligncenter"><img data-attachment-id="108219" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/click-request-select-breakpoints/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints.png" data-orig-size="730,475" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="click-request-select-breakpoints" data-image-description="" data-image-caption="&lt;p&gt;Click a request and select &lt;strong&gt;Breakpoints&lt;/strong&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints.png" decoding="async" class="size-full wp-image-108219 jetpack-lazy-image" src="../Images/a3d902b6c40df7c325bd9b9716caeb30.png" alt="Click a request and select Breakpoints" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108219" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/click-request-select-breakpoints/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints.png" data-orig-size="730,475" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="click-request-select-breakpoints" data-image-description="" data-image-caption="&lt;p&gt;Click a request and select &lt;strong&gt;Breakpoints&lt;/strong&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints.png" decoding="async" loading="lazy" class="size-full wp-image-108219" src="../Images/a3d902b6c40df7c325bd9b9716caeb30.png" alt="Click a request and select Breakpoints" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/click-request-select-breakpoints.png"/></noscript><figcaption id="caption-attachment-108219" class="wp-caption-text">Click a request and select <strong>Breakpoints</strong></figcaption></figure>
<figure id="attachment_108221" aria-describedby="caption-attachment-108221" class="wp-caption aligncenter"><img data-attachment-id="108221" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/edit-request-click-execute/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute.png" data-orig-size="720,468" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="edit-request-click-execute" data-image-description="" data-image-caption="&lt;p&gt;Edit the request and click &lt;strong&gt;Execute&lt;/strong&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute.png" decoding="async" class="size-full wp-image-108221 jetpack-lazy-image" src="../Images/266b692ec986b42f8c587bebd9c00d68.png" alt="Edit the request and click Execute" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute.png 720w, https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute-300x195.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108221" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/edit-request-click-execute/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute.png" data-orig-size="720,468" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="edit-request-click-execute" data-image-description="" data-image-caption="&lt;p&gt;Edit the request and click &lt;strong&gt;Execute&lt;/strong&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute.png" decoding="async" loading="lazy" class="size-full wp-image-108221" src="../Images/266b692ec986b42f8c587bebd9c00d68.png" alt="Edit the request and click Execute" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute.png 720w, https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute-300x195.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-request-click-execute.png"/></noscript><figcaption id="caption-attachment-108221" class="wp-caption-text">Edit the request and click <strong>Execute</strong></figcaption></figure>
<figure id="attachment_108223" aria-describedby="caption-attachment-108223" class="wp-caption aligncenter"><img data-attachment-id="108223" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/edit-response-click-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request.png" data-orig-size="730,475" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="edit-response-click-request" data-image-description="" data-image-caption="&lt;p&gt;Edit the response and click &lt;strong&gt;Request&lt;/strong&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request.png" decoding="async" class="size-full wp-image-108223 jetpack-lazy-image" src="../Images/16b9ab1c12fa59663286aec5409068b5.png" alt="Edit the response and click Request" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="108223" data-permalink="https://blog.logrocket.com/test-debug-android-apps-with-charles-web-proxy/edit-response-click-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request.png" data-orig-size="730,475" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="edit-response-click-request" data-image-description="" data-image-caption="&lt;p&gt;Edit the response and click &lt;strong&gt;Request&lt;/strong&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request.png" decoding="async" loading="lazy" class="size-full wp-image-108223" src="../Images/16b9ab1c12fa59663286aec5409068b5.png" alt="Edit the response and click Request" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/edit-response-click-request.png"/></noscript><figcaption id="caption-attachment-108223" class="wp-caption-text">Edit the response and click <strong>Request</strong></figcaption></figure>
<p>对 Charles 使用断点将按照图像出现的顺序进行。</p>
<h2 id="conclusion">结论</h2>
<p>查尔斯网络代理是一个非常方便的软件开发工具。特别是在 Android 上，我们可以操纵响应数据来表示不同的<code>ViewStates</code>，从而加快开发和测试。</p>
<p>如果你坚持到底，干得好！让我在评论区听到你对这个工具的想法。谢谢大家！</p><div class="code-block code-block-2">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket 会告诉您应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket 自动聚合客户端错误、JS 异常、前端性能指标和用户交互。然后 LogRocket 使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的 bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试 LogRocket】。</a></p><div class="code-block code-block-32">
<div class="blog-plug inline-plug kotlin-plug"><h2>LogRocket :即时重现你的安卓应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/kotlin-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/b5ae4bd0ecde7aa9d5288746416d5e18.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-plug_android-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-plug_android-1.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/b5ae4bd0ecde7aa9d5288746416d5e18.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-plug_android-1.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/kotlin-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 Android 监控解决方案，可以帮助您即时重现问题，确定 bug 的优先级，并了解您的 Android 应用程序的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 Android 应用程序— <a class="signup" href="hhttps://lp.logrocket.com/blg/kotlin-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>