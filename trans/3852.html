<html>
<head>
<title>Using Riot.js, a component-based UI library </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用Riot.js，一个基于组件的UI库</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-riot-js-component-based-ui-library/#0001-01-01">https://blog.logrocket.com/using-riot-js-component-based-ui-library/#0001-01-01</a></blockquote><div><article class="article-post">
<p>现在有很多JavaScript框架，其中一些比另一些更适合开发的某些方面。选择哪种框架实际上取决于项目的具体需求。</p>
<p><a href="https://riot.js.org">暴动</a> <a href="https://riot.js.org">。js </a>的设计是轻量级的，易于学习，对于熟悉HTML和JavaScript的开发人员来说，这是一个很好的选择——不需要他们学习使用特定框架编码的严格要求。Riot.js强调简单性、性能和模块化，其生态系统允许轻松集成第三方库和组件，使其适用于小型和大型项目。</p>
<p>在本教程中，我们将深入研究Riot.js，将其与本机<a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components"> Web组件API、</a>进行比较，并演示如何使用Riot.js构建一个简单的SPA。</p>
<p><em>向前跳转:</em></p>

<h2 id="prerequisites">先决条件</h2>
<p>要理解本文的教程部分，您应该具备:</p>
<ul>
<li>安装在本地计算机上的Node.js v14或更高版本</li>
<li>HTML、CSS、JavaScript和DOM的基础知识</li>
</ul>
<h2 id="what-riot-js">Riot.js是什么？</h2>
<p>Riot.js是一个轻量级的、基于组件的UI库，用于开发web应用程序。Riot.js类似于其他流行的JavaScript库和框架，如React、Angular和Vue.js，这使它更容易学习。尽管Riot.js使用与这些框架相同的基于组件的方法，但它的目标是更小、更易于使用，专注于简单性和灵活性。</p>
<p>Riot.js使用自定义标签，结合HTML和JavaScript形成可重用组件。使用Riot.js，开发人员可以轻松地使用API特性操作DOM，并将数据绑定到模板。</p>
<p>Riot.js的一些关键特性包括:</p>
<ul>
<li><strong>声明性组件语法</strong>:允许开发者将UI元素定义为独立的、可重用的模块</li>
<li><strong>强大的模板系统</strong>:允许开发者使用类似HTML的模板语言定义组件的结构和内容</li>
<li><strong>内置虚拟DOM </strong>:允许Riot.js高效地更新UI以响应数据变化</li>
<li><strong>支持定制标签和属性</strong>:使开发者能够扩展Riot.js的功能并创建定制UI元素</li>
<li>灵活和可扩展的API :允许开发者定制和扩展Riot.js的功能，以满足他们特定项目的需求</li>
<li><strong>强大的社区支持</strong>:riot . js开源库由开发者社区积极维护和支持</li>
<li><strong>兼容现代浏览器</strong>:可与其他库和框架一起使用，构建交互式网络应用</li>
</ul>
<h2 id="why-use-riot-js">为什么要用Riot.js？</h2>
<p>对于想要一个简单、轻量、灵活的库来开发用户界面的开发人员来说，Riot.js是一个极好的选择。它特别适合于关注性能和优化的应用程序，以及开发人员希望灵活地选择和利用他们选择的工具或库的应用程序。</p>
<p>以下是您应该考虑使用Riot.js的一些具体原因:</p>
<ul>
<li><strong>简单的学习曲线</strong>:利用组件风格的方法，代码基数小，易于使用；开发人员可以不受限制地自由集成他们自己的工具或库</li>
<li>定制元素:开发人员可以很容易地使用标签来创建定制组件，这些组件可以在应用程序的任何地方重用</li>
<li><strong>可嵌入HTML </strong>:使Riot.js能够轻松集成到现有项目中</li>
<li>轻量级和快速的:这个JavaScript框架适合于那些不需要在浏览器中投入太多工作就能提高性能和速度的项目</li>
</ul>
<h2 id="riot-js-vs-web-components-api">Riot.js与Web组件API</h2>
<p>Riot在基本层面上非常类似于web组件API，这是一组标准化的API，允许开发人员为Web创建可重用的模块化组件。</p>
<p>Web组件API由三种主要技术组成:</p>
<ul>
<li><strong>定制元素</strong>:JavaScript API集合，支持定制元素的定义及其在用户界面中的行为</li>
<li><strong> Shadow DOM </strong>:一组JavaScript APIs，用于将封装的“影子”DOM树附加到与主文档DOM分开呈现的元素上，并对其进行控制。这允许你保持一个元素的特性私有，所以它们可以被脚本化和样式化，而不用担心与其他文档部分冲突</li>
<li><strong> HTML模板</strong> : <code>&lt;template&gt;</code>和<code>&lt;slot&gt;</code>元素使您能够创建不会出现在呈现页面上的标记模板；它们也可以作为定制元素结构的基础被重用</li>
</ul>
<p>Riot.js和Web Components都致力于简化可重用和模块化Web组件的开发，但它们使用的方法有很大不同。Web Components使用标准化的API来构造独特的元素并将它们附加到DOM，而Riot.js使用模板语法和有限的一组指令来定义组件。</p>
<h2 id="riot-js-spa-demo">Riot.js SPA演示</h2>
<p>为了更好地理解Riot.js是如何工作的，让我们构建一个简单的SPA，它由一页引文组成。我们将从建立项目开始。</p>
<h3 id="setting-up-project">设置项目</h3>
<p>要在本地计算机上创建Riot.js项目，请在本地计算机上导航到您选择的目录，打开CLI窗口，然后输入以下命令:</p>
<pre class="language-bash hljs">npm install -g riot webpack webpack-cli webpack-dev-server
</pre>
<p>安装完成后，使用提供的模板创建一个Riot实例:</p>
<pre class="language-bash hljs">npm init riot
</pre>
<p>对于本教程，我们将使用SPA模板(<code>webpack-spa</code>):</p>
<p><img data-attachment-id="156106" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/riot-js-spa-template/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template.png" data-orig-size="720,300" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Riot.js SPA template" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template-300x125.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template.png" decoding="async" class="aligncenter wp-image-156106 size-full jetpack-lazy-image" src="../Images/5d87c8f0800f217c886bd30e97d40b80.png" alt="Riot.js SPA Template" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template.png 720w, https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template-300x125.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156106" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/riot-js-spa-template/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template.png" data-orig-size="720,300" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Riot.js SPA template" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template-300x125.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template.png" decoding="async" loading="lazy" class="aligncenter wp-image-156106 size-full" src="../Images/5d87c8f0800f217c886bd30e97d40b80.png" alt="Riot.js SPA Template" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template.png 720w, https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template-300x125.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-spa-template.png"/></noscript>
<p>选择模板后，将在目录中创建一个Riot.js项目文件夹，其中包含创建Riot.js应用程序所需的所有依赖项。</p>
<p>在您选择的代码编辑器中打开新创建的项目。在这个Riot.js项目文件夹中，您应该会看到一个类似如下的树结构:</p>
<pre class="language-javascript hljs">     ┣ 📂src
     ┃ ┣ 📂components
     ┃ ┃ ┣ 📂global
     ┃ ┃ ┃ ┣ 📂my-component
     ┃ ┃ ┃ ┃ ┣ 📜my-component.riot
     ┃ ┃ ┃ ┃ ┗ 📜my-component.spec.js
     ┃ ┃ ┃ ┗ 📂sidebar
     ┃ ┃ ┃ ┃ ┣ 📜sidebar.riot
     ┃ ┃ ┃ ┃ ┗ 📜sidebar.spec.js
     ┃ ┃ ┗ 📂includes
     ┃ ┃ ┃ ┣ 📂loader
     ┃ ┃ ┃ ┃ ┗ 📜loader.riot
     ┃ ┃ ┃ ┗ 📂user
     ┃ ┃ ┃ ┃ ┣ 📜user.riot
     ┃ ┃ ┃ ┃ ┗ 📜user.spec.js
     ┃ ┣ 📂pages
     ┃ ┃ ┣ 📜about.riot
     ┃ ┃ ┣ 📜home.riot
     ┃ ┃ ┗ 📜not-found.riot
     ┃ ┣ 📜app.riot
     ┃ ┣ 📜index.html
     ┃ ┣ 📜index.js
     ┃ ┣ 📜pages.js
     ┃ ┗ 📜register-global-components.js
     ┣ 📜.gitignore
     ┣ 📜LICENSE
     ┣ 📜package-lock.json
     ┣ 📜package.json
     ┣ 📜readme.md
     ┗ 📜webpack.config.js
</pre>
<p>这里，我们的应用程序的根是<code>index.html</code>，主要组件将被安装在<code>app.riot</code>组件中。在<code>pages</code>目录中指定了三条路线，组成这些页面的组件在<code>components</code>文件夹中。</p>
<p>要运行应用程序，请在CLI中输入<code>npm start</code>命令。这将启动应用程序，并在浏览器中产生以下结果:</p>
<p><img data-attachment-id="156109" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/riot-js-simple-app-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage.png" data-orig-size="720,323" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Riot.js simple app homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage-300x135.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage.png" decoding="async" class="aligncenter wp-image-156109 size-full jetpack-lazy-image" src="../Images/1ddb851e62c47d40f28330e5d6224051.png" alt="Riot.js Simple App Homepage" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage.png 720w, https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage-300x135.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156109" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/riot-js-simple-app-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage.png" data-orig-size="720,323" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Riot.js simple app homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage-300x135.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage.png" decoding="async" loading="lazy" class="aligncenter wp-image-156109 size-full" src="../Images/1ddb851e62c47d40f28330e5d6224051.png" alt="Riot.js Simple App Homepage" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage.png 720w, https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage-300x135.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-simple-app-homepage.png"/></noscript>
<h3 id="creating-quotes-page">创建报价页面</h3>
<p>要开始构建我们的报价应用程序，我们需要创建一个新的报价页面来获取报价并显示它们。</p>
<p>首先创建一个新文件，<code>./src/pages/quotes.riot</code>:</p>
<pre class="language-javascript hljs">    &lt;quotes&gt;
        &lt;section&gt;
            &lt;header&gt;
                &lt;h1&gt;Quotes&lt;/h1&gt;
            &lt;/header&gt;
            &lt;ul class="quotes-list"&gt;
                &lt;li class="list-item"&gt;
                    &lt;p class=" quote"&gt; "I am not a product of my circumstances. I am a product of my decisions." &lt;/p&gt;
                    &lt;p class="author"&gt;- Stephen Covey&lt;/p&gt;
                &lt;/li&gt;
                &lt;li class="list-item"&gt;
                    &lt;p class=" quote"&gt; "The best way to predict the future is to create it." &lt;/p&gt;
                    &lt;p class="author"&gt;- Peter Drucker&lt;/p&gt;
                &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/section&gt;
    &lt;/quotes&gt;
</pre>
<p>这里，我们对报价进行硬编码，以便快速为这个新页面设置路由配置。</p>
<h3 id="adding-quotes-page-component">添加报价页面组件</h3>
<p>为了将报价页面组件添加到<code>app.riot</code>，首先我们需要将报价页面注册为我们的<code>./src/app.riot</code>文件中的一个组件:</p>
<pre class="language-javascript hljs">    &lt;app&gt;
      &lt;div class="container"&gt;
        &lt;!-- ... --&gt;
      &lt;/div&gt;
      &lt;script&gt;
        // ...
        export default {
          components: {
            // ...

            // register quotes page
            Quotes: lazy(Loader, () =&gt; import (
              /* webpackPrefetch: true, webpackChunkName: 'pages/quotes' */
              './pages/quotes.riot'
            ))
          },

          // ...
        }
      &lt;/script&gt;
    &lt;/app&gt;
</pre>
<p>接下来，我们使用<code>./src/pages.js</code>文件将<code>/quotes</code>路径分配给页面组件，如下所示:</p>
<pre class="language-javascript hljs">    export default [{
      path: '/',
      label: 'Home',
      componentName: 'home'
    }, {
      path: '/about',
      label: 'About',
      componentName: 'about'
    }, {
      path: '/quotes',
      label: 'Quotes',
      componentName: 'quotes'
    }]
</pre>
<p>现在，如果我们在浏览器上导航到<code><a href="http://localhost:3000/quotes" rel="nofollow">http://localhost:3000/quotes</a></code>，我们应该会看到类似这样的内容:</p>
<p><img data-attachment-id="156112" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/riot-js-app-quotes-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component.png" data-orig-size="720,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Riot.js app quotes component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component.png" decoding="async" class="aligncenter wp-image-156112 size-full jetpack-lazy-image" src="../Images/cd8417e87835fc3b666684e1d4c631ff.png" alt="Riot.js App Quotes Component" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component.png 720w, https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component-300x167.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156112" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/riot-js-app-quotes-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component.png" data-orig-size="720,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Riot.js app quotes component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component.png" decoding="async" loading="lazy" class="aligncenter wp-image-156112 size-full" src="../Images/cd8417e87835fc3b666684e1d4c631ff.png" alt="Riot.js App Quotes Component" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component.png 720w, https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component-300x167.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-app-quotes-component.png"/></noscript>
<p>厉害！</p>
<h3 id="fetching-quotes-data">获取报价数据</h3>
<p>接下来，我们将使用<a href="https://dummyjson.com/"> DummyJSON </a>公开可用的API，<code><a href="https://dummyjson.com/quotes" rel="nofollow">https://dummyjson.com/quotes</a></code>获取报价数据。</p>
<p>首先，我们将在组件中创建一个具有<code>quotes</code>属性的<code>state</code>对象。然后我们将创建一个<code>async</code>函数<code>getQuotes()</code>，它将使用本机<a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">获取API </a>来获取报价。</p>
<p>我们将从<code>onBeforeMount()</code>生命周期钩子中调用<code>getQuotes()</code>函数，在组件挂载之前获取报价。下面是我们如何在<code>./src/pages/quotes.riot</code>中实现这一目标:</p>
<pre class="language-javascript hljs">    &lt;quotes&gt;
      &lt;section&gt;
        &lt;!-- ... --&gt;
      &lt;/section&gt;
      &lt;script&gt;
        export default {
          state: {
            quotes: [],
          },
          async getQuotes() {
            try {
              const res = await fetch(`https://dummyjson.com/quotes`);
              const data = await res.json();
              this.update({ quotes: data.quotes });
              console.log({ quotes: this.state.quotes });
            } catch (error) {
              console.log({ error });
            }
          },
          async onBeforeMount({ isServer }) {
            await this.getQuotes();
          },
        };
      &lt;/script&gt;
    &lt;/quotes&gt;
</pre>
<p>如果我们保存我们的更改并检查我们的控制台，我们应该看到我们的报价:</p>
<p><img data-attachment-id="156115" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/quotes-console-riot-js-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app.png" data-orig-size="720,186" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Quotes console Riot.js app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app-300x78.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app.png" decoding="async" class="aligncenter wp-image-156115 size-full jetpack-lazy-image" src="../Images/3d5399e2d5cdf4dc37f81bc0357a8dc8.png" alt="Quotes Console Riot.js App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app.png 720w, https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app-300x78.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156115" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/quotes-console-riot-js-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app.png" data-orig-size="720,186" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Quotes console Riot.js app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app-300x78.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app.png" decoding="async" loading="lazy" class="aligncenter wp-image-156115 size-full" src="../Images/3d5399e2d5cdf4dc37f81bc0357a8dc8.png" alt="Quotes Console Riot.js App" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app.png 720w, https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app-300x78.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/quotes-console-riot-js-app.png"/></noscript>
<h3 id="creating-quotes-component">创建报价组件</h3>
<p>现在，我们需要创建一个组件来显示报价数组中的每个报价。</p>
<p>要创建报价组件，请创建一个新文件，<code>./src/components/quote/quote.riot</code>:</p>
<pre class="language-javascript hljs">    &lt;quote&gt;
      &lt;article class="quote"&gt;
        &lt;h3&gt;{props.quote}&lt;/h3&gt;
        &lt;p&gt;&amp;mdash; {props.author}&lt;/p&gt;
      &lt;/article&gt;
    &lt;/quote&gt;
</pre>
<p>我们在这里显示了一些非常简单的标记，<code>quote</code>和<code>author</code>。我们还使用<code>props</code>对象来访问使用属性传递给组件的值。</p>
<p>要在我们的报价页面上使用这个组件，我们首先需要注册它。现在，我们将在本地的报价页面组件中注册它。为此，将以下内容添加到<code>./src/pages/quotes.riot</code>文件中:</p>
<pre class="language-javascript hljs">    &lt;quotes&gt;
      &lt;section&gt;
        &lt;header&gt;
          &lt;h1&gt;Quotes&lt;/h1&gt;
        &lt;/header&gt;
        &lt;ul class="quotes-list"&gt;
          &lt;li each={quote in the state.quotes} key={quote.id} class="list-item"&gt;
            &lt;quote quote={quote.quote} author={quote.author} /&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/section&gt;
      &lt;script&gt;
        import Quote from "../components/quote/quote.riot";
        export default {
          components: {
            Quote,
          },
          state: {
            quotes: [],
          },
          // ...
        };
      &lt;/script&gt;
      &lt;style&gt;
        .quotes-list {
            display: grid;
            grid-gap: 2rem;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }
        .list-item {
            display: flex;
        }
      &lt;/style&gt;
    &lt;/quotes&gt;
</pre>
<p>这里，我们使用<code>each</code>指令遍历<code>quotes</code>数组，并将<code>quote</code>和<code>author</code>作为道具传递给<code>Quote</code>组件。</p>
<p>此时，我们的SPA应该看起来像这样:</p>
<p><img data-attachment-id="156117" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/riot-js-quotes-spa/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa.png" data-orig-size="720,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Riot.js quotes SPA" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa.png" decoding="async" class="aligncenter wp-image-156117 size-full jetpack-lazy-image" src="../Images/ef3ac56fd7e4c4437c349282b541fab7.png" alt="Riot.js Quotes SPA" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa.png 720w, https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa-300x167.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156117" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/riot-js-quotes-spa/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa.png" data-orig-size="720,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Riot.js quotes SPA" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa.png" decoding="async" loading="lazy" class="aligncenter wp-image-156117 size-full" src="../Images/ef3ac56fd7e4c4437c349282b541fab7.png" alt="Riot.js Quotes SPA" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa.png 720w, https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa-300x167.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-quotes-spa.png"/></noscript>
<h3 id="setting-up-dynamic-route">设置动态路由</h3>
<p>现在，让我们看看如何在Riot.js中设置动态路由，以便在单击时在新页面上打开一个报价。我们将通过几个步骤来实现这一点。首先，让我们在<code>./src/pages/quotes.riot</code>文件中设置链接<code>href</code>:</p>
<pre class="language-javascript hljs">    &lt;quotes&gt;
      &lt;section&gt;
        &lt;!-- ... --&gt;
        &lt;ul class="quotes-list"&gt;
          &lt;li each={quote in state.quotes} key={quote.id} class="list-item"&gt;
            &lt;a href={`quotes/${quote.id}`}&gt;
              &lt;quote quote={quote.quote} author={quote.author} /&gt;
            &lt;/a&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/section&gt;
      &lt;!-- ... --&gt;
    &lt;/quotes&gt;
</pre>
<p>如果<code>quote.id</code>是<code>1</code>，点击报价应该会将我们带到<code>/quotes/1</code>。</p>
<h3 id="creating-quotes-page-route">创建报价页面路线</h3>
<p>接下来，让我们创建报价页面组件，并将其注册到Riot.js应用程序文件中。</p>
<p>首先创建一个新文件，<code>./src/pages/quote-page.riot</code>:</p>
<pre class="language-javascript hljs">    &lt;quote-page&gt;
      &lt;article class="quote"&gt;
        &lt;h1&gt;{state.quote.quote}&lt;/h1&gt;
        &lt;p&gt;&amp;mdash; {state.quote.author}&lt;/p&gt;
      &lt;/article&gt;
      &lt;script&gt;
        export default {
          state: {
            quote: {},
          },
          async getQuote() {
            try {
              const id = this.props.id;
              const res = await fetch(`https://dummyjson.com/quotes/${id || 1}`);
              const quote = await res.json();
              this.update({ quote });
            } catch (error) {
              console.log({ error });
            }
          },
          onBeforeMount() {
            this.getQuote();
          },
        };
      &lt;/script&gt;
    &lt;/quote-page&gt;
</pre>
<p>这里，我们再次使用<code>props</code>来获取post <code>id</code>。然后，我们将通过<code>getQuote()</code>函数中的<code>id</code>来获取<code>quote</code>，然后在<code>onBeforeMount</code>生命周期要点中调用它。</p>
<h3 id="registering-quotes-page-component">注册报价页面组件</h3>
<p>现在，让我们在<code>./src/app.riot</code>中注册我们最新的页面组件:</p>
<pre class="language-javascript hljs">    &lt;app&gt;
      &lt;!-- ... --&gt;
      &lt;script&gt;
        import { Router, Route, route, toRegexp, match } from '@riotjs/route'
        import lazy from '@riotjs/lazy'
        import Loader from './components/includes/loader/loader.riot'
        import NotFound from './pages/not-found.riot'
        import pages from './pages'
        export default {
          components: {
            Router,
            Route,
            NotFound,
            Home: lazy(Loader, () =&gt; import(
              /* webpackPrefetch: true, webpackChunkName: 'pages/home' */
              './pages/home.riot'
            )),
            About: lazy(Loader, () =&gt; import(
              /* webpackPrefetch: true, webpackChunkName: 'pages/about' */
              './pages/about.riot'
            )),
            Quotes: lazy(Loader, () =&gt; import(
              /* webpackPrefetch: true, webpackChunkName: 'pages/quotes' */
              './pages/quotes.riot'
            )),
            QuotePage: lazy(Loader, () =&gt; import (
              /* webpackPrefetch: true, webpackChunkName: 'pages/quote-page' */
              './pages/quote-page.riot'
            ))
          },
        }
      &lt;/script&gt;
    &lt;/app&gt;
</pre>
<p>接下来，我们将添加一个带有<code>/quotes/:id</code>路由路径的路由组件。</p>
<p>现在，让我们回到我们的<code>./src/app.riot</code>组件。在模板中，输入以下内容:</p>
<pre class="language-javascript hljs">    &lt;app&gt;
      &lt;div class="container"&gt;
        &lt;router&gt;
          &lt;!-- ... --&gt;
          &lt;div if={!state.showNotFound} class="row"&gt;
            &lt;div class="column column-60"&gt;
              &lt;route each={page in state.pages} path={page.path}&gt;
                &lt;main is={page.componentName}/&gt;
              &lt;/route&gt;
              &lt;!-- add new route for quotes --&gt;
              &lt;route path="/quotes/:id"&gt;
                &lt;main is="quote-page" id={route.params.id} /&gt;
              &lt;/route&gt;
            &lt;/div&gt;
            &lt;!-- notice how &lt;sidebar&gt; is registered as global component --&gt;
            &lt;div class="column column-40"&gt;
              &lt;sidebar/&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/router&gt;
      &lt;/div&gt;
    &lt;/app&gt;
</pre>
<p>这里，我们为<code>/quotes/:id</code>添加了一条新路线，其中<code>:id</code>是将在<code>id</code>之前匹配报价的<code>route</code>的参数。</p>
<p>在<code>&lt;route&gt;</code>组件中，我们设置了一个动态组件。我们通过将<code>"quote-page"</code>组件名传递给<code>is</code>指令，将其分配给<code>Quote</code>页面组件:</p>
<p><img data-attachment-id="156119" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/riot-js-dynamic-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-dynamic-component-e1674154599408.gif" data-orig-size="720,294" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Riot.js dynamic component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-dynamic-component-e1674154599408-300x123.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-dynamic-component-e1674154599408.gif" decoding="async" class="aligncenter wp-image-156119 size-full jetpack-lazy-image" src="../Images/22ae177f3a742aa95338ed08c1d0ffde.png" alt="Riot.js Dynamic Component" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-dynamic-component-e1674154599408.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-dynamic-component-e1674154599408.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156119" data-permalink="https://blog.logrocket.com/using-riot-js-component-based-ui-library/attachment/riot-js-dynamic-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-dynamic-component-e1674154599408.gif" data-orig-size="720,294" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Riot.js dynamic component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-dynamic-component-e1674154599408-300x123.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-dynamic-component-e1674154599408.gif" decoding="async" loading="lazy" class="aligncenter wp-image-156119 size-full" src="../Images/22ae177f3a742aa95338ed08c1d0ffde.png" alt="Riot.js Dynamic Component" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/riot-js-dynamic-component-e1674154599408.gif"/></noscript>
<p>就是这样！我们已经使用Riot.js轻松高效地构建了一个用户界面。</p>
<h2 id="conclusion">结论</h2>
<p>在本文中，我们演示了如何使用Riot.js创建一个简单的SPA。我们讲述了使用Riot.js npm包设置一个简单的Riot.js应用程序的基础知识，包括简单的路由以及本地和全局组件设置。</p>
<p>我们展示了如何创建用于数据获取的函数，以及如何在安装组件之前使用生命周期函数来运行它们。我们还演示了如何使用Riot.js路由参数设置动态路由。</p><div class="code-block code-block-28">
<div class="blog-plug inline-plug js-libraries-plug"><h2>您是否添加了新的JS库来提高性能或构建新特性？如果他们反其道而行之呢？</h2><p>毫无疑问，前端变得越来越复杂。当您向应用程序添加新的JavaScript库和其他依赖项时，您将需要更多的可见性，以确保您的用户不会遇到未知的问题。</p>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放JavaScript错误，就像它们发生在您自己的浏览器中一样，这样您就可以更有效地对错误做出反应。</p><a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/></noscript></a>
<a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>自信地构建— <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
 <p class="clearfix"/>
</article>

</div>    
</body>
</html>