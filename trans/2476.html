<html>
<head>
<title>Remix: A guide to the React framework taking on Next.js - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Remix:关于 Next.js - LogRocket 博客的 React 框架指南</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/guide-to-remix-react-framework/#0001-01-01">https://blog.logrocket.com/guide-to-remix-react-framework/#0001-01-01</a></blockquote><div><article class="article-post">
<p><em> <strong>编者按:</strong>这篇 Remix 的指南最后一次更新是在 2022 年 11 月 3 日，包括了更多关于 Remix 中状态管理的信息，以及 Remix 的服务器端渲染如何为 React 应用程序工作。此外，本次更新解决了 Remix 是否与 React Native 兼容，以及如何将 Remix 与 Redux 和其他库一起使用的问题。</em></p>
<p>如今，似乎每隔一天就有一个 React 框架推出。尽管每个 React 框架都有一些特别的东西可以提供，但 Remix 还是脱颖而出。在最初提供付费订阅后，Remix 的创造者宣布该框架将于 2021 年 10 月开源。</p>
<p>Remix 是一个 React 框架，用于<a href="https://blog.logrocket.com/improve-app-performance-react-server-side-rendering/">服务器端渲染(SSR) </a>。这意味着后端和前端都可以使用一个 Remix 应用程序。数据呈现在服务器上，用最少的 JavaScript 提供给客户端。与 vanilla React 不同，在 vanilla React 中，数据在前端获取，然后呈现在屏幕上，Remix 在后端获取数据，并将 HTML 直接提供给用户。</p>
<p>在本文中，我们将讨论一些关于 Remix 的很酷的东西，然后继续使用这个新框架创建一个 SSR 天气应用程序。最后，我分享一下我个人对 Remix 的看法，以及我是否打算在未来的项目中使用 Remix。</p>
<h3>先决条件</h3>
<p>在继续学习本教程之前，我们先来看看需求:</p>

<p>如果你在教程的某个地方卡住了，这里有<a href="https://github.com/atharvadeosthale/remix-weather-app"> GitHub </a>库。</p>
<p><em>向前跳转:</em></p>

<h2 id="benefits-remix">使用 Remix 的好处</h2>
<p>Remix 就像其他框架一样，有一些特殊的内置特性，方便了开发者。以下是我最喜欢的一些:</p>
<h3 id="nested-pages">嵌套页面</h3>
<p>路由文件夹中的任何页面都嵌套在路由中，而不是独立的。这意味着您可以将这些组件嵌入到您的父页面中，这也意味着更少的加载时间。</p>
<p>这样做的另一个好处是，我们可以对这些嵌入式页面实施错误边界，这将有助于错误处理。</p>
<h3 id="error-boundaries">误差边界</h3>
<p>假设您在重新混合组件或嵌套路由中遇到错误。错误仅限于组件，组件将无法呈现或仅显示错误。在其他框架中，它会破坏整个页面，你会看到一个巨大的错误屏幕。</p>
<p>虽然<a href="https://blog.logrocket.com/testing-error-handling-patterns-next-js/">错误边界</a>也可以在 Next.js 中实现，<a href="https://remix.run/docs/en/v1/guides/errors"> Remix 在</a>中构建了 <a href="https://remix.run/docs/en/v1/guides/errors">，我认为这是一个很酷的产品构建功能，这样用户就不会因为一个简单的错误而被锁定在整个页面之外。</a></p>
<h3 id="transitions">过渡</h3>
<p>Remix 自动为你处理所有加载状态；你所要做的就是告诉 Remix 当应用程序加载时要显示什么。在像 Next.js 这样的其他框架中，你需要使用一些状态管理库来设置加载状态，比如<a href="https://blog.logrocket.com/understanding-redux-tutorial-examples/"> Redux </a>或者<a href="https://recoiljs.org/">反冲</a>。虽然在其他框架中有一些库可以帮助你做完全相同的事情，但是 Remix 已经内置了这一点。</p>
<h3 id="traditional-forms">传统形式</h3>
<p>现在，我们回到开发者使用<a href="https://blog.logrocket.com/modern-tools-php-developers/"> PHP </a>的时候。我们曾经用一个有效的 PHP URL 指定一个表单方法和动作；我们将在混音中使用类似的方法。</p>
<p>我知道这听起来不好玩，因为我们习惯了<code>onClick</code>、<code>onSubmit</code>和 HTTP 调用。但是 Remix 通过提供像<code>action</code>和<code>loader</code>这样的函数来执行服务器端操作，完全不同地处理了这种情况。在这些函数中很容易获得表单数据。这意味着完全没有必要向前端提供 JavaScript 来提交表单。</p>
<p>假设你有一个相当简单的网站，你真的不需要向前端提供 JavaScript。这种传统的表单方法在这些情况下效果最好。在其他框架中，您可能需要使用 JavaScript 进行<code>fetch</code>或<code>axios</code>调用，但是在 Remix 中您不需要这样做。它有助于保持事情简单。</p>
<h2 id="drawbacks-remix">使用混音的缺点</h2>
<p>虽然 Remix 有很多好处，但是使用该框架的某些方面可能会让您犹豫:</p>

<p>Remix 是最近才开源的。正因为如此，目前在制作项目中使用 Remix 的人仍然不多。</p>
<p>如果您在使用 Remix 时遇到了问题，在互联网上找到解决方案可能会很困难，您可能需要在论坛上发布问题，并等待一段时间才能得到回应。</p>
<h3 id="potentially-confusing-routing-system">潜在混乱的路由系统</h3>
<p>当我开始使用 Remix 时，我发现路由系统令人困惑。我无法理解嵌套路由的概念。这是因为我习惯了没有这个特定路由系统的其他框架，这意味着 Remix 有一点学习曲线。</p>
<h2 id="remix-different-next-js">Remix 和 Next.js 有什么不同？</h2>
<p>乍一看，Remix 和 Next.js 似乎没有太大区别，因为<a href="https://blog.logrocket.com/implementing-ssr-next-js-dynamic-routing-prefetching/">两者都支持 SSR </a>。然而，虽然 Next.js 支持 SSG 和其他令人敬畏的工具，但 Remix 只专注于 SSR。</p>
<h2 id="creating-remix-app">创建混音应用程序</h2>
<p>导航到一个安全的目录，在终端中使用以下命令来初始化我们的 Remix 应用程序的安装:</p>
<pre class="language-bash hljs">npx <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="177465727663723a65727a7e6f577b7663726463">[email protected]</a> weather-app
</pre>
<p>当然，你可以把<code>weather-app</code>换成任何适合你的项目名称。一旦你点击<code>Enter</code>，你会看到一个交互式菜单，帮助你制作一个混音应用程序:</p>
<p><img data-attachment-id="142582" data-permalink="https://blog.logrocket.com/guide-to-remix-react-framework/attachment/remix-installation-ide/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE.png" data-orig-size="730,246" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Image of IDE after installing Remix" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE-300x101.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE.png" decoding="async" class="aligncenter size-full wp-image-142582 jetpack-lazy-image" src="../Images/63f2a6091ba007a563d21fb0b108cbe0.png" alt="Image of IDE After Installing Remix" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE-300x101.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142582" data-permalink="https://blog.logrocket.com/guide-to-remix-react-framework/attachment/remix-installation-ide/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE.png" data-orig-size="730,246" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Image of IDE after installing Remix" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE-300x101.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142582" src="../Images/63f2a6091ba007a563d21fb0b108cbe0.png" alt="Image of IDE After Installing Remix" srcset="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE-300x101.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-installation-IDE.png"/></noscript>
<p>就像上图一样，会问你要部署在哪里。我们只是在试验，不会在本教程中涉及部署，所以我们将使用 Remix 应用服务器:</p>
<p><img data-attachment-id="142584" data-permalink="https://blog.logrocket.com/guide-to-remix-react-framework/attachment/remix-deploy-request-ide/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE.png" data-orig-size="730,195" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="IDE screen asking where to deploy Remix" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE-300x80.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE.png" decoding="async" class="aligncenter size-full wp-image-142584 jetpack-lazy-image" src="../Images/98369655b8524e768dfb28eaf2f4c301.png" alt="IDE Screen Asking Where to Deploy Remix" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE-300x80.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142584" data-permalink="https://blog.logrocket.com/guide-to-remix-react-framework/attachment/remix-deploy-request-ide/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE.png" data-orig-size="730,195" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="IDE screen asking where to deploy Remix" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE-300x80.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142584" src="../Images/98369655b8524e768dfb28eaf2f4c301.png" alt="IDE Screen Asking Where to Deploy Remix" srcset="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE-300x80.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-deploy-request-IDE.png"/></noscript>
<p>接下来，会询问你是想使用<a href="https://logrocket.com/for/javascript-developer-tools/"> JavaScript </a>还是<a href="https://blog.logrocket.com/tag/typescript/"> TypeScript </a>。为了简单起见，我将在本教程中使用 JavaScript:</p>
<p><img data-attachment-id="142586" data-permalink="https://blog.logrocket.com/guide-to-remix-react-framework/attachment/remix-asking-use-js-ts/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts.png" data-orig-size="730,175" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Remix IDE asking to use JavaScript or TypeScript" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts-300x72.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts.png" decoding="async" class="aligncenter size-full wp-image-142586 jetpack-lazy-image" src="../Images/71398794c32051d1026b2ae53f2a7550.png" alt="Remix IDE Asking to Use JavaScript or TypeScript" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts-300x72.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142586" data-permalink="https://blog.logrocket.com/guide-to-remix-react-framework/attachment/remix-asking-use-js-ts/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts.png" data-orig-size="730,175" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Remix IDE asking to use JavaScript or TypeScript" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts-300x72.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142586" src="../Images/71398794c32051d1026b2ae53f2a7550.png" alt="Remix IDE Asking to Use JavaScript or TypeScript" srcset="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts-300x72.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/Remix-asking-use-js-ts.png"/></noscript>
<p>然后会问你 Remix 要不要用<code>npm install</code>。类型<code>y</code>。这将安装运行 Remix 所需的依赖项。</p>
<p>现在，导航到项目目录，使用下面的命令安装这个项目需要的一些依赖项:</p>
<pre class="language-bash hljs">npm install axios dotenv
</pre>
<p>我们正在安装<code>axios</code>，这样我们就可以从我们的应用程序向 OpenWeatherMap API 发送 HTTP 请求。我们将使用 dotenv 将我们的 API 密钥存储在一个环境变量中。</p>
<p>现在，让我们编辑<code>package.json</code>，以便在 Remix 的开发模式中使用环境变量。将<code>dev</code>脚本替换为:</p>
<pre class="language-json hljs">"dev": "node -r dotenv/config node_modules/.bin/remix dev"
</pre>
<p>这将为您的项目启用环境变量。现在，为我们的环境变量创建一个新文件<code>.env</code>,并以如下格式存储 API 密钥:</p>
<pre class="language-shell hljs">WEATHER_API_KEY={api key here}
</pre>
<p>现在，让我们看看混音文件夹的结构:</p>
<p><img data-attachment-id="142592" data-permalink="https://blog.logrocket.com/guide-to-remix-react-framework/attachment/remix-app-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure.png" data-orig-size="730,1621" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Remix app folder structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure-135x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure-461x1024.png" decoding="async" class="aligncenter size-full wp-image-142592 jetpack-lazy-image" src="../Images/6f74f304d25352dd8fd2d0f2567bcd4f.png" alt="Remix App Folder Structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure-135x300.png 135w, https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure-461x1024.png 461w, https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure-692x1536.png 692w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142592" data-permalink="https://blog.logrocket.com/guide-to-remix-react-framework/attachment/remix-app-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure.png" data-orig-size="730,1621" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Remix app folder structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure-135x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure-461x1024.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142592" src="../Images/6f74f304d25352dd8fd2d0f2567bcd4f.png" alt="Remix App Folder Structure" srcset="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure-135x300.png 135w, https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure-461x1024.png 461w, https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure-692x1536.png 692w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-app-folder-structure.png"/></noscript>
<p><code>app</code>文件夹包含我们的主应用程序逻辑。<code>routes</code>文件夹下的所有文件夹和文件都是公开的，可以通过 URL 访问。<code>styles</code>文件夹包含了所有的 CSS 文件，它们的存储方式与 routes 相似。</p>
<p><code>entry.client.jsx</code>和<code>entry.server.jsx</code>是 Remix 管理的，最好不要碰入口文件。相反，创建新文件并处理它们。<code>root.jsx</code>文件包含我们的一般页面布局。</p>
<p><code>public</code>文件夹包含我们的公共资产，如静态图像和收藏夹图标，而<code>remix.config.js</code>文件包含我们的 Remix 应用程序的基本配置，如它应该在开发模式下运行的端口。</p>
<h3 id="cleaning-up">清理混音应用程序</h3>
<p>当你第一次设置一个混音 app 时，它不是空白的；Remix 在应用程序中内置了一些教程和演示。让我们首先清理它们，以便我们可以在我们的天气应用程序上工作。</p>
<p>转到<code>root.jsx</code>并清空默认的<code>Layout</code>组件，使其看起来像这样:</p>
<pre class="language-javascript hljs">function Layout({ children }) {
  return &lt;div&gt;{children}&lt;/div&gt;;
}
</pre>
<p>现在，进入<code>styles</code>文件夹，移除<code>demos</code>文件夹，清空<code>dark.css</code>和<code>global.css</code>的内容。这将为我们清理所有的造型。</p>
<p>删除<code>routes</code>目录中的<code>demos</code>文件夹，因为我们不需要它。</p>
<p>然后，转到<code>index.jsx</code>并清空所有内容。只需确保它有一个默认的导出组件，如下所示:</p>
<pre class="language-javascript hljs">export default function Index() {
  return &lt;div&gt;&lt;/div&gt;;
}
</pre>
<h3 id="building-form-fetching-weather">构建表单并获取天气</h3>
<p>现在，让我们用下面的布局在<code>index.jsx</code>中创建一个表单:</p>
<pre class="language-javascript hljs">export default function Index() {
  return (
    &lt;div&gt;
      &lt;form action="/weather" method="get"&gt;
        City: &lt;input type="text" name="city" /&gt;
        &lt;input type="submit" value="Fetch weather" /&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  );
}
</pre>
<p>在这里，我们用方法<code>get</code>创建了一个表单，我们有一个与输入字段相关联的名称，当表单被提交时，这个名称将被附加到 URL 上。</p>
<p>现在，让我们看看如何使用路由嵌套。在<code>routes</code>文件夹中创建一个名为<code>weather.jsx</code>的新文件；它将处理<code>/weather</code>路线:</p>
<pre class="language-javascript hljs">import { Outlet } from "react-router";
export default function Weather() {
  return (
    &lt;&gt;
      &lt;h1&gt;Weather App&lt;/h1&gt;
      &lt;Outlet /&gt;
    &lt;/&gt;
  );
}
</pre>
<p><code>Outlet</code>组件将在<code>routes</code>文件夹中寻找<code>weather</code>文件夹，并将页面嵌入到主页中。这应该能让你了解页面嵌套在 Remix 中是如何工作的。</p>
<p>然后，在<code>routes</code>中新建一个名为<code>weather</code>的文件夹，并在<code>weather</code>文件夹中新建一个文件<code>index.jsx</code>。让我们创建一个<code>loader</code>函数，每当页面被请求时，它都会在服务器端运行:</p>
<pre class="language-javascript hljs">export async function loader({ request }) {
  try {
    const url = new URL(request.url);
    const search = new URLSearchParams(url.search);
    if (!search.get("city")) return redirect("/");
    const city = search.get("city");
    const res = await axios.get(
      `https://api.openweathermap.org/data/2.5/weather?q=${city}&amp;appid=${process.env.WEATHER_API_KEY}&amp;units=metric`
    );
    console.log(res.data);
    return { city, type: res.data.weather[0].main, temp: res.data.main.temp };
  } catch (err) {
    console.error(err);
    redirect("/");
    return {};
  }
}
</pre>
<p>这里，我们从使用<code>GET</code>请求发送的 URL 查询中提取城市名称。然后，我们向 OpenWeatherMap API 发出请求，以获取该城市的天气。记住，我们应该在前端返回我们需要的数据，这样数据就可以呈现在屏幕上。</p>
<p>现在，让我们来看看结果屏幕的布局:</p>
<pre class="language-javascript hljs">export default function Index() {
  const data = useLoaderData();
  return (
    &lt;div&gt;
      &lt;h1&gt;{data.city}&lt;/h1&gt;
      &lt;h2&gt;{data.type}&lt;/h2&gt;
      &lt;h3&gt;Temperature: {data.temp} °C&lt;/h3&gt;
    &lt;/div&gt;
  );
}
</pre>
<p><code>useLoaderData</code>钩子获得使用<code>loader</code>函数返回的数据，这样我们就可以在前端呈现它。如果你做的一切都正确，你应该得到这样的天气渲染:</p>
<p><img data-attachment-id="142594" data-permalink="https://blog.logrocket.com/guide-to-remix-react-framework/attachment/remix-weather-app-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example.png" data-orig-size="730,706" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Image of Remix weather app displaying weather from Nagpur" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example-300x290.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example.png" decoding="async" class="aligncenter size-full wp-image-142594 jetpack-lazy-image" src="../Images/61e5e1feca54553cc62b9ae8e58443b3.png" alt="Image of Remix Weather App Displaying Weather From Nagpur" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example-300x290.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="142594" data-permalink="https://blog.logrocket.com/guide-to-remix-react-framework/attachment/remix-weather-app-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example.png" data-orig-size="730,706" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Image of Remix weather app displaying weather from Nagpur" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example-300x290.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-142594" src="../Images/61e5e1feca54553cc62b9ae8e58443b3.png" alt="Image of Remix Weather App Displaying Weather From Nagpur" srcset="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example-300x290.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/remix-weather-app-example.png"/></noscript>
<p>恭喜你。您已经使用 Remix 制作了您的第一个天气应用程序！</p>
<h2 id="remix-server-side-rending-react-apps">Remix 的服务器端渲染如何与 React 应用一起工作</h2>
<p>Remix 不同于 vanilla React，它在服务器端将 React 代码呈现为普通的 HTML，从而大大减少了 JavaScript 的数量。每当您访问一个页面时，服务器都会执行您提供的任何服务器端操作，然后继续将 React 代码呈现为普通的 HTML，并将其发送回客户端浏览器。</p>
<h2 id="remix-react-native">Remix 可以和 React Native 一起使用吗？</h2>
<p>Remix 是一个 web 框架，不能和<a href="https://youtu.be/3hLQURJM7ws"> React Native </a>一起使用。与 web 应用不同，移动应用完全是客户端的，不能在服务器端呈现。不同的操作系统有不同的应用母语。比如 Android 用的是<a href="https://blog.logrocket.com/kotlin-vs-java-android-development/"> Kotlin 和 Java </a>，而 iOS 用的是<a href="https://blog.logrocket.com/mastering-swift-fundamentals/"> Swift </a>和<a href="https://en.wikipedia.org/wiki/Objective-C#:~:text=Objective%2DC%20was%20the%20standard,introduction%20of%20Swift%20in%202014."> Objective C </a>。服务器无法呈现这些代码，并且当前的技术不允许在设备上按需编译代码，因为可能存在攻击者可以用来窃取大量信息的漏洞。</p>
<h2 id="state-management-remix">状态管理如何与 Remix 一起工作</h2>
<p>由于 Remix 是基于 React 的框架，所以所有的 React 库都可以在 Remix 上使用，包括像 Redux 和反冲这样的状态管理库。你可以使用 Create React App 中使用的<a href="https://blog.logrocket.com/smarter-redux-redux-toolkit/"> Redux toolkit </a>，在 Remix 中应该也可以。尽管由于 Remix 是服务器端呈现的，您将会经历页面刷新或页面的完全转换，丢失 Redux 存储中的所有状态。最佳实践应该是使用<a href="https://blog.logrocket.com/persist-state-redux-persist-redux-toolkit-react/">R</a><a href="https://blog.logrocket.com/persist-state-redux-persist-redux-toolkit-react/">edux</a><a href="https://blog.logrocket.com/persist-state-redux-persist-redux-toolkit-react/">P</a><a href="https://blog.logrocket.com/persist-state-redux-persist-redux-toolkit-react/">ersist</a>在本地存储中保存状态。</p>
<p>然而，在服务器端呈现的应用程序中通常避免使用状态管理，因为用户令牌等数据通常保存在 cookies 中，并发送到服务器，服务器通过 props 将用户数据发送回页面。这是因为服务器无法读取浏览器的本地存储。可以用 Redux 搭配 Remix 吗？是的。应该用 Redux 搭配 Remix 吗？没那么快…想想你的用例。使用 cookies 的服务器端呈现解决了状态管理的大部分问题。</p>
<h2>结论</h2>
<p>我认为 Remix 很强大，应该会越来越受欢迎。我会用 Remix 而不是 Next.js 吗？可能不会，因为与 Remix 相比，Next.js 有一个庞大的社区来支持我。虽然，这是可以理解的，因为它只是新开源的。</p>
<p>这并不意味着我不喜欢这个框架。我可能会把它用在我的个人或有趣的项目上。我想对误差边界特性进行更多的实验。在我看来，在撰写本文时，Next.js 将是一个很好的选择，因为当我试图谷歌我在 Remix 中面临的一些问题时，我无法轻松找到解决方案。也许再过几年，事情会有所改变，Remix 会是一个更强大的框架，有一个巨大的社区做后盾。</p>
<p>既然 Remix 是开源的，你对尝试它感到兴奋吗？请在下面的评论中告诉我。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用 LogRocket 消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款 React analytics 解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket 告诉您 React 应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS 异常、前端性能指标和用户交互。然后，LogRocket 使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的 React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试 LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>