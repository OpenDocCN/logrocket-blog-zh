<html>
<head>
<title>Rust internationalization, localization, and translation - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Rust 国际化、本地化和翻译</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/rust-internationalization-localization-and-translation/#0001-01-01">https://blog.logrocket.com/rust-internationalization-localization-and-translation/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在过去的几年里，随着越来越多的企业寻求在世界舞台上推广他们的产品和服务，Rust 越来越受欢迎。根据 Stack Overflow 的“<a href="https://insights.stackoverflow.com/survey/2020#technology-most-loved-dreaded-and-wanted-languages-loved"> 2020 年开发者调查</a>”，使用过 Rust 的受访者中有高达 86%的人计划再次使用它，这使得 Rust 成为 2020 年最受欢迎的编程语言。</p>
<p/>
<p>国际化(i18n)是计划向全球受众推出其应用和软件的公司的一个关键考虑因素。在这个 Rust 国际化教程中，我们将检查八个最流行的 Rust i18n 机箱，并评估每个机箱的生产就绪性和稳定性。</p>
<p>在本指南中，我们将看看八个最流行的 Rust 国际化板条箱，并评估每个板条箱的生产就绪性和稳定性。</p>
<p>我们将讨论以下内容:</p>

<h2 id="whatisinternationalization">什么是国际化？</h2>
<p>国际化是开发适应任何地区、语言或文化的用户的内容和应用程序的过程。换句话说，国际化是通过提供适合每个地区的内容，使应用程序可以全球访问的过程。</p>
<p>国际化有时被缩写为 i18n，因为在开头的“I”和结尾的“n”之间有 18 个字母</p>
<h2 id="rustinternationalizationkeyterms">Rust 国际化:关键术语</h2>
<p>在继续我们的 Rust 国际化教程之前，让我们定义一些关键术语:</p>
<ul>
<li><strong>国际化(i18n) </strong>是指设计能够适应各种语言和地区的计算机程序或网络应用程序</li>
<li><strong>本地化</strong>是通过为给定地区或语言添加特定于地区的组件来调整国际化 web 应用程序的过程。它使用国际化提供的灵活性和功能</li>
<li>翻译是将字符串从一种语言替换成另一种语言的过程</li>
</ul>
<h2 id="whyuseinternationalizationwithrust">为什么要用 Rust 的国际化？</h2>
<p>在静态网站时代，本地化是通过在多个地区复制整个网站结构来完成的。由于每一页都是单独翻译的，因此翻译者可以直接对每个结构进行更改。国际化工具简化了这个繁琐、耗时、易出错的过程。</p>
<p>Rust 最丰富的功能之一是语言环境，这使得将应用程序翻译成各种语言变得很容易。</p>
<h2 id="commonlocalizationsystems">通用本地化系统</h2>
<p>一般来说，有三种常见的本地化系统:</p>
<ol>
<li><a href="#gettext"> gettext </a></li>
<li><a href="#projectfluent">项目流畅</a></li>
<li><a href="#icumessageformat"> ICU 报文格式</a></li>
</ol>
<p>让我们更详细地检查每一个。</p>
<h3 id="gettext">gettext</h3>
<p><a href="https://en.wikipedia.org/wiki/Gettext"> g </a> <a href="https://en.wikipedia.org/wiki/Gettext"> ettext </a>是一个本地化系统，将翻译文件从编程语言中分离出来，并提供对任意数量的复数形式字符串的支持。Sun Microsystems 在 1993 年实现了 gettext 的第一个版本。1995 年，GNU 项目发布了一个自由软件实现。从那以后，gettext 被许多编程语言使用，包括 Rust。</p>
<p>下面是如何使用 gettext:</p>
<p><img data-attachment-id="36385" data-permalink="https://blog.logrocket.com/rust-internationalization-localization-and-translation/gettext-localization-system-use-instruction-chart/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart.png" data-orig-size="220,318" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="gettext-localization-system-use-instruction-chart" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart-208x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart.png" decoding="async" class="aligncenter wp-image-36385 size-full jetpack-lazy-image" src="../Images/2d3e0f921bd1af71cc5a77da3828b6bb.png" alt="Gettext Localization System Use Instruction Chart" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart.png 220w, https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart-208x300.png 208w" data-lazy-sizes="(max-width: 220px) 100vw, 220px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="36385" data-permalink="https://blog.logrocket.com/rust-internationalization-localization-and-translation/gettext-localization-system-use-instruction-chart/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart.png" data-orig-size="220,318" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="gettext-localization-system-use-instruction-chart" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart-208x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart.png" decoding="async" loading="lazy" class="aligncenter wp-image-36385 size-full" src="../Images/2d3e0f921bd1af71cc5a77da3828b6bb.png" alt="Gettext Localization System Use Instruction Chart" srcset="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart.png 220w, https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart-208x300.png 208w" sizes="(max-width: 220px) 100vw, 220px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/03/gettext-localization-system-use-instruction-chart.png"/></noscript>
<ol>
<li>使用<code>gettext(), _()</code>接受源代码中的翻译字符串</li>
<li>生成。pot(可移植对象模板)文件，使用<code>xgettext</code>或其他软件帮助跟踪翻译后的字符串和使用了<code>gettext()/_()</code>的行</li>
<li>生成。使用 PoEdit、Emacs 等软件为每种语言/地区创建 po(可移植对象)文件。为每个源文本添加适当的翻译</li>
<li>编译为。翻译完成后的 mo(机器对象)文件，便于分发</li>
</ol>
<p><img data-attachment-id="36388" data-permalink="https://blog.logrocket.com/rust-internationalization-localization-and-translation/machine-object-file-compilation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation.png" data-orig-size="730,466" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="machine-object-file-compilation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation-300x192.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation.png" decoding="async" class="aligncenter wp-image-36388 size-full jetpack-lazy-image" src="../Images/09003c07a44bd4cd8eb84538a16c0018.png" alt="Machine Object File Compilation" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation-300x192.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="36388" data-permalink="https://blog.logrocket.com/rust-internationalization-localization-and-translation/machine-object-file-compilation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation.png" data-orig-size="730,466" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="machine-object-file-compilation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation-300x192.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation.png" decoding="async" loading="lazy" class="aligncenter wp-image-36388 size-full" src="../Images/09003c07a44bd4cd8eb84538a16c0018.png" alt="Machine Object File Compilation" srcset="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation-300x192.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/03/machine-object-file-compilation.png"/></noscript>
<h3 id="projectfluent">流畅项目</h3>
<p><a href="https://www.projectfluent.org/"> Fluent </a>是一个翻译系统，通过提供对诸如性别、复数、变化等语法表达的支持，专注于产生听起来自然的翻译。</p>
<p>Fluent 使用名为 FTL(Fluent 翻译列表的缩写)的文件格式中的表达式来处理翻译。FTL 文件代表一种包含函数、属性、变量、选择器、术语等的语言。每个语言环境都必须在不同的语言环境目录中创建自己的 FTL 文件，并按照相同的语法模式进行翻译。</p>
<pre># en-US
# Simple variable
text-layout = Fast track your productivity by testing out your code on the spot
# Attributes
form-layout = 
  .button = Save and Execute
  .font-seletion = Font Size



#es
# Simple variable
text-layout = Acelere su productividad probando su código en el lugar
# Attributes
form-layout = 
  .button = Guardar y ejecutar
  .font-seletion = Tamaño de fuente
</pre>
<h3 id="&quot;icumessageformat">ICU 消息格式</h3>
<p><a href="https://unicode-org.github.io/icu/">Unicode 国际组件</a> <a href="https://unicode-org.github.io/icu/"> (ICU </a> <a href="https://unicode-org.github.io/icu/"> ) </a>是一种标准编码方案，提供全功能 Unicode 服务，如日期操作、访问本地化信息的资源包、字符集转换等。它提供了关于源消息中数据期望的常规翻译。</p>
<p>ICU 依赖于各种数据格式，包括 XML、JSON、YAML 和用于消息格式化的属性文件，并使用包含各种标准的消息语法，包括变量、选择、复数、日期、时间等。</p>
<pre>{    
   "text": "Just write text without any variables"
}

# Representing numbers { variableName, number, style }. 
{ 
  "amount" : "Your total is {total, number, ::currency/EUR}"
}

{  
   "created_at": "The todo was posted on {publishedAt, date, medium} at {publishedAt, time, short}"
}

# Spanish version
{  
  "created_at": "La tarea fue publicada en {publishedAt, date, medium} a {publishedAt, time, short}"
}
</pre>

<p>让我们放大八个最流行的 Rust 国际化 API，比较它们的生产就绪性、稳定性和整体开发人员体验。</p>
<ol>
<li><a href="#fluent">流畅</a></li>
<li><a href="#fluentlangneg">流利的英语</a></li>
<li><a href="#gettext">T2<code>gettext</code></a></li>
<li><a href="#gettext-rs">T2<code>gettext-rs</code></a></li>
<li><a href="#ril8n"><code>r_i18n</code></a>T3】</li>
<li><a href="#jsongettext"> JSON 获取文本</a></li>
<li><a href="#il8ncodegen"><code>i18n_codegen</code></a>T3】</li>
<li><a href="#rocketi18n">火箭 I18N </a></li>
</ol>
<h3 id="fluent">流利的</h3>
<p>Fluent 旨在改进平台上的翻译过程。它支持语法操作、解析器和核心本地化结构使用低级结构在单一语言环境中格式化和存储消息。</p>
<p>Fluent 还提供了一个 API，该 API 支持用户友好的助手、框架绑定、错误回退、用户请求的语言之间的语言协商、资源以及用于处理所选资源的输入/输出。</p>
<ul>
<li>生产就绪:是</li>
<li>稳定:是</li>
</ul>
<h3 id="fluentlangneg">流利的语言</h3>
<p><a href="https://github.com/projectfluent/fluent-langneg-rs"> Fluent LangNeg </a>基于<code><a href="https://github.com/projectfluent/fluent.js/tree/master/fluent-langneg">fluent-langneg</a></code>，一个与<a href="https://www.projectfluent.org/">项目 Fluent </a>关联的 JavaScript 库实现，以前叫做<code>fluent-locale</code>。它使用<a href="https://github.com/zbraniecki/unic-locale"> <code>unic-langid</code> </a>和<a href="https://github.com/zbraniecki/unic-locale"> <code>unic-locale</code> </a>来检索和操作地区标识符。Fluent LangNeg 还提供了在不同区域列表之间进行协商的选项。</p>
<ul>
<li>生产就绪:是</li>
<li>稳定:是</li>
</ul>
<h3 id="gettext"><code>gettext</code></h3>
<p><a href="https://docs.rs/gettext/0.4.0/gettext/"> Rust gettext </a>基于<a href="https://www.gnu.org/software/gettext/"> GNU gettext </a>，支持并为大量语言建模，如<a href="https://github.com/php-gettext/Gettext"> php-gettext </a>、<a href="https://godoc.org/github.com/robfig/gettext-go/gettext"> gettext-go </a>、<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Localization/gettext"> js-gettext </a>等等。它将翻译后的数据存储在一个. mo 文件中，该文件与语言文件分开，因为它不强制使用目录结构进行存储。</p>
<p>在撰写本文时，该机箱仍处于开发阶段。</p>
<ul>
<li>生产就绪:否</li>
<li>稳定:是</li>
</ul>
<h3 id="gettext-rs"><code>gettext-rs</code></h3>
<p><a href="https://github.com/Koka/gettext-rs"> <code>gettext-rs</code> </a>使用 Rust 的 GNU <a href="https://www.gnu.org/software/gettext/"> Gettext </a> FFI 绑定，基于环境变量构建脚本执行。它目前只支持 Linux 和 Windows。</p>
<ul>
<li>生产就绪:否</li>
<li>稳定:是</li>
</ul>
<h3 id="ril8n"><code>r_i18n</code></h3>
<p><a href="https://crates.io/crates/r_i18n"> <code>r_i18n</code> </a>是一个通过从配置目录中为每种语言创建的 JSON 文件中访问字符串的相关键值对来翻译字符串的工具。</p>
<ul>
<li>生产就绪:是</li>
<li>稳定:是</li>
</ul>
<h3 id="jsongettext">JSON 获取文本</h3>
<p><a href="https://www.gnu.org/software/gettext/"> <code>json-gettext</code> </a>从 JSON 语言环境文件中提取字符串，得到用户的目录。本地化的工作原理是在 Rust 必须访问的目录中创建不同的 JSON 语言环境。</p>
<p>json-gettext 提供了对<a href="http://rocket.rs">R</a>T2】ocket web 框架和 unic languid 的支持。</p>
<ul>
<li>生产就绪:是</li>
<li>稳定:是</li>
</ul>
<h3 id="il8ncodegen"><code>i18n_codegen</code></h3>
<p><a href="https://crates.io/crates/i18n_codegen"> i18n <em> codegen </em>JSON 文件中的键变成了一个可以通过实现来访问的方法。这个过程旨在帮助您避免常见的错误，如丢失插值、i18n 键输入错误等。</a></p>
<ul>
<li>生产就绪:是</li>
<li>稳定:是</li>
</ul>
<h3 id="rocketi18n">火箭 I18N</h3>
<p><a href="https://github.com/Plume-org/rocket_i18n"> <code>rocket_i18n8</code> </a>设计用于通过 i18n 宏在<a href="https://rocket.rs/"> rocket </a>或<a href="https://actix.rs/"> actix web </a>框架上基于用户请求翻译区域设置。Rocket I18N 被构建为仅支持编译模板，例如<a href="https://github.com/kaj/ructe">r</a>T9】cute 和<a href="https://github.com/djc/askama">A</a>T13】skama 模板引擎。</p>
<ul>
<li>生产就绪:是</li>
<li>稳定:是</li>
</ul>
<h2 id="conclusion">结论</h2>
<p>通过这些国际化 API，您可以将业务扩展到其他地区，这有助于提高 Rust 应用程序的整体用户参与度。</p>
<p>满足您需求的最佳国际化工具将取决于您的特定用例以及您希望应用程序实现的目标。上面提到的一些 API 比其他 API 更适合生产，也更稳定，所以请确保在提交解决方案之前做好准备。</p><div class="code-block code-block-29">
<div class="blog-plug inline-plug rust-plug"><h2><a href="https://lp.logrocket.com/blg/rust-signup" target="_blank">log rocket</a>:Rust 应用的 web 前端的全面可见性</h2><p>调试 Rust 应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监控和跟踪 Rust 应用程序的性能、自动显示错误、跟踪缓慢的网络请求和加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/rust-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p>LogRocket 就像是网络和移动应用程序的 DVR，记录你的 Rust 应用程序上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket 还可以监控应用的性能，报告客户端 CPU 负载、客户端内存使用等指标。</p><p>现代化调试 Rust 应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/rust-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>