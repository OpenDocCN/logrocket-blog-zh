<html>
<head>
<title>Building a Next.js shopping cart app - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>构建 Next.js 购物车应用程序- LogRocket 博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/#0001-01-01">https://blog.logrocket.com/building-a-next-js-shopping-cart-app/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Next.js 是 Vercel 开发的 React 框架，随着越来越多的 React 开发人员追求服务器端渲染、静态站点生成和增量静态再生，以及其他 SEO 和优化优势，该框架越来越受欢迎。</p>
<p>使用 Next.js 附带的温和的学习曲线，在框架内构建应用程序是很容易的，即使您以前只使用过 React。</p>
<p>为了了解如何构建一个 Next.js 应用程序，本教程详细介绍了如何为一个虚拟的游戏商店构建一个购物车 web 应用程序，该应用程序能够在购物车中添加或删除商品、查看所有产品、按类别查看产品等等。</p>
<h2>本 Next.js 教程涵盖的内容</h2>
<p>构建应用程序时，我们将介绍以下功能:</p>
<ul>
<li>使用<code>create-next-app</code>设置 Next.js 项目</li>
<li>Next.js 中的路由系统</li>
<li><a href="https://blog.logrocket.com/a-deep-dive-into-css-modules/">使用 CSS 模块进行造型</a></li>
<li>使用<code>&lt;Image&gt;</code>组件进行图像优化</li>
<li>为全局状态管理集成 Redux 工具包</li>
<li>静态生成和服务器端呈现</li>
<li>Next.js API 路由</li>
<li>用<code>getStaticProps()</code>、<code>getStaticPaths</code>和<code>getServerSideProps()</code>取数据</li>
</ul>
<p>你可以在这个 GitHub 库中找到已完成项目的<a href="https://nextjs-shopping-cart-ruby.vercel.app/">源代码，以及部署在 Vercel </a>上的<a href="https://nextjs-shopping-cart-ruby.vercel.app/">现场演示。</a></p>
<h2>开始使用<code>create-next-app</code></h2>
<p>要使用<code>create-next-app</code>创建新的 Next.js 应用程序，请在终端上运行以下命令，并等待安装过程完成:</p>
<pre>npx create-next-app shopping-cart
</pre>
<p>完成后，通过运行<code>npm run dev</code>脚本启动开发服务器。默认情况下，Next.js 应用程序的文件夹结构如下所示:</p>
<pre>|-- node_modules
|-- package.json
|-- package-lock.json
|-- pages
|   |-- api
|   |   |-- hello.js
|   |-- _app.js
|   |-- index.js
|-- public
|   |-- favicon.ico
|   |-- vercel.svg
|-- README.md
|-- styles
    |-- globals.css
    |-- Home.module.css
</pre>
<p>为了在没有任何现有样式的情况下开始，我们可以通过从<code>styles/globals.css</code>和<code>styles/Home.module.css</code>中移除样式，并用一个简单的 React 功能组件替换<code>pages/index.js</code>中的代码，来清理初始样板代码，如下所示:</p>
<pre>const HomePage = () =&gt; {
  return (
    &lt;main&gt;
      &lt;h1&gt;Shopping Cart&lt;/h1&gt;
    &lt;/main&gt;
  );
};
export default HomePage;
</pre>
<p>此外，我们可以将所有的全局样式放在<code>styles/global.css</code>文件中。这些样式将应用于整个应用程序。现在，让我们添加一些基本样式，并从谷歌字体导入<a href="https://fonts.google.com/specimen/Open+Sans"> Open Sans 字体:</a></p>
<pre>@import url('https://fonts.googleapis.com/css2?family=Open+Sans:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1265757a6652212222">[email protected]</a>;400;600;700&amp;display=swap');

*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Open Sans', sans-serif;
}
</pre>
<p>在整个项目中，我们将构建四个不同的页面:</p>
<ul>
<li>一个主页，带有一个显示所有可用类别的登录页面</li>
<li>展示特定类别的所有产品的类别页面</li>
<li>展示所有类别的所有产品的商店页面</li>
<li>购物车页面管理购物车中的所有商品</li>
</ul>
<p>但是，在构建这些页面之前，让我们构建一些常见的组件，如导航栏和页脚。</p>
<h2><code>Navbar</code>和<code>Footer</code>组件</h2>
<p>要开始添加<code>Navbar</code>和<code>Footer</code>组件，在项目的根文件夹中创建一个名为<code>components</code>的新文件夹。这使我们所有的组件都在一个地方，并保持我们的代码有组织。</p>
<p>在文件夹中，根据您的喜好创建一个名为<code>Navbar.js</code>或<code>Navbar.jsx</code>的新文件:</p>
<pre>import Link from 'next/link';

const Navbar = () =&gt; {
  return (
    &lt;nav&gt;
      &lt;h6&gt;GamesKart&lt;/h6&gt;
      &lt;ul&gt;
        &lt;li&gt;
          &lt;Link href="/"&gt;Home&lt;/Link&gt;
        &lt;/li&gt;
        &lt;li&gt;
          &lt;Link href="/shop"&gt;Shop&lt;/Link&gt;
        &lt;/li&gt;
        &lt;li&gt;
          &lt;Link href="/cart"&gt;Cart&lt;/Link&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  );
};

export default Navbar;
</pre>
<p>来自<code>next/link</code>的<code>&lt;Link&gt;</code>标签让用户可以浏览应用程序的不同页面。这类似于 React 应用中使用的<code>react-router-dom</code>中的<code>&lt;Link&gt;</code>标签。</p>
<p>但是，Next.js <code>&lt;Link&gt;</code>标签要求我们传递<code>href</code>属性，而不是使用<code>to</code>属性。</p>
<h3>造型<code>Navbar</code>和<code>Footer</code></h3>
<p>要设置<code>Navbar</code>的样式，在<code>styles</code>文件夹中创建一个名为<code>Navbar.module.css</code>的新文件，并在文件中粘贴以下样式。您可以根据自己的喜好随意改变风格:</p>
<pre>.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 2rem;
}
.logo {
  font-size: 1.2rem;
  font-weight: 600;
  text-transform: uppercase;
}
.links {
  display: flex;
}
.navlink {
  list-style: none;
  margin: 0 0.75rem;
  text-transform: uppercase;
}
.navlink a {
  text-decoration: none;
  color: black;
}
.navlink a:hover {
  color: #f9826c;
}
</pre>
<p>现在，要使用组件内部的样式，导入 CSS 模块，并将<code>className</code>添加到 JSX。修改<code>Navbar.jsx</code>中的代码，并进行以下更改:</p>
<pre>import Link from 'next/link';
import styles from '../styles/Navbar.module.css';

const Navbar = () =&gt; {
  return (
    &lt;nav className={styles.navbar}&gt;
      &lt;h6 className={styles.logo}&gt;GamesKart&lt;/h6&gt;
      &lt;ul className={styles.links}&gt;
        &lt;li className={styles.navlink}&gt;
          &lt;Link href="/"&gt;Home&lt;/Link&gt;
        &lt;/li&gt;
        &lt;li className={styles.navlink}&gt;
          &lt;Link href="/shop"&gt;Shop&lt;/Link&gt;
        &lt;/li&gt;
        &lt;li className={styles.navlink}&gt;
          &lt;Link href="/cart"&gt;Cart&lt;/Link&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  );
};

export default Navbar;
</pre>
<p>完成了<code>Navbar</code>组件后，让我们继续构建<code>Footer</code>组件。</p>
<p>在<code>components</code>文件夹中创建一个名为<code>Footer.jsx</code>的新文件:</p>
<pre>import styles from 'Footer.module.css';

const Footer = () =&gt; {
  return (
    &lt;footer className={styles.footer}&gt;
      Copyright &lt;span className={styles.brand}&gt;GamesKart&lt;/span&gt;{' '}
      {new Date().getFullYear()}
    &lt;/footer&gt;
  );
};
</pre>
<p>然后，将<code>Footer.module.css</code>添加到<code>styles</code>文件夹中:</p>
<pre>.footer {
  padding: 1rem 0;
  color: black;
  text-align: center;
}
.brand {
  color: #f9826c;
}
</pre>
<p>最后，在<code>pages/_app.js</code>中导入<code>Navbar</code>和<code>Footer</code>组件，这样它们在应用程序的所有页面上都可见。或者，我们可以将这些组件分别导入到我们希望显示它们的每个页面中:</p>
<pre>import Navbar from '../components/Navbar';
import Footer from '../components/Footer';
import '../styles/globals.css';

function MyApp({ Component, pageProps }) {
  return (
    &lt;div&gt;
      &lt;Navbar /&gt;
      &lt;Component {...pageProps} /&gt;
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
}

export default MyApp;
</pre>
<p>要查看我们的组件的运行情况，请在运行<code>npm run dev</code>脚本后转到<a href="http://localhost:3000" rel="nofollow"> http://localhost:3000 </a>。然而，所有的组件都被挤到了页面的顶部。</p>
<p><img data-attachment-id="57840" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/view-main-page-components/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="View main page components" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components.png" decoding="async" class="aligncenter size-full wp-image-57840 jetpack-lazy-image" src="../Images/b8b21f09d29d4f3f2e02f3063fa0f7ce.png" alt="View The Main Page Components, However, They Are Unfinished" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components-300x184.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="57840" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/view-main-page-components/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="View main page components" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-57840" src="../Images/b8b21f09d29d4f3f2e02f3063fa0f7ce.png" alt="View The Main Page Components, However, They Are Unfinished" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components-300x184.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/View-main-page-components.png"/></noscript>
<p>这可以通过将我们的内容包装在一个设置为<code>column</code>的 flex 容器中，并以一种间隔的方式调整主轴上的内容来解决。只需在<code>_app.js</code>的第 7 行的 div 中添加一个新类:</p>
<pre>&lt;div className="wrapper"&gt; // Line 7
</pre>
<p>然后，在<code>globals.css</code>中对其进行全局样式化:</p>
<pre>// Add this code at the bottom of globals.css
.wrapper {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
</pre>
<p>就这样，我们已经解决了这个问题。</p>
<p><img data-attachment-id="57842" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/fixing-main-page-components/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fixing main page components" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components.png" decoding="async" class="aligncenter size-full wp-image-57842 jetpack-lazy-image" src="../Images/69d2512382ae52007eecfe8a1ced1d19.png" alt="Fixing Main Page Components With Styling" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components-300x184.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="57842" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/fixing-main-page-components/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fixing main page components" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-57842" src="../Images/69d2512382ae52007eecfe8a1ced1d19.png" alt="Fixing Main Page Components With Styling" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components-300x184.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Fixing-main-page-components.png"/></noscript>
<p>让我们继续构建主页。</p>
<h2>构建主页</h2>
<p>在主页上，将显示 Xbox、PS5、Switch、PC 和 accessories 产品类别的五张卡片。让我们从创建一个<code>CategoryCard</code>组件开始。</p>
<p>在<code>components</code>文件夹中创建两个名为<code>CategoryCard.jsx</code>的新文件，在<code>styles</code>文件夹中创建两个名为<code>CategoryCard.module.css</code>的新文件。</p>
<p>将以下代码粘贴到<code>CategoryCard.jsx</code>文件中:</p>
<pre>import Link from 'next/link';
import Image from 'next/image';
import styles from '../styles/CategoryCard.module.css';

const CategoryCard = ({ image, name }) =&gt; {
  return (
    &lt;div className={styles.card}&gt;
      &lt;Image className={styles.image} src={image} height={700} width={1300} /&gt;
      &lt;Link href={`/category/${name.toLowerCase()}`}&gt;
        &lt;div className={styles.info}&gt;
          &lt;h3&gt;{name}&lt;/h3&gt;
          &lt;p&gt;SHOP NOW&lt;/p&gt;
        &lt;/div&gt;
      &lt;/Link&gt;
    &lt;/div&gt;
  );
};
export default CategoryCard;
</pre>
<p>这个组件有两个参数:显示的图像和类别的名称。Next.js 中内置了<code>&lt;Image&gt;</code>组件来提供图像优化。</p>
<p>将下一个代码序列粘贴到<code>CategoryCard.module.css</code>文件中:</p>
<pre>.card {
  margin: 0.5rem;
  flex: 1 1 auto;
  position: relative;
}
.image {
  object-fit: cover;
  border: 2px solid black;
  transition: all 5s cubic-bezier(0.14, 0.96, 0.91, 0.6);
}
.info {
  position: absolute;
  top: 50%;
  left: 50%;
  background: white;
  padding: 1.5rem;
  text-align: center;
  transform: translate(-50%, -50%);
  opacity: 0.8;
  border: 1px solid black;
  cursor: pointer;
}
.card:hover .image {
  transform: scale(1.2);
}
.card:hover .info {
  opacity: 0.9;
}
</pre>
<p>将<code>CategoryCard</code>组件导入到<code>index.js</code>页面(我们的主页)中，以测试我们新创建的组件:</p>
<pre>import CategoryCard from '../components/CategoryCard';
import styles from '../styles/Home.module.css';

const HomePage = () =&gt; {
  return (
    &lt;main className={styles.container}&gt;
      &lt;div className={styles.small}&gt;
        &lt;CategoryCard image="https://imgur.com/uKQqsuA.png" name="Xbox" /&gt;
        &lt;CategoryCard image="https://imgur.com/3Y1DLYC.png" name="PS5" /&gt;
        &lt;CategoryCard image="https://imgur.com/Dm212HS.png" name="Switch" /&gt;
      &lt;/div&gt;
      &lt;div className={styles.large}&gt;
        &lt;CategoryCard image="https://imgur.com/qb6IW1f.png" name="PC" /&gt;
        &lt;CategoryCard
          image="https://imgur.com/HsUfuRU.png"
          name="Accessories"
        /&gt;
      &lt;/div&gt;
    &lt;/main&gt;
  );
};

export default HomePage;
</pre>
<p>对于样式，将 CSS 代码添加到<code>styles</code>文件夹中的<code>Home.module.css</code>:</p>
<pre>.container {
  padding: 0 2rem;
}
.small {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
}
.large {
  display: grid;
  grid-template-columns: 1fr 1fr;
}
</pre>
<p>虽然我们添加了样式，但是我们会遇到一个错误:</p>
<p><img data-attachment-id="57845" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/error-message-styling/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Error message styling" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling.png" decoding="async" class="aligncenter size-full wp-image-57845 jetpack-lazy-image" src="../Images/57dbb3f779150a9bbe5a31f8ff45ce5b.png" alt="Error Message From Adding Styling" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling-300x184.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="57845" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/error-message-styling/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Error message styling" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-57845" src="../Images/57dbb3f779150a9bbe5a31f8ff45ce5b.png" alt="Error Message From Adding Styling" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling-300x184.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Error-message-styling.png"/></noscript>
<p>修复这个问题很简单，<a href="https://nextjs.org/docs/messages/next-image-unconfigured-host">错误消息包含一个到 Next.js 文档</a>的链接来解释和修复错误。</p>
<p>但是，对于本教程，在项目的根文件夹中创建一个名为<code>next.config.js</code>的新文件，并添加以下代码:</p>
<pre>module.exports = {
  images: {
    domains: ['imgur.com'],
  },
};
</pre>
<h3>添加图像</h3>
<p>由于我们使用<code>imgur.com</code>来托管我们的图像，我们必须将它们添加到要优化的<code>domains</code>数组中，确保外部 URL 不会被滥用。</p>
<p>完成后，重新启动开发服务器以启动更改。这样，我们就成功地建立了主页。</p>
<p><img data-attachment-id="57847" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/final-home-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final home page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page.png" decoding="async" class="aligncenter size-full wp-image-57847 jetpack-lazy-image" src="../Images/2473d5582dc989eda6c4449ace7370d9.png" alt="Final Home Page Layout" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page-300x184.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="57847" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/final-home-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final home page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-57847" src="../Images/2473d5582dc989eda6c4449ace7370d9.png" alt="Final Home Page Layout" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page-300x184.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-home-page.png"/></noscript>
<h2>使用 Next.js API 路由构建 API</h2>
<p>在进入其他页面之前，我们必须构建一个 API 来获取产品。虽然 Next.js 是一个 React 框架，但我们可以利用它内置的 API routes 特性来构建一个简单的 API。</p>
<p>对于这个项目，我们需要两条 API 路线:</p>
<ol>
<li>从…提取产品</li>
<li>获取属于特定类别的产品</li>
</ol>
<p>在我们 Next.js 应用程序的文件夹结构中，<code>pages</code>文件夹中有一个名为<code>api</code>的文件夹。删除<code>api</code>文件夹中所有现存的文件，因为我们将从头开始创建我们的文件。</p>
<p>为了简单起见，我们将把商店的所有产品存储在一个名为<code>data.json</code>的 JSON 文件中。</p>
<p>但是，您可以使用数据库或带有 Next.js 的<a href="https://blog.logrocket.com/content-management-in-next-js-with-sanity-cms/"> headless CMS 来添加、编辑或删除没有 JSON 文件的产品。</a></p>
<p>在<code>api</code>文件夹下新建一个名为<code>products</code>的文件夹，然后到<code>products</code>文件夹下新建三个文件:<code>index.js</code>、<code>[category].js</code>和<code>data.json</code>。</p>
<h3><code>index.js</code></h3>
<p>我们将处理的第一个文件是<code>index.js</code>，它对应于<code>/api/products</code>路线，并获取所有类别的所有产品:</p>
<pre>import data from './data.json';

export function getProducts() {
  return data;
}

export default function handler(req, res) {
  if (req.method !== 'GET') {
    res.setHeader('Allow', ['GET']);
    res.status(405).json({ message: `Method ${req.method} is not allowed` });
  } else {
    const products = getProducts();
    res.status(200).json(products);
  }
}
</pre>
<p>在这个 API 路径中，我们只是导入<code>data.json</code>文件并检查请求的 HTTP 方法。</p>
<p>因为我们只想允许<code>GET</code>请求，所以我们可以使用一个<code>if</code>语句来检查请求对象的方法属性。对于<code>GET</code>的请求，我们可以用 JSON 格式的产品数据来响应。</p>
<p>我们可以通过访问<a href="http://localhost:3000/api/products" rel="nofollow">http://localhost:3000/API/products</a>来访问这个 API 路由。</p>
<h3><code>[category].js</code></h3>
<p>第二个文件是<code>[category].js</code>，对应于<code>/api/products/&lt;category&gt;</code>路线，取用户选择的一个类别的所有产品。文件名中的方括号表示这是一条动态路由:</p>
<pre>import data from './data.json';

export function getProductsByCategory(category) {
  const products = data.filter((product) =&gt; product.category === category);
  return products;
}

export default function handler(req, res) {
  if (req.method !== 'GET') {
    res.setHeader('Allow', ['GET']);
    res.status(405).json({ message: `Method ${req.method} is not allowed` });
  } else {
    const products = getProductsByCategory(req.query.category);
    res.status(200).json(products);
  }
}
</pre>
<p>这个 API 路线与前面的路线相似，但是有一个主要的变化。因为我们只想要特定类别的产品，所以我们可以使用<code>filter()</code> JavaScript 数组方法来检查产品的类别是否与查询的类别<code>req.query.category</code>匹配。</p>
<p>我们可以通过访问<a href="http://localhost:3000/api/products/xbox" rel="nofollow">http://localhost:3000/API/products/Xbox</a>或任何其他类别、<code>ps5</code>、<code>switch</code>、<code>pc</code>或<code>accessories</code>来访问这个 API 路线。</p>
<h3><code>data.json</code></h3>
<p>最后，我们将添加<code>data.json</code>，这是一个简单的 JSON 文件，包含所有可用产品及其详细信息的数组:</p>
<pre>[
  {
    "id": 1,
    "product": "Cyberpunk 2077",
    "category": "xbox",
    "image": "https://imgur.com/3CF1UhY.png",
    "price": 36.49
  },
  {
    "id": 2,
    "product": "Grand Theft Auto 5",
    "category": "xbox",
    "image": "https://imgur.com/BqNWnDB.png",
    "price": 21.99
  },
  {
    "id": 3,
    "product": "Minecraft",
    "category": "xbox",
    "image": "https://imgur.com/LXnUnd2.png",
    "price": 49.99
  },
  {
    "id": 4,
    "product": "PUBG",
    "category": "xbox",
    "image": "https://imgur.com/Ondg3Jn.png",
    "price": 5.09
  },
  {
    "id": 5,
    "product": "FIFA 21",
    "category": "xbox",
    "image": "https://imgur.com/AzT9YMP.png",
    "price": 17.49
  },
  {
    "id": 6,
    "product": "Battlefield 5",
    "category": "xbox",
    "image": "https://imgur.com/X3MQNVs.png",
    "price": 29.35
  },
  {
    "id": 7,
    "product": "Watch Dogs 2",
    "category": "xbox",
    "image": "https://imgur.com/v3lqCEb.png",
    "price": 18.99
  },
  {
    "id": 8,
    "product": "Fortnite",
    "category": "ps5",
    "image": "https://imgur.com/3lTxDpl.png",
    "price": 29.99
  },
  {
    "id": 9,
    "product": "Call of Duty: Black Ops",
    "category": "ps5",
    "image": "https://imgur.com/4GvUw3G.png",
    "price": 69.99
  },
  {
    "id": 10,
    "product": "NBA2K21 Next Generation",
    "category": "ps5",
    "image": "https://imgur.com/Mxjvkws.png",
    "price": 69.99
  },
  {
    "id": 11,
    "product": "Spider-Man Miles Morales",
    "category": "ps5",
    "image": "https://imgur.com/guV5cUF.png",
    "price": 29.99
  },
  {
    "id": 12,
    "product": "Resident Evil Village",
    "category": "ps5",
    "image": "https://imgur.com/1CxJz8E.png",
    "price": 59.99
  },
  {
    "id": 13,
    "product": "Assassin's Creed Valhalla",
    "category": "ps5",
    "image": "https://imgur.com/xJD093X.png",
    "price": 59.99
  },
  {
    "id": 14,
    "product": "Animal Crossing",
    "category": "switch",
    "image": "https://imgur.com/1SVaEBk.png",
    "price": 59.99
  },
  {
    "id": 15,
    "product": "The Legend of Zelda",
    "category": "switch",
    "image": "https://imgur.com/IX5eunc.png",
    "price": 59.99
  },
  {
    "id": 16,
    "product": "Stardew Valley",
    "category": "switch",
    "image": "https://imgur.com/aL3nj5t.png",
    "price": 14.99
  },
  {
    "id": 17,
    "product": "Mario Golf Super Rush",
    "category": "switch",
    "image": "https://imgur.com/CPxlyEg.png",
    "price": 59.99
  },
  {
    "id": 18,
    "product": "Super Smash Bros",
    "category": "switch",
    "image": "https://imgur.com/ZuLatzs.png",
    "price": 59.99
  },
  {
    "id": 19,
    "product": "Grand Theft Auto 5",
    "category": "pc",
    "image": "https://imgur.com/9LRil4N.png",
    "price": 29.99
  },
  {
    "id": 20,
    "product": "Battlefield V",
    "category": "pc",
    "image": "https://imgur.com/T3v629h.png",
    "price": 39.99
  },
  {
    "id": 21,
    "product": "Red Dead Redemption 2",
    "category": "pc",
    "image": "https://imgur.com/aLObdQK.png",
    "price": 39.99
  },
  {
    "id": 22,
    "product": "Flight Simulator 2020",
    "category": "pc",
    "image": "https://imgur.com/2IeocI8.png",
    "price": 59.99
  },
  {
    "id": 23,
    "product": "Forza Horizon 4",
    "category": "pc",
    "image": "https://imgur.com/gLQsp6N.png",
    "price": 59.99
  },
  {
    "id": 24,
    "product": "Minecraft",
    "category": "pc",
    "image": "https://imgur.com/qm1gaGD.png",
    "price": 29.99
  },
  {
    "id": 25,
    "product": "Rainbow Six Seige",
    "category": "pc",
    "image": "https://imgur.com/JIgzykM.png",
    "price": 7.99
  },
  {
    "id": 26,
    "product": "Xbox Controller",
    "category": "accessories",
    "image": "https://imgur.com/a964vBm.png",
    "price": 59.0
  },
  {
    "id": 27,
    "product": "Xbox Controller",
    "category": "accessories",
    "image": "https://imgur.com/ntrEPb1.png",
    "price": 69.0
  },
  {
    "id": 28,
    "product": "Gaming Keyboard",
    "category": "accessories",
    "image": "https://imgur.com/VMe3WBk.png",
    "price": 49.99
  },
  {
    "id": 29,
    "product": "Gaming Mouse",
    "category": "accessories",
    "image": "https://imgur.com/wvpHOCm.png",
    "price": 29.99
  },
  {
    "id": 30,
    "product": "Switch Joy-Con",
    "category": "accessories",
    "image": "https://imgur.com/faQ0IXH.png",
    "price": 13.99
  }
]
</pre>
<p>值得注意的是，我们将只从这个 JSON 文件中读取，而不会通过 API 路由写入或修改任何信息。</p>
<p>如果要写或修改信息，使用数据库会更合适。</p>
<p>以下是这些更改后的文件夹结构:</p>
<pre>|-- api 
|   |-- products 
|       |-- [category].js 
|       |-- data.json 
|       |-- index.js 
|-- _app.js
|-- index.js
</pre>
<p>现在我们已经设置了简单的 API，让我们再构建两个页面:商店页面和类别页面，它们使用我们的 API 路由。</p>
<h2>添加商店和类别页面</h2>
<p>商店页面包含商店的所有产品，而类别页面是动态的，只展示特定类别的产品。</p>
<p>在这些页面上，我们将使用自定义的<code>ProductCard</code>组件。让我们从在<code>components</code>文件夹中创建一个名为<code>ProductCard.jsx</code>的新文件开始:</p>
<pre>import Image from 'next/image';
import styles from '../styles/ProductCard.module.css';

const ProductCard = ({ product }) =&gt; {
  return (
    &lt;div className={styles}&gt;
      &lt;Image src={product.image} height={300} width={220} /&gt;
      &lt;h4 className={styles.title}&gt;{product.product}&lt;/h4&gt;
      &lt;h5 className={styles.category}&gt;{product.category}&lt;/h5&gt;
      &lt;p&gt;$ {product.price}&lt;/p&gt;
      &lt;button className={styles.button}&gt;Add to Cart&lt;/button&gt;
    &lt;/div&gt;
  );
};

export default ProductCard;
</pre>
<p>这个简单的组件通过一个简单的<strong>添加到购物车</strong>按钮显示产品图片、名称、类别和价格。这个按钮目前没有任何功能，但一旦我们<a href="https://blog.logrocket.com/why-use-redux-reasons-with-clear-examples-d21bffd5835/">将 Redux 集成到我们的应用</a>中，这种情况就会改变。</p>
<p>将下面给出的样式粘贴到<code>styles</code>文件夹中一个名为<code>ProductCard.module.css</code>的新文件中:</p>
<pre>.card {
  display: flex;
  flex-direction: column;
}

.title {
  font-size: 1rem;
  font-weight: 600;
}

.category {
  font-size: 0.8rem;
  text-transform: uppercase;
}
.button {
  width: 100%;
  margin-top: 0.5rem;
  padding: 0.75rem 0;
  background: transparent;
  text-transform: uppercase;
  border: 2px solid black;
  cursor: pointer;
}
.button:hover {
  background: black;
  color: white;
}
</pre>
<p>现在，我们准备构建实际的页面。</p>
<h3>用<code>shop.jsx</code>建立商店页面</h3>
<p>让我们从商店页面开始。在<code>pages</code>文件夹中创建一个名为<code>shop.jsx</code>的新文件:</p>
<pre>import ProductCard from '../components/ProductCard';
import styles from '../styles/ShopPage.module.css';
import { getProducts } from './api/products/index';

const ShopPage = ({ products }) =&gt; {
  return (
    &lt;div className={styles.container}&gt;
      &lt;h1 className={styles.title}&gt;All Results&lt;/h1&gt;
      &lt;div className={styles.cards}&gt;
        {products.map((product) =&gt; (
          &lt;ProductCard key={product.id} product={product} /&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default ShopPage;

export async function getStaticProps() {
  const products = await getProducts();
  return { props: { products } };
}
</pre>
<h4>静态生成用<code>getStaticProps()</code></h4>
<p>对于这个页面，我们将获取所有产品，并在构建时使用 Next.js 数据获取方法<code>getStaticProps()</code>预先呈现页面。</p>
<p>获取产品后，它们作为道具被发送到页面组件，在那里我们可以映射产品数组并呈现每个产品的<code>ProductCard</code>组件。</p>
<p>如果使用数据库并期望产品数据随时间变化，使用带有<code>revalidate</code>属性的<a href="https://blog.logrocket.com/incremental-static-regeneration-with-next-js/">增量静态再生</a>功能动态更新产品数据，确保其保持最新。</p>
<figure id="attachment_57853" aria-describedby="caption-attachment-57853" class="wp-caption aligncenter"><img data-attachment-id="57853" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/products-pre-rendered/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Products pre-rendered" data-image-description="" data-image-caption="&lt;p&gt;Products Pre-Rendered Under All Results.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered.png" decoding="async" class="size-full wp-image-57853 jetpack-lazy-image" src="../Images/d75e79f2d37151c476f706cd24a95c25.png" alt="Products Pre-Rendered Under All Results" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered-300x184.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="57853" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/products-pre-rendered/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Products pre-rendered" data-image-description="" data-image-caption="&lt;p&gt;Products Pre-Rendered Under All Results.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered.png" decoding="async" loading="lazy" class="size-full wp-image-57853" src="../Images/d75e79f2d37151c476f706cd24a95c25.png" alt="Products Pre-Rendered Under All Results" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered-300x184.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Products-pre-rendered.png"/></noscript><figcaption id="caption-attachment-57853" class="wp-caption-text">Products Pre-Rendered Under <strong>ALL RESULTS</strong>.</figcaption></figure>
<h3>用<code>[category].jsx</code>构建分类页面</h3>
<p>让我们继续构建使用动态路由的类别页面。在<code>pages</code>文件夹中创建一个名为<code>category</code>的新文件夹。现在，在这个文件夹中，创建一个名为<code>[category].jsx</code>的新文件:</p>
<pre>import { useRouter } from 'next/router';
import ProductCard from '../../components/ProductCard';
import styles from '../../styles/ShopPage.module.css';
import { getProductsByCategory } from '../api/products/[category]';

const CategoryPage = ({ products }) =&gt; {
  const router = useRouter();
  return (
    &lt;div className={styles.container}&gt;
      &lt;h1 className={styles.title}&gt;Results for {router.query.category}&lt;/h1&gt;
      &lt;div className={styles.cards}&gt;
        {products.map((product) =&gt; (
          &lt;ProductCard key={product.id} product={product} /&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default CategoryPage;

export async function getServerSideProps(ctx) {
  const category = ctx.query.category;
  const products = await getProductsByCategory(category);
  return { props: { products } };
}
</pre>
<p>要查看此页面，请访问<a href="http://localhost:3000/category/xyz" rel="nofollow">http://localhost:3000/category/xyz</a>，用我们指定的任何类别替换“XYZ”。</p>
<h4>使用<code>getServerSideProps()</code>进行服务器端渲染</h4>
<p>在 category 页面上，我们将使用另一种叫做<code>getServerSideProps()</code>的数据获取方法，它使用服务器端呈现。</p>
<p>与前面的数据获取方法不同，<code>getServerSideProps()</code>在请求时获取数据并预呈现页面，而不是在构建时。这个方法在每个请求上运行，这意味着产品数据不会过时。</p>
<figure id="attachment_57856" aria-describedby="caption-attachment-57856" class="wp-caption aligncenter"><img data-attachment-id="57856" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/pc-category-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="PC category page" data-image-description="" data-image-caption="&lt;p&gt;PC category page.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page.png" decoding="async" class="size-full wp-image-57856 jetpack-lazy-image" src="../Images/7b1b8e16ef827e175e6723b0d3b251ad.png" alt="PC Category Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page-300x184.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="57856" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/pc-category-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="PC category page" data-image-description="" data-image-caption="&lt;p&gt;PC category page.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page.png" decoding="async" loading="lazy" class="size-full wp-image-57856" src="../Images/7b1b8e16ef827e175e6723b0d3b251ad.png" alt="PC Category Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page-300x184.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/PC-category-page.png"/></noscript><figcaption id="caption-attachment-57856" class="wp-caption-text">PC category page.</figcaption></figure>
<h3>产品和类别页面的样式</h3>
<p>最后，这是我们刚刚构建的产品和类别页面的样式表:</p>
<pre>.title {
  font-size: 2rem;
  text-transform: uppercase;
  margin: 0 1rem 1rem;
}
.container {
  padding: 0 2rem;
  margin-bottom: 2rem;
}
.cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 2.5rem 1rem;
  place-items: center;
}
</pre>
<h2>使用 Redux 进行全局状态管理</h2>
<p>虽然我们的应用程序由于其有限的功能而不需要全局状态管理系统，但是如果我们添加更多的功能并随后处理更多的状态，我们将需要一个管理系统。</p>
<p>所以，让我们<a href="https://blog.logrocket.com/smarter-redux-with-redux-toolkit/">用 Redux Toolkit </a>把 Redux 集成到我们的 Next.js app 中。Redux Toolkit 是集成 Redux 的现代推荐方式。</p>
<p>要添加 Redux，请停止 Next.js 开发服务器，并使用以下命令安装 Redux Toolkit:</p>
<pre>npm install @reduxjs/toolkit react-redux
</pre>
<p>安装完成后，我们可以重启 Next.js 开发服务器并配置 Redux。</p>
<h3>用<code>createSlice()</code>添加购物车</h3>
<p>为了保持有序并将 Redux 逻辑与应用程序的其余部分分开，在项目目录的根目录下创建一个名为<code>redux</code>的新文件夹。</p>
<p>这样，我们将执行四个操作:</p>
<ol>
<li>将商品添加到购物车</li>
<li>增加购物车中商品的数量</li>
<li>减少购物车中商品的数量</li>
<li>从购物车中完全移除商品</li>
</ol>
<p>让我们创建一个 Redux 片来处理这些动作和购物车缩减器。在<code>redux</code>文件夹中创建一个名为<code>cart.slice.js</code>的新文件。没有必要以这种方式命名文件，但它可以保持一切有序:</p>
<pre>import { createSlice } from '@reduxjs/toolkit';

const cartSlice = createSlice({
  name: 'cart',
  initialState: [],
  reducers: {
    addToCart: (state, action) =&gt; {
      const itemExists = state.find((item) =&gt; item.id === action.payload.id);
      if (itemExists) {
        itemExists.quantity++;
      } else {
        state.push({ ...action.payload, quantity: 1 });
      }
    },
    incrementQuantity: (state, action) =&gt; {
      const item = state.find((item) =&gt; item.id === action.payload);
      item.quantity++;
    },
    decrementQuantity: (state, action) =&gt; {
      const item = state.find((item) =&gt; item.id === action.payload);
      if (item.quantity === 1) {
        const index = state.findIndex((item) =&gt; item.id === action.payload);
        state.splice(index, 1);
      } else {
        item.quantity--;
      }
    },
    removeFromCart: (state, action) =&gt; {
      const index = state.findIndex((item) =&gt; item.id === action.payload);
      state.splice(index, 1);
    },
  },
});

export const cartReducer = cartSlice.reducer;

export const {
  addToCart,
  incrementQuantity,
  decrementQuantity,
  removeFromCart,
} = cartSlice.actions;
</pre>
<p>Redux Toolkit 的<code>createSlice()</code>方法接受切片的名称、其初始状态和 reducer 函数，以自动生成对应于 reducer 和状态的动作创建者和动作类型。</p>
<h4><code>addToCart</code>减速器功能</h4>
<p><code>addToCart</code> reducer 函数接收产品对象作为有效负载，并使用 JavaScript <code>find()</code>数组方法检查购物车中是否已经存在产品。</p>
<p>如果它确实存在，我们可以通过<code>1</code>增加购物车中产品的数量。如果没有，我们可以使用<code>push()</code>数组方法将其添加到购物车中，并将数量设置为<code>1</code>。</p>
<h4><code>incrementQuantity</code>减速器功能</h4>
<p><code>incrementQuantity</code>一个简单的 reducer 函数，接收一个产品 ID 作为有效负载，并使用它来查找购物车中的商品。然后物品的数量会增加<code>1</code>。</p>
<h4><code>decrementQuantity</code>减速器功能</h4>
<p><code>decrementQuantity</code>与<code>incrementQuantity</code>减压器功能类似，但在减量前必须检查产品数量是否为<code>1</code>。</p>
<p>如果是<code>1</code>，我们可以使用<code>splice()</code>方法从购物车中清除产品，因为它不能有<code>0</code>数量。但是，如果它的数量不是<code>1</code>，我们可以简单地将其减少<code>1</code>。</p>
<h4><code>removeFromCart</code>减速器功能</h4>
<p><code>removeFromCart</code> reducer 函数接收产品 ID 作为有效负载，并使用<code>find()</code>和<code>splice()</code>方法从购物车中移除产品。</p>
<p>最后，我们可以从<code>cartSlice.reducer</code>导出缩减器，并将它传递给我们的 Redux 存储和来自<code>cartSlice.actions</code>的动作，以便在我们的组件中使用。</p>
<h3>配置 Redux 存储</h3>
<p>由于 Redux Toolkit 中的<code>configureStore()</code>方法，配置 Redux 存储是一个简单的过程。在<code>redux</code>文件夹中创建一个名为<code>store.js</code>的新文件来保存与 Redux 存储相关的所有逻辑:</p>
<pre>import { configureStore } from '@reduxjs/toolkit';
import { cartReducer } from './cart.slice';

const reducer = {
  cart: cartReducer,
};

const store = configureStore({
  reducer,
});

export default store;
</pre>
<p>现在，转到<code>_app.js</code>文件，用来自<code>react-redux</code>的<code>&lt;Provider&gt;</code>包装我们的组件，它将我们的 Redux 存储作为道具，因此我们应用程序中的所有组件都可以使用全局状态:</p>
<pre>import { Provider } from 'react-redux';       // Importing Provider
import Navbar from '../components/Navbar';
import Footer from '../components/Footer';
import store from '../redux/store';           // Importing redux store
import '../styles/globals.css';

function MyApp({ Component, pageProps }) {
  return (
    &lt;Provider store={store}&gt;
      &lt;div className="wrapper"&gt;
        &lt;Navbar /&gt;
        &lt;Component {...pageProps} /&gt;
        &lt;Footer /&gt;
      &lt;/div&gt;
    &lt;/Provider&gt;
  );
}

export default MyApp;
</pre>
<p>瞧，我们已经完成了将 Redux 集成到我们的 Next.js 应用程序中以进行全局状态管理。</p>
<h2><code>addToCart</code>功能性</h2>
<p>现在，让我们使用<code>ProductCard</code>组件中的<code>addToCart</code>动作向购物车添加一个产品。打开<code>ProductCard.jsx</code>组件，从<code>react-redux</code>导入<code>useDispatch</code>钩子，从<code>cart.slice.js</code>文件导入<code>addToCart</code>动作。</p>
<p>目前，<strong>添加到购物车</strong>按钮不做任何事情，但是我们可以在用户点击按钮时调度<code>addToCart</code>动作。为此，将以下内容添加到<code>ProductCard.jsx</code>:</p>
<pre>import Image from 'next/image';
import { useDispatch } from 'react-redux';
import { addToCart } from '../redux/cart.slice';
import styles from '../styles/ProductCard.module.css';

const ProductCard = ({ product }) =&gt; {

  const dispatch = useDispatch();

  return (
    &lt;div className={styles}&gt;
      &lt;Image src={product.image} height={300} width={220} /&gt;
      &lt;h4 className={styles.title}&gt;{product.product}&lt;/h4&gt;
      &lt;h5 className={styles.category}&gt;{product.category}&lt;/h5&gt;
      &lt;p&gt;$ {product.price}&lt;/p&gt;
      &lt;button
        onClick={() =&gt; dispatch(addToCart(product))}
        className={styles.button}
      &gt;
        Add to Cart
      &lt;/button&gt;
    &lt;/div&gt;
  );
};

export default ProductCard;
</pre>
<p>现在，每次我们点击按钮，一个产品添加到购物车。但是，我们还没有构建购物车页面，所以我们无法确认这种行为。</p>
<p>如果您的浏览器上安装了<a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd"> Redux Devtools 扩展，您可以使用它来监控状态</a>。</p>
<h2>构建购物车页面</h2>
<p>最后，让我们构建购物车应用程序的最后一个页面:购物车页面。像往常一样，在<code>pages</code>文件夹中创建一个名为<code>cart.jsx</code>的新文件。</p>
<p>随后，在样式表的<code>styles</code>文件夹中创建一个名为<code>CartPage.styles.css</code>的新文件。</p>
<p>首先从<code>react-redux</code>进口<code>useSelector</code>和<code>useDispatch</code>挂钩。</p>
<p><code>useSelector</code>钩子使用选择器函数从 Redux 存储中提取数据。然后，<code>useDispatch</code>钩子分派动作创建者:</p>
<pre>import Image from 'next/image';
// Importing hooks from react-redux
import { useSelector, useDispatch } from 'react-redux';
import styles from '../styles/CartPage.module.css';

const CartPage = () =&gt; {

  // Extracting cart state from redux store 
  const cart = useSelector((state) =&gt; state.cart);

  // Reference to the dispatch function from redux store
  const dispatch = useDispatch();

  return (
    &lt;div className={styles.container}&gt;
      {cart.length === 0 ? (
        &lt;h1&gt;Your Cart is Empty!&lt;/h1&gt;
      ) : (
        &lt;&gt;
          &lt;div className={styles.header}&gt;
            &lt;div&gt;Image&lt;/div&gt;
            &lt;div&gt;Product&lt;/div&gt;
            &lt;div&gt;Price&lt;/div&gt;
            &lt;div&gt;Quantity&lt;/div&gt;
            &lt;div&gt;Actions&lt;/div&gt;
            &lt;div&gt;Total Price&lt;/div&gt;
          &lt;/div&gt;
          {cart.map((item) =&gt; (
            &lt;div className={styles.body}&gt;
              &lt;div className={styles.image}&gt;
                &lt;Image src={item.image} height="90" width="65" /&gt;
              &lt;/div&gt;
              &lt;p&gt;{item.product}&lt;/p&gt;
              &lt;p&gt;$ {item.price}&lt;/p&gt;
              &lt;p&gt;{item.quantity}&lt;/p&gt;
              &lt;div className={styles.buttons}&gt;&lt;/div&gt;
              &lt;p&gt;$ {item.quantity * item.price}&lt;/p&gt;
            &lt;/div&gt;
          ))}
          &lt;h2&gt;Grand Total: $ {getTotalPrice()}&lt;/h2&gt;
        &lt;/&gt;
      )}
    &lt;/div&gt;
  );
};

export default CartPage;
</pre>
<p>我们还必须添加三个按钮，用于增加、减少和从购物车中删除商品。因此，让我们继续从 cart 切片导入<code>incrementQuantity</code>、<code>decrementQuantity</code>和<code>removeFromCart</code>:</p>
<pre>import Image from 'next/image';
import { useSelector, useDispatch } from 'react-redux';
// Importing actions from  cart.slice.js
import {
  incrementQuantity,
  decrementQuantity,
  removeFromCart,
} from '../redux/cart.slice';
import styles from '../styles/CartPage.module.css';

const CartPage = () =&gt; {

  const cart = useSelector((state) =&gt; state.cart);
  const dispatch = useDispatch();

  const getTotalPrice = () =&gt; {
    return cart.reduce(
      (accumulator, item) =&gt; accumulator + item.quantity * item.price,
      0
    );
  };

  return (
    &lt;div className={styles.container}&gt;
      {cart.length === 0 ? (
        &lt;h1&gt;Your Cart is Empty!&lt;/h1&gt;
      ) : (
        &lt;&gt;
          &lt;div className={styles.header}&gt;
            &lt;div&gt;Image&lt;/div&gt;
            &lt;div&gt;Product&lt;/div&gt;
            &lt;div&gt;Price&lt;/div&gt;
            &lt;div&gt;Quantity&lt;/div&gt;
            &lt;div&gt;Actions&lt;/div&gt;
            &lt;div&gt;Total Price&lt;/div&gt;
          &lt;/div&gt;
          {cart.map((item) =&gt; (
            &lt;div className={styles.body}&gt;
              &lt;div className={styles.image}&gt;
                &lt;Image src={item.image} height="90" width="65" /&gt;
              &lt;/div&gt;
              &lt;p&gt;{item.product}&lt;/p&gt;
              &lt;p&gt;$ {item.price}&lt;/p&gt;
              &lt;p&gt;{item.quantity}&lt;/p&gt;
              &lt;div className={styles.buttons}&gt;
                &lt;button onClick={() =&gt; dispatch(incrementQuantity(item.id))}&gt;
                  +
                &lt;/button&gt;
                &lt;button onClick={() =&gt; dispatch(decrementQuantity(item.id))}&gt;
                  -
                &lt;/button&gt;
                &lt;button onClick={() =&gt; dispatch(removeFromCart(item.id))}&gt;
                  x
                &lt;/button&gt;
              &lt;/div&gt;
              &lt;p&gt;$ {item.quantity * item.price}&lt;/p&gt;
            &lt;/div&gt;
          ))}
          &lt;h2&gt;Grand Total: $ {getTotalPrice()}&lt;/h2&gt;
        &lt;/&gt;
      )}
    &lt;/div&gt;
  );
};

export default CartPage;
</pre>
<p><code>getTotalPrice</code>函数使用<code>reduce()</code>数组方法计算购物车中所有商品的价格。</p>
<p>对于 JSX 部分，我们通过访问<code>cart.length</code>属性来检查购物车是否为空。如果它是空的，我们可以显示文本通知用户购物车是空的。</p>
<p>否则，我们可以使用<code>map()</code>数组方法来呈现一个包含所有产品详细信息的 div。请注意，我们还有三个带有<code>onClick</code>的按钮，当单击时，它们会分派相应的购物车动作。</p>
<p>要设置购物车页面的样式，请将以下内容添加到<code>CartPage.module.css</code>:</p>
<pre>.container {
  padding: 2rem;
  text-align: center;
}
.header {
  margin-top: 2rem;
  display: flex;
  justify-content: space-between;
}
.header div {
  flex: 1;
  text-align: center;
  font-size: 1rem;
  font-weight: bold;
  padding-bottom: 0.5rem;
  text-transform: uppercase;
  border-bottom: 2px solid black;
  margin-bottom: 2rem;
}
.body {
  display: flex;
  justify-content: space-between;
  align-items: center;
  text-align: center;
  margin-bottom: 1rem;
}
.body &gt; * {
  flex: 1;
}
.image {
  width: 100px;
}
.buttons &gt; * {
  width: 25px;
  height: 30px;
  background-color: black;
  color: white;
  border: none;
  margin: 0.5rem;
  font-size: 1rem;
}
</pre>
<p>我们还有最后一个购物车页面！</p>
<p><img data-attachment-id="57858" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/final-cart-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final cart page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page.png" decoding="async" class="aligncenter size-full wp-image-57858 jetpack-lazy-image" src="../Images/ae862256f240590d36130234506cf165.png" alt="Final Cart Page Showing Added Products" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page-300x184.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="57858" data-permalink="https://blog.logrocket.com/building-a-next-js-shopping-cart-app/final-cart-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page.png" data-orig-size="730,448" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final cart page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page-300x184.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-57858" src="../Images/ae862256f240590d36130234506cf165.png" alt="Final Cart Page Showing Added Products" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page-300x184.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Final-cart-page.png"/></noscript>
<h2>修改<code>Navbar</code></h2>
<p>目前，当点击<strong>添加到购物车</strong>按钮时，没有反馈或通知来确认产品是否已被添加到购物车。</p>
<p>因此，让我们将购物车商品计数添加到<code>Navbar</code>组件中，这样每当我们添加一个产品时，它就会递增。转到<code>Navbar.jsx</code>并修改代码，从全局状态中选择购物车，并创建一个定制函数来获取商品数量:</p>
<pre>import Link from 'next/link';
import { useSelector } from 'react-redux';
import styles from '../styles/Navbar.module.css';
const Navbar = () =&gt; {

  // Selecting cart from global state
  const cart = useSelector((state) =&gt; state.cart);

  // Getting the count of items
  const getItemsCount = () =&gt; {
    return cart.reduce((accumulator, item) =&gt; accumulator + item.quantity, 0);
  };

  return (
    &lt;nav className={styles.navbar}&gt;
      &lt;h6 className={styles.logo}&gt;GamesKart&lt;/h6&gt;
      &lt;ul className={styles.links}&gt;
        &lt;li className={styles.navlink}&gt;
          &lt;Link href="/"&gt;Home&lt;/Link&gt;
        &lt;/li&gt;
        &lt;li className={styles.navlink}&gt;
          &lt;Link href="/shop"&gt;Shop&lt;/Link&gt;
        &lt;/li&gt;
        &lt;li className={styles.navlink}&gt;
          &lt;Link href="/cart"&gt;
            &lt;p&gt;Cart ({getItemsCount()})&lt;/p&gt;
          &lt;/Link&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  );
};

export default Navbar;
</pre>
<h2>结论</h2>
<p>这个项目到此为止！我希望这能让您对使用 Redux 集成的 Next.js 基础有一个坚实的理解。随意添加更多的功能到这个项目，如认证，单一产品页面，或支付集成。</p>
<p>如果你在构建这个项目时遇到任何困难，请访问这个 GitHub 库来比较你和我的代码。</p><div class="code-block code-block-30">
<div class="blog-plug inline-plug next-plug"><h2><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank"> LogRocket </a>:全面了解生产 Next.js 应用</h2><p>调试下一个应用程序可能会很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪状态、自动显示 JavaScript 错误、跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-lazy-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/></noscript></a><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p>LogRocket 就像是网络和移动应用的 DVR，记录下你的 Next.js 应用上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket 还可以监控应用程序的性能，报告客户端 CPU 负载、客户端内存使用等指标。</p><p>LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p><p>让您调试 Next.js 应用的方式现代化— <a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>