<html>
<head>
<title>Building a news app with Flutter - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Flutter - LogRocket Blog构建新闻应用</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-news-app-flutter/#0001-01-01">https://blog.logrocket.com/building-news-app-flutter/#0001-01-01</a></blockquote><div><article class="article-post">
<p>你是那种喜欢坐在早餐桌旁一边喝茶或喝咖啡一边看晨报的人吗？嗯，我是那种喜欢早上第一件事就是看新闻来了解最新消息的人。</p>
<p>为什么不开发一个应用程序，为我们自己提供最新的精选新闻呢？让我们应用我们的Flutter知识来创建我们自己的新闻应用程序。以下是我们创建应用程序和提高颤振技能的步骤:</p>
<ol>
<li>   <ol>
<li><a href="#introduction-to-the-demo-application">演示应用简介</a></li>
<li><a href="#setting-up-dependencies">设置依赖关系</a></li>
<li><a href="#configuring-webview-for-android-and-ios">为Android和iOS配置WebView】</a></li>
<li><a href="#acquiring-the-news-api-key">获取新闻API密钥</a></li>
<li><a href="#writing-the-model-classes">编写模型类</a></li>
<li><a href="#fetching-data-with-the-getx-controller-class">用GetX控制器类获取数据</a></li>
<li><a href="#creating-a-newscard-widget">创建新闻卡片小工具</a></li>
<li><a href="#adding-a-search-bar-widget">添加搜索栏小工具</a></li>
<li><a href="#adding-a-carousel-widget">添加旋转木马小工具</a></li>
<li><a href="#adding-a-side-drawer-widget">添加侧抽屉小工具</a></li>
<li><a href="#completing-our-home-screen">完成我们的主屏幕</a></li>
</ol>
</li>
</ol>
<p>请继续阅读，看看我们的最终产品会是什么样子。</p>
<h2 id="introduction-to-the-demo-application">演示应用程序简介</h2>
<p>我们正在构建一个单屏幕应用，在屏幕顶部有一个搜索栏；一个旋转木马小部件，显示来自世界各地的头条新闻；以及当用户从侧面抽屉中选择时，基于<strong>国家</strong>、<strong>类别</strong>或<strong>频道</strong>的新闻列表。</p>
<p>运行应用程序时，置顶标题的默认<strong>国家</strong>设置为<strong>印度</strong>，默认<strong>类别</strong>设置为<strong>商业</strong>。</p>
<p><img data-attachment-id="126301" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/finished-news-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/finished-news-app.gif" data-orig-size="356,678" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Finished news app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/finished-news-app-158x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/finished-news-app.gif" decoding="async" class="aligncenter size-full wp-image-126301 jetpack-lazy-image" src="../Images/4db4e239edb8252785a1b02012d42011.png" alt="Finished News App" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/finished-news-app.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/finished-news-app.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126301" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/finished-news-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/finished-news-app.gif" data-orig-size="356,678" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Finished news app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/finished-news-app-158x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/finished-news-app.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126301" src="../Images/4db4e239edb8252785a1b02012d42011.png" alt="Finished News App" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/finished-news-app.gif"/></noscript>
<p>我们将使用来自NewsAPI.org的API密匙。你也可以使用来自<a href="https://mediastack.com/" target="_blank" rel="noopener"> MediaStack </a>和<a href="https://newsdata.io/" target="_blank" rel="noopener"> NewsData </a>的API，因为我们可以在开发者模式下查询有限数量的新闻文章。新闻API每天允许大约100个查询。相反，MediaStack一个月允许500次查询，NewsData一天允许200次查询。您可以随时注册不同的帐户来测试您的应用程序。除了惟一的API键之外，一切都将保持不变。</p>
<p>牢记这一点，让我们开始建设。</p>
<h2 id="setting-up-dependencies">设置相关性</h2>
<p>在您的<code>pubspec.yaml</code>文件中，请添加以下依赖项:</p>
<ul>
<li>http: ^0.13.4  —一个用于发出http请求的可组合的、基于未来的库。使用这个包，我们将查询来自NewsApi.org<a href="https://newsapi.org/" target="_blank" rel="noopener">的新闻文章</a></li>
<li><a href="https://pub.dev/packages/webview_flutter" target="_blank" rel="noopener"> webview_flutter: ^3.0.4 </a> —一个在Android和iOS上提供webview小工具的flutter插件。有了这个软件包，用户可以阅读整篇新闻文章</li>
<li><a href="https://pub.dev/packages/carousel_slider" target="_blank" rel="noopener"> carousel_slider: ^4.1.1 </a> —一个支持无限滚动和自定义子部件的carousel slider部件。我们使用这个包来显示最新的标题，将自动水平滚动</li>
<li><a href="https://pub.dev/packages/get" target="_blank" rel="noopener"> get: ^4.6.5 </a> —我们的状态管理解决方案。我已经谈到了使用<a href="https://blog.logrocket.com/ultimate-guide-getx-state-management-flutter/" target="_blank" rel="noopener"> GetX作为Flutter的状态管理解决方案</a>的优势；它实现起来既快又容易，尤其是当开发人员正在构建原型时</li>
</ul>
<h2 id="configuring-webview-for-android-and-ios">为Android和iOS配置WebView</h2>
<p>由于我们使用WebView包来显示整篇新闻文章，我们必须对<code>Runner</code>文件夹中的Android app/ <code>build.gradle</code>文件和iOS <code>info.plist</code>文件做一些更改。</p>
<h3>适用于Android</h3>
<p>你至少要把<code>minSdkVersion</code>改成<code>19</code>。此外，添加对Android依赖的<code>multiDex</code>支持。请看下图，以供参考:</p>
<p><img data-attachment-id="126308" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/minsdkversion/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="MinSDKversion" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion.png" decoding="async" class="aligncenter size-full wp-image-126308 jetpack-lazy-image" src="../Images/25cd4508e34da4357bf2238fc88b2d1d.png" alt="MinSDKversion" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion-300x153.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126308" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/minsdkversion/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="MinSDKversion" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126308" src="../Images/25cd4508e34da4357bf2238fc88b2d1d.png" alt="MinSDKversion" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion-300x153.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/minsdkversion.png"/></noscript>
<h3>适用于iOS</h3>
<p>在<code>Runner</code>文件夹中，您必须添加这一行，以便在iOS设备上运行时支持Flutter的嵌入式视图:</p>
<pre class="language-html hljs">&lt;key&gt;io.flutter.embedded_views_preview&lt;/key&gt;
   &lt;string&gt;YES&lt;/string&gt;</pre>
<p>请看下图，以供参考:</p>
<p><img data-attachment-id="126310" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/embedded-views/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Embedded views" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views.png" decoding="async" class="aligncenter size-full wp-image-126310 jetpack-lazy-image" src="../Images/d6f7c6bf5959132d52d4f59fd6917554.png" alt="Embedded Views" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views-300x153.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126310" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/embedded-views/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views.png" data-orig-size="730,372" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Embedded views" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126310" src="../Images/d6f7c6bf5959132d52d4f59fd6917554.png" alt="Embedded Views" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views-300x153.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/embedded-views.png"/></noscript>
<p>我们的依赖项是为新闻应用程序设置的。现在，让我们在NewsApi.org上注册，并获得我们独特的API密钥。</p>
<h2 id="acquiring-the-news-api-key">获取新闻API密钥</h2>
<p>去NewsAPI.org用你的电子邮件ID和密码注册。一旦您注册，它将为您自己生成一个唯一的API密钥，我们将使用它来请求新闻文章。将该键作为常量保存在Flutter项目中。</p>
<h3>端点</h3>
<p>要使用这个API，我们需要理解什么是端点。端点是API允许软件或程序相互通信的一个独特的点。</p>
<p>需要注意的是，端点和API不是一回事。端点是API的一个组件，而API是一组允许两个软件共享资源以相互通信的规则。端点是这些资源的位置，API使用URL来检索请求的响应。</p>
<h4>新闻API的主要端点</h4>
<ol>
<li><strong><a href="https://newsapi.org/v2/everything" rel="nofollow">https://newsapi.org/v2/everything</a>？</strong>(这将搜索80，000多个不同来源发布的每篇文章)</li>
<li><strong><a href="https://newsapi.org/v2/top-headlines" rel="nofollow">https://newsapi.org/v2/top-headlines</a>？</strong>(根据国家和类别返回突发新闻标题)</li>
<li>还有一个次要端点，主要返回特定发布者的新闻(例如:BBC，ABC)<strong><a href="https://newsapi.org/v2/top-headlines/sources" rel="nofollow">https://newsapi.org/v2/top-headlines/sources</a>？</strong></li>
</ol>
<p>对于上述端点，我们必须提供API密钥，通过它来处理身份验证。如果API键没有附加在URL的末尾，我们必然会收到一个<code>401 - Unauthorized HTTP error</code>。</p>
<p>因此，URL看起来会像这样:</p>
<p><strong><a href="https://newsapi.org/v2/everything?q=keyword&amp;apiKey=APIKEY" rel="nofollow">https://newsapi.org/v2/everything?q=keyword&amp;API key = API key</a>T3】</strong></p>
<p>上面的URL将返回一个类似如下的JSON响应:</p>
<pre class="language-dart hljs">{
"status": "ok",
"totalResults": 9364,
-
"articles": [
-
{
-
"source": {
"id": "the-verge",
"name": "The Verge"
},
"author": "Justine Calma",
"title": "Texas heatwave and energy crunch curtails Bitcoin mining",
"description": "Bitcoin miners in Texas powered down to respond to an energy crunch triggered by a punishing heatwave. Energy demand from cryptomining is growing in the state.",
"url": "https://www.theverge.com/2022/7/12/23205066/texas-heat-curtails-bitcoin-mining-energy-demand-electricity-grid",
"urlToImage": "https://cdn.vox-cdn.com/thumbor/sP9sPjh-2PfK76HRsOfHNYNQWAo=/0x285:4048x2404/fit-in/1200x630/cdn.vox-cdn.com/uploads/chorus_asset/file/23761862/1235927096.jpg",
"publishedAt": "2022-07-12T15:50:17Z",
"content": "Miners voluntarily powered down as energy demand and prices spiked \r\nAn aerial view of the Whinstone US Bitcoin mining facility in Rockdale, Texas, on October 9th, 2021. The long sheds at North Ameri... [+3770 chars]"
},</pre>
<p>理解以上内容后，我们现在将开始编程我们的应用程序，从模型类开始，然后是GetX <code>Controller</code>类。</p>
<h2 id="writing-the-model-classes">编写模型类</h2>
<p>我们有3个示范班。</p>
<ol>
<li><code>ArticleModel </code> <pre class="language-dart hljs">class ArticleModel {  ArticleModel(this.source, this.author, this.title, this.description, this.url,      this.urlToImage, this.publishedAt, this.content);   String? author, description, urlToImage, content;  String title, url, publishedAt;  SourceModel source;   Map&lt;String, dynamic&gt; toJson() {    return {      'author': author,      'description': description,      'urlToImage': urlToImage,      'content': content,      'title': title,      'url': url,      'publishedAt': publishedAt,      'source': source,    };  }   factory ArticleModel.fromJson(Map&lt;String, dynamic&gt; json) =&gt; ArticleModel(        SourceModel.fromJson(json['source'] as Map&lt;String, dynamic&gt;),        json['author'],        json['title'],        json['description'],        json['url'],        json['urlToImage'],        json['publishedAt'],        json['content'],      ); }</pre></li>
<li><code>NewsModel</code> <pre class="language-dart hljs">class NewsModel {  NewsModel(this.status, this.totalResults, this.articles);   String status;  int totalResults;  List&lt;ArticleModel&gt; articles;   Map&lt;String, dynamic&gt; toJson() {    return {      'status': status,      'totalResults': totalResults,      'articles': articles,    };  }   factory NewsModel.fromJson(Map&lt;String, dynamic&gt; json) =&gt; NewsModel(        json['status'],        json['totalResults'],        (json['articles'] as List&lt;dynamic&gt;)            .map((e) =&gt; ArticleModel.fromJson(e as Map&lt;String, dynamic&gt;))            .toList(),      ); }</pre></li>
<li><code>SourceModel</code> <pre class="language-dart hljs">class SourceModel {  SourceModel({this.id = '', required this.name});   String? id, name;   Map&lt;String, dynamic&gt; toJson() {    return {      'id': id,      'name': name,    };  }   factory SourceModel.fromJson(Map&lt;String, dynamic&gt; json) {    return SourceModel(      id: json['id'],      name: json['name'],    );  } }</pre></li>
</ol>
<p>如果您查看上面的示例JSON响应，模型类就是基于它的。模型类中的变量名应该与JSON响应中的字段相匹配。</p>
<h2 id="fetching-data-with-the-getx-controller-class">使用GetX <code>Controller</code>类获取数据</h2>
<p>这里我们将定义所有的变量、方法和函数来检索三种类型的新闻文章，它们是:</p>
<ol>
<li>头条新闻</li>
<li>根据国家、类别和频道的新闻</li>
<li>搜索新闻</li>
</ol>
<p>从定义和初始化变量开始:</p>
<pre class="language-dart hljs">// for list view
List&lt;ArticleModel&gt; allNews = &lt;ArticleModel&gt;[];
// for carousel
List&lt;ArticleModel&gt; breakingNews = &lt;ArticleModel&gt;[];
ScrollController scrollController = ScrollController();
RxBool articleNotFound = false.obs;
RxBool isLoading = false.obs;
RxString cName = ''.obs;
RxString country = ''.obs;
RxString category = ''.obs;
RxString channel = ''.obs;
RxString searchNews = ''.obs;
RxInt pageNum = 1.obs;
RxInt pageSize = 10.obs;
String baseUrl = "https://newsapi.org/v2/top-headlines?"; // ENDPOINT</pre>
<p>下一步是一个API函数，从News API中检索所有新闻文章的JSON对象。使用HTTP响应方法，我们从URL获取数据，并将JSON对象解码成可读的格式。然后我们检查响应状态。</p>
<p>如果响应代码为<code>200</code>，则表示状态正常。如果响应有一些数据，它将被加载到列表中，最终显示在UI中。这是检索所有新闻的函数:</p>
<pre class="language-dart hljs">// function to retrieve a JSON response for all news from newsApi.org
getAllNewsFromApi(url) async {
 //Creates a new Uri object by parsing a URI string.
 http.Response res = await http.get(Uri.parse(url));

 if (res.statusCode == 200) {
   //Parses the string and returns the resulting Json object.
   NewsModel newsData = NewsModel.fromJson(jsonDecode(res.body));

   if (newsData.articles.isEmpty &amp;&amp; newsData.totalResults == 0) {
     articleNotFound.value = isLoading.value == true ? false : true;
     isLoading.value = false;
     update();
   } else {
     if (isLoading.value == true) {
       // combining two list instances with spread operator
       allNews = [...allNews, ...newsData.articles];
       update();
     } else {
       if (newsData.articles.isNotEmpty) {
         allNews = newsData.articles;
         // list scrolls back to the start of the screen
         if (scrollController.hasClients) scrollController.jumpTo(0.0);
         update();
       }
     }
     articleNotFound.value = false;
     isLoading.value = false;
     update();
   }
 } else {
   articleNotFound.value = true;
   update();
 }
}</pre>
<p>这里有一个检索突发新闻的功能:</p>
<pre class="language-dart hljs">// function to retrieve a JSON response for breaking news from newsApi.org
getBreakingNewsFromApi(url) async {
 http.Response res = await http.get(Uri.parse(url));

 if (res.statusCode == 200) {
   NewsModel newsData = NewsModel.fromJson(jsonDecode(res.body));

   if (newsData.articles.isEmpty &amp;&amp; newsData.totalResults == 0) {
     articleNotFound.value = isLoading.value == true ? false : true;
     isLoading.value = false;
     update();
   } else {
     if (isLoading.value == true) {
       // combining two list instances with spread operator
       breakingNews = [...breakingNews, ...newsData.articles];
       update();
     } else {
       if (newsData.articles.isNotEmpty) {
         breakingNews = newsData.articles;
         if (scrollController.hasClients) scrollController.jumpTo(0.0);
         update();
       }
     }
     articleNotFound.value = false;
     isLoading.value = false;
     update();
   }
 } else {
   articleNotFound.value = true;
   update();
 }
}</pre>
<p>接下来，我们添加函数来与我们之前讨论的端点进行通信，并从API接收定制的响应。我们需要将一个URL字符串传递给上面的函数，我们将在下面的函数中调用它。</p>
<p>要根据搜索关键字获取所有新闻和新闻:</p>
<pre class="language-dart hljs">// function to load and display all news and searched news on to UI
getAllNews({channel = '', searchKey = '', reload = false}) async {
 articleNotFound.value = false;

 if (!reload &amp;&amp; isLoading.value == false) {
 } else {
   country.value = '';
   category.value = '';
 }
 if (isLoading.value == true) {
   pageNum++;
 } else {
   allNews = [];

   pageNum.value = 2;
 }
 // ENDPOINT
 baseUrl = "https://newsapi.org/v2/top-headlines?pageSize=10&amp;page=$pageNum&amp;";
 // default country is set to India
 baseUrl += country.isEmpty ? 'country=in&amp;' : 'country=$country&amp;';
 // default category is set to Business
 baseUrl += category.isEmpty ? 'category=business&amp;' : 'category=$category&amp;';
 baseUrl += 'apiKey=${NewsApiConstants.newsApiKey}';
 // when a user selects a channel the country and category will become null 
 if (channel != '') {
   country.value = '';
   category.value = '';
   baseUrl =
       "https://newsapi.org/v2/top-headlines?sources=$channel&amp;apiKey=${NewsApiConstants.newsApiKey}";
 }
 // when a enters any keyword the country and category will become null
 if (searchKey != '') {
   country.value = '';
   category.value = '';
   baseUrl =
       "https://newsapi.org/v2/everything?q=$searchKey&amp;from=2022-07-01&amp;sortBy=popularity&amp;pageSize=10&amp;apiKey=${NewsApiConstants.newsApiKey}";
 }
 print(baseUrl);
 // calling the API function and passing the URL here
 getAllNewsFromApi(baseUrl);
}</pre>
<p>要根据用户选择的国家获取突发新闻:</p>
<pre class="language-dart hljs">// function to load and display breaking news on to UI
getBreakingNews({reload = false}) async {
 articleNotFound.value = false;

 if (!reload &amp;&amp; isLoading.value == false) {
 } else {
   country.value = '';
 }
 if (isLoading.value == true) {
   pageNum++;
 } else {
   breakingNews = [];

   pageNum.value = 2;
 }
 // default language is set to English
 /// ENDPOINT
 baseUrl =
     "https://newsapi.org/v2/top-headlines?pageSize=10&amp;page=$pageNum&amp;languages=en&amp;";
 // default country is set to US
 baseUrl += country.isEmpty ? 'country=us&amp;' : 'country=$country&amp;';
 //baseApi += category.isEmpty ? '' : 'category=$category&amp;';
 baseUrl += 'apiKey=${NewsApiConstants.newsApiKey}';
 print([baseUrl]);
 // calling the API function and passing the URL here
 getBreakingNewsFromApi(baseUrl);
}</pre>
<p>最后，覆盖<code>onInit</code>方法并调用上面的两个函数:</p>
<pre class="language-dart hljs">@override
void onInit() {
 scrollController = ScrollController()..addListener(_scrollListener);
 getAllNews();
 getBreakingNews();
 super.onInit();
}</pre>

<p>接下来，我们将创建一个自定义小部件，用于显示我们将从API获得的新闻文章的图像、标题、描述和URL。这个小部件将在主屏幕上的ListView builder中调用:</p>
<pre class="language-dart hljs">class NewsCard extends StatelessWidget {
final String imgUrl, title, desc, content, postUrl;

 const NewsCard(
     {Key? key,
     required this.imgUrl,
     required this.desc,
     required this.title,
     required this.content,
     required this.postUrl});

 @override
 Widget build(BuildContext context) {
   return Card(
     elevation: Sizes.dimen_4,
     shape: const RoundedRectangleBorder(
         borderRadius: BorderRadius.all(Radius.circular(Sizes.dimen_10))),
     margin: const EdgeInsets.fromLTRB(
         Sizes.dimen_16, 0, Sizes.dimen_16, Sizes.dimen_16),
     child: Column(
       crossAxisAlignment: CrossAxisAlignment.start,
       mainAxisSize: MainAxisSize.min,
       children: &lt;Widget&gt;[
         ClipRRect(
             borderRadius: const BorderRadius.only(
                 topLeft: Radius.circular(Sizes.dimen_10),
                 topRight: Radius.circular(Sizes.dimen_10)),
             child: Image.network(
               imgUrl,
               height: 200,
               width: MediaQuery.of(context).size.width,
               fit: BoxFit.fill,
              // if the image is null
               errorBuilder: (BuildContext context, Object exception,
                   StackTrace? stackTrace) {
                 return Card(
                   elevation: 0,
                   shape: RoundedRectangleBorder(
                       borderRadius: BorderRadius.circular(Sizes.dimen_10)),
                   child: const SizedBox(
                     height: 200,
                     width: double.infinity,
                     child: Icon(Icons.broken_image_outlined),
                   ),
                 );
               },
             )),
         vertical15,
         Padding(
           padding: const EdgeInsets.all(Sizes.dimen_6),
           child: Text(
             title,
             maxLines: 2,
             style: const TextStyle(
                 color: Colors.black87,
                 fontSize: Sizes.dimen_20,
                 fontWeight: FontWeight.w500),
           ),
         ),
         Padding(
           padding: const EdgeInsets.all(Sizes.dimen_6),
           child: Text(
             desc,
             maxLines: 2,
             style: const TextStyle(color: Colors.black54, fontSize: Sizes.dimen_14),
           ),
         )
       ],
     ),
   );
 }
}</pre>
<p>这就是我们的<code>newsCard</code>的样子。</p>
<p><img data-attachment-id="126312" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/newscard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard.jpg" data-orig-size="716,614" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Newscard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard-300x257.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard.jpg" decoding="async" class="aligncenter size-full wp-image-126312 jetpack-lazy-image" src="../Images/672115b285d75052560a2d19fb78c914.png" alt="Newscard" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard.jpg 716w, https://blog.logrocket.com/wp-content/uploads/2022/08/newscard-300x257.jpg 300w" data-lazy-sizes="(max-width: 716px) 100vw, 716px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126312" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/newscard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard.jpg" data-orig-size="716,614" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Newscard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard-300x257.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard.jpg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126312" src="../Images/672115b285d75052560a2d19fb78c914.png" alt="Newscard" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard.jpg 716w, https://blog.logrocket.com/wp-content/uploads/2022/08/newscard-300x257.jpg 300w" sizes="(max-width: 716px) 100vw, 716px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/newscard.jpg"/></noscript>
<p>您可能会注意到代码中的常量值。我习惯在所有的Flutter项目中创建常量文件，用于定义颜色、大小、文本域装饰等。我不会在本文中添加这些文件，但是您可以在GitHub资源库中找到它们。</p>

<p>现在我们开始构建我们的主屏幕。在屏幕顶部，我们有我们的搜索文本字段。当用户输入任何关键字时，API将搜索来自不同来源的数千篇文章，并在NewsCard小部件的帮助下显示在屏幕上:</p>
<pre class="language-dart hljs">Flexible(
 child: Container(
   padding: const EdgeInsets.symmetric(horizontal: Sizes.dimen_8),
   margin: const EdgeInsets.symmetric(
       horizontal: Sizes.dimen_18, vertical: Sizes.dimen_16),
   decoration: BoxDecoration(
       color: Colors.white,
       borderRadius: BorderRadius.circular(Sizes.dimen_8)),
   child: Row(
     mainAxisSize: MainAxisSize.max,
     mainAxisAlignment: MainAxisAlignment.spaceBetween,
     children: [
       Flexible(
         fit: FlexFit.tight,
         flex: 4,
         child: Padding(
           padding: const EdgeInsets.only(left: Sizes.dimen_16),
           child: TextField(
             controller: searchController,
             textInputAction: TextInputAction.search,
             decoration: const InputDecoration(
                 border: InputBorder.none,
                 hintText: "Search News"),
             onChanged: (val) {
               newsController.searchNews.value = val;
               newsController.update();
             },
             onSubmitted: (value) async {
               newsController.searchNews.value = value;
               newsController.getAllNews(
                   searchKey: newsController.searchNews.value);
               searchController.clear();
             },
           ),
         ),
       ),
       Flexible(
         flex: 1,
         fit: FlexFit.tight,
         child: IconButton(
             padding: EdgeInsets.zero,
             color: AppColors.burgundy,
             onPressed: () async {
               newsController.getAllNews(
                   searchKey: newsController.searchNews.value);
               searchController.clear();
             },
             icon: const Icon(Icons.search_sharp)),
       ),
     ],
   ),
 ),
),</pre>
<p>这是我们的搜索栏的外观。</p>
<p><img data-attachment-id="126314" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/search-bar-news/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news.jpg" data-orig-size="720,246" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Search bar news" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news-300x103.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news.jpg" decoding="async" class="aligncenter size-full wp-image-126314 jetpack-lazy-image" src="../Images/0e68c957d3f3e56b66a55c3e5e077d25.png" alt="Search Bar News" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news-300x103.jpg 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126314" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/search-bar-news/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news.jpg" data-orig-size="720,246" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Search bar news" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news-300x103.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news.jpg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126314" src="../Images/0e68c957d3f3e56b66a55c3e5e077d25.png" alt="Search Bar News" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news-300x103.jpg 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/search-bar-news.jpg"/></noscript>

<p>当用户从侧面抽屉中选择一个国家时，carousel小部件将显示不同国家的头条新闻或突发新闻。这个小部件用<code>GetBuilder</code>包装，这样每当选择一个新的国家和突发新闻需要更新时，它就会被重新构建。</p>
<p>我已经设置了轮播选项来自动播放滑块。它会自动水平滚动，无需用户滚动。Stack小部件显示新闻的图像，并在其顶部显示新闻的标题。</p>
<p>我还在右上角添加了一个横幅，上面写着<strong>头条</strong>，类似于调试横幅。Stack小部件再次用<code>InkWell</code>包装，在它里面是一个<code>onTap</code>函数。当用户点击任何新闻条目时，它将把用户带到WebView屏幕，在那里将向读者显示整篇新闻文章:</p>
<pre class="language-dart hljs">GetBuilder&lt;NewsController&gt;(
   init: NewsController(),
   builder: (controller) {
     return CarouselSlider(
       options: CarouselOptions(
           height: 200, autoPlay: true, enlargeCenterPage: true),
       items: controller.breakingNews.map((instance) {
         return controller.articleNotFound.value
             ? const Center(
                 child: Text("Not Found",
                     style: TextStyle(fontSize: 30)))
             : controller.breakingNews.isEmpty
                 ? const Center(child: CircularProgressIndicator())
                 : Builder(builder: (BuildContext context) {
                     try {
                       return Banner(
                         location: BannerLocation.topStart,
                         message: 'Top Headlines',
                         child: InkWell(
                           onTap: () =&gt; Get.to(() =&gt;
                               WebViewNews(newsUrl: instance.url)),
                           child: Stack(children: [
                             ClipRRect(
                               borderRadius:
                                   BorderRadius.circular(10),
                               child: Image.network(
                                 instance.urlToImage ?? " ",
                                 fit: BoxFit.fill,
                                 height: double.infinity,
                                 width: double.infinity,
                                // if the image is null
                                 errorBuilder:
                                     (BuildContext context,
                                         Object exception,
                                         StackTrace? stackTrace) {
                                   return Card(
                                     shape: RoundedRectangleBorder(
                                         borderRadius:
                                             BorderRadius.circular(
                                                 10)),
                                     child: const SizedBox(
                                       height: 200,
                                       width: double.infinity,
                                       child: Icon(Icons
                                           .broken_image_outlined),
                                     ),
                                   );
                                 },
                               ),
                             ),
                             Positioned(
                                 left: 0,
                                 right: 0,
                                 bottom: 0,
                                 child: Container(
                                   decoration: BoxDecoration(
                                       borderRadius:
                                           BorderRadius.circular(
                                               10),
                                       gradient: LinearGradient(
                                           colors: [
                                             Colors.black12
                                                 .withOpacity(0),
                                             Colors.black
                                           ],
                                           begin:
                                               Alignment.topCenter,
                                           end: Alignment
                                               .bottomCenter)),
                                   child: Container(
                                       padding: const EdgeInsets
                                               .symmetric(
                                           horizontal: 5,
                                           vertical: 10),
                                       child: Container(
                                           margin: const EdgeInsets
                                                   .symmetric(
                                               horizontal: 10),
                                           child: Text(
                                             instance.title,
                                             style: const TextStyle(
                                                 fontSize: Sizes
                                                     .dimen_16,
                                                 color:
                                                     Colors.white,
                                                 fontWeight:
                                                     FontWeight
                                                         .bold),
                                           ))),
                                 )),
                           ]),
                         ),
                       );
                     } catch (e) {
                       if (kDebugMode) {
                         print(e);
                       }
                       return Container();
                     }
                   });
       }).toList(),
     );
   }),</pre>
<p>这就是我们的旋转木马的样子。</p>
<p><img data-attachment-id="126316" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/news-carousel/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel.jpg" data-orig-size="720,395" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="News carousel" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel-300x165.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel.jpg" decoding="async" class="aligncenter size-full wp-image-126316 jetpack-lazy-image" src="../Images/c8f27d36c0e36b08c905eb03449ead79.png" alt="News Carousel" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel-300x165.jpg 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126316" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/news-carousel/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel.jpg" data-orig-size="720,395" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="News carousel" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel-300x165.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel.jpg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126316" src="../Images/c8f27d36c0e36b08c905eb03449ead79.png" alt="News Carousel" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel-300x165.jpg 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/news-carousel.jpg"/></noscript>

<p>抽屉控件有三个下拉框，用于选择<strong>国家</strong>、<strong>类别</strong>或<strong>频道</strong>。所有这些主要转化为我们已经讨论过的资源。它是新API提供的一个次要端点，用于定制文章的检索。</p>
<p>当您在下拉框中选择以上任何一项时，用户的选择将显示在侧边抽屉中，国家名称将显示在<code>NewsCard</code>列表项目上方。这个特性是专门为原型开发添加的，因此作为开发人员，我们知道API会根据代码返回一个响应:</p>
<pre class="language-dart hljs">Drawer sideDrawer(NewsController newsController) {
 return Drawer(
   backgroundColor: AppColors.lightGrey,
   child: ListView(
     children: &lt;Widget&gt;[
       GetBuilder&lt;NewsController&gt;(
         builder: (controller) {
           return Container(
             decoration: const BoxDecoration(
                 color: AppColors.burgundy,
                 borderRadius: BorderRadius.only(
                   bottomLeft: Radius.circular(Sizes.dimen_10),
                   bottomRight: Radius.circular(Sizes.dimen_10),
                 )),
             padding: const EdgeInsets.symmetric(
                 horizontal: Sizes.dimen_18, vertical: Sizes.dimen_18),
             child: Column(
               crossAxisAlignment: CrossAxisAlignment.start,
               children: [
                 controller.cName.isNotEmpty
                     ? Text(
                         "Country: ${controller.cName.value.capitalizeFirst}",
                         style: const TextStyle(
                             color: AppColors.white, fontSize: Sizes.dimen_18),
                       )
                     : const SizedBox.shrink(),
                 vertical15,
                 controller.category.isNotEmpty
                     ? Text(
                         "Category: ${controller.category.value.capitalizeFirst}",
                         style: const TextStyle(
                             color: AppColors.white, fontSize: Sizes.dimen_18),
                       )
                     : const SizedBox.shrink(),
                 vertical15,
                 controller.channel.isNotEmpty
                     ? Text(
                         "Category: ${controller.channel.value.capitalizeFirst}",
                         style: const TextStyle(
                             color: AppColors.white, fontSize: Sizes.dimen_18),
                       )
                     : const SizedBox.shrink(),
               ],
             ),
           );
         },
         init: NewsController(),
       ),
    /// For Selecting the Country
          ExpansionTile(
         collapsedTextColor: AppColors.burgundy,
         collapsedIconColor: AppColors.burgundy,
         iconColor: AppColors.burgundy,
         textColor: AppColors.burgundy,
         title: const Text("Select Country"),
         children: &lt;Widget&gt;[
           for (int i = 0; i &lt; listOfCountry.length; i++)
             drawerDropDown(
               onCalled: () {
                 newsController.country.value = listOfCountry[i]['code']!;
                 newsController.cName.value =
                     listOfCountry[i]['name']!.toUpperCase();
                 newsController.getAllNews();
                 newsController.getBreakingNews();
                
               },
               name: listOfCountry[i]['name']!.toUpperCase(),
             ),
         ],
       ),
      /// For Selecting the Category
       ExpansionTile(
         collapsedTextColor: AppColors.burgundy,
         collapsedIconColor: AppColors.burgundy,
         iconColor: AppColors.burgundy,
         textColor: AppColors.burgundy,
         title: const Text("Select Category"),
         children: [
           for (int i = 0; i &lt; listOfCategory.length; i++)
             drawerDropDown(
                 onCalled: () {
                   newsController.category.value = listOfCategory[i]['code']!;
                   newsController.getAllNews();
                  
                 },
                 name: listOfCategory[i]['name']!.toUpperCase())
         ],
       ),
      /// For Selecting the Channel
       ExpansionTile(
         collapsedTextColor: AppColors.burgundy,
         collapsedIconColor: AppColors.burgundy,
         iconColor: AppColors.burgundy,
         textColor: AppColors.burgundy,
         title: const Text("Select Channel"),
         children: [
           for (int i = 0; i &lt; listOfNewsChannel.length; i++)
             drawerDropDown(
               onCalled: () {
                 newsController.channel.value = listOfNewsChannel[i]['code']!;
                 newsController.getAllNews(
                     channel: listOfNewsChannel[i]['code']);
              
               },
               name: listOfNewsChannel[i]['name']!.toUpperCase(),
             ),
         ],
       ),
       const Divider(),
       ListTile(
           trailing: const Icon(
             Icons.done_sharp,
             size: Sizes.dimen_28,
             color: Colors.black,
           ),
           title: const Text(
             "Done",
             style: TextStyle(fontSize: Sizes.dimen_16, color: Colors.black),
           ),
           onTap: () =&gt; Get.back()),
     ],
   ),
 );
}</pre>
<p>这就是我们的<code>sideDrawer</code>的样子。</p>
<p><img data-attachment-id="126319" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/sidedrawer/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer.jpg" data-orig-size="720,1480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sidedrawer" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-146x300.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-498x1024.jpg" decoding="async" class="aligncenter size-full wp-image-126319 jetpack-lazy-image" src="../Images/9a1e4d69b74f5b3af67997b8765bd365.png" alt="Sidedrawer" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-146x300.jpg 146w, https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-498x1024.jpg 498w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126319" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/sidedrawer/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer.jpg" data-orig-size="720,1480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sidedrawer" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-146x300.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-498x1024.jpg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126319" src="../Images/9a1e4d69b74f5b3af67997b8765bd365.png" alt="Sidedrawer" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-146x300.jpg 146w, https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-498x1024.jpg 498w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer.jpg"/></noscript>
<p><img data-attachment-id="126321" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/sidedrawer-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2.jpg" data-orig-size="720,1480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sidedrawer" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2-146x300.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2-498x1024.jpg" decoding="async" class="aligncenter size-full wp-image-126321 jetpack-lazy-image" src="../Images/3ce20b64e60828aef2ca1cc03cb181ea.png" alt="Sidedrawer" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2-146x300.jpg 146w, https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2-498x1024.jpg 498w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126321" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/sidedrawer-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2.jpg" data-orig-size="720,1480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sidedrawer" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2-146x300.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2-498x1024.jpg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126321" src="../Images/3ce20b64e60828aef2ca1cc03cb181ea.png" alt="Sidedrawer" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2-146x300.jpg 146w, https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2-498x1024.jpg 498w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/sidedrawer-2.jpg"/></noscript>
<h2 id="completing-our-home-screen">完成我们的主屏幕</h2>
<p>接下来，我们将前面创建的<code>NewsCard</code>小部件添加到carousel小部件下面，它根据用户从侧面抽屉中的选择显示所有其他新闻。如果用户在搜索文本字段中输入搜索关键字，新闻文章将显示在这里。</p>
<p>请注意，轮播小工具仅显示所选国家的头条新闻和突发新闻；它不会根据类别或频道进行过滤。如果用户选择一个类别或频道，轮播窗口小部件将不会得到更新；只有<code>NewsCard</code>小部件会被更新。但是当用户选择一个新的国家时，carousel小部件会随着<code>NewsCard</code>小部件一起更新。</p>
<p>同样，<code>NewsCard</code>小部件由GetX <code>Builder</code>和<code>InkWell</code>小部件包装:</p>
<pre class="language-dart hljs">GetBuilder&lt;NewsController&gt;(
   init: NewsController(),
   builder: (controller) {
     return controller.articleNotFound.value
         ? const Center(
             child: Text('Nothing Found'),
           )
         : controller.allNews.isEmpty
             ? const Center(child: CircularProgressIndicator())
             : ListView.builder(
                 controller: controller.scrollController,
                 physics: const NeverScrollableScrollPhysics(),
                 shrinkWrap: true,
                 itemCount: controller.allNews.length,
                 itemBuilder: (context, index) {
                   index == controller.allNews.length - 1 &amp;&amp;
                           controller.isLoading.isTrue
                       ? const Center(
                           child: CircularProgressIndicator(),
                         )
                       : const SizedBox();
                   return InkWell(
                     onTap: () =&gt; Get.to(() =&gt; WebViewNews(
                         newsUrl: controller.allNews[index].url)),
                     child: NewsCard(
                         imgUrl: controller
                                 .allNews[index].urlToImage ??
                             '',
                         desc: controller
                                 .allNews[index].description ??
                             '',
                         title: controller.allNews[index].title,
                         content:
                             controller.allNews[index].content ??
                                 '',
                         postUrl: controller.allNews[index].url),
                   );
                 });
   }),</pre>
<p><code>SingleChildScrollView</code>是主屏幕的父窗口小部件，作为<code>Scaffold</code>的主体。<code>appBar</code>有一个刷新按钮，可以清除所有的过滤器并将应用程序默认为初始状态。</p>
<p><img data-attachment-id="126323" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/flash-news-default-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view.jpg" data-orig-size="720,1480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flash news default view" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view-146x300.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view-498x1024.jpg" decoding="async" class="aligncenter size-full wp-image-126323 jetpack-lazy-image" src="../Images/0e17a95196ce03618910bd337945c66e.png" alt="Flash News Default View" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view-146x300.jpg 146w, https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view-498x1024.jpg 498w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126323" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/flash-news-default-view/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view.jpg" data-orig-size="720,1480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flash news default view" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view-146x300.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view-498x1024.jpg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126323" src="../Images/0e17a95196ce03618910bd337945c66e.png" alt="Flash News Default View" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view-146x300.jpg 146w, https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view-498x1024.jpg 498w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-default-view.jpg"/></noscript>
<h2>添加WebView屏幕</h2>
<p>WebView屏幕是一个有状态的小部件，当用户单击转盘或新闻卡片中的任何新闻条目时，它会显示整篇文章。</p>
<p>这里，我们必须用一个<code>Completer</code>类初始化一个<code>WebViewController</code>。一个<code>Completer</code>类是一种产生<code>Future</code>对象并在以后用一个值或一个错误完成它们的方法。<code>Scaffold</code>体有直接通过的<code>WebView</code>级。该屏幕上没有<code>appBar</code>，因此不会妨碍读者阅读整篇文章:</p>
<pre class="language-dart hljs">class WebViewNews extends StatefulWidget {
 final String newsUrl;
 WebViewNews({Key? key, required this.newsUrl}) : super(key: key);

 @override
 State&lt;WebViewNews&gt; createState() =&gt; _WebViewNewsState();
}

class _WebViewNewsState extends State&lt;WebViewNews&gt; {
 NewsController newsController = NewsController();

 final Completer&lt;WebViewController&gt; controller =
     Completer&lt;WebViewController&gt;();

 @override
 Widget build(BuildContext context) {
   return Scaffold(
       body: WebView(
     initialUrl: widget.newsUrl,
     javascriptMode: JavascriptMode.unrestricted,
     onWebViewCreated: (WebViewController webViewController) {
       setState(() {
         controller.complete(webViewController);
       });
     },
   ));
 }
}</pre>
<p><img data-attachment-id="126325" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/news-hub/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub.jpg" data-orig-size="720,1480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="News hub" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub-146x300.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub-498x1024.jpg" decoding="async" class="aligncenter size-full wp-image-126325 jetpack-lazy-image" src="../Images/74caf29cfc6b94e58c3029a21c3a8052.png" alt="News Hub" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub-146x300.jpg 146w, https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub-498x1024.jpg 498w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126325" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/news-hub/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub.jpg" data-orig-size="720,1480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="News hub" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub-146x300.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub-498x1024.jpg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126325" src="../Images/74caf29cfc6b94e58c3029a21c3a8052.png" alt="News Hub" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub-146x300.jpg 146w, https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub-498x1024.jpg 498w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/news-hub.jpg"/></noscript>
<h2>制作闪屏</h2>
<p>我将我的应用程序命名为Flash⚡News，并在Canva中设计了我的闪屏图像。启动页面弹出三秒钟，然后用户被转移到主屏幕。闪屏很容易实现，我建议所有的应用程序都应该有一个简短的介绍。</p>
<p><img data-attachment-id="126327" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/flash-news-splash-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen.jpg" data-orig-size="720,1480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flash news splash screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen-146x300.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen-498x1024.jpg" decoding="async" class="aligncenter size-full wp-image-126327 jetpack-lazy-image" src="../Images/a9a9b358d786b49e0e087fe00567fce9.png" alt="Flash News Splash Screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen-146x300.jpg 146w, https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen-498x1024.jpg 498w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen.jpg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen.jpg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126327" data-permalink="https://blog.logrocket.com/building-news-app-flutter/attachment/flash-news-splash-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen.jpg" data-orig-size="720,1480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flash news splash screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen-146x300.jpg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen-498x1024.jpg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126327" src="../Images/a9a9b358d786b49e0e087fe00567fce9.png" alt="Flash News Splash Screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen.jpg 720w, https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen-146x300.jpg 146w, https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen-498x1024.jpg 498w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/flash-news-splash-screen.jpg"/></noscript>
<pre class="language-dart hljs">class SplashScreen extends StatefulWidget {
 const SplashScreen({Key? key}) : super(key: key);

 @override
 State&lt;SplashScreen&gt; createState() =&gt; _SplashScreenState();
}

class _SplashScreenState extends State&lt;SplashScreen&gt; {
 @override
 void initState() {
   super.initState();

   Timer(const Duration(seconds: 3), () {
     //navigate to home screen replacing the view
     Get.offAndToNamed('/homePage');
   });
 }

 @override
 Widget build(BuildContext context) {
   return Scaffold(
     backgroundColor: AppColors.burgundy,
     body: Center(child: Image.asset('assets/flashNews.jpg')),
   );
 }
}</pre>
<p>仅此而已！我们已经完成了申请。还有一些我之前提到的Dart文件，你可以在下面的GitHub链接中找到。</p>
<p>我试图保持用户界面整洁。整个焦点是放在用户容易找到和阅读的新闻文章上。API一次返回一百多篇文章；如果您仔细观察代码，我们只显示了其中的几页。同样，我们被允许进行有限数量的查询，一次加载几篇文章会更快。</p>
<p>希望这能让您了解如何实现JSON端点之间的交互，从API获取数据，并在屏幕上显示这些数据。</p>
<p>谢谢大家！</p>
<p>链接到Github库:<a href="https://github.com/timelessfusionapps/flash_news_getx" target="_blank" rel="noopener">快讯</a>。</p><div class="code-block code-block-2">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>