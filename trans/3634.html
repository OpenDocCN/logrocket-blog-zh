<html>
<head>
<title>Animate React components with a single line using AutoAnimate </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用“自动动画”用一行动画反应组件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/#0001-01-01">https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/#0001-01-01</a></blockquote><div><article class="article-post">
<p>动画为现代web应用程序提供了引人注目的用户体验，让它们栩栩如生，避免了可怕的单调外观。但是，当然，添加动画可能是一个困难和耗时的任务，如果你的应用程序有多个组件，它会变得更糟！</p>
<p>在本文中，我们将了解如何使用AutoAnimate库，通过一行代码添加动画来反应组件。</p>
<p>让我们直接进入它。</p>
<p><em>向前跳转:</em></p>

<h2 id="autoanimate">什么是AutoAnimate？</h2>
<p>AutoAnimate是一个零配置的开源动画实用程序库，它为React组件添加了平滑过渡，同时也非常<a href="https://bundlephobia.com/package/@formkit/auto-animate@1.0.0-beta.3">轻量级</a> (2.3KB)。</p>
<h2 id="other-animation-libraries">为什么不用其他的动画库？</h2>
<p>大多数动画库需要更多的配置，有些需要更改现有的组件结构来应用动画。</p>
<p>然而，AutoAnimate只需要一行代码来激活组件，并且不需要改变任何现有的组件。它还提供了直接与现有代码库集成的好处。</p>
<p>当DOM中的元素发生变化时，AutoAnimate可以带来流畅的体验。我想将AutoAnimate与<a href="https://reactcommunity.org/react-transition-group/"> React转换组</a>进行比较，后者是一个用于组件进入和退出的简单转换库，但是有一些额外的配置。</p>
<p>让我们用“反应过渡组”和“自动动画”创建一个警告消息，这样您就可以自己看到库之间的差异。</p>
<h2 id="alert-message-react-transition-group">使用React转换组的警报消息</h2>
<p>以下组件显示了如何使用 React过渡组添加动画<a href="https://blog.logrocket.com/react-transition-group/">。</a></p>
<pre class="language-javascript hljs">App.jsx
import React, { useState, useRef } from 'react';
import { createRoot } from 'react-dom/client';
import { Container, Button, Alert } from 'react-bootstrap';
import { CSSTransition } from 'react-transition-group';

import 'bootstrap/dist/css/bootstrap.min.css';
import './styles.css';

function Example() {
  const [showButton, setShowButton] = useState(true);
  const [showMessage, setShowMessage] = useState(false);
  const nodeRef = useRef(null);

  return (
    &lt;Container style={{ paddingTop: '2rem' }}&gt;
      {showButton &amp;&amp; (
        &lt;Button
          onClick={() =&gt; setShowMessage(true)}
          size="lg"
        &gt;
          Show Message
        &lt;/Button&gt;
      )}
      &lt;CSSTransition
        in={showMessage}
        nodeRef={nodeRef}
        timeout={300}
        classNames="alert"
        unmountOnExit
        onExited={() =&gt; setShowButton(true)}
      &gt;
        &lt;Alert
          ref={nodeRef}
          variant="primary"
          dismissible
          onClose={() =&gt; setShowMessage(false)}
        &gt;
          &lt;Alert.Heading&gt;
            Animated alert message
          &lt;/Alert.Heading&gt;
          &lt;p&gt;
            This alert message is being transitioned in and
            out of the DOM.
          &lt;/p&gt;
          &lt;Button
            variant="primary"
            onClick={() =&gt; setShowMessage(false)}
          &gt;
            Close
          &lt;/Button&gt;
        &lt;/Alert&gt;
      &lt;/CSSTransition&gt;
    &lt;/Container&gt;
  );
}
const container = document.getElementById('root');
const root = createRoot(container);
root.render(&lt;Example /&gt;);
</pre>
<p>添加以下样式以添加过渡:</p>
<pre class="language-javascript hljs">//styles.css
.alert-enter {
  opacity: 0;
  transform: scale(0.9);
}
.alert-enter-active {
  opacity: 1;
  transform: translateX(0);
  transition: opacity 300ms, transform 300ms;
}
.alert-exit {
  opacity: 1;
}
.alert-exit-active {
  opacity: 0;
  transform: scale(0.9);
  transition: opacity 300ms, transform 300ms;
}
</pre>
<p>上述代码将产生以下输出:</p>
<p><img data-attachment-id="143651" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/alert-message-react-transition-group/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/alert-message-react-transition-group.gif" data-orig-size="730,314" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="alert-message-react-transition-group" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/alert-message-react-transition-group-300x129.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/alert-message-react-transition-group.gif" decoding="async" class="aligncenter wp-image-143651 size-full jetpack-lazy-image" src="../Images/1e1a32863ea55cd3f4a2c71b3d65da27.png" alt="Alert Message React Transition Group." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/alert-message-react-transition-group.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/alert-message-react-transition-group.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143651" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/alert-message-react-transition-group/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/alert-message-react-transition-group.gif" data-orig-size="730,314" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="alert-message-react-transition-group" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/alert-message-react-transition-group-300x129.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/alert-message-react-transition-group.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143651 size-full" src="../Images/1e1a32863ea55cd3f4a2c71b3d65da27.png" alt="Alert Message React Transition Group." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/alert-message-react-transition-group.gif"/></noscript>
<p>为了添加这个过渡，我们添加了几行CSS并向CSS <code>transition</code>组件传递了一些道具。</p>
<p>现在，让我们使用零配置的AutoAnimate来再现相同的动画。</p>
<blockquote><p><strong>注意</strong>，你可以在<a href="https://codesandbox.io/s/react-transition-group-th033h?file=/index.js"> CodeSandbox </a>找到上面的演示</p></blockquote>
<h2 id="alert-message-autoanimate">使用自动动画的警告消息</h2>
<p>下面的组件向您展示了如何使用AutoAnimate添加动画。</p>
<pre class="language-javascript hljs">//App.jsx

import React, { useState, useRef } from 'react';
import { createRoot } from 'react-dom/client';
import { Container, Button, Alert } from 'react-bootstrap';
import { useAutoAnimate } from '@formkit/auto-animate/react';

import 'bootstrap/dist/css/bootstrap.min.css';

function Example() {
//Auto Animate
  const [parent] = useAutoAnimate(/* optional config */);

  const [showButton, setShowButton] = useState(true);
  const [showMessage, setShowMessage] = useState(false);
  const nodeRef = useRef(null);

  return (
    &lt;Container style={{ paddingTop: '2rem' }}&gt;
      {showButton &amp;&amp; (
        &lt;Button
          onClick={() =&gt; setShowMessage(true)}
          size="lg"
        &gt;
          Show Message
        &lt;/Button&gt;
      )}
      &lt;div ref={parent}&gt;
        {showMessage &amp;&amp; (
          &lt;Alert
            ref={nodeRef}
            variant="primary"
            dismissible
            onClose={() =&gt; setShowMessage(false)}
          &gt;
            &lt;Alert.Heading&gt;
              Animated alert message
            &lt;/Alert.Heading&gt;
            &lt;p&gt;
              This alert message is being transitioned in
              and out of the DOM.
            &lt;/p&gt;
            &lt;Button
              variant="primary"
              onClick={() =&gt; setShowMessage(false)}
            &gt;
              Close
            &lt;/Button&gt;
          &lt;/Alert&gt;
        )}
      &lt;/div&gt;
    &lt;/Container&gt;
  );
}
const container = document.getElementById('root');
const root = createRoot(container);
root.render(&lt;Example /&gt;);
</pre>
<p>这里，我们使用了与React转换组相同的代码。我们已经包含了AutoAnimate库，并添加了对<code>Alert</code> <code>parent</code>元素(<code>&lt;div&gt;</code>)的<code>useAutoAnimate</code>钩子引用。</p>
<p>这就是我们需要做的！我们没有必要添加CSS或过渡持续时间。让我们看看这里的输出:</p>
<p><img data-attachment-id="143653" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/autoanimate-alert-message/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/autoanimate-alert-message.gif" data-orig-size="730,325" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="autoanimate-alert-message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/autoanimate-alert-message-300x134.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/autoanimate-alert-message.gif" decoding="async" class="aligncenter wp-image-143653 size-full jetpack-lazy-image" src="../Images/d4aaebb9d72af9c706c861149448210d.png" alt="AutoAnimate Alert Message" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/autoanimate-alert-message.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/autoanimate-alert-message.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143653" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/autoanimate-alert-message/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/autoanimate-alert-message.gif" data-orig-size="730,325" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="autoanimate-alert-message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/autoanimate-alert-message-300x134.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/autoanimate-alert-message.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143653 size-full" src="../Images/d4aaebb9d72af9c706c861149448210d.png" alt="AutoAnimate Alert Message" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/autoanimate-alert-message.gif"/></noscript>
<p>在这里我们可以看到，我们已经用零配置创建了相同的动画—这就是AutoAnimate与其他库的不同之处！</p>
<blockquote><p><strong>注意</strong>，你可以在<a href="https://codesandbox.io/s/auto-animate-dffre9?file=/index.js"> CodeSandbox </a>找到上面的演示</p></blockquote>
<h2 id="how-does-it-work">它是如何工作的？</h2>
<p>AutoAnimate是一个单功能实用程序，它接受需要设置动画的组件的父元素。然后将动画应用于父元素的直接子元素。</p>
<p>发生以下事件时，自动动画会触发动画:</p>
<ul>
<li>一个子元素被插入到DOM中</li>
<li>从DOM中移除一个子元素</li>
<li>DOM中移动了一个子元素</li>
</ul>
<h2 id="quick-setup-usage">快速设置和使用</h2>
<p>现在，让我们设置AutoAnimate在您的项目中使用。</p>
<p>使用以下命令安装AutoAnimate:</p>
<p><code>yarn add @formkit/auto-animate</code></p>
<p>将<code>useAutoAnimate</code>钩子导入到你想要制作动画的组件中，如下所示:</p>
<p><code>import { useAutoAnimate } from '@formkit/auto-animate/react</code></p>
<p>要制作一个组件的动画，我们需要将由<code>useAutoAnimate</code>钩子返回的引用添加到父元素中，如下所示:</p>
<pre class="language-javascript hljs">//App.jsx

import { useState } from 'react'
import { useAutoAnimate } from '@formkit/auto-animate/react'

const App = function () {
  const [items, setItems] = useState([0, 1, 2])
  const [parent] = useAutoAnimate()
  const add = () =&gt; setItems([...items, items.length])
  return 
  &lt;&gt;
  &lt;ul ref={parent}&gt;
    {items.map(
      item =&gt; &lt;li key={item}&gt;{ item }&lt;/li&gt;
    )}
  &lt;/ul&gt;
  &lt;button onClick={add}&gt;Add number&lt;/button&gt;
  &lt;/&gt;
}

export default App
</pre>
<p>这里，我们将父元素<code>&lt;ul&gt;</code>的引用传递给了<code>useAutoAnimate</code>。当点击<strong>添加数字</strong>按钮时，新添加的列表将被动画显示。</p>
<p>接下来，我们将看一些更多的例子。</p>
<h2 id="animate-dynamic-form-component">制作动态<code>Form</code>组件的动画</h2>
<p>大部分app都有动态输入<code>Form</code>组件。现在，我们将创建一个动态组件，因此添加以下代码:</p>
<blockquote><p><strong>注意</strong>，为了这个演练简单起见，我使用了蚂蚁设计<code>Form</code></p></blockquote>
<pre class="language-javascript hljs">//DynamicForm.jsx

import { MinusCircleOutlined, PlusOutlined } from '@ant-design/icons';
import { Button, Form, Input, Space } from 'antd';
import React from 'react';

const DynamicForm = () =&gt; {
    return (
            &lt;Form name="dynamic_form_nest_item" autoComplete="off" &gt;
                &lt;Form.List name="users"&gt;
                    {(fields, { add, remove }) =&gt; (
                        &lt;div&gt;
                            {fields.map(({ key, name, ...restField }) =&gt; (
                                &lt;Space
                                    key={key}
                                    style={{
                                        display: 'flex',
                                        marginBottom: 8,
                                    }}
                                    align="baseline"
                                &gt;
                                    &lt;Form.Item
                                        {...restField}
                                        name={[name, 'first']}
                                        rules={[
                                            {
                                                required: true,
                                                message: 'Missing first name',
                                            },
                                        ]}
                                    &gt;
                                        &lt;Input placeholder="First Name" /&gt;
                                    &lt;/Form.Item&gt;
                                    &lt;Form.Item
                                        {...restField}
                                        name={[name, 'last']}
                                        rules={[
                                            {
                                                required: true,
                                                message: 'Missing last name',
                                            },
                                        ]}
                                    &gt;
                                        &lt;Input placeholder="Last Name" /&gt;
                                    &lt;/Form.Item&gt;
                                    &lt;MinusCircleOutlined 
                                      onClick={() =&gt; remove(name)} 
                                      /&gt;
                                &lt;/Space&gt;
                            ))}
                            &lt;Form.Item&gt;
                                &lt;Button 
                                    type="dashed" 
                                    onClick={() =&gt; add()} 
                                    block 
                                    icon={&lt;PlusOutlined/&gt;
                                    }&gt;
                                    Add field
                                &lt;/Button&gt;
                            &lt;/Form.Item&gt;
                        &lt;/div&gt;
                    )}
                &lt;/Form.List&gt;
            &lt;/Form&gt;
    );
};

export default DynamicForm;
</pre>
<p>现在，当我们运行组件时，我们将看到以下输出。当我们点击<strong>添加字段时，</strong>输入在几分之一秒内被添加；我感觉像是坏UX！</p>
<p><img data-attachment-id="143655" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/react-without-autoanimate/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-without-autoanimate.gif" data-orig-size="730,794" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-without-autoanimate" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-without-autoanimate-276x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-without-autoanimate.gif" decoding="async" class="aligncenter wp-image-143655 size-full jetpack-lazy-image" src="../Images/4cc5dd81264d405dec62fb47fcfd4161.png" alt="React Without AutoAnimate " data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-without-autoanimate.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-without-autoanimate.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143655" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/react-without-autoanimate/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-without-autoanimate.gif" data-orig-size="730,794" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-without-autoanimate" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-without-autoanimate-276x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-without-autoanimate.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143655 size-full" src="../Images/4cc5dd81264d405dec62fb47fcfd4161.png" alt="React Without AutoAnimate " data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-without-autoanimate.gif"/></noscript>
<p>让我们用一行AutoAnimate动画显示表单。使用<code>DynamicForm</code>组件中的代码导入自动动画库:</p>
<p><code>import { useAutoAnimate } from '@formkit/auto-animate/react'</code></p>
<p>接下来，添加<code>useAutoAnimate</code>钩子，如下所示:</p>
<p><code>const [parent] = useAutoAnimate(/* optional config */)</code></p>
<p>然后，传递对父元素<code>&lt;div&gt;</code>的引用，如下所示:</p>
<p><code>&lt;div ref={parent}&gt;</code></p>
<p>现在，再次运行代码；您可以看到AutoAnimate的神奇之处！</p>
<p><img data-attachment-id="143657" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/auto-animate-examples/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/auto-animate-examples.gif" data-orig-size="730,666" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="auto-animate-examples" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/auto-animate-examples-300x274.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/auto-animate-examples.gif" decoding="async" class="aligncenter wp-image-143657 size-full jetpack-lazy-image" src="../Images/71d1fbcea05da2b252adaa77e0654557.png" alt="AutoAnimate Example" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/auto-animate-examples.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/auto-animate-examples.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143657" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/auto-animate-examples/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/auto-animate-examples.gif" data-orig-size="730,666" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="auto-animate-examples" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/auto-animate-examples-300x274.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/auto-animate-examples.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143657 size-full" src="../Images/71d1fbcea05da2b252adaa77e0654557.png" alt="AutoAnimate Example" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/auto-animate-examples.gif"/></noscript>

<p>另一个用例是自动激活应用程序的<code>Comments</code>组件。</p>
<p>在这里，我们正在开发一个<code>Comments</code>组件，用于给帖子添加评论。如果添加了新的注释，它会显示在列表的顶部。</p>
<pre class="language-javascript hljs">//Comments.jsx
import {Avatar, Button, Comment, Form, Input,} from 'antd';
import React, {useState} from 'react';
import {useAutoAnimate} from '@formkit/auto-animate/react'
const {TextArea} = Input;

const Editor = ({onChange, onSubmit, submitting, value}) =&gt; (
    &lt;&gt;
        &lt;Form.Item&gt;
            &lt;TextArea rows={4} onChange={onChange} value={value}/&gt;
        &lt;/Form.Item&gt;
        &lt;Form.Item&gt;
            &lt;Button 
                htmlType="submit" 
                loading={submitting} 
                onClick={onSubmit} 
                type="primary"
                &gt;
            Add Comment
            &lt;/Button&gt;
        &lt;/Form.Item&gt;
    &lt;/&gt;
);

const Comments = () =&gt; {
    const [comments, setComments] = useState([]);
    const [submitting, setSubmitting] = useState(false);
    const [value, setValue] = useState('');
    const [parent] = useAutoAnimate()
    const handleSubmit = () =&gt; {
        if (!value) return;
        setSubmitting(true);
        setTimeout(() =&gt; {
            setSubmitting(false);
            setValue('');
            setComments([
                ...comments,
                {
                    author: 'Han Solo',
                    avatar: 'https://joeschmoe.io/api/v1/random',
                    content: &lt;p&gt;{value}&lt;/p&gt;,
                },
            ]);
        }, 500);
    };

    const handleChange = (e) =&gt; {
        setValue(e.target.value);
    };

    return (
        &lt;&gt;
            &lt;ul ref={parent}&gt;
                {comments.map((comment) =&gt; (
                        &lt;Comment
                            key={comment.content}
                            author={comment.author}
                            avatar={
                                    &lt;Avatar 
                                      src="https://joeschmoe.io/api/v1/random" 
                                      alt="Han Solo"
                                    /&gt;
                                    }
                            content={
                                &lt;p&gt;
                                    {comment.content}
                                &lt;/p&gt;
                            }
                        /&gt;
                    )
                )}
            &lt;/ul&gt;
            &lt;Comment
                avatar={
                  &lt;Avatar src="https://joeschmoe.io/api/v1/random" alt="Han Solo"/&gt;
                }
                content={
                    &lt;Editor
                        onChange={handleChange}
                        onSubmit={handleSubmit}
                        submitting={submitting}
                        value={value}
                    /&gt;
                }
            /&gt;
        &lt;/&gt;
    );
};

export default Comments;
</pre>
<p>在上面的例子中，我们有一个注释输入。当用户键入评论并点击<strong>添加评论</strong> <strong>、</strong>时，输入的评论会以动画形式附加在顶部。为了给列表添加动画效果，我们添加了一个对<code>&lt;ul&gt;</code>元素的自动动画钩子引用。</p>
<p>现在，当我们运行组件时，我们将看到以下输出:</p>
<p><img data-attachment-id="143662" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/user-comment-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/user-comment-component.gif" data-orig-size="730,846" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="user-comment-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/user-comment-component-259x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/user-comment-component.gif" decoding="async" class="aligncenter wp-image-143662 size-full jetpack-lazy-image" src="../Images/da6ba8e5816486224e24043627a60e9e.png" alt="User Comment Component." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/user-comment-component.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/user-comment-component.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143662" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/user-comment-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/user-comment-component.gif" data-orig-size="730,846" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="user-comment-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/user-comment-component-259x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/user-comment-component.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143662 size-full" src="../Images/da6ba8e5816486224e24043627a60e9e.png" alt="User Comment Component." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/user-comment-component.gif"/></noscript>
<h2 id="customize-animation-duration">自定义动画持续时间</h2>
<p>我们可以通过将<code>duration</code>道具传递给<code>useAutoAnimate</code>来定制过渡时间。让我们以动态卡为例来看看这一点。</p>
<p>在这个例子中，我们制作了500毫秒长的过渡，所以当用户点击<strong>添加任务</strong>时，一张新的卡片被插入，所有其他的卡片在500毫秒后被移动。</p>
<pre class="language-javascript hljs">//DynamicComponents.jsx

import React, {useState} from "react";
import {Avatar, Button, Card, Col, Form, Input, Row} from 'antd';
import {useAutoAnimate} from "@formkit/auto-animate/react";

const {Meta} = Card;

export default function DynamicComponents() {

    const [comments, setComments] = useState([]);
    const [parent] = useAutoAnimate({duration: 500});

    const handleSubmit = (values) =&gt; {
        if (!values) return;
        setComments((prev) =&gt; [{content: values.content}, ...prev]);
    };

    return (
        &lt;&gt;
            &lt;Form
                name="basic"
                onFinish={handleSubmit}
                autoComplete="off"
            &gt;
                &lt;Form.Item
                    name="content"
                &gt;
                   &lt;Input/&gt;
                &lt;/Form.Item&gt;
                &lt;Form.Item&gt;
                    &lt;Button htmlType="submit" type="primary"&gt;
                        Add Task
                    &lt;/Button&gt;
                &lt;/Form.Item&gt;
            &lt;/Form&gt;
            &lt;Row gutter={[16, 24]} ref={parent}&gt;
                {comments.map((comment) =&gt; (
                    &lt;Col span={6} key={comment.content}&gt;
                        &lt;Card
                            style={{
                                width: 100,
                            }}
                            cover={
                                &lt;img
                                    alt="example"
                                    src="https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"
                                /&gt;
                            }
                        &gt;
                            &lt;Meta
                                avatar={
                                &lt;Avatar src="https://joeschmoe.io/api/v1/random"/&gt;
                                  }
                                description={comment.content}
                            /&gt;
                        &lt;/Card&gt;
                    &lt;/Col&gt;
                ))
                }
            &lt;/Row&gt;
        &lt;/&gt;
    );
}
</pre>
<p>现在，当我们运行组件时，我们将看到以下输出:</p>
<p><img data-attachment-id="143664" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/customize-animation-duration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/customize-animation-duration.gif" data-orig-size="730,809" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="customize-animation-duration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/customize-animation-duration-271x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/customize-animation-duration.gif" decoding="async" class="aligncenter wp-image-143664 size-full jetpack-lazy-image" src="../Images/d1cdd4e5bc6c3e7fec1d56983eeb1c9c.png" alt="Customize Animation Duration." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/customize-animation-duration.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/customize-animation-duration.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143664" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/customize-animation-duration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/customize-animation-duration.gif" data-orig-size="730,809" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="customize-animation-duration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/customize-animation-duration-271x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/customize-animation-duration.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143664 size-full" src="../Images/d1cdd4e5bc6c3e7fec1d56983eeb1c9c.png" alt="Customize Animation Duration." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/customize-animation-duration.gif"/></noscript>
<h2 id="enable-disable-animations">启用和禁用动画</h2>
<p>有时，我们需要禁用一个动画，以后再使用它。为了处理这些情况，AutoAnimate钩子<code>useAutoAnimate</code>返回<strong>启用</strong>和<strong>禁用</strong>函数，这些函数可用于启用和禁用动画。</p>
<p>我们可以在下面的代码块中看到这一点:</p>
<pre class="language-javascript hljs">//DynamicCards.jsx

import React, {useState} from "react";
import {Avatar, Button, Card, Col, Form, Input, Row} from 'antd';
import {useAutoAnimate} from "@formkit/auto-animate/react";

const {Meta} = Card;

export default function DynamicCards() {
    const [comments, setComments] = useState([]);
    const [parent, enable] = useAutoAnimate({duration: 500});
    const [isEnabled, setIsEnabled] = useState(true)

    const handleSubmit = (values) =&gt; {
        if (!values) return;
        setComments((prev) =&gt; [{content: values.content}, ...prev]);
    };

    function toggle () {
        enable(!isEnabled)
        setIsEnabled(!isEnabled)
    }

    return (
        &lt;&gt;
            &lt;Form
                name="basic"
                onFinish={handleSubmit}
                autoComplete="off"
            &gt;
                &lt;Form.Item
                    name="content"
                &gt;
                    &lt;Input/&gt;
                &lt;/Form.Item&gt;
                &lt;Form.Item&gt;
                    &lt;Button htmlType="submit" type="primary"&gt;
                        Add Task
                    &lt;/Button&gt;
                &lt;/Form.Item&gt;
                &lt;Form.Item&gt;
                    &lt;Button onClick={toggle} type="primary"&gt;
                        { isEnabled ? "🚫 Disable" : "✅ Enable" } animations
                    &lt;/Button&gt;
                &lt;/Form.Item&gt;
            &lt;/Form&gt;
            &lt;Row gutter={[16, 24]} ref={parent}&gt;
                {comments.map((comment) =&gt; (
                    &lt;Col span={6} key={comment.content}&gt;
                        &lt;Card
                            style={{
                                width: 100,
                            }}
                            cover={
                                &lt;img
                                    alt="example"
                                    src="https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"
                                /&gt;
                            }
                        &gt;
                            &lt;Meta
                                avatar={
                                  &lt;Avatar 
                                  src="https://joeschmoe.io/api/v1/random"/&gt;}
                                  description={comment.content}
                            /&gt;
                        &lt;/Card&gt;
                    &lt;/Col&gt;
                ))
                }
            &lt;/Row&gt;
        &lt;/&gt;
    );
}
</pre>
<p>这里，我们使用了前面的例子，为它添加了启用和禁用选项。动画由传递给<code>useAutoAnimate</code>钩子的<code>enable</code>布尔属性控制。</p>
<p>现在，当我们运行组件时，我们将看到以下输出:</p>
<p><img data-attachment-id="143666" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/enable-disable-animations/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/enable-disable-animations.gif" data-orig-size="730,794" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="enable-disable-animations" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/enable-disable-animations-276x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/enable-disable-animations.gif" decoding="async" class="aligncenter wp-image-143666 size-full jetpack-lazy-image" src="../Images/4ccdc5a19939594a7164e4fa50c6b312.png" alt="Enable And Disable Animations " data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/enable-disable-animations.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/enable-disable-animations.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143666" data-permalink="https://blog.logrocket.com/animate-react-components-single-line-using-autoanimate/attachment/enable-disable-animations/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/enable-disable-animations.gif" data-orig-size="730,794" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="enable-disable-animations" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/enable-disable-animations-276x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/enable-disable-animations.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143666 size-full" src="../Images/4ccdc5a19939594a7164e4fa50c6b312.png" alt="Enable And Disable Animations " data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/enable-disable-animations.gif"/></noscript>
<p>AutoAnimate是一个零配置工具，它还提供了一个选项来自定义默认动画关键帧和使用自定义动画。然而，根据我的经验，AutoAnimate的默认动画产品对于大多数组件来说已经足够了。</p>
<blockquote><p><strong> N.B. </strong>，注意:你可以在这个<a href="https://codesandbox.io/s/auto-animate-amimation-examples-react-tfk9d2"> CodeSandbox </a>中找到本教程的完整代码</p></blockquote>
<h2 id="conclusion">结论</h2>
<p>AutoAnimate通过其零配置方法、易用性和快速实现使动画变得非常简单——它帮助开发人员在他们的项目中有效地提供流畅的用户体验。</p>
<p>除了我们今天看到的React示例，AutoAnimate还支持Vue、Angular和Svelte。你可以在官方<a href="https://auto-animate.formkit.com/#usage-vue">文档</a>中找到其他JavaScript框架的例子。</p>
<p>请在下面的评论中告诉我你自己使用AutoAnimate的经历，感谢你的阅读！</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</h2><p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>