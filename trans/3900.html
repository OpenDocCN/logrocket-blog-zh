<html>
<head>
<title>Build powerful React forms with Informed </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>利用信息构建强大的反应表单</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-powerful-react-forms-with-informed/#0001-01-01">https://blog.logrocket.com/build-powerful-react-forms-with-informed/#0001-01-01</a></blockquote><div><article class="article-post">
<p>表单是web开发的主要部分。如果您必须在web上收集用户输入并在您的服务器上处理这些输入，您需要一个表单。</p>
<p>虽然React中有许多处理表单的库，但在本文中，我将向您展示如何使用<a href="https://github.com/teslamotors/informed"> Informed库</a>构建强大的表单。Informed是一个轻量级框架和实用程序，用于在React应用程序中构建强大的表单。</p>
<p>Informed library与其竞争对手的不同之处在于，它拥有您所期望的所有框架工具:固执己见的表单UI组件和状态管理，以及用于格式化、屏蔽、调试等的内置实用程序。</p>
<p>让我们开始吧。</p>
<p><em>向前跳转:</em></p>

<h2 id="setting-up-informed">设置通知</h2>
<p>首先，通过npm在您的<code>react</code>项目中安装<code>informed</code>库:</p>
<pre class="language-bash hljs">npm install informed
</pre>
<p>表单的核心主要由一个父表单组件和几个子输入字段组成。输入字段可以采取几种形式，例如，基本文本字段、文本区域、单选输入、复选框输入、选择输入、数字输入等。不管<code>react</code>表单库如何，都是如此。</p>
<p>考虑以下基本形式:</p>
<figure id="attachment_158190" aria-describedby="caption-attachment-158190" class="wp-caption aligncenter"><img data-attachment-id="158190" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/basic-form-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example.png" data-orig-size="730,475" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="basic-form-example" data-image-description="" data-image-caption="&lt;p&gt;An &lt;a href=&quot;https://stackblitz.com/edit/react-ts-jqjc8h?file=App.tsx&quot;&gt;example of a basic form&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example.png" decoding="async" src="../Images/3660e0c9c8ff75bf12bce7d5dc6ca6de.png" alt="An example of a basic form" class="size-full wp-image-158190 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158190" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/basic-form-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example.png" data-orig-size="730,475" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="basic-form-example" data-image-description="" data-image-caption="&lt;p&gt;An &lt;a href=&quot;https://stackblitz.com/edit/react-ts-jqjc8h?file=App.tsx&quot;&gt;example of a basic form&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example.png" decoding="async" loading="lazy" src="../Images/3660e0c9c8ff75bf12bce7d5dc6ca6de.png" alt="An example of a basic form" class="size-full wp-image-158190" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/basic-form-example.png"/></noscript><figcaption id="caption-attachment-158190" class="wp-caption-text">An <a href="https://stackblitz.com/edit/react-ts-jqjc8h?file=App.tsx">example of a basic form</a></figcaption></figure>
<p>其核心是一个有三个输入元素的表单:两个文本字段和一个<strong>提交</strong>按钮。</p>
<p>为了通过<code>informed</code>表示这个表单，我们可以使用它的内置组件，如下所示:</p>
<pre class="language-typescript hljs">import * as React from 'react';
import { Form, Input, Debug } from 'informed'; {/** 👈 look here **/}

export default function App() {
  return (
    &lt;Form
      onSubmit={(formState) =&gt; {
        console.log(formState.values);
      }}
    &gt;
      &lt;h1&gt;Sign in &lt;/h1&gt;
      &lt;Input name="email" label="Email:" placeholder="<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="8de8e0ece4e1cde8f5ece0fde1e8a3eee2e0">[email protected]</a>" /&gt;
      &lt;Input name="password" type="password" label="Password:" placeholder="**********" /&gt;
      &lt;button type="submit"&gt; Submit &lt;/button&gt;
    &lt;/Form&gt;
  );
}
</pre>
<p>注意传递给<code>Input</code>字段的属性是如何类似于标准的HTML输入属性，即<code>name</code>和<code>placeholder</code>。</p>
<p>这个<code>Form</code>比较简单。提交后，表单值会记录在控制台中。如果您尝试在没有任何输入条目的情况下提交，将会记录一个空对象:</p>
<figure id="attachment_158195" aria-describedby="caption-attachment-158195" class="wp-caption aligncenter"><img data-attachment-id="158195" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/logging-form-state/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state.png" data-orig-size="730,475" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="logging-form-state" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-jqjc8h?file=App.tsx&quot;&gt;Logging form state&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state.png" decoding="async" src="../Images/6ab587d61b46cf0323e74c0796dc1ee1.png" alt="Logging form state" class="size-full wp-image-158195 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158195" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/logging-form-state/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state.png" data-orig-size="730,475" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="logging-form-state" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-jqjc8h?file=App.tsx&quot;&gt;Logging form state&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state.png" decoding="async" loading="lazy" src="../Images/6ab587d61b46cf0323e74c0796dc1ee1.png" alt="Logging form state" class="size-full wp-image-158195" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/logging-form-state.png"/></noscript><figcaption id="caption-attachment-158195" class="wp-caption-text"><a href="https://stackblitz.com/edit/react-ts-jqjc8h?file=App.tsx">Logging form state</a></figcaption></figure>
<pre class="language-typescript hljs">{/** ... **/}
onSubmit={(formState) =&gt; {
  console.log(formState.values);
}}
{/** ... **/}
</pre>
<h2 id="simple-form-validation-messages">简单表单验证(带消息)</h2>
<p>之所以有这么多表单库，并不是因为编写HTML输入字段很难——困难在于管理表单状态和输入验证。在上面的基本示例中，用户可以提交空输入。这离生产就绪还差得很远。</p>
<p>让我们解决这个问题。</p>
<h3 id="simple-required-inputs">简单的必需输入</h3>
<p>验证的第一层是简单地创建必填字段。通过将<code>required</code>道具传递给<code>informed</code>输入来实现:</p>
<pre class="language-typescript hljs">{/** ... **/}
&lt;Input
  required {/** 👈 look here **/}
  name="email"
  label="Email:"
  placeholder="<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="345159555d5874514c55594458511a575b59">[email protected]</a>"
/&gt;
&lt;Input
  required {/** 👈 look here **/}
  name="password"
  label="Password:"
  placeholder="**********"
/&gt;
{/** ... **/}
</pre>
<p>现在，当您尝试提交表单时，您会看到默认的<code>This field is required</code>错误消息显示在必需的输入字段下面。</p>
<figure id="attachment_158204" aria-describedby="caption-attachment-158204" class="wp-caption aligncenter"><img data-attachment-id="158204" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/default-required-messages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="default-required-messages" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-pzay2d?file=App.tsx&quot;&gt;Default required messages&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages.png" decoding="async" src="../Images/e13b1b0cfbc6d74c0b694de5e8e8da2a.png" alt="The default required messages" class="size-full wp-image-158204 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages-300x196.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158204" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/default-required-messages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="default-required-messages" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-pzay2d?file=App.tsx&quot;&gt;Default required messages&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages.png" decoding="async" loading="lazy" src="../Images/e13b1b0cfbc6d74c0b694de5e8e8da2a.png" alt="The default required messages" class="size-full wp-image-158204" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages-300x196.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/default-required-messages.png"/></noscript><figcaption id="caption-attachment-158204" class="wp-caption-text"><a href="https://stackblitz.com/edit/react-ts-pzay2d?file=App.tsx">Default required messages</a></figcaption></figure>
<h3 id="changing-required-input-validation-message">更改所需的输入验证消息</h3>
<p>在生产应用程序中，您希望完全控制向用户显示的消息。默认消息<code>This field is required</code>可能不够。您可能还希望传递基于用户语言的本地化消息。</p>
<p>为此，将一个<code>errorMessage</code> prop传递给所需的输入，如下所示:</p>
<pre class="language-typescript hljs">{/** ... **/}
&lt;Input
  required
  name="email"
  label="Email:"
  placeholder="<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0b6e666a62674b6e736a667b676e25686466">[email protected]</a>"
  errorMessage="Your email is required" {/** 👈 look here **/}
/&gt;
&lt;Input
  required
  name="password"
  type="password"
  label="Password:"
  placeholder="**********"
  errorMessage="Your password is required" {/** 👈 look here **/}
/&gt;
{/** ... **/}
</pre>
<p>上述代码产生以下内容:</p>
<figure id="attachment_158212" aria-describedby="caption-attachment-158212" class="wp-caption aligncenter"><img data-attachment-id="158212" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/custom-error-messages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages.png" data-orig-size="730,475" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-error-messages" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-pzsrhk?file=App.tsx&quot;&gt;Custom error messages&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages.png" decoding="async" src="../Images/9b317e09c166711eb50ec7f64e2da504.png" alt="Custom error messages" class="size-full wp-image-158212 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158212" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/custom-error-messages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages.png" data-orig-size="730,475" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-error-messages" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-pzsrhk?file=App.tsx&quot;&gt;Custom error messages&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages.png" decoding="async" loading="lazy" src="../Images/9b317e09c166711eb50ec7f64e2da504.png" alt="Custom error messages" class="size-full wp-image-158212" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-error-messages.png"/></noscript><figcaption id="caption-attachment-158212" class="wp-caption-text"><a href="https://stackblitz.com/edit/react-ts-pzsrhk?file=App.tsx">Custom error messages</a></figcaption></figure>
<h2 id="going-beyond-basic-required-validation">超越基本的、必需的验证</h2>
<p>添加<code>required</code>道具是很好的第一步。然而，在现实世界的项目中，你会想走得更远。</p>
<p>我们的登录表单可以使用更多的验证。例如，对于错误输入的电子邮件，如何验证实际的电子邮件输入？那么验证密码输入的长度呢？</p>
<p>为了获得更大的验证灵活性，您可以将一个<code>validate</code>函数属性传递给相关的输入，如下所示:</p>
<pre class="language-typescript hljs">import * as React from 'react';
import { Form, Input, Debug } from 'informed';

const validateEmail = (v: string) =&gt; {
  if (!v.includes('@')) {
    return 'Please pass a valid email';
  }
};

const validatePassword = (v: string) =&gt; {
  if (v.length &lt; 6) {
    return 'Your password must be at least 7 characters long';
  }
};

export default function App() {
  return (
    &lt;Form
      onSubmit={(formState) =&gt; {
        console.log(formState.values);
      }}
    &gt;
      &lt;h1&gt;Sign in &lt;/h1&gt;
      &lt;Input
        required
        name="email"
        label="Email:"
        validate={validateEmail} {/** 👈 look here **/}
        placeholder="<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="56333b373f3a16332e373b263a337835393b">[email protected]</a>"
        errorMessage="Your email is required"
      /&gt;
      &lt;Input
        required
        name="password"
                type="password"
        label="Password:"
        placeholder="**********"
        validate={validatePassword} {/** 👈 look here **/}
        errorMessage="Your password is required"
      /&gt;
      &lt;button type="submit"&gt; Submit &lt;/button&gt;
    &lt;/Form&gt;
  );
}
</pre>
<p>现在，当基本的<code>required</code>验证开始时，默认的<code>errorMessage</code>道具将一直显示。然而，一旦输入被填充并提交，函数<code>validate</code>就会启动，返回的字符串显示为输入错误消息:</p>
<figure id="attachment_158214" aria-describedby="caption-attachment-158214" class="wp-caption aligncenter"><img data-attachment-id="158214" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/custom-validator-functions/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-validator-functions" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-bjokq2?file=App.tsx&quot;&gt;Custom validator functions&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions.png" decoding="async" src="../Images/a5421a9f83d29358158ebff53859b4d4.png" alt="Custom validator functions" class="size-full wp-image-158214 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions-300x196.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158214" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/custom-validator-functions/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-validator-functions" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-bjokq2?file=App.tsx&quot;&gt;Custom validator functions&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions.png" decoding="async" loading="lazy" src="../Images/a5421a9f83d29358158ebff53859b4d4.png" alt="Custom validator functions" class="size-full wp-image-158214" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions-300x196.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/custom-validator-functions.png"/></noscript><figcaption id="caption-attachment-158214" class="wp-caption-text"><a href="https://stackblitz.com/edit/react-ts-bjokq2?file=App.tsx">Custom validator functions</a></figcaption></figure>
<h2 id="schema-validation-yup">用Yup进行模式验证</h2>
<p>实际上，大多数人使用健壮的模式验证库，如<a href="https://github.com/jquense/yup"> Yup </a>。知情的让你<a href="https://blog.logrocket.com/comparing-schema-validation-libraries-zod-vs-yup/">也用好的</a>。</p>
<p>让我们<a href="https://stackblitz.com/edit/react-ts-9lrju6?file=App.tsx">重写我们现有的验证</a>来使用Yup，如下所示:</p>
<pre class="language-typescript hljs">import * as Yup from 'yup';
import * as React from 'react';
import { Form, Input } from 'informed';

{/** 👇 look here **/}
const validationSchema = Yup.object().shape({
  email: Yup.string()
    .email('Please pass a valid email')
    .required('Your email is required'),
  password: Yup.string()
    .required('Your password is required')
    .min(7, 'Your password must be at least 7 characters long'),
});

export default function App() {
  return (
    &lt;Form
      yupSchema={validationSchema} {/** 👈 look here **/}
      onSubmit={(formState) =&gt; {
        console.log(formState.values);
      }}
    &gt;
      &lt;h1&gt;Sign in &lt;/h1&gt;
      &lt;Input name="email" label="Email:" placeholder="<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b9dcd4d8d0d5f9dcc1d8d4c9d5dc97dad6d4">[email protected]</a>" /&gt;
      &lt;Input
        type="password"
        name="password"
        label="Password:"
        placeholder="**********"
      /&gt;
      &lt;button type="submit"&gt; Submit &lt;/button&gt;
    &lt;/Form&gt;
  );
}
</pre>
<p>上述内容的重要之处在于，我们将<code>yupSchema</code>属性传递给<code>Form</code>组件，然后像平常一样定义您的验证模式。</p>
<h2 id="exploring-other-input-types">探索其他输入类型</h2>
<p>Informed如何处理其他表单输入类型，如文本区域、单选输入和选择输入？用法与常规输入非常相似:您导入关联的通知组件，并向其传递相关的属性。</p>
<p>考虑下面的例子:</p>
<figure id="attachment_158217" aria-describedby="caption-attachment-158217" class="wp-caption aligncenter"><img data-attachment-id="158217" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/other-form-inputs/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="other-form-inputs" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-hrzu3i?file=App.tsx&quot;&gt;Other form inputs&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs.png" decoding="async" src="../Images/64bcd5bd1f8a33867df0fa5e08b01314.png" alt="Other form inputs" class="size-full wp-image-158217 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs-300x196.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158217" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/other-form-inputs/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="other-form-inputs" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-hrzu3i?file=App.tsx&quot;&gt;Other form inputs&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs.png" decoding="async" loading="lazy" src="../Images/64bcd5bd1f8a33867df0fa5e08b01314.png" alt="Other form inputs" class="size-full wp-image-158217" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs-300x196.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/other-form-inputs.png"/></noscript><figcaption id="caption-attachment-158217" class="wp-caption-text"><a href="https://stackblitz.com/edit/react-ts-hrzu3i?file=App.tsx">Other form inputs</a></figcaption></figure>
<p>上面的表单利用了文本区域、单选按钮组、复选框和选择输入。有了Informed，使用它们就像导入组件(大写名称)和传递与HTML元素相同的属性一样简单，只需要添加一个<code>label</code>属性就可以了。</p>
<p>方法如下:</p>
<pre class="language-typescript hljs">import * as React from 'react';
import {
  Form,
  Input,
  TextArea,
  Checkbox,
  Select,
  Option,
  Radio,
  RadioGroup,
} from 'informed';

export default function App() {
  return (
    &lt;Form
      onSubmit={(formState) =&gt; {
        console.log(formState.values);
      }}
    &gt;
      &lt;h1&gt;Sign up &lt;/h1&gt;
      &lt;Input
        required
        name="name"
        label="Name:"
        placeholder="<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a4c1c9c5cdc8e4c1dcc5c9d4c8c18ac7cbc9">[email protected]</a>"
      /&gt;
      &lt;TextArea {/** 👈 look here **/}
        required
        name="bio"
        label="Bio:"
        placeholder="I am a teacher and a developer ..."
      /&gt;

      &lt;RadioGroup name="relationship"&gt; {/** 👈 look here **/}
        &lt;Radio value="single" label="Single" /&gt;
        &lt;Radio value="married" label="married" /&gt;
      &lt;/RadioGroup&gt;

      {/** 👇 look here **/}
      &lt;Checkbox name="newsletter" label="Subscribe to our newsletter?" /&gt;

      {/** 👇 look here **/}
      &lt;Select name="status" label="Relationship status:"&gt;
        &lt;Option value="" disabled&gt;
          Select One...
        &lt;/Option&gt;
        &lt;Option value="single"&gt;Single&lt;/Option&gt;
        &lt;Option value="relationship"&gt;Relationship&lt;/Option&gt;
        &lt;Option value="complicated"&gt;Complicated&lt;/Option&gt;
      &lt;/Select&gt;

      &lt;button type="submit"&gt; Submit &lt;/button&gt;
    &lt;/Form&gt;
  );
}
</pre>
<h2 id="debug-component"><code>Debug</code>组件</h2>
<p>调试是构建真实软件的重要部分。使用<code>Informed</code>，您可以使用<code>Debug</code>组件查看当前表单状态，而不是手动呈现表单值或处理控制台日志。</p>
<p>考虑最后一个例子中<code>Debug</code>的使用:</p>
<pre class="language-typescript hljs">import {Debug} from 'informed'

... 
&lt;Debug /&gt; 
...
</pre>
<p>您所要做的就是呈现<code>Debug</code>组件，您将获得整个表单当前同步状态的可视化表示。</p>
<figure id="attachment_158220" aria-describedby="caption-attachment-158220" class="wp-caption aligncenter"><img data-attachment-id="158220" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/debug-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="debug-component" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://react-ts-r5ye9f.stackblitz.io&quot;&gt;The &lt;code&gt;debug&lt;/code&gt; component&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component.png" decoding="async" src="../Images/0eefe83a533f01e22cbba34914a66209.png" alt="The debug component" class="size-full wp-image-158220 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component-300x196.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158220" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/debug-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="debug-component" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://react-ts-r5ye9f.stackblitz.io&quot;&gt;The &lt;code&gt;debug&lt;/code&gt; component&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component.png" decoding="async" loading="lazy" src="../Images/0eefe83a533f01e22cbba34914a66209.png" alt="The debug component" class="size-full wp-image-158220" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component-300x196.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/debug-component.png"/></noscript><figcaption id="caption-attachment-158220" class="wp-caption-text"><a href="https://react-ts-r5ye9f.stackblitz.io">The <code>debug</code> component</a></figcaption></figure>
<p>要查看单个表单字段的状态，请将<code>DebugField</code>与相关字段的<code>name</code>一起使用，如下所示:</p>
<pre class="language-typescript hljs">import {DebugField} from 'informed'

... 
&lt;DebugField name="gender"/&gt; 
...
</pre>
<h2 id="controlling-when-validation-occurs">控制验证发生的时间</h2>
<p>控制何时触发表单验证是非常强大的。例如，为了验证从服务器接收的初始值，或者在初始化SDK时传递的默认值，您可能希望在装载表单时立即显示错误。</p>
<p>为了在表单安装后立即验证，将<code>validateOnMount</code> prop传递给<code>Form</code>组件:</p>
<pre class="language-typescript hljs">&lt;Form validateOnMount /&gt;
</pre>
<p>如果您继续这样做，将在装载时进行验证，但不会向用户显示错误。</p>
<p>您可以使用<code>showErrorIfError</code>、<code>showErrorIfTouched</code>或<code>showErrorIfDirty</code>道具控制何时向用户显示验证错误。(<code>showErrorIfTouched</code>是这里的默认值。)</p>
<p>要验证表单并在装载时立即显示错误，请执行以下操作:</p>
<pre class="language-typescript hljs">&lt;Form validateOnMount showErrorIfError/&gt;
</pre>
<p>现在，表单一安装(验证后)，就会显示错误<a href="https://react-ts-mtfabt.stackblitz.io">:</a></p>
<figure id="attachment_158222" aria-describedby="caption-attachment-158222" class="wp-caption aligncenter"><img data-attachment-id="158222" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/showing-errors-on-mount/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="showing-errors-on-mount" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-mtfabt?file=App.tsx&quot;&gt;Showing errors on mount&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount.png" decoding="async" src="../Images/db0d6a1e7fb165550e71433c73f1a559.png" alt="Showing errors on mount" class="size-full wp-image-158222 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount-300x196.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158222" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/showing-errors-on-mount/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="showing-errors-on-mount" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-mtfabt?file=App.tsx&quot;&gt;Showing errors on mount&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount.png" decoding="async" loading="lazy" src="../Images/db0d6a1e7fb165550e71433c73f1a559.png" alt="Showing errors on mount" class="size-full wp-image-158222" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount-300x196.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/showing-errors-on-mount.png"/></noscript><figcaption id="caption-attachment-158222" class="wp-caption-text"><a href="https://stackblitz.com/edit/react-ts-mtfabt?file=App.tsx">Showing errors on mount</a></figcaption></figure>
<p>默认情况下，当字段模糊时将进行验证，但您可以更改这种行为。要进一步控制何时进行字段验证，请使用带有以下任意值的<code>validateOn</code>属性:</p>
<ul>
<li><code>change</code></li>
<li><code>blur</code></li>
<li><code>change-blur</code></li>
<li><code>change-submit</code></li>
<li><code>blur-submit</code></li>
<li><code>submit</code></li>
</ul>
<p>您还可以使用<code>change</code>值进行一些实时字段验证，如下所示:</p>
<pre class="language-typescript hljs">{/** ... **/}

export default function App() {
  return (
    &lt;Form
      showErrorIfError
      onSubmit={(formState) =&gt; {
        console.log(formState.values);
      }}
    &gt;
      {/* ... */ }

      &lt;TextArea
        name="bio"
        label="Bio:"
        validateOn="change" {/** 👈 look here **/}
        placeholder="I am a teacher and a developer ..."
      /&gt;

      {/* ... */ }
    &lt;/Form&gt;
  );
}
</pre>
<p>注意<code>showErrorIfError</code>用于在验证后立即显示错误——而不是在输入字段模糊后。<code>validateOn</code>属性也被传递给<code>TextArea</code>组件，并提供一个<code>validate</code>函数。</p>
<p>这将模拟<a href="https://stackblitz.com/edit/react-ts-79eqiu?file=App.tsx">实时验证，</a>遇到错误时向用户显示。</p>
<h2 id="conditionally-render-form-fields-accessing-form-state">通过访问表单状态有条件地呈现表单字段</h2>
<p>乍一看，有条件地呈现一个表单域并不是一件难事。你只需遵循你已经熟悉的<code>JSX</code>原则，例如:</p>
<pre class="language-typescript hljs">true &amp;&amp; &lt;ConditionallyRenderThis /&gt;
</pre>
<p>但是，当条件呈现依赖于窗体的内部状态时，您需要访问窗体状态。</p>
<p>使用<code>Informed</code>有几种方法可以做到这一点。也许最灵活的选择是使用<code>useFormState</code>钩子获取整个表单的状态，然后像平常一样有条件地呈现:</p>
<pre class="language-typescript hljs">const SpouseName = () =&gt; {
  const formState = useFormState();
  return (
    formState.values?.relationship === 'married' &amp;&amp; (
      &lt;Input name="spouse" label="🚨 Spouse Name:" /&gt;
    )
  );
};

export default function App() {
  return (
    &lt;Form
      onSubmit={(formState) =&gt; {
        console.log(formState.values);
      }}
    &gt;
     {/* ... */ }
      &lt;SpouseName /&gt;
      {/* ... */ }
    &lt;/Form&gt;
  );
}
</pre>
<p>现在，当用户选择<strong>已婚</strong>选项时，我们将继续请求他们配偶的名字。</p>
<figure id="attachment_158224" aria-describedby="caption-attachment-158224" class="wp-caption aligncenter"><img data-attachment-id="158224" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/conditionally-display-input-field/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="conditionally-display-input-field" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-dd2iap?file=App.tsx&quot;&gt;Conditionally display an input field&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field.png" decoding="async" src="../Images/362498480b3c36f3d33594a308aafb3f.png" alt="Conditionally display an input field" class="size-full wp-image-158224 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field-300x196.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158224" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/conditionally-display-input-field/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="conditionally-display-input-field" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-dd2iap?file=App.tsx&quot;&gt;Conditionally display an input field&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field.png" decoding="async" loading="lazy" src="../Images/362498480b3c36f3d33594a308aafb3f.png" alt="Conditionally display an input field" class="size-full wp-image-158224" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field-300x196.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-input-field.png"/></noscript><figcaption id="caption-attachment-158224" class="wp-caption-text"><a href="https://stackblitz.com/edit/react-ts-dd2iap?file=App.tsx">Conditionally display an input field</a></figcaption></figure>
<p>需要注意的是，<code>useFormState</code>钩子是在<code>Form</code>中呈现的一个单独的子组件中使用的。如果您继续使用父组件中的<code>useFormState</code>钩子来渲染<code>Form</code>，这将不起作用。</p>
<p><code>formState.values</code>在这里永远是<code>undefined</code>。您必须使用<code>Form</code>组件中的钩子从内部访问表单上下文:</p>
<pre class="language-typescript hljs">export default function App() {
  const formState = useFormState()

  return (
    &lt;Form
      onSubmit={(formState) =&gt; {
        console.log(formState.values);
      }}
    &gt;
     {/* ... */ }
      {formState.values?.relationship === 'married' &amp;&amp; (
         &lt;Input name="spouse" label="🚨 Spouse Name:" /&gt;
      )
      {/* ... */ }
    &lt;/Form&gt;
  );
}
</pre>
<h2 id="easy-conditionally-rendered-form-fields">简单的、有条件呈现的表单字段</h2>
<p>Informed还导出一个<code>Relevant</code>组件来简化条件渲染。例如，我们可以修改前面的例子来使用<code>Relevant</code>组件，如下所示:</p>
<pre class="language-typescript hljs">&lt;Form
    onSubmit={(formState) =&gt; {
      console.log(formState.values);
    }}
   &gt;
   {/** ... */}

   &lt;Relevant
        when={({ formState }) =&gt; formState.values?.gender === 'non_binary'}
      &gt;
      &lt;Input name="spouse" label="🚨 Spouse Name:" /&gt;
   &lt;/Relevant&gt;

   {/** ... */}

   &lt;button type="submit"&gt; Submit &lt;/button&gt;
 &lt;/Form&gt;
</pre>
<p>呈现子组件的条件被传递给<code>when</code>函数prop，它接收表单状态作为参数并返回一个<code>boolean</code>。</p>
<p>如果计算结果为<code>true</code>，则渲染子组件。这种情况:<code>&lt;Input name="spouse" label="🚨 Spouse Name:" /&gt;</code>。</p>
<p>或者，您也可以通过向所需字段传递一个<code>relevant</code>属性，在字段级别应用条件呈现。考虑下面的例子:</p>
<pre class="language-typescript hljs">{/** ... **/}
 &lt;Select
    name="date"
    label="🚨 Shall we help you set up a date?"
    relevant={({ formState }) =&gt;
      formState.values?.relationship === 'single'
    }
  &gt;
    &lt;Option value="" disabled&gt;
      Select a date option
    &lt;/Option&gt;
    &lt;Option value="yes"&gt;Yes&lt;/Option&gt;
    &lt;Option value="no"&gt;No&lt;/Option&gt;
 &lt;/Select&gt;
{/** ... **/}
</pre>
<p>现在，每当用户选择他们的关系状态为<code>single</code>时，我们将继续呈现一个<code>select</code>输入，询问是否为他们安排约会。</p>
<figure id="attachment_158227" aria-describedby="caption-attachment-158227" class="wp-caption aligncenter"><img data-attachment-id="158227" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/conditionally-rendering-field-with-relevant-prop/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="conditionally-rendering-field-with-relevant-prop" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-p31ahp?file=App.tsx&quot;&gt;Conditionally rendering a field with the &lt;code&gt;relevant&lt;/code&gt; prop&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop.png" decoding="async" src="../Images/163c34140361db220395fd139a52ef38.png" alt="Conditionally rendering a field with the relevant prop" class="size-full wp-image-158227 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop-300x196.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158227" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/conditionally-rendering-field-with-relevant-prop/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="conditionally-rendering-field-with-relevant-prop" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-p31ahp?file=App.tsx&quot;&gt;Conditionally rendering a field with the &lt;code&gt;relevant&lt;/code&gt; prop&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop.png" decoding="async" loading="lazy" src="../Images/163c34140361db220395fd139a52ef38.png" alt="Conditionally rendering a field with the relevant prop" class="size-full wp-image-158227" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop-300x196.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-rendering-field-with-relevant-prop.png"/></noscript><figcaption id="caption-attachment-158227" class="wp-caption-text"><a href="https://stackblitz.com/edit/react-ts-p31ahp?file=App.tsx">Conditionally rendering a field with the <code>relevant</code> prop</a></figcaption></figure>
<p>我们没有使用<code>Relevant</code>组件，而是在这里利用了<code>relevant</code>道具。它有一个类似于传递给<code>Relevant</code>的<code>when</code>道具的API。prop的值是一个接收表单状态的函数，预期返回值是一个<code>boolean</code>。</p>
<h2 id="easier-data-organization-scopes">使用范围更轻松地组织数据</h2>
<p>到目前为止，我们只使用了扁平形式的状态结构。例如，我们的表单在填写时将具有类似于以下的状态:</p>
<pre class="language-json hljs">{
    "name": "Amadeus Mozart",
    "bio": "Senior software engineer",
    "relationship": "single",
    "date": "no",
    "newsletter": true,
    "status": "single"
}
</pre>
<p>但是，对于复杂的表单，您可能希望在表单状态中嵌套相关的值。例如，我们可以用以下状态表示:</p>
<pre class="language-json hljs">{
    "name": "Amadeus Mozart",
    "bio": "Senior software engineer",
    "bond": {
      "relationship": "single",
      "status": "single",
      "date": "no"
    },
    "marketing": {
      "newsletter": true
    }
}
</pre>
<p>注意嵌套的<code>bond</code>和<code>marketing</code>字段。为了实现这一点，<code>Informed</code>公开了一个<code>Scope</code>组件，用于对相关表单字段进行分组。我们需要做的就是将子字段包装在一个<code>Scope</code>组件中，用一个<code>scope</code>道具指向最终嵌套的父字段的名称。</p>
<p>这里有一个例子:</p>
<pre class="language-typescript hljs">export default function App() {
  return (
    &lt;Form
      onSubmit={(formState) =&gt; {
        console.log(formState.values);
      }}
    &gt;
      {/** ... **/}

     {/** Look here 👇 **/}
      &lt;Scope scope="bond"&gt;
        &lt;RadioGroup name="relationship"&gt;
          &lt;Radio value="single" label="Single" /&gt;
          &lt;Radio value="married" label="married" /&gt;
        &lt;/RadioGroup&gt;

        &lt;Relevant
          when={({ formState }) =&gt;
            formState.values?.bond?.relationship === 'married'
          }
        &gt;
          &lt;Input name="spouse" label="🚨 Spouse Name:" /&gt;
        &lt;/Relevant&gt;

        &lt;Select
          name="date"
          label="🚨 Shall we help you set up a date?"
          relevant={({ formState }) =&gt;
            formState.values?.bond?.relationship === 'single'
          }
        &gt;
          &lt;Option value="" disabled&gt;
            Select a date option
          &lt;/Option&gt;
          &lt;Option value="yes"&gt;Yes&lt;/Option&gt;
          &lt;Option value="no"&gt;No&lt;/Option&gt;
        &lt;/Select&gt;

        &lt;Select name="status" label="Relationship status:"&gt;
          &lt;Option value="" disabled&gt;
            Select One...
          &lt;/Option&gt;
          &lt;Option value="single"&gt;Single&lt;/Option&gt;
          &lt;Option value="relationship"&gt;Relationship&lt;/Option&gt;
          &lt;Option value="complicated"&gt;Complicated&lt;/Option&gt;
        &lt;/Select&gt;
      &lt;/Scope&gt;

      {/** Look here 👇 **/}
      &lt;Scope scope="marketing"&gt;
        &lt;Checkbox name="newsletter" label="Subscribe to our newsletter?" /&gt;
      &lt;/Scope&gt;

      &lt;button type="submit"&gt; Submit &lt;/button&gt;
    &lt;/Form&gt;
  );
}
</pre>
<p>需要注意的是，当您使用<code>Scope</code>组件时，您必须记住在访问表单状态时使用新的嵌套层次结构。</p>
<p>例如，考虑<code>relevant</code> prop逻辑:</p>
<pre class="language-typescript hljs">// before 
formState.values?.relationship === 'single'

// now: use the nested "bond" scope
formState.values?.bond?.relationship === 'single'
</pre>
<h2 id="adding-input-formatters-masks-informed">将输入格式化程序和掩码添加到Informed</h2>
<p>如果您尝试过在没有库的帮助下发布生产输入格式化程序或掩码，那么您知道它们会很快变得难以处理。有了<code>Informed</code>，你可以使用字符串或者旧的正则表达式来处理这个问题。</p>
<p>考虑我们的表单应用程序的以下新需求:如果用户是单身，并且希望安排一次约会，那么就请求他们的电话号码来安排。</p>
<p>假设该应用程序仅在美国可用，让我们继续为用户的电话号码提供一些输入格式:</p>
<pre class="language-json hljs">...

&lt;Input
  type="tel"
  name="tel"
  label="Phone number"
  relevant={({ formState }) =&gt;
    formState.values?.bond?.relationship === 'single' &amp;&amp;
    formState.values?.bond?.date === 'yes'
  }
/&gt;;
</pre>
<p>使用<code>relevant</code>道具，当用户的关系状态设置为<code>single</code>时，将显示输入的电话号码，他们想要一个日期。</p>
<figure id="attachment_158231" aria-describedby="caption-attachment-158231" class="wp-caption aligncenter"><img data-attachment-id="158231" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/conditionally-display-telephone-input/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="conditionally-display-telephone-input" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-telnoq?file=App.tsx&quot;&gt;Conditionally displaying a telephone input&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input.png" decoding="async" src="../Images/b88c8e2b3f7f9c269846d3dfec11d54a.png" alt="Conditionally displaying a telephone input" class="size-full wp-image-158231 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input-300x196.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="158231" data-permalink="https://blog.logrocket.com/build-powerful-react-forms-with-informed/attachment/conditionally-display-telephone-input/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input.png" data-orig-size="730,476" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="conditionally-display-telephone-input" data-image-description="" data-image-caption="&lt;p&gt;&lt;a href=&quot;https://stackblitz.com/edit/react-ts-telnoq?file=App.tsx&quot;&gt;Conditionally displaying a telephone input&lt;/a&gt;&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input-300x196.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input.png" decoding="async" loading="lazy" src="../Images/b88c8e2b3f7f9c269846d3dfec11d54a.png" alt="Conditionally displaying a telephone input" class="size-full wp-image-158231" srcset="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input-300x196.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/02/conditionally-display-telephone-input.png"/></noscript><figcaption id="caption-attachment-158231" class="wp-caption-text"><a href="https://stackblitz.com/edit/react-ts-telnoq?file=App.tsx">Conditionally displaying a telephone input</a></figcaption></figure>
<p>现在，我们可以继续为这个电话号码输入提供一个<code>formatter</code> prop，如下所示:</p>
<pre class="language-typescript hljs">&lt;Input
  {/** ... **/}
  formatter="+1 ###-###-####"
  {/** ... **/}
/&gt;;
</pre>
<p>这将把用户输入格式化为<code>+1 ###-###-####</code>，其中<code>#</code>代表有效数字。如果您检查表单状态，您会看到电话号码以相同的格式存储。</p>
<p>如果您更愿意在表单状态中存储原始的用户输入，那么就提供一个<code>parser</code>函数来去掉格式，如下所示:</p>
<pre class="language-typescript hljs">&lt;Input
  {/** ... **/}
  formatter="+1 ###-###-####"
  parser={(v) =&gt; v.replace('+1 ', '').replace(/-/g, '')}
  {/** ... **/}
/&gt;;
</pre>
<p>所提供的<code>parser</code>函数取值并替换电话代码(<code>+1</code>)和破折号(<code>-</code>)。</p>
<p>显然，还有很多其他输入格式化和屏蔽的用例。我建议阅读一下官方文件。</p>
<h2 id="why-use-informed">为什么使用知情？</h2>
<p>现在你已经对Informed的工作原理有了一个大致的了解，让我们来讨论一下为什么你应该考虑在你的下一个项目中使用<code>Informed</code>。</p>
<h3 id="informed-vs-formik">知情vs. Formik</h3>
<p>Formik 可以说是React和React Native最流行的开源表单库。那么，有见识的人如何对抗强大的力量呢？</p>
<p>Formik的大多数受人喜爱的特性在Informed中同样适用。它们都有声明性API，所以您可以专注于您的应用程序业务逻辑。它们也遵循你所习惯的相同的反应心理模型——即，没有花哨的观察者或引擎盖下的订阅，只有良好的反应状态和道具。它们也不会将您绑定到任何现成的特定状态管理库。因此，它们都适用于任何状态管理库，比如Redux。</p>
<p>Informed开始大放异彩的地方是它在Formik上提供的附加实用程序。知情提供:</p>
<ul>
<li>格式化和屏蔽输入字段的明确规定</li>
<li>特殊的<a href="https://teslamotors.github.io/informed/?path=/story/debugging--debug"> <code>Debug</code>组件</a></li>
<li>使用<a href="https://teslamotors.github.io/informed/?path=/story/relevance--relevant-comonent"> <code>Relevant</code>组件</a>和其他实用程序的动态表单的更多选项，例如<a href="https://teslamotors.github.io/informed/?path=/story/keepstate--keepstate"> KeepState </a>，它允许您保留一个字段的状态，即使它被卸载(不再显示在屏幕上)</li>
</ul>
<p>Informed超越了基本需求，并提供实用程序来解决您在现实世界中可能遇到的常见问题。</p>
<p>在我看来，与福米克相比，<code>Informed</code>相当不错。</p>
<h3 id="informed-vs-react-hook-form">知情与反应挂钩形式</h3>
<p>React钩子形态是React中建筑形态的绝佳替代品。它可以说是第二个最受欢迎的表单库。与Formik一样，提供表单实用程序是Informed与众不同的地方。</p>
<p>然而，值得一提的是，React Hook Form的突出特点是它不依赖于受控的表单输入，这无疑使它的性能优于许多其他表单库(Informed inclusive)。</p>
<h2>结论</h2>
<p>尽管还是一个年轻的图书馆，但它充满了潜力。如果您发现自己开始了一个新项目，或者想要修补一个新的表单库，那么不妨试试Informed。</p>
<p>我在使用Informed时遇到的一个警告是，对文档和导出类型有明显的更新，但这是一个有潜力的新项目的美妙之处。你可以为它的发展做出贡献。</p>
<p>干杯，快乐的建筑！</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>