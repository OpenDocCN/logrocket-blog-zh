<html>
<head>
<title>Building faster blogs with Alinea and React </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Alinea和React构建更快的博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-faster-blogs-alinea-react/#0001-01-01">https://blog.logrocket.com/building-faster-blogs-alinea-react/#0001-01-01</a></blockquote><div><article class="article-post">
<p>我保证这篇文章最激动人心的部分不会是你在一篇博文中读到的如何建立博客。😄让这本书真正吸引人的是，你将在<a href="https://alinea.sh/"> Alinea </a>中创建你的新博客，这是一个用TypeScript编写的新CMS。</p>
<p>如果你是内容管理系统和类型化语言的狂热爱好者，并且你已经准备好发现非常新颖和有趣的Alinea，我建议你带上你最喜欢的饮料，卷起袖子，跟随我踏上发现这种新的CMS的旅程。</p>
<p>这些年来，我用过很多内容管理系统。作为一个已经写了18年博客的人，CMSs一直是我的心头好。从WordPress、Joomla、CouchCMS，甚至Gatsby，我已经尝试了多种解决方案，每次都得出了相同的结论:你需要为正确的工作使用正确的工具。</p>
<p>考虑到这一点，让我们来探索Alinea，了解它最适合什么，谁会最常使用它。</p>
<p>在撰写本文时，Alinea还处于测试阶段，这很令人兴奋，因为您可以尝试一些新的闪亮的东西，并在下一次编码器会议上吹嘘它。然而，我对它的体验可能不是你的体验的翻版。测试版软件总是带有额外的不可预测性和后来的变化，这些可能不会反映在本文中。</p>
<p><em>向前跳转:</em></p>

<h2 id="setting-alinea-app-react">使用React设置新的Alinea应用程序</h2>
<p>对于一些硬件和软件环境，我在一台苹果硅MacBook Air M2上开发了这篇Alinea博客，它有16 GB的RAM和512 GB的SSD。它在macOS v12.6上，运行Node.js v16.16。没有Docker映像，没有虚拟机，没有什么特别的，设置非常简单——这就引出了我的第一点。</p>
<p>当构建一个新的Alinea博客时，您最好从一个主机应用程序开始。在这里，我们将使用一个简单的<a href="https://blog.logrocket.com/tag/react/"> React应用</a>和<a href="https://blog.logrocket.com/tag/nextjs/"> Next.js </a>，因为它得到了Alinea的良好支持，并且<a href="https://blog.logrocket.com/how-next-js-can-help-improve-seo/">更适合SEO </a>。没有比运行每个人都喜欢的React命令更简单的方法了:</p>
<pre class="language-typescript hljs">npx <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c6a5b4a3a7b2a3eba8a3beb2eba7b6b686aaa7b2a3b5b2">[email protected]</a> --typescript 
</pre>
<p>为了忠实于Alinea交付类型化解决方案的使命，我认为我们的主机应用程序应该是TypeScript。这个练习的重点不会是<a href="https://blog.logrocket.com/tag/typescript/">打字稿</a>，我们将保持这一部分的基本性。同样值得注意的是，Alinea作为一个<a href="https://blog.logrocket.com/tag/vanilla-javascript/"> JavaScript </a>项目运行良好。要启用它，请将您的<code>alinea.config.tsx</code>文件重命名为<code>alinea.config.js</code>。对于那些刚接触TypeScript的人，我建议这样做，并查看我们的在React 中使用TypeScript的<a href="https://blog.logrocket.com/your-reference-guide-to-using-typescript-in-react/">指南。</a></p>
<p>一旦React应用程序启动并运行，您就可以通过使用<code>npm install alinea</code>安装它来开始使用项目目录中的Alinea了。</p>
<p>让我们通过在命令行中键入以下命令来初始化它并在浏览器中启动它:<code>npx alinea init</code>然后是<code>npx alinea serve</code>。仅此而已。文章结束。享受你的新CMS。😆</p>
<p>好吧，好吧，我是在开玩笑，当然，但是你必须明白让我们的新CMS运行起来是多么的简单。🙂一帆风顺到目前为止，所以让我们的新CMS为我们做一些工作！</p>
<h2 id="creating-blog-pages-types">创建博客页面和类型</h2>
<p>创建博客有几种方法；不管怎样，你最终可能会创建网页和博客文章。如果你的博客支持多租户——多作者——你也有一个作者类型。为了简洁起见，我们将重点关注页面和博客文章。</p>
<p>Alinea基于<a href="https://blog.logrocket.com/creating-configuration-files-node-js-using-node-config/">配置文件</a>运行。这可以是一个文件，也可以分解成多个更小的配置文件。我认为后者是更好的方法，因为它使事情更容易理解和管理。</p>
<p>所以，事不宜迟，让我们为主页、博客页面和博客文章创建主<code>config</code>文件和每个相关文件。</p>
<p>当你运行<code>npx alinea init</code>时，它创建了<code>alinea.config.tsx</code>。让我们用更容易管理的东西来替换它的内容，就像这样:</p>
<pre class="language-typescript hljs">import {IcRoundInsertDriveFile} from '@alinea/ui/icons/IcRoundInsertDriveFile'
import {IcRoundPermMedia} from '@alinea/ui/icons/IcRoundPermMedia'
import {alinea, BrowserPreview, MediaSchema} from 'alinea'
import {BlogCollection, BlogPost, HomePage} from './schema'

const schema = alinea.schema({
  ...MediaSchema,
  HomePage,
  BlogCollection,
  BlogPost
})

export const config = alinea.createConfig({
  schema,
  dashboard: {
    staticFile: './public/admin.html',
    dashboardUrl: '/admin.html',
    handlerUrl: '/api/cms'
  },
  workspaces: {
    main: alinea.workspace('Blog', {
      source: './content',
      mediaDir: './public/assets',
      roots: {
        pages: alinea.root('Blog', {
          icon: IcRoundInsertDriveFile,
          contains: ['HomePage', 'BlogCollection']
        }),
        assets: alinea.root('Assets', {
          icon: IcRoundPermMedia,
          contains: ['MediaLibrary']
        })
      },
      preview({entry, previewToken}) {
        const location =
          process.env.NODE_ENV === 'development' ? 'http://localhost:3000' : ''
        if (['Author', 'BlogCollection'].includes(entry.type)) return null
        return (
          &lt;BrowserPreview
            url={`${location}/api/preview?${previewToken}`}
            prettyUrl={entry.url}
          /&gt;
        )
      }
    })
  }
})</pre>
<p>让我们看看这里有什么。首先，我们做一些特定于Alinea的导入和<code>schema</code>文件，我们还没有创建它们。文件的其余部分是为CMS设置模式和创建配置。其中，这也利用了模式。为了更好地理解这一点，让我们也设置博客页面、主页和博客帖子，这样我们就可以在CMS中显示它们。</p>
<p>在您的<code>root</code>文件夹中，创建另一个名为<code>schema</code>的目录。在内部，让我们创建以下四个文件:</p>
<ul>
<li><code>index.ts</code></li>
<li><code>homePage.ts</code></li>
<li><code>blogCollection.ts</code></li>
<li><code>blogPost.ts</code></li>
</ul>
<p>在<code>index.ts</code>文件中，导出另外三个<code>schema</code>文件，如下所示:</p>
<pre class="language-typescript hljs">export * from './blogCollection'
export * from './blogPost'
export * from './homePage'</pre>
<p>在<code>homePage.ts</code>文件中，设置我们希望在CMS中可用的<code>fields</code>和<code>data</code>类型:</p>
<pre class="language-typescript hljs">import {Entry} from '@alinea/core'
import alinea from 'alinea'

export const HomePage = alinea.type('Homepage', {
  title: alinea.text('Title', {width: 0.5}),
  path: alinea.path('Path', {hidden: true}),
  intro: alinea.object('Intro', {
    fields: alinea.type('Intro fields', {
      title: alinea.text('Intro title'),
      byline: alinea.richText('Byline')
    })
  }),
  heroPost: alinea.entry('Hero post', {
    condition: Entry.type.is('BlogPost')
  })
})</pre>
<p>非常类似地，在<code>blogCollection.ts</code>文件中，我们也将设置<code>type</code>和<code>data</code>。这实质上是一个容器，用于存放您稍后将创建的所有博客文章:</p>
<pre class="language-typescript hljs">import alinea from 'alinea'


export const BlogCollection = alinea
  .type('Blog posts', {
    title: alinea.text('Title', {width: 0.5}),
    path: alinea.path('Path', {width: 0.5})
  })
  .configure({
    isContainer: true,
    contains: ['BlogPost']
  })</pre>
<p>最后，让我们看看<code>blogPost.ts</code>本身，它定义了我们在每个帖子中可以拥有的数据:</p>
<pre class="language-typescript hljs">import {Entry} from '@alinea/core'
import alinea from 'alinea'

export const BlogPost = alinea.type(
  'Blog post',
  alinea.tabs(
    alinea.tab('Content', {
      title: alinea.text('Title', {width: 0.5}),
      path: alinea.path('Path', {width: 0.5}),
      date: alinea.date('Publish date'),
      coverImage: alinea.image('Cover image', {width: 0.5}),
      author: alinea.entry('Author', {
        width: 0.5,
        condition: Entry.type.is('Author')
      }),
      excerpt: alinea.richText('Excerpt'),
      content: alinea.richText('Content')
    }),
    alinea.tab('Metadata', {
      ogImage: alinea.image('OG Image')
    })
  )
)</pre>
<p>这就是关于轻量级博客CMS的设置和配置。当然，您可以在这个基本配置的基础上进行构建。为此，请参考<a href="https://alinea.sh/docs/intro">官方文档</a>。现在，让我们将CMS连接到我们的前端，即我们在第一步中创建的React应用程序。</p>
<h2 id="getting-data-frontend">向前端获取数据</h2>
<p>现在，人们可能希望在<code>.alinea</code>文件夹中设置我们的模式和生成的文件足以简单地从CMS中的页面和帖子中提取数据。不幸的是，这还不够。有几种方法可以做到这一点，但是我将向您展示获取数据的最干净也可能是最简单的方法。此外，这也是Alinea的演示项目中推荐的方法。因此，让我们创建一个小的<code>“API”</code>来提取所有的数据。</p>
<p>首先，在你的<code>root</code>文件夹中创建一个<code>api</code>目录，在里面添加一个名为<code>api.ts</code>的文件，看起来应该是这样的:</p>
<pre class="language-typescript hljs">import {initPages} from '@alinea/content/pages'
import {PreviewData} from 'next'

export function createApi(previewToken?: PreviewData) {
  const pages = initPages(previewToken as string)
  return {
    async getHomePage() {
      return pages.whereType('HomePage').sure()
    },
    async getPostSlugs() {
      return pages.whereType('BlogPost').select(page =&gt; page.path)
    },
    async getPostBySlug(slug: string) {
      return pages.whereType('BlogPost').first(page =&gt; page.path.is(slug))
    },
    async getAllPosts() {
      return pages.whereType('BlogPost').select(page =&gt; ({
        title: page.title,
        date: page.date,
        path: page.path,
        author: page.author,
        coverImage: page.coverImage,
        excerpt: page.excerpt
      }))
    }
  }
}</pre>
<p>我们在这里真正做的是在视图代码中使我们的生活更容易。随着您添加更多的页面和内容类型，您可以使用额外的端点来扩展这个文件。整洁！</p>
<h2 id="displaying-data-views">在视图中显示数据</h2>
<p>这可能是这个过程中最复杂的部分，但也给你提供了最大的自由。此时，您将通过我们在上一步中创建的“<code>API</code>”来提取数据，并将其显示在屏幕上。</p>
<p>也就是说，它不仅仅是一个简单的<code>view</code>文件。我们至少需要几页纸和一些支持组件，所以在你的<code>root</code>目录中，创建两个额外的文件夹:<code>pages</code>和<code>components</code>。</p>
<h2 id="creating-pages-blog">为你的Alinea博客创建页面</h2>
<p>在<code>pages</code>文件夹中，我们还将创建另外两个目录:<code>api</code>和<code>posts</code>。在<code>api</code>文件夹中，我们将有一个<code>cms</code>文件夹在里面，我们将创建一个<code>[slug].ts</code>文件，而在<code>api</code>中，我们将有一个名为<code>preview.ts</code>的文件。</p>
<p>然后，在<code>posts</code>文件夹中，我们将只有一个文件，我们将它命名为<code>[slug].tsx</code>。最后，在<code>pages</code>中，我们将创建三个文件:<code>index.tsx</code>、<code>_document.tsx</code>和<code>_app.tsx</code>。</p>
<p>我知道，有很多文件夹和文件，可能很难跟上。所以，这里有一张你的文件夹和文件结构的截图:</p>
<p><img data-attachment-id="144864" data-permalink="https://blog.logrocket.com/building-faster-blogs-alinea-react/attachment/alinea-react-blog-pages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages.png" data-orig-size="730,712" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Alinea and React blog page folder structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages-300x293.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages.png" decoding="async" class="aligncenter wp-image-144864 size-full jetpack-lazy-image" src="../Images/61bcc6df101a90868e7c8deef1754f8e.png" alt="Alinea and React Blog Page Folder Structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages-300x293.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="144864" data-permalink="https://blog.logrocket.com/building-faster-blogs-alinea-react/attachment/alinea-react-blog-pages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages.png" data-orig-size="730,712" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Alinea and React blog page folder structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages-300x293.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages.png" decoding="async" loading="lazy" class="aligncenter wp-image-144864 size-full" src="../Images/61bcc6df101a90868e7c8deef1754f8e.png" alt="Alinea and React Blog Page Folder Structure" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages-300x293.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-pages.png"/></noscript>
<p>每个文件中的内容更多的是关于<a href="https://blog.logrocket.com/creating-website-next-js-react/"> React和Next.js </a>而不是Alinea，所以我就不赘述了。然而，您将会看到CMS提供了一些额外的组件，例如<code>RichText</code>和<code>TextDoc</code>。让我们看看我们的网页。</p>
<h3 id="pages-index"><code>pages/index.tsx</code></h3>
<p>这里没什么特别的。我们的主页有几个标题和副标题，以及一个由来自Alinea的<code>props</code>填充的<code>hero</code>帖子:</p>
<pre class="language-typescript hljs">import {Page} from '@alinea/content'
import Head from 'next/head'
import Hero from '../components/hero'
import Layout from '../components/layout'
import MoreBlogposts from '../components/moreBlogposts'
import {createApi} from '../api/api'
import {RichText} from '@alinea/ui'
import {TextDoc} from 'alinea'

type Props = {
  home: Page.Home
  allPosts: Page.BlogPost[]
  title: string
  byline: TextDoc
}

export default function Index({title, byline, home, allPosts}: Props) {
  const heroPost = allPosts[0]
  const morePosts = allPosts.slice(1)
  return (
    &lt;&gt;
      &lt;Layout&gt;
        &lt;Head&gt;
          &lt;title&gt;{home.title}&lt;/title&gt;
        &lt;/Head&gt;
        &lt;div&gt;
            &lt;h1&gt;
              {title}
            &lt;/h1&gt;
            &lt;h4&gt;
              &lt;RichText
                  doc={byline}
                  a={
                    &lt;a/&gt;
                  }
              /&gt;
            &lt;/h4&gt;
          {heroPost &amp;&amp; (
            &lt;Hero
              title={heroPost.title}
              coverImage={heroPost.coverImage?.src}
              date={heroPost.date}
              slug={heroPost.path}
              excerpt={heroPost.excerpt}
            /&gt;
          )}
          {morePosts.length &gt; 0 &amp;&amp; &lt;MoreBlogposts posts={morePosts} /&gt;}
        &lt;/div&gt;
      &lt;/Layout&gt;
    &lt;/&gt;
  )
}

export const getStaticProps = async context =&gt; {
  const api = createApi(context.previewData)
  const home = await api.getHomePage()
  const allPosts = await api.getAllPosts()
  return {
    props: {home, allPosts}
  }
}</pre>
<h3 id="document-tsx"><code>pages/_document.tsx</code></h3>
<p>Next.js中所有其他组件的根是最普通的标准。这里没有什么Alinea特有的东西需要担心。但是，请确保在<code>HTML</code>标签中设置了语言，因为它有利于<a href="https://blog.logrocket.com/a-developers-guide-to-designing-accessible-websites/">的可访问性</a>:</p>
<pre class="language-typescript hljs">import {Head, Html, Main, NextScript} from 'next/document'

export default function Document() {
  return (
    &lt;Html lang="en"&gt;
      &lt;Head /&gt;
      &lt;body&gt;
        &lt;Main /&gt;
        &lt;NextScript /&gt;
      &lt;/body&gt;
    &lt;/Html&gt;
  )
}</pre>
<h3 id="pages-app"><code>pages/_app.tsx</code></h3>
<p>这只是一个<code>root</code>组件，所以和其他组件一样，没什么特别的。除了在CMS中启用预览的<code>useNextPreview</code>,它的样板Next.js代码:</p>
<pre class="language-typescript hljs">import {useNextPreview} from '@alinea/preview/next'
import {AppProps} from 'next/app'

export default function MyApp({Component, pageProps}: AppProps) {
  useNextPreview()
  return &lt;Component {...pageProps} /&gt;
}</pre>
<h3 id="pages-api"><code>pages/api/cms/[...slug].ts</code></h3>
<p>对于这个特殊的文件，我想我需要给出一些额外的上下文；不然看起来太隐晦了。<code>nodeHandler</code>实用程序基本上将后端句柄导出为Node.js <code>http</code>处理程序，然后生成的后端文件将连接到后端。CMS API路由在<code>/api/cms/[...slug]</code>处理，最后，我们禁用Next.js注入的<code>bodyParser</code>，让处理程序处理它:</p>
<pre class="language-typescript hljs">import {nodeHandler} from '@alinea/backend/router/NodeHandler'
import {backend} from '@alinea/content/backend'
export default nodeHandler(backend.handle)
export const config = {api: {bodyParser: false}}</pre>
<h3 id="pages-preview"><code>pages/api/preview.ts</code></h3>
<p>在这里，<code>previewToken</code>从<code>/api/preview?token</code> URL得到解析，我们要求Alinea解析并验证它。这将导致访问我们正在预览的条目的URL。这个令牌存储在Next.js上下文中，这样我们以后可以在下一个路由中使用它来查询草稿。</p>
<p>Next.js依靠临时cookie来实现并保持这一点。最后，重定向到我们实际想要查看的页面会这样做:</p>
<pre class="language-typescript hljs">import {backend} from '@alinea/content/backend'
import type {NextApiRequest, NextApiResponse} from 'next'

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  const previewToken = req.url!.split('?').pop()
    const {url} = await backend.parsePreviewToken(previewToken)

  res.setPreviewData(previewToken)

  res.redirect(url)
}</pre>
<h3 id="pages-posts"><code>pages/posts/[slug].tsx</code></h3>
<p>同样，相对简单的东西。为了呈现我们的个人博客文章，我们确保它有一个在浏览器选项卡中也可见的标题。在这里，添加一个标题图像和文章的正文，并使用Alinea提供的道具:</p>
<pre class="language-typescript hljs">import {Page} from '@alinea/content'
import {GetStaticPropsContext} from 'next'
import ErrorPage from 'next/error'
import Head from 'next/head'
import {useRouter} from 'next/router'
import Layout from '../../components/layout'
import PostBody from '../../components/postBody'
import PostHeader from '../../components/postHeader'
import PostTitle from '../../components/postTitle'
import {createApi} from '../../api/api'

type Props = {
  post: Page.BlogPost
  morePosts: Page.BlogPost[]
  preview?: boolean
}

export default function Post({post, morePosts, preview}: Props) {
  const router = useRouter()
  if (!router.isFallback &amp;&amp; !post?.path) {
    return &lt;ErrorPage statusCode={404} /&gt;
  }
  const title = `${post.title} | Next.js Blog Example with Alinea`
  return (
    &lt;Layout preview={preview}&gt;
        &lt;h1&gt;Attila's Blog&lt;/h1&gt;
        {router.isFallback ? (
          &lt;PostTitle&gt;Loading...&lt;/PostTitle&gt;
        ) : (
          &lt;&gt;
            &lt;article&gt;
              &lt;Head&gt;
                &lt;title&gt;{title}&lt;/title&gt;
                &lt;meta property="og:image" content={post.ogImage?.src} /&gt;
              &lt;/Head&gt;
              &lt;PostHeader
                title={post.title}
                coverImage={post.coverImage?.src}
                date={post.date}
              /&gt;
              &lt;PostBody content={post.content} /&gt;
            &lt;/article&gt;
          &lt;/&gt;
        )}
    &lt;/Layout&gt;
  )
}

type Params = {
  slug: string
}

export async function getStaticProps({
  params,
  previewData
}: GetStaticPropsContext&lt;Params&gt;) {
  const api = createApi(previewData)
  const post = await api.getPostBySlug(params.slug)
  return {
    props: {post}
  }
}

export async function getStaticPaths(context) {
  const api = createApi(context.previewData)
  const slugs = await api.getPostSlugs()
  return {
    paths: slugs.map(slug =&gt; {
      return {
        params: {slug}
      }
    }),
    fallback: false
  }
}</pre>
<p>您可以看到，我们最终利用了之前创建的<code>API</code>和来自Alinea的查询内容。我们还导入了许多我们还没有的组件，所以让我们在最后一步解决这个问题。</p>
<h2 id="creating-components-blog">为你的Alinea博客构建组件</h2>
<p>您的组件可以像您希望的那样简单或复杂。为了简洁起见，我试图让它们足够简单，现在让浏览器来处理样式。最终，这完全是React的领域，所以无论你想在组件和样式方面做什么都是完全允许的。Alinea对你在前端能做什么或不能做什么没有真正的发言权。</p>
<p>也就是说，让我们在<code>components</code>目录中创建一些组件。这只是普通的React和Next，所以我不会解释视图代码的细节，除非有Alinea特有的东西。您的<code>components</code>文件应该是:</p>
<ul>
<li><code>hero.tsx</code></li>
<li><code>layout.tsx</code></li>
<li><code>moreBlogposts.tsx</code></li>
<li><code>postBody.tsx</code></li>
<li><code>postHeader.tsx</code></li>
<li><code>postPreview.tsx</code></li>
<li><code>postTitle.tsx</code></li>
</ul>
<p>为了避免混淆，下面是它应该是什么样子的截图:</p>
<p><img data-attachment-id="144867" data-permalink="https://blog.logrocket.com/building-faster-blogs-alinea-react/attachment/alinea-react-blog-components/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components.png" data-orig-size="730,542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Alinea and React blog components folder structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components-300x223.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components.png" decoding="async" class="aligncenter wp-image-144867 size-full jetpack-lazy-image" src="../Images/0cd33a325e0f57c48ee447346604a6d7.png" alt="Alinea and React Blog Components Folder Structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components-300x223.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="144867" data-permalink="https://blog.logrocket.com/building-faster-blogs-alinea-react/attachment/alinea-react-blog-components/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components.png" data-orig-size="730,542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Alinea and React blog components folder structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components-300x223.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components.png" decoding="async" loading="lazy" class="aligncenter wp-image-144867 size-full" src="../Images/0cd33a325e0f57c48ee447346604a6d7.png" alt="Alinea and React Blog Components Folder Structure" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components-300x223.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-components.png"/></noscript>
<h3 id="hero-tsx"><code>components/hero.tsx</code></h3>
<p>这是显示在主页上的<code>hero</code> post组件，正如您所料，我们只需要一个<code>image</code>、<code>link</code>、<code>title</code>和<code>body</code>。在这种情况下，<code>excerpt</code>来自Alinea，同时也依赖于Alinea的<code>RichText</code>组件:</p>
<pre class="language-typescript hljs">import {RichText} from '@alinea/ui'
import {TextDoc} from 'alinea'
import Link from 'next/link'

type Props = {
  title: string
  coverImage: string
  date: string
  excerpt: TextDoc
  slug: string
}

const Hero = ({title, coverImage, date, excerpt, slug}: Props) =&gt; {
  return (
    &lt;section&gt;
      &lt;img src={`/assets/${coverImage}`} alt="some text description"/&gt;
      &lt;h3&gt;
        &lt;Link as={`/posts/${slug}`} href="/posts/[slug]"&gt;
          {title}
        &lt;/Link&gt;
      &lt;/h3&gt;
      &lt;p&gt;{date}&lt;/p&gt;
          &lt;RichText
            doc={excerpt}
            p={&lt;p/&gt;}
          /&gt;
    &lt;/section&gt;
  )
}

export default Hero</pre>
<h3 id="layout-tsx"><code>components/layout.tsx</code></h3>
<p>这是布局包装器在React中最基本的功能。它自然支持子组件:</p>
<pre class="language-typescript hljs">type Props = {
  preview?: boolean
  children: React.ReactNode
}

const Layout = ({ children }: Props) =&gt; {
  return (
    &lt;&gt;
        &lt;main&gt;{children}&lt;/main&gt;
    &lt;/&gt;
  )
}

export default Layout</pre>
<h3 id="more-blog-posts"><code>components/moreBlogposts.tsx</code></h3>
<p>该组件有一个角色，并且只有一个角色——映射所有帖子，并通过<code>PostPreview</code>组件在页面中显示<code>excerpts</code>:</p>
<pre class="language-typescript hljs">import {BlogPost} from '../schema'
import PostPreview from './postPreview'

type Props = {
  posts: BlogPost[]
}

const MoreBlogposts = ({posts}: Props) =&gt; {
  return (
    &lt;section&gt;
      &lt;h2&gt;
        More Blogposts
      &lt;/h2&gt;
      &lt;div&gt;
        {posts.map(post =&gt; (
          &lt;PostPreview
            key={post.path}
            title={post.title}
            coverImage={post.coverImage?.src}
            date={post.date}
            slug={post.path}
            excerpt={post.excerpt}
          /&gt;
        ))}
      &lt;/div&gt;
    &lt;/section&gt;
  )
}

export default MoreBlogposts</pre>
<h3 id="post-body"><code>components/postBody.tsx</code></h3>
<p>组件名是不言自明的。这是我们构建博客文章的地方。<code>TextDoc</code>是内容本身，然后作为<code>prop</code>传递给Alinea的<code>RichText</code>组件:</p>
<pre class="language-typescript hljs">import {RichText} from '@alinea/ui'
import {TextDoc} from 'alinea'

type Props = {
  content: TextDoc
}

const PostBody = ({content}: Props) =&gt; {
  return (
    &lt;div&gt;
        &lt;RichText doc={content} /&gt;
    &lt;/div&gt;
  )
}

export default PostBody</pre>

<p>我希望现在一切都开始有意义了，因为我们已经在这里建立了一个模式。就像我们如何构建主体一样，我们将为博客文章单独构建标题。请注意，您不必将这些作为单独的组件来做，但毕竟是React，所以当您可以分解事物时，您可能应该:</p>
<pre class="language-typescript hljs">type Props = {
  title: string
  coverImage: string
  date: string
}

const PostHeader = ({title, coverImage, date}: Props) =&gt; {
  return (
    &lt;&gt;
        &lt;h2&gt;{title}&lt;/h2&gt;
        &lt;img alt="description of the image" src={`/assets${coverImage}`}/&gt;
        &lt;p&gt;{date}&lt;/p&gt;
    &lt;/&gt;
  )
}

export default PostHeader</pre>
<h3 id="post-preview"><code>components/postPreview.tsx</code></h3>
<p>在这里，我们有更多以前合作过的<code>image</code>、<code>link</code>、<code>date</code>和<code>excerpts</code>。但是，这一次，对于预览视图。哦，对了，为了<a href="https://www.youtube.com/watch?v=cTTth6Tr7q0">的可访问性目的</a>，我强烈推荐给图片添加替代文本:</p>
<pre class="language-typescript hljs">import {RichText} from '@alinea/ui'
import {TextDoc} from 'alinea'
import Link from 'next/link'

type Props = {
  title: string
  coverImage: string
  date: string
  excerpt: TextDoc
  slug: string
}

const PostPreview = ({
  title,
  coverImage,
  date,
  excerpt,
  slug
}: Props) =&gt; {
  return (
    &lt;div&gt;
        &lt;img src={`/assets/${coverImage}`} alt="some text description"/&gt;
      &lt;h3&gt;
        &lt;Link as={`/posts/${slug}`} href="/posts/[slug]"&gt;
          {title}
        &lt;/Link&gt;
      &lt;/h3&gt;
        &lt;p&gt;{date}&lt;/p&gt;
      &lt;RichText
        doc={excerpt}
        p={&lt;p/&gt;}
      /&gt;
    &lt;/div&gt;
  )
}

export default PostPreview</pre>
<h3 id="post-title"><code>components/postTitle.tsx</code></h3>
<p>最后，有一个<code>title</code>组件去与我们的身体。这是一个简单的标题一级反应组件，带孩子:</p>
<pre class="language-typescript hljs">import { ReactNode } from 'react'

type Props = {
  children?: ReactNode
}

const PostTitle = ({ children }: Props) =&gt; {
  return (
    &lt;h1&gt;
      {children}
    &lt;/h1&gt;
  )
}

export default PostTitle</pre>
<p>仅有的两个与Alinea相关的依赖项是循环的<code>RichText</code>和<code>TextDoc</code>。两者的文档都可以在<a href="https://alinea.sh/docs/intro"> Alinea文档页面</a>找到。为了这次演示，我还从Alinea的一个示例项目中的<a href="https://github.com/alineacms/alinea/tree/main/examples/framework-next">借鉴了一些风格。尽管如此，我们仍然非常欢迎您添加自己的项目或克隆整个项目，并用您的内容、数据类型和可编辑区域来替换它。这就是开源的力量！😉总之，我的最终结果看起来像这样:</a></p>
<p><img data-attachment-id="144870" data-permalink="https://blog.logrocket.com/building-faster-blogs-alinea-react/attachment/alinea-react-blog-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage.png" data-orig-size="730,597" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Alinea and React blog homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage-300x245.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage.png" decoding="async" class="aligncenter size-full wp-image-144870 jetpack-lazy-image" src="../Images/c9753c7e76b10a81be8071109f0b76f6.png" alt="Alinea and React Blog Homepage" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage-300x245.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="144870" data-permalink="https://blog.logrocket.com/building-faster-blogs-alinea-react/attachment/alinea-react-blog-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage.png" data-orig-size="730,597" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Alinea and React blog homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage-300x245.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-144870" src="../Images/c9753c7e76b10a81be8071109f0b76f6.png" alt="Alinea and React Blog Homepage" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage-300x245.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-homepage.png"/></noscript>
<p><img data-attachment-id="144874" data-permalink="https://blog.logrocket.com/building-faster-blogs-alinea-react/attachment/alinea-react-blog-posts/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts.png" data-orig-size="730,598" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Alinea and React blog posts example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts-300x246.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts.png" decoding="async" class="aligncenter size-full wp-image-144874 jetpack-lazy-image" src="../Images/cfdd43ee6193f2305ee91569ae12eaff.png" alt="Alinea and React Blog Posts Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts-300x246.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="144874" data-permalink="https://blog.logrocket.com/building-faster-blogs-alinea-react/attachment/alinea-react-blog-posts/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts.png" data-orig-size="730,598" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Alinea and React blog posts example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts-300x246.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-144874" src="../Images/cfdd43ee6193f2305ee91569ae12eaff.png" alt="Alinea and React Blog Posts Example" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts-300x246.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/alinea-react-blog-posts.png"/></noscript>
<blockquote><p>注意:CMS本身的样式默认来自Alinea没有额外的工作是必要的</p></blockquote>
<h2>最后的想法</h2>
<p>虽然这并不意味着是对Alinea的回顾，但我认为在用新的CMS构建博客的过程中，有几件事情值得一提。首先，正如每一个测试版软件一样，这些问题还有待解决，所以在开发过程中，我感觉有些脆弱。</p>
<p>其次，文档并不完全符合我的预期。我不得不在文档和示例项目之间来回移动，以弄清楚发生了什么，以及各个部分是如何组合在一起的。用Alinea写博客绝不是一件简单的事情。虽然这是一个很有前途的发展，但它还没有成熟到可以成为其他任何东西的替代品。</p>
<p>尽管如此，即使是在测试阶段，也可以用React和TypeScript构建一个功能良好、外观合理、可部署的Alinea博客。我建议从示例项目中的<a href="https://github.com/alineacms/alinea/tree/main/examples">开始，因为这将为您在早期阶段省去许多麻烦。</a></p>
<p>不可否认的是，Alinea通过模式生成嵌入式SQLite数据库的方法，然后作为源代码的一部分推出，导致极快的查询时间，这是优于其他一些传统CMS的一个优势。除此之外，即时预览，你有一个潜在的胜利组合的功能，易用性和速度。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</h2><p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>