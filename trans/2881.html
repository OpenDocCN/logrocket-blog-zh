<html>
<head>
<title>Building an ecommerce mobile app with React Native and WooCommerce - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用 React Native 和 WooCommerce - LogRocket Blog 构建电子商务移动应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/#0001-01-01">https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>什么是 WooCommerce？</h2>
<p>WooCommerce 是一个流行的平台，你可以用它来建立自己的电子商务商店。它不需要你为整个应用程序编码就能做到这一点，这是通过使用 WordPress 这样的内容管理系统(CMS)来实现的。WordPress 帮助你创建漂亮的网上商店，从展示产品，管理购物车，订购到最终完成结账过程。您可以使用插件和其他资源快速、轻松地设置一切。</p>
<p>WordPress 可以作为一个整体运行；你的后端和前端是一体的。然而，WordPress 也可以作为一个无头 CMS 运行，其中后端和前端是解耦的，单独运行。这给了开发人员决定如何展示他们的服务的灵活性。</p>
<p>WordPress WooCommerce 允许开发者生成 RESTful APIs，在不同的渠道使用电子商务商店。这意味着你可以创建一个交互式的移动应用程序，让用户在你的 WordPress 站点中与相同的 WooCommerce 数据集进行交互。</p>
<p>这样做的好处是，您无需重新创作初始内容就可以使用数据。这也使您能够增强交付渠道的性能。您选择了最适合内容交付的快速、高效、可扩展且更易访问的渠道。</p>
<p>在本文中，我们将构建一个 React 本地购物应用程序，显示来自 WordPress WooCommerce 后端的产品列表。我们还将使用<a href="https://blog.logrocket.com/react-context-api-deep-dive-examples/" target="_blank" rel="noopener"> React 本地上下文 API </a>作为状态管理工具来集成购物车功能。</p>
<h3>内容</h3>

<h3>先决条件</h3>
<p>要遵循本教程，请确保您具备以下条件:</p>

<p>确保你的 WordPress 域支持 SSL。查看本指南并学习如何为 WordPress 网站设置 SSL。然而，出于开发的目的，如果你的 WordPress 在本地运行或者缺少 SSL，我们将创建一个微小的 Node.js 微服务，让你不用 SSL 就能访问 WooCommerce WordPress。</p>
<h2 id="setting-up-woocommerce-wordpress">在 WordPress 中设置 WooCommerce</h2>
<p>一旦你的 WordPress 站点准备好并运行，导航到你的 WordPress 管理面板。在<strong>插件</strong>菜单下的<strong>添加新</strong>页面搜索 WooCommerce。然后安装并激活它。</p>
<p>WooCommerce 没有安装产品，所以我们将添加新产品，以适应我们想要构建的应用程序。导航到 WordPress 侧边栏菜单，访问<strong>产品</strong>，然后<strong>所有产品</strong>标签。</p>
<p>您可以选择添加自己的新定制产品。在本例中，我们将导入一个产品列表。您可以从这个<a href="https://diviengine.com/woocommerce-sample-products-csv-import-file-freebie/" target="_blank" rel="noopener">页面</a>访问它们，并下载 CSV 文件。或者，如果您有现有的产品列表，您也可以导入它们。</p>
<p>导入文件后，单击<strong>继续</strong>导入所有的列映射。然后，运行导入程序，等待 WooCommerce 为您处理商品。您现在可以开始查看您的产品了。</p>
<h2 id="generating-woocommerce-rest-api">生成 WooCommerce REST API</h2>
<p>现在让我们使用 React Native 生成一个 API 来使用这个产品。进入 WordPress 侧边栏，导航到 WooCommerce 设置。</p>
<p>导航到<strong>高级</strong>并点击<strong> REST API </strong>设置。</p>
<p><img data-attachment-id="104534" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/woocommerce-settings/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings.jpeg" data-orig-size="730,119" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="WooCommerce-settings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings-300x49.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings.jpeg" decoding="async" class="size-full wp-image-104534 aligncenter jetpack-lazy-image" src="../Images/a05ef84aedbad70c524da649d8a2b288.png" alt="WooCommerce settings" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings-300x49.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="104534" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/woocommerce-settings/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings.jpeg" data-orig-size="730,119" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="WooCommerce-settings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings-300x49.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings.jpeg" decoding="async" loading="lazy" class="size-full wp-image-104534 aligncenter" src="../Images/a05ef84aedbad70c524da649d8a2b288.png" alt="WooCommerce settings" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings-300x49.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/WooCommerce-settings.jpeg"/></noscript>
<p>进行到<strong>添加键</strong>。这将生成允许你在 WordPress 之外访问你的商店的密钥。继续添加密钥描述和权限。在本教程中，我们想要读取来自 WooCommerce 的产品，因此确保选择了<strong>读取</strong>权限。</p>
<p>完成后，点击<strong>生成 API 密钥</strong>按钮。这将为您的商店生成一个<strong>消费者</strong> <strong>密钥</strong>和一个<strong>消费者秘密</strong>。请确保复制这些密钥，并将其保存在安全的地方。</p>
<p>最后，我们需要启用遗留的 REST API。导航到 WooCommerce <strong>高级</strong>设置，点击<strong>遗留 API </strong>，启用，保存更改，如下图所示。</p>
<p><img data-attachment-id="104536" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/woocommerce-settings-legacy-api/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API.jpeg" data-orig-size="730,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="woocommerce settings legacy API" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API-300x95.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API.jpeg" decoding="async" class="size-full wp-image-104536 aligncenter jetpack-lazy-image" src="../Images/7611938f8e2b2252904fbd6ed3e82146.png" alt="woocommerce settings legacy API" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API-300x95.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="104536" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/woocommerce-settings-legacy-api/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API.jpeg" data-orig-size="730,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="woocommerce settings legacy API" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API-300x95.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API.jpeg" decoding="async" loading="lazy" class="size-full wp-image-104536 aligncenter" src="../Images/7611938f8e2b2252904fbd6ed3e82146.png" alt="woocommerce settings legacy API" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API-300x95.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/woocommerce-settings-legacy-API.jpeg"/></noscript>
<h2 id="testing-rest-api">测试 REST API</h2>
<p>在我们开始设置整个 React 本机应用程序之前，建议首先测试 API 是否工作正常。为此，我们将使用 Postman 向 localhost 发出基本请求。</p>
<p>在这里，我们将发送一个基本的 GET 请求，该请求将响应一个在 WordPress WooCommerce 中设置的产品列表。为此，我们将使用 URL <code>wp-json/wc/v2/products</code>并将其映射到运行 WordPress 应用程序的域。比如<code><a href="https://logrocket.com/wp-json/wc/v2/products" rel="nofollow">https://logrocket.com/wp-json/wc/v2/products</a></code>。因此，请根据您的服务器或域名修改您的 URL 端点。</p>
<p>打开 Postman 并向 URL 端点发送 GET 请求</p>
<p>发送请求后，您需要添加授权详细信息。为此，导航到<strong>授权</strong>选项卡并选择<strong>基本授权</strong>。输入您的 WooCommerce 消费者密钥作为用户名，消费者密钥作为密码。</p>
<p>此外，为了避免任何连接问题，请确保禁用 Postman SSL 验证。您可以在 Postman 设置中执行此操作，并检查 SSL 证书验证是否已关闭。</p>
<p>完成后，将您的请求发送到您的端点。这将会给你一个关于 WordPress WooCommerce 商店产品列表的回复。</p>
<p><img data-attachment-id="104538" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/product-list-on-woocommerce/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce.jpeg" data-orig-size="730,303" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="product list on woocommerce" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce-300x125.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce.jpeg" decoding="async" class="size-full wp-image-104538 aligncenter jetpack-lazy-image" src="../Images/e6a08cf46c763372017e17fee11fc0f2.png" alt="product list on woocommerce" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce-300x125.jpeg 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="104538" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/product-list-on-woocommerce/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce.jpeg" data-orig-size="730,303" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="product list on woocommerce" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce-300x125.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce.jpeg" decoding="async" loading="lazy" class="size-full wp-image-104538 aligncenter" src="../Images/e6a08cf46c763372017e17fee11fc0f2.png" alt="product list on woocommerce" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce.jpeg 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce-300x125.jpeg 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/product-list-on-woocommerce.jpeg"/></noscript>
<p>WooCommerce 已经准备好了，REST API 正在工作。我们现在可以开始使用 React Native 和 WooCommerce 构建一个电子商务移动应用程序。</p>
<h2 id="setting-nodejs-microservice">设置 Node.js 微服务</h2>
<p>正如我们前面所解释的，我们需要创建一个基本的 Node.js 微服务来处理不支持 SSL 的站点上的请求。</p>
<p>首先，创建一个目录，您希望您的应用程序在其中运行。在该目录中，创建一个不同的目录，并将其命名为<code>woo_commerce_server_api</code>。打开命令行，将目录更改为<code>woo_commerce_server_api</code>。然后，通过运行以下命令，使用默认配置初始化 Node.js 项目:</p>
<pre class="language-shell hljs">npm init -y
</pre>
<p>微服务将负责从 WooCommerce 商店获取数据。因此，我们需要安装两个依赖项:</p>
<ul>
<li>Axios 向 WooCommerce 发送请求以获取数据</li>
<li>dotenv，用于加载环境变量</li>
</ul>
<p>通过运行以下命令来安装它们:</p>
<pre class="language-shell hljs">npm i axios dotenv
</pre>
<p>在项目目录中创建一个<code>index.js</code>和一个<code>.env</code>文件。在<code>.env</code>文件中，添加以下内容:</p>
<pre class="language-shell hljs">consumer_key = "your_consumer_key"
consumer_secret = "your_consumer_secret"
</pre>
<p>在<code>index.js</code>文件中，导入必要的依赖项:</p>
<pre class="language-javascript hljs">const http = require('http');
const https = require('https');
const axios = require('axios');
require("dotenv").config();
</pre>
<p>接下来，实例化一个代理以避免 SSL 证书验证:</p>
<pre class="language-javascript hljs">const agent = new https.Agent({
    rejectUnauthorized: false
});
</pre>
<p>定义运行应用程序的端口:</p>
<pre class="language-javascript hljs">const PORT = process.env.PORT || 5000;
</pre>
<p>然后，创建 HTTP 服务器，并定义从特定 URL 上的商店获取产品的功能:</p>
<pre class="language-javascript hljs">const app = http.createServer((req, res) =&gt; {
    if (req.url == "/products" &amp;&amp; req.method == "GET") {
        // get the token
        let token = `${process.env.consumer_key}:${process.env.consumer_secret}`;
        // get the base 64 encoded string.
        let basic_auth = Buffer.from(token).toString('base64');
        // Send request to get the data.
        axios.default.get('https://18.117.135.240/wp-json/wc/v2/products?per_page=20', {
            httpsAgent: agent,
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Basic ' + basic_auth
            }
        })
            .then((response) =&gt; {
                // Successful response
                console.log("Successful request");
                res.statusCode = response.status;
                res.writeHead(200, { 'Content-Type': 'application/json' });
                res.end(JSON.stringify(response.data));
            })
            .catch((error) =&gt; {
                // Unsuccessful response
                console.log("Unsuccessful request");
                let message = new Error(error.message);
                res.statusCode = 500;
                res.end(JSON.stringify(message));
            })
    }
});
</pre>
<p>接下来，在指定的端口上启动服务器:</p>
<pre class="language-javascript hljs">app.listen(PORT, () =&gt; console.log(`App started on PORT ${PORT}`));
</pre>
<p>在<code>package.json</code>文件的<code>scripts</code>部分下，添加以下命令:</p>
<pre class="language-javascript hljs">"scripts": {
    "start": "node index.js"
},
</pre>
<p>启动开发服务器。此时，您的微服务已经启动并运行。您可以通过浏览器或邮递员向<code><a href="http://localhost:5000/products" rel="nofollow">http://localhost:5000/products</a></code>发送<code>GET</code>请求来测试功能。</p>
<h2 id="setting-up-react-native-application">设置 React 本机应用程序</h2>
<p>打开指向项目目录的终端，运行以下命令来初始化应用程序:</p>
<pre class="language-shell hljs">npx react-native init woocommerceshop
</pre>
<p>该过程完成后，继续到新创建的目录:</p>
<pre class="language-shell hljs">cd woocommerceshop
</pre>
<p>如果您运行的是 windows，导航到<code>android</code>文件夹，创建一个<code>local.properties</code>文件，并键入<code>sdk</code>目录，如下所示:</p>
<pre class="language-shell hljs">sdk.dir = relative_path_to_your_sdk
</pre>
<p>最后，启动开发服务器:</p>
<pre class="language-shell hljs">npm run android
</pre>
<p>默认应用程序将在您使用的调试设备上启动，可以是真实设备，也可以是仿真器。</p>
<h2 id="implementing-drawer-navigation">实现抽屉导航</h2>
<p>首先，停止正在运行的开发服务器，并安装以下依赖项:</p>
<pre class="language-shell hljs">npm i @react-native-masked-view/masked-view @react-navigation/drawer @react-navigation/native react-native-gesture-handler react-native-reanimated react-native-safe-area-context react-native-screens
</pre>
<p>在您的<code>babel.config.js</code>文件中，添加<code>react-native-reanimated/plugin</code>如下:</p>
<pre class="language-javascript hljs">module.exports = {
    presets: ['module:metro-react-native-babel-preset'],
    plugins: ['react-native-reanimated/plugin']
};
</pre>
<p>编辑<code>android/app/build.gradle</code>中的<code>project.ext.react</code>属性，这样打开<a href="https://blog.logrocket.com/getting-started-with-hermes-in-react-native/">爱马仕</a>:</p>
<pre class="language-javascript hljs">project.ext.react = [
    enableHermes: true,  // &lt;- edit
]
</pre>
<p>在<code>android/app/src/main/java/com/woo_``ecommerce``_shop/MainApplication.java</code>下，添加以下导入:</p>
<pre class="language-javascript hljs">import com.facebook.react.bridge.JSIModulePackage; // &lt;- add
import com.swmansion.reanimated.ReanimatedJSIModulePackage;// &lt;- add
</pre>
<p>现在，在<code>MainApplication</code>类的<code>ReactNaitiveHost</code>初始化下，添加插件<code>Reanimated</code>:</p>
<pre class="language-javascript hljs">@Override
protected JSIModulePackage getJSIModulePackage() {
    return new ReanimatedJSIModulePackage(); // &lt;- add
}
</pre>
<p>在主 React 本地项目文件夹中创建一个<code>src/screens</code>目录。在<code>screens</code>文件夹中，创建两个文件:<code>Cart.js</code>用于显示购物车，而<code>Home.js</code>用于显示产品。</p>
<p>编辑这些文件以显示一个简单的文本。</p>
<p>在<code>Home.js</code>文件中:</p>
<pre class="language-javascript hljs">// Home.js
import React from 'react';
import { View, Text, StyleSheet } from 'react-native';

function Home() {
    return (
        &lt;View style={styles.container}&gt;
            &lt;Text&gt;Home Screen&lt;/Text&gt;
        &lt;/View&gt;
    );
}

const styles = StyleSheet.create({
    container: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center'
    }
});

export default Home;
</pre>
<p>在<code>Cart.js</code>文件中:</p>
<pre class="language-javascript hljs">// Cart.js
import React from 'react';
import { View, Text, StyleSheet } from 'react-native';

function Cart() {
    return (
        &lt;View style={styles.container}&gt;
            &lt;Text&gt;Cart Screen&lt;/Text&gt;
        &lt;/View&gt;
    );
}

const styles = StyleSheet.create({
    container: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center'
    }
});

export default Cart;
</pre>
<p>接下来，在<code>App.js</code>下，添加以下导入:</p>
<pre class="language-javascript hljs">import {NavigationContainer} from '@react-navigation/native';
import {createDrawerNavigator} from '@react-navigation/drawer';
import HomeScreen from './src/screens/Home';
import CartScreen from './src/screens/Cart';
</pre>
<p>现在我们可以创建一个抽屉导航器:</p>
<pre class="language-javascript hljs">const Drawer = createDrawerNavigator();
</pre>
<p>在<code>App()</code>函数中，返回<code>NavigationContainer</code>，抽屉导航器指定屏幕:</p>
<pre class="language-javascript hljs">const App = () =&gt; {
    return (
        &lt;NavigationContainer&gt;
            &lt;Drawer.Navigator initialRouteName='Home'&gt;
                &lt;Drawer.Screen name="Home" component={HomeScreen} /&gt;
                &lt;Drawer.Screen name="Cart" component={CartScreen} /&gt;
            &lt;/Drawer.Navigator&gt;
        &lt;/NavigationContainer&gt;
    );
};
</pre>
<p>启动开发服务器来测试抽屉是否工作。您的应用程序应该类似于下面的图片。</p>
<p>主屏幕:</p>
<p><img data-attachment-id="104540" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/react-native-woocommerce-home-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen.jpeg" data-orig-size="600,674" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React native woocommerce home screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen-267x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen.jpeg" decoding="async" class="size-full wp-image-104540 aligncenter jetpack-lazy-image" src="../Images/412ae8b9c01427f35b55ad0e0d6eca14.png" alt="React native woocommerce home screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen.jpeg 600w, https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen-267x300.jpeg 267w" data-lazy-sizes="(max-width: 600px) 100vw, 600px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="104540" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/react-native-woocommerce-home-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen.jpeg" data-orig-size="600,674" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React native woocommerce home screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen-267x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen.jpeg" decoding="async" loading="lazy" class="size-full wp-image-104540 aligncenter" src="../Images/412ae8b9c01427f35b55ad0e0d6eca14.png" alt="React native woocommerce home screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen.jpeg 600w, https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen-267x300.jpeg 267w" sizes="(max-width: 600px) 100vw, 600px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-home-screen.jpeg"/></noscript>
<p>购物车屏幕:</p>
<p><img data-attachment-id="104542" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/react-native-woocommerce-cart-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen.jpeg" data-orig-size="600,686" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React native woocommerce cart screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen-262x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen.jpeg" decoding="async" class="size-full wp-image-104542 aligncenter jetpack-lazy-image" src="../Images/ba542a7ca51cf5bd09e06eb0e50d1de8.png" alt="React native woocommerce cart screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen.jpeg 600w, https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen-262x300.jpeg 262w" data-lazy-sizes="(max-width: 600px) 100vw, 600px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="104542" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/react-native-woocommerce-cart-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen.jpeg" data-orig-size="600,686" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React native woocommerce cart screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen-262x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen.jpeg" decoding="async" loading="lazy" class="size-full wp-image-104542 aligncenter" src="../Images/ba542a7ca51cf5bd09e06eb0e50d1de8.png" alt="React native woocommerce cart screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen.jpeg 600w, https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen-262x300.jpeg 262w" sizes="(max-width: 600px) 100vw, 600px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/React-native-woocommerce-cart-screen.jpeg"/></noscript>
<h2 id="setting-up-application-context">设置应用程序上下文</h2>
<p>在应用程序的目录中，导航到上一步中创建的<code>src</code>文件夹。创建一个<code>store</code>和一个<code>constants</code>目录。</p>
<p>在<code>constants</code>目录中，创建一个<code>index.js</code>文件，并添加以下代码行:</p>
<pre class="language-javascript hljs">let constants = {
    url : "http://ip_address:5000/products"
    // URL of the micro-service
}

export default constants;
</pre>
<p>确保用您计算机的本地 IP 地址替换<code>ip_address</code>。</p>
<p>在<code>store</code>目录中，创建一个<code>context.js</code>文件。在该文件中，添加以下代码块。</p>
<p>首先，导入必要的依赖项:</p>
<pre class="language-shell hljs">import React from 'react';
import {createContext,useState,useEffect} from 'react';
import constants from '../constants';
import axios from 'axios';
</pre>
<p>然后，实例化应用程序上下文:</p>
<pre class="language-javascript hljs">const AppContext = createContext();
</pre>
<p>接下来，定义应用程序上下文提供者函数:</p>
<pre class="language-javascript hljs">const AppContextProvider = ({ children }) =&gt; {

    // product's state
    const [products, setProducts] = useState([]); 
    // cart's state
    const [cart, setCart] = useState([]); 
    // loading's state
    const [loading, setLoading] = useState(false); 

    useEffect(() =&gt; {
        // start loading.
        setLoading(true); 
        axios.get(constants.url)
            .then(response =&gt; {
                // set the products from the response.
                setProducts(response.data); 
            })
             // In case of an error, log it.
            .catch(err =&gt; console.log(err));
        // stop loading.
        return setLoading(false); 
    }, [products, cart]);

    // remove item from cart
    const removeItem = (id) =&gt; {
        // Filter item from cart
        setCart(cart.filter(item =&gt; item.id !== id)); 
    }

    // return the provider with the defined properties.
    return (
        &lt;AppContext.Provider value={{ products, setProducts, cart, setCart, removeItem, loading }}&gt;
            {children}
        &lt;/AppContext.Provider&gt;
    )
}
</pre>
<p>最后，导出应用程序上下文和应用程序上下文提供程序:</p>
<pre class="language-javascript hljs">export {
    AppContext,
     AppContextProvider
}
</pre>
<p>现在，导航到<code>App.js</code>文件并导入创建的<code>AppContextProvider</code>:</p>
<pre class="language-javascript hljs">import {AppContextProvider} from './src/store/context';
</pre>
<p>用<code>AppContextProvider</code>包装<code>App()</code>上呈现的所有元素，如下所示:</p>
<pre class="language-javascript hljs">const App = () =&gt; {
    return (
        &lt;AppContextProvider&gt;
            &lt;NavigationContainer&gt;
                &lt;Drawer.Navigator initialRouteName='Home'&gt;
                    &lt;Drawer.Screen name="Home" component={HomeScreen} /&gt;
                    &lt;Drawer.Screen name="Cart" component={CartScreen} /&gt;
                &lt;/Drawer.Navigator&gt;
            &lt;/NavigationContainer&gt;
        &lt;/AppContextProvider&gt;
    );
};
</pre>
<p>这样，应用程序就用一个数据源包装起来了。</p>
<p>因为我们还没有安装<a href="https://blog.logrocket.com/using-axios-react-native-manage-api-requests/" target="_blank" rel="noopener"> Axios </a>，所以停止开发服务器并运行以下命令来安装它:</p>
<pre class="language-shell hljs">npm i axios
</pre>
<h2 id="displaying-products">展示产品</h2>
<p>让我们展示 WordPress WooCommerce 商店中列出的产品。导航到<code>src</code>目录并创建一个<code>components</code>目录。在里面，创建一个<code>Products.js</code>文件并导入这些依赖项和模块:</p>
<pre class="language-javascript hljs">import React, { useContext } from 'react';
import { View, Text, StyleSheet, Button, Image } from 'react-native';
import { AppContext } from '../store/context';
</pre>
<p>然后，创建一个<code>Products</code>函数来呈现产品，如下所示:</p>
<pre class="language-javascript hljs">function Products({ }) {
    const { products, cart, setCart, loading } = useContext(AppContext); // from context
    return (
        &lt;View style={styles.container}&gt;
            {
                loading ? &lt;Text&gt;Loading...&lt;/Text&gt; :
                    products.map(product =&gt; {
                        let already_in_cart = cart.find(item =&gt; item.id === product.id); // Check if item is already in cart
                        return ( // render the product card
                            &lt;View key={product.id} style={styles.product}&gt;
                                &lt;Image source={{ uri: product.images[0].src.replace('https', 'http') }} style={styles.image} /&gt;
                                &lt;Text&gt;{product.name}&lt;/Text&gt;
                                &lt;Text&gt;${product.price}&lt;/Text&gt;
                                &lt;Button
                                    title={
                                        already_in_cart ? "Added to cart" : "Add to cart"
                                    }
                                    onPress={
                                        already_in_cart ? () =&gt; null :
                                            () =&gt; { // add the item to cart
                                                setCart([...cart, {
                                                    id: product.id,
                                                    name: product.name,
                                                    price: product.price,
                                                    quantity: 1
                                                }]);
                                            }
                                    }
                                /&gt;
                            &lt;/View&gt;
                        )
                    })}
        &lt;/View&gt;
    );
}
</pre>
<p>添加这些样式来格式化产品。继续将下面的<code>StyleSheet</code>添加到您的<code>Products</code>函数的正下方:</p>
<pre class="language-javascript hljs">// styles for the product card
const styles = StyleSheet.create({
    image: {
        width: 100,
        height: 100,
        borderRadius: 10
    },
    container: {
        flex: 1,
        display: 'flex',
        flexDirection: 'row',
        flexWrap: 'wrap',
    },
    product: {
        width: 180,
        height: 220,
        backgroundColor: '#ccc',
        alignItems: 'center',
        justifyContent: 'center',
        margin: 10
    }
});
</pre>
<p>最后，导出<code>Products</code>函数，以便其他模块可以访问它:</p>
<pre class="language-shell hljs">export default Products;
</pre>
<p>在显示这些产品时，我们需要添加一个<code>ScrollView</code>,让用户滚动显示产品项目的列表。为此，导航到<code>screens</code>文件夹下的<code>Home.js</code>文件，并从<code>react-native</code>导入<code>ScrollView</code>:</p>
<pre class="language-shell hljs">import {ScrollView} from 'react-native';
</pre>
<p>然后，导入我们之前创建的<code>Products</code>组件:</p>
<pre class="language-shell hljs">import Products from '../components/Products';
</pre>
<p>最后，渲染<code>ScrollView</code>中的<code>Products</code>组件:</p>
<pre class="language-javascript hljs">function HomeScreen() {
    return (
        &lt;View style={styles.container} &gt;
            &lt;ScrollView&gt;
                &lt;Products /&gt;
            &lt;/ScrollView&gt;
        &lt;/View&gt;
    );
};
</pre>
<p>此时，您应该能够看到您的产品。您的主屏幕现在应该显示如下项目:</p>
<p><img data-attachment-id="104545" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/product-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list.jpeg" data-orig-size="500,980" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Product list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list-153x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list.jpeg" decoding="async" class="size-full wp-image-104545 aligncenter jetpack-lazy-image" src="../Images/300b64ef486bd456b98dbdd347671c2d.png" alt="Product list" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list.jpeg 500w, https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list-153x300.jpeg 153w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="104545" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/product-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list.jpeg" data-orig-size="500,980" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Product list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list-153x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list.jpeg" decoding="async" loading="lazy" class="size-full wp-image-104545 aligncenter" src="../Images/300b64ef486bd456b98dbdd347671c2d.png" alt="Product list" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list.jpeg 500w, https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list-153x300.jpeg 153w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/Product-list.jpeg"/></noscript>
<h2 id="displaying-removing-items-cart">显示和移除购物车中的商品</h2>
<p>让我们来学习如何在购物车中显示商品并移除它们。在您的<code>src/components</code>目录中，创建一个<code>Cart.js</code>文件并导入必要的依赖项，如下所示:</p>
<pre class="language-javascript hljs">import React, { useContext } from 'react';
import { View, Text, StyleSheet, Button } from 'react-native';
import { AppContext } from '../store/context';
</pre>
<p>然后，定义一个<code>Cart</code>函数来呈现购物车:</p>
<pre class="language-javascript hljs">function Cart() {
    // from the context
    const { cart, removeItem } = useContext(AppContext); 
    return (
        &lt;View style={styles.container}&gt;
            {
                cart.length &gt; 0 ?
                // render a cart card.
                    cart.map(item =&gt; { 
                        return (
                            &lt;View key={item.id} style={styles.cart}&gt;
                                &lt;Text style={styles.text}&gt;{item.name}&lt;/Text&gt;
                                &lt;Text style={styles.text}&gt;${item.price}&lt;/Text&gt;
                                &lt;Text style={styles.text}&gt;{item.quantity}&lt;/Text&gt;
                                &lt;Button title="Remove" onPress={() =&gt; removeItem(item.id)} /&gt;
                            &lt;/View&gt;
                        )
                    }) : (
                        &lt;Text style={styles.text}&gt;Cart is empty&lt;/Text&gt;
                    )
            }
        &lt;/View&gt;
    );
}
</pre>
<p>添加这些样式来格式化购物车条目。继续将下面的<code>StyleSheet</code>添加到您的<code>Cart</code>函数的正下方:</p>
<pre class="language-javascript hljs">const styles = StyleSheet.create({
    container: {
        flex: 1,
        alignItems: 'center'
    },
    text: {
        fontSize: 15,
        color: "#000"
    },
    cart: {
        padding: 10,
        backgroundColor: "#fff",
        width: '90%',
        borderRadius: 20,
        margin: 10
    }
});
</pre>
<p>最后，导出<code>Cart</code>函数，以便其他模块可以访问它:</p>
<pre class="language-shell hljs">export default Cart;
</pre>
<p>要启用购物车物品的<code>ScrollView</code>，导航到<code>screens</code>下的<code>Cart.js</code>文件并导入<code>ScrollView</code>:</p>
<pre class="language-shell hljs">import {ScrollView} from 'react_native';
</pre>
<p>然后导入<code>Cart</code>组件:</p>
<pre class="language-shell hljs">import Cart from '../components/Cart';
</pre>
<p>在 render 函数中，呈现包装在<code>ScrollView</code>组件中的<code>Cart</code>组件，如下所示:</p>
<pre class="language-javascript hljs">function CartScreen() {
    return (
        &lt;View style={styles.container}&gt;
            &lt;ScrollView&gt;
                &lt;Cart /&gt;
            &lt;/ScrollView&gt;
        &lt;/View&gt;
    );
}
</pre>
<p>另外，更新购物车的<code>container</code>和<code>text</code>样式，如下所示:</p>
<pre class="language-javascript hljs">const styles = StyleSheet.create({
    container: {
        flex: 1,
        justifyContent: 'center',
    },
    text: {
        color: "#000"
    }
});
</pre>
<p>在主屏幕上，点击<strong>添加到购物车</strong>按钮，将各种商品添加到购物车，然后进入购物车屏幕。您的项目将列出类似于照片中显示的内容。</p>
<p><img data-attachment-id="104547" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/cart/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/cart.jpeg" data-orig-size="500,441" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cart" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/cart-300x265.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/cart.jpeg" decoding="async" class="size-full wp-image-104547 aligncenter jetpack-lazy-image" src="../Images/ca0cf1ce141f24701cd4083d6e0a4663.png" alt="cart" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/cart.jpeg 500w, https://blog.logrocket.com/wp-content/uploads/2022/04/cart-300x265.jpeg 300w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/cart.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/cart.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="104547" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/cart/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/cart.jpeg" data-orig-size="500,441" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cart" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/cart-300x265.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/cart.jpeg" decoding="async" loading="lazy" class="size-full wp-image-104547 aligncenter" src="../Images/ca0cf1ce141f24701cd4083d6e0a4663.png" alt="cart" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/cart.jpeg 500w, https://blog.logrocket.com/wp-content/uploads/2022/04/cart-300x265.jpeg 300w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/cart.jpeg"/></noscript>
<p>您也可以点击<strong>移除</strong>从购物车中移除任何商品。</p>
<h2 id="showing-specific-product">展示特定产品</h2>
<p>因为产品的一些描述会有 HTML 标签，我们需要安装<a href="https://www.npmjs.com/package/react-native-htmlview" target="_blank" rel="noopener"> React Native HTMLView </a>包。确保在安装之前已经停止了开发服务器:</p>
<pre class="language-shell hljs">npm i react-native-htmlview
</pre>
<p>安装完成后，在<code>src/screens</code>目录下创建一个<code>Product.js</code>文件。在该文件中，导入必要的依赖项和模块:</p>
<pre class="language-javascript hljs">import React, { useState, useContext } from 'react';
import { View, Text, StyleSheet, Image, TouchableOpacity, Button } from 'react-native';
import HTMLView from 'react-native-htmlview';
import { AppContext } from '../store/context';
</pre>
<p>接下来，创建用于呈现产品的<code>Product</code>函数:</p>
<pre class="language-javascript hljs">function Product({ route, navigation }) {
    // Get the dynamic product from the params.
    const { product } = route.params; 
    // get the cart and the setcart from the application context
    let { cart, setCart } = useContext(AppContext); 
    // check if item already in cart
    let already_in_cart = cart.find(item =&gt; item.id === product.id); 
    // set the quantity 
    let [quantity, setQuantity] = useState(already_in_cart ? already_in_cart.quantity : 1); 
    return (
        &lt;View style={styles.container}&gt;
            &lt;View style={styles.imageContainer}&gt;
                &lt;Image source={{ uri: product.images[0].src.replace('https', 'http') }} style={styles.image} /&gt;
            &lt;/View&gt;
            &lt;Text style={styles.text}&gt;
                {product.name}
            &lt;/Text&gt;
            &lt;Text style={styles.text}&gt;
                ${product.price}
            &lt;/Text&gt;
            &lt;HTMLView value={product.short_description} stylesheet={{
                p: {
                    fontSize: 15,
                    color: '#000',
                    //textAlign:'center',
                    width: '100%',
                    padding: 10
                }
            }} /&gt;
            &lt;View style={styles.quantityContainer}&gt;
                &lt;Text style={styles.text}&gt;Quantity&lt;/Text&gt;
                &lt;View style={styles.quantity}&gt;
                    &lt;TouchableOpacity onPress={() =&gt; quantity &gt; 1 ? setQuantity(quantity - 1) : null}&gt;
                        &lt;Text style={styles.text}&gt;-&lt;/Text&gt;
                    &lt;/TouchableOpacity&gt;
                    &lt;Text style={styles.text}&gt;{quantity}&lt;/Text&gt;
                    &lt;TouchableOpacity onPress={() =&gt; setQuantity(quantity + 1)}&gt;
                        &lt;Text style={styles.text}&gt;+&lt;/Text&gt;
                    &lt;/TouchableOpacity&gt;
                &lt;/View&gt;
            &lt;/View&gt;
            &lt;View style={styles.buttonContainer}&gt;
                &lt;Button onPress={() =&gt; {
                    already_in_cart ? setCart(cart.map(item =&gt; item.id === product.id ? { ...item, quantity: quantity } : item)) :
                        setCart([...cart, {
                            id: product.id,
                            name: product.name,
                            price: product.price,
                            quantity: quantity
                        }]);
                    navigation.navigate('Cart')
                }} title={
                    already_in_cart ? "Update cart" : "Add to cart"
                } /&gt;
            &lt;/View&gt;
        &lt;/View&gt;
    );
}
</pre>
<p>为产品增添一些风格:</p>
<pre class="language-javascript hljs">const styles = StyleSheet.create({
    container: {
        flex: 1,
        //alignItems:'center',
        justifyContent: 'center',
    },
    imageContainer: {
        //textAlign:'center',
        width: '100%',
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center',
    },
    text: {
        fontSize: 18,
        color: '#000',
        padding: 10
    },
    image: {
        width: 200,
        height: 200,
        borderRadius: 10,
    },
    quantityContainer: {
        display: 'flex',
        flexDirection: 'row',
        justifyContent: 'space-between',
        alignItems: 'center',
        padding: 10
    },
    quantity: {
        display: 'flex',
        flexDirection: 'row',
        justifyContent: 'center',
        alignItems: 'center',
    },
    buttonContainer: {
        width: '100%',
        padding: 10,
    }
});
</pre>
<p>并导出产品功能:</p>
<pre class="language-shell hljs">export default Product;
</pre>
<p>现在，在<code>App.js</code>文件下，导入我们刚刚创建的模块:</p>
<pre class="language-javascript hljs">import ProductScreen from './src/screens/Product';
</pre>
<p>我们将在<code>Drawer.Navigator</code>组件中定义模块。然后，对其进行设计，使其不会显示在抽屉上，因为它是动态的:</p>
<pre class="language-css hljs">&lt;Drawer.Screen name="Product" component={ProductScreen} options={{
    drawerItemStyle: {
        display: "none"
    }
}} /&gt;
</pre>
<p>在<code>src/components/Products.js</code>下，从<code>react-native</code>导入<code>TouchableOpacity</code>:</p>
<pre class="language-javascript hljs">import {TouchableOpacity} from 'react-native';
</pre>
<p>当呈现产品图像和名称时，用传递动态产品数据的<code>TouchableOpacity</code>组件包装它们:</p>
<pre class="language-javascript hljs">&lt;TouchableOpacity onPress={() =&gt; navigation.navigate('Product',{product})}&gt;
&lt;Image source={{uri:product.images[0].src.replace('https','http')}} style={styles.image}/&gt;
&lt;/TouchableOpacity&gt;
&lt;TouchableOpacity onPress={() =&gt; navigation.navigate('Product',{product})}&gt;
&lt;Text&gt;{product.name}&lt;/Text&gt;
&lt;/TouchableOpacity&gt;
</pre>
<p>至此，万事俱备！在主页上，单击任何产品的图像或标题，您应该会被重定向到一个新的单一产品屏幕，如下图所示。</p>
<p><img data-attachment-id="104549" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/single-product-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page.jpeg" data-orig-size="500,895" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Single product page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page-168x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page.jpeg" decoding="async" class="size-full wp-image-104549 aligncenter jetpack-lazy-image" src="../Images/01fd53f96ab62488fe093680650f0cde.png" alt="Single product page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page.jpeg 500w, https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page-168x300.jpeg 168w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="104549" data-permalink="https://blog.logrocket.com/building-ecommerce-mobile-app-react-native-woocommerce/single-product-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page.jpeg" data-orig-size="500,895" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Single product page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page-168x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page.jpeg" decoding="async" loading="lazy" class="size-full wp-image-104549 aligncenter" src="../Images/01fd53f96ab62488fe093680650f0cde.png" alt="Single product page" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page.jpeg 500w, https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page-168x300.jpeg 168w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/Single-product-page.jpeg"/></noscript>
<h2 id="conclusion">结论</h2>
<p>WooCommerce 是 WordPress 上流行的开源电子商务插件之一。它让你可以灵活地建立任何你能想到的商店。WooCommerce 为你的商店生成 API 的能力让你能够选择理想的平台来接触不同的用户。</p>
<p>在本指南中，我们学习了如何在 React 原生移动应用程序中使用 WooCommerce，但是您可以使用相同的 API，开发任何应用程序，并在不同的平台上运行它们。</p>
<p>我建议继续添加其他模块，如您选择的结账和支付集成。</p>
<p>我希望这对你有所帮助！</p>
<p>如果你卡住了，在<a href="https://github.com/Rose-stack/eCommerce-with-react-native-and-wordpress-woocommerce" target="_blank" rel="noopener"> GitHub </a>上查看本教程使用的代码。</p><div class="code-block code-block-22">
<div class="blog-plug inline-plug ecomm-plug"><h2><a href="https://lp.logrocket.com/blg/ecommerce-signup"> LogRocket </a>:看看用户为什么不完成你的电子商务流程中的一个步骤的技术和 UX 原因。</h2><a class="signup" href="https://lp.logrocket.com/blg/ecommerce-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d60d88871d85e76e0dcca90f4bbaf78c.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/insights-step-2-lg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/insights-step-2-lg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d60d88871d85e76e0dcca90f4bbaf78c.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/insights-step-2-lg.png"/></noscript></a><p>LogRocket 就像是一个网络和移动应用程序和网站的 DVR，记录你的电子商务应用程序上发生的一切。LogRocket 没有猜测用户不转化的原因，而是主动揭示了阻止你转化的根本原因，比如 JavaScript 错误或死点击。LogRocket 还可以监控应用的性能，报告客户端 CPU 负载、客户端内存使用等指标。</p><p>开始主动监控您的电子商务应用程序— <a class="signup" href="https://lp.logrocket.com/blg/ecommerce-signup" target="_blank" rel="noopener noreferrer">免费试用</a>。</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>