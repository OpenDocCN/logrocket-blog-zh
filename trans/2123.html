<html>
<head>
<title>Create draggable components with React-Draggable - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用 React-Draggable - LogRocket 博客创建可拖动组件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/create-draggable-components-react-draggable/#0001-01-01">https://blog.logrocket.com/create-draggable-components-react-draggable/#0001-01-01</a></blockquote><div><article class="article-post">
<p>React-Draggable 库使用起来简单明了，它将 CSS 转换应用到 React 组件，允许您在 UI 中<a href="https://blog.logrocket.com/react-drag-and-drop/">拖动组件。通过不同的道具，你可以改变组件的行为，</a><a href="https://github.com/react-grid-layout/react-draggable"> React-Draggable </a>是创建直观、用户友好界面的绝佳选择。</p>
<p>在本教程中，我们将通过创建一个带有可拖动组件的任务列表来深入探索 React-Draggable。我们开始吧！</p>
<h2>安装 React-Draggable</h2>
<p>在安装 React-Draggable 之前，请确保您的本地计算机上已经设置了 React 项目。导航到项目并在终端中运行以下命令:</p>
<pre class="language-bash hljs">npm install react-draggable
</pre>
<p>现在，我们将从库中导入<code>&lt;Draggable/&gt;</code>组件。为了给元素或组件添加动作，我们可以简单地将<code>&lt;Draggable/&gt;</code>组件包装在它周围。</p>
<p>将以下代码添加到<code>App.js</code>:</p>
<pre>import Draggable from "react-draggable";

function App() {
  return (
 &lt;Draggable&gt;
      &lt;div&gt;I can now be moved around!&lt;/div&gt;
    &lt;/Draggable&gt;
  );
}

export default App;
</pre>
<p>上面的代码将在浏览器中呈现以下输出:</p>
<p><img data-attachment-id="65422" data-permalink="https://blog.logrocket.com/create-draggable-components-react-draggable/draggable-components-react-draggable-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/draggable-components-react-draggable.gif" data-orig-size="730,276" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="draggable-components-react-draggable" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/draggable-components-react-draggable-300x113.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/draggable-components-react-draggable.gif" decoding="async" class="aligncenter wp-image-65422 size-full jetpack-lazy-image" src="../Images/0837f9b2fa7d9a2b520e874e14b68146.png" alt="Draggable Components React Draggable" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/draggable-components-react-draggable.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/draggable-components-react-draggable.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65422" data-permalink="https://blog.logrocket.com/create-draggable-components-react-draggable/draggable-components-react-draggable-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/draggable-components-react-draggable.gif" data-orig-size="730,276" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="draggable-components-react-draggable" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/draggable-components-react-draggable-300x113.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/draggable-components-react-draggable.gif" decoding="async" loading="lazy" class="aligncenter wp-image-65422 size-full" src="../Images/0837f9b2fa7d9a2b520e874e14b68146.png" alt="Draggable Components React Draggable" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/draggable-components-react-draggable.gif"/></noscript>
<p>现在你已经知道了 React-Draggable 库是如何工作的，让我们开始我们的任务列表。</p>
<h2>设置 React 应用程序</h2>
<p>安装了 React-Draggable 库之后，我们可以为我们的项目设置所需的文件结构，并查看我们将需要的组件。为了给关键组件分配唯一的键，我们需要安装如下的<code>UUID()</code>:</p>
<pre class="language-bash hljs">npm i uuid
</pre>
<p>我们的文件夹结构如下图所示:</p>
<p><img data-attachment-id="65425" data-permalink="https://blog.logrocket.com/create-draggable-components-react-draggable/react-draggable-project-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure.png" data-orig-size="310,888" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-draggable-project-folder-structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure-105x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure.png" decoding="async" class="aligncenter wp-image-65425 size-full jetpack-lazy-image" src="../Images/3ce77b664d0c71639928dafbb98dfcaf.png" alt="React Draggable Project Folder Structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure.png 310w, https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure-105x300.png 105w" data-lazy-sizes="(max-width: 310px) 100vw, 310px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65425" data-permalink="https://blog.logrocket.com/create-draggable-components-react-draggable/react-draggable-project-folder-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure.png" data-orig-size="310,888" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-draggable-project-folder-structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure-105x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure.png" decoding="async" loading="lazy" class="aligncenter wp-image-65425 size-full" src="../Images/3ce77b664d0c71639928dafbb98dfcaf.png" alt="React Draggable Project Folder Structure" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure.png 310w, https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure-105x300.png 105w" sizes="(max-width: 310px) 100vw, 310px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-project-folder-structure.png"/></noscript>
<h2>创建任务列表</h2>
<p>我们已经将项目的逻辑分解为三个不同的部分。我们的任务列表将使用三列来呈现它们各自的任务。</p>
<p>我们将添加一个表单元素来接收用户的输入，并将任务添加到相应的组件中。我们的<code>App.js</code>文件在其状态下处理主任务列表:</p>
<pre>import "./App.css";
import { useState } from "react";

function App() {
const [tasks, setTasks] = useState([]);
  const [addItem, setAddItem] = useState(false);
  const handleSubmit = () =&gt; {
    setAddItem(!addItem);
  };
  const addTask = (task) =&gt; {
    setTasks(task);
  };
  return (
  &lt;div&gt;
 &lt;/div&gt;

  );
}


export default App;
</pre>
<p>在上面的代码中，我们添加了以下函数:</p>
<ul>
<li><code>tasks</code>:保存将在屏幕上呈现的任务数组</li>
<li><code>addItem</code>:显示和隐藏<code>AddForm</code>元素的状态，增加一个任务</li>
</ul>
<p>现在我们已经准备好了状态，让我们创建其他组件。</p>
<h3>标题组件</h3>
<p>将以下代码添加到<code>Header.js</code>:</p>
<pre>import React from "react";

export default function Header({ handleSubmit }) {
  return (
    &lt;div className='header'&gt;
      &lt;button onClick={handleSubmit} className='addButton'&gt;
        Add Task
      &lt;/button&gt;
      &lt;p&gt;Planning&lt;/p&gt;
      &lt;p&gt;In Progress&lt;/p&gt;
      &lt;p&gt;Done&lt;/p&gt;
    &lt;/div&gt;
  );
}
</pre>
<p><code>&lt;/button&gt;</code>获取<code>handleSubmit</code>函数作为道具，这将显示<code>AddForm</code>元素。设置好头部后，让我们创建<code>AddForm</code>元素:</p>
<h3><code>AddForm</code>元素</h3>
<p>将以下代码添加到<code>AddTaskForm.js</code>:</p>
<pre>import React, { useState } from "react";
import { v4 as uuidv4 } from "uuid";

export default function AddTaskForm({ setAddItem, addItem, tasks, setTasks }) {
  const [name, setName] = useState("");
  const [description, setDescription] = useState("");
  const [option, setOption] = useState("");

  const handleSubmit = (e) =&gt; {
    e.preventDefault();
    let newTask = {
      id: uuidv4(),
      name: name,
      description: description,
      timeline: option,
    };
    setTasks([...tasks, newTask]);
    setAddItem(!addItem);
  };
  return (
    &lt;div className='addForm'&gt;
      &lt;form onSubmit={(e) =&gt; handleSubmit(e)}&gt;
        &lt;input
          type='text'
          placeholder='Name'
          onChange={(e) =&gt; setName(e.target.value)}
        /&gt;
        &lt;input
          type='text'
          placeholder='Description'
          onChange={(e) =&gt; setDescription(e.target.value)}
        /&gt;
        &lt;select
          name='timeline'
          id='timeline'
          onChange={(e) =&gt; {
            setOption(e.target.value);
          }}
        &gt;
          &lt;option value=''&gt;&lt;/option&gt;
          &lt;option value='planning'&gt;Planning&lt;/option&gt;
          &lt;option value='inprogress'&gt;In-Progress&lt;/option&gt;
          &lt;option value='done'&gt;Done&lt;/option&gt;
        &lt;/select&gt;
        &lt;button type='submit'&gt;Add&lt;/button&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  );
}
</pre>
<p>在上面的代码块中，我们有输入字段，它将接收用户提供的相关数据。每个任务都有一个<code>id</code>、<code>name</code>、<code>date</code>和<code>timeline</code>，由<code>select</code>元素取值。</p>
<p>当提交表单时，每个任务都将被添加到我们在<code>App.js</code>中创建的任务列表中。当表单提交成功后，它将被隐藏。</p>
<h2>创建列</h2>
<p>在我们的任务列表中，我们将有三列，标题分别为<code>Planning</code>、<code>In Progress</code>和<code>Done</code>。让我们创建这些组件并添加它们各自的代码:</p>
<h3><code>Planning.js</code></h3>
<pre>import React from "react";
import Card from "./Card";

export default function Planning({ tasks, addTask }) {
  return (
    &lt;&gt;
      {tasks
        .filter((item) =&gt; item.timeline === "planning")
        .map((e) =&gt; (
          &lt;Card currentTask={e} tasks={tasks} addTask={addTask} /&gt;
        ))}
    &lt;/&gt;
  );
}
</pre>
<h3><code>InProgress.js</code></h3>
<pre>import React from "react";
import Card from "./Card";

export default function InProgress({ tasks, addTask }) {
  return (
    &lt;&gt;
      {tasks
        .filter((item) =&gt; item.timeline === "inprogress")
        .map((e) =&gt; (
          &lt;Card currentTask={e} tasks={tasks} addTask={addTask} /&gt;
        ))}
    &lt;/&gt;
  );
}
</pre>
<h3><code>Done.js</code></h3>
<pre>import React from "react";
import Card from "./Card";

export default function Done({ tasks, addTask }) {
  return (
    &lt;&gt;
      {tasks
        .filter((item) =&gt; item.timeline === "done")
        .map((e) =&gt; (
          &lt;Card currentTask={e} tasks={tasks} addTask={addTask} /&gt;
        ))}
    &lt;/&gt;
  );
}
</pre>
<p>您可能已经注意到，所有这些组件都有相似的逻辑。我们正在获取任务，并使用<code>tasks.filter()</code>基于它们的时间线对它们进行过滤，这将删除不属于该列的任务对象。</p>
<p>例如，在 planning 组件中，<code>filter()</code>将删除其时间线属性中没有<code>planning</code>字符串的每个对象。</p>
<p>该数组返回一个结果并呈现一个<code>&lt;Card/&gt;</code>组件。让我们在同一个目录中创建<code>Card.js</code>,并添加下面的代码片段:</p>
<pre>import React from "react";
import Draggable from "react-draggable";

export default function Card({ currentTask, tasks, addTask }) {
  return (
    &lt;Draggable grid={[10, 10]} axis='y' bounds='parent'&gt;
      &lt;div className='card' key={currentTask.id}&gt;
        &lt;div className='heading'&gt;
          &lt;h3&gt;{currentTask.name &amp;&amp; currentTask.name}&lt;/h3&gt;
          &lt;img
            onClick={() =&gt; {
              const newTaskList = tasks.filter((item) =&gt; {
                if (item.id != currentTask.id) {
                  return item;
                }
              });
              addTask(newTaskList);
            }}
            src='https://toppng.com/uploads/preview/recycling-bin-vector-delete-icon-png-black-11563002079w1isxqyyiv.png'
            style={{ height: "20px", width: "20px" }}
          /&gt;
        &lt;/div&gt;
        &lt;p&gt;{currentTask.description}&lt;/p&gt;
      &lt;/div&gt;
    &lt;/Draggable&gt;
  );
}
</pre>
<p><code>&lt;Card/&gt;</code>组件得到三个道具，是渲染和删除逻辑所需要的。</p>
<p>父 div <code>&lt;Draggable&gt;</code>是从我们的库中导入的，使得整个卡片是可移动的。默认情况下，您可以将卡片移动到屏幕上的任何位置。然而，为了防止它超出其父元素，我们将为一个<code>bounds</code>属性提供一个值。</p>
<h2>删除任务</h2>
<p>要删除任务，请添加以下代码:</p>
<pre>  const newTaskList = tasks.filter((item) =&gt; {
    if (item.id != currentTask.id) {
      return item;
    }
  });

  addTask(newTaskList);
</pre>
<p>上面的代码块从<code>App.js</code>获取整个任务列表，然后创建一个新列表，其中不包括当前任务。接下来，让我们导入<code>App.js</code>中的每个组件:</p>
<pre>import "./App.css";
import { useState } from "react";
import Header from "./Header";
import Planning from "./Planning";
import InProgress from "./InProgress";
import Done from "./Done";
import AddTaskForm from "./AddTaskForm";
function App() {
  const [tasks, setTasks] = useState([]);
  const [addItem, setAddItem] = useState(false);
  const handleSubmit = () =&gt; {
    setAddItem(!addItem);
  };
  const addTask = (task) =&gt; {
    setTasks(task);
  };
  return (
    &lt;div&gt;
      &lt;Header handleSubmit={handleSubmit} /&gt;
      &lt;div className='mainGrid'&gt;
        &lt;div className='column'&gt;
          &lt;Planning tasks={tasks} addTask={addTask} /&gt;
        &lt;/div&gt;
        &lt;div className='column'&gt;
          &lt;InProgress tasks={tasks} addTask={addTask} /&gt;
        &lt;/div&gt;
        &lt;div className='column'&gt;
          &lt;Done tasks={tasks} addTask={addTask} /&gt;
        &lt;/div&gt;
        {addItem &amp;&amp; (
          &lt;AddTaskForm
            addItem={addItem}
            setAddItem={setAddItem}
            tasks={tasks}
            setTasks={addTask}
          /&gt;
        )}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

export default App;
</pre>
<p>最后，我们将在任务列表中添加样式。在<code>App.css</code>中添加以下代码:</p>
<pre class="language-css hljs">.mainGrid{
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  flex-wrap: wrap;
  height: 100vh;
}
.header{
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  flex-wrap: wrap;
  background-color: rgb(205, 240, 240)
}
.column{
  width: 32vw;
  display: flex;
  flex-direction: column;
  border: 5px solid grey;
  background-color: azure;
  overflow: hidden;
}
.card{
  border: 1px solid black;
  background-color: white;
}
.card p{
  font-size: 10px;
  width: 30vw;
}
.heading{
  display: flex;
  flex-direction:row;
  align-items: center;
  justify-content: space-between;

}
.addButton{
  position:absolute;
  top: 2.5%;
  left: 0%;
}
.addForm{
  height: 50vh;
  width: 50vw;
  background-color: lightblue;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  position: absolute;
  top: 25%;
  left: 25%;
}
.addForm form{
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column; 
}
</pre>
<p>当我们运行项目并将一个项目添加到任务列表中时，输出将如下图所示:</p>
<p><img data-attachment-id="65428" data-permalink="https://blog.logrocket.com/create-draggable-components-react-draggable/final-task-list-three-columns-react-draggable/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable.png" data-orig-size="730,320" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="final-task-list-three-columns-react-draggable" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable-300x132.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable.png" decoding="async" class="aligncenter wp-image-65428 size-full jetpack-lazy-image" src="../Images/80c7d3fd7c0b0a2c23c271f59d65b686.png" alt="Final Task List Three Columns-react-draggable" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable-300x132.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65428" data-permalink="https://blog.logrocket.com/create-draggable-components-react-draggable/final-task-list-three-columns-react-draggable/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable.png" data-orig-size="730,320" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="final-task-list-three-columns-react-draggable" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable-300x132.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable.png" decoding="async" loading="lazy" class="aligncenter wp-image-65428 size-full" src="../Images/80c7d3fd7c0b0a2c23c271f59d65b686.png" alt="Final Task List Three Columns-react-draggable" srcset="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable-300x132.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/final-task-list-three-columns-react-draggable.png"/></noscript>
<p>这些任务可在其各自的列中移动:</p>
<p><img data-attachment-id="65430" data-permalink="https://blog.logrocket.com/create-draggable-components-react-draggable/react-draggable-components-movement/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-components-movement.gif" data-orig-size="618,855" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-draggable-components-movement" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-components-movement-217x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-components-movement.gif" decoding="async" class="aligncenter wp-image-65430 size-full jetpack-lazy-image" src="../Images/1735e1b6d97bd3a5965a7fbb8347882d.png" alt="React Draggable Components Movement" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-components-movement.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-components-movement.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="65430" data-permalink="https://blog.logrocket.com/create-draggable-components-react-draggable/react-draggable-components-movement/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-components-movement.gif" data-orig-size="618,855" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-draggable-components-movement" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-components-movement-217x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-components-movement.gif" decoding="async" loading="lazy" class="aligncenter wp-image-65430 size-full" src="../Images/1735e1b6d97bd3a5965a7fbb8347882d.png" alt="React Draggable Components Movement" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/09/react-draggable-components-movement.gif"/></noscript>
<p>要删除任务，只需点击<strong>删除</strong>图标。</p>
<h2>可拖动事件侦听器</h2>
<p>react-draggable API 支持一系列回调方法来跟踪可拖动元素的移动:</p>
<ul>
<li><code>onDrag()</code> —该方法监听<code>drag</code>事件，并在<code>drag</code>正在进行时被触发</li>
<li><code>onStart()</code> —该方法监听<code>drag</code>事件，并在拖动开始时被触发</li>
<li><code>onStop()</code> —该方法监听<code>drag</code>事件，并在拖动停止时被触发</li>
<li><code>onMouseDown()</code> —当鼠标按在可拖动的元素上时，该方法被触发</li>
<li><code>onMouseUp()</code> —当鼠标在可拖动的元素上释放时，该方法被触发</li>
<li><code>onTouchStart()</code> —该方法在拖动开始之前在触摸环境中触发</li>
<li><code>onTouchEnd()</code> —此方法在拖动停止之前在触摸环境中触发</li>
</ul>
<h3>可拖动组件上的事件侦听器用法</h3>
<pre class="language-css hljs">import Draggable, {DraggableCore} from 'react-draggable';
import React from 'react-dom'
function MyDraggableComponent() {
  const eventHandler = (e, data) =&gt; {
    console.log('Event Type', e.type);
    console.log({e, data});
  }

  return (
    &lt;Draggable
        defaultPosition={{x: 0, y: 0}}
        onMouseDown={eventHandler}
        onStart={eventHandler}
        onDrag={eventHandler}
        onStop={eventHandler}&gt;
        &lt;div style={{border: "2px solid red", padding: "1rem", width: "30%"}}&gt;
          &lt;div className="handle"&gt;Drag from here&lt;/div&gt;
          &lt;div&gt;This readme is really dragging on...&lt;/div&gt;
        &lt;/div&gt;
      &lt;/Draggable&gt;
  )
}

export default MyDraggableComponent;
</pre>
<p><code>handler</code>函数接收<code>event</code>和<code>data</code>对象作为参数。</p>
<p>此外，<code>data</code>对象包含关于可拖动组件当前位置的信息。</p>
<h2>可拖动组件道具</h2>
<h3><code>axis</code></h3>
<p><code>axis</code>道具决定了拖拽可以在哪个轴上移动。它接收以下字符串值:</p>
<ul>
<li><code>both</code>允许水平和垂直移动。这是轴的默认值</li>
<li><code>x</code>限制水平轴的移动</li>
<li><code>y</code>限制垂直轴的移动</li>
<li>停止所有运动</li>
</ul>
<pre class="language-css hljs">&lt;Draggable axis="x"&gt;
  &lt;div style={{border: "2px solid red", padding: "1rem", width: "30%"}}&gt;
    &lt;div className="handle"&gt;Drag from here&lt;/div&gt;
    &lt;div&gt;This readme is really dragging on...&lt;/div&gt;
  &lt;/div&gt;
&lt;/Draggable&gt;
</pre>
<h3><code>handle</code></h3>
<p><code>handle</code>属性定义了一个将被用作拖动手柄的选择器。</p>
<p>如果没有<code>handle</code>道具，可拖动组件将被用作拖动手柄:</p>
<pre class="language-css hljs">&lt;Draggable handle=".handle"&gt;
  &lt;div style={{border: "2px solid red", padding: "1rem", width: "30%"}}&gt;
    &lt;div style={{backgroundColor: "green", width: "30%"}} className="handle"&gt;
        Drag from here
    &lt;/div&gt;
    &lt;div&gt;This readme is really dragging on...&lt;/div&gt;
  &lt;/div&gt;
&lt;/Draggable&gt;
</pre>
<p>使用上面的代码片段，我们可以通过单击绿色背景色元素来移动可拖动组件。</p>
<h3><code>defaultPosition</code></h3>
<p><code>defaultPosition</code>属性指定了被拖动项目应该开始的<code>x</code>和<code>y</code>坐标:</p>
<pre class="language-css hljs">&lt;Draggable defaultPosition={{x: 0, y: 0}}&gt;
  &lt;div style={{border: "2px solid red", padding: "1rem", width: "30%"}}&gt;
    &lt;div className="handle"&gt;Drag from here&lt;/div&gt;
    &lt;div&gt;This readme is really dragging on...&lt;/div&gt;
  &lt;/div&gt;
&lt;/Draggable&gt;
</pre>
<h3><code>disabled</code></h3>
<p><code>disabled</code>属性接收一个布尔值。如果<code>true</code>，它将不会调用任何拖动处理程序，使得可拖动组件像一个完全静态的组件一样操作。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<h3><code>bounds</code></h3>
<p><code>bounds</code>道具指定移动边界。它接收以下字符串值:</p>
<ul>
<li><code>parent</code>—<code>parent</code>值限制节点的<code>offsetParent</code>(相对或绝对位置的最近节点)内的移动</li>
<li>一个具有<code>left, top, right, and bottom</code>属性的对象，它指示可拖动对象在每个方向上可以移动的距离</li>
</ul>
<pre class="language-css hljs">&lt;Draggable bounds={{left: 0, top: 0, right: 100, bottom: 200}}&gt;
  &lt;div style={{border: "2px solid red", padding: "1rem", width: "30%"}}&gt;
    &lt;div className="handle"&gt;Drag from here&lt;/div&gt;
    &lt;div&gt;This readme is really dragging on...&lt;/div&gt;
  &lt;/div&gt;
&lt;/Draggable&gt;
</pre>
<p>使用上面的代码片段，我们的可拖动组件的移动将被限制在指定的值。</p>
<p>有关可拖动道具的更多信息，请查看<a href="https://www.npmjs.com/package/react-draggable" target="_blank" rel="noopener">文档</a>。</p>
<h2>处理<code>findDOMNode</code>折旧错误</h2>
<p>如果可拖动组件在 React Strict 模式下运行，警告<code>ReactDOM.findDOMNode()</code>被否决将被记录在浏览器的控制台上。</p>
<p>避免此警告的方法是传递一个<code>nodeRef</code>，如下例所示:</p>
<pre class="language-css hljs">function MyDraggableComponent() {
  const nodeRef = React.useRef(null);
  return (
    &lt;Draggable nodeRef={nodeRef}&gt;
      &lt;div ref={nodeRef}&gt;Example Target&lt;/div&gt;
    &lt;/Draggable&gt;
  );
}

export default MyDraggableComponent;
</pre>
<h2>结论</h2>
<p>在你的应用程序中增加组件的移动对你的 UI 有好处，比如提高视觉兴趣和更好的组织。React-Draggable 库因其简单性和功能性是一个很好的选择。</p>
<p>在本教程中，我们使用 React-Draggable 创建了一个任务列表。要了解更多关于 React-Draggable 的信息，请务必访问 GitHub 页面。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用 LogRocket 消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款 React analytics 解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket 告诉您 React 应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS 异常、前端性能指标和用户交互。然后，LogRocket 使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的 React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试 LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>