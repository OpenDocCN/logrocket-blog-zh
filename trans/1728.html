<html>
<head>
<title>What's new in React Native 0.64 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React 原生 0.64 - LogRocket 博客的新特性</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/whats-new-in-react-native-0-64/#0001-01-01">https://blog.logrocket.com/whats-new-in-react-native-0-64/#0001-01-01</a></blockquote><div><div class="mainheading">

<div class="row post-top-meta hidden-md-down">

<div class="col-md-10 col-xs-12">
<a class="text-capitalize link-dark" href="https://blog.logrocket.com/author/levivaguez/">
Levi Vaguez <span class="btn follow">Follow</span></a>
<span class="author-description d-block">An enthusiastic writer and a reader who loves to explore new pastures. I began my journey as a Ruby on Rails developer but decided to pursue my love for writing even more.</span>
</div>
</div>
<h1 class="posttitle">React 原生 0.64 的新特性</h1>
<h2 class="post-subtitle"/>
<p><span class="post-date"><time class="post-date">2021 年 4 月 22 日</time> </span> <span class="dot"/> <span class="readingtime"> 3 min 读</span> <span class="wordcount"> 912 </span> <span class="logrocket_editor"/></p>
</div>
<article class="article-post">
<p>自 2020 年秋季 React 17 发布以来，开发者社区对 React Native 的下一个版本寄予了很高的期望。<a href="https://reactnative.dev/blog/2021/03/12/version-0.64"> React Native 0.64 </a>在一片喧嚣和猜测声中于 2021 年 3 月发布。新版本带来了一些令人兴奋的新功能，这将使整个社区受益，特别是 iOS 开发者，他们热切期待 Hermes 在该平台上的发布。</p>
<p>在本指南中，我们将向您展示 React Native 0.64 的新增功能，包括:</p>

<h2 id="hermesonios">iOS 上的爱马仕</h2>
<p>Hermes 是一个开源的 JavaScript 引擎，经过优化可以在多个平台上运行 React Native。爱马仕通过降低内存使用率、减少应用程序的下载大小、缩短应用程序变得可用的时间或交互时间(TTI)来提高应用程序的性能。</p>
<p>此前，爱马仕只能在安卓系统上选择加入。随着这次更新，<a href="https://blog.logrocket.com/getting-started-with-hermes-in-react-native/"> Hermes 也可以在 iOS </a>上使用了。</p>
<p>随着 React 原生生态系统的增长，开发人员遇到了与大规模应用程序生产相关的挑战。举几个例子，巨大的包大小、过多的电话内存使用和增加的交互时间会导致糟糕的用户体验。</p>
<p>脸书的工程师设计了爱马仕作为这些问题的轻量级解决方案。然而，在 React Native 0.64 发布之前，iOS 开发者在保持相同质量水平方面面临着一场艰苦的战斗。</p>
<p>在 iOS 上包含 Hermes 有助于反应原生应用程序性能更好，使它们更轻量级，并减少 iOS 平台上的交互时间。这将激励 React 本地社区为爱马仕和整个平台的发展做出更大的贡献。</p>
<h3>将现有项目切换到 Hermes</h3>
<p>在将现有项目切换到 Hermes 之前，您必须确保升级项目以使用 React Native 0.64。要在 iOS 上启用 Hermes，在 podfile 中将<code>hermes_enabled</code>设置为<code>true</code>，然后运行<code>pod install</code>。</p>
<p>值得注意的是，iOS 对 Hermes 的支持仍处于萌芽状态。在未来的日子里，我们可以期待进一步的改进和支持。</p>
<p>要在 Android 上启用 Hermes，请将<code>enableHermes: true</code>添加到您的<code>android/app/build.gradle file</code>中。</p>
<h2 id="viewinghermestraceswithchrome">用 Chrome 查看爱马仕痕迹</h2>
<p>在过去的一年里，脸书一直在赞助<a href="https://mlh.io/">大联盟黑客</a>奖学金，并支持对 React Native 的贡献，包括使用 Chrome DevTools 中的 Performance 选项卡来可视化 React Native 应用程序在使用 Hermes 时的执行。</p>
<p>尽管这个特性很有用，但它并不是全新的，因为你已经可以对运行在 Hermes 上的 React 原生应用进行配置了。但是通过运行这个新命令，您可以将一个 Hermes 跟踪配置文件转换为一个 Chrome 跟踪配置文件，并将其拉至本地机器:</p>
<pre>react-native profile-hermes [destinationDir] &lt;flag&gt;
</pre>
<p>了解更多关于如何在官方文件中记录爱马仕取样档案的信息。</p>
<h2 id="hermeswithproxysupport">代理支持的 Hermes</h2>
<p>React 原生 0.64 也为 Hermes 带来了代理支持。这种支持能够兼容社区的流行项目，如<a href="https://rnfirebase.io/"> React Native Firebase </a>和<a href="https://mobx.js.org/README.html"> M </a> <a href="https://mobx.js.org/README.html"> ob </a> <a href="https://mobx.js.org/README.html"> X </a>。如果您一直在使用这些包，现在您可以将您的项目迁移到 Hermes。</p>
<p>React 原生团队计划在即将到来的版本中让 Hermes 成为 Android 的默认 JavaScript 引擎。如果你在 React 原生项目中使用 Hermes 时遇到问题，你应该<a href="https://github.com/facebook/hermes">报告它</a>。</p>
<h2 id="inlinerequiresenabledbydefault">默认情况下，内联要求已启用</h2>
<p><a href="https://reactnative.dev/docs/ram-bundles-inline-requires#inline-requires"> Inline requires </a>是一个 Metro 配置选项，可以通过延迟 JavaScript 模块的执行直到它们被使用来帮助加速应用的启动时间。传统上，JavaScript 模块的执行从启动时开始。</p>
<p>这项功能作为一个选择加入的配置选项已经存在了几年，但 React Native 0.64 默认启用了该选项，以帮助您构建快速执行的移动应用程序，而无需任何额外的配置。</p>
<p>内联要求是一个巴别塔变换。它接受模块导入并将它们转换为内联的。</p>
<p>让我们看一个例子，在这个例子中，inline requires 将一个模块导入调用从文件的顶部转换到使用它的地方。</p>
<p>之前:</p>
<pre>import { TestFunction } from 'test-module';

const TestComponent = (props) =&gt; {
  const result = TestFunction();

  return &lt;Text&gt;{result}&lt;/Text&gt;;
};
</pre>
<p>之后:</p>
<pre>const TestComponent = (props) =&gt; {
  const result = require('test-module').TestFunction();

  return &lt;Text&gt;{result}&lt;/Text&gt;;
};
</pre>
<h2 id="react17">反应 17</h2>
<p>React 17 不包括任何新功能或任何面向开发者的重大变化。<a href="https://reactjs.org/blog/2020/10/20/react-v17.html">官方博客文章</a>指出，React 17 是一个“垫脚石”版本，旨在更安全地将一个版本 React 管理的树嵌入另一个版本管理的树中。这也使得将 React 嵌入到用其他框架构建的应用程序中变得更加容易。</p>
<p>此外，新的 JSX 变换消除了导入 React 以使用 JSX 的需要。这是一个选择加入的功能，React 团队指出，它计划继续支持经典的 JSX 变换。</p>
<h2 id="dependencychanges">依赖性变化</h2>
<ul>
<li>React Native 已经放弃了对 Android API 级别 16–20 的支持。随着脸书应用程序放弃对这些安卓版本的支持，React Native 也会跟进</li>
<li>现在需要 Xcode 12 和<a href="https://github.com/CocoaPods/CocoaPods/releases"> CocoaPods 1.10 </a></li>
<li>对 Node.js 的最低支持从版本 10 提升到版本 12</li>
<li>脚蹼颠簸到 0.75.1</li>
</ul>
<h2 id="conclusion">结论</h2>
<p>由于全球 100 多名贡献者的努力，React Native 0.64 现已上线。这个新版本对整个 React Native 社区是有益的和支持的。有了社区的帮助来发现 bug，我们可以期待在即将发布的版本中有进一步的改进。</p>
<div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>