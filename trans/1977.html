<html>
<head>
<title>How to safely render Markdown using react-markdown - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何使用 react-markdown - LogRocket 博客安全地呈现 Markdown</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-safely-render-markdown-using-react-markdown/#0001-01-01">https://blog.logrocket.com/how-to-safely-render-markdown-using-react-markdown/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Markdown 格式是开发人员社区的一个长期主题。自 2004 年以来，我们一直使用 Markdown 为各种平台创建内容，包括博客、网络论坛、聊天应用程序、所见即所得编辑器等等。</p>
<p>在本教程中，我们将向您展示如何使用 react-markdown 从 React 组件安全地呈现 Markdown。</p>
<h2>什么是降价反应？</h2>
<p><a href="https://github.com/remarkjs/react-markdown" target="_blank" rel="noopener"> react-markdown </a>是一个 react 组件，它将 markdown 文本转换成相应的 HTML 代码。它建立在<a href="https://github.com/remarkjs/remark" target="_blank" rel="noopener">备注</a>之上，是一个降价预处理器。</p>
<p>react-markdown 使您能够安全地渲染 markdown，因为它不依赖于<code>dangerouslySetInnerHTML</code>属性。相反，它使用语法树来构建虚拟 DOM。</p>
<p>使用<code>dangerouslySetInnerHTML</code>属性解析 HTML 是危险的，因为如果你不确定来源，它可能会注入恶意脚本。这可能会使您的软件容易受到<a href="https://owasp.org/www-community/attacks/xss/" target="_blank" rel="noopener">跨站脚本(XSS)攻击</a>，在这种攻击中，不良行为者将代码注入原本良性的应用程序和网站，向不知情的用户发送恶意脚本。</p>
<p>Markdown language 旨在帮助您轻松创建编辑内容。这就是为什么它只包含基本标签。默认情况下，react-markdown 不支持 HTML，因此会阻止脚本注入。这使得它可以安全使用。</p>
<h2>安装 react-降价</h2>
<p>您可以使用 npm 安装<code>react-markdown</code>库:</p>
<pre>npm install react-markdown
</pre>
<p>或者，您可以使用 yarn 安装库:</p>
<pre>yarn add react-markdown
</pre>
<p>您不需要安装任何其他库来使用 react-markdown。然而，你可以选择使用一些插件来增强它的功能。我们稍后将讨论这些插件。</p>
<h2>使用 react-markdown:简单的例子</h2>
<p>因为 react-markdown 库提供了一个组件，所以我们需要将 markdown 文本作为子组件放入其中。这将返回转换后的 HTML 代码。</p>
<p>这里有一个例子:</p>
<pre>import React from 'react'
import ReactMarkdown from 'react-markdown'
export default function MarkdownToHtml(){
  return(
    &lt;ReactMarkdown&gt;*React-Markdown* is **Awesome**&lt;/ReactMarkdown&gt;
  )
}
</pre>
<p>呈现的输出将是"<strong>React-Markdown</strong>is<em>Awesome</em></p>
<h2>支持的降价语法</h2>
<p>下面是 react-markdown 支持的 Markdown 语法列表，无需使用任何外部插件。</p>
<p/>
<h2>使用带有 react-markdown 的插件</h2>
<p>如果您想超越上述语法，react-Markdown 的父项目 remark 已经创建了许多插件，您可以使用它们来增强库的功能。</p>
<p>例如，react-markdown 不支持自动链接、删除线、表格、任务列表等。默认情况下。如果您曾经在 GitHub 上创建过自述文件，您可能已经使用 Markdown 创建了任务列表和表格。为了迎合这种需求，remark 创造了<a href="https://github.com/remarkjs/remark-gfm" target="_blank" rel="noopener"> remark-gfm </a>，代表<a href="https://github.github.com/gfm/" target="_blank" rel="noopener"> Github 风味减价</a>。</p>
<p>为了使用插件，react-markdown 提供了两个道具——<code>remarkPlugins</code>和<code>rehypePlugins</code>——它们接受您希望使用的所有插件的数组。你可以在<code>remarkPlugin</code>道具中放置备注插件，比如<code>remark-gfm</code>和<code>remark-maths</code>，在<code>rehypePlugins</code>道具中重新排版插件，比如<code>rehype-katex</code>。</p>
<p>例如，如果你想支持删除线特性，你需要使用 remark-gfm。让我们创建一个快速演示来展示这是如何工作的。</p>
<p>首先，安装<code>remark-gfm</code>:</p>
<pre>npm install remark-gfm
</pre>
<p>现在您可以在代码中使用它:</p>
<pre>import React from 'react'
import ReactMarkdown from 'react-markdown'
import gfm from 'remark-gfm'
export default function MarkdownToHtml(){
  return(
    &lt;ReactMarkdown remarkPlugins={[gfm]}&gt;*React-Markdown* now supports ~strikethrough~. Thanks to gfm plugin.&lt;/ReactMarkdown&gt;
  )
}
</pre>
<p>现在，由于 remark-gfm 插件，输出将是"<strong> React-Markdown </strong>现在支持~~删除线~ ~。"</p>
<p>如果要支持数学表达式(如书面公式、方程、分数等。)或<a href="https://katex.org/" target="_blank" rel="noopener"> KaTeX </a>，一个流行的数学排版库，你可以考虑使用<a href="https://github.com/remarkjs/remark-math" target="_blank" rel="noopener"> remark-math </a>和<a href="https://github.com/rehypejs/rehype" target="_blank" rel="noopener">retype-KaTeX</a>。这些插件使你能够将普通语言的符号转换成人类可读的数学格式。</p>
<p>这里有一个例子:</p>
<pre>$$
L = \frac{1}{2} \rho v^2 S C_L
$$
</pre>
<p>上面用 KaTeX 解析的例子如下所示:</p>
<p><img data-attachment-id="59580" data-permalink="https://blog.logrocket.com/how-to-safely-render-markdown-using-react-markdown/example-parsed-with-katex/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/example-parsed-with-katex.jpeg" data-orig-size="218,104" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Example parsed with KaTex" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/example-parsed-with-katex.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/example-parsed-with-katex.jpeg" decoding="async" class="aligncenter size-full wp-image-59580 jetpack-lazy-image" src="../Images/a00e8a49fc970b021e10f592fb6b7ba3.png" alt="Example Parsed with KaTex" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/example-parsed-with-katex.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/example-parsed-with-katex.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59580" data-permalink="https://blog.logrocket.com/how-to-safely-render-markdown-using-react-markdown/example-parsed-with-katex/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/example-parsed-with-katex.jpeg" data-orig-size="218,104" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Example parsed with KaTex" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/example-parsed-with-katex.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/example-parsed-with-katex.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-59580" src="../Images/a00e8a49fc970b021e10f592fb6b7ba3.png" alt="Example Parsed with KaTex" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/example-parsed-with-katex.jpeg"/></noscript>
<p>前往官方文档，获取可以与 react-markdown 一起使用的<a href="https://github.com/remarkjs/remark/blob/main/doc/plugins.md#list-of-plugins" target="_blank" rel="noopener">注释插件的完整列表。</a></p>
<h2><code>remark-gfm</code>插件的特殊语法</h2>
<p>下表显示了您可以使用<code>remark-gfm</code>插件启用的特殊功能，包括创建<a href="https://www.akashmittal.com/react-table-learn-filter-sort-pagination-in-10-minutes/" target="_blank" rel="noopener">表格</a>、删除线文本和待办事项列表的能力。</p>
<p>请查看下面的现场演示:</p>
<p>阿卡什·米塔尔(<a href="https://codepen.io/akash-mittal">@阿卡什·米塔尔</a> ) <br/>在<a href="https://codepen.io"> CodePen </a>上使用 Remark-gfm 的 React-Markdown 表。</p>
<p>结论</p>
<p>在这个 react-markdown 教程中，我们学习了如何安全地将 markdown 语法呈现给适当的 HTML。我们还回顾了如何通过将各种插件传递给所提供的组件来使用 react-markdown 的各种插件，包括<code>remark-gfm</code>。</p>
<h2>使用 LogRocket 消除传统反应错误报告的噪音</h2>
<p>是一款 React analytics 解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket 告诉您 React 应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS 异常、前端性能指标和用户交互。然后，LogRocket 使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>关注重要的 React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试 LogRocket】。</a></p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p> automatically aggregates client side errors, React error boundaries, Redux state, slow component load times, JS exceptions, frontend performance metrics, and user interactions. Then LogRocket uses machine learning to notify you of the most impactful problems affecting the most users and provides the context you need to fix it.

</p><p vwo-el-id="28675661060">Focus on the React bugs that matter —
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">try LogRocket today</a>.
</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>