<html>
<head>
<title>Choosing and connecting a React Native backend </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>选择和连接React本机后端</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/choosing-connecting-react-native-backend/#0001-01-01">https://blog.logrocket.com/choosing-connecting-react-native-backend/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Supabase和Firebase是两个最著名的后端即服务(BaaS)产品。Firebase现在归谷歌所有，它为开发者提供了在网络和移动设备上构建和发布应用程序的工具。另一方面，Supabase是Firebase的开源替代方案，采用基于文档的数据存储结构构建。</p>
<p>Supabase提供关系数据库管理，称为<a href="https://blog.logrocket.com/create-a-react-native-app-with-postgresql-and-graphql-part-1/"> PostgreSQL </a>，它允许你用SQL 对你的数据库进行<a href="https://blog.logrocket.com/detailed-look-basic-sqljs-features/">查询。</a></p>
<p>在本文中，我们将学习如何选择和连接<a href="https://blog.logrocket.com/tag/react-native/"> React Native </a>后端，然后学习如何使用<a href="https://blog.logrocket.com/tag/node/"> Node.js </a>创建我们自己的后端服务。</p>
<p><em>向前跳转:</em></p>

<h2 id="react-native-backend-pros-cons">对本机后端的利弊做出反应</h2>
<p>Supabase 和<a href="https://blog.logrocket.com/storing-retrieving-data-react-native-apps-firebase/"> Firebase </a>提供了构建和管理网络和移动应用的工具套件。这两个平台都提供了一系列功能，包括数据库管理、用户认证、托管和实时数据同步。以下是使用Firebase和Supabase的一些优点和缺点。</p>
<h3 id="pros-cons-firebase">使用Firebase的利与弊</h3>
<p>Firebase为构建和管理web和移动应用程序提供了一套全面的工具和服务，包括实时数据库、用户认证、托管、分析等。Firebase的另一个优点是Firebase提供实时数据同步，这意味着对数据库的任何更改都会实时自动传播到所有连接的客户端。这对于需要实时更新的应用程序非常有用，例如<a href="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/">聊天或协作应用程序</a>。</p>
<p>Firebase与其他谷歌服务无缝集成，如谷歌云存储和谷歌云功能，这对已经在使用这些服务的开发者来说可能是有帮助的。最后，Firebase相对容易设置和使用，并且有清晰的文档和直观的工具。</p>
<h3>骗局</h3>
<p>使用Firebase，您对数据库的控制是有限的，因为Firebase平台管理它。如果您需要对数据进行更多的控制，或者如果您对数据管理有特定的要求，这可能是一个缺点。Firebase为其工具和服务提供了有限的定制选项，这可能会使需要更多控制应用程序功能的开发人员处于不利地位。</p>
<p>因为谷歌拥有Firebase，所以你依赖于该公司的基础设施和政策。对于关心数据隐私或希望对应用程序的托管环境有更多控制的开发人员来说，这可能是一个问题。</p>
<h3 id="pros-cons-supabase">使用Supabase的利弊</h3>
<p>像Firebase一样，Supabase提供实时数据同步，这对于需要实时更新的应用程序很有帮助。<a href="https://blog.logrocket.com/exploring-supabase-the-open-source-firebase-alternative/"> Supabase是一个开源平台</a>，这意味着您可以完全控制源代码，并可以对其进行定制以满足您的特定需求。</p>
<p>Supabase是建立在PostgreSQL之上的，这对于已经熟悉PostgreSQL或者需要对其数据库有更多控制的开发人员来说很有帮助。</p>
<h3>骗局</h3>
<p>因为Supabase是一个相对较新的平台，与Firebase相比，它的功能范围有限。此外，作为一个新平台，与Firebase等更成熟的平台相比，Supabase的文档和社区支持有限。Supabase是一个开源平台，这意味着你需要更多的技术知识来设置和有效地使用它。</p>
<h2 id="choosing-react-native-backend">选择React本机后端</h2>
<p>当在Firebase和Supabase之间选择React本地后端时，有几个关键因素需要考虑:</p>
<h3>目的</h3>
<p>你想用数据库做什么？Firebase是一个通用数据库，可以用于各种应用，包括实时数据同步、<a href="https://blog.logrocket.com/user-authentication-firebase-react-apps/">认证</a>和<a href="https://blog.logrocket.com/firebase-cloud-storage-firebase-v9-react/">云功能</a>。Supabase是一个基于Postgres的数据库，具有实时功能和内置API支持，这使得它非常适合<a href="https://blog.logrocket.com/using-edge-functions-supabase-complete-guide/">构建现代web应用</a>。</p>
<h3>数据结构</h3>
<p>您希望如何组织您的数据？Firebase使用了一个<a href="https://blog.logrocket.com/nosql-wide-column-stores-demystified/"> NoSQL数据模型</a>，这意味着数据被存储为一个可以包含任意数量字段的文档集合。Supabase使用一个<a href="https://blog.logrocket.com/product-management/sql-skills-product-managers/"> SQL数据模型</a>，将数据存储在具有行和列的表格中。如果您熟悉SQL或者需要处理结构化数据，Supabase可能是更好的选择。</p>
<h3>生态系统</h3>
<p>您还需要哪些工具和服务来与您的数据库集成？Firebase有一个庞大而活跃的开发人员社区，它与其他谷歌云服务整合在一起，包括机器学习和分析。Supabase有一个<a href="https://github.com/supabase-community">较小的社区</a>，但提供了与Postgres生态系统的强大集成，包括地理空间数据的PostGIS和时间序列数据的时标等工具。</p>
<p>最终，React本机后端的最佳选择将取决于您的特定需求和要求。评估这两个选项，看看哪一个更符合您的项目目标可能会有所帮助。</p>
<h2 id="connecting-firebase">连接到Firebase</h2>
<p>我们将使用<a href="https://blog.logrocket.com/native-routing-expo-react-native/"> Expo </a>作为React本地开发环境。我们将通过在我们的项目文件夹终端中运行<code>npx create-expo-app</code>来搭建Expo starter项目文件。</p>
<p>要开始创建我们的Firebase应用程序，请访问<a href="https://firebase.google.com/"> Firebase网站</a>，使用您的Google帐户登录，然后转到控制台选项卡。在那里，您将看到一个创建新项目的按钮。命名项目并完成创建新项目的步骤后，您将看到以下内容:</p>
<p><img data-attachment-id="156996" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/to-do-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase.png" data-orig-size="730,388" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Firebase React Native project start example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase-300x159.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase.png" decoding="async" class="aligncenter size-full wp-image-156996 jetpack-lazy-image" src="../Images/ae0343399ba877dae98ceebe77319c4e.png" alt="Firebase React Native Project Start Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase-300x159.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156996" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/to-do-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase.png" data-orig-size="730,388" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Firebase React Native project start example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase-300x159.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156996" src="../Images/ae0343399ba877dae98ceebe77319c4e.png" alt="Firebase React Native Project Start Example" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase-300x159.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/to-do-firebase.png"/></noscript>
<p>因为我们想要使用一个<a href="https://blog.logrocket.com/storing-retrieving-data-react-native-apps-firebase/"> Firestore数据库</a>，我们将首先创建一个应用程序，点击<strong> <code>&lt;/&gt;</code> </strong>按钮将您重定向到此页面:</p>
<p><img data-attachment-id="156998" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/adding-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase.png" data-orig-size="730,426" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding Firebase for your React Native backend" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase.png" decoding="async" class="aligncenter size-full wp-image-156998 jetpack-lazy-image" src="../Images/7aeece3c3d9e089ed794e38a390d7d0b.png" alt="Adding Firebase For Your React Native Backend" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase-300x175.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="156998" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/adding-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase.png" data-orig-size="730,426" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding Firebase for your React Native backend" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-156998" src="../Images/7aeece3c3d9e089ed794e38a390d7d0b.png" alt="Adding Firebase For Your React Native Backend" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase-300x175.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-firebase.png"/></noscript>
<p>首先，使用<code>npm i firebase</code>安装Firebase，并将代码块复制到我们的项目中。我们将在其中创建一个<code>firebase</code>文件夹和一个<code>firebase.js</code>文件:</p>
<pre class="language-javascript hljs">// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
 apiKey: "AIzaSyCGpnbYR-rubx9qC5XrGcQA3XMW6t0JdH0",
 authDomain: "todo-app-52801.firebaseapp.com",
 projectId: "todo-app-52801",
 storageBucket: "todo-app-52801.appspot.com",
 messagingSenderId: "961721982303",
 appId: "1:961721982303:web:ae37cc46b718ccf8cfaaea",
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);

export { app };
</pre>
<h3 id="storing-data">在数据库中存储数据</h3>
<p>现在，我们将创建一个数据库来存储我们的待办事项。首先，点击<strong>构建</strong>按钮并选择<strong> Firestore数据库</strong>:</p>
<p><img data-attachment-id="157000" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/cloud-firestore-4/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore.png" data-orig-size="730,350" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding Cloud Firestore" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore-300x144.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore.png" decoding="async" class="aligncenter size-full wp-image-157000 jetpack-lazy-image" src="../Images/7411f04f8ac6819af2c111dcd743b7a6.png" alt="Adding Cloud Firestore " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore-300x144.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157000" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/cloud-firestore-4/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore.png" data-orig-size="730,350" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding Cloud Firestore" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore-300x144.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157000" src="../Images/7411f04f8ac6819af2c111dcd743b7a6.png" alt="Adding Cloud Firestore " srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore-300x144.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/cloud-firestore.png"/></noscript>
<p>创建数据库后，我们将有一个仪表板，可以在其中创建我们的<code>todos</code>集合并存储任务:</p>
<p><img data-attachment-id="157002" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/new-project-firestore/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore.png" data-orig-size="730,360" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating new tasks for your Firebase React Native backend" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore-300x148.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore.png" decoding="async" class="aligncenter size-full wp-image-157002 jetpack-lazy-image" src="../Images/7552d160eb39c736d4bfdcfbb74b0f32.png" alt="Creating New Tasks For Your Firebase React Native Backend" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore-300x148.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157002" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/new-project-firestore/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore.png" data-orig-size="730,360" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating new tasks for your Firebase React Native backend" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore-300x148.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157002" src="../Images/7552d160eb39c736d4bfdcfbb74b0f32.png" alt="Creating New Tasks For Your Firebase React Native Backend" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore-300x148.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/new-project-firestore.png"/></noscript>
<p>然后，点击<strong>开始收集</strong>，并给它起一个名字或一个<code>collectionID</code>。我们的迷你项目将有三个字段:<code>ID</code>、<code>Title</code>和<code>Completed Field</code>。</p>
<h3 id="creating-to-do-task">创建待办任务</h3>
<p>为了创建一个新的待办任务，我们将在<code>App.js</code>中有一个带有文本输入和行动按钮的界面。请记住，在上一步中，我们在Firebase应用程序中导出了应用程序。</p>
<p>现在，我们将导入并使用<code>App.js</code>中的app。首先，我们将创建两个状态:<code>title</code>和<code>completed</code>。<code>TextInput</code>值将被设置为<code>title</code>的值，即用户输入的值，并且将在<code>button</code>组件上调用<code>addTodo</code>函数。</p>
<p>它应该是这样的:</p>
<pre class="language-javascript hljs">import{ 
StyleSheet,
 Text,
 TextInput,
 View,
 Button,
 FlatList,
} from "react-native";
import { app } from "./firebase/firebase";
import {
 getFirestore,
 addDoc,
 getDocs,
 collection,
} from "firebase/firestore";
import { useEffect, useState } from "react";

export default function App() {
 const [title, setTitle] = useState("");
 const [completed, setCompleted] = useState(false);
 const db = getFirestore(app);

 const addTodo = async () =&gt; {
   try {
     const docRef = await addDoc(collection(db, "todos"), {
       title,
       completed,
     });
     setTitle("");
     console.log("Document written with ID: ", docRef.id);
   } catch (error) {
     console.log(error);
   }
 };

 return (
   &lt;View style={styles.container}&gt;
     &lt;Text&gt;Open up App.js to start working &lt;/Text&gt;
     &lt;TextInput
       value={title}
       onChangeText={(text) =&gt; setTitle(text)}
       placeholder="Enter a todo"
       style={styles.input}
     /&gt;
     &lt;Button title="Add Todo" onPress={addTodo} /&gt;
   &lt;/View&gt;
 );
}

const styles = StyleSheet.create({
 container: {
   flex: 1,
   backgroundColor: "#fff",
   marginTop: 400,
   alignItems: "center",
   justifyContent: "center",
 },
 input: {
   height: 40,
   width: 200,
   borderWidth: 1,
   borderColor: "black",
   margin: 10,
 },
});
</pre>
<p>现在，让我们检查一下模拟器中的内容:</p>
<p><img data-attachment-id="157004" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-app-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase.png" data-orig-size="730,1739" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native Firebase app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-126x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-430x1024.png" decoding="async" class="aligncenter wp-image-157004 size-large jetpack-lazy-image" src="../Images/2c193ae0ebe55cf7a048928f97e230a7.png" alt="React Native Firebase App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-430x1024.png 430w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-126x300.png 126w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-645x1536.png 645w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase.png 730w" data-lazy-sizes="(max-width: 430px) 100vw, 430px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-430x1024.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-430x1024.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157004" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-app-firebase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase.png" data-orig-size="730,1739" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native Firebase app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-126x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-430x1024.png" decoding="async" loading="lazy" class="aligncenter wp-image-157004 size-large" src="../Images/2c193ae0ebe55cf7a048928f97e230a7.png" alt="React Native Firebase App" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-430x1024.png 430w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-126x300.png 126w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-645x1536.png 645w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase.png 730w" sizes="(max-width: 430px) 100vw, 430px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-firebase-430x1024.png"/></noscript>
<p>创建后，我们可以检查我们的数据库，看看它是否在那里:</p>
<p><img data-attachment-id="157007" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/firebase-database-check/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check.png" data-orig-size="730,203" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Checking the Firebase database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check-300x83.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check.png" decoding="async" class="aligncenter size-full wp-image-157007 jetpack-lazy-image" src="../Images/b1611ac0bf044c04b9d48d1c37b9a499.png" alt="Checking the Firebase Database" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check-300x83.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157007" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/firebase-database-check/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check.png" data-orig-size="730,203" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Checking the Firebase database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check-300x83.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157007" src="../Images/b1611ac0bf044c04b9d48d1c37b9a499.png" alt="Checking the Firebase Database" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check-300x83.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/firebase-database-check.png"/></noscript>
<p>干得好！我们已经成功地将React本机应用程序连接到Firestore数据库，并在创建待办事项应用程序时执行了<code>create</code>操作。你可以在我的库<a href="https://github.com/Taofiqq/rn-todo-supabase">这里</a>找到这个项目的完整代码(用于<code>read</code>、<code>create</code>和<code>delete</code>动作)。</p>
<h2 id="creating-connecting-supabase-app">创建和连接Supabase应用程序</h2>
<p>你可以完全使用Supabase，或者只使用你的项目需要的<a href="https://supabase.com/">特性</a>。本教程将向您展示如何连接React Native和Supabase来构建一个简单的<a href="https://blog.logrocket.com/building-the-simplest-crud-out-there-with-entity-management/"> CRUD待办应用程序</a>。</p>
<p>我们将使用Expo作为React本地开发环境。通过在终端的项目文件夹中运行<code>npx create-expo-app</code>开始。这将搭建构建所需的Expo starter项目文件。</p>
<p>要开始创建我们的Supabase应用程序，请导航至<a href="https://app.supabase.com"> Supabase网站</a>并使用您的GitHub帐户登录或手动使用您的电子邮件登录。成功登录后，您可以从“组织”选项卡创建新项目。然后，插入项目名称和密码，并选择<strong>创建新项目</strong>:</p>
<p><img data-attachment-id="157009" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/password-set-supabase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase.png" data-orig-size="730,603" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating a Supabase project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase-300x248.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase.png" decoding="async" class="aligncenter size-full wp-image-157009 jetpack-lazy-image" src="../Images/c3336cf5306c57a353174747a56e13a7.png" alt="Creating a Supabase Project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase-300x248.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157009" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/password-set-supabase/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase.png" data-orig-size="730,603" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating a Supabase project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase-300x248.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157009" src="../Images/c3336cf5306c57a353174747a56e13a7.png" alt="Creating a Supabase Project" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase-300x248.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/password-set-supabase.png"/></noscript>
<p>这将设置您的项目，您可以在其中获得您的API密钥和项目URL。为此，导航到<strong>设置</strong>选项卡并点击<strong> API选项卡</strong>。它应该是这样的:</p>
<p><img data-attachment-id="157011" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/supabase-api-settings/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings.png" data-orig-size="730,592" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Setting the Supabase API" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings-300x243.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings.png" decoding="async" class="aligncenter size-full wp-image-157011 jetpack-lazy-image" src="../Images/d3b1ee43e6eb2fda8898c0e0393596f4.png" alt="Setting the Supabase API " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings-300x243.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157011" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/supabase-api-settings/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings.png" data-orig-size="730,592" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Setting the Supabase API" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings-300x243.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157011" src="../Images/d3b1ee43e6eb2fda8898c0e0393596f4.png" alt="Setting the Supabase API " srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings-300x243.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-api-settings.png"/></noscript>
<p>现在，在我们的<code>project</code>文件夹中，我们将创建一个<code>lib</code>文件夹和一个<code>supabase.js</code>文件来启动Supabase实例。我们将在项目的后期使用它来提出我们的<code>HTTP</code>请求。您的代码应该如下所示:</p>
<pre class="language-javascript hljs">// this is a javascript file
import "react-native-url-polyfill/auto";
import AsyncStorage from "@react-native-async-storage/async-storage";
import { createClient } from "@supabase/supabase-js";

const supabaseUrl = "https://ojbnhwfgozggjfjetrmu.supabase.co";
const supabaseAnonKey =
 "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9qYm5od2Znb3pnZ2pmamV0cm11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2Njg0ODIzNDcsImV4cCI6MTk4NDA1ODM0N30.Y3_C-gzEHZ-Nt9dpqmbbhoXIHEz0vdQ4W7BOmGKyoZw";

export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
 auth: {

   storage: AsyncStorage,
   autoRefreshToken: true,
   persistSession: true,
   detectSessionInUrl: false,
 },
});
</pre>
<h3 id="supabase-react-native">在React Native中使用Supabase</h3>
<p>为了让Supabase实例与React Native一起工作，我们将安装两个包:<a href="https://www.npmjs.com/package/react-native-url-polyfill">React-Native-URL-poly fill/auto</a>和<a href="https://www.npmjs.com/package/@react-native-async-storage/async-storage">@ React-Native-async-storage/async-storage</a>。</p>
<p>现在，我们将在Supabase项目应用程序中创建一个<code>todo</code>表格，方法是在表格编辑器选项卡中单击<strong>创建一个新表格</strong>。我们将有两列:<code>tasks</code>和<code>created_at</code>。它应该是这样的:</p>
<p><img data-attachment-id="157013" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-app-tasks/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks.png" data-orig-size="730,396" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend tasks one" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks.png" decoding="async" class="aligncenter size-full wp-image-157013 jetpack-lazy-image" src="../Images/7b0771cb23578a51ad8062a333699586.png" alt="React Native Backend Tasks One" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks-300x163.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157013" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-app-tasks/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks.png" data-orig-size="730,396" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend tasks one" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157013" src="../Images/7b0771cb23578a51ad8062a333699586.png" alt="React Native Backend Tasks One" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks-300x163.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-tasks.png"/></noscript>
<p><img data-attachment-id="157015" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/enable-rls-react-native/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native.png" data-orig-size="730,134" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend tasks two" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native-300x55.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native.png" decoding="async" class="aligncenter size-full wp-image-157015 jetpack-lazy-image" src="../Images/d8b63dc9ed2f9bcaffbcda9cafb6c78f.png" alt="React Native Backend Tasks Two" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native-300x55.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157015" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/enable-rls-react-native/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native.png" data-orig-size="730,134" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend tasks two" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native-300x55.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157015" src="../Images/d8b63dc9ed2f9bcaffbcda9cafb6c78f.png" alt="React Native Backend Tasks Two" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native-300x55.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/enable-rls-react-native.png"/></noscript>
<p>此外，禁用<code>RLS</code>策略来无限制地调用数据库。你可以在这里阅读更多关于行级安全<a href="https://supabase.com/docs/learn/auth-deep-dive/auth-row-level-security">的内容。可以从表中手动创建新的数据行，如下所示:</a></p>
<p><img data-attachment-id="157017" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/adding-to-do/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do.png" data-orig-size="730,398" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend part three" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do.png" decoding="async" class="aligncenter size-full wp-image-157017 jetpack-lazy-image" src="../Images/57092c1986926a14c91ffa4d58ad3acf.png" alt="React Native Backend Part Three" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do-300x164.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157017" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/adding-to-do/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do.png" data-orig-size="730,398" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend part three" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do-300x164.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157017" src="../Images/57092c1986926a14c91ffa4d58ad3acf.png" alt="React Native Backend Part Three" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do-300x164.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/adding-to-do.png"/></noscript>
<p><img data-attachment-id="157025" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/supabase-table-edit/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit.png" data-orig-size="730,139" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native with Supabase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit-300x57.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit.png" decoding="async" class="aligncenter size-full wp-image-157025 jetpack-lazy-image" src="../Images/ed4961f725b1e547f3890816ff18f2f2.png" alt="React Native With Supabase" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit-300x57.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157025" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/supabase-table-edit/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit.png" data-orig-size="730,139" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native with Supabase" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit-300x57.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157025" src="../Images/ed4961f725b1e547f3890816ff18f2f2.png" alt="React Native With Supabase" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit-300x57.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-table-edit.png"/></noscript>
<h3 id="to-do-task-supabase">创建待办任务</h3>
<p>为了创建一个新任务，我们将创建一个新的<code>AddTodo.js</code>文件，并从我们的应用程序接口调用端点来创建一个新任务。创建一个<code>todo</code>状态来存储在<code>TextInput</code>中输入的文本。</p>
<p>在<code>Supabase</code>实例上将调用<code>insert</code>方法，在<code>TextInput</code>中输入的<code>todo</code>文本将作为<code>tasks</code>字段的值被传递，如下所示:</p>
<pre class="language-javascript hljs">// this is a javascript file
import { StyleSheet, Text, TextInput, Button, View } from "react-native";
import React, { useState } from "react";
import { supabase } from "../../lib/supabase";

const AddTodo = () =&gt; {
 const [todo, setTodo] = useState("");

 const handleSubmit = async (e) =&gt; {
   e.preventDefault();

   setLoading(true);
   const { data, error } = await supabase.from("todo").insert([
     {
       tasks: todo,
     },
   ]);

   setTodo("");
 };
 return (
   &lt;View&gt;
     &lt;TextInput
       placeholder="Add Todo Tasks"
       value={todo}
       onChangeText={(e) =&gt; setTodo(e)}
       style={styles.input}
     /&gt;
     &lt;Button title="Add Todo Tasks" onPress={handleSubmit} /&gt;
   &lt;/View&gt;
 );
};

export default AddTodo;

const styles = StyleSheet.create({
 input: {
   height: 40,
   width: 200,
   margin: 12,
   borderWidth: 1,
   padding: 10,
 },
});
</pre>
<p><img data-attachment-id="157029" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/supabase-react-native-backend-apps/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps.png" data-orig-size="730,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native and Supabase app on mobile" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps-300x200.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps.png" decoding="async" class="aligncenter size-full wp-image-157029 jetpack-lazy-image" src="../Images/5c62eea6adfaaf07eda793eba8b3d462.png" alt="React Native and Superbase App on Mobile" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps-300x200.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157029" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/supabase-react-native-backend-apps/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps.png" data-orig-size="730,487" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native and Supabase app on mobile" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps-300x200.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157029" src="../Images/5c62eea6adfaaf07eda793eba8b3d462.png" alt="React Native and Superbase App on Mobile" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps-300x200.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/supabase-react-native-backend-apps.png"/></noscript>
<h2 id="building-custom-react-native-backend">构建自定义React本机后端</h2>
<p>在教程的第一部分，我们学习了如何将React Native连接到Supabase这样的自托管解决方案。现在，我们将学习如何创建自己的后端服务器，并在前端将其与React Native连接。对于这一部分，我们将使用<a href="https://blog.logrocket.com/node-js-vs-python-how-to-choose-the-best-technology-develop-backend/"> Node.js </a>作为后端，使用<a href="https://www.mongodb.com/"> MongoDB </a>作为数据库，创建一个简单的锻炼应用程序。</p>
<p>首先，我们将创建前端<code>client</code>和后端<code>server</code>文件夹。接下来，我们将导航到<code>client</code>文件夹，并通过在项目文件夹的终端中运行<code>npx react-native init RNWorkout</code>来初始化一个React Native CLI应用程序。这将搭建构建所需的起始项目文件。</p>
<p>对于后端，我们将使用<code>cd/server</code>命令进入目录，并在终端中运行<code>npm init -y</code>命令。这将启动我们的Node.js后端服务，我们将创建一个<code>app.js</code>基础文件。现在，我们将安装所需的依赖项:<code>npm i nodemon express mongoose cors dotenv</code>。</p>
<p>在<code>app.js</code>中，我们将设置一个基本的<a href="https://blog.logrocket.com/organizing-express-js-project-structure-better-productivity/"> Express.js </a>服务器来监听<code>port 3000</code>。这就是我们的<code>server/ap.js</code>的样子:</p>
<pre class="language-javascript hljs">// this is a javascript file
const express = require("express");
const app = express();
// listen on port 3000
app.listen(3000, () =&gt; {
 console.log("Server is listening on port 3000");
});
</pre>
<p>然后，在我们的<code>package.json</code>文件中，我们将设置一个新的<code>script</code>，当我们运行下面的命令时，它将启动服务器:</p>
<pre class="language-json hljs"> "scripts": {
   "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
   "start": "nodemon app.js"
 },
</pre>
<p>基本上，我们设置了一个<code>start script</code>来运行<code>app.js</code>文件，每当我们在终端中运行命令<code>npm run start</code>时，如下所示:</p>
<p><img data-attachment-id="157037" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-server-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1.png" data-orig-size="730,262" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native server port" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1-300x108.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1.png" decoding="async" class="aligncenter size-full wp-image-157037 jetpack-lazy-image" src="../Images/749b497ce484dfb70bed79df5fc9b611.png" alt="React Native Server Port" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1-300x108.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157037" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-server-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1.png" data-orig-size="730,262" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native server port" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1-300x108.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157037" src="../Images/749b497ce484dfb70bed79df5fc9b611.png" alt="React Native Server Port" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1-300x108.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-1.png"/></noscript>
<p>现在，我们已经成功地设置了我们的服务器，它正在监听<code>port 3000</code>。</p>
<h3 id="connecting-database">将数据库连接到后端</h3>
<p>要开始，导航到<a href="https://cloud.mongodb.com"> MongoDB Cloud </a>登录或注册。登录后，创建并命名一个新的组织和项目，然后选择一个<strong>空闲集群</strong>:</p>
<p><img data-attachment-id="157033" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-mongodb-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1.png" data-orig-size="730,193" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend with MongoDB part one" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1-300x79.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1.png" decoding="async" class="aligncenter size-full wp-image-157033 jetpack-lazy-image" src="../Images/eb6c8052de499daebbc34a8d8fc50d32.png" alt="React Native Backend With MongoDB Part One" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1-300x79.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157033" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-mongodb-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1.png" data-orig-size="730,193" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend with MongoDB part one" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1-300x79.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157033" src="../Images/eb6c8052de499daebbc34a8d8fc50d32.png" alt="React Native Backend With MongoDB Part One" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1-300x79.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-1.png"/></noscript>
<p><img data-attachment-id="157041" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-mongodb-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2.png" data-orig-size="730,167" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend with MongoDB part two" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2-300x69.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2.png" decoding="async" class="aligncenter size-full wp-image-157041 jetpack-lazy-image" src="../Images/9e0f5146fa7d56e1af29752390e5819a.png" alt="React Native Backend With MongoDB Part Two" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2-300x69.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157041" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-mongodb-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2.png" data-orig-size="730,167" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend with MongoDB part two" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2-300x69.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157041" src="../Images/9e0f5146fa7d56e1af29752390e5819a.png" alt="React Native Backend With MongoDB Part Two" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2-300x69.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-2.png"/></noscript>
<p>一旦您成功创建了一个新项目，您将有一个仪表板，您可以在其中获取连接字符串以将您的数据库连接到您的应用程序。点击<strong>连接</strong>按钮并选择<strong>连接您的应用程序</strong>以获得您的连接字符串。</p>
<p>然后，复制这个字符串并创建一个<code>.env</code>文件和变量名<code>MONGODB_URI</code>。接下来，像这样存储这个字符串:</p>
<p><img data-attachment-id="157050" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-mongodb-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3.png" data-orig-size="730,642" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Connecting MongoDB to the React Native backend" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3-300x264.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3.png" decoding="async" class="aligncenter size-full wp-image-157050 jetpack-lazy-image" src="../Images/e54bcf3116d12f12d4fd5ee710e7ce57.png" alt="Connecting MongoDB to the React Native Backend" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3-300x264.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157050" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-mongodb-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3.png" data-orig-size="730,642" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Connecting MongoDB to the React Native backend" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3-300x264.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157050" src="../Images/e54bcf3116d12f12d4fd5ee710e7ce57.png" alt="Connecting MongoDB to the React Native Backend" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3-300x264.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-mongodb-3.png"/></noscript>
<h3><code>server/.env</code></h3>
<pre class="language-shell hljs">MONGODB_URI=mongodb+srv:******************
</pre>
<blockquote><p>注意:记得创建一个<code>.gitignore</code>文件，并包含<code>.node_modules</code>和<code>.env</code>文件，这样它就不会被推送到存储库中</p></blockquote>
<h3><code>server/.gitignore</code></h3>
<pre class="language-shell hljs">node_modules
.env
</pre>
<p>现在，我们将在<code>app.js</code>文件中将数据库连接到我们的应用程序。首先，我们将需要<code>mongoose</code>模块并使用<code>mongoose.connect</code>方法连接我们的<code>MONGODB_URI</code>。如果我们的数据库已经成功连接，我们还将在<code>console</code>中记录一个<code>text</code>，如下所示:</p>
<pre class="language-javascript hljs">// this is a javascript file
const express = require("express");
const mongoose = require("mongoose");
const app = express();

// implement dot env to read env variables
require("dotenv").config();

// connect mongodb with mongoose
mongoose
 .connect(process.env.MONGODB_URI, {
   useNewUrlParser: true,
   useUnifiedTopology: true,
 })
 .then(() =&gt; {
   console.log("Connected to MongoDB");
 })
 .catch((err) =&gt; console.log(err));
</pre>
<p>一旦我们启动服务器，我们的服务器应该在<code>port 3000</code>成功运行，并且应该在我们的终端上显示一个显示<code>"Connected to MongoDB"</code>的文本:</p>
<p><img data-attachment-id="157054" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-server/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server.png" data-orig-size="730,105" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend connected to MongoDB" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-300x43.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server.png" decoding="async" class="aligncenter size-full wp-image-157054 jetpack-lazy-image" src="../Images/70bbafcf8a006973efa7f19fedd311bd.png" alt="React Native Backend Connected to MongoDB" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-300x43.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157054" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-server/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server.png" data-orig-size="730,105" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend connected to MongoDB" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-300x43.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157054" src="../Images/70bbafcf8a006973efa7f19fedd311bd.png" alt="React Native Backend Connected to MongoDB" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server-300x43.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-server.png"/></noscript>
<p>不错！我们已经成功地将服务器与数据库连接起来。</p>
<h3 id="creating-workout-schema">创建锻炼计划</h3>
<p>现在，我们将创建一个名为<code>models</code>的新文件夹和一个<code>Workout.js</code>文件来定义我们所有的<code>schemas</code>。我们会有三个<code>schemas</code>道具:<code>title</code>、<code>reps</code>和<code>load</code>。</p>
<p>所有的<code>schema</code>道具(<code>title</code> : <code>String</code>，<code>reps</code>，<code>load</code> : <code>Number</code>)都会设置<code>Properties</code>类型和<code>required</code>。</p>
<p>每当我们想要执行任何CRUD操作时，都会调用这里创建的<code>Schema</code>:</p>
<pre class="language-javascript hljs">// this is a javascript file
const mongoose = require("mongoose");

const WorkoutSchema = new mongoose.Schema({
 title: {
   type: String,
   required: true,
 },
 reps: {
   type: Number,
   required: true,
 },
 load: {
   type: Number,
   required: true,
 },
 // add created at
 createdAt: {
   type: Date,
   default: Date.now,
 },
});

module.exports = mongoose.model("Workout", WorkoutSchema);
</pre>
<h3 id="designing-api-endpoint">设计API端点</h3>
<p>下面是设计API端点的<code>server/app.js</code>:</p>
<pre class="language-javascript hljs">// this is a javascript file
app.post("/create", async (req, res) =&gt; {
 const title = req.body.title;
 const reps = req.body.reps;
 const load = req.body.load;
 const workout = new WorkoutModel({
   title: title,
   reps: reps,
   load: load,
 });
 try {
   await workout.save();
   res.status(201).json({
     message: "Workout created",
     workout,
   });
 } catch (error) {
   console.log(error);
 }
});
</pre>
<p>对于<code>create workout</code>端点，我们将把<code>schema</code>数据存储在一个变量中，并在端点被调用时创建一个新的<code>schema</code>模型。</p>
<p>然后，当<code>request body</code>完成后，我们保存数据库中设计的健身程序，并返回一个已创建健身程序详细信息的<code>JSON</code>对象和一条成功消息。下面是邮递员中的<a href="https://blog.logrocket.com/how-automate-api-tests-postman/">测试:</a></p>
<p><img data-attachment-id="157058" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-postman-testing-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1.png" data-orig-size="730,522" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native Postman testing" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1-300x215.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1.png" decoding="async" class="aligncenter size-full wp-image-157058 jetpack-lazy-image" src="../Images/f3e09b6eeac846448399dc5b40cef41a.png" alt="React Native Postman Testing" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1-300x215.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157058" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-postman-testing-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1.png" data-orig-size="730,522" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native Postman testing" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1-300x215.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157058" src="../Images/f3e09b6eeac846448399dc5b40cef41a.png" alt="React Native Postman Testing" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1-300x215.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-1.png"/></noscript>
<p>现在，当我们对所有的<code>workouts</code>发出一个<code>get</code>请求时，我们应该有一个数据的<code>Array</code>:</p>
<p><img data-attachment-id="157060" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-postman-testing-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2.png" data-orig-size="730,544" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native Postman testing part two" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2-300x224.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2.png" decoding="async" class="aligncenter size-full wp-image-157060 jetpack-lazy-image" src="../Images/880610b14c8539184662fd16af8e917a.png" alt="React Native Postman Testing Part Two" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2-300x224.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157060" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-postman-testing-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2.png" data-orig-size="730,544" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native Postman testing part two" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2-300x224.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157060" src="../Images/880610b14c8539184662fd16af8e917a.png" alt="React Native Postman Testing Part Two" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2-300x224.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-postman-testing-2.png"/></noscript>
<h2 id="connecting-backend-react-native-app">将后端服务器连接到React本地应用程序</h2>
<p>我们已经成功创建了React本地后端服务，现在可以请求在前端执行操作了。首先，我们将创建两个文件夹:<code>src</code>和<code>components</code>。</p>
<p>我们的<code>App.js</code>会是这样的:</p>
<pre class="language-javascript hljs">// this is a javascript file
import {StyleSheet, Text, View} from 'react-native';
import React from 'react';
const App = () =&gt; {
 return (
   &lt;View style={styles.container}&gt;
     &lt;Text&gt;List of my workouts&lt;/Text&gt;
       &lt;/View&gt;
 );
};

export default App;

const styles = StyleSheet.create({
 container: {
   flex: 1,
   backgroundColor: '#fff',
   alignItems: 'center',
   justifyContent: 'center',
 },
});
</pre>
<p>我们的模拟器/仿真器将如下所示:</p>
<p><img data-attachment-id="157063" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-backend-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app.png" data-orig-size="730,1664" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Connected React Native backend app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-132x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-449x1024.png" decoding="async" class="aligncenter wp-image-157063 size-large jetpack-lazy-image" src="../Images/5b46eeb5fcbcc9f7839656fd312d0966.png" alt="Connected React Native Backend App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-449x1024.png 449w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-132x300.png 132w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-674x1536.png 674w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app.png 730w" data-lazy-sizes="(max-width: 449px) 100vw, 449px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-449x1024.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-449x1024.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157063" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-backend-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app.png" data-orig-size="730,1664" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Connected React Native backend app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-132x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-449x1024.png" decoding="async" loading="lazy" class="aligncenter wp-image-157063 size-large" src="../Images/5b46eeb5fcbcc9f7839656fd312d0966.png" alt="Connected React Native Backend App" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-449x1024.png 449w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-132x300.png 132w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-674x1536.png 674w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app.png 730w" sizes="(max-width: 449px) 100vw, 449px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-backend-app-449x1024.png"/></noscript>
<p>React Native不允许<code>localhost</code>与不在互联网上托管的后端进行连接和网络请求。因为我们仍然在开发中运行我们的后端服务器，如果我们使用<code><a href="https://localhost:3000/workouts">https://localhost:3000/workouts</a></code>向任何后端端点发出请求，它将总是返回一个错误，说<code>Network Error/ Axios Network Error</code>。</p>
<p>要解决这个问题，右键单击您用于构建的<strong> Wi-Fi </strong>或<strong> LAN </strong>图标。然后，检查网络属性以获取您所连接的IP地址。</p>
<h3>在macOS上</h3>
<p>点击<strong>苹果图标</strong>–<strong>系统偏好</strong>–<strong>网络</strong>。从那里，您应该看到您的IP地址:</p>
<p><img data-attachment-id="157065" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-app-connected/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected.png" data-orig-size="730,187" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend application connected" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected-300x77.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected.png" decoding="async" class="aligncenter size-full wp-image-157065 jetpack-lazy-image" src="../Images/86622f1207cfe06ecf0cd88bb3667b22.png" alt="React Native Backend Application Connected" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected-300x77.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="157065" data-permalink="https://blog.logrocket.com/choosing-connecting-react-native-backend/attachment/react-native-app-connected/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected.png" data-orig-size="730,187" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Native backend application connected" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected-300x77.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-157065" src="../Images/86622f1207cfe06ecf0cd88bb3667b22.png" alt="React Native Backend Application Connected" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected-300x77.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/react-native-app-connected.png"/></noscript>
<h3>在Windows上</h3>
<p>右键点击<strong> Wi-Fi/LAN图标</strong>–<strong>打开网络和互联网设置</strong>–<strong>状态</strong>–<strong>Wi-Fi</strong>–<strong>属性</strong>–<strong>IP地址</strong></p>
<p><a href="https://blog.logrocket.com/axios-vs-fetch-best-http-requests/"> Axios </a>将用于向后端服务发出请求，后端服务可以使用<code>npm i axios</code>命令安装。</p>
<h2>结论</h2>
<p>我们已经成功地学会了如何选择和连接，以对Supabase和Firebase等自托管解决方案做出本机反应。我们还学习了如何使用Node.js和MongoDB创建定制的React本地后端服务。选择哪个React本地后端服务取决于偏好和用例。</p>
<p>在某些情况下，您可能希望构建一些简单快捷的东西。在这种情况下，Supabase可能是首选。然而，当您想要完全控制您的后端服务时，创建您自己的定制后端服务可能是最好的选择。你可以在这里查看整个GitHub库。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>