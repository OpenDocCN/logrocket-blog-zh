<html>
<head>
<title>Creating hover events with SyntheticEvent and React Hover - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>创建悬停事件与合成事件和反应悬停-日志火箭博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/creating-hover-events-synthetic-event-react-hover/#0001-01-01">https://blog.logrocket.com/creating-hover-events-synthetic-event-react-hover/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<p>您可以通过使用原生 CSS <code>:hover</code>选择器在 React 中实现基本的悬停事件，但是您可能会遇到两个限制:</p>
<ol>
<li>您不能通过 JavaScript 修改或更改实际的<code>:hover</code>选择器</li>
<li>你不能用它来显示悬停时的其他组件</li>
</ol>
<p>本文解释了在 React 中克服这些限制的两种替代方法。第一个将利用 React <code>SyntheticEvent</code>支持的两个事件处理程序，第二个使用一个名为 React Hover 的 npm 库。后者允许你在鼠标悬停时显示其他组件。</p>
<h2>React 中事件的快速概述</h2>
<p>React 处理通常用普通 JavaScript 编写的事件，但有一些关键的区别:</p>
<ul>
<li>事件处理程序使用 camel-case 约定命名。例如，<code>onclick</code>变成了<code>onClick</code></li>
<li>您不能像在 JavaScript 中那样返回<code>false</code>来阻止默认行为；相反，您必须显式调用<code>preventDefault</code></li>
<li>您的事件处理程序接收<code>SyntheticEvent</code>的实例</li>
</ul>
<h2>什么是<code>SyntheticEvent</code>？</h2>
<p>是 React 的跨浏览器包装器，它包装了浏览器的原生事件，允许您的事件在所有浏览器上同样工作。</p>
<h3>支持的事件</h3>
<p>React 支持一系列的<code>SyntheticEvent</code>类型，但是对于本文，我们主要关注的是<a href="https://reactjs.org/docs/events.html#mouse-events" target="_blank" rel="noopener">鼠标事件</a>。</p>
<p>下一个代码块中列出了可用的鼠标事件。当您通读它们时，您会注意到没有允许您创建悬停事件的<code>onHover</code>。</p>
<pre>onClick onContextMenu
onDoubleClick onDrag
onDragEnd onDragEnter
onDragExit onDragLeave
onDragOver onDragStart
onDrop onMouseDown
onMouseEnter onMouseLeave
onMouseMove onMouseOut
onMouseOver onMouseUp</pre>
<p>这就是我们在这里要讨论的——幸运的是，有一个变通办法。</p>
<p>让我们在下一节看看这个。</p>
<h2>如何使用<code>SyntheticEvent</code>创建悬停事件</h2>
<p>在这一节中，我将演示如何使用 React 的<code>SyntheticEvent</code>支持的两个事件处理程序来创建悬停事件。他们是<code>onMouseEnter</code>和<code>onMouseLeave</code>。</p>
<p>在这个演示中，您将<a href="https://blog.logrocket.com/controlling-tooltips-pop-up-menus-using-compound-components-in-react" target="_blank" rel="noopener">创建一个工具提示</a>，这是一个 UI 元素，当用户将鼠标悬停在网页元素上时，它的内容就会显示出来。</p>
<h3>创建反应工具提示</h3>
<p>首先，如果您还没有 React 项目，那么您需要建立一个 React 项目。您可以在 CodeSandbox 上创建一个 React 项目，也可以使用 Create React App 设置一个本地项目。</p>
<p>对于本文，我将选择后者。</p>
<pre>npm install create-react-app</pre>
<p>安装完成后，请执行以下操作:</p>
<ol>
<li>删除<code>App.js</code>和<code>index.css</code>的内容</li>
<li>在<code>src</code>文件夹中创建两个文件夹，命名为<code>css</code>和<code>component</code></li>
<li>在<code>css</code>文件夹中，创建名为<code>Tooltip.css</code>的新文件</li>
<li>找到之前创建的<code>component</code>文件夹，创建一个名为<code>Tooltip.js</code>的新文件</li>
</ol>
<p>现在，在<code>Tooltip.js</code>中，让我们写一些代码。我们将在本文的后面为<code>Tooltip.css</code>编写代码。</p>
<p>因为 React 允许您编写基于组件的代码，所以主要工具提示功能的代码实际上是一个组件。</p>
<p>下一个代码块从<code>React</code>导入<code>React</code>、<code>useState</code>，以及我们之前创建的<code>css</code>文件。当用户选择查看工具提示时，您将需要<code>useState</code>来管理应用程序的状态。</p>
<pre>// src/components/Tooltip.js
​
import React, { useState } from 'react'
import '../css/Tooltip.css'</pre>
<p>有了这些导入语句，您就可以开始编写实现工具提示核心功能的代码了。这个核心功能将驻留在一个名为<code>Tooltip</code>的组件中，它是一个返回数据的函数。</p>
<p>在本例中，它是一个箭头函数。</p>
<pre>// src/components/Tooltip.js
import React, { useState } from 'react'
import '../css/Tooltip.css'
​
const Tooltip = (props) =&gt; {
   // All the code that will make the
   // tooltip work resides here
}</pre>
<p>在<code>Tooltip</code>组件中，您将执行以下操作:</p>
<ol>
<li>设置一个计时器来确定工具提示显示和隐藏的时间间隔</li>
<li>使用<code>useState</code>设置状态</li>
<li>写一个函数来显示工具提示</li>
<li>写一个函数来隐藏工具提示</li>
<li>返回 JSX，其中包含一个单亲 HTML 元素及其子元素。这个父 HTML 元素会附加有<code>onMouseEnter</code>和<code>onMouseLeave</code>事件处理程序</li>
<li>编写<code>onMouseEnter</code>的参数，它将是显示工具提示的函数</li>
<li>编写<code>onMouseLeave</code>的参数，它将是隐藏工具提示的函数</li>
<li>定义子元素；也就是说，工具提示内容将有一个类名和属性，它们将通过 CSS 进行样式化</li>
</ol>
<p>所有这些步骤都包含在下一个代码块中。</p>
<pre>// src/components/Tooltip.js
// Code truncated, check the previous
// code block.
const Tooltip = (props) =&gt; {
   // All the code that will make the
   // tooltip work resides here
   
   // Set up timer and state
   let TooltipTimeout;
   const [activeToolTip, setActiveToolTip] = useState(false);
   
   // Write a function to show the tooltip
   const showToolTip = () =&gt; {
       TooltipTimeout = setTimeout(() =&gt; {
           setActiveToolTip(true);
      }, props.delay || 300);
  };
   
   // Write a function to hide the tooltip
   const hideToolTip = () =&gt; {
       setActiveToolTip(false);
       clearInterval(TooltipTimeout);
  };
   
   // Return JSX which contains the HTML
   // data for the tooltip
   
   // Note the usage of the 2 supported event handlers
   // mentioned earlier in this article. They make
   // it is possible to create the hover event in React.
   return (
       &lt;div
           className="Tooltip-Container"
           onMouseEnter={showToolTip}
           onMouseLeave={hideToolTip}
       &gt;
           
          {props.children}
​
          {activeToolTip &amp;&amp; (
               &lt;div className={`Tooltip-Content ${props.direction} || "top"}`}&gt;
                   {props.content}
               &lt;/div&gt;
           )}
           
       &lt;/div&gt;
   );
};
​
// Export the tooltip
export default Tooltip</pre>
<p>工具提示现在可以使用了，但是在我们可以部署它之前，我们需要将它导入到<code>App.js</code>(或者任何其他您会发现它有用的组件)。</p>
<p>下一个代码块完成了这个任务:</p>
<pre>// App.js
​
import React from "react"
import Tooltip from './components/Tooltip';
import './index.css';
​
const App = () =&gt; {
return (
  &lt;div className="App"&gt;
    &lt;div className="tooltip-wrapper"&gt;
      &lt;Tooltip content="I am a tooltip" direction="top"&gt;
        Hover your mouse here
      &lt;/Tooltip&gt;
    &lt;/div&gt;
  &lt;/div&gt;
)
}
​
export default App</pre>
<p>现在我们可以开始造型了。</p>
<h2>设计我们的反应工具提示</h2>
<p>切换到<code>Tooltip.css</code>文件，并编写以下内容:</p>
<pre>/* css/Tooltip.css */
​
/**
* The CSS class name starts with a
* capital letter to indicate it's a
* component.
*/
.Tooltip-Container {
   position: relative;
   display: inline-block;
}
​
.Tooltip-Content {
   position: absolute;
   left: 50%;
   padding: 8px;
   color: #ffffff;
   background: #1a1a1a;
   font-size: 0.85em;
   border-radius: 6px;
   transform: translateX(-50%);
   z-index: 1;
   white-space: nowrap;
}
​
.Tooltip-Content::before {
   left: 50%;
   position: absolute;
   content: " ";
   border: 6px solid transparent;
   margin-left: -6px;
}
​
.Tooltip-Content.top {
   top: -30px;
}
​
.Tooltip-Content.top::before {
   top: 100%;
   border-top-color: #1a1a1a;
}
​
/**
* The following styles are
* variations of the tooltip when you
* change the value if the "direction" attribute
* in the App component.
*/
.Tooltip-Content.right {
   top: 50%;
   left: calc(100% + 20px);
   transform: translateY(-50%);
}
​
.Tooltip-Content.right::before {
   top: 50%;
   left: -6px;
   transform: translateY(-50%);
   border-right-color: #1a1a1a;
}
​
.Tooltip-Content.bottom::before {
   bottom: 100%;
   border-bottom-color: #1a1a1a;
}
​
.Tooltip-Content.left {
   top: 50%;
   right: calc(100% + 30px);
   left: auto;
   transform: translateY(-50%);
}
​
.Tooltip-Content.left::before {
   top: 50%;
   right: -12px;
   left: auto;
   transform: translateY(-50%);
   border-left-color: #1a1a1a;
}</pre>
<p>之后，切换到<code>index.css</code>，它应该仍然是空的，并写下以下内容:</p>
<pre>/* index.css */
.App {
    font-family: "Trebuchet MS", Verdana, Geneva, Tahoma, sans-serif;
    padding-top: 16px;
    padding-right: 16px;
    padding-bottom: 120px;
    padding-left: 16px;
}
​
.tooltip-wrapper {
    padding: 16px 120px;
}</pre>
<p>现在，当您将鼠标悬停在文本“将鼠标悬停在此处”上时，工具提示会出现。当您将鼠标从文本上移开时，工具提示会消失。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>太好了！尽管 React 缺少默认的<code>onHover</code>方法，但您不仅做到了这一点，而且还利用了 React 的<code>SyntheticEvent</code> ( <code>onMouseEnter</code>和<code>onMouseLeave</code>)支持的两个事件处理程序来创建它。</p>
<p>在下一节中，我将解释如何使用名为 React Hover 的 npm 库做类似的事情。</p>
<h2>使用 React Hover 创建悬停事件</h2>
<p>正如其官方 npm 页面所述，“React Hover 允许你将任何东西变成‘可悬浮’的物体。”这个“任何东西”都可以是普通的 HTML 或应用程序中的另一个组件。</p>
<p>在我们深入 React Hover 的语法及其工作原理之前，让我们安装它。</p>
<pre>npm install --save react-hover</pre>
<p>以上命令将 React Hover 安装在您当前的项目目录中。您可以通过检查您的<code>package.json</code>文件来验证其安装是否成功。</p>
<p>现在，关于语法。</p>
<h3>React 悬停语法</h3>
<p>React Hover 为创建“可悬停”对象提供了以下选项:</p>
<ul>
<li><code>&lt;ReactHover&gt;</code>:你将把它包在两个东西上，它们是<code>&lt;Trigger&gt;</code>和<code>&lt;Hover&gt;</code>组件</li>
<li><code>&lt;Trigger&gt;</code>:这是<code>&lt;Trigger&gt;</code>组件的包装器</li>
<li><code>&lt;Hover&gt;</code>:这是<code>&lt;Hover&gt;</code>组件的包装器</li>
<li><code>options</code>:这是<code>&lt;ReactHover&gt;</code>的一个属性，它的值是一个对象，当你把光标移到<code>&lt;Trigger&gt;</code>组件上时，这个对象决定了<code>&lt;Hover&gt;</code>组件的行为和位置。该对象接受以下三个属性:<ul>
<li><code>followCursor</code>:接受一个布尔值，该值决定当您将光标移动到<code>&lt;Trigger&gt;</code>组件上时<code>&lt;Hover&gt;</code>组件是否会跟随光标</li>
<li><code>shiftX</code>:确定<code>&lt;Hover&gt;</code>组件沿 X 轴的位置，即左或右</li>
<li><code>shiftY</code>:这决定了<code>&lt;Hover&gt;</code>组件沿 Y 轴的位置，即顶部或底部</li>
</ul>
</li>
<li><code>type</code>:该属性将组件标识为触发器或悬停；因此，对于触发组件，它的值是<code>&lt;Trigger&gt;</code>，对于悬停组件，它的值是<code>&lt;Hover&gt;</code></li>
</ul>
<p>旁注:如果你更喜欢使用纯 HTML 而不是组件，那么分别在<code>&lt;Trigger&gt;</code>和<code>&lt;Hover&gt;</code>中直接编写 HTML 代码。</p>
<h3>实现 React 悬停</h3>
<p>好了，说够了——是时候写点代码了！</p>
<p>在您的组件文件夹中创建两个文件，即<code>TriggerComponent.js</code>和<code>HoverComponent.js</code>。切换到您的编辑器，在<code>TriggerComponent.js</code>中键入下一个代码块:</p>
<pre>// components/TriggerComponent.js
​
import React from 'react'
​
const TriggerComponent = () =&gt; {
   return (
       &lt;p&gt;Hover on me&lt;/p&gt;
  )
}
​
export default TriggerComponent</pre>
<p>接下来，切换到<code>HoverComponent.js</code>并键入以下内容:</p>
<pre class="prettyprint">// components/HoverComponent.js
​
import React from 'react'
​
const HoverComponent = () =&gt; {
   return (
       &lt;p&gt;I am a hover component.&lt;/p&gt;
  )
}

export default HoverComponent</pre>
<p>设置好这些文件后，您可以在<code>App.js</code>或应用程序中的任何其他位置使用它们。请注意，在<code>App.js</code>中，您将编写传递给<code>options</code>属性的对象。如前所述，当光标移动到<code>&lt;Trigger&gt;</code>组件上时，该对象将决定被悬停组件的行为。</p>
<p>也就是说，在下一个代码块中，我们将继续使用<code>App.js</code>:</p>
<pre>// App.js
​
import React from 'react'
import ReactHover, { Trigger, Hover } from 'react-hover'
import TriggerComponent from './components/TriggerComponent'
import HoverComponent from './components/HoverComponent'
​
// Set the option that determines the position
// and behavior of the hover component
const OptionsCursorTrueWithMargins = {
   followCursor: true,
   shiftX: 20,
   shiftY: 0
}
​
// The App function
const App = () =&gt; {
   return (
       &lt;ReactHover options={OptionsCursorTrueWithMargins}&gt;
           &lt;Trigger type="trigger"&gt;
               &lt;TriggerComponent /&gt;
           &lt;/Trigger&gt;
           
           &lt;Hover type="hover"&gt;
               &lt;HoverComponent /&gt;
           &lt;/Hover&gt;
       &lt;/ReactHover&gt;
  )
};
​
export default App</pre>
<p>保存您的文件，添加一些样式以满足您的需要，然后在您的 Web 浏览器中进行测试。你应该有类似下面 GIF 的东西。</p>
<p><img data-attachment-id="58134" data-permalink="https://blog.logrocket.com/creating-hover-events-synthetic-event-react-hover/react-hover-result-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-hover-result-demo.gif" data-orig-size="730,216" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-hover-result-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-hover-result-demo-300x89.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-hover-result-demo.gif" decoding="async" class="aligncenter size-full wp-image-58134 jetpack-lazy-image" src="../Images/58954b872c831ade12d6b6663eeabac1.png" alt="React Hover result demo" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/react-hover-result-demo.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/react-hover-result-demo.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="58134" data-permalink="https://blog.logrocket.com/creating-hover-events-synthetic-event-react-hover/react-hover-result-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-hover-result-demo.gif" data-orig-size="730,216" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-hover-result-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-hover-result-demo-300x89.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-hover-result-demo.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-58134" src="../Images/58954b872c831ade12d6b6663eeabac1.png" alt="React Hover result demo" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/react-hover-result-demo.gif"/></noscript>
<h2>结论</h2>
<p>当您打算在 React 中创建悬停事件时，本文涵盖了两个可用的好选项。第一个选项利用了 React 的<code>SyntheticEvent</code>支持的两个事件处理程序，第二个选项包含了<a href="https://www.npmjs.com/package/react-hovernpm" target="_blank" rel="noopener"> React Hover </a>，这是一个可以在 npm 注册表上获得的 JavaScript 库。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产 React 应用</h2><p>调试 React 应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪 Redux 状态、自动显示 JavaScript 错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的 web 和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket 不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试 React 应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>