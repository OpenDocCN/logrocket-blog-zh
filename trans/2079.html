<html>
<head>
<title>Build an ecommerce site with SvelteKit and the Shopify Storefront API - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用 SvelteKit 和 Shopify Storefront API - LogRocket 博客建立一个电子商务网站</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/#0001-01-01">https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/#0001-01-01</a></blockquote><div><article class="article-post">
<p>如果你一直关注 headless 商业生态系统，你会在社区中听到一些关于更新的 Shopify Storefront API 的讨论。该 API 允许商店所有者将他们的 Shopify 商店用作后端服务，以支持他们选择的任何前端应用程序。</p>
<p/>
<p>这意味着你可以拥有一个拥有你所有产品的 Shopify 商店，然后用你选择的任何前端工具(如 React、Vue、Angular、Next.js、Nuxt 等)构建你的定制电子商务网站。这使您可以通过移动应用程序、在线游戏和网络应用程序等其他渠道在您的 Shopify 商店中销售产品。</p>
<p>当我们看到这个公告时，我在 Netlify 的团队决定尝试一下，用它来构建一些东西。结果是五个不同的入门模板——Astro、Nuxt、Gridsome、Eleventy 和 Angular——都是用 Shopify 支持的后端商店构建的。让我们用<a href="https://blog.logrocket.com/exploring-sveltekit-the-newest-svelte-based-framework/">苗条套装</a>再造一个吧！</p>
<h2>设置 Shopify</h2>
<p>我们可能应该做的第一件事是建立一个 Shopify 商店。没有一个，所有这一切都不可能。以下是如何快速为自己设置一个:</p>

<p>如果你做到了这些，休息一下，喝杯水。然后回来加入我。让我们建造这个东西！</p>
<h2>设置苗条工具包</h2>
<p>要开始使用 SvelteKit，你可能想快速浏览一下<a href="https://kit.svelte.dev/docs#introduction-getting-started"> SvelteKit 的文档</a>，了解一下它是如何工作的。否则，请不要走开，我会带你了解建立这个网站所需要的一切。</p>
<p>使用以下命令安装并运行 SvelteKit:</p>
<pre class="language-bash hljs">npm init <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0b787d6e677f6e4b656e737f">[email protected]</a> sveltekit-shopify-demo
cd sveltekit-shopify-demo
npm install
npm run dev -- --open
</pre>
<p>这些命令将为您做几件事:</p>
<ul>
<li>为您创建一个新的 SvelteKit 项目</li>
<li>安装所需的软件包</li>
<li>在浏览器的<code>localhost:3000</code>处打开项目，如下所示:</li>
</ul>
<p><img data-attachment-id="64163" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/sveltekit-welcome/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome.png" data-orig-size="730,444" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SvelteKit welcome page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome-300x182.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome.png" decoding="async" class="size-full wp-image-64163 aligncenter jetpack-lazy-image" src="../Images/8c7be627210cde5b1e92fde263cd0e4c.png" alt="SvelteKit Welcome Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome-300x182.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64163" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/sveltekit-welcome/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome.png" data-orig-size="730,444" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SvelteKit welcome page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome-300x182.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome.png" decoding="async" loading="lazy" class="size-full wp-image-64163 aligncenter" src="../Images/8c7be627210cde5b1e92fde263cd0e4c.png" alt="SvelteKit Welcome Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome-300x182.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-welcome.png"/></noscript>
<p>好了，看起来我们都准备好开始编辑这个项目，使它看起来像我们想要建立的网站。哦，顺便说一下，这是我们正在建设的项目，如果你想看的话:</p>
<p><img data-attachment-id="68430" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/shopify-sveltekit-product-listings/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings.png" data-orig-size="730,435" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Shopify SvelteKit product listings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings.png" decoding="async" class="size-full wp-image-68430 aligncenter jetpack-lazy-image" src="../Images/35f5afe80eed44ec0babb629da3c46e6.png" alt="Shopify SvelteKit Product Listings" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings-300x179.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="68430" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/shopify-sveltekit-product-listings/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings.png" data-orig-size="730,435" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Shopify SvelteKit product listings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings.png" decoding="async" loading="lazy" class="size-full wp-image-68430 aligncenter" src="../Images/35f5afe80eed44ec0babb629da3c46e6.png" alt="Shopify SvelteKit Product Listings" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings-300x179.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-product-listings.png"/></noscript>
<p>好吧，让我们开始建吧！</p>
<h3>式样</h3>
<p>为了方便起见，我将在这个项目中使用一个全局样式文件。打开你的<code>app.css</code>文件，用<a href="https://github.com/kenny-io/sveltekit-shopify-ecommerce/blob/master/src/app.css">这个 CSS 片段更新它，用于样式化</a>。造型到此为止。我们现在需要做的就是在项目文件中引用正确的类，这个应用程序应该完全按照预期运行。</p>
<h2>从 Shopify 获取产品</h2>
<p>什么是没有产品的电子商务网站，对不对？我知道。如果您创建了您的 Shopify 帐户并向其中添加了产品，您应该能够在您的 Shopify 管理仪表板中看到您的产品列表页面。</p>
<p>这是我的。感谢我的同事<a href="https://twitter.com/Tzmanics"> Tara </a>创建了这家商店，并在里面装满了产品，这样我就可以使用它，并假装所有的工作都是我做的。</p>
<p><img data-attachment-id="64153" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/shopify-sveltekit-store-demo-products/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products.png" data-orig-size="730,585" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Store demo products" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products-300x240.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products.png" decoding="async" class="size-full wp-image-64153 aligncenter jetpack-lazy-image" src="../Images/4ee88422e7fbdd2e936a9164ba552e5b.png" alt="Store Demo Products" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products-300x240.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64153" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/shopify-sveltekit-store-demo-products/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products.png" data-orig-size="730,585" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Store demo products" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products-300x240.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products.png" decoding="async" loading="lazy" class="size-full wp-image-64153 aligncenter" src="../Images/4ee88422e7fbdd2e936a9164ba552e5b.png" alt="Store Demo Products" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products-300x240.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/shopify-sveltekit-store-demo-products.png"/></noscript>
<p>现在我们要做的是从我们的 SvelteKit 应用程序调用 API，从我们的 Shopify 商店获取所有这些产品，并在我们的应用程序上显示它们。在此之前，我们先来谈谈身份认证。</p>
<h3>证明</h3>
<p>如果知道您存储的数据受到保护并且只有您一个人可以访问，这不是很好吗？确实是。每个 Shopify 商店都有凭证，您可以使用这些凭证从其他应用程序访问它们——在本例中，是从我们的 SvelteKit 应用程序。</p>
<p>如果您还没有为您的商店生成凭证，请继续操作，<a href="https://paper.dropbox.com/doc/Build-a-super-fast-ecommerce-site-with-SvelteKit-and-Shopify-APIs--BRBH5KcdaB~GoMVDKUWO6XiiAg-9jWqsqTcufJbTPR459mNZ?noDesktopRedirect=1">现在就生成凭证</a>。回到您的 SvelteKit 项目，创建一个<code>.env</code>文件并用您的 Shopify API 密钥更新它，如下所示:</p>
<pre>VITE_SHOPIFY_STOREFRONT_API_TOKEN = "ADD_YOUR_API_TOKEN_HERE"
VITE_SHOPIFY_API_ENDPOINT = "ADD_YOUR_STORE_API_ENDPOINT_HERE"
</pre>
<h2>拿你的产品</h2>
<p>现在我们已经解决了身份验证问题，我们可以继续获取产品了。这可能是让您知道 Shopify Storefront API 仅基于 GraphQL 的好时机。这意味着没有 REST 替代方案，所以我们将定义 GraphQL 查询来与 API 交互。</p>
<p>在获取产品之前，我们需要一个地方来存储它们，以便我们可以在应用程序的其他地方使用产品数据。这就是苗条商店的用武之地。如果你想了解更多的信息，我会帮你找到——阅读链接信息。</p>
<p>在项目文件夹的根目录下创建一个<code>store.js</code>文件，并用下面的代码片段更新它:</p>
<pre>// store.js
import { writable } from 'svelte/store';
import { postToShopify } from '../src/routes/api/utils/postToShopify';

export const getProducts = async () =&gt; {
    try {
        const shopifyResponse = await postToShopify({
            query: `{
         products(sortKey: TITLE, first: 100) {
          edges {
            node {
              id
              handle
              description
              title
              totalInventory
              productType
              variants(first: 5) {
                edges {
                  node {
                    id
                    title
                    quantityAvailable
                    price
                  }
                }
              }
              priceRange {
                maxVariantPrice {
                  amount
                  currencyCode
                }
                minVariantPrice {
                  amount
                  currencyCode
                }
              }
              images(first: 1) {
                edges {
                  node {
                    src
                    altText
                  }
                }
              }
            }
          }
        }
    }
      `
        });
        return shopifyResponse;
    } catch (error) {
        console.log(error);
    }
};
</pre>
<p>好吧，那是怎么回事？让我们走一遍。首先，我们定义一个<code>getProducts</code>查询，请求我们在 Shopify 商店中的前 100 个产品。然后，我们将查询传递给我们的<code>PostToShopify</code>实用函数，该函数接受查询，添加我们的 API 密钥来认证请求，并调用 Shopify 端点。</p>
<p>但是您可能注意到<code>postToShopify</code>函数还不存在，所以让我们继续在项目<code>src/api/utils</code>文件夹中创建它。如果该文件夹不存在，您可以创建它或将该函数放在您想要的任何位置(只要确保正确引用它)。我的生活在这个目录:<code>src/routes/api/utils/postToShopify.js</code>。</p>
<p>用下面的代码片段更新文件:</p>
<pre>export const postToShopify = async ({ query, variables }) =&gt; {
    try {
        const result = await fetch(import.meta.env.VITE_SHOPIFY_API_ENDPOINT, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-Shopify-Storefront-Access-Token': import.meta.env.VITE_SHOPIFY_STOREFRONT_API_TOKEN
            },
            body: JSON.stringify({ query, variables })
        }).then((res) =&gt; res.json());
        if (result.errors) {
            console.log({ errors: result.errors });
        } else if (!result || !result.data) {
            console.log({ result });
            return 'No results found.';
        }
        return result.data;
    } catch (error) {
        console.log(error);
    }
};
</pre>
<p><em>注意，我正在使用我们之前设置的环境变量来验证我们向 Shopify 发出的请求。一定要在环境变量前加上<code>import.meta.env.</code> </em></p>
<p>完成后，我们现在可以测试我们的实现，以检查我们是否成功地从我们的 Shopify 商店获取产品。进入您的项目的<code>src/routes/index.svelte</code>,用下面的代码片段更新它:</p>
<pre>// src/routes/index.svelte
&lt;script context="module"&gt;
    import { products, getProducts } from '../../store';
    export async function load(ctx) {
        await getProducts();
        return { props: { products } };
    }
&lt;/script&gt;

&lt;script&gt;
export let products;
&lt;/script&gt;
&lt;svelte:head&gt;
    &lt;title&gt;Home&lt;/title&gt;
&lt;/svelte:head&gt;
&lt;section&gt;
&lt;h2&gt;
    {#each $products as product}
        &lt;p&gt;{product.node.title} &lt;/p&gt;
    {/each}
&lt;/h2&gt;
&lt;/section&gt;
</pre>
<p>我们现在做的是:</p>
<ul>
<li>从我们的商店获取产品数据</li>
<li>将<code>products</code>作为道具传递给索引页面</li>
<li>遍历整个产品数据并显示每个产品的名称</li>
</ul>
<p>让我们检查一下浏览器，看看是不是这样:</p>
<p><img data-attachment-id="64157" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/sveltekit-products-list-fetch/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch.png" data-orig-size="730,567" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SvelteKit products list fetch" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch-300x233.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch.png" decoding="async" class="size-full wp-image-64157 aligncenter jetpack-lazy-image" src="../Images/084ef1c87207038e856fdb38b4c96edd.png" alt="SvelteKit Products List Fetch" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch-300x233.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64157" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/sveltekit-products-list-fetch/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch.png" data-orig-size="730,567" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SvelteKit products list fetch" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch-300x233.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch.png" decoding="async" loading="lazy" class="size-full wp-image-64157 aligncenter" src="../Images/084ef1c87207038e856fdb38b4c96edd.png" alt="SvelteKit Products List Fetch" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch-300x233.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-products-list-fetch.png"/></noscript>
<p>我们确实正确地从我们的商店提取产品。</p>
<p>恭喜，我们已经完成了第一个任务。当然，我们这样做只是为了测试我们的实现。让我们创建两个组件(<code>ProductCard.svelte</code>和<code>ProductList.svelte</code>)来帮助我们以我们想要的方式组织和展示产品。</p>
<h2>创建组件来组织和展示产品</h2>
<p>在您的项目<code>src</code>文件夹中创建一个组件文件夹，并添加我上面提到的两个文件。我将这样设置它:</p>
<pre>// src/components/ProductCard.svelte
&lt;script&gt;
    export let product;
&lt;/script&gt;
&lt;section&gt;
    &lt;div class="product-card"&gt;
        &lt;div class="product-card-frame"&gt;
            &lt;a href={`/products/${product.handle}`}&gt;
                &lt;img class="prodimg" src={product.images.edges[0].node.src} alt={product.handle} /&gt;
            &lt;/a&gt;
        &lt;/div&gt;
        &lt;div class="product-card-text"&gt;
            &lt;h3 class="product-card-title"&gt;{product.title}&lt;/h3&gt;
            &lt;p class="product-card-description"&gt;{product.description.substring(0, 60) + '...'}&lt;/p&gt;
        &lt;/div&gt;
        &lt;a href={`/products/${product.handle}`}&gt;
            &lt;button&gt;View Item {"&gt;"}&lt;/button&gt;
        &lt;/a&gt;
    &lt;/div&gt;
&lt;/section&gt;
</pre>
<p>在这里，我们期待一个<code>product</code>道具，它将从我们渲染它的地方传入这个组件。当我们得到适当东西时，我们就从其中提取我们需要的不同产品细节，然后使用这些细节来构建我们的产品卡，正如您在上面的代码片段中所看到的。</p>
<p>让我们对产品列表组件做同样的事情。在<code>src/components</code>文件夹中创建一个<code>ProductList.svelte</code>文件，设置如下:</p>
<pre>// src/components/ProductList.svelte
&lt;script&gt;
    import ProductCard from '../components/ProductCard.svelte';
    export let products;
&lt;/script&gt;
&lt;div class="product-grid"&gt;
    {#each products as product}
        &lt;ProductCard product={product.node} /&gt;
    {/each}
&lt;/div&gt;
</pre>
<p>在这里，我们从我们的索引页面接收一个<code>products</code> prop(我们将在这里呈现这个组件),并遍历产品，为每个产品呈现一个产品卡。这样，我们可以转到索引页面<code>src/routes/index.svelte</code>并呈现我们的<code>productList</code>组件。用下面的代码片段更新它:</p>
<pre>// src/routes/index.svelte
&lt;script context="module"&gt;
    import { products, getProducts } from '../../store';
    export async function load(ctx) {
        await getProducts();
        const productType = ctx.page.query.get('type');
        if (productType) {
            products.update((items) =&gt; {
                const updated = items.filter((product) =&gt; product.node.productType === productType);
                return updated;
            });
        }
        return { props: { products} };
    }
&lt;/script&gt;
&lt;script&gt;
    import ProductList from '../components/ProductList.svelte';
    export let products
&lt;/script&gt;
&lt;svelte:head&gt;
    &lt;title&gt;Shoperoni&lt;/title&gt;
&lt;/svelte:head&gt;
&lt;main&gt;
   &lt;ProductList products={$products} /&gt;
&lt;/main&gt;
</pre>
<p>在这里，我们正在做以下事情:</p>
<ul>
<li>从我们的商店获取产品数据</li>
<li>基于页面查询过滤产品列表(稍后我们将在<code>Header</code>组件中使用页面查询过滤产品列表)</li>
<li>将过滤后的产品列表作为道具传递给页面</li>
<li>呈现我们的<code>ProductList</code>组件并将产品数据作为道具传递给它</li>
</ul>
<p>就是这样！当我们再次查看浏览器时，应该会看到一个更好看的产品列表页面:</p>
<p><img data-attachment-id="64155" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/sveltekit-product-listing-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page.png" data-orig-size="730,572" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SvelteKit product cards listing page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page-300x235.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page.png" decoding="async" class="size-full wp-image-64155 aligncenter jetpack-lazy-image" src="../Images/8cd03cf9a99fca6c16f92d5f9ecc42a9.png" alt="SvelteKit Product Cards Listing Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page-300x235.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64155" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/sveltekit-product-listing-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page.png" data-orig-size="730,572" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SvelteKit product cards listing page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page-300x235.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page.png" decoding="async" loading="lazy" class="size-full wp-image-64155 aligncenter" src="../Images/8cd03cf9a99fca6c16f92d5f9ecc42a9.png" alt="SvelteKit Product Cards Listing Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page-300x235.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-product-listing-page.png"/></noscript>
<h2>构建产品详细信息页面</h2>
<p>所以我们已经建立了我们的产品列表页面，太好了！如果用户点击上面截图上的<code>View Item</code>，会发生什么？目前，什么都没有。实际上，将会发生一些事情:浏览器将导航到这个路由<code>/products/[the-product-title]</code>，并且它将导致一个 404，因为那个页面还不存在。</p>
<p><img data-attachment-id="64159" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/sveltekit-shopify-product-details-page-404/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404.png" data-orig-size="730,565" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SvelteKit Shopify product details page 404" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404-300x232.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404.png" decoding="async" class="size-full wp-image-64159 aligncenter jetpack-lazy-image" src="../Images/72bd4f0fae17ad32c13b0353c7bcf554.png" alt="SvelteKit Shopify Product Details Page 404" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404-300x232.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="64159" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/sveltekit-shopify-product-details-page-404/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404.png" data-orig-size="730,565" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SvelteKit Shopify product details page 404" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404-300x232.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404.png" decoding="async" loading="lazy" class="size-full wp-image-64159 aligncenter" src="../Images/72bd4f0fae17ad32c13b0353c7bcf554.png" alt="SvelteKit Shopify Product Details Page 404" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404-300x232.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/sveltekit-shopify-product-details-page-404.png"/></noscript>
<p>要创建单独的产品页面，让我们更新我们的<code>store.js</code>文件并添加另一个查询，该查询将获取我们的产品句柄并使用它从我们的 Shopify 商店获取特定的产品。</p>
<p>这将意味着，每当用户访问我们的个人产品页面，即<code>/products/aged-gruyere</code>，产品句柄<code>aged-gruyere</code>将作为<code>page.params.handle</code>出现在页面上。然后，我们可以使用这个句柄向 Shopify 查询该产品。使用此查询更新<code>store.js</code>:</p>
<pre>// store.js
import { writable } from "svelte/store";
import { postToShopify } from "./src/routes/api/utils/postToShopify";
export const products = writable([]);
export const productDetails = writable([]);
export const getProducts = async () =&gt; {
   // get products query
};

// Get product details
export const getProductDetails = async (handle) =&gt; {
  try {
    const shopifyResponse = await postToShopify({
      query: ` 
        query getProduct($handle: String!) {
          productByHandle(handle: $handle) {
            id
            handle
            description
            title
            totalInventory
            variants(first: 5) {
              edges {
                node {
                  id
                  title
                  quantityAvailable
                  priceV2 {
                    amount
                    currencyCode
                  }
                }
              }
            }
            priceRange {
              maxVariantPrice {
                amount
                currencyCode
              }
              minVariantPrice {
                amount
                currencyCode
              }
            }
            images(first: 1) {
              edges {
                node {
                  src
                  altText
                }
              }
            }
          }
        }
      `,
      variables: {
        handle: handle,
      },
    });

    productDetails.set(shopifyResponse.productByHandle);
    return shopifyResponse.productByHandle;
  } catch (error) {
    console.log(error);
  }
};
</pre>
<p>这里，我们定义了一个新的查询，它将根据产品的句柄获取特定的产品，我们将句柄作为变量传递给查询。当我们从动态页面调用<code>getProductDetails()</code>并将产品句柄传递给它时，我们应该得到返回的产品数据。</p>
<p>好了，让我们创建一个动态页面来代表我们各自的产品页面。在<code>routes</code>文件夹中，创建一个新的<code>routes/products/[handle].svelte</code>文件，设置如下:</p>
<pre>// src/routes/products/[handle].svelte
&lt;script context="module"&gt;
    import { productDetails, getProductDetails } from '../../../store'; 
    export async function load(ctx) {
        let handle = ctx.page.params.handle;
        await getProductDetails(handle);
        return { props: { productDetails } };
    }
&lt;/script&gt;
&lt;script&gt;
    export let productDetails;
    let quantity = 0;
    let product = $productDetails
    let productImage = product.images.edges[0].node.src;
    let productVariants = product.variants.edges.map((v) =&gt; v.node);
    let selectedProduct = productVariants[0].id;
        const addToCart = async () =&gt; {
        // add selected product to cart
        try {
            const addToCartResponse = await fetch('/api/add-to-cart', {
                method: 'POST',
                body: JSON.stringify({
                    cartId: localStorage.getItem('cartId'),
                    itemId: selectedProduct,
                    quantity: quantity
                })
            });
            const data = await addToCartResponse.json();
            // save new cart to localStorage
            localStorage.setItem('cartId', data.id);
            localStorage.setItem('cart', JSON.stringify(data));
            location.reload();
        } catch (e) {
            console.log(e);
        }
    };
    function price(itemPrice) {
        const amount = Number(itemPrice).toFixed(2);
        return amount + ' ' + 'USD';
    }
&lt;/script&gt;
&lt;main&gt; &lt;!-- page content --&gt; &lt;/main&gt;
</pre>
<p>此时，您可能想知道为什么我们在这个代码片段上有两个<code>&lt;script&gt;</code>标签。原因如下:我们希望我在第一个脚本中定义的<code>load()</code>函数在组件呈现之前运行。为此，我们需要在剧本中加入<code>context="module"</code>。其他所有内容都可以放入第二个脚本标签中，不需要使用<code>context</code>属性。</p>
<p>所以我们在上面的代码片段中所做的是:</p>
<ul>
<li>在初始化期间运行<code>load()</code>函数，从我们的商店中获取单个产品</li>
<li>将<code>productDetails</code>对象作为道具向下传递到页面</li>
<li>接收页面中的<code>productDetails</code>道具</li>
<li>析构<code>productDetails</code>对象以获取页面所需的数据</li>
</ul>
<p>接下来，让我们使用结构化的产品数据来构建产品详细信息页面:</p>
<pre>// src/routes/products/[handle].svelte
&lt;script context="module"&gt;
//...
&lt;/script&gt;
&lt;script&gt;
//...
&lt;/script&gt;
&lt;main class="product-page"&gt;
    &lt;article&gt;
        &lt;section class="product-page-content"&gt;
            &lt;div&gt;
                &lt;img class="product-page-image" src={productImage} alt={product.handle} /&gt;
            &lt;/div&gt;
            &lt;div&gt;
                &lt;h1&gt;{product.title}&lt;/h1&gt;
                &lt;p&gt;{product.description}&lt;/p&gt;
                &lt;form&gt;
                    {#if productVariants.length &gt; 1}
                        &lt;div class="product-page-price-list"&gt;
                            {#each productVariants as { id, quantityAvailable, title, priceV2 }}
                                &lt;div class="product-page-price"&gt;
                                    &lt;input
                                        {id}
                                        bind:value={selectedProduct}
                                        type="radio"
                                        name="merchandiseId"
                                        disabled={quantityAvailable === 0}
                                    /&gt;
                                    &lt;label for={id}&gt;
                                        {title} - {price(priceV2.amount)}
                                    &lt;/label&gt;
                                &lt;/div&gt;
                            {/each}
                        &lt;/div&gt;
                    {:else}
                        &lt;div class="product-page-price is-solo"&gt;
                            {price(productVariants[0].priceV2.amount)}
                        &lt;/div&gt;
                    {/if}
                    &lt;div class="product-page-quantity-row"&gt;
                        &lt;input
                            class="product-page-quantity-input"
                            type="number"
                            name="quantity"
                            min="1"
                            max={productVariants[0].quantityAvailable}
                            bind:value={quantity}
                        /&gt;
                        &lt;button type="submit" on:click|preventDefault={addToCart} class="button purchase"&gt;
                            Add to Cart
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/form&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    &lt;/article&gt;
&lt;/main&gt;
</pre>
<p>现在，如果我们单击产品列表页面上的<code>View Item</code>按钮，我们应该会看到如下所示的单个产品详细信息页面:</p>
<p><img data-attachment-id="68435" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/svelte-shopify-product-details-pages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/svelte-shopify-product-details-pages.gif" data-orig-size="730,578" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="svelte Shopify product details pages" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/svelte-shopify-product-details-pages-300x238.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/svelte-shopify-product-details-pages.gif" decoding="async" class="size-full wp-image-68435 aligncenter jetpack-lazy-image" src="../Images/cb53fc5160c2e7291dcf4a8d3b58ed89.png" alt="Svelte Shopify Product Details Pages" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/svelte-shopify-product-details-pages.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/svelte-shopify-product-details-pages.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="68435" data-permalink="https://blog.logrocket.com/build-ecommerce-site-sveltekit-shopify-apis/svelte-shopify-product-details-pages/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/svelte-shopify-product-details-pages.gif" data-orig-size="730,578" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="svelte Shopify product details pages" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/svelte-shopify-product-details-pages-300x238.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/svelte-shopify-product-details-pages.gif" decoding="async" loading="lazy" class="size-full wp-image-68435 aligncenter" src="../Images/cb53fc5160c2e7291dcf4a8d3b58ed89.png" alt="Svelte Shopify Product Details Pages" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/svelte-shopify-product-details-pages.gif"/></noscript>
<p>看起来我们就要完成了。让我们开始部署这个站点吧！</p>
<h2>部署到网络</h2>
<p>现在我们有了一个产品列表页面，我们可以查看我们各自的产品页面，我们可以继续部署这个站点。</p>
<p>要部署一个 SvelteKit 应用程序，您需要使它适应您选择的部署目标。SvelteKit 文档提供了一些<a href="https://kit.svelte.dev/docs#adapters">适配器</a>，您可以快速使用它们来部署您的应用程序。我选择使用 SvelteKit 提供的<a href="https://github.com/sveltejs/kit/tree/master/packages/adapter-netlify"> Netlify 适配器</a>部署到 Netlify。</p>
<p>我们需要做的第一件事是将 Netlify 适配器安装到我们的 SvelteKit 项目中:</p>
<pre>npm i -D @sveltejs/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="aacbcecbdadecfd887c4cfdec6c3ccd3eac4cfd2de">[email protected]</a>
</pre>
<p>然后，编辑您的<code>svelte.config.js</code>文件并导入我们刚刚安装的 Netlify 适配器:</p>
<pre>import adapter from '@sveltejs/adapter-netlify';
export default {
    kit: {
        adapter: adapter(), 
        target: '#svelte'
    }
};
</pre>
<p>我们已经在 SvelteKit 项目中安装并配置了适配器。我们要做的下一件事是创建一个<code>netlify.toml</code>文件，并像这样设置它:</p>
<pre>[build]
  command = "npm run build"
  publish = "build/"
  functions = "/functions/"

# Svelte requires node v12
[build.environment]
  NODE_VERSION = "12.20"
</pre>
<p>我们在这里做的是告诉 Netlify:</p>
<ul>
<li>运行构建这个站点的命令是<code>npm run build</code></li>
<li>已建网站可用的目录是<code>/build</code></li>
<li>找到我们的定制 Netlify 函数的目录是<code>/functions</code>(尽管我们在这个项目中没有使用任何 Netlify 函数)</li>
<li>我们希望它用节点 v12.20 构建网站</li>
</ul>
<p>最后，将项目推送到 GitHub，然后转到您的<a href="https://app.netlify.com"> Netlify 仪表板</a>，从您推送到的 Github 存储库部署您的站点。如果你需要帮助，这里有一个来自 GitHub 的关于部署到 Netlify 的<a href="https://docs.netlify.com/site-deploys/create-deploys/">一分钟指南，带你完成它。</a><a href="https://sveltekit-shopify-ecommerce.netlify.app">如果你想探索这个网站，演示也在 Netlify </a>上进行。</p>
<h2>资源和后续步骤</h2>
<p>因此，我们已经完成了一个由 Shopify 后端支持的 SvelteKit 电子商务网站的建设。在下一个教程中，当我们向这个站点添加购物车功能时，我们将把它与更多的 Shopify 特性联系起来。到时候见。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<div class="code-block code-block-22">
<div class="blog-plug inline-plug ecomm-plug"><h2><a href="https://lp.logrocket.com/blg/ecommerce-signup"> LogRocket </a>:看看用户为什么不完成你的电子商务流程中的一个步骤的技术和 UX 原因。</h2><a class="signup" href="https://lp.logrocket.com/blg/ecommerce-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d60d88871d85e76e0dcca90f4bbaf78c.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/12/insights-step-2-lg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/insights-step-2-lg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d60d88871d85e76e0dcca90f4bbaf78c.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/12/insights-step-2-lg.png"/></noscript></a><p>LogRocket 就像是一个网络和移动应用程序和网站的 DVR，记录你的电子商务应用程序上发生的一切。LogRocket 没有猜测用户不转化的原因，而是主动揭示了阻止你转化的根本原因，比如 JavaScript 错误或死点击。LogRocket 还可以监控应用的性能，报告客户端 CPU 负载、客户端内存使用等指标。</p><p>开始主动监控您的电子商务应用程序— <a class="signup" href="https://lp.logrocket.com/blg/ecommerce-signup" target="_blank" rel="noopener noreferrer">免费试用</a>。</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>