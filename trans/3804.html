<html>
<head>
<title>Using @property for loosely typed CSS custom properties </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>对松散类型的CSS自定义属性使用@property</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/#0001-01-01">https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/#0001-01-01</a></blockquote><div><article class="article-post">
<p>CSS变量允许开发人员创建可重用的CSS属性。在引入CSS变量之前，我们无法设置默认的变量类型；在某些情况下，这个小缺陷可能会破坏整个应用程序。然而，CSS <code>@propery</code>特别解决了这个缺陷。</p>
<p>在本教程中，我们将探索使用<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@property">CSS<code>@property</code>功能</a>设置CSS变量配置。我们将检查自定义CSS属性的优缺点，了解<code>@propery</code>如何工作，并回顾它的不同用例。重要的是要记住，<code>@propery</code>在撰写本文时仍处于试验阶段，所以你应该在开始之前检查一下你的<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@property#browser_compatibility">浏览器的兼容性</a>。</p>
<p><em>向前跳转</em></p>

<h2 id="css-custom-properties">CSS自定义属性</h2>
<p>让我们考虑下面的CSS变量用例；我们声明一个变量<code>foo</code>，并给它赋值<code>10px</code>，如下所示:</p>
<pre class="language-css hljs">--foo: 10px;
</pre>
<p>我们可以使用<code>foo</code>变量来设置元素的宽度，如下所示:</p>
<pre class="language-css hljs">.element {
   width: var(--foo);
} 
</pre>
<p>假设我们错误地在另一个元素中误用了<code>--foo</code>变量，如下面的代码所示:</p>
<pre class="language-css hljs">.another-element {
    --foo:red;
    Text-shadow: var(--foo) 2px 5px red;
}
</pre>
<p>因为<code>--foo</code>变量被赋予了与其类型不同的值，所以<code>Text-shadow</code>属性将被破坏。虽然您可以很快调试这种类型的错误，但是使用新的<code>@property</code>声明，我们可以通过为CSS变量设置一个<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Types">默认类型</a>来完全避免这种错误，包括颜色、长度、百分比等。</p>
<h2 id="how-property-works"><code>@property</code>如何工作</h2>
<p>使用<code>@property</code>，我们可以通过简单地设置<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Types">变量类型</a>、初始值和<code>inherits</code>属性来避免前面例子中的错误。我们可以如下声明<code>@property</code>变量:</p>
<pre class="language-css hljs">@property --x {
 syntax: '&lt;color&gt;';
 initial-value:blue;
 inherits: false;
}
</pre>
<p>在上面的代码片段中，我们使用<code>@property</code>来声明和配置<code>syntax</code>、<code>initial-value</code>和<code>inherits</code>变量的值。<code>syntax</code>指定我们可以分配给CSS变量的值的类型，而<code>@property</code>语法包括CSS类型，如长度、颜色、百分比等。</p>
<p>当声明<code>@property</code>变量时，需要<code>initial value</code>。如果分配给变量的值与其类型不同，<code>@property</code>将返回<code>initial value</code>。最后，<a href="https://blog.logrocket.com/css-inheritance-inherit-initial-unset-and-revert/"> <code>inherits</code>是布尔值</a>；将其设置为<code>true</code>意味着该变量是从DOM树继承的。</p>
<p>在我们为<code>@property</code>创建了<code>--x</code>变量之后，我们可以为<code>--x</code>变量赋值<code>red</code>，然后将它添加到<code>element</code>属性，如下所示:</p>
<pre class="language-css hljs"> .element {
     --x: red;
     text-shadow: 4px 2px 5px var(--x);
   }
</pre>
<p>以下是输出:</p>
<p><img data-attachment-id="154753" data-permalink="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/attachment/css-property-red/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red.png" data-orig-size="730,90" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="css-@-property-red" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red.png" decoding="async" class="aligncenter wp-image-154753 size-full jetpack-lazy-image" src="../Images/f5e5d9678b5d1febd7393bdaf2bb3b52.png" alt="CSS @ Property Red" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red-300x37.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="154753" data-permalink="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/attachment/css-property-red/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red.png" data-orig-size="730,90" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="css-@-property-red" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red.png" decoding="async" loading="lazy" class="aligncenter wp-image-154753 size-full" src="../Images/f5e5d9678b5d1febd7393bdaf2bb3b52.png" alt="CSS @ Property Red" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red-300x37.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-red.png"/></noscript>
<p>假设在上面的例子中，我们错误地将<code>20px</code>赋给了<code>--x</code>变量。输出如下所示:</p>
<p><img data-attachment-id="154755" data-permalink="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/attachment/css-property-css-blue-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example.png" data-orig-size="730,90" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="css-@-property-css-blue-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example.png" decoding="async" class="aligncenter wp-image-154755 size-full jetpack-lazy-image" src="../Images/1161d050928ca4eedea2fae902a94de4.png" alt="CSS @ Property CSS Blue Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example-300x37.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="154755" data-permalink="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/attachment/css-property-css-blue-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example.png" data-orig-size="730,90" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="css-@-property-css-blue-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example.png" decoding="async" loading="lazy" class="aligncenter wp-image-154755 size-full" src="../Images/1161d050928ca4eedea2fae902a94de4.png" alt="CSS @ Property CSS Blue Example" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example-300x37.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-css-blue-example.png"/></noscript>
<h2 id="animation-@-property">动画与<code>@property</code></h2>
<p>我们可以使用<code>@property</code>变量给网站添加动画。例如，让我们使用<code>@property</code>创建一个简单的页面加载器动画。</p>
<p>我们将从HTML代码开始。创建一个<code>index.html</code>文件，并添加以下HTML代码:</p>
<pre class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
 &lt;head&gt;
   &lt;meta charset="UTF-8" /&gt;
   &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;
   &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;
   &lt;link rel="stylesheet" href="style.css" /&gt;
   &lt;title&gt;Document&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
   &lt;div class="body"&gt;
     &lt;div class="container"&gt;
       &lt;div class="ring"&gt;&lt;/div&gt;
       &lt;div class="ring"&gt;&lt;/div&gt;
       &lt;div class="ring"&gt;&lt;/div&gt;
       &lt;p&gt;Loading . . .&lt;/p&gt;
     &lt;/div&gt;
   &lt;/div&gt;
 &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>在上面的代码中，我们用一个<code>container</code>类创建了一个<code>div</code>。在<code>div</code>中，我们用类<code>ring</code>定义了另外三个孩子<code>div</code>，它们将作为我们的加载环。</p>
<p>现在，创建一个<code>style.css</code>文件并添加以下代码:</p>
<pre class="language-css hljs">@property --main_color {
 syntax: "&lt;color&gt;";
 initial-value: #53b8f3;
 inherits: false;
}
@property --main_color2 {
 syntax: "&lt;color&gt;";
 initial-value: white;
 inherits: false;
}
@property --main_length {
 syntax: "&lt;length&gt;";
 initial-value: 150px;
 inherits: false;
}
@property --angle {
 syntax: "&lt;angle&gt;";
 initial-value: 0deg;
 inherits: false;
}
@property --percentage {
 syntax: "&lt;length-percentage&gt;";
 initial-value: 100%;
 inherits: false;
}
body {
 --main_color: white;
 background: var(--main_color);
}
.body {
 display: flex;
 justify-content: center;
 align-items: center;
 min-height: 100vh;
}
.container {
 position: relative;
 width: var(--percentage);
 display: flex;
 justify-content: center;
 align-items: center;
}
.container .ring {
 position: relative;
 width: var(--main_length);
 height: var(--main_length);
 margin: -30px;
 --percentage: 50%;
 border-radius: var(--percentage);
 border: 4px solid transparent;
 border-top: 4px solid var(--main_color);
 animation: animate 4s linear infinite;
}

@keyframes animate {
 0% {
   transform: rotate(var(--angle));
 }
 100% {
   --angle: 360deg;
   transform: rotate(var(--angle));
 }
}

.container .ring::before {
 --main_lenght: 15px;
 --main_color2: #24ecff33;
 content: "";
 position: absolute;
 top: 12px;
 right: 12px;
 --percentage: 50%;
 border-radius: var(--percentage);
 width: var(--main_lenght);
 height: var(--main_lenght);
 background: var(--main_color);
 box-shadow: 0 0 0 5px var(--main_color2), 0 0 0 10px var(--main_color2),
   0 0 0 20px #24ecff11, 0 0 20px var(--main_color), 0 0 20px var(--main_color);
}

.container .ring:nth-child(1) {
 position: absolute;
 top: -66.665%;
}
.container p {
 --main_lenght: -120px;
 position: absolute;
 --main_color2:black;
 color: var(--main_color2);
 font-size: 1.5em;
 font-family: consolas;
 bottom: var(--main_lenght);
 letter-spacing: 0.15em;
}
</pre>
<p id="inthecodeabovewedefinedfourpropertiesstatingwithtwocolorpropertiesmaincolorandmaincolor2indicatingthecoloroftheloaderandthebackgroundofourwebpagerespectively">在上面的代码中，我们定义了四个属性，用两个颜色属性<code>main-color</code>和<code>main-color2</code>表示，分别表示加载程序的颜色和网页的背景。</p>
<p>我们还引入了一个额外的属性角来反映环的旋转程度。使用之前指定的值，我们添加了一些新的CSS用于页面对齐，并创建了负责加载器动画的实际关键帧。</p>
<p>下面是结果:</p>
<p><img data-attachment-id="154757" data-permalink="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/attachment/css-property-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-animation.gif" data-orig-size="730,555" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="css-@-property-animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-animation-300x228.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-animation.gif" decoding="async" class="aligncenter wp-image-154757 size-full jetpack-lazy-image" src="../Images/89f6a932851b8189cd56de19a513a5f9.png" alt=" CSS @ Property Animation" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-animation.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-animation.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="154757" data-permalink="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/attachment/css-property-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-animation.gif" data-orig-size="730,555" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="css-@-property-animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-animation-300x228.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-animation.gif" decoding="async" loading="lazy" class="aligncenter wp-image-154757 size-full" src="../Images/89f6a932851b8189cd56de19a513a5f9.png" alt=" CSS @ Property Animation" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-animation.gif"/></noscript>
<h2 id="manipulating-property-css-variable-javascript">用JavaScript操作<code>@property</code> CSS变量</h2>
<p>在JavaScript中，我们可以使用<code>registerProperty</code>方法声明<code>@property</code> CSS变量，方法是将变量的名称、语法、<code>initialValue</code>和<code>inherits</code>属性作为对象传递:</p>
<pre class="language-javascript hljs">window.CSS.registerProperty({
  name: '--foo',
  syntax: '&lt;color&gt;',
  initialValue: '#c0ffee',
  inherits: true,
});
</pre>
<h2 id="setting-property-css-variable-javascript">使用JavaScript设置<code>@property</code> CSS变量</h2>
<p>在JavaScript中，我们可以使用<code>setProperty</code>方法更新<code>@property</code> CSS变量的值。如果一个CSS变量的<code>inherits</code>属性是<code>true</code>，我们可以如下修改它的初始值:</p>
<pre class="language-javascript hljs">document.documentElement.style.setProperty("--foo", "pink");
</pre>
<p>我们还可以在不改变变量初始值的情况下更新<code>element</code>属性中CSS变量的值:</p>
<pre class="language-css hljs">document.querySelector(".element").style.setProperty("--foo", "red");
</pre>
<h2 id="getting-property-css-variables-value-javascript">使用JavaScript获取<code>@property</code> CSS变量的值</h2>
<p>我们可以使用<code>getPropertyValue</code>方法在JavaScript中检索<code>@property</code>变量的值，如下所示:</p>
<pre class="language-css hljs">document.querySelector(".element").style.getPropertyValue("--foo"))
</pre>
<h2 id="themes-switcher-property-variable">带<code>@property</code>变量的主题切换器</h2>
<p>让我们看另一个使用<code>@property</code>变量的例子；我们将添加一个主题切换器<span>在亮暗模式</span> <span>到我们之前的动画加载器项目中。当用户切换按钮时，动画</span> <span>加载器主题会改变。让我们从给</span> <code>index.html</code> <span>文件添加主题切换器开始，如下图:</span></p>
<pre class="language-html hljs">&lt;!-- ... --&gt;
&lt;body&gt;
&lt;header&gt;
&lt;div class="toggle-button-container"&gt;
&lt;label class="toggle-button-label" for="checkbox"&gt;
&lt;input
type="checkbox"
class="toggle-button"
id="checkbox"
onchange="toggleTheme()"
/&gt;
&lt;div class="toggle-rounded"&gt;&lt;/div&gt;
&lt;/label&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- ... --&gt;</pre>
<p><span>接下来，我们将下面的CSS样式添加到</span> <code>style.css</code> <span>文件中:</span></p>
<pre class="language-css hljs">/* ... */
.toggle-button-container {
 align-items: center;
 margin-top: 5px;
 width: 100%;
}

.toggle-button-label {
 display: inline-block;
 height: 34px;
 position: relative;
 width: 60px;
 float: right;
}

.toggle-rounded {
 --main_color: #ccc;
 background: var(--main_color);
 bottom: 0;
 cursor: pointer;
 left: 0;
 position: absolute;
 right: 0;
 top: 0;
 transition: 0.4s;
 border-radius: 15%;
}
.toggle-rounded:before {
 --main_color: #fff;
 background: var(--main_color);
 bottom: 4px;
 content: "";
 height: 26px;
 left: 4px;
 position: absolute;
 transition: 0.4s;
 width: 26px;
 border-radius: 100%;
}
input:checked + .toggle-rounded {
 --main_color: #9cafeb;
 background: var(--main_color);
}
input:checked + .toggle-rounded:before {
 transform: translateX(26px);
}
</pre>
<p>在上面的代码片段中，我们使用了<code>@property</code>变量来设计主题切换按钮的样式。现在，当切换主题切换器按钮时，按钮的颜色会改变。接下来，我们将创建一个<code>themes.js</code>文件并粘贴以下JavaScript代码:</p>
<pre class="language-javascript hljs">const toggleButton = document.querySelector(".toggle-button");
toggleButton.addEventListener("change", toggleTheme, false);
const theme = {
 dark: {
   "--main_color": "black",
   "--main_color2": "white",
 },
 light: {
   "--main_color": "white",
   "--main_color2": "black",
 },
};

function toggleTheme(e) {
 if (e.target.checked) {
   useTheme("dark");
   localSto,rage.setItem("theme", "dark");
 } else {
   useTheme("light");
   localStorage.setItem("theme", "light");
 }
}
function useTheme(themeChoice) {
 document
   .querySelector("body")
   .style.setProperty("--main_color", theme\[themeChoice\]["--main_color"]);
 document
   .querySelector("p")
   .style.setProperty("--main_color2", theme\[themeChoice\]["--main_color2"]);
}

const preferredTheme = localStorage.getItem("theme");
if (preferredTheme === "dark") {
 useTheme("dark");
 toggleButton.checked = true;
} else {
 useTheme("light");
 toggleButton.checked = false;
}
</pre>
<p>从上面的代码来看，每当按钮被切换时，就会调用<code>toggleTheme()</code>函数。然后，<code>useTheme</code>函数通过将所选主题作为参数传入来更新所选主题的颜色。</p>
<p>最后，将<code>themes.js</code>文件添加到<code>index.html</code>中。输出应该如下图所示:</p>
<p><img data-attachment-id="154759" data-permalink="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/attachment/add-theme-switcher-css-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/add-theme-switcher-css-animation.gif" data-orig-size="730,567" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-theme-switcher-css-animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/add-theme-switcher-css-animation-300x233.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/add-theme-switcher-css-animation.gif" decoding="async" class="aligncenter wp-image-154759 size-full jetpack-lazy-image" src="../Images/b6993d44efaca3f8363f419d3e703519.png" alt="Add Theme Switcher CSS Animation" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/add-theme-switcher-css-animation.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/add-theme-switcher-css-animation.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="154759" data-permalink="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/attachment/add-theme-switcher-css-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/add-theme-switcher-css-animation.gif" data-orig-size="730,567" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-theme-switcher-css-animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/add-theme-switcher-css-animation-300x233.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/add-theme-switcher-css-animation.gif" decoding="async" loading="lazy" class="aligncenter wp-image-154759 size-full" src="../Images/b6993d44efaca3f8363f419d3e703519.png" alt="Add Theme Switcher CSS Animation" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/add-theme-switcher-css-animation.gif"/></noscript>
<h2 id="browser-compatibility">浏览器兼容性</h2>
<p>虽然<code>@property</code>是一个独特的CSS类型的变量特性，但是<code>@property</code>只有在与用户的浏览器兼容时才有用。这个CSS特性仍然是试验性的，还没有被一些浏览器支持。在撰写本文时，请查看下表了解<code>@property</code>浏览器的兼容性:</p>
<p><img data-attachment-id="154761" data-permalink="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/attachment/css-property-compatibility-chart/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart.png" data-orig-size="730,481" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="css-@-property-compatibility-chart" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart-300x198.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart.png" decoding="async" class="aligncenter wp-image-154761 size-full jetpack-lazy-image" src="../Images/baea2cbea88f37eb9dae5d065f62b61c.png" alt="CSS @ Property Compatibility Chart" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart-300x198.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="154761" data-permalink="https://blog.logrocket.com/using-property-loosely-typed-css-custom-properties/attachment/css-property-compatibility-chart/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart.png" data-orig-size="730,481" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="css-@-property-compatibility-chart" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart-300x198.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart.png" decoding="async" loading="lazy" class="aligncenter wp-image-154761 size-full" src="../Images/baea2cbea88f37eb9dae5d065f62b61c.png" alt="CSS @ Property Compatibility Chart" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart-300x198.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/css-@-property-compatibility-chart.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>CSS变量有助于简化我们构建动态网站和复杂动画的方式，同时还能防止CSS属性的破坏。像TypeScript一样，<code>@property</code>旨在确保将有效值分配给CSS变量。</p>
<p>在本教程中，我们通过构建一个简单的页面加载器动画和主题切换器，学习了如何像专业人士一样使用<code>@property</code> CSS变量。我们还探索了<code>@property</code>如何在JavaScript代码中工作。</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>你的前端是否占用了用户的CPU？</h2><p>随着web前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端CPU使用、内存使用等感兴趣，</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>.</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用的DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><p>现代化您调试web和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>