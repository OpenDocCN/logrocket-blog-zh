<html>
<head>
<title>Build a custom flashbar in React Native </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在React Native中构建自定义flashbar</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-custom-flashbar-react-native/#0001-01-01">https://blog.logrocket.com/build-custom-flashbar-react-native/#0001-01-01</a></blockquote><div><article class="article-post">
<p>移动应用程序开发人员使用不同的策略来通知用户前台和后台应用程序事件。对于前台应用程序事件提醒，开发人员通常使用flashbars、传统的提醒框、toast消息、应用程序内通知系统或这些的组合。依赖于平台的本地推送通知通常用于通知用户后台应用事件。</p>
<p>flashbar是一个现代的动画GUI元素，它呈现了关于应用程序事件的轻量级细节。Flashbars通常出现在屏幕的一个角落(在大多数情况下，它们出现在屏幕的顶部或底部)，并在预定义的超时后消失。从UI/UX的角度来看，flashbars适用于大多数需要通知用户应用程序事件状态的场景。例如，您可以在向数据库中插入新记录后显示特定的操作状态。</p>
<p>React本地开发者可以使用流行的<a href="https://github.com/lucasferreira/react-native-flash-message"> <code>react-native-flash-message</code>库</a>来显示flashbars。在本文中，我将解释如何根据实际需求在React Native中构建和定制flashbar组件。</p>
<p><em>向前跳转:</em></p>

<h2 id="highlighted-features-react-native-flash-message"><code>react-native-flash-message</code>的突出特点</h2>
<p><code>react-native-flash-message</code>库允许你添加<a href="https://material.io/components/snackbars">素材Snackbar </a>一样的低优先级警告组件，并允许你根据设备方向和状态栏高度创建闪灯条，因此它在有凹口的设备上工作良好(例如iPhone X)。</p>
<p>我在下面强调了一些附加功能:</p>
<h3>跨平台支持</h3>
<p>这个库提供了一个基于JavaScript的解决方案。换句话说，它使用内置的React本地原始组件，如<code>View</code>、<code>Text</code>和<code>Image</code>，而不使用定制的本地模块。因此，你可以期待Android和iOS平台上一致的flashbar外观和感觉。此外，这个库提供了一种控制操作系统级UI元素的方法，比如状态栏。</p>
<h3>可定制性和可扩展性</h3>
<p>这个库提供了各种自解释的道具来定制flashbar的颜色、图标、样式、内容和过渡动画。因此，您可以轻松创建一个自定义的flashbar，以创纪录的速度匹配您的应用程序主题。</p>
<p>这个包也足够灵活，允许你扩展它来满足任何高级需求，比如创建你自己的flashbar组件。</p>
<h3>遵守UI/UX原则</h3>
<p>你不需要自己设置很多道具来为你的app创建一个flashbar。react-native-flash-message库允许您通过设置UX友好的默认值来创建带有消息字符串的flashbar消息。例如，默认情况下，这个库在屏幕顶部呈现一个灰色的flashbar，并在大约两秒钟后隐藏它。</p>
<h2 id="build-react-native-flashbar">构建一个React本机flashbar</h2>
<p>我们将创建一个新的React本地应用程序，并添加自定义的flashbars来了解<code>react-native-flash-message</code>库的特性。如果您需要将flashbars添加到现有的React本机应用程序中，也可以使用即将推出的代码示例，而无需创建新项目。</p>
<h3 id="project-setup-configuration">项目设置和配置</h3>
<p>如果您计划为本教程创建一个新的React Native项目，请使用官方React Native CLI创建一个项目:</p>
<pre class="language-bash hljs">npx react-native init CustomFlashbars
cd CustomFlashbars
</pre>
<p>一旦上述命令完成，运行新创建的项目以确保一切正常:</p>
<pre class="language-bash hljs">npx react-native run-android
# --- or ---
npx react-native run-ios
</pre>
<p>接下来，按照以下步骤安装<code>react-native-flash-message</code>:</p>
<pre class="language-bash hljs">npm install react-native-flash-message
# --- or ---
yarn add react-native-flash-message
</pre>
<p>现在，安装成功后，我们可以开始创建flashbars了。先来展示一个基本的flashbar吧！</p>
<h3 id="creating-basic-flashbar">创建基本的flashbar</h3>
<p>将以下代码添加到您的<code>App.js</code>中，以显示一个基本的flashbar:</p>
<pre class="language-javascript hljs">import React from 'react';
import {
  SafeAreaView,
  StyleSheet,
  View,
  Button,
} from 'react-native';
import FlashMessage, { showMessage } from 'react-native-flash-message';

function App() {
  function handlePress() {
    showMessage({
      message: 'Hello flashbars!'
    });
  }
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Button
        title="Show alert"
        onPress={handlePress}/&gt;
      &lt;FlashMessage/&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 12
  }
});

export default App;
</pre>
<p>这里，我们通过只发送<code>message</code>选项来显示默认配置的flashbar。如上面的代码所示，在使用<code>showMessage</code>函数之前，我们需要将<code>FlashMessage</code>组件作为全局组件添加到<code>App</code>组件中。</p>
<p>一旦添加了全局<code>FlashMessage</code>组件，就可以从任何地方调用<code>showMessage</code>函数来显示flashbar消息。</p>
<p>运行上面的代码，您应该会看到一个背景为灰色的flashbar，如下面的预览所示:</p>
<p><img data-attachment-id="143479" data-permalink="https://blog.logrocket.com/basic-gray-flashbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/basic-gray-flashbar.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="basic-gray-flashbar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/basic-gray-flashbar-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/basic-gray-flashbar-485x1024.gif" decoding="async" class="aligncenter wp-image-143479 size-full jetpack-lazy-image" src="../Images/dd103962d1ee3464b6ce99393416d3ee.png" alt="Basic gray flashbar." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/basic-gray-flashbar.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/basic-gray-flashbar.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143479" data-permalink="https://blog.logrocket.com/basic-gray-flashbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/basic-gray-flashbar.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="basic-gray-flashbar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/basic-gray-flashbar-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/basic-gray-flashbar-485x1024.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143479 size-full" src="../Images/dd103962d1ee3464b6ce99393416d3ee.png" alt="Basic gray flashbar." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/basic-gray-flashbar.gif"/></noscript>
<p>默认情况下，<a href="https://github.com/lucasferreira/react-native-flash-message/blob/302b0642f1a8dcdd5911a4815bd9ecf67b67359e/src/FlashMessage.js#L326"> 1850毫秒后</a>flash bar将消失，但是您可以通过消息对象中的<code>duration</code>选项自定义该时间段。例如，以下代码在五秒钟后隐藏flashbar组件:</p>
<pre class="language-js hljs">function handlePress() {
  showMessage({
    message: 'Hello flashbars!',
    duration: 5000
  });
}
</pre>
<p>您也可以在全局<code>FlashMessage</code>组件中使用这些消息对象选项:</p>
<pre class="language-js hljs">&lt;FlashMessage duration={5000}/&gt;
</pre>
<p>我们通常在UX友好的框中显示警告标题和描述，以创建一致的、最小的和灵活的用户界面。我们可以对flashbar消息做同样的事情。</p>
<p>以下代码片段显示了flashbar中的flashbar标题和描述，并呈现了多行flashbar消息:</p>
<pre class="language-js hljs">function handlePress() {
  showMessage({
    message: 'react-native-flash-message',
    description: 'React Native flashbar and top notification alert utility' +
                  '\n' +
                  'Works on Android &amp; iOS',
    duration: 2500
  });
}
</pre>
<p>通常，您可以使用换行符(<code>\n</code>)为flashbar消息描述创建多行文本。一旦你用上面的代码片段运行你的应用程序，你会看到一个多行flashbar，如下所示:</p>
<p><img decoding="async" src="../Images/965431522f782812d4fb239f2d558325.png" alt="A multi-line flashbar" data-lazy-src="https://cdn-images-1.medium.com/max/800/1*Rp6AEkaulNAl-ypGMRFG8w.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://cdn-images-1.medium.com/max/800/1*Rp6AEkaulNAl-ypGMRFG8w.gif"/></p><noscript><img data-lazy-fallback="1" decoding="async" src="../Images/965431522f782812d4fb239f2d558325.png" alt="A multi-line flashbar" data-original-src="https://cdn-images-1.medium.com/max/800/1*Rp6AEkaulNAl-ypGMRFG8w.gif"/></noscript>
<p>如果您的应用程序使用类似于<code><a href="https://blog.logrocket.com/navigating-react-native-apps-using-react-navigation/">react-navigation</a></code>的库呈现多个应用程序屏幕，上面的<code>FlashMessage</code>组件位置保持不变。检查<a href="https://github.com/lucasferreira/react-native-flash-message/blob/302b0642f1a8dcdd5911a4815bd9ecf67b67359e/examples/FlashMessagePlayground/App.js#L31">这个源文件段</a>作为参考实现。</p>
<p>如果您的应用程序只有一个应用程序屏幕，库文档建议避免使用React <code>ref</code>对象进行全局设置，如下所示:</p>
<pre class="language-js hljs">import React, { useRef } from 'react';
import {
  SafeAreaView,
  StyleSheet,
  View,
  Button,
} from 'react-native';
import FlashMessage from 'react-native-flash-message';

function App() {
  const flashMessage = useRef();
  function handlePress() {
    flashMessage.current.showMessage({
      message: 'Hello flashbars!'
    });
  }
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Button
        title="Show alert"
        onPress={handlePress}/&gt;
      &lt;FlashMessage ref={flashMessage}/&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 12
  }
});

export default App;
</pre>
<p>上面的代码通过一个<code>ref</code>对象调用了<code>showMessage</code>函数，而没有从库中导入全局函数。在本教程中，我们将使用<code>ref</code>基于对象的方法，因为我们的示例应用程序只有一个屏幕。但是，如果你的应用程序有多个屏幕，你应该使用上面的第一个代码片段。</p>
<h2 id="changing-flashbar-type">更改flashbar类型</h2>
<p>之前，我们看到了一条灰色的flashbar消息，因为我们使用了默认配置。这个flashbar库为您提供了五种预定义的flashbar类型，因此您可以根据flashbar消息的严重性选择一种。看看以下受支持的消息类型:</p>
<pre class="language-js hljs">function Spacer() {
  return (
    &lt;View style={styles.spacer}&gt;&lt;/View&gt;
  );
}

function App() {
  const flashMessage = useRef();
  function handlePress(type) {
    flashMessage.current.showMessage({
      message: 'Type: ' + type,
      type
    });
  }
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Button
        style={styles}
        title="Default"
        onPress={() =&gt; handlePress('default')}
        color="#696969"/&gt;
      &lt;Spacer/&gt;
      &lt;Button
        title="Success"
        onPress={() =&gt; handlePress('success')}
        color="#5cb85c"/&gt;
      &lt;Spacer/&gt;
      &lt;Button
        title="Info"
        onPress={() =&gt; handlePress('info')}
        color="#5bc0de"/&gt;
      &lt;Spacer/&gt;
      &lt;Button
        title="Warning"
        onPress={() =&gt; handlePress('warning')}
        color="#f0ad4e"/&gt;
      &lt;Spacer/&gt;
      &lt;Button
        title="Danger"
        onPress={() =&gt; handlePress('danger')}
        color="#d9534f"/&gt;
      &lt;FlashMessage ref={flashMessage}/&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 12
  },
  spacer: {
    paddingBottom: 8
  }
});
</pre>
<p>这里，我们创建了五个按钮来显示所有支持的预定义flashbar类型。<code>handlePress</code>函数动态设置消息类型。将上述代码添加到您的<code>App.js</code>中，然后运行它。您将看到以下结果:</p>
<p><img data-attachment-id="143481" data-permalink="https://blog.logrocket.com/predefined-flashbar-types/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/predefined-flashbar-types.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="predefined-flashbar-types" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/predefined-flashbar-types-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/predefined-flashbar-types-485x1024.gif" decoding="async" class="aligncenter wp-image-143481 size-full jetpack-lazy-image" src="../Images/797423bd0be4e0271744568e5df30c39.png" alt="Pre-defined flashbar types" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/predefined-flashbar-types.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/predefined-flashbar-types.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143481" data-permalink="https://blog.logrocket.com/predefined-flashbar-types/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/predefined-flashbar-types.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="predefined-flashbar-types" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/predefined-flashbar-types-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/predefined-flashbar-types-485x1024.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143481 size-full" src="../Images/797423bd0be4e0271744568e5df30c39.png" alt="Pre-defined flashbar types" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/predefined-flashbar-types.gif"/></noscript>
<h2 id="custom-colors">使用自定义颜色</h2>
<p><code>type</code>选项根据预定义的类型设置背景颜色。例如，默认消息类型将背景渲染为灰色。这些预定义的配色方案是UX友好的，并解决了几乎所有的设计要求，但这个库也允许您为文本和背景使用自定义颜色。</p>
<p>例如，以下代码片段使用自定义颜色呈现flashbar:</p>
<pre class="language-js hljs">function App() {
  const flashMessage = useRef();
  function handlePress() {
    flashMessage.current.showMessage({
      message: 'Hello flashbars!',
      color: '#332222',
      backgroundColor: '#e09107'
    });
  }
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Button
        title="Show alert"
        onPress={handlePress}
        color="#e09107"/&gt;
      &lt;FlashMessage ref={flashMessage}/&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 12
  }
});
</pre>
<p>上面的代码片段分别使用<code>color</code>和<code>backgroundColor</code>选项应用自定义文本和背景颜色。运行该应用程序时，您将看到以下结果:</p>
<p><img data-attachment-id="143483" data-permalink="https://blog.logrocket.com/background-color-flashbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/background-color-flashbar.gif" data-orig-size="730,264" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="background-color-flashbar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/background-color-flashbar-300x108.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/background-color-flashbar.gif" decoding="async" class="aligncenter wp-image-143483 size-full jetpack-lazy-image" src="../Images/d324d1dc7d5556376aea0f1a11ba274d.png" alt="Background color of flashbar." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/background-color-flashbar.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/background-color-flashbar.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143483" data-permalink="https://blog.logrocket.com/background-color-flashbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/background-color-flashbar.gif" data-orig-size="730,264" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="background-color-flashbar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/background-color-flashbar-300x108.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/background-color-flashbar.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143483 size-full" src="../Images/d324d1dc7d5556376aea0f1a11ba274d.png" alt="Background color of flashbar." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/background-color-flashbar.gif"/></noscript>
<h2 id="applying-custom-styles-flashbars">将自定义样式应用到您的flashbars</h2>
<p>这个库根据flashbar消息类型自动应用合适的颜色，同时遵循UI/UX原则。它还根据给定的道具使用了一些文本样式，比如如果你用<code>message</code>和<code>description</code>选项创建了多行flashbar，就增加消息标题的字体粗细。</p>
<p>但是在某些场景中，我们需要做进一步的定制来完成我们的设计需求。该库允许您通过消息对象更改消息容器、标题和描述样式定义。</p>
<h3 id="message-container-style"><code>style</code>:更改消息容器样式</h3>
<p>您可以更改容器样式以使用flashbar框的自定义样式，如以下代码片段所示:</p>
<pre class="language-js hljs">function App() {
  const flashMessage = useRef();
  function handlePress() {
    flashMessage.current.showMessage({
      message: 'Hello flashbars!',
      type: 'success',
      style: styles.flashMessage
    });
  }
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Button
        title="Show alert"
        onPress={handlePress}/&gt;
      &lt;FlashMessage ref={flashMessage}/&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 12,
  },
  flashMessage: {
    borderRadius: 12,
    opacity: 0.8,
    borderWidth: 2,
    borderColor: '#222',
    margin: 12
  }
});
</pre>
<p>上面的代码扩展了内置的成功消息样式，并创建了一个带有圆形边缘的自定义flashbar。看下面的预告:</p>
<p><img data-attachment-id="143485" data-permalink="https://blog.logrocket.com/flashbar-round-edges/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-round-edges.gif" data-orig-size="730,264" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="flashbar-round-edges" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-round-edges-300x108.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-round-edges.gif" decoding="async" class="aligncenter wp-image-143485 size-full jetpack-lazy-image" src="../Images/3b5d02970963a056edf1e37ef05112b1.png" alt="Flashbar with round edges." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-round-edges.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-round-edges.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143485" data-permalink="https://blog.logrocket.com/flashbar-round-edges/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-round-edges.gif" data-orig-size="730,264" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="flashbar-round-edges" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-round-edges-300x108.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-round-edges.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143485 size-full" src="../Images/3b5d02970963a056edf1e37ef05112b1.png" alt="Flashbar with round edges." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-round-edges.gif"/></noscript>
<p>注意:您也可以将<code>floating</code>消息对象选项设置为<code>true</code>来使flashbar边缘变圆。上述<code>borderRadius</code>道具用于演示目的。</p>
<h3 id="changing-text-styles"><code>titleStyle</code> <strong>和</strong> <code>textStyle</code> <strong> : </strong>改变文本样式</h3>
<p>您可以使用<code>titleStyle</code>和<code>textStyle</code>选项来传递flashbar消息标题和描述的自定义样式。例如，以下代码片段对标题文本使用粗体字体样式，对描述文本使用小斜体字体样式:</p>
<pre class="language-js hljs">function App() {
  const flashMessage = useRef();
  function handlePress() {
    flashMessage.current.showMessage({
      message: 'Hello flashbars!',
      description: 'React Native flashbar and top notification alert utility',
      type: 'success',
      titleStyle: styles.flasdescriptionhTitle,
      textStyle: styles.flashText
    });
  }
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Button
        title="Show alert"
        onPress={handlePress}/&gt;
      &lt;FlashMessage ref={flashMessage}/&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 16,
  },
  flashTitle: {
    fontWeight: 'bold',
    fontSize: 18
  },
  flashText: {
    fontStyle: 'italic',
    fontSize: 15
  }
});
</pre>
<p>运行上面的代码。您将看到自定文本样式，如以下预览所示:</p>
<p><img data-attachment-id="143487" data-permalink="https://blog.logrocket.com/custom-text-styles/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-text-styles.gif" data-orig-size="730,325" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-text-styles" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-text-styles-300x134.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-text-styles.gif" decoding="async" class="aligncenter wp-image-143487 size-full jetpack-lazy-image" src="../Images/89f7d4e8eaa59ba55aead4924a433c9c.png" alt="Custom text styles. " data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-text-styles.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-text-styles.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143487" data-permalink="https://blog.logrocket.com/custom-text-styles/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-text-styles.gif" data-orig-size="730,325" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-text-styles" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-text-styles-300x134.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-text-styles.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143487 size-full" src="../Images/89f7d4e8eaa59ba55aead4924a433c9c.png" alt="Custom text styles. " data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-text-styles.gif"/></noscript>
<h3 id="inbuilt-custom-icons">使用内置和自定义图标</h3>
<p>大多数web开发人员经常使用带有警告信息的图标来提高用户友好性。例如，如果您为错误弹出窗口使用合适的图标和颜色，用户无需阅读整个文本就能知道特定弹出窗口的严重性。类似地，我们可以在React Native flashbar消息中使用图标来获得更好的用户友好性。</p>
<p>默认情况下，该库不显示任何带有flashbar的图标，但是您可以根据flash bar类型自动使用一个图标，如下所示:</p>
<pre class="language-js hljs">function Spacer() {
  return (
    &lt;View style={styles.spacer}&gt;&lt;/View&gt;
  );
}

function App() {
  const flashMessage = useRef();
  function handlePress(type) {
    flashMessage.current.showMessage({
      message: 'Type: ' + type,
      type,
      icon: 'auto'
    });
  }
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Button
        title="Success"
        onPress={() =&gt; handlePress('success')}
        color="#5cb85c"/&gt;
      &lt;Spacer/&gt;
      &lt;Button
        title="Info"
        onPress={() =&gt; handlePress('info')}
        color="#5bc0de"/&gt;
      &lt;Spacer/&gt;
      &lt;Button
        title="Warning"
        onPress={() =&gt; handlePress('warning')}
        color="#f0ad4e"/&gt;
      &lt;Spacer/&gt;
      &lt;Button
        title="Danger"
        onPress={() =&gt; handlePress('danger')}
        color="#d9534f"/&gt;
      &lt;FlashMessage ref={flashMessage}/&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 12
  },
  spacer: {
    paddingBottom: 8
  }
});
</pre>
<p>上述<code>icon: 'auto'</code>配置要求库根据消息类型使用合适的图标。运行上述代码后，您将看到如下flashbar消息图标:</p>
<p><img data-attachment-id="143489" data-permalink="https://blog.logrocket.com/flashbar-message-icons/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-message-icons.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="flashbar-message-icons" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-message-icons-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-message-icons-485x1024.gif" decoding="async" class="aligncenter wp-image-143489 size-full jetpack-lazy-image" src="../Images/17a38dd9f1a03a4863434e92fe62723d.png" alt="Flashbar message icons." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-message-icons.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-message-icons.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143489" data-permalink="https://blog.logrocket.com/flashbar-message-icons/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-message-icons.gif" data-orig-size="730,1542" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="flashbar-message-icons" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-message-icons-142x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-message-icons-485x1024.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143489 size-full" src="../Images/17a38dd9f1a03a4863434e92fe62723d.png" alt="Flashbar message icons." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/flashbar-message-icons.gif"/></noscript>
<p>如果您想对内置图标选择进行更多控制，您可以手动设置<code>icon</code>选项的<code>info</code>、<code>success</code>、<code>warning</code>和<code>danger</code>值。</p>
<p>这个库非常灵活，它可以让你将任何React组件设置为flashbar图标。让我们用<a href="https://github.com/oblador/react-native-vector-icons"> <code>react-native-vector-icons</code>库添加一个矢量图标。</a></p>
<p>注意:下面的代码需要安装<code>react-native-vector-icons</code>库。按照GitHub 上库的<a href="https://github.com/oblador/react-native-vector-icons#installation">自述文件中提到的步骤安装。</a></p>
<p>将以下代码添加到您的<code>App.js</code>文件中:</p>
<pre class="language-js hljs">import Icon from 'react-native-vector-icons/FontAwesome';

function App() {
  const flashMessage = useRef();
  function handlePress() {
    flashMessage.current.showMessage({
      message: 'Hello flashbars!',
      description: 'React Native flashbar and top notification alert utility',
      type: 'warning',
      icon: () =&gt; &lt;Icon
                    name="warning"
                    size={30}
                    color="#aa2020"
                    style={{paddingRight: 20, paddingTop: 14}}
                  /&gt;
    });
  }
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Button
        title="Show alert"
        onPress={handlePress}
        color="#e09107"/&gt;
      &lt;FlashMessage ref={flashMessage}/&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 12
  }
});
</pre>
<p>在这里，我们使用字体牛逼图标包中的警告标志矢量图标。上面的代码将在flashbar中显示一个自定义图标，如下面的预览所示:</p>
<p><img data-attachment-id="143491" data-permalink="https://blog.logrocket.com/warning-sign-vector/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/warning-sign-vector.gif" data-orig-size="730,325" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="warning-sign-vector" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/warning-sign-vector-300x134.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/warning-sign-vector.gif" decoding="async" class="aligncenter wp-image-143491 size-full jetpack-lazy-image" src="../Images/63c4cdc81992c117704aed6ea9d1da9f.png" alt="Warning sign vector." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/warning-sign-vector.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/warning-sign-vector.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143491" data-permalink="https://blog.logrocket.com/warning-sign-vector/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/warning-sign-vector.gif" data-orig-size="730,325" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="warning-sign-vector" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/warning-sign-vector-300x134.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/warning-sign-vector.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143491 size-full" src="../Images/63c4cdc81992c117704aed6ea9d1da9f.png" alt="Warning sign vector." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/warning-sign-vector.gif"/></noscript>
<p>尝试使用带有<code>Image</code>组件实例的PNG图标——您可以在<code>icon</code>回调中使用任何JSX元素。</p>
<h2 id="changing-flashbar-position">更改flashbar的位置</h2>
<p>由于我们使用了默认位置，所有以前的flashbars都出现在屏幕的顶部。我们可以用<code>position</code>选项改变flashbar的位置。<code>position</code>选项接受<code>top</code>、<code>right</code>、<code>bottom</code>和<code>left</code>字符串值。</p>
<p>将以下选项添加到之前的自定义图标设置的<code>showMessage</code>功能中:</p>
<pre class="language-js hljs">position: 'bottom'
</pre>
<p>一旦你打开flashbar，你会注意到它在屏幕的底部边缘，和<a href="https://developer.android.com/guide/topics/ui/notifiers/toasts"> Android Toast </a>或者默认的<a href="https://developer.android.com/reference/com/google/android/material/snackbar/Snackbar"> Snackbar </a>设置一样。</p>
<h2 id="attaching-event-handlers">附加事件处理程序</h2>
<p>Flashbars通常用于显示各种提醒和应用内通知。提醒通常是短消息，不提供进一步的交互性，但如果您使用flashbar来显示应用程序内通知，您可能需要在用户按下flash bar消息时将用户指引到另一个应用程序屏幕。或者，当用户长按它时，您可能需要显示关于特定的基于flashbar的错误消息的详细解释。</p>
<p>在这些场景中，我们需要将事件处理程序附加到flashbar。查看以下代码，了解所有受支持的事件回调:</p>
<pre class="language-js hljs">function App() {
  const flashMessage = useRef();
  function handlePress() {
    flashMessage.current.showMessage({
      message: 'Hello flashbars!',
      description: 'React Native flashbar and top notification alert utility',
      type: 'info',
      position: 'bottom',
      hideOnPress: false,
      duration: 5000,
      onPress: () =&gt; console.log('event: onPress'),
      onLongPress: () =&gt; console.log('event: onLongPress'),
      onShow: () =&gt; console.log('event: onShow'),
      onHide: () =&gt; console.log('event: onHide'),
    });
  }
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Button
        title="Show alert"
        onPress={handlePress}/&gt;
      &lt;FlashMessage ref={flashMessage}/&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 12
  }
});
</pre>
<p>我们将<code>hideOnPress</code>属性设置为<code>false</code>,并使用长持续时间来试验受支持的事件处理程序。事件处理程序在以下flashbar和用户操作上执行:</p>
<ul>
<li><code>onPress</code>:当用户按下flashbar时</li>
<li><code>onLongPress</code>:当用户长按flashbar时</li>
<li><code>onShow</code>:当flashbar出现时</li>
<li><code>onHide</code>:当flashbar消失时</li>
</ul>
<p>运行上面的代码。轻按或长按flashbar。您将看到每个事件处理程序如下执行:</p>
<p><img data-attachment-id="143493" data-permalink="https://blog.logrocket.com/event-handler/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-handler.gif" data-orig-size="730,299" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="event-handler" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-handler-300x123.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-handler.gif" decoding="async" class="aligncenter wp-image-143493 size-full jetpack-lazy-image" src="../Images/c9e5ca79a6a7c380d0a37d23981d7e95.png" alt="Event handler " data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/event-handler.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/event-handler.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143493" data-permalink="https://blog.logrocket.com/event-handler/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-handler.gif" data-orig-size="730,299" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="event-handler" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-handler-300x123.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-handler.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143493 size-full" src="../Images/c9e5ca79a6a7c380d0a37d23981d7e95.png" alt="Event handler " data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/event-handler.gif"/></noscript>
<h2 id="customizing-inbuilt-animations-creating-custom-animations">自定义内置动画和创建自定义动画</h2>
<p>默认情况下，当您在屏幕顶部或底部显示flashbar时，<code>react-native-flash-message</code>库会播放滑入/滑出过渡动画。否则，它将播放淡入/淡出过渡动画。如果您不喜欢过渡动画，可以按如下方式关闭过渡动画:</p>
<pre class="language-js hljs">function handlePress() {
  flashMessage.current.showMessage({
    message: 'Hello flashbars!',
    animated: false,
    // -------
  });
}
</pre>
<p>通过使用<code>animationDuration</code>选项改变过渡动画的速度，您可以进一步定制内置动画:</p>
<pre class="language-js hljs">function handlePress() {
  flashMessage.current.showMessage({
    message: 'Hello flashbars!',
    animationDuration: 650,
    // -------
  });
}
</pre>
<p>此包允许您使用自定义动画覆盖默认过渡动画，如下所示:</p>
<pre class="language-js hljs">function handlePress() {
  flashMessage.current.showMessage({
    message: 'Hello flashbars!',
    animationDuration: 650,
    transitionConfig: (animValue, position) =&gt; {
      const opacity = animValue.interpolate({
        inputRange: [0, 1],
        outputRange: [0, 1]
      });
      const scaleY = animValue.interpolate({
        inputRange: [0, 1],
        outputRange: [0, 1]
      });
      return {
        opacity,
        transform: [{ scaleY }]
      };
    }
  });
}
</pre>
<p>该库使用<code>transitionConfig</code>回调函数为flashbar容器创建动画样式。回调函数发送两个参数:</p>
<ol>
<li><code><a href="https://reactnative.dev/docs/animatedvalue">Animated.Value</a></code>参考<ol>
<li>闪光灯的位置</li>
</ol>
</li>
</ol>
<p>回调函数期望一个动画样式对象作为返回值。当flashbar出现时<code>Animated.Value</code>从<code>0</code>到<code>1</code>，当flash bar消失时<code>1</code>到<code>0</code>。因此，可以通过<code><a href="https://reactnative.dev/docs/animatedvalue#interpolate">interpolate</a></code>方法在<code>transitionConfig</code>中使用任何支持的动画风格道具来制作flashbar的动画。</p>
<p>例如，上面的代码片段使用了<code>opacity</code>和<code>scaleY</code>。运行上述代码后，您将看到一个自定义的过渡动画，如下面的预览所示:</p>
<p><img data-attachment-id="143495" data-permalink="https://blog.logrocket.com/custom-transition-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-transition-animation.gif" data-orig-size="730,264" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-transition-animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-transition-animation-300x108.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-transition-animation.gif" decoding="async" class="aligncenter wp-image-143495 size-full jetpack-lazy-image" src="../Images/492650c5133a2ab6557c8b1e18ba90f6.png" alt="Custom transition animation." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-transition-animation.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-transition-animation.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143495" data-permalink="https://blog.logrocket.com/custom-transition-animation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-transition-animation.gif" data-orig-size="730,264" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="custom-transition-animation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-transition-animation-300x108.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-transition-animation.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143495 size-full" src="../Images/492650c5133a2ab6557c8b1e18ba90f6.png" alt="Custom transition animation." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/custom-transition-animation.gif"/></noscript>
<p>尝试使用React Native <a href="https://reactnative.dev/docs/animatedvalue">动画为示例flashbar制作更多自定义动画。值API </a>。</p>
<h2 id="embedding-components-flashbars">将其他组件嵌入flashbars</h2>
<p>Flashbars通常显示带有合适图标的标题和描述。但是，在某些场景中，我们需要在flashbars中嵌入其他组件来提高UX和实现设计需求。例如，您可以添加一个按钮供用户点击，而不是让用户点击flashbar来执行特定操作。</p>
<p>请看下面的示例代码片段:</p>
<pre class="language-js hljs">function handlePress() {
  flashMessage.current.showMessage({
    message: 'Hello flashbars!',
    description: 'React Native flashbar and top notification alert utility',
    animationDuration: 550,
    position: 'bottom',
    renderAfterContent: () =&gt; (
      &lt;View style={{alignItems: 'flex-end', paddingTop: 12}}&gt;
        &lt;View style={{width: '30%'}}&gt;
          &lt;Button title="Details" onPress={() =&gt; {}}/&gt;
        &lt;/View&gt;
      &lt;/View&gt;
    )
  });
}
</pre>
<p>上面的代码片段将在flashbar中嵌入一个按钮元素。看下面的预告:</p>
<p><img data-attachment-id="143497" data-permalink="https://blog.logrocket.com/button-element-flashbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/button-element-flashbar.gif" data-orig-size="730,386" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-element-flashbar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/button-element-flashbar-300x159.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/button-element-flashbar.gif" decoding="async" class="aligncenter wp-image-143497 size-full jetpack-lazy-image" src="../Images/891accc115132dd2c0dd3c849ea53a57.png" alt="Button element in flashbar" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/button-element-flashbar.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/button-element-flashbar.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143497" data-permalink="https://blog.logrocket.com/button-element-flashbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/button-element-flashbar.gif" data-orig-size="730,386" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="button-element-flashbar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/button-element-flashbar-300x159.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/button-element-flashbar.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143497 size-full" src="../Images/891accc115132dd2c0dd3c849ea53a57.png" alt="Button element in flashbar" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/button-element-flashbar.gif"/></noscript>
<p>同样，您可以使用<code>renderBeforeContent</code>在flashbar内容之前嵌入一个定制组件。出于演示目的，上面的代码片段使用了带有内联样式的<code>renderAfterContent</code>的内联函数，但请确保将组件分成函数，并在生产应用程序的样式表中正确定义组件样式。</p>
<h2 id="advanced-flashbar-configurations-features">高级flashbar配置和功能</h2>
<p>我们已经讨论了一些库特性，您可以根据自己的设计需求来创建任何自定义的flashbar。您知道如何添加带有自定义颜色、样式、动画和嵌入组件的flashbars。但是<code>react-native-flash-message</code>库为高级用例提供了更多的选项和特性。</p>
<h3 id="global-access-flashmessagemanager-api"><strong>使用FlashMessageManager API进行全局访问</strong></h3>
<p><code>FlashMessageManager</code>实用程序类允许您管理flashbar实例。例如，以下代码片段禁用所有即将出现的flashbars:</p>
<pre class="language-js hljs">import { FlashMessageManager } from 'react-native-flash-message';
FlashMessageManager.setDisabled(true);
</pre>
<p>以下代码片段将当前flashbar引用存储在<code>ref</code>中:</p>
<pre class="language-js hljs">const ref = FlashMessageManager.getCurrent();
</pre>
<p>然后，您可以通过编程隐藏它:</p>
<pre class="language-js hljs">ref.hideMessage();
</pre>
<h3 id="defining-flashbar-component-messagecomponent-prop"><strong>用</strong> <code>MessageComponent</code> <strong>道具</strong>定义自己的flashbar组件</h3>
<p>内置的flashbar组件可以让你通过道具进行定制。如果您不能使用现有的内置选项来满足您的设计需求，您可以通过<code>MessageComponent</code> prop实现您自己的flashbar组件并将其与库链接。</p>
<p>看下面的<code>FlashMessage</code>用法:</p>
<pre class="language-js hljs">&lt;SafeAreaView style={styles.container}&gt;
  &lt;Button
    title="Show alert"
    onPress={handlePress}/&gt;
  &lt;FlashMessage ref={flashMessage} MessageComponent=
    {({message}) =&gt; (
      &lt;View style={{padding: 20}}&gt;
        &lt;Text style={{fontWeight: 'bold'}}&gt;{message.message}&lt;/Text&gt;
        &lt;Text&gt;{message.description}&lt;/Text&gt;
      &lt;/View&gt;
    )}
  /&gt;
&lt;/SafeAreaView&gt;
</pre>
<p>上面的代码呈现了一个只支持标题和描述的最小flashbar:</p>
<p><img data-attachment-id="143499" data-permalink="https://blog.logrocket.com/title-description-flashbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/title-description-flashbar.gif" data-orig-size="730,288" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="title-description-flashbar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/title-description-flashbar-300x118.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/title-description-flashbar.gif" decoding="async" class="aligncenter wp-image-143499 size-full jetpack-lazy-image" src="../Images/d91e6743bf4f979e1a7959fe8efe440c.png" alt="Title and description in the flashbar." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/title-description-flashbar.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/title-description-flashbar.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="143499" data-permalink="https://blog.logrocket.com/title-description-flashbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/title-description-flashbar.gif" data-orig-size="730,288" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="title-description-flashbar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/title-description-flashbar-300x118.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/title-description-flashbar.gif" decoding="async" loading="lazy" class="aligncenter wp-image-143499 size-full" src="../Images/d91e6743bf4f979e1a7959fe8efe440c.png" alt="Title and description in the flashbar." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/title-description-flashbar.gif"/></noscript>
<p>同样，您可以根据自己的需求制作自己的flashbar组件。我们只覆盖了flashbar组件——动画和全局实用函数将按预期工作，所以您不需要自己重新实现它们。链接一个自定义的flashbar组件是你唯一需要做的事情。</p>
<p>从官方库文档中查看所有支持的消息对象选项和组件属性。库维护者可能会根据GitHub上的<a href="https://github.com/lucasferreira/react-native-flash-message/labels/enhancement">特性请求添加额外的特性。</a></p>
<h2 id="react-native-flash-message-alternatives"><code>react-native-flash-message</code>替代品</h2>
<p>每个流行的React本地库通常都有竞争对手。<code>react-native-flash-message</code>是一个灵活的全功能库，你可以在任何React本地应用中使用——定制基于<code>react-native-flash-message</code>的flashbars是如此简单。</p>
<p>但是，以下<code>react-native-flash-message</code>备选方案也值得一试，因为它们具有竞争优势:</p>

<h2 id="conclusion">结论</h2>
<p>在本教程中，我们学习了如何用流行的<code>react-native-flash-message</code>库创建定制的flashbars。一些开发人员努力使他们的应用程序在所有支持的操作系统上看起来一致，具有平台无关的GUI元素。同时，一些开发人员倾向于使用特定于平台的GUI元素。<code>react-native-flash-message</code>库是一个纯JavaScript包，可以让你在所有支持的平台上创建一致的flashbars。</p>
<p>我们还简要地看了类似于<a href="https://www.npmjs.com/package/react-native-simple-toast"> <code>react-native-simple-toast</code>库</a>的替代库，它呈现特定于平台的、本地的、类似flashbar的toast消息。但是，与<code>react-native-flash-message</code>相比，<code>react-native-simple-toast</code>不支持嵌入JSX组件，因为它是一个简单的原生toast库，而不是一个全功能的flashbar库。</p>
<p><code>react-native-flash-message</code>库支持嵌入JSX组件，并为定制提供了广泛的选项/道具，它提供了比本文中提到的其他选择更灵活的特性。</p>
<p>因此，总的来说，<code>react-native-flash-message</code>库是一个很好的库，可以向React本地应用添加现代的、可定制的flashbars。从UI/UX的角度来看，flashbar概念比传统的toast概念显示了更多的内容，所以不要犹豫在flash bar中嵌入按钮或链接。</p>
<p>Flashbars通常显示低优先级的应用程序事件，因此，对于关键的应用程序事件，传统的警告框(模态对话框)适用于当前的应用程序屏幕。使用flashbars向用户通知低优先级的应用程序事件，而不会阻止用户与应用程序屏幕的交互。查看<a href="https://m2.material.io/components/snackbars">材料Snackbar </a>规格，了解有关flashbar概念的更多信息。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>