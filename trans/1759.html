<html>
<head>
<title>Intro to KubeVela: A better way to ship applications - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>KubeVela 简介:发布应用程序的更好方式</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/#0001-01-01">https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Kubernetes 已经赢得了容器编排之战。但是开发人员仍然需要克服 Kubernetes 的复杂性。这就是 KubeVela 发挥作用的地方。</p>
<p>KubeVela 使得在 Kubernetes 上部署应用程序变得更加容易。您可以指定一个更简单的配置，而不是了解服务、部署、单元和水平单元扩展。让我们更深入地了解一下。</p>
<h2>KubeVela 是什么？</h2>
<p>KubeVela 是一款开源工具，它将复杂的 Kubernetes 工件从开发人员——在某种程度上是平台构建人员——那里抽象出来，以创建更简单的部署体验。</p>
<p>作为一名软件工程师，Kubernetes 工件一开始可能会让人不知所措。这就是 KubeVela 充当急需的桥梁的地方，它允许开发人员更少地担心底层工件。KubeVela 通过提供一个良好的框架来帮助开发者和平台构建者，该框架提供了一个用户友好且高度可扩展的平台。</p>
<p>它的口号是“让运输应用程序更有趣”，我认为它符合这个口号。KubeVela 基于<a href="https://oam.dev/">开放应用模型(OAM) </a>规范，将重点放在应用上，而不是容器或编排器。</p>
<h2>KubeVela 在 Kubernetes 生态系统中的位置？</h2>
<p>Kubernetes 工件，如服务、部署、水平 pod scaler 等。乍一看令人望而生畏，但过一段时间后，你就会习惯了。有许多很棒的工具可以将应用程序部署到 Kubernetes，并抽象出 Kubernetes 工件的内部细节。</p>
<p>这些有用的工具包括<a href="https://helm.sh/">头盔</a>、<a href="https://skaffold.dev/">斯卡福德</a>和<a href="https://draft.sh/">吃水</a>，仅举几例。我们可以在<a href="https://hasura.io/blog/draft-vs-gitkube-vs-helm-vs-ksonnet-vs-metaparticle-vs-skaffold-f5aa9561f948/">这篇有用的文章</a>中找到这些类型工具的很好的比较。</p>
<p>不过，这些工具都不像 KubeVela 那样面向开发者和平台运营商。KubeVela 提供了一种用户友好且简单的方法来定义可以在任何 Kubernetes 集群上轻松部署和更新的应用程序。</p>
<h2>使用 KubeVela 部署一个简单的 Node.js express 应用程序</h2>
<p>在这个演示中，我们将部署一个简单的 Node.js Express 应用程序，它已经被 Docker 化了，Docker 镜像可以在 T2 的 Docker Hub 上找到。</p>
<h3>先决条件</h3>
<p>在开始定义 KubeVela <a href="https://kubevela.io/#/en/developers/learn-appfile">应用程序文件</a>之前，让我们先弄清楚一些先决条件:</p>
<ul>
<li>你应该了解 Kubernetes 和它通常是如何工作的</li>
<li>您必须在您的测试环境中安装并运行<a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/"> kubectl </a>和<a href="https://helm.sh/docs/intro/install/"> Helm </a></li>
<li>您知道容器注册如何工作，以及如何推和拉容器图像</li>
</ul>
<p>我们将在本地<a href="https://kind.sigs.k8s.io/">种类</a> Kubernetes 集群上运行这个演示。根据它的自述，kind 是“一个使用 Docker 容器‘节点’运行本地 Kubernetes 集群的工具。”"</p>
<p>让我们继续使用 kind 设置我们的本地 Kubernetes 集群。我们将在下面概述这些步骤。</p>
<h3>用 kind 建立一个当地的 Kubernetes 集群</h3>
<p>根据您的操作系统，您可能有不同的方法来安装 kind CLI。我使用的是 Mac，所以我运行了以下命令:</p>
<pre class="language-bash hljs">brew install kind
</pre>
<p>您将能够在它的<a href="https://kind.sigs.k8s.io/docs/user/quick-start/#installation">安装页面</a>上找到安装 kind 的特定于操作系统的命令。</p>
<p>在继续之前，确保您的端口 80 和 443 在您的本地机器上是打开的。这意味着您需要停止任何占用 80 端口的服务器，如 Apache 或 NGINX。此外，检查您没有任何其他服务像 NGINX 代理一样占用本地端口 80，它也可能作为<a href="https://hub.docker.com/r/jwilder/nginx-proxy"> Docker 容器</a>运行。</p>
<p>为了用 kind 创建我们的本地 Kubernetes 集群，我们将执行以下命令:</p>
<pre class="language-bash hljs">cat &lt;&lt;EOF | kind create cluster --config=-
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
  kubeadmConfigPatches:
  - |
    kind: InitConfiguration
    nodeRegistration:
      kubeletExtraArgs:
        node-labels: "ingress-ready=true"
  extraPortMappings:
  - containerPort: 80
    hostPort: 80
    protocol: TCP
  - containerPort: 443
    hostPort: 443
    protocol: TCP
EOF
</pre>
<p>这创建了一个 Kubernetes 集群，端口为 80 和 443，从容器映射到本地机器。</p>
<p>它应该需要几分钟时间，并返回如下所示的输出:</p>
<p id="gdcalert1"><img data-attachment-id="47268" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/output-creating-kind-kubernetes-cluster/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster.png" data-orig-size="730,408" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after creating the kind Kubernetes cluster" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster.png" decoding="async" class="aligncenter size-full wp-image-47268 jetpack-lazy-image" src="../Images/c3a5c90580ee9d81a6fefa9e10d7ed52.png" alt="The Output after Creating Our Kind Kubernetes Cluster" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster-300x168.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47268" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/output-creating-kind-kubernetes-cluster/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster.png" data-orig-size="730,408" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after creating the kind Kubernetes cluster" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster-300x168.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47268" src="../Images/c3a5c90580ee9d81a6fefa9e10d7ed52.png" alt="The Output after Creating Our Kind Kubernetes Cluster" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster-300x168.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-creating-kind-kubernetes-cluster.png"/></noscript>
<p>下一步，我们将配置我们的<code>kubectl</code>来使用我们刚刚创建的 Kubernetes 集群，方法是运行:</p>
<pre class="language-bash hljs">kubectl cluster-info --context kind-kind
</pre>
<p>接下来，我们将通过运行以下命令在 Kubernetes 集群中安装 Ingress with kind:</p>
<pre class="language-bash hljs">kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/static/provider/kind/deploy.yaml
</pre>
<p>上面的命令将显示如下内容:</p>
<p><img data-attachment-id="47269" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/output-installing-ingress/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress.png" data-orig-size="730,220" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after installing Ingress" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress-300x90.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress.png" decoding="async" class="aligncenter size-full wp-image-47269 jetpack-lazy-image" src="../Images/61162c63022e33dbe5174957b5675587.png" alt="Output After Installing Ingress" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress-300x90.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47269" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/output-installing-ingress/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress.png" data-orig-size="730,220" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after installing Ingress" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress-300x90.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47269" src="../Images/61162c63022e33dbe5174957b5675587.png" alt="Output After Installing Ingress" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress-300x90.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-ingress.png"/></noscript>
<p>为了快速检查我们是否有任何 pods 在新创建的 Kubernetes 集群上运行，我们可以运行:</p>
<pre class="language-bash hljs">kubectl get po -A
</pre>
<p>它将向我们展示在所有命名空间上运行的 pod，如下所示:</p>
<p><img data-attachment-id="47270" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/pods-running-namespaces/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces.png" data-orig-size="730,188" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pods running on all namespaces" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces-300x77.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces.png" decoding="async" class="aligncenter size-full wp-image-47270 jetpack-lazy-image" src="../Images/9f6b774b49ea2951e0bf2a0962e7c7e4.png" alt="Pods Running on All Namespaces" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces-300x77.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47270" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/pods-running-namespaces/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces.png" data-orig-size="730,188" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pods running on all namespaces" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces-300x77.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47270" src="../Images/9f6b774b49ea2951e0bf2a0962e7c7e4.png" alt="Pods Running on All Namespaces" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces-300x77.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pods-running-namespaces.png"/></noscript>
<p>万岁，我们的 Kubernetes 集群已经启动并运行。下一步是安装 KubeVela —让我们开始吧。</p>
<h3>在本地 K8s 集群中安装 KubeVela</h3>
<p>现在我们已经在 Docker 容器中本地运行了我们的 Kubernetes 集群(尝试<code>docker ps</code>来检查)，我们将继续安装 KubeVela。要使用 Helm 安装 KubeVela，请运行以下命令:</p>
<pre class="language-bash hljs">helm repo add kubevela https://kubevelacharts.oss-cn-hangzhou.aliyuncs.com/core &amp;&amp; helm repo update
</pre>
<p>它将向我们显示以下输出:</p>
<p><img data-attachment-id="47272" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/output-installing-kubevela/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela.png" data-orig-size="730,69" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after installing KubeVela" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela-300x28.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela.png" decoding="async" class="aligncenter size-full wp-image-47272 jetpack-lazy-image" src="../Images/153838ab109e5ebf4ce73d7ea1c6b6f9.png" alt="Output After Installing KubeVela" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela-300x28.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47272" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/output-installing-kubevela/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela.png" data-orig-size="730,69" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after installing KubeVela" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela-300x28.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47272" src="../Images/153838ab109e5ebf4ce73d7ea1c6b6f9.png" alt="Output After Installing KubeVela" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela-300x28.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-installing-kubevela.png"/></noscript>
<p>为了使事情更容易，我们将两个命令组合在一起。第一个获取 KubeVela 的掌舵图，第二个更新帮助回购。</p>
<p>下一步，我们将再次一起运行两个命令:</p>
<pre class="language-bash hljs">kubectl create namespace vela-system &amp;&amp; helm install -n vela-system kubevela kubevela/vela-core --set installCertManager=true
</pre>
<p>这两个命令向我们展示了如下输出:</p>
<p><img data-attachment-id="47274" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/creating-vela-system-namespace/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace.png" data-orig-size="730,178" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after creating the vela-system namespace" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace.png" decoding="async" class="aligncenter size-full wp-image-47274 jetpack-lazy-image" src="../Images/7aa9a8be0a1907db6e8c156c4c8610c3.png" alt="Output After Creating the vela-system Namespace" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace-300x73.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47274" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/creating-vela-system-namespace/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace.png" data-orig-size="730,178" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after creating the vela-system namespace" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47274" src="../Images/7aa9a8be0a1907db6e8c156c4c8610c3.png" alt="Output After Creating the vela-system Namespace" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace-300x73.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/creating-vela-system-namespace.png"/></noscript>
<p>这里的第一个命令在我们的 Kubernetes 集群中创建了<code>vela-system</code>名称空间。第二个命令将 KubeVela Helm chart 安装在前面的命令中使用 cert-manager 创建的名称空间<code>vela-system</code>中。</p>
<p>根据<a href="https://kubevela.io/#/en/install"> KubeVela 安装文档</a>，KubeVela 依靠 cert-manager 为 webhooks 创建证书。</p>
<p>此时，如果我们运行<code>kubectl get po -n vela-system</code>来验证 KubeVela 是否正常运行，它将向我们显示一个名称以<code>kubevela-veal-core-</code>开始运行的 pod。现在我们知道 KubeVela 已经安装在我们的 Kubernetes 集群上，并且正在成功运行。</p>
<p>下一步，我们将安装<code>vela</code> CLI。</p>
<h3>安装 KubeVela CLI</h3>
<p>为了在 Mac 上安装 vela CLI，我运行了以下命令:</p>
<pre class="language-bash hljs">curl -fsSl https://kubevela.io/install.sh | bash
</pre>
<p>根据您的操作系统，您可以在这个<a href="https://kubevela.io/docs/install/#3-get-kubevela-cli">页面</a>上找到相关的命令来获得 CLI。</p>
<p>要验证您的<code>vela</code> CLI 是否安装正确，运行<code>vela version</code>，您应该会看到如下输出:</p>
<p><img data-attachment-id="47283" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/output-running-vela-version/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version.png" data-orig-size="562,77" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after running vela-version" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version-300x41.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version.png" decoding="async" class="aligncenter size-full wp-image-47283 jetpack-lazy-image" src="../Images/b55b886d20c74c3a1e216ad62f7ccbb0.png" alt="Output After Running vela-version Command" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version.png 562w, https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version-300x41.png 300w" data-lazy-sizes="(max-width: 562px) 100vw, 562px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47283" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/output-running-vela-version/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version.png" data-orig-size="562,77" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Output after running vela-version" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version-300x41.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47283" src="../Images/b55b886d20c74c3a1e216ad62f7ccbb0.png" alt="Output After Running vela-version Command" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version.png 562w, https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version-300x41.png 300w" sizes="(max-width: 562px) 100vw, 562px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/output-running-vela-version.png"/></noscript>
<p>我们将使用<code>vela</code> CLI 创建一个<code>vela.yaml</code>文件，该文件定义了应该如何在 Kubernetes 上部署应用程序。现在是时候使用<code>vela</code>命令行界面了。</p>
<h3>并部署我们的 Node.js 应用程序</h3>
<p>因此，我们将“Velaize”我们现有的已经 dockerized 的 Node.js express 演示应用程序。为了使事情更简单，我已经将<a href="https://github.com/geshan/nodejs-docker-express">应用程序</a>推送到<a href="https://hub.docker.com/r/geshan/nodejs-docker-express"> Docker Hub </a>。您可能已经知道，要部署我们的应用程序，应该将容器推送到容器注册中心。在这个演示中，我们将使用 Docker Hub 作为我们的容器注册中心。</p>
<p>要在您的 Kubernetes 集群上尝试演示应用程序，您可以转到一个空文件夹并运行:</p>
<pre class="language-bash hljs">vela init
</pre>
<p>它会问你一些问题，如应用程序的名称、服务的名称、工作负载类型和服务的 Docker 映像。如下图加满；这里最主要的是服务的映像，它指向托管在 Docker Hub 上的<code>geshan/nodejs-docker-express</code>:</p>
<p><img data-attachment-id="47285" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/running-app-kubernetes-cluster/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running the app on our Kubernetes cluster" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster.png" decoding="async" class="aligncenter size-full wp-image-47285 jetpack-lazy-image" src="../Images/f62a2342fc7dba28961f19619a1b6294.png" alt="Running the App on Our Kubernetes Cluster" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster-300x195.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47285" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/running-app-kubernetes-cluster/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster.png" data-orig-size="730,474" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running the app on our Kubernetes cluster" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47285" src="../Images/f62a2342fc7dba28961f19619a1b6294.png" alt="Running the App on Our Kubernetes Cluster" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster-300x195.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/running-app-kubernetes-cluster.png"/></noscript>
<p>我们的 Node.js 应用程序将在端口 3000 上运行，默认情况下，Docker 图像的最新标记将由 KubeVela 拉入并部署到 Kubernetes。</p>
<p>运行<code>vela status testapp</code>查看应用程序的状态，如下所示:</p>
<p><img data-attachment-id="47286" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/viewing-app-status/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status.png" data-orig-size="636,325" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Viewing our app status" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status.png" decoding="async" class="aligncenter size-full wp-image-47286 jetpack-lazy-image" src="../Images/7da4355ba009c4617e91ed2d0ac24fc1.png" alt="Viewing the Status of Our App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status.png 636w, https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status-300x153.png 300w" data-lazy-sizes="(max-width: 636px) 100vw, 636px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47286" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/viewing-app-status/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status.png" data-orig-size="636,325" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Viewing our app status" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47286" src="../Images/7da4355ba009c4617e91ed2d0ac24fc1.png" alt="Viewing the Status of Our App" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status.png 636w, https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status-300x153.png 300w" sizes="(max-width: 636px) 100vw, 636px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/viewing-app-status.png"/></noscript>
<p>另一种快速检查的方法是运行<code>kubectl get po</code>，它应该显示一个 pod 正在运行。</p>
<p><code>vela init</code>命令创建了一个包含以下内容的<code>vela.yaml</code>文件:</p>
<pre class="language-yaml hljs">createTime: "2021-02-09T13:51:25.723862+11:00"
name: testapp
services:
  node-express:
    image: geshan/nodejs-docker-express
    port: 3000
    type: webservice
updateTime: "2021-02-09T13:51:25.723863+11:00"
</pre>
<h3>测试 Node.js 应用程序</h3>
<p>要测试在使用 KubeVela 部署的本地 K8s 集群上运行的 Node.js Express 应用程序，请运行以下命令:</p>
<pre class="language-bash hljs">vela port-forward testapp
</pre>
<p>它将显示如下输出:</p>
<p><img data-attachment-id="47287" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/testing-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app.png" data-orig-size="699,139" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Testing our app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app-300x60.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app.png" decoding="async" class="aligncenter size-full wp-image-47287 jetpack-lazy-image" src="../Images/2caa5de8c0ec0f7e602eb818fea4e057.png" alt="Testing Our App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app.png 699w, https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app-300x60.png 300w" data-lazy-sizes="(max-width: 699px) 100vw, 699px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47287" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/testing-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app.png" data-orig-size="699,139" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Testing our app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app-300x60.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47287" src="../Images/2caa5de8c0ec0f7e602eb818fea4e057.png" alt="Testing Our App" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app.png 699w, https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app-300x60.png 300w" sizes="(max-width: 699px) 100vw, 699px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/testing-app.png"/></noscript>
<p>现在，我们可以点击浏览器上的<code><a href="https://127.0.0.1:3000" rel="nofollow">https://127.0.0.1:3000</a></code>来查看我们的应用程序在容器上的 Kubernetes 集群中运行，如下所示:</p>
<p><img data-attachment-id="47290" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/app-running-successfully-kubernetes-cluster/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster.png" data-orig-size="706,292" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="App running successfully on the Kubernetes cluster" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster-300x124.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster.png" decoding="async" class="aligncenter size-full wp-image-47290 jetpack-lazy-image" src="../Images/955c343a1e24558fa65a8479c64b7889.png" alt="Viewing Our App Running Successfully on Our Kubernetes Cluster" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster.png 706w, https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster-300x124.png 300w" data-lazy-sizes="(max-width: 706px) 100vw, 706px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47290" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/app-running-successfully-kubernetes-cluster/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster.png" data-orig-size="706,292" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="App running successfully on the Kubernetes cluster" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster-300x124.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47290" src="../Images/955c343a1e24558fa65a8479c64b7889.png" alt="Viewing Our App Running Successfully on Our Kubernetes Cluster" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster.png 706w, https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster-300x124.png 300w" sizes="(max-width: 706px) 100vw, 706px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/app-running-successfully-kubernetes-cluster.png"/></noscript>
<p>此外，当 Docker 映像发生变化并且更新被推送到 Docker 映像注册中心时，我们可以运行<code>vela up</code>来重新部署应用程序。</p>
<h3>使用 KubeVela 部署变更</h3>
<p>出于演示目的，我将把消息从“欢迎使用 Docker 快递”改为“欢迎使用 Docker 和 KubeVela 快递”，并将<a href="https://docs.docker.com/engine/reference/commandline/push/">作为名为<code>kubevela</code>的新 Docker 标签推送</a>。默认情况下，直到现在，它一直使用<code>latest</code>标签。</p>
<p>然后，我们将更改<code>vela.yaml</code>文件中的标签，如下所示:</p>
<pre class="language-yaml hljs">createTime: "2021-02-09T13:51:25.723862+11:00"
name: testapp
services:
  node-express:
    image: geshan/nodejs-docker-express:kubevela
    port: 3000
    type: webservice
updateTime: "2021-02-09T13:51:25.723863+11:00"
</pre>
<p>变化是将标签作为<code>image: geshan/nodejs-docker-express:kubevela</code>添加到 Docker 图像中。假设标签可用，我们可以:</p>
<pre class="language-bash hljs">vela up
vela status testapp #confirm the app is up and healthy
vela port-forward testapp
</pre>
<p>然后，我们可以在浏览器上的<code><a href="http://127.0.0.1:3000" rel="nofollow">http://127.0.0.1:3000</a></code>处看到新的变化，如下所示:</p>
<p><img data-attachment-id="47292" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/new-changes-to-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app.png" data-orig-size="631,265" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Viewing changes to our app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app-300x126.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app.png" decoding="async" class="aligncenter size-full wp-image-47292 jetpack-lazy-image" src="../Images/18509de04f1e3ff36a0b705ce7037beb.png" alt="Viewing the Changes to Our App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app.png 631w, https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app-300x126.png 300w" data-lazy-sizes="(max-width: 631px) 100vw, 631px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="47292" data-permalink="https://blog.logrocket.com/kubevela-intro-better-way-ship-applications/new-changes-to-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app.png" data-orig-size="631,265" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Viewing changes to our app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app-300x126.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-47292" src="../Images/18509de04f1e3ff36a0b705ce7037beb.png" alt="Viewing the Changes to Our App" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app.png 631w, https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app-300x126.png 300w" sizes="(max-width: 631px) 100vw, 631px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/new-changes-to-app.png"/></noscript>
<p>你有它！我们运行了一个小型 Node.js Express 应用程序，该应用程序之前已经在本地 Kubernetes (kind)集群上与 KubeVela 进行了对接。我认为这比涉足<a href="https://kubernetes.io/docs/concepts/services-networking/service/">服务</a>、<a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">部署</a>和其他 Kubernetes 工件要容易得多。</p>
<p>本地的 Kubernetes 集群应该被视为概念验证的平台。当我们希望将我们的容器化应用部署到生产级 Kubernetes 集群时，我们可以实现 KubeVela 增加的易用性和灵活性。</p>
<p>由于这是一篇介绍文章，我决定不深入研究<a href="https://kubevela.io/#/en/developers/extensions/set-route">路由</a>和<a href="https://kubevela.io/#/en/developers/extensions/set-autoscale">自动缩放</a>部分。也有一些<a href="https://kubevela.io/#/en/developers/alternative-cmd">替代命令</a>来增加这些功能。我会让你去探索库比韦拉的力量。</p>
<h2>结论</h2>
<p>我们已经看到了如何使用 KubeVela 将 Node.js Express 应用程序部署到 Kubernetes。KubeVela 使得在 Kubernetes 中部署任何容器化的应用程序变得更加容易和用户友好。如果你和你的团队冒险进入 Kubernetes 景观，我会推荐尝试 KubeVela，因为它的易用性和灵活的架构。</p><div class="code-block code-block-1">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket 会告诉您应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket 自动聚合客户端错误、JS 异常、前端性能指标和用户交互。然后 LogRocket 使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的 bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试 LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>