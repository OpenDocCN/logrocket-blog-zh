<html>
<head>
<title>Building a simple login form with Node.js - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Node.js - LogRocket Blog构建一个简单的登录表单</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-simple-login-form-node-js/#0001-01-01">https://blog.logrocket.com/building-simple-login-form-node-js/#0001-01-01</a></blockquote><div><article class="article-post">
<p>登录表单用在网站、web应用程序或移动应用程序的前端，用于收集验证用户是否已在系统数据库中注册所需的信息。</p>
<p>认证过程很简单。首先，用户通过登录表单向后端提交一些凭证——通常是电子邮件和密码。然后，后端应用程序检查电子邮件和密码是否在数据库中。从那里，后端应用程序要么授予用户访问权限，要么要求他们注册。</p>
<p>在本教程中，我们将学习如何用<a href="https://blog.logrocket.com/tag/node/" target="_blank" rel="noopener"> Node.js </a>构建一个简单的登录表单。该表单将要求用户注册一个帐户。然后，我们将使用输入的信息，并在用户登录之前将其存储在MySQL数据库中。</p>
<p>现在我们已经对项目有了一个大致的了解，让我们开始构建吧！</p>
<p><em>向前跳转:</em></p>

<h2>先决条件</h2>
<p>您需要在本地开发机器上安装<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener"> Node.js </a>和<a href="https://www.npmjs.com/" target="_blank" rel="noopener"> npm </a>来遵循本教程。如果您不确定是否安装了它们，请运行以下命令来检查它们的可用性:</p>
<pre class="language-bash hljs"># To check if Node is installed, run:
node -v

# To check if Node is installed, run:
npm -v
</pre>
<p>除了Node.js，您还需要安装并运行一个MySQL服务器。你可以使用<a href="https://dev.mysql.com/downloads/installer/" target="_blank" rel="noopener">独立的MySQL </a>安装程序或者内置MySQL的服务器发行版，比如<a href="https://www.wampserver.com/en/" target="_blank" rel="noopener"> WAMP </a>和<a href="https://www.apachefriends.org/download.html" target="_blank" rel="noopener"> XAMP </a>。</p>
<h2 id="getting-started-building-node-js-login-form">构建Node.js登录表单</h2>
<p>让我们为应用程序创建一个新文件夹，并使用带有<code>cd</code>指令的命令行导航到该文件夹:</p>
<pre class="language-bash hljs">cd path/to/your/folder
</pre>
<p>然后，运行以下命令安装本教程所需的依赖项:</p>
<pre class="language-bash hljs">npm i express mysql dotenv hbs bcryptjs
</pre>
<p>让我解释一下每个库的用途:</p>
<ul>
<li><a href="https://www.npmjs.com/package/express" target="_blank" rel="noopener"> Express </a>:用于创建API和web路由，设置app后端</li>
<li>MySQL :用于连接我们本地的MySQL服务器</li>
<li><a href="https://www.npmjs.com/package/dotenv" target="_blank" rel="noopener"> dotenv </a>:用于存储不应该在app源代码中公开的环境变量</li>
<li><a href="https://www.npmjs.com/package/hbs" target="_blank" rel="noopener"> hbs </a>:用于在服务器上渲染HTML</li>
<li><a href="https://www.npmjs.com/package/bcrypt" target="_blank" rel="noopener"> Bcryptjs </a>:用于散列密码</li>
</ul>
<p>另外，我推荐安装<a href="https://www.npmjs.com/package/nodemon" target="_blank" rel="noopener"> nodemon </a>，它会在检测到文件更改时自动重启服务器，节省您宝贵的开发时间。使用以下命令安装它:</p>
<pre class="language-bash hljs">npm i nodemon --save
</pre>
<p>最后，用代码编辑器打开应用程序的<code>package.json</code>文件，并在<code>scripts</code>对象中添加以下字段:</p>
<pre class="language-javascript hljs">"start": "nodemon app.js"
</pre>
<p>现在，我们已经完成了项目设置。接下来，我们将连接到MySQL数据库，并创建一个表来存储用户登录信息。</p>
<h2 id="setting-up-database-connection">在Node.js中设置数据库连接</h2>
<p>首先在MySQL环境中创建一个名为<code>login-db</code>的新数据库。之后，用ID、姓名、电子邮件和密码构建一个<code>users</code>表。将ID设置为<code>INT</code>和<code>AUTOINCREMENT</code>，将姓名、邮箱和密码设置为<code>VARCHAR</code>。</p>
<p>最终，<code>phpMyAdmin</code>中的数据库将如下所示:</p>
<p><img data-attachment-id="135164" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/login-form-database-schema-node-js/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js.png" data-orig-size="894,218" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Database schema for a Node.js login form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js.png" decoding="async" class="aligncenter size-full wp-image-135164 jetpack-lazy-image" src="../Images/4dca59ea0e07336e1806bd1b5ef34c59.png" alt="Database Schema for a Node.js Login Form" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js.png 894w, https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js-300x73.png 300w, https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js-768x187.png 768w" data-lazy-sizes="(max-width: 894px) 100vw, 894px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135164" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/login-form-database-schema-node-js/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js.png" data-orig-size="894,218" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Database schema for a Node.js login form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135164" src="../Images/4dca59ea0e07336e1806bd1b5ef34c59.png" alt="Database Schema for a Node.js Login Form" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js.png 894w, https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js-300x73.png 300w, https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js-768x187.png 768w" sizes="(max-width: 894px) 100vw, 894px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Login-form-database-schema-node-js.png"/></noscript>
<p>然后，在应用程序的根文件夹中创建一个<code>.env</code>文件。在<code>.env</code>中，将您的数据库名称、主机域、用户名和密码值添加到它们对应的变量名中。以下是MySQL的默认值:</p>
<pre class="language-javascript hljs">DATABASE = login-db
DATABASE_HOST = localhost
DATABASE_ROOT = root
DATABASE_PASSWORD =
</pre>
<p>一旦你设置了变量，在根文件夹中创建<code>app.js</code>。用文本编辑器打开它，并导入以下依赖项:</p>
<pre class="language-javascript hljs">const express = require('express');
const mysql = require("mysql")
const dotenv = require('dotenv')
</pre>
<p>然后，创建一个快速应用程序:</p>
<pre class="language-javascript hljs">const app = express();
</pre>
<p>之后，指定环境变量的路径:</p>
<pre class="language-javascript hljs">dotenv.config({ path: './.env'})
</pre>
<p>这里，我们告诉服务器在与<code>app.js</code>相同的目录中查找<code>.env</code>。</p>
<p>接下来，从<code>process.env</code>访问变量，并将它们传递给各自的连接属性:</p>
<pre class="language-javascript hljs">const db = mysql.createConnection({
    host: process.env.DATABASE_HOST,
    user: process.env.DATABASE_USER,
    password: process.env.DATABASE_PASSWORD,
    database: process.env.DATABASE
})
</pre>
<p>现在，您已经使用数据库凭据配置了连接，请连接数据库:</p>
<pre class="language-javascript hljs">db.connect((error) =&gt; {
    if(error) {
        console.log(error)
    } else {
        console.log("MySQL connected!")
    }
})
</pre>
<p>连接要么成功，要么失败。如果失败，我们将在回调中看到<code>error</code>，并在控制台上打印出来。否则，我们输出<code>"MySQL connected!"</code>字符串。</p>
<p>最后，通过在终端上运行以下命令来启动服务器:</p>
<pre class="language-bash hljs">npm start
</pre>
<p>如果一切顺利，你会看到<code>MySQL is connected</code>。让我们创建主页。</p>
<h2 id="setting-up-homepage">设置主页</h2>
<p>在项目的根文件夹中，创建<code>views</code>文件夹。然后，在<code>views</code>中，创建<code>index.hbs</code>、<code>register.hbs</code>和<code>login.hbs</code>。正如您可能已经猜到的，这些是主页、登录和注册页面的手柄文件。</p>
<p>现在，对于它们中的每一个，包括基本的HTML标记:</p>
<pre class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;    
    &lt;link href="https://cdn.jsdelivr.net/npm/<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5c3e3333282f282e3d2c1c69726e726d">[email protected]</a>/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous"&gt;
  &lt;/head&gt;
&lt;/head&gt;
&lt;body&gt;

{{!-- Navigation links --}}
    &lt;nav&gt;
        &lt;h4&gt;Node MySQL Login&lt;/h4&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href="/login"&gt;Login&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href="/register"&gt;Register&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/nav&gt;

    {{!-- Body of each page will go here --}}
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>这里，我们将两个<code>&lt;link&gt;</code>元素链接到我们的自定义<code>style sheet</code>和引导CSS库。我们还创建了一个导航菜单，它将在所有页面中重复使用，以包含登录和注册页面的链接。</p>
<p>接下来，在<code>index.hbs</code>中，使用<code>&lt;body&gt;</code>标签中的以下标记将一个<a href="https://getbootstrap.com/docs/4.0/components/jumbotron/" target="_blank" rel="noopener">大屏幕</a>添加到您网站的主页中:</p>
<pre class="language-html hljs">    {{!-- Body --}}
    &lt;div class="container mt-4"&gt;
        &lt;div class="mt-4 p-5 bg-primary text-white rounded"&gt;
            &lt;h1&gt;My Login Project&lt;/h1&gt;
            &lt;p&gt;This project demonstrates how to implement login and register functionalities with Node.js and MySQL &lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
</pre>
<p>然后，在<code>app.js</code>中将<code>view engine</code>指定为把手:</p>
<pre class="language-javascript hljs">app.set('view engine', 'hbs')
</pre>
<p>从那里，导入<code>path</code>来指定车把模板中使用的静态资产:</p>
<pre class="language-javascript hljs">// other imports
const path = require("path")

const publicDir = path.join(__dirname, './public')

app.use(express.static(publicDir))</pre>
<p>接下来，在主页上注册渲染<code>index.hbs</code>的路线:</p>
<pre class="language-javascript hljs">app.get("/", (req, res) =&gt; {
    res.render("index")
})
</pre>
<p>最后，在<code>app.listen()</code>中为app配置端口:</p>
<pre class="language-javascript hljs">app.listen(5000, ()=&gt; {
    console.log("server started on port 5000")
})
</pre>
<p>通过运行<code>npm start</code>启动您的服务器，然后导航到<code>localhost:5000</code>查看主页:</p>
<p><img data-attachment-id="135162" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/node-js-mysql-login-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form.png" data-orig-size="603,345" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Node.js login project using MySQL" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form-300x172.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form.png" decoding="async" class="aligncenter size-full wp-image-135162 jetpack-lazy-image" src="../Images/3555a4ee9e41ce21137518469934b593.png" alt="Node.js Login Project Using MySQL" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form.png 603w, https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form-300x172.png 300w" data-lazy-sizes="(max-width: 603px) 100vw, 603px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135162" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/node-js-mysql-login-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form.png" data-orig-size="603,345" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Node.js login project using MySQL" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form-300x172.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135162" src="../Images/3555a4ee9e41ce21137518469934b593.png" alt="Node.js Login Project Using MySQL" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form.png 603w, https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form-300x172.png 300w" sizes="(max-width: 603px) 100vw, 603px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-mysql-login-form.png"/></noscript>
<p>接下来，我们将创建注册和登录表单。</p>
<h2 id="creating-login-register-forms">在Node.js中创建登录和注册表单</h2>
<p>在<code>views</code>中打开<code>register.hbs</code>，在<code>&lt;body&gt;</code>内和<code>&lt;nav&gt;</code>后包含以下标记:</p>
<pre class="language-html hljs">&lt;div class="container mt-4"&gt;
        &lt;div class="card" style="width: 18rem;"&gt;            
            &lt;div class="card-header"&gt;Register Form&lt;/div&gt;    
            &lt;div class="card-body"&gt;
                &lt;form action="/auth/register" method="POST"&gt;
                    &lt;div class="mb-3"&gt;
                        &lt;label for="name-reg" class="form-label"&gt;Name&lt;/label&gt;
                        &lt;input type="text" class="form-control" id="name-reg" name="name"&gt;                        
                    &lt;/div&gt;
                    &lt;div class="mb-3"&gt;
                        &lt;label for="email-reg" class="form-label"&gt;Email&lt;/label&gt;
                        &lt;input type="text" class="form-control" id="email-reg" name="email"&gt;                        
                    &lt;/div&gt;
                    &lt;div class="mb-3"&gt;
                        &lt;label for="password-reg" class="form-label"&gt;Password&lt;/label&gt;
                        &lt;input type="password" class="form-control" id="password-reg" name="password"&gt;
                    &lt;/div&gt;
                    &lt;div class="mb-3"&gt;
                        &lt;label for="password-conf-reg" class="form-label"&gt;Confirm Password&lt;/label&gt;
                        &lt;input type="password" class="form-control" id="password-conf-reg" name="password-confirm"&gt;
                    &lt;/div&gt;

                    &lt;button type="submit" class="btn btn-primary"&gt;Submit&lt;/button&gt;
                &lt;/form&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
</pre>
<p>我们将创建一个HTML表单，输入用户名、电子邮件、密码和密码确认。该表单会将数据发送到我们在<code>action</code>中指定的路线。</p>
<p>接下来，在<code>app.js</code>中，将路线注册到注册页面并保存文件:</p>
<pre class="language-javascript hljs">app.get("/register", (req, res) =&gt; {
    res.render("register")
})
</pre>
<p>之后，导航到您的浏览器并在导航栏中选择<strong>注册</strong>。您应该会看到注册表:</p>
<p><img data-attachment-id="135160" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/node-js-login-registration-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form.png" data-orig-size="645,591" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Node.js login and registration form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form-300x275.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form.png" decoding="async" class="aligncenter size-full wp-image-135160 jetpack-lazy-image" src="../Images/423e3da40104f4128c29efd83dda37b9.png" alt="Node.js Login and Registration Form" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form.png 645w, https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form-300x275.png 300w" data-lazy-sizes="(max-width: 645px) 100vw, 645px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135160" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/node-js-login-registration-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form.png" data-orig-size="645,591" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Node.js login and registration form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form-300x275.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135160" src="../Images/423e3da40104f4128c29efd83dda37b9.png" alt="Node.js Login and Registration Form" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form.png 645w, https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form-300x275.png 300w" sizes="(max-width: 645px) 100vw, 645px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-registration-form.png"/></noscript>
<p>要创建登录表单，打开<code>views</code>中的<code>login.hbs</code>，使用与上面相同的表单。删除<code>inputs</code>和<code>labels</code>确认邮件和密码。另外，将<code>id</code>属性和卡片标题从<strong>登记表</strong>更改为<strong>登录表</strong>。</p>
<p>接下来，在<code>app.js</code>中注册登录路径:</p>
<pre class="language-javascript hljs">app.get("/login", (req, res) =&gt; {
    res.render("login")
})
</pre>
<p>保存文件并转到浏览器。当您选择导航栏上的<strong>登录</strong>时，它应该是这样的:</p>
<p><img data-attachment-id="135158" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/node-js-login-form-name-password/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password.png" data-orig-size="648,437" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Node.js login form with name and password" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password-300x202.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password.png" decoding="async" class="aligncenter size-full wp-image-135158 jetpack-lazy-image" src="../Images/bb24c0df6d0c24c553be998e8cfa6eaa.png" alt="Node.js Login Form With Name and Password" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password.png 648w, https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password-300x202.png 300w" data-lazy-sizes="(max-width: 648px) 100vw, 648px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135158" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/node-js-login-form-name-password/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password.png" data-orig-size="648,437" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Node.js login form with name and password" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password-300x202.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135158" src="../Images/bb24c0df6d0c24c553be998e8cfa6eaa.png" alt="Node.js Login Form With Name and Password" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password.png 648w, https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password-300x202.png 300w" sizes="(max-width: 648px) 100vw, 648px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Node-js-login-form-name-password.png"/></noscript>
<p>现在我们已经完成了前端的工作，让我们把注意力转移到在后端注册用户上。</p>
<h2 id="registering-user">注册用户</h2>
<p>提交注册表单时，表单值将被发送到<code>/auth/register</code>路线。让我们建造它！</p>
<p>在<code>app.js</code>中，通过导入<code>bcrypt</code>开始:</p>
<pre class="language-javascript hljs">const bcrypt = require("bcryptjs")
</pre>
<p>接下来，将Express服务器配置为以<code><a href="https://blog.logrocket.com/reading-writing-json-files-nodejs-complete-tutorial/" target="_blank" rel="noopener">JSON</a></code>的形式接收表单值:</p>
<pre class="language-javascript hljs">app.use(express.urlencoded({extended: 'false'}))
app.use(express.json())
</pre>
<p>然后，创建<code>auth/register</code>并检索用户的表单值:</p>
<pre class="language-javascript hljs">app.post("/auth/register", (req, res) =&gt; {    
    const { name, email, password, password_confirm } = req.body

    // db.query() code goes here
})
</pre>
<p>现在您已经有了值，查询数据库以检查电子邮件是否在服务器上。这样，用户就不能用同一个电子邮件注册多次:</p>
<pre class="language-javascript hljs">    db.query('SELECT email FROM users WHERE email = ?', [email], async (error, res) =&gt; {
       // remaining code goes here
    })
</pre>
<p>如果在执行查询时出现错误，我们将访问<code>error</code>并将其显示在服务器的终端上:</p>
<pre class="language-javascript hljs">        if(error){
            console.log(error)
        }
        // other code
</pre>
<p>接下来，检查是否有结果以及两个密码是否匹配。如果有任何条件为真，则重新呈现注册页面以通知用户该电子邮件已被使用或密码不匹配:</p>
<pre class="language-javascript hljs">        if( result.length &gt; 0 ) {
            return res.render('register', {
                message: 'This email is already in use'
            })
        } else if(password !== password_confirm) {
            return res.render('register', {
                message: 'Passwords do not match!'
            })
        }
       // other code
</pre>
<p>如果上述条件不成立，用户将被添加到数据库中。加密密码，并将其与其他值一起发布到数据库:</p>
<pre class="language-javascript hljs">        let hashedPassword = await bcrypt.hash(password, 8)

        db.query('INSERT INTO users SET?', {name: name, email: email, password: hashedPassword}, (err, res) =&gt; {
            if(error) {
                console.log(error)
            } else {
                return res.render('register', {
                    message: 'User registered!'
                })
            }
        })
</pre>
<p>如果有错误，我们会在控制台上打印出来。否则，重新呈现页面，并向用户发送一条消息，表明他们已注册。</p>
<p>需要注意的是，要显示用户消息，您需要编辑<code>register.hbs</code>并在<code>&lt;div&gt;</code>下包含以下模板:</p>
<pre class="language-html hljs">{{#if message }}
    &lt;h4 class="alert alert-danger mt-4"&gt;{{message}}&lt;/h4&gt;
{{/if}}
</pre>
<p>最后，保存所有文件更改，并在浏览器上测试应用程序:</p>
<p><img data-attachment-id="135156" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/user-registered-node-js-login-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form.png" data-orig-size="396,579" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="User registered alert in Node.js login form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form-205x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form.png" decoding="async" class="aligncenter size-full wp-image-135156 jetpack-lazy-image" src="../Images/6947e9280cb3a4d29b4a69cd3a340d1d.png" alt="User Registered Alert in Node.js Login Form" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form.png 396w, https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form-205x300.png 205w" data-lazy-sizes="(max-width: 396px) 100vw, 396px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135156" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/user-registered-node-js-login-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form.png" data-orig-size="396,579" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="User registered alert in Node.js login form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form-205x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135156" src="../Images/6947e9280cb3a4d29b4a69cd3a340d1d.png" alt="User Registered Alert in Node.js Login Form" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form.png 396w, https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form-205x300.png 205w" sizes="(max-width: 396px) 100vw, 396px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/User-registered-node-js-login-form.png"/></noscript>
<p><img data-attachment-id="135154" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/user-node-js-login-information-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database.png" data-orig-size="885,134" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Node.js user login form database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database-300x45.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database.png" decoding="async" class="aligncenter size-full wp-image-135154 jetpack-lazy-image" src="../Images/bec917df5106efa47b9edc899ca90607.png" alt="Node.js User Login Form Database" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database.png 885w, https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database-300x45.png 300w, https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database-768x116.png 768w" data-lazy-sizes="(max-width: 885px) 100vw, 885px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135154" data-permalink="https://blog.logrocket.com/building-simple-login-form-node-js/attachment/user-node-js-login-information-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database.png" data-orig-size="885,134" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Node.js user login form database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database-300x45.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135154" src="../Images/bec917df5106efa47b9edc899ca90607.png" alt="Node.js User Login Form Database" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database.png 885w, https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database-300x45.png 300w, https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database-768x116.png 768w" sizes="(max-width: 885px) 100vw, 885px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/User-node-js-login-information-database.png"/></noscript>
<h2>结论</h2>
<p>我希望你在阅读本教程时和我在创建它时一样开心。随意从<a href="https://github.com/KingsleyUbah/Nodejs-form" target="_blank" rel="noopener"> GitHub库</a>中派生并使用代码。毕竟，把手弄脏才是最好的学习方式。</p>
<p>如有疑问，在下方评论！</p><div class="code-block code-block-23">
<div class="blog-plug inline-plug node-plug"><h2>200只<img src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> <noscript> <img data-lazy-fallback="1" src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> </noscript>显示器出现故障，生产中网络请求缓慢</h2><p>部署基于节点的web应用程序或网站是容易的部分。确保您的节点实例继续为您的应用程序提供资源是事情变得更加困难的地方。如果您对确保对后端或第三方服务的请求成功感兴趣，</p><a href="https://lp.logrocket.com/blg/node-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer"><img src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/><noscript><img data-lazy-fallback="1" src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/></noscript></a><a href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的DVR，记录下用户与你的应用程序交互时发生的一切。您可以汇总并报告有问题的网络请求，以快速了解根本原因，而不是猜测问题发生的原因。</p><p>LogRocket检测您的应用程序以记录基线性能计时，如页面加载时间、到达第一个字节的时间、慢速网络请求，还记录Redux、NgRx和Vuex操作/状态。</p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a><p>. </p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>