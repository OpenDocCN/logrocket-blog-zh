<html>
<head>
<title>Build a React comment form with @mention functionality - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>构建一个带有@提及功能的React评论表单</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-react-comment-form-mention-functionality/#0001-01-01">https://blog.logrocket.com/build-react-comment-form-mention-functionality/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在引入<code>@mention</code>功能之前，评论线程和消息曾经是相当混乱的。虽然你可以在一个线程中发送消息，但通常没有办法知道消息是给谁的，也没有办法让那些没有参与到对话中的人参与进来。</p>
<p>有了<code>@mention</code>的介绍，你可以提到朋友(或者善意的社交媒体专家)，邀请他们加入讨论。</p>
<p>你还可以在脸书、Dropbox、WhatsApp和Gmail等各种应用程序中找到带有<code>@mention</code>功能的表单。</p>
<p>本文将研究如何使用React中包含的<code>@mention</code>功能构建一个表单。我们将特别使用<a href="https://www.npmjs.com/package/react-mentions" target="_blank" rel="noopener"> <code>react-mentions</code> </a>包。</p>
<p>你可以在<a href="https://github.com/IsaacThaJunior/Handling-React-mention-functionality" target="_blank" rel="noopener"> my Github repo </a>中找到本教程的完整代码。我们开始吧！</p>


<p>让我们用下面的命令创建一个新的React应用程序:</p>
<pre class="language-javascript hljs">npx create-react-app react-mentions
</pre>
<p>如果您使用Yarn，运行以下命令:</p>
<pre class="language-javascript hljs">yarn create react-app react-mentions
</pre>
<p>在本教程的剩余部分，我将使用Yarn。</p>
<p>接下来，安装<code>react-mentions</code>包，如下所示:</p>
<pre class="language-javascript hljs">yarn add react-mentions
</pre>
<p><code>react-mentions</code>包为渲染引用导出了两个React组件:<code>MentionsInput</code>组件和<code>Mention</code>组件。<code>MentionsInput</code>是用于呈现文本区域控件的主要组件，可以将一个或多个<code>Mention</code>组件作为子组件。</p>
<p><code>Mention</code>组件表示一类可提及对象的数据源，包括用户、问题等等。</p>
<h2 id="using-mentions-input-mention-components">使用<code>MentionsInput</code>和<code>Mention</code>组件</h2>
<p>让我们在应用程序中实现<code>react-mentions</code>。转到<code>App.js</code>文件，用下面的代码块替换整个代码:</p>
<pre class="language-javascript hljs">import { Mention, MentionsInput } from "react-mentions";

function App() {
  return (
    &lt;div&gt;
      &lt;h2&gt;Let's get started&lt;/h2&gt;
      &lt;MentionsInput&gt;
        &lt;Mention /&gt;
      &lt;/MentionsInput&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>当我们用<code>yarn start</code>启动开发服务器时，我们应该会看到如下图所示的输入框:</p>
<p><img data-attachment-id="126729" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/lets-get-started/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started.png" data-orig-size="730,91" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="lets-get-started" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started.png" decoding="async" class="aligncenter size-full wp-image-126729 jetpack-lazy-image" src="../Images/8a500fb07d888d3e7ad669280d2dbf63.png" alt="Lets Get Started Screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started-300x37.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126729" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/lets-get-started/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started.png" data-orig-size="730,91" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="lets-get-started" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126729" src="../Images/8a500fb07d888d3e7ad669280d2dbf63.png" alt="Lets Get Started Screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started-300x37.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/lets-get-started.png"/></noscript>
<p>接下来，我们将创建一个伪数据数组，提供给<code>Mention</code>组件。数据必须有<code>id</code>和<code>display</code>作为特定的关键字。</p>
<p>我们还需要创建一个状态事件。这将用于将应用程序的状态绑定到来自数据的值，然后将其传递给<code>MentionsInput</code>组件。</p>
<p>将以下代码复制并粘贴到<code>App.js</code>文件中:</p>
<pre class="language-javascript hljs">function App() {
  const [value, setValue] = useState("");

  const users = [
    {
      id: "isaac",
      display: "Isaac Newton",
    },
    {
      id: "sam",
      display: "Sam Victor",
    },
    {
      id: "emma",
      display: "e<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="533e3e323d26363f133d3c313c372a7d303c3e">[email protected]</a>",
    },
  ];

  ...
}
</pre>
<p>我们基于上面的代码块创建了一个状态变量和用户数组。用户数组包含带有<code>id</code>和<code>display</code>参数的对象。这些是填充<code>react-mentions</code>组件所需的参数。</p>
<p>现在，让我们用下面的代码更新<code>return()</code>语句:</p>
<pre class="language-javascript hljs">  return (
    &lt;div className="App"&gt;
      &lt;MentionsInput
        value={value}
        onChange={(e) =&gt; setValue(e.target.value)}&gt;

        &lt;Mention
          data={users} /&gt;
      &lt;/MentionsInput&gt;
    &lt;/div&gt;
  );
</pre>
<p>我们使用了接受<code>value</code>属性的<code>MentionsInput</code>标签。然后我们用<code>onChange</code>道具设置状态值。完成所有这些工作后，我们应该能够实现以下目标:</p>
<p><img data-attachment-id="126731" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/setting-state-onchange-prop/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/setting-state-onchange-prop.gif" data-orig-size="730,174" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="setting-state-onchange-prop" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/setting-state-onchange-prop-300x72.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/setting-state-onchange-prop.gif" decoding="async" class="aligncenter size-full wp-image-126731 jetpack-lazy-image" src="../Images/a3721f778c09d57c4a6b9bc519f22782.png" alt="Setting The State Value With The Onchange Prop" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/setting-state-onchange-prop.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/setting-state-onchange-prop.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126731" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/setting-state-onchange-prop/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/setting-state-onchange-prop.gif" data-orig-size="730,174" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="setting-state-onchange-prop" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/setting-state-onchange-prop-300x72.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/setting-state-onchange-prop.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126731" src="../Images/a3721f778c09d57c4a6b9bc519f22782.png" alt="Setting The State Value With The Onchange Prop" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/setting-state-onchange-prop.gif"/></noscript>
<h2 id="styling-react-mentions-components">造型<code>react-mentions</code>组件</h2>
<p>看着我们上面的进展，你可能会注意到我们的组件看起来有点不合适。我们可以通过定制款式来解决这个问题。</p>
<p>在<code>src</code>文件夹中创建一个<code>mentionStyles.js</code>文件，并粘贴以下代码:</p>
<pre class="language-javascript hljs">export default {
  backgroundColor: "#cee4e5",
};
</pre>
<p>在<code>src</code>文件夹中创建一个<code>mentionsInputStyles.js</code>文件，并将下面的代码块粘贴到其中:</p>
<pre class="language-javascript hljs">export default {
  control: {
    backgroundColor: '#fff',
    fontSize: 16,
    // fontWeight: 'normal',
  },
  '&amp;multiLine': {
    control: {
      fontFamily: 'monospace',
      minHeight: 63,
    },
    highlighter: {
      padding: 9,
      border: '1px solid transparent',
    },
    input: {
      padding: 9,
      border: '1px solid silver',
    },
  },
  '&amp;singleLine': {
    display: 'inline-block',
    width: 180,
    highlighter: {
      padding: 1,
      border: '2px inset transparent',
    },
    input: {
      padding: 1,
      border: '2px inset',
    },
  },
  suggestions: {
    list: {
      backgroundColor: 'white',
      border: '1px solid rgba(0,0,0,0.15)',
      fontSize: 16,
    },
    item: {
      padding: '5px 15px',
      borderBottom: '1px solid rgba(0,0,0,0.15)',
      '&amp;focused': {
        backgroundColor: '#cee4e5',
      },
    },
  },
}
</pre>
<p>返回<code>App.js</code>并导入样式:</p>
<pre class="language-javascript hljs">import mentionStyle from "./mentionStyle";
import mentionsInputStyle from "./mentionsInputStyle";
</pre>
<p>现在，更新组件:</p>
<pre class="language-javascript hljs">    &lt;div className="App"&gt;
      &lt;MentionsInput
        style={mentionsInputStyle} 
        value={value}
        onChange={(e) =&gt; setValue(e.target.value)}&gt;

        &lt;Mention
          style={mentionStyle}
          data={users}
        /&gt;
      &lt;/MentionsInput&gt;
    &lt;/div&gt;
</pre>
<p>我们通过添加style prop并将其设置为导入的样式来更新组件。</p>
<p>随着我们迄今为止的进展，我们已经在我们的应用程序中实现了一个不错的定制<code>Mention</code>功能！</p>
<p><img data-attachment-id="126733" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/mention-prop-styled/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/mention-prop-styled.gif" data-orig-size="730,121" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="mention-prop-styled" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/mention-prop-styled-300x50.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/mention-prop-styled.gif" decoding="async" class="aligncenter size-full wp-image-126733 jetpack-lazy-image" src="../Images/7833fa484d9c394c1733bb9b6c2091ad.png" alt="Mention Prop Styled" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/mention-prop-styled.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/mention-prop-styled.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126733" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/mention-prop-styled/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/mention-prop-styled.gif" data-orig-size="730,121" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="mention-prop-styled" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/mention-prop-styled-300x50.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/mention-prop-styled.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126733" src="../Images/7833fa484d9c394c1733bb9b6c2091ad.png" alt="Mention Prop Styled" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/mention-prop-styled.gif"/></noscript>
<h2 id="exploring-other-functionalities-react-mentions">探索<code>react-mentions</code>中的其他功能</h2>
<p>这个<code>react-mentions</code>包提供了许多可定制的特性，所以让我们来看看其中的一些吧！</p>
<h3 id="single-line-input"><code>singleLine</code>输入</h3>
<p>当我们希望我们的输入是单行文本而不是默认的文本区域时，就调用input。您可以在下面的代码中看到这一点:</p>
<pre class="language-javascript hljs">return (
 &lt;div className="App"&gt;
  ...
  &lt;h2&gt;Using a Single line Input&lt;/h2&gt;
      &lt;MentionsInput
        singleLine  //this sets the single line input to true
        style={mentionsInputStyle}
        value={value}
        onChange={(e) =&gt; setValue(e.target.value)}
      &gt;

    &lt;/div&gt;
  );
</pre>
<p><img data-attachment-id="126738" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/single-line-input/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/single-line-input.gif" data-orig-size="730,175" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="single-line-input" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/single-line-input-300x72.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/single-line-input.gif" decoding="async" class="aligncenter size-full wp-image-126738 jetpack-lazy-image" src="../Images/01cabd2b2c19828455502ed5660ac9b1.png" alt="Single Line Input" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/single-line-input.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/single-line-input.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126738" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/single-line-input/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/single-line-input.gif" data-orig-size="730,175" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="single-line-input" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/single-line-input-300x72.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/single-line-input.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126738" src="../Images/01cabd2b2c19828455502ed5660ac9b1.png" alt="Single Line Input" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/single-line-input.gif"/></noscript>
<h3 id="multiple-trigger-patterns">多种触发模式</h3>
<p>我们也可以决定使用多个触发模式，而不是默认的<code>@</code>触发模式。幸运的是，<code>react-mention</code>包支持这一点。</p>
<p>让我们启动第二个触发模式。在<code>App.js</code>文件中导入<code>useCallback</code>钩子。<code>useCallback</code>钩用于阻止<code>Mention</code>组件不必要的重新渲染；</p>
<pre class="language-javascript hljs">import { useState, useCallback } from "react";
</pre>
<p>接下来，创建一个电子邮件验证正则表达式。这将作为检测输入是否是电子邮件的附加触发器。然后，它会将其突出显示为提及。</p>
<pre class="language-javascript hljs">function App() {
  const [value, setValue] = useState("");
  const emailRegex = /(([^\<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="afdcef">[email protected]</a>]<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c8e388">[email protected]</a>[^\<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="aad9ea">[email protected]</a>]+\.[^\<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="99ead9">[email protected]</a>]+))$/;

  ...
  return (
    &lt;div className="App"&gt;
      &lt;h2&gt;Using Multiple trigger patterns&lt;/h2&gt;  
      &lt;MentionsInput
        style={mentionsInputStyle}
        value={value}
        onChange={(e) =&gt; setValue(e.target.value)}
        &gt;

        &lt;Mention style={mentionStyle} data={users} /&gt;

        &lt;Mention
          trigger={emailRegex}
          data={(search) =&gt; [{ id: search, display: search }]}
          onAdd={useCallback((...args) =&gt; {
            console.log(...args);
          }, [])}
          style={{ backgroundColor: "#d1c4e9" }}
        /&gt;
      &lt;/MentionsInput&gt;
    &lt;/div&gt;
  );
</pre>
<p><img data-attachment-id="126740" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/multiple-trigger-patterns/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/multiple-trigger-patterns.gif" data-orig-size="730,123" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="multiple-trigger-patterns" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/multiple-trigger-patterns-300x51.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/multiple-trigger-patterns.gif" decoding="async" class="aligncenter size-full wp-image-126740 jetpack-lazy-image" src="../Images/4d259637df8ac22bb70958ac2b9b9168.png" alt="Multiple Trigger Patterns" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/multiple-trigger-patterns.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/multiple-trigger-patterns.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126740" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/multiple-trigger-patterns/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/multiple-trigger-patterns.gif" data-orig-size="730,123" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="multiple-trigger-patterns" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/multiple-trigger-patterns-300x51.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/multiple-trigger-patterns.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126740" src="../Images/4d259637df8ac22bb70958ac2b9b9168.png" alt="Multiple Trigger Patterns" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/multiple-trigger-patterns.gif"/></noscript>
<h3 id="modifying-displaying-id">修改显示<code>id</code></h3>
<p><code>react-mentions</code>库还允许我们将默认显示<code>id</code>更改为我们喜欢的显示。我们可以通过使用<code>displayTransform</code>参数来实现。</p>
<pre class="language-javascript hljs">   &lt;h2&gt;Displaying ID&lt;/h2&gt;
      &lt;MentionsInput
        style={mentionsInputStyle}
        value={value}
        onChange={(e) =&gt; setValue(e.target.value)}
      &gt;
        &lt;Mention
          displayTransform={(id) =&gt; `&lt;!--${id}--&gt;`}
          style={mentionStyle}
          data={users}
        /&gt;
      &lt;/MentionsInput&gt;
</pre>
<p>在上面的代码块中，我们从用户对象返回<code>id</code>并呈现它。</p>
<p><img data-attachment-id="126742" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/displaying-id/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/displaying-id.gif" data-orig-size="730,95" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="displaying-id" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/displaying-id-300x39.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/displaying-id.gif" decoding="async" class="aligncenter size-full wp-image-126742 jetpack-lazy-image" src="../Images/8edc367791cf0d9a1bc4c466075c798f.png" alt="Displaying ID" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/displaying-id.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/displaying-id.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126742" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/displaying-id/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/displaying-id.gif" data-orig-size="730,95" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="displaying-id" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/displaying-id-300x39.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/displaying-id.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126742" src="../Images/8edc367791cf0d9a1bc4c466075c798f.png" alt="Displaying ID" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/displaying-id.gif"/></noscript>
<h3 id="scrollable-text-area">可滚动文本区</h3>
<p>文本区域是响应式输入字段，可根据多个用户输入调整高度。这个特性可能会导致扭曲的UI，并且适用于我们的<code>react-mentions</code>组件。我们将使我们的文本区域可滚动，以避免这种失真，并创建一个更好的用户界面。</p>
<p>首先，我们将把<code>lodash</code>库中的<code>merge</code>函数导入到<code>App.js</code>文件中:</p>
<pre class="language-javascript hljs">import merge from 'lodash/merge';
</pre>
<p><code>merge</code>函数将负责将我们的<code>mentionsInputStyle</code>与我们新的定制样式合并。</p>
<pre class="language-javascript hljs">function App() {
  let customStyle = merge({}, mentionsInputStyle, {
    input: {
      height: 80,
      overflow: "auto",
    },
    highlighter: {
      height: 80,
      overflow: "hidden",
      boxSizing: "border-box",
    },
  });

  ...
  return (
      &lt;MentionsInput
        value={value}
        onChange={(e) =&gt; setValue(e.target.value)}
        style={customStyle}
        placeholder={"Mention people using '@'"}
        a11ySuggestionsListLabel={"Suggested mentions"}
      &gt;
        &lt;Mention
          trigger="@"
          data={users}
          style={mentionStyle}
        /&gt;
  );
}
</pre>
<p>在上面的代码块中，我们将<code>mentionsInputStyle</code>合并到新更新的样式中。我们还将文本区域的高度和宽度设置为固定值，并自动设置溢出。</p>
<p>完成后，我们将有一个更好的UI和一个可滚动的组件，如下所示:</p>
<p><img data-attachment-id="126744" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/scrollable-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/scrollable-component.gif" data-orig-size="699,185" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="scrollable-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/scrollable-component-300x79.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/scrollable-component.gif" decoding="async" class="aligncenter size-full wp-image-126744 jetpack-lazy-image" src="../Images/ab893d5556e459369ce06580f3ab71a1.png" alt="Scrollable Component" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/scrollable-component.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/scrollable-component.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126744" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/scrollable-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/scrollable-component.gif" data-orig-size="699,185" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="scrollable-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/scrollable-component-300x79.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/scrollable-component.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126744" src="../Images/ab893d5556e459369ce06580f3ab71a1.png" alt="Scrollable Component" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/scrollable-component.gif"/></noscript>
<h3 id="fetching-responses-external-sources">从外部来源获取响应</h3>
<p>在这一节中，我们将看看如何在表单中使用来自API的数据。在许多情况下，我们的数据可能来自外部来源。让我们看看如何处理我们的响应并将它们添加到<code>react-mentions</code>数据属性中。</p>
<p>在这个演示中，我们将使用并从<a href="https://jsonplaceholder.typicode.com/users" target="_blank" rel="noopener"> JSON占位符API </a>中获取用户。将下面的代码块复制并粘贴到<code>App.js</code>文件中:</p>
<pre class="language-javascript hljs">  function fetchUsers(query, callback) {
    if (!query) return;
    fetch(`https://jsonplaceholder.typicode.com/users?q=${query}`, {
      json: true,
    })
      .then((res) =&gt; res.json())
      // Transform the users to what react-mentions expects
      .then((res) =&gt; 
        res.map((user) =&gt; ({ display: user.username, id: user.name }))
      )

      .then(callback);
  }
</pre>
<p>基于上面的代码块，我们正在对<code>jsonplaceholder</code>服务器进行API调用。我们向<code>fetch</code>函数传递了两个参数:<code>query</code>和<code>callback</code>。</p>
<p><code>query</code>参数保存来自<code>mentionInput</code>的输入，而<code>callback</code>参数在我们准备好响应时被调用。</p>
<p>接下来，我们将返回一个用户列表，遍历它，并将用户名和用户名作为<code>display</code>和<code>id</code>的对象返回。</p>
<p>最后，我们在<code>MentionsInput</code>组件的数据属性中调用我们的函数，并显示<code>id</code>:</p>
<pre class="language-javascript hljs">   &lt;MentionsInput
        value={value}
        onChange={(e) =&gt; setValue(e.target.value)}
        style={mentionsInputStyle}
        placeholder="Mention any JsonPlaceholder username by typing `@` followed by at least one character"
        a11ySuggestionsListLabel={"Suggested JsonPlaceholder username for mention"}
      &gt;
        &lt;Mention
          displayTransform={(id) =&gt; `@${id}`}
          trigger="@"
          data={fetchUsers}
          style={mentionStyle}
        /&gt;
      &lt;/MentionsInput&gt;
</pre>
<p><img data-attachment-id="126746" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/external-sources/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/external-sources.gif" data-orig-size="730,87" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="external-sources" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/external-sources-300x36.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/external-sources.gif" decoding="async" class="aligncenter size-full wp-image-126746 jetpack-lazy-image" src="../Images/015d599d0702ee554a892b234171d00e.png" alt="External Sources" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/external-sources.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/external-sources.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126746" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/external-sources/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/external-sources.gif" data-orig-size="730,87" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="external-sources" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/external-sources-300x36.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/external-sources.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126746" src="../Images/015d599d0702ee554a892b234171d00e.png" alt="External Sources" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/external-sources.gif"/></noscript>
<h3 id="fetching-emojis">获取表情符号</h3>
<p>使用<code>react-mentions</code>包，不仅可以引用和提及姓名，还可以提及表情符号！</p>
<p>让我们来看看如何从外部API获取表情符号，并在搜索时将它们显示在输入字段中。</p>
<pre class="language-javascript hljs">function App() {
  const [emojiValue, setEmojiValue] = useState([]);
  const notMatchingRegex = /($a)/;

  useEffect(() =&gt; {
    fetch(
      "https://gist.githubusercontent.com/oliveratgithub/0bf11a9aff0d6da7b46f1490f86a71eb/raw/d8e4b78cfe66862cf3809443c1dba017f37b61db/emojis.json"
    )
      .then((data) =&gt; {
        return data.json();
      })
      .then((jsonData) =&gt; {
        setEmojiValue(jsonData.emojis);
      });
  }, []);
  const queryEmojis = (query, callback) =&gt; {
    if (query.length === 0) return;
    const filterValue = emojiValue
      .filter((emoji) =&gt; {
        return emoji.name.indexOf(query.toLowerCase()) &gt; -1;
      })
      .slice(0, 10);
    return filterValue.map(({ emoji }) =&gt; ({ id: emoji }));
  };

  ...
  return (
      &lt;h3&gt;Emoji support&lt;/h3&gt;
      &lt;MentionsInput
        value={value}
        onChange={(e) =&gt; setValue(e.target.value)}
        style={mentionsInputStyle}
        placeholder={"Press '&amp;' for emojis, mention people using '@'"}
      &gt;
        &lt;Mention
          trigger="@"
          displayTransform={(username) =&gt; `@${username}`}
          markup="@__id__"
          data={users}
          regex={/@(\S+)/}
          style={mentionStyle}
          appendSpaceOnAdd
        /&gt;
        &lt;Mention
          trigger="&amp;"
          markup="__id__"
          regex={notMatchingRegex}
          data={queryEmojis}
        /&gt;
      &lt;/MentionsInput&gt;
  );
}
</pre>
<p>基于上面的代码块，页面一加载，我们就从我们的API获取表情符号并存储在我们的<code>emojiValue</code>中。每当用户搜索特定的关键词时，我们就使用<code>useEffect</code>钩子并显示表情符号。</p>
<p>这里，我们使用双触发模式，用符号<code>&amp;</code>表示表情符号，用符号<code>@</code>表示用户数组。<code>notMatchingRegex</code>可以过滤不匹配的表情符号。</p>
<p><img data-attachment-id="126750" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/emoji-support/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/emoji-support.gif" data-orig-size="730,98" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="emoji-support" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/emoji-support-300x40.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/emoji-support.gif" decoding="async" class="aligncenter size-full wp-image-126750 jetpack-lazy-image" src="../Images/52bfa1f8e3772b5e4fe0b0ec33c2c7ff.png" alt="Emoji Support" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/emoji-support.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/emoji-support.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126750" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/emoji-support/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/emoji-support.gif" data-orig-size="730,98" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="emoji-support" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/emoji-support-300x40.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/emoji-support.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126750" src="../Images/52bfa1f8e3772b5e4fe0b0ec33c2c7ff.png" alt="Emoji Support" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/emoji-support.gif"/></noscript>
<h2 id="creating-custom-form-mention-functionality">创建具有<code>@mention</code>功能的自定义表单</h2>
<p>在这一节中，我们将把我们所了解到的关于<code>react-mentions</code>库的所有东西放在一起，构建一个评论表单。</p>
<p>首先，在<code>src</code>目录下创建一个<code>CustomForm.jsx</code>文件，并粘贴以下代码:</p>
<pre class="language-javascript hljs">// CustomForm.jsx

import { useState } from 'react';
import { Mention, MentionsInput } from 'react-mentions';
import styles from './FormInputStyle.module.css';
import mentionsInputStyle from './mentionsInputStyle';
import mentionStyle from './mentionStyle';
const CustomForm = () =&gt; {
  const [formState, setFormState] = useState({
    username: '',
    comment: '',
  });
  const [comments, setComments] = useState([]);
  const users = [
    {
      id: 'isaac',
      display: 'Isaac Newton',
    },
    {
      id: 'sam',
      display: 'Sam Victor',
    },
    {
      id: 'emma',
      display: '<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="55303838343b203039153b3a373a312c7b363a38">[email protected]</a>',
    },
  ];
  const submit = () =&gt; {
    if (formState.username === '' || formState.comment === '') {
      alert('Please fill in all fields');
      return;
    }
    setComments((comments) =&gt; [
      ...comments,
      {
        username: formState.username,
        comment: formState.comment,
      },
    ]);
    setFormState({
      username: '',
      comment: '',
    });
  };
  const current = new Date();
  const date = `${current.getDate()}/${
    current.getMonth() + 1
  }/${current.getFullYear()}`;
</pre>
<p>在上面的代码中，我们将从<code>react-mentions</code>导入我们将使用的包，以及用于处理表单的注释和状态的<code>useState</code>钩子。</p>
<p>表单和注释状态也已经设置好，并为应用程序提供虚拟数据。我们的<code>submit</code>函数检查字段是否被填充，并设置注释状态。我们现在有一个<code>date</code>变量来获取评论的日期。</p>
<p>现在，用下面的代码更新返回值:</p>
<pre class="language-javascript hljs">return (
    &lt;div className={styles.form}&gt;
      &lt;section className={styles.formCard}&gt;
        &lt;h2 className={styles.formTitle}&gt;Comment Form&lt;/h2&gt;
        &lt;input
          type="text"
          value={formState.username}
          onChange={(e) =&gt;
            setFormState({ ...formState, username: e.target.value })
          }
          placeholder="Input Your Name"
        /&gt;
        &lt;MentionsInput
          placeholder="Add Comment. Use '@' for mention"
          value={formState.comment}
          onChange={(e) =&gt;
            setFormState({ ...formState, comment: e.target.value })
          }
          style={mentionsInputStyle}
        &gt;
          &lt;Mention style={mentionStyle} data={users} /&gt;
        &lt;/MentionsInput&gt;
        &lt;button onClick={submit}&gt;Submit&lt;/button&gt;
      &lt;/section&gt;
      {comments.length === 0 ? (
        null
      ) : (
        &lt;section&gt;
          {comments.map((comment, i) =&gt; (
            &lt;div className={styles.commentCard} key={i}&gt;
              &lt;p className={styles.username}&gt;
                {comment.username} on {date}
              &lt;/p&gt;
              &lt;h2&gt;{comment.comment}&lt;/h2&gt;
            &lt;/div&gt;
          ))}
        &lt;/section&gt;
      )}
    &lt;/div&gt;
  );
};
export default CustomForm;
</pre>
<p>我们将适当的道具传递给<code>Mention</code>和<code>MentionInput</code>组件，并在表单下面显示评论(如果有的话)。</p>
<p>太好了！接下来，创建一个<code>FormInputStyle.module.css</code>用于样式化，并将以下代码粘贴到其中:</p>
<pre class="language-css hljs">* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
.form {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100vh;
  background-color: #ffa5a5;
}
.formTitle {
  font-size: 2rem;
  color: red;
  margin-bottom: 1rem;
}
input {
  height: 3rem;
  width: 25rem;
  margin-bottom: 1rem;
  padding: 1rem;
  font-size: 18px;
  border: 1px solid silver;
}
.formCard {
  width: 27rem;
  display: flex;
  flex-direction: column;
  background-color: rgb(54, 44, 24);
  padding: 1rem;
}
button {
  border: none;
  border-radius: 3px;
  color: white;
  background-color: green;
  font-size: 1.2rem;
  padding: 10px;
  margin-top: 1rem;
}
.commentCard {
  margin: 1.5rem;
  color: rgb(173, 173, 173);
  font-size: 1rem;
  background-color: #444;
  padding: 1rem;
  width: 27rem;
}
.username {
  color: white;
  font-size: 1.3rem;
}
</pre>
<p>至此，我们完成了表单的创建！您应该会看到类似这样的内容:</p>
<p><img data-attachment-id="126752" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/final-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-form.gif" data-orig-size="730,283" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="final-form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-form-300x116.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-form.gif" decoding="async" class="aligncenter size-full wp-image-126752 jetpack-lazy-image" src="../Images/ea92744ca8fcc8e34f557c52edc1c132.png" alt="Final Form" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/final-form.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/final-form.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126752" data-permalink="https://blog.logrocket.com/build-react-comment-form-mention-functionality/attachment/final-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-form.gif" data-orig-size="730,283" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="final-form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-form-300x116.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/final-form.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126752" src="../Images/ea92744ca8fcc8e34f557c52edc1c132.png" alt="Final Form" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/final-form.gif"/></noscript>
<h2 id="conclusion">结论</h2>
<p>在本文中，我们学习了<code>react-mentions</code>，这是一个易于使用的库，用于构建具有<code>@mention</code>功能的表单。我们还研究了<code>react-mentions</code>包的不同功能以及如何使用它们。我们还使用<code>react-mention</code>包构建了一个具有<code>@mention</code>功能的评论表单。</p>
<p>感谢阅读！</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</h2><p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>