<html>
<head>
<title>Build a React Native speech-to-text dictation app </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>构建React原生语音转文本听写应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/#0001-01-01">https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/#0001-01-01</a></blockquote><div><article class="article-post">
<p>React本机语音到文本功能是当今开发人员的常见用例。无论是一般用途还是可访问性，您的项目中对语音转文本的需求都很可能在某个时候出现，并且是我们作为开发人员应该准备在我们的应用程序中实现的功能。</p>
<p>本文将向您展示如何使用<a href="https://blog.logrocket.com/tag/react-native/"> React Native </a>构建一个语音到文本的听写应用程序。</p>

<h2 id="final-demo-example">最终演示</h2>
<p><img data-attachment-id="147034" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/react-native-speech-to-text-dictation-app-final-example-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-native-speech-to-text-dictation-app-final-example-1.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-native-speech-to-text-dictation-app-final-example-1" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-native-speech-to-text-dictation-app-final-example-1-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-native-speech-to-text-dictation-app-final-example-1.gif" decoding="async" class="aligncenter wp-image-147034 size-full jetpack-lazy-image" src="../Images/da4207198bf2356bce307699004cf9a6.png" alt="React Native Speech To Text Dictation App Final Example" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/react-native-speech-to-text-dictation-app-final-example-1.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/react-native-speech-to-text-dictation-app-final-example-1.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="147034" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/react-native-speech-to-text-dictation-app-final-example-1/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-native-speech-to-text-dictation-app-final-example-1.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-native-speech-to-text-dictation-app-final-example-1" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-native-speech-to-text-dictation-app-final-example-1-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-native-speech-to-text-dictation-app-final-example-1.gif" decoding="async" loading="lazy" class="aligncenter wp-image-147034 size-full" src="../Images/da4207198bf2356bce307699004cf9a6.png" alt="React Native Speech To Text Dictation App Final Example" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/react-native-speech-to-text-dictation-app-final-example-1.gif"/></noscript>
<h2 id="prerequisites">先决条件</h2>

<p>要在iOS上运行你的应用，你需要macOS和<a href="https://blog.logrocket.com/xcode-for-react-native-developers-tutorial-and-best-practices/"> Xcode </a>来编译和运行模拟器。</p>
<p>对于Android，您可以使用Android Studio中的Android Emulator或简单地连接一个Android设备来运行它。此外，我们还将使用VS代码来构建应用程序。</p>
<h2 id="installation-and-setup">安装和设置</h2>
<p>当使用React Native构建移动应用程序时，有两种典型的方法。</p>
<p>一种是使用Expo——一套围绕React Native构建的工具，旨在提高开发效率。另一种方法是使用React Native CLI，这基本上就像从零开始，没有任何一组支持React Native开发的工具。</p>
<p>在本教程中，我们将使用Expo，因此开发过程更易于管理。</p>
<p>让我们开始吧:</p>
<pre class="language-shell hljs">npm install -g expo-cli
</pre>
<p>一旦全局安装了Expo CLI，就可以使用以下命令初始化项目:</p>
<pre class="language-shell hljs">expo init &lt;Name of Project&gt;
</pre>
<p><img data-attachment-id="145940" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/speech-to-text-app-expo-cli/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli.png" data-orig-size="730,313" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="speech-to-text-app-expo-cli" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli-300x129.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli.png" decoding="async" class="aligncenter wp-image-145940 size-full jetpack-lazy-image" src="../Images/7db5a0e7eccd28885a498f70d07e7c24.png" alt="Speech To Text App Expo CLI" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli-300x129.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145940" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/speech-to-text-app-expo-cli/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli.png" data-orig-size="730,313" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="speech-to-text-app-expo-cli" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli-300x129.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli.png" decoding="async" loading="lazy" class="aligncenter wp-image-145940 size-full" src="../Images/7db5a0e7eccd28885a498f70d07e7c24.png" alt="Speech To Text App Expo CLI" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli-300x129.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-to-text-app-expo-cli.png"/></noscript>
<p>这里，我们将选择一个带有TypeScript配置的空白项目。如果您愿意，还可以创建一个带有一些预定义功能的JavaScript版本。</p>
<p>一旦它搭建了项目，你就可以在Android或iOS上运行应用程序了。导航到目录并运行以下npm命令之一:</p>
<pre class="language-shell hljs">- cd SpeechToTextAppDemo
- npm run android
- npm run ios
- npm run web
</pre>
<p><img data-attachment-id="145942" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/expo-cli-folder-structure-app-tsx/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx.png" data-orig-size="354,310" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="expo-cli-folder-structure-app-tsx" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx-300x263.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx.png" decoding="async" class="aligncenter wp-image-145942 size-full jetpack-lazy-image" src="../Images/dd3707dace753d728b44c93c7dfa30b0.png" alt="Expo CLI Folder Structure App Tsx" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx.png 354w, https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx-300x263.png 300w" data-lazy-sizes="(max-width: 354px) 100vw, 354px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145942" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/expo-cli-folder-structure-app-tsx/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx.png" data-orig-size="354,310" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="expo-cli-folder-structure-app-tsx" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx-300x263.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx.png" decoding="async" loading="lazy" class="aligncenter wp-image-145942 size-full" src="../Images/dd3707dace753d728b44c93c7dfa30b0.png" alt="Expo CLI Folder Structure App Tsx" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx.png 354w, https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx-300x263.png 300w" sizes="(max-width: 354px) 100vw, 354px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/expo-cli-folder-structure-app-tsx.png"/></noscript>
<p>正如您在文件夹结构中看到的，<code>App.tsx</code>是应用程序的入口点。<code>app.json</code>是一个Expo配置，配置项目如何加载和生成Android和iOS的重建。</p>
<h2 id="building-the-ui">构建用户界面</h2>
<p><img data-attachment-id="145944" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/ui-wireframe-speech-to-text-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app.png" data-orig-size="730,634" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ui-wireframe-speech-to-text-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app-300x261.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app.png" decoding="async" class="aligncenter wp-image-145944 size-full jetpack-lazy-image" src="../Images/48f86135efed1530203c521923d07853.png" alt="UI Wireframe Speech To Text App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app-300x261.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145944" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/ui-wireframe-speech-to-text-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app.png" data-orig-size="730,634" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ui-wireframe-speech-to-text-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app-300x261.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app.png" decoding="async" loading="lazy" class="aligncenter wp-image-145944 size-full" src="../Images/48f86135efed1530203c521923d07853.png" alt="UI Wireframe Speech To Text App" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app-300x261.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/ui-wireframe-speech-to-text-app.png"/></noscript>
<p>上面显示的是一个简单的线框，我们将使用它来构建应用程序的UI。</p>
<p>我们把它做得很简单，因为我们想把重点放在功能上——一旦我们构建了应用程序，您可以根据自己的喜好定制它，并在它的基础上进行实践。</p>
<p>让我们从在应用程序中构建导航开始。</p>
<p>要在React本地应用中实现导航，我们需要安装以下软件包:</p>
<pre class="language-shell hljs">npm install @react-navigation/bottom-tabs @react-navigation/native @expo/vector-icons
</pre>
<p>由于我们将在底层实现导航，我们需要安装<code>@react-navigation/bottom-tabs</code>和<code>@react-navigation/native</code>核心包。</p>
<p>此外，为了增加对图标和文本的支持，我们需要<code>@expo/vector-icons</code>包。</p>
<p>导航有三个组件:</p>
<ol>
<li><code>NavigationContainer</code></li>
<li><code>Tab.Navigator</code></li>
<li><code>Tab.Screen</code></li>
</ol>
<p>把所有东西都包在里面。<code>Tab.Navigator</code>帮助在不同的组件之间导航，而<code>Tab.Screen</code>呈现组件本身。</p>
<p>现在，我们将更改<code>App.tsx</code>，包括导航功能:</p>
<pre class="language-typescript hljs">import { StatusBar } from "expo-status-bar";
import { FontAwesome5 } from "@expo/vector-icons";
import { StyleSheet, Text, View } from "react-native";
import { createBottomTabNavigator } from "@react-navigation/bottom-tabs";
import { NavigationContainer } from "@react-navigation/native";
import Home from "./components/Home";
import Notes from "./components/Notes";
const Tab = createBottomTabNavigator();
export default function App() {
  return (
    &lt;NavigationContainer&gt;
      &lt;Tab.Navigator
        screenOptions={({ route }) =&gt; ({
          tabBarIcon: () =&gt; {
            let iconName = "record";
            if (route.name === "Record") {
              iconName = "record-vinyl";
            } else if (route.name === "History") {
              iconName = "history";
            }
            return &lt;FontAwesome5 name={iconName} size={24} color="black" /&gt;;
          },
        })}
      &gt;
        &lt;Tab.Screen name="Record" component={Home} /&gt;
        &lt;Tab.Screen name="History" component={Notes} /&gt;
      &lt;/Tab.Navigator&gt;
    &lt;/NavigationContainer&gt;
  );
}
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "#fff",
    alignItems: "center",
    justifyContent: "center",
  },
});
</pre>
<p>通过添加以下代码创建<code>Home</code>和<code>Notes</code>组件:</p>
<h3 id="home-index-tsx"><code>Home/index.tsx</code></h3>
<pre class="language-typescript hljs">import { useState, useEffect } from "react";
import {
  View,
  Text,
  TextInput,
  StyleSheet,
  Button,
  Pressable,
} from "react-native";
export default function Home() {
  return (
    &lt;View style={styles.container}&gt;
      &lt;Text&gt;Home Screen&lt;/Text&gt;
    &lt;/View&gt;
  );
}
const styles = StyleSheet.create({
  container: {},
});
</pre>
<h3 id="notes-index-tsx"><code>Notes/index.tsx</code></h3>
<pre class="language-typescript hljs">import { useState, useEffect } from "react";
import {
  View,
  Text,
  TextInput,
  StyleSheet,
  Button,
  Pressable,
} from "react-native";
export default function Notes() {
  return (
    &lt;View style={styles.container}&gt;
      &lt;Text&gt;Notes Screen&lt;/Text&gt;
    &lt;/View&gt;
  );
}
const styles = StyleSheet.create({
  container: {},
});
</pre>
<p>现在，我们在应用程序的底部有一个导航栏。让我们运行应用程序，看看它是如何工作的。要运行应用程序，请执行以下一项操作:</p>
<ol>
<li>使用命令<code>expo start</code>，它将在iOS和Android模拟器中构建和运行应用程序</li>
<li>使用命令<code>npx expo run:&lt;ios| Android&gt;</code>，它将为iOS和Android构建项目，在项目目录中创建本机代码，并运行它</li>
</ol>
<p>这里，我们将遵循第二种方法，因为我们有一个<code>voice</code>库需要与定制的本地代码进行交互。当您没有这样的需求时，使用<code>expo start</code>命令会更加容易和简单，因为我们不需要自己管理本地代码构建。</p>
<p>当您使用<code>npx expo run:ios</code>命令运行应用程序时，您会看到以下错误:</p>
<p><img data-attachment-id="145946" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/navigation-error-unable-to-resolve/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve.png" data-orig-size="410,864" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="navigation-error-unable-to-resolve" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve-142x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve.png" decoding="async" class="aligncenter wp-image-145946 size-full jetpack-lazy-image" src="../Images/4b73258272953f600658c3d3ad0e0b2e.png" alt="Navigation Error Unable To Resolve" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve.png 410w, https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve-142x300.png 142w" data-lazy-sizes="(max-width: 410px) 100vw, 410px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145946" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/navigation-error-unable-to-resolve/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve.png" data-orig-size="410,864" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="navigation-error-unable-to-resolve" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve-142x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve.png" decoding="async" loading="lazy" class="aligncenter wp-image-145946 size-full" src="../Images/4b73258272953f600658c3d3ad0e0b2e.png" alt="Navigation Error Unable To Resolve" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve.png 410w, https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve-142x300.png 142w" sizes="(max-width: 410px) 100vw, 410px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/navigation-error-unable-to-resolve.png"/></noscript>
<p>这个错误是因为<code>Navigation</code>使用了一些我们在设置<code>Navigation</code>时跳过安装的核心实用程序。因此，让我们安装它们并重新运行应用程序:</p>
<pre class="language-shell hljs">npm install react-native-safe-area-context react-native-gesture-handler react-native-screens react-native-web
</pre>
<p><img data-attachment-id="147028" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/screen-navigation-react-native-speech-dictation-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/screen-navigation-react-native-speech-dictation-2.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screen-navigation-react-native-speech-dictation-2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/screen-navigation-react-native-speech-dictation-2-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/screen-navigation-react-native-speech-dictation-2.gif" decoding="async" class="aligncenter wp-image-147028 size-full jetpack-lazy-image" src="../Images/0a95f22210c029fda5d32ca0aa241719.png" alt="Screen Navigation React Native Speech Dictation" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/screen-navigation-react-native-speech-dictation-2.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/screen-navigation-react-native-speech-dictation-2.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="147028" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/screen-navigation-react-native-speech-dictation-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/screen-navigation-react-native-speech-dictation-2.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screen-navigation-react-native-speech-dictation-2" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/screen-navigation-react-native-speech-dictation-2-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/screen-navigation-react-native-speech-dictation-2.gif" decoding="async" loading="lazy" class="aligncenter wp-image-147028 size-full" src="../Images/0a95f22210c029fda5d32ca0aa241719.png" alt="Screen Navigation React Native Speech Dictation" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/screen-navigation-react-native-speech-dictation-2.gif"/></noscript>
<p>现在，我们的应用程序中有了屏幕导航。因此，让我们在应用程序中集成一个用于语音到文本功能的<code>voice</code>库。</p>
<h2 id="integrating-a-voice-recognition-library">集成语音识别库</h2>
<p>首先，在应用程序中安装<code>react-native-voice</code>库，就像这样:</p>
<pre class="language-shell hljs">npm i @react-native-voice/voice --save
</pre>
<p>安装npm包后，在<code>app.json</code>的插件数组中添加config插件:</p>
<pre class="language-shell hljs">{
  "expo": {
    "plugins": ["@react-native-voice/voice"]
  }
}
</pre>
<p>然后，在<code>app.json</code>配置中添加权限:</p>
<pre class="language-shell hljs">"ios": {
      "supportsTablet": true,
      "bundleIdentifier": "com.anonymous.SpeectToTextApp",
 "infoPlist": {
        "NSSpeechRecognitionUsageDescription": "This app uses speech recognition to convert your speech to text.",
        "NSCameraUsageDescription": "This app uses the camera to let user put a photo in his profile page."
      }
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon.png",
        "backgroundColor": "#FFFFFF"
      },
      "permissions": ["android.permission.RECORD_AUDIO"],
      "package": "com.anonymous.SpeectToTextApp"
    },
</pre>
<p>让我们在<code>Home</code>组件中构建一个与<code>react-native-voice</code>库集成的UI。</p>
<p>在我们开始之前，UI需要一些动画来实现记录/停止功能。所以，让我们安装<code>react-native-reanimated</code>和<code>@motify/components</code>来实现它:</p>
<pre class="language-shell hljs">npm i @motify/components react-native-reanimated
</pre>
<p>在巴别塔配置中添加<code>react-native-reanimated</code>插件:</p>
<pre class="language-shell hljs">module.exports = function (api) {
  api.cache(true);
  return {
    presets: ["babel-preset-expo"],
    plugins: ["react-native-reanimated/plugin"],
  };
};
</pre>
<p>安装<code>react-native-reanimated</code>后，在<code>Record/index.tsx</code>中实现语音识别功能:</p>
<pre class="language-typescript hljs">import React, { Component } from "react";
import { FontAwesome } from "@expo/vector-icons";
import { MotiView } from "@motify/components";
import {
  StyleSheet,
  Text,
  View,
  Image,
  TouchableHighlight,
} from "react-native";
import Voice, {
  SpeechRecognizedEvent,
  SpeechResultsEvent,
  SpeechErrorEvent,
} from "@react-native-voice/voice";
import { Easing } from "react-native-reanimated";
type Props = {
  onSpeechStart: () =&gt; void;
  onSpeechEnd: (result: any[]) =&gt; void;
};
type State = {
  recognized: string;
  pitch: string;
  error: string;
  end: string;
  started: boolean;
  results: string[];
  partialResults: string[];
};
class VoiceTest extends Component&lt;Props, State&gt; {
  state = {
    recognized: "",
    pitch: "",
    error: "",
    end: "",
    started: false,
    results: [],
    partialResults: [],
  };
  constructor(props: Props) {
    super(props);
    Voice.onSpeechStart = this.onSpeechStart;
    Voice.onSpeechRecognized = this.onSpeechRecognized;
    Voice.onSpeechEnd = this.onSpeechEnd;
    Voice.onSpeechError = this.onSpeechError;
    Voice.onSpeechResults = this.onSpeechResults;
    Voice.onSpeechPartialResults = this.onSpeechPartialResults;
    Voice.onSpeechVolumeChanged = this.onSpeechVolumeChanged;
  }
  componentWillUnmount() {
    Voice.destroy().then(Voice.removeAllListeners);
  }
  onSpeechStart = (e: any) =&gt; {
    console.log("onSpeechStart: ", e);
    this.setState({
      started: true,
    });
  };
  onSpeechRecognized = (e: SpeechRecognizedEvent) =&gt; {
    console.log("onSpeechRecognized: ", e);
    this.setState({
      recognized: "√",
    });
  };
  onSpeechEnd = (e: any) =&gt; {
    console.log("onSpeechEnd: ", e);
    this.setState({
      end: "√",
      started: false,
    });
    this.props.onSpeechEnd(this.state.results);
  };
  onSpeechError = (e: SpeechErrorEvent) =&gt; {
    console.log("onSpeechError: ", e);
    this.setState({
      error: JSON.stringify(e.error),
    });
  };
  onSpeechResults = (e: SpeechResultsEvent) =&gt; {
    console.log("onSpeechResults: ", e);
    this.setState({
      results: e.value!,
    });
  };
  onSpeechPartialResults = (e: SpeechResultsEvent) =&gt; {
    console.log("onSpeechPartialResults: ", e);
    this.setState({
      partialResults: e.value!,
    });
  };
  onSpeechVolumeChanged = (e: any) =&gt; {
    console.log("onSpeechVolumeChanged: ", e);
    this.setState({
      pitch: e.value,
    });
  };
  _startRecognizing = async () =&gt; {
    this.setState({
      recognized: "",
      pitch: "",
      error: "",
      started: false,
      results: [],
      partialResults: [],
      end: "",
    });
    try {
      await Voice.start("en-US");
      this.props.onSpeechStart();
    } catch (e) {
      console.error(e);
    }
  };
  _stopRecognizing = async () =&gt; {
    try {
      await Voice.stop();
    } catch (e) {
      console.error(e);
    }
  };
  _cancelRecognizing = async () =&gt; {
    try {
      await Voice.cancel();
    } catch (e) {
      console.error(e);
    }
  };
  _destroyRecognizer = async () =&gt; {
    try {
      await Voice.destroy();
    } catch (e) {
      console.error(e);
    }
    this.setState({
      recognized: "",
      pitch: "",
      error: "",
      started: false,
      results: [],
      partialResults: [],
      end: "",
    });
  };
  render() {
    return (
      &lt;View style={styles.container}&gt;
        {this.state.started ? (
          &lt;TouchableHighlight onPress={this._stopRecognizing}&gt;
            &lt;View
              style={{
                width: 75,
                height: 75,
                borderRadius: 75,
                backgroundColor: "#6E01EF",
                alignItems: "center",
                justifyContent: "center",
              }}
            &gt;
              {[...Array(3).keys()].map((index) =&gt; {
                return (
                  &lt;MotiView
                    from={{ opacity: 1, scale: 1 }}
                    animate={{ opacity: 0, scale: 4 }}
                    transition={{
                      type: "timing",
                      duration: 2000,
                      easing: Easing.out(Easing.ease),
                      delay: index * 200,
                      repeatReverse: false,
                      loop: true,
                    }}
                    key={index}
                    style={[
                      StyleSheet.absoluteFillObject,
                      { backgroundColor: "#6E01EF", borderRadius: 75 },
                    ]}
                  /&gt;
                );
              })}
              &lt;FontAwesome name="microphone-slash" size={24} color="#fff" /&gt;
            &lt;/View&gt;
          &lt;/TouchableHighlight&gt;
        ) : (
          &lt;TouchableHighlight onLongPress={this._startRecognizing}&gt;
            &lt;View
              style={{
                width: 75,
                height: 75,
                borderRadius: 75,
                backgroundColor: "#6E01EF",
                alignItems: "center",
                justifyContent: "center",
              }}
            &gt;
              &lt;FontAwesome name="microphone" size={24} color="#fff" /&gt;
            &lt;/View&gt;
          &lt;/TouchableHighlight&gt;
        )}
      &lt;/View&gt;
    );
  }
}
const styles = StyleSheet.create({
  button: {
    width: 50,
    height: 50,
  },
  container: {},
  welcome: {
    fontSize: 20,
    textAlign: "center",
    margin: 10,
  },
  action: {
    textAlign: "center",
    color: "#0000FF",
    marginVertical: 5,
    fontWeight: "bold",
  },
  instructions: {
    textAlign: "center",
    color: "#333333",
    marginBottom: 5,
  },
  stat: {
    textAlign: "center",
    color: "#B0171F",
    marginBottom: 1,
  },
});
export default Record;
</pre>
<p><code>@react-native-voice</code>提供了一个<code>Voice</code>类，具有开始和停止语音记录和识别的功能。一些重要的方法是:</p>
<ol>
<li><code>Voice.start("en-US");</code></li>
<li><code>Voice.stop();</code></li>
<li><code>Voice.cancel();</code></li>
<li><code>Voice.destroy();</code></li>
</ol>
<p>这里，我们有两个主要函数:<code>_startRecognizing</code>和<code>_stopRecognizing</code>——它们处理语音识别功能的启动和停止。</p>
<p>另一个需要注意的重要函数是<code>onSpeechEnd</code>，它通过props将语音结果作为文本传递给函数。</p>
<pre class="language-typescript hljs">onSpeechEnd = (e: any) =&gt; {
    console.log("onSpeechEnd: ", e);
    this.setState({
      end: "√",
      started: false,
    });
    this.props.onSpeechEnd(this.state.results);
  };
</pre>
<p>在这之后，我们将语音组件<code>Record</code>导入到<code>Home/index.tsx</code>中:</p>
<pre class="language-typescript hljs">import { useState, useEffect } from "react";
import {
  View,
  Text,
  TextInput,
  StyleSheet,
  Button,
  Pressable,
} from "react-native";
import Record from "../Record";
export default function Home() {
  const [speechText, setSpeechText] = useState("");
  return (
    &lt;View style={styles.container}&gt;
      &lt;View style={styles.inputContainer}&gt;
        &lt;Text style={styles.label}&gt;Speech Text&lt;/Text&gt;
        &lt;TextInput
          multiline
          style={styles.textInput}
          numberOfLines={6}
          value={speechText}
          maxLength={500}
          editable={true}
        /&gt;
        &lt;View
          style={{
            alignItems: "flex-end",
            flex: 1,
            flexDirection: "row",
            justifyContent: "space-between",
          }}
        &gt;
          &lt;Button
            title="Save"
            color={"#007AFF"}
            onPress={async () =&gt; {
              console.log("save");
            }}
          /&gt;
          &lt;Button
            title="Clear"
            color={"#007AFF"}
            onPress={() =&gt; {
              setSpeechText("");
            }}
          /&gt;
        &lt;/View&gt;
      &lt;/View&gt;
      &lt;View style={styles.voiceContainer}&gt;
        &lt;Record
          onSpeechEnd={(value) =&gt; {
            setSpeechText(value[0]);
          }}
          onSpeechStart={() =&gt; {
            setSpeechText("");
          }}
        /&gt;
      &lt;/View&gt;
    &lt;/View&gt;
  );
}
const styles = StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: "column",
    justifyContent: "center",
    alignItems: "center",
    width: "100%",
    backgroundColor: "#F5FCFF",
  },
  label: {
    fontWeight: "bold",
    fontSize: 15,
    paddingTop: 10,
    paddingBottom: 10,
  },
  inputContainer: {
    height: "50%",
    width: "100%",
    flex: 1,
    padding: 10,
    justifyContent: "center",
  },
  textInput: {
    padding: 10,
    borderColor: "#d1d5db",
    borderWidth: 1,
    height: 200,
    borderRadius: 5,
  },
  saveButton: {
    right: 0,
  },
  voiceContainer: {
    height: "50%",
    width: "100%",
    alignItems: "center",
    justifyContent: "space-around",
  },
});
</pre>
<p><img data-attachment-id="145950" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/speech-text-results-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo.png" data-orig-size="438,896" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="speech-text-results-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo-147x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo.png" decoding="async" class="aligncenter wp-image-145950 size-full jetpack-lazy-image" src="../Images/f37585542e2335c29de76499b4c5c791.png" alt="Speech Text Results" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo.png 438w, https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo-147x300.png 147w" data-lazy-sizes="(max-width: 438px) 100vw, 438px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145950" data-permalink="https://blog.logrocket.com/build-react-native-speech-to-text-dictation-app/attachment/speech-text-results-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo.png" data-orig-size="438,896" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="speech-text-results-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo-147x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo.png" decoding="async" loading="lazy" class="aligncenter wp-image-145950 size-full" src="../Images/f37585542e2335c29de76499b4c5c791.png" alt="Speech Text Results" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo.png 438w, https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo-147x300.png 147w" sizes="(max-width: 438px) 100vw, 438px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/speech-text-results-demo.png"/></noscript>
<p>现在，我们可以在<code>Home/index.tsx</code>中访问<code>speechText</code>中的结果。让我们实现保存功能，将它存储在数据库中。我们将通过使用以下命令，使用一个假的JSON服务器进行API模拟:</p>
<pre class="language-json hljs">json-service -watch db.json
</pre>
<p>创建<code>db.json</code>并为其添加结构:</p>
<pre class="language-shell hljs">{
  "notes": []
}
</pre>
<p>我们将在应用程序中使用<code>react-query</code>进行数据获取和API调用。</p>
<pre class="language-shell hljs">npm install react-query axios
</pre>
<p>为了创建和获取注释，我们可以创建定制的钩子来处理查询和变异:</p>
<h3 id="hooks-usecreatenote-ts"><code>hooks/useCreateNote.ts</code></h3>
<pre class="language-typescript hljs">import { QueryClient, useMutation } from "react-query";
import axios from "axios";
const createNote = async (note: string) =&gt; {
  const { data } = await axios.post("http://localhost:3000/notes", {
    note,
  });
  return data;
};
const useCreateNote = () =&gt;
  useMutation(createNote, {
    onSuccess: (response) =&gt; {
    },
  });
export default useCreateNote;
</pre>
<h3 id="hooks-usenotes-ts"><code>hooks/useNotes.ts</code></h3>
<pre class="language-typescript hljs">import { useQuery } from "react-query";
import axios from "axios";
const fetchNotes = async () =&gt; {
  const { data } = await axios.get("http://localhost:3000/notes");
  return data;
};
const useNotes = () =&gt; useQuery("notes", fetchNotes);
export default useNotes;
</pre>
<p>在<code>Home/index.tsx</code>内增加<code>useCreateNote</code>挂钩。</p>
<pre class="language-typescript hljs">import { useState, useEffect } from "react";
import {
  View,
  Text,
  TextInput,
  StyleSheet,
  Button,
  Pressable,
} from "react-native";
import { useMutation, useQueryClient } from "react-query";
import useCreateNote from "../../hooks/useCreateNote";
import Record from "../Record";
export default function Home() {
  const [speechText, setSpeechText] = useState("");
  const { mutate, isError, isLoading, isSuccess } = useCreateNote();
  const queryClient = useQueryClient();
  useEffect(() =&gt; {
    if (isSuccess) {
      setSpeechText("");
      queryClient.invalidateQueries(["notes"]);
    }
  }, [isSuccess]);
  return (
    &lt;View style={styles.container}&gt;
      &lt;View style={styles.inputContainer}&gt;
        &lt;Text style={styles.label}&gt;Speech Text&lt;/Text&gt;
        &lt;TextInput
          multiline
          style={styles.textInput}
          numberOfLines={6}
          value={speechText}
          maxLength={500}
          editable={true}
        /&gt;
        &lt;View
          style={{
            alignItems: "flex-end",
            flex: 1,
            flexDirection: "row",
            justifyContent: "space-between",
          }}
        &gt;
          &lt;Button
            title="Save"
            color={"#007AFF"}
            onPress={async () =&gt; {
              console.log("save");
              try {
                await mutate(speechText);
              } catch (e) {
                console.log(e);
              }
            }}
          /&gt;
          &lt;Button
            title="Clear"
            color={"#007AFF"}
            onPress={() =&gt; {
              setSpeechText("");
            }}
          /&gt;
        &lt;/View&gt;
      &lt;/View&gt;
      &lt;View style={styles.voiceContainer}&gt;
        &lt;Record
          onSpeechEnd={(value) =&gt; {
            setSpeechText(value[0]);
          }}
          onSpeechStart={() =&gt; {
            setSpeechText("");
          }}
        /&gt;
      &lt;/View&gt;
    &lt;/View&gt;
  );
}
const styles = StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: "column",
    justifyContent: "center",
    alignItems: "center",
    width: "100%",
    backgroundColor: "#F5FCFF",
  },
  label: {
    fontWeight: "bold",
    fontSize: 15,
    paddingTop: 10,
    paddingBottom: 10,
  },
  inputContainer: {
    height: "50%",
    width: "100%",
    flex: 1,
    padding: 10,
    justifyContent: "center",
  },
  textInput: {
    padding: 10,
    borderColor: "#d1d5db",
    borderWidth: 1,
    height: 200,
    borderRadius: 5,
  },
  saveButton: {
    right: 0,
  },
  voiceContainer: {
    height: "50%",
    width: "100%",
    alignItems: "center",
    justifyContent: "space-around",
  },
});
</pre>
<p>在<code>Note/index.tsx</code>中添加以下代码:</p>
<pre class="language-typescript hljs">import React from "react";
import {
  View,
  StyleSheet,
  FlatList,
  TouchableOpacity,
  Text,
} from "react-native";
import useNotes from "../../hooks/useNotes";
export const Posts = ({}) =&gt; {
  const { data, isLoading, isSuccess } = useNotes();
  console.log(data);
  return (
    &lt;View style={styles.container}&gt;
      {isLoading &amp;&amp; (
        &lt;React.Fragment&gt;
          &lt;Text&gt;Loading...&lt;/Text&gt;
        &lt;/React.Fragment&gt;
      )}
      {isSuccess &amp;&amp; (
        &lt;React.Fragment&gt;
          &lt;Text style={styles.header}&gt;All Notes&lt;/Text&gt;
          &lt;FlatList
            data={data}
            style={styles.wrapper}
            keyExtractor={(item) =&gt; `${item.id}`}
            renderItem={({ item }) =&gt; (
              &lt;TouchableOpacity onPress={() =&gt; {}} style={styles.post}&gt;
                &lt;View style={styles.item}&gt;
                  &lt;Text style={styles.postTitle}&gt;{item.note}&lt;/Text&gt;
                &lt;/View&gt;
              &lt;/TouchableOpacity&gt;
            )}
          /&gt;
        &lt;/React.Fragment&gt;
      )}
    &lt;/View&gt;
  );
};
const styles = StyleSheet.create({
  container: {
    flex: 1,
    // backgroundColor: colors.white,
    padding: 10,
  },
  wrapper: {
    flex: 1,
    paddingVertical: 30,
  },
  item: {
    paddingVertical: 10,
    paddingHorizontal: 20,
  },
  header: {
    textAlign: "center",
    textTransform: "capitalize",
    fontWeight: "bold",
    fontSize: 30,
    // color: colors.primary,
    paddingVertical: 10,
  },
  post: {
    // backgroundColor: colors.primary,
    padding: 15,
    borderRadius: 10,
    marginBottom: 20,
  },
  postTitle: {
    color: "#000",
    textTransform: "capitalize",
  },
});
export default Posts;
</pre>
<p>这里，我们使用<code>useNotes</code>钩子获取数据，并在<code>FlatList</code>中呈现它们。</p>
<h2 id="conclusion">结论</h2>
<p>在本文中，我们介绍了如何使用React Native构建语音到文本的听写应用程序。</p>
<p>当您构建需要硬件访问或核心库访问的移动应用程序时，了解如何使用React Native这样的移动框架访问这些资源非常重要。</p>
<p>我们在本文中详细研究了这些，我希望您现在对如何在您的项目中实现它们有了更好的理解。你可以在这里找到完整的源代码<a href="https://github.com/ganeshmani/SpeechToTextApp">。</a></p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现React原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款React原生监控解决方案，可帮助您即时重现问题、确定bug的优先级并了解React原生应用的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的React原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>