<html>
<head>
<title>Build an image-to-text conversion app with React and Tesseract.js OCR - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用 React 和 Tesseract.js OCR - LogRocket 博客构建一个图像到文本的转换应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-image-text-conversion-app-react-tesseractjs/#0001-01-01">https://blog.logrocket.com/build-image-text-conversion-app-react-tesseractjs/#0001-01-01</a></blockquote><div><article class="article-post">
<p><a href="https://tesseract.projectnaptha.com/" target="_blank" rel="noopener"> Tesseract.js </a>是一个开源的文本识别引擎，允许我们从图像中提取文本。这项技术的另一个词是光学字符识别，或 OCR。</p>
<p>ocr 的工作原理是扫描图像，并将其文本提取为机器可读文件。例如，假设你有一封想要复制的信件的图像。在这种情况下，Tesseract 可以允许您的计算机通过从您的图像中提取文本来复制和粘贴信件的内容。</p>
<p>Tesseract 的一个很大的好处是，它支持 100 多种语言，以防您需要提取英语以外的语言的文本。</p>
<p>在本文中，我们将了解 Tesseract，我们可以用它做什么，并通过使用 React 创建一个示例图像到文本转换应用程序来演示它是如何工作的。</p>
<h2>用 React 和 Tesseract.js 构建一个图像到文本的转换应用程序</h2>
<p>我们要做的 app 很简单；我们将有一个“选择图像”选项，然后在选择图像后，我们将做一些处理，最后显示扫描的文本。简单吧？</p>
<p>我们完成的应用程序将如下所示:</p>
<p><img data-attachment-id="86618" data-permalink="https://blog.logrocket.com/build-image-text-conversion-app-react-tesseractjs/image-to-text-sample-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app.png" data-orig-size="730,183" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-to-text-sample-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app-300x75.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app.png" decoding="async" class="aligncenter wp-image-86618 size-full jetpack-lazy-image" src="../Images/6e4525e16232fcd42beb3737ea7c0fa1.png" alt="Image of text to the left of machine-readable text that has been scanned in" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app-300x75.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="86618" data-permalink="https://blog.logrocket.com/build-image-text-conversion-app-react-tesseractjs/image-to-text-sample-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app.png" data-orig-size="730,183" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-to-text-sample-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app-300x75.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app.png" decoding="async" loading="lazy" class="aligncenter wp-image-86618 size-full" src="../Images/6e4525e16232fcd42beb3737ea7c0fa1.png" alt="Image of text to the left of machine-readable text that has been scanned in" srcset="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app-300x75.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/01/image-to-text-sample-app.png"/></noscript>
<p>在顶部，我们有一个“选择图像”按钮。下面将显示上传的图像，右边是我们转换的文本。</p>
<p>要制作这个应用，我们必须首先创建一个 React 应用。为此，我们将使用 Create React App 命令行工具。</p>
<p>打开您的终端，写下以下内容:</p>
<pre class="language-shell hljs">npx create-react-app &lt;your_app_name&gt;
</pre>
<p>创建应用程序后，我们需要安装宇宙魔方。</p>
<p>在项目目录中打开您的终端，并安装以下内容:</p>
<pre class="language-javascript hljs">yarn add tesseract.js
or
npm install -S tesseract.js 
</pre>
<p>现在我们已经安装了宇宙魔方依赖项。</p>
<h2>构建应用程序</h2>
<p>打开<code>App.js</code>文件，输入以下内容创建 UI:</p>
<pre class="language-javascript hljs">import { useEffect, useState } from "react";
import { createWorker } from "tesseract.js";
import "./App.css";
function App() {
  const [ocr, setOcr] = useState("");
  const [imageData, setImageData] = useState(null);
  const worker = createWorker({
    logger: (m) =&gt; {
      console.log(m);
    },
  });
  const convertImageToText = async () =&gt; {
    if (!imageData) return;
    await worker.load();
    await worker.loadLanguage("eng");
    await worker.initialize("eng");
    const {
      data: { text },
    } = await worker.recognize(imageData);
    setOcr(text);
  };

  useEffect(() =&gt; {
    convertImageToText();
  }, [imageData]);

  function handleImageChange(e) {
    const file = e.target.files[0];
    if(!file)return;
    const reader = new FileReader();
    reader.onloadend = () =&gt; {
      const imageDataUri = reader.result;
      console.log({ imageDataUri });
      setImageData(imageDataUri);
    };
    reader.readAsDataURL(file);
  }
  return (
    &lt;div className="App"&gt;
      &lt;div&gt;
        &lt;p&gt;Choose an Image&lt;/p&gt;
        &lt;input
          type="file"
          name=""
          id=""
          onChange={handleImageChange}
          accept="image/*"
        /&gt;
      &lt;/div&gt;
      &lt;div className="display-flex"&gt;
        &lt;img src={imageData} alt="" srcset="" /&gt;
        &lt;p&gt;{ocr}&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>在上面的代码中，我们有两种状态；第一个用于我们将提取的 OCR 文本，第二个用于将在 UI 中显示的所选图像。</p>
<p>之后，我们有工人，这有助于宇宙魔方在后台运行；在<code>createWorker</code>函数中，我们有一个记录器选项。</p>
<p>接下来，我们创建了<code>convertImageToText</code>函数，这是我们的主函数。它会做它所说的事情:将我们的图像转换成文本。</p>
<h2>将图像转换为文本</h2>
<p>首先，我们使用<code>worker.load()</code>函数加载 Tesseract 核心脚本。之后，我们从高速缓存中加载语言训练模型。否则，它将从 Tesseract 服务器下载训练好的模型，缓存并使用它。</p>
<p>加载语言模型后，我们使用<code>worker.initialize()</code>初始化 Tesseract，然后传入英语的<code>eng</code>，这是我们的首选语言。</p>
<p>接下来，我们需要调用<code>recognize</code>函数并传入图片 URL。它将文本作为数据返回；收到数据后，我们使用<code>setOcr</code>函数将它设置为我们的<code>ocr</code>状态，这样我们就可以将它显示给用户。</p>
<p>我们还有一个<code>handleImageChange</code>功能，当我们选择另一个图像时就会触发这个功能。在这个函数中，我们读取文件并将它的数据存储在<code>imageData</code>状态。</p>
<h2>构建用户界面</h2>
<p>最后，让我们为 UI 写一些 JSX。</p>
<p>在 UI 中，我们有一个带有<code>type="file"</code>的输入标签和一个<code>onChange</code>属性，它由我们之前编写的<code>handleImageChange</code>函数来处理。</p>
<p>在底部，我们使用<code>imageData</code>显示图像，使用 OCR 状态显示文本。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>现在，如果你运行你的应用程序，它将转换文本并显示在用户界面上。但是，您会注意到显示该文本需要一些时间。</p>
<p>为了制作更好的 UX，我们可以在用户等待加载转换时添加一个进度条:</p>
<pre class="language-javascript hljs">function App() {
....
....
const [progress, setProgress] = useState(0);

  const worker = createWorker({
    logger: (m) =&gt; {
      console.log(m);
      setProgress(parseInt(m.progress * 100));
    },
  }); 

.....
.....

return (
    &lt;div className="App"&gt;
      &lt;div&gt;
        &lt;p&gt;Choose an Image&lt;/p&gt;
        &lt;input
          type="file"
          name=""
          id=""
          onChange={handleImageChange}
          accept="image/*"
        /&gt;
      &lt;/div&gt;
      {progress &lt; 100 &amp;&amp; progress &gt; 0 &amp;&amp; &lt;div&gt;
        &lt;div className="progress-label"&gt;Progress ({progress}%)&lt;/div&gt;
        &lt;div className="progress-bar"&gt;
          &lt;div className="progress" style={{width: `${progress}%`}} &gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;}
      &lt;div className="display-flex"&gt;
        &lt;img src={imageData} alt="" srcset="" /&gt;
        &lt;p&gt;{ocr}&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
</pre>
<p>这样，我们可以显示一个百分比进度条，让用户知道将图像转换成文本需要多长时间。</p>
<p>这将是我们 UI 的最终 CSS:</p>
<pre class="language-css hljs">body {
    background-color: aliceblue;
}
.App {
    padding: 10px;
}
input {
    margin-bottom: 5px;
}
img {
    width: 30vw;
    height: auto;
    margin-right: 50px;
}
p {
    width: 50vw;
}
.display-flex {
    display: flex;
}
.progress-label {
    margin-bottom: 5px;
}
.progress-bar {
    background-color: rgb(232, 232, 232);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 10px;
    max-width: 50vw;
}
.progress {
    background-color: rgb(0, 255, 170);
    width: 0%;
    height: 10px;
}
</pre>
<p>这里没有什么花哨的，只是简单的 CSS 规则，使一个更好的用户界面。在这里，我们改变了页面的背景颜色，并制作了一个进度条来指示我们将图像转换为文本时的进度。</p>
<h2>结论</h2>
<p>恭喜各位，现在你知道如何利用宇宙魔方的力量来做一些令人敬畏和兴奋的项目了。我希望这篇文章已经教会你更多关于 Tesseract 和这个工具的许多可能性。</p>
<p>用这项技术构建的其他一些有趣的东西是一个数学求解应用程序，用户可以上传一个数学方程的图像，它将被转换为文本并求解。或者，你可以开发一个应用程序，从图像中检测链接，并使它们可以点击。</p>
<p>感谢您的阅读，祝您有美好的一天。🙂</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产 React 应用</h2><p>调试 React 应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪 Redux 状态、自动显示 JavaScript 错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的 web 和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket 不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试 React 应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>