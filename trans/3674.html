<html>
<head>
<title>Build a Kanban board with dnd kit and React </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用dnd套件制作看板并做出反应</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/#0001-01-01">https://blog.logrocket.com/build-kanban-board-dnd-kit-react/#0001-01-01</a></blockquote><div><article class="article-post">
<p>你是一个正在寻找react-beautiful-dnd替代品的开发人员吗？不要再看了！dnd工具包在这里，我们将在本演练指南中讨论如何使用它。</p>
<p><em>向前跳转:</em></p>

<h2 id="dnd-kit-alternative-react-beautiful-dnd">dnd套件作为react-beautiful-dnd的替代产品</h2>
<p>用于设计web界面的最流行的UI模式之一是拖放模式。这是一种包含在项目中的易于使用且直观的模式，最常用于上传文件、重新排序或移动项目等过程。</p>
<p>有几个软件包可以使拖放功能的实现变得简单，React开发人员的一个流行选择是<a href="https://www.npmjs.com/package/react-beautiful-dnd"> react-beautiful-dnd </a>。</p>
<p>不幸的是，它不再被维护，也没有任何未来发展的计划。这让像我这样的开发人员寻找一个可靠的替代品，也给了我一个不喜欢Atlassian的理由(第一个是吉拉😅！)</p>
<p><img data-attachment-id="145018" data-permalink="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/attachment/react-beautiful-dnd/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd.png" data-orig-size="730,431" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-beautiful-dnd" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd-300x177.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd.png" decoding="async" class="aligncenter wp-image-145018 size-full jetpack-lazy-image" src="../Images/6efeba8dfe50a02caccb5f9e7c2d4809.png" alt="React-beautiful-dnd Package " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd-300x177.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145018" data-permalink="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/attachment/react-beautiful-dnd/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd.png" data-orig-size="730,431" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-beautiful-dnd" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd-300x177.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd.png" decoding="async" loading="lazy" class="aligncenter wp-image-145018 size-full" src="../Images/6efeba8dfe50a02caccb5f9e7c2d4809.png" alt="React-beautiful-dnd Package " srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd-300x177.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/react-beautiful-dnd.png"/></noscript>
<p>输入免打扰套件。</p>
<h2 id="dnd-kit">什么是免打扰套件？</h2>
<p>dnd套件是新的“套件”(责怪这个笑话的创造者🤣)对于那些寻求替代反应-美丽-dnd的人来说，它看起来肯定很有希望。</p>
<p>在本教程中，我们将创建一个基本的看板，同时了解dnd套件及其特性。</p>
<p>这是我们完成后，我们的板看起来会是什么样子的图像:</p>
<p><img data-attachment-id="145020" data-permalink="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/attachment/kanban-board/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board.png" data-orig-size="730,148" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="kanban-board" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-300x61.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board.png" decoding="async" class="aligncenter wp-image-145020 size-full jetpack-lazy-image" src="../Images/f4892f1b5b3461ee4aa8d5101e8382f6.png" alt="Basic Kanban Board " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-300x61.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145020" data-permalink="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/attachment/kanban-board/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board.png" data-orig-size="730,148" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="kanban-board" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-300x61.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board.png" decoding="async" loading="lazy" class="aligncenter wp-image-145020 size-full" src="../Images/f4892f1b5b3461ee4aa8d5101e8382f6.png" alt="Basic Kanban Board " srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-300x61.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board.png"/></noscript>
<h2 id="getting-started-dnd-kit">免打扰套件入门</h2>
<p>我们将从使用Create React App建立一个React项目开始。为了简单起见，我们将使用Chakra UI组件库，因为它易于设置和使用。</p>
<p>要创建和设置React项目，请运行以下命令:</p>
<pre class="language-shell hljs">npx create-react-app react-kanban-app --template @chakra-ui   # create project
cd react-kanban-app   # move into the project directory

# If you prefer TS over JS and yarn over npm
npx create-react-app react-kanban-app --template @chakra-ui/typescript
yarn create react-app react-kanban-app --template @chakra-ui
yarn create react-app react-kanban-app --template @chakra-ui/typescript
</pre>
<p>这将创建一个名为<code>react-kanban-app</code>的文件夹。使用命令行cd进入项目目录并运行:</p>
<pre class="language-shell hljs">npm run start
</pre>
<p>这将在端口3000上启动应用程序。在您的浏览器中打开<code>localhost:3000</code>，您将看到以下屏幕:</p>
<p><img data-attachment-id="145022" data-permalink="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/attachment/port-3000/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="port-3000" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000.png" decoding="async" class="aligncenter wp-image-145022 size-full jetpack-lazy-image" src="../Images/7b71d7e2804b8f7889f56f4beefbbb49.png" alt="Port 3000 Charkra Splash Screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000-300x167.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145022" data-permalink="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/attachment/port-3000/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="port-3000" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000.png" decoding="async" loading="lazy" class="aligncenter wp-image-145022 size-full" src="../Images/7b71d7e2804b8f7889f56f4beefbbb49.png" alt="Port 3000 Charkra Splash Screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000-300x167.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/port-3000.png"/></noscript>
<h2 id="installing-dnd-kit-core">安装<code>dnd-kit/core</code></h2>
<p>现在我们已经建立了一个基础项目，让我们从安装dnd工具包开始；我们今天将使用的轻量级、高性能、可扩展的React拖放工具包。</p>
<p>要安装该软件包，请运行:</p>
<pre class="language-shell hljs">npm install @dnd-kit/core

# If you run into peer dependencies issues (esp. npm 7+)
npm install --legacy-peer-deps @dnd-kit/core
</pre>
<p>该命令将从dnd-kit安装<code>core</code>包。</p>
<p><code>core</code>包附带了在React应用程序中创建拖放功能所需的构建块。该套件附带有<code>DndContext</code>、<code>Draggable</code>和<code>Droppable</code>核心组件。</p>
<p>除此之外，它还附带了一个<code>DragOverlay</code>组件，以更流畅的外观改善用户体验——我们将在本文后面更详细地介绍核心组件。</p>
<p>对于更高级的用例，我们还可以安装dnd kit提供的其他包。</p>
<h3 id="modifiers">修饰语</h3>
<p>这个包附带了有用的<a href="https://docs.dndkit.com/api-documentation/modifiers">修改器</a>，可以用来改变核心组件的行为。</p>
<p>以下是修改器的一些主要功能:</p>
<ul>
<li>将运动限制在一个轴上(水平或垂直)</li>
<li>将运动限制到窗口或可拖动项目的父元素</li>
<li>将可拖动项目对齐网格</li>
<li>创建自定义修改器</li>
</ul>
<h3 id="presets">预设(可排序预设)</h3>
<p>dnd-kit工具包附带了一个<a href="https://docs.dndkit.com/presets/sortable">可分类的</a>预置。该预设可用于在React中构建可排序的拖放界面。</p>
<p>对于本教程，我们将坚持核心包，所以让我们在弄脏手之前仔细看看它。</p>
<h2 id="building-blocks-dnd-kit">dnd套件的构建模块</h2>
<h3 id="dndcontext"><code>DndContext</code></h3>
<p>这是我们拖放功能的根组件，所有其他块都嵌套在里面。</p>
<p>该组件接受大约12个道具，在特定事件发生时帮助修改行为或运行代码。</p>
<p>出于本教程的目的，我们将使用<code>collisionDetection</code>和<code>onDragEnd</code>道具。</p>
<blockquote><p><strong>注意，</strong> <a href="https://docs.dndkit.com/api-documentation/context-provider#props">了解更多关于其他道具的</a>。</p></blockquote>
<h3 id="draggable">可拖动的</h3>
<p>核心包导出了<code>useDraggable</code>钩子，它可以在我们的React组件中使用，使它成为一个可拖动的组件(稍后将详细介绍)。</p>
<pre class="language-javascript hljs">//exampleDraggable.jsx
import {useDraggable} from "@dnd-kit/core"
import {CSS} from "@dnd-kit/utilities"

export const MyDraggableComponent = () =&gt; {
const {attributes, listeners, setNodeRef, transfrom} = useDraggable({
  id: 'draggable-1',
  data: {
    ....
    parent: 'ToDo',
    title: 'Complete blogpost.'
    ....
  }
  return &lt;div 
          {...attributes} 
          {...listeners} 
          ref={setNodeRef} 
          styles={{transfrom: CSS.Translate.toString(transform) }}&gt;Drag Me!&lt;/div&gt;
})
</pre>
<h3 id="droppable">可抛弃的</h3>
<p>很像<code>useDraggable</code>钩子，我们可以使用<code>useDroppable</code>钩子使我们的React组件成为一个可丢弃的目标。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<pre class="language-javascript hljs">//exampleDroppable.jsx
import {useDroppable} from "@dnd-kit/core"

export const MyDroppableComponent = () =&gt; {
  const {setNodeRef} = useDroppable({
    id: 'droppable-1'
  })

  return &lt;div ref={setNodeRef}&gt; Drop on me! &lt;/div&gt;
}
</pre>
<h3 id="sensors">传感器</h3>
<p>传感器是不同的输入方法，可用于启动可拖动项目的拖动。</p>
<p>我们可以使用一些内置传感器:</p>
<ul>
<li>指针</li>
<li>键盘</li>
<li>触控</li>
<li>老鼠</li>
</ul>
<p><code>DndContext</code>默认为一个<code>Pointer</code>和<code>Keyboard</code>传感器。如果您想使用另一个传感器，可以通过初始化一个传感器，然后将其传递给<code>DndContext</code>来完成。</p>
<pre class="language-javascript hljs">//sensors.jsx
import {MouseSensor, TouchSensor, useSensor} from '@dnd-kit/core';

export const DragDropContainer = () =&gt; {

  const mouseSensor = useSensor(MouseSensor); // Initialize mouse sensor
  const touchSensor = useSensor(TouchSensor); // Initialize touch sensor
  const sensors = useSensors(mouseSensor, touchSensor)

  return (&lt;DndContext sensors={sensors}&gt;.....&lt;/DndContext&gt;) // Pass the 2 sensors
}
</pre>
<p>既然我们已经讨论了这些基础，现在我们可以开始用dnd套件构建看板，所以让我们直接进入正题。</p>
<p><img data-attachment-id="145126" data-permalink="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/attachment/kanban-board-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1.png" data-orig-size="730,511" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="kanban-board" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1-300x210.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1.png" decoding="async" class="aligncenter wp-image-145126 size-full jetpack-lazy-image" src="../Images/e6b4b316e97d5c497e83b4d6b8b7e925.png" alt="Kanban Board Layout" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1-300x210.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145126" data-permalink="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/attachment/kanban-board-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1.png" data-orig-size="730,511" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="kanban-board" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1-300x210.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1.png" decoding="async" loading="lazy" class="aligncenter wp-image-145126 size-full" src="../Images/e6b4b316e97d5c497e83b4d6b8b7e925.png" alt="Kanban Board Layout" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1-300x210.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/kanban-board-1.png"/></noscript>
<p>上面显示的是我们将要构建的看板的组件分解。</p>
<p>我们今天将探讨三个主要组件:</p>
<ul>
<li><code>KanbanCard</code>:一个可拖动的看板<code>Item</code>，可以放到一个可放下的区域</li>
<li><code>KanbanLane</code>:可以放下<code>KanbanCard</code>的可放下区域</li>
<li><code>KanbanBoard</code>:将所有东西结合在一起的组件</li>
</ul>
<h2 id="kanbancard"><code>KanbanCard</code>组件</h2>
<p>让我们从<code>KanbanCard</code>组件开始:</p>
<pre class="language-typescript hljs">// KanbanCard.tsx
import { Flex, Text } from "@chakra-ui/react";
import { useDraggable } from "@dnd-kit/core";
import { CSS } from "@dnd-kit/utilities";

const KanbanCard = ({
  title,
  index,
  parent,
}: {
  title: string;
  index: number;
  parent: string;
}) =&gt; {
  const { attributes, listeners, setNodeRef, transform } = useDraggable({
    id: title,
    data: {
      title,
      index,
      parent,
    },
  });
  const style = {
    transform: CSS.Translate.toString(transform),
  };
  return (
    &lt;Flex
      padding="3"
      backgroundColor="white"
      margin="2"
      borderRadius="8"
      border="2px solid gray.500"
      boxShadow="0px 0px 5px 2px #2121213b"
      transform={style.transform}
      {...listeners}
      {...attributes}
      ref={setNodeRef}
    &gt;
      &lt;Text&gt;{title}&lt;/Text&gt;
    &lt;/Flex&gt;
  );
};
</pre>
<p>这里有几件事需要注意，我将在下面重点说明。</p>
<p>该组件有三个支柱:</p>
<ul>
<li><code>title</code>:卡片的标题</li>
<li><code>index</code>:当前车道卡片的索引</li>
<li><code>parent</code>:卡片当前所在车道的名称</li>
</ul>
<p>为了使组件可拖动，我们必须使用<code>useDraggable</code>钩子。在上面的例子中，我们需要传递一些东西作为参数:</p>
<ul>
<li><code>id</code>:标识<code>DndContext</code>中可拖动节点的唯一值</li>
<li><code>data</code>:可以在事件处理程序中使用的数据</li>
</ul>
<p>钩子也返回了一些我们必须考虑的东西:</p>
<ul>
<li><code>attributes</code>:需要添加到可拖动DOM节点的可访问性属性</li>
<li><code>listeners</code>:拖动工作需要大量的事件处理程序</li>
<li><code>setNodeRef</code>:dnd-kit用来跟踪DOM节点的函数</li>
<li><code>transform</code>:保存可拖动元素的位置和缩放值的对象</li>
</ul>
<p>最后，为了可视化地更新组件，我们必须更新卡片的<code>transform</code> CSS属性。为了获得卡片位置，我们需要将<code>useDraggable</code>钩子返回的转换值传递给dnd-kit提供的辅助函数。</p>
<h2 id="kanban-lane"><code>KanbanLane</code>组件</h2>
<p>现在，让我们来看看<code>KanbanLane</code>组件:</p>
<pre class="language-typescript hljs">// KanbanLane.tsx
import { Flex, Text } from "@chakra-ui/react";
import { useDroppable } from "@dnd-kit/core";

interface KanbanLaneProps {
  title: string;
  items: Cards[];
}

export default function KanbanLane({ title, items }: KanbanLaneProps) {
  const { setNodeRef } = useDroppable({
    id: title,
  });
  return (
    &lt;Flex flex="3" padding="5" flexDirection="column" minH="10rem"&gt;
      &lt;Text fontWeight="bold"&gt;{title}&lt;/Text&gt;
      &lt;Flex
        ref={setNodeRef}
        backgroundColor="gray.200"
        borderRadius="8"
        flex="1"
        padding="2"
        flexDirection="column"
      &gt;
        {items.map(({ title: cardTitle }, key) =&gt; (
          &lt;KanbanCard title={cardTitle} key={key} index={key} parent={title} /&gt;
        ))}
      &lt;/Flex&gt;
    &lt;/Flex&gt;
  );
}
</pre>
<p>这是一个非常精简的组件，因为它所做的只是渲染多个<code>KanbanCard</code>组件。需要注意的一点是，它使用了<code>useDroppable</code>钩子，这使得它成为一个可放置的区域。</p>
<p>我们需要传入一个在<code>DndContext</code>中唯一的<code>id</code>。</p>
<h2 id="kanban-board"><code>KanbanBoard</code>组件</h2>
<p>最后，让我们仔细看看将所有这些联系在一起的<code>KanbanBoard</code>组件:</p>
<pre class="language-typescript hljs">// KanbanBoard.tsx
import { DndContext, rectIntersection } from "@dnd-kit/core";
import KanbanLane from "./KanbanLane";
import AddCard from "./AddCard";
import { Flex } from "@chakra-ui/react";
import { useState } from "react";
import { Cards } from "./types";
export default function KanbanBoard() {
  const [todoItems, setTodoItems] = useState&lt;Array&lt;Cards&gt;&gt;([]);
  const [doneItems, setDoneItems] = useState&lt;Array&lt;Cards&gt;&gt;([]);
  const [inProgressItems, setInProgressItems] = useState&lt;Array&lt;Cards&gt;&gt;([]);
  const [uItems, setuItems] = useState&lt;Array&lt;Cards&gt;&gt;([]);
  const addNewCard = (title: string) =&gt; {
    setuItems([...uItems, { title }]);
  };
  return (
    &lt;DndContext
      collisionDetection={rectIntersection}
      onDragEnd={(e) =&gt; {
        const container = e.over?.id;
        const title = e.active.data.current?.title ?? "";
        const index = e.active.data.current?.index ?? 0;
        const parent = e.active.data.current?.parent ?? "ToDo";
        if (container === "ToDo") {
          setTodoItems([...todoItems, { title }]);
        } else if (container === "Done") {
          setDoneItems([...doneItems, { title }]);
        } else if (container === "Unassigned") {
          setuItems([...uItems, { title }]);
        } else {
          setInProgressItems([...inProgressItems, { title }]);
        }
        if (parent === "ToDo") {
          setTodoItems([
            ...todoItems.slice(0, index),
            ...todoItems.slice(index + 1),
          ]);
        } else if (parent === "Done") {
          setDoneItems([
            ...doneItems.slice(0, index),
            ...doneItems.slice(index + 1),
          ]);
        } else if (parent === "Unassigned") {
          setuItems([...uItems.slice(0, index), ...uItems.slice(index + 1)]);
        } else {
          setInProgressItems([
            ...inProgressItems.slice(0, index),
            ...inProgressItems.slice(index + 1),
          ]);
        }
      }}
    &gt;
      &lt;Flex flexDirection="column"&gt;
        &lt;AddCard addCard={addNewCard} /&gt;
        &lt;Flex flex="3"&gt;
          &lt;KanbanLane title="ToDo" items={todoItems} /&gt;
          &lt;KanbanLane title="In Progress" items={inProgressItems} /&gt;
          &lt;KanbanLane title="Done" items={doneItems} /&gt;
          &lt;KanbanLane title="Unassigned" items={uItems} /&gt;
        &lt;/Flex&gt;
      &lt;/Flex&gt;
    &lt;/DndContext&gt;
  );
</pre>
<p>这里发生了相当多的事情；让我们一个一个地检查它们。</p>
<p>首先，该板有四个通道:<code>ToDo</code>、<code>In Progress</code>、<code>Done</code>和<code>Unassigned</code>。</p>
<p>其次，<code>&lt;AddCard/&gt;</code>组件只是一个带按钮的文本框。点击该按钮，将创建一张标题在文本框中指定的卡片，并将其添加到<code>Unassigned</code>通道。</p>
<p><code>DndContext</code>是组件的根，我们需要向它传递两个重要的道具:</p>
<ul>
<li><code>collisionDetection</code>:这个<a href="https://docs.dndkit.com/api-documentation/context-provider/collision-detection-algorithms">指示使用哪种方法</a>来检测可拖动和可放下组件之间的碰撞</li>
<li>这是一个事件处理程序，每次我们停止拖动一个可拖动的组件时都会运行。在事件处理程序中:<ul>
<li>我们识别出卡所在的通道并将其移除</li>
<li>我们确定卡片是从哪个通道掉落的，并将其添加到该通道</li>
</ul>
</li>
</ul>
<p>最后，这是它看起来的样子👇</p>
<p><img data-attachment-id="145129" data-permalink="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/attachment/simple-kanban/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/simple-kanban.gif" data-orig-size="730,222" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="simple-kanban" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/simple-kanban-300x91.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/simple-kanban.gif" decoding="async" class="aligncenter wp-image-145129 size-full jetpack-lazy-image" src="../Images/b67deef21ef1302d1e3a127131e5f3db.png" alt="Simple Kanban Final Project Example" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/simple-kanban.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/simple-kanban.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145129" data-permalink="https://blog.logrocket.com/build-kanban-board-dnd-kit-react/attachment/simple-kanban/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/simple-kanban.gif" data-orig-size="730,222" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="simple-kanban" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/simple-kanban-300x91.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/simple-kanban.gif" decoding="async" loading="lazy" class="aligncenter wp-image-145129 size-full" src="../Images/b67deef21ef1302d1e3a127131e5f3db.png" alt="Simple Kanban Final Project Example" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/simple-kanban.gif"/></noscript>
<h2 id="conclusion">结论</h2>
<p>虽然<a href="https://www.npmjs.com/package/react-beautiful-dnd"> react-beautiful-dnd </a>没有被积极维护，但它更加成熟，周围有一个巨大的社区。正因为如此，说服人们跳槽肯定会很有挑战性。它还具有一些高级特性，如支持多次拖动、虚拟列表支持和SSR，这些都是dnd kit不能开箱即用的。</p>
<p>然而，我觉得dnd套件有潜力达到与react-beautiful-dnd相当的功能，甚至超过它。感兴趣的人可以通过解决问题和打开PRs来帮助实现这一目标！</p>
<p>就是这样！我们已经使用dnd套件和React构建了一个基本的看板。你可以在这里找到这个教程<a href="https://github.com/rahulnpadalkar/react-dnd-kanban">的回购。我发关于web开发和JavaScript的微博，所以如果你感兴趣，可以找我</a><a href="https://twitter.com/rahulnpadalkar"> @rahulnpadalkar </a>。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>