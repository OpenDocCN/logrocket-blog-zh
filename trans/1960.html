<html>
<head>
<title>Building an animated loader in React Native - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 React Native - LogRocket 博客中构建动画加载器</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-animated-loader-react-native/#0001-01-01">https://blog.logrocket.com/building-animated-loader-react-native/#0001-01-01</a></blockquote><div><article class="article-post">
<p>React Native 对于希望快速构建移动应用的开发人员来说是一个非常棒的库。它提供了一种向前端显示信息的有效方式。但是在显示 API 数据之前，应用程序必须首先通知用户数据已经在路上了。</p>
<p>一种方法是利用动画的力量。因此，它也可以给你的用户界面一个更有活力的感觉。</p>
<p>比如你觉得什么给人的印象比较好？呈现一段文本:</p>
<p><img data-attachment-id="59004" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/react-native-animated-text-loader/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-native-animated-text-loader.gif" data-orig-size="342,511" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN animated text loader" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-native-animated-text-loader-201x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-native-animated-text-loader.gif" decoding="async" class="size-full wp-image-59004 aligncenter jetpack-lazy-image" src="../Images/b26a9747087ca1eb280d74dec0a24a73.png" alt="RN Animated Text Loader" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/react-native-animated-text-loader.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/react-native-animated-text-loader.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59004" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/react-native-animated-text-loader/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-native-animated-text-loader.gif" data-orig-size="342,511" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN animated text loader" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-native-animated-text-loader-201x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-native-animated-text-loader.gif" decoding="async" loading="lazy" class="size-full wp-image-59004 aligncenter" src="../Images/b26a9747087ca1eb280d74dec0a24a73.png" alt="RN Animated Text Loader" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/react-native-animated-text-loader.gif"/></noscript>
<p>或者用一个生动的动画:</p>
<p><img data-attachment-id="59005" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/vivid-rn-loader/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/vivid-rn-loader.gif" data-orig-size="269,517" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Vivid RN loader" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/vivid-rn-loader-156x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/vivid-rn-loader.gif" decoding="async" class="size-full wp-image-59005 aligncenter jetpack-lazy-image" src="../Images/18af589f90a4aee50a9408a71f3c7a1c.png" alt="Vivid RN Loader" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/vivid-rn-loader.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/vivid-rn-loader.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59005" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/vivid-rn-loader/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/vivid-rn-loader.gif" data-orig-size="269,517" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Vivid RN loader" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/vivid-rn-loader-156x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/vivid-rn-loader.gif" decoding="async" loading="lazy" class="size-full wp-image-59005 aligncenter" src="../Images/18af589f90a4aee50a9408a71f3c7a1c.png" alt="Vivid RN Loader" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/vivid-rn-loader.gif"/></noscript>
<p>在 React Native 世界中，有大量的库可以帮助你开始运行。在本指南中，我们将使用<a href="https://github.com/lottie-react-native/lottie-react-native">洛蒂-反应-原生</a>和<a href="https://github.com/oblador/react-native-animatable">反应-原生-动画</a>。这是因为他们是一个绝对的微风使用和维护良好。</p>
<h2>利用洛蒂</h2>
<p>假设您使用 Adobe After Effects 构建了一个令人惊叹的图形，并希望在您的应用程序中渲染它。但是，这是一个主要的缺陷:Adobe 不允许你这样做。</p>
<p>这就是洛蒂反应原生的用武之地。它允许开发人员渲染他们的动画，而无需通过代码重新创建它们。它只需要几行代码就可以工作，从而让您专注于项目中更重要的部分。</p>
<h3>安装模块</h3>
<p>要将其安装到您的应用程序中，请运行以下终端命令:</p>
<pre>npm i lottie-react-native
npm i <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e78b8893938e82ca8e8894a7d4c9d6c9df">[email protected]</a>
</pre>
<h3>收购资产</h3>
<p>您可以通过使用<a href="https://exchange.adobe.com/creativecloud.details.12557.bodymovin.html"> Bodymovin </a>插件导出动画来使用自己的动画。但是对于本指南，我们将使用<a href="https://lottiefiles.com">lotti files</a>目录。它包括大量的免费动画，您可以将它们导入到您的项目中。</p>
<p>在本文中，我将使用<a href="https://lottiefiles.com/67834-ssssttt-shut-up-the-cat-is-sleeping">睡猫动画</a>。</p>
<p>要在应用程序中使用您想要的动画，首先下载 JSON 格式的动画，如下所示:</p>
<p><img data-attachment-id="58992" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/download-lottie-json/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json.png" data-orig-size="371,265" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Download Lottie in JSON" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json-300x214.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json.png" decoding="async" class="size-full wp-image-58992 aligncenter jetpack-lazy-image" src="../Images/c6434dc01a985ebad76bff7596a3e4b0.png" alt="Download Lottie in JSON" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json.png 371w, https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json-300x214.png 300w" data-lazy-sizes="(max-width: 371px) 100vw, 371px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="58992" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/download-lottie-json/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json.png" data-orig-size="371,265" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Download Lottie in JSON" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json-300x214.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json.png" decoding="async" loading="lazy" class="size-full wp-image-58992 aligncenter" src="../Images/c6434dc01a985ebad76bff7596a3e4b0.png" alt="Download Lottie in JSON" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json.png 371w, https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json-300x214.png 300w" sizes="(max-width: 371px) 100vw, 371px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/download-lottie-json.png"/></noscript>
<p>接下来，将它移动到<code>assets</code>文件夹中。</p>
<h3>简单用法</h3>
<p>要使用 Lottie，请编写以下代码:</p>
<pre>import React from "react";
import { StyleSheet, View, Text } from "react-native";
import LottieView from "lottie-react-native";
import { useState } from "react";
export default function SimpleLottie() {
  return (
    &lt;View&gt;
      &lt;LottieView
        source={require("./assets/67834-ssssttt-shut-up-the-cat-is-sleeping.json")}
        style={styles.animation}
        autoPlay
      /&gt;
    &lt;/View&gt;
  );
}
const styles = StyleSheet.create({
  animation: {
    width: 100,
    height: 100,
  },
});
</pre>
<p>组件保存了我们的动画配置。这里，<code>source</code>道具告诉我们资产的位置。此外，<code>autoPlay</code>道具告诉洛蒂在启动时运行动画。</p>
<p>要渲染<code>SimpleLottie</code>，请在<code>App.js</code>中编写以下代码:</p>
<pre>//further code removed..
import SimpleLottie from "./SimpleLottie";
export default function App() {
  return (
    &lt;View style={styles.container}&gt;
      &lt;SimpleLottie /&gt;
      &lt;StatusBar style="auto" /&gt;
    &lt;/View&gt;
  );
}
//...
</pre>
<p><img data-attachment-id="58994" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/sleeping-cat-lottie/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie.gif" data-orig-size="334,520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sleeping cat Lottie" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-193x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie.gif" decoding="async" class="size-full wp-image-58994 aligncenter jetpack-lazy-image" src="../Images/41c01e7e060d5c4e7b9d39bd7b7c651f.png" alt="Sleeping Cat Lottie" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="58994" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/sleeping-cat-lottie/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie.gif" data-orig-size="334,520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sleeping cat Lottie" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-193x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie.gif" decoding="async" loading="lazy" class="size-full wp-image-58994 aligncenter" src="../Images/41c01e7e060d5c4e7b9d39bd7b7c651f.png" alt="Sleeping Cat Lottie" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie.gif"/></noscript>
<h3>洛蒂中的条件渲染</h3>
<p>我们甚至可以在我们的<code>SimpleLottie</code>组件上执行条件渲染。这将模拟加载功能:</p>
<pre>const [show, setShow] = useState(false);

useEffect(() =&gt; {
  setTimeout(() =&gt; setShow(true), 3000);
}, []);

return (
  &lt;View style={styles.container}&gt;
    {show ?&lt;Text&gt;Finished loading!&lt;/Text&gt; : &lt;SimpleLottie /&gt; }
    &lt;StatusBar style="auto" /&gt;
  &lt;/View&gt;
);
</pre>
<p>在这段代码中，我们告诉 React 在 3 秒后反转<code>show</code>钩子的值。这将在屏幕上呈现出<code>Text</code>。</p>
<p><img data-attachment-id="58996" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/sleeping-cat-lottie-loader/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-loader.gif" data-orig-size="334,520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sleeping cat Lottie loader" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-loader-193x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-loader.gif" decoding="async" class="size-full wp-image-58996 aligncenter jetpack-lazy-image" src="../Images/01c021b9655873ac07a35b6a4bdae3fc.png" alt="Sleeping Cat Lottie Loader" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-loader.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-loader.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="58996" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/sleeping-cat-lottie-loader/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-loader.gif" data-orig-size="334,520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sleeping cat Lottie loader" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-loader-193x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-loader.gif" decoding="async" loading="lazy" class="size-full wp-image-58996 aligncenter" src="../Images/01c021b9655873ac07a35b6a4bdae3fc.png" alt="Sleeping Cat Lottie Loader" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/sleeping-cat-lottie-loader.gif"/></noscript>
<h3>使用 Lottie 创建加载器组件</h3>
<p>这里，计划显示来自<a href="https://sampleapis.com/api-list/coffee">咖啡 API </a>的数据。在加载数据时，React 将显示加载图形。<br/>创建一个名为<code>DataDisplay.js</code>的文件。该组件在显示列表项时非常有用。在这里，编写以下代码:</p>
<pre>import React from "react";
import { StyleSheet, SafeAreaView, FlatList, Text, View } from "react-native";
export default function DataDisplay({ data }) {
  const Item = ({ title }) =&gt; (
    &lt;View style={styles.item}&gt;
      &lt;Text&gt;{title}&lt;/Text&gt;
    &lt;/View&gt;
  );
  const renderItem = ({ item }) =&gt; &lt;Item title={item.title} /&gt;;
  return (
    &lt;SafeAreaView&gt;
      &lt;FlatList
        data={data}
        renderItem={renderItem}
        keyExtractor={(item) =&gt; item.id.toString()}
      /&gt;
    &lt;/SafeAreaView&gt;
  );
}
const styles = StyleSheet.create({
  item: {
    backgroundColor: "yellow",
    padding: 20,
    marginVertical: 8,
  },
});
</pre>
<p>从这段代码中可以得出一些推论:</p>
<ul>
<li>我们创建了<code>Item</code>组件和<code>renderItem</code>函数。它们将协同工作来呈现数组中的每个元素</li>
<li>稍后，我们使用<code>FlatList</code>组件来呈现列表</li>
</ul>
<p>接下来，像这样修改您的<code>App.js</code>文件:</p>
<pre>export default function App() {
  const [data, setData] = useState(null);
  const fetchData = async () =&gt; {
    const resp = await fetch("https://api.sampleapis.com/coffee/hot");
    const data = await resp.json();
    setData(data);
  };
  useEffect(() =&gt; {
    fetchData();
  }, []);
  return (
    &lt;View style={styles.container}&gt;
      {data ? &lt;DataDisplay data={data} /&gt; : &lt;SimpleLottie /&gt;}
      &lt;StatusBar style="auto" /&gt;
    &lt;/View&gt;
  );
}
</pre>
<p>在上面的代码块中，我们告诉 React 从 API 获取数据，并将响应存储到<code>data</code>钩子中。之后，React 检查响应是否已经加载(<code>data</code>有一个值)。</p>
<p>如果<code>true</code>，显示 API 数据。否则，React Native 会渲染<code>SimpleLottie</code>动画。</p>
<p>这将是输出:</p>
<p><img data-attachment-id="59149" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/rn-loader-api-data-true/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-api-data-true.gif" data-orig-size="334,520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN loader if API data is true" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-api-data-true-193x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-api-data-true.gif" decoding="async" class="size-full wp-image-59149 aligncenter jetpack-lazy-image" src="../Images/694e0998dc5d186e3126ac8128577e34.png" alt="RN Loader if API Data is True" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-api-data-true.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-api-data-true.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59149" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/rn-loader-api-data-true/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-api-data-true.gif" data-orig-size="334,520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN loader if API data is true" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-api-data-true-193x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-api-data-true.gif" decoding="async" loading="lazy" class="size-full wp-image-59149 aligncenter" src="../Images/694e0998dc5d186e3126ac8128577e34.png" alt="RN Loader if API Data is True" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-api-data-true.gif"/></noscript>
<h2>使用 react-native-动画</h2>
<p>react-native-animatable 库允许开发人员通过声明性 API 创建自己的过渡和动画。这适用于装载机和闪屏。</p>
<h3>装置</h3>
<p>运行以下终端命令来获取软件包:</p>
<pre>npm install react-native-animatable 
</pre>
<h3>简单用法</h3>
<p>创建一个名为<code>SimpleAnimatable.js</code>的文件。在这里，编写以下代码块:</p>
<pre>import * as Animatable from "react-native-animatable";
import React from "react";

export default function SimpleAnimatable() {
  return (
    &lt;Animatable.View&gt;
      &lt;Animatable.Text
        animation="bounce"
        iterationCount={"infinite"}
        direction="normal"
      &gt;
        Loading..
      &lt;/Animatable.Text&gt;
    &lt;/Animatable.View&gt;
  );
}
</pre>
<p>让我们一段一段地剖析这段代码。</p>
<ul>
<li><code>Animatable.View</code>组件允许我们的定制组件具有动画功能</li>
<li>我们的<code>Text</code>元素将具有类似反弹的行为。此外，我们还将<code>iterationCount</code>属性设置为<code>infinite</code>。这使得动画永远循环</li>
</ul>
<p>这将是输出:</p>
<p><img data-attachment-id="59000" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/animated-loader-bounce-rn/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/animated-loader-bounce-rn.gif" data-orig-size="334,504" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Animated loader bounce RN" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/animated-loader-bounce-rn-199x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/animated-loader-bounce-rn.gif" decoding="async" class="size-full wp-image-59000 aligncenter jetpack-lazy-image" src="../Images/4065883ad21044c9051e2ce412f7f9c8.png" alt="Animated Loader Bounce RN" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/animated-loader-bounce-rn.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/animated-loader-bounce-rn.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59000" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/animated-loader-bounce-rn/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/animated-loader-bounce-rn.gif" data-orig-size="334,504" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Animated loader bounce RN" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/animated-loader-bounce-rn-199x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/animated-loader-bounce-rn.gif" decoding="async" loading="lazy" class="size-full wp-image-59000 aligncenter" src="../Images/4065883ad21044c9051e2ce412f7f9c8.png" alt="Animated Loader Bounce RN" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/animated-loader-bounce-rn.gif"/></noscript>
<p>你甚至可以得到一个“类似 flash”的动画，就像这样:</p>
<pre>&lt;Animatable.Text
   animation="flash"
//....
</pre>
<p><img data-attachment-id="59001" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/flash-loader-rn/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/flash-loader-rn.gif" data-orig-size="334,500" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flashing loader in RN" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/flash-loader-rn-200x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/flash-loader-rn.gif" decoding="async" class="size-full wp-image-59001 aligncenter jetpack-lazy-image" src="../Images/29128ee01d2f78976368647d4d427ca6.png" alt="Flashing Loader in RN" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/flash-loader-rn.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/flash-loader-rn.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59001" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/flash-loader-rn/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/flash-loader-rn.gif" data-orig-size="334,500" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flashing loader in RN" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/flash-loader-rn-200x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/flash-loader-rn.gif" decoding="async" loading="lazy" class="size-full wp-image-59001 aligncenter" src="../Images/29128ee01d2f78976368647d4d427ca6.png" alt="Flashing Loader in RN" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/flash-loader-rn.gif"/></noscript>
<h3>使用 react-native-animatable 创建加载器组件</h3>
<p>这一步应该很简单。您可以简单地使用条件渲染:</p>
<pre>{data ? &lt;DataDisplay data={data} /&gt; : &lt;SimpleAnimatable /&gt;}
</pre>
<p><img data-attachment-id="59002" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/rn-loader-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-component.gif" data-orig-size="334,504" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN loader component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-component-199x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-component.gif" decoding="async" class="size-full wp-image-59002 aligncenter jetpack-lazy-image" src="../Images/bdb31b7697e9f6563ae5342e732a32ec.png" alt="RN Loader Component" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-component.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-component.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="59002" data-permalink="https://blog.logrocket.com/building-animated-loader-react-native/rn-loader-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-component.gif" data-orig-size="334,504" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN loader component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-component-199x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-component.gif" decoding="async" loading="lazy" class="size-full wp-image-59002 aligncenter" src="../Images/bdb31b7697e9f6563ae5342e732a32ec.png" alt="RN Loader Component" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/rn-loader-component.gif"/></noscript>
<h2>结论</h2>
<p>在本文中，我们介绍了在 React Native 中构建动画的两种常用策略。在我自己的项目中，我使用 Lottie，因为它坚如磐石，非常容易使用。</p>
<p>此外，<a href="https://github.com/lottie-react-native/lottie-react-native#usage"> Lottie 包括一个命令式 API </a>，它允许对所选动画进行更细粒度的控制。</p>
<p>非常感谢您的阅读！</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>