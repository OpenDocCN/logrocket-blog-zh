<html>
<head>
<title>Understanding recomposition in Jetpack Compose </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>了解Jetpack合成中的重组</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/jetpack-compose-recomposition/#0001-01-01">https://blog.logrocket.com/jetpack-compose-recomposition/#0001-01-01</a></blockquote><div><article class="article-post">
<p>对事件变化的响应对于创建最佳用户界面非常重要。在许多情况下，用户没有输入正确的输入，并且当用户改变偏好或位置时，UI必须改变。</p>
<p>为了使用户界面保持最新，UI框架Jetpack Compose提出了一种叫做重组的技术。当用户输入改变时，重组更新用户界面。</p>
<p>例如，当用户按下按钮时，文本将作为重组的结果显示在屏幕上:</p>
<pre class="language-kotlin hljs">@Composable
fun ButtonCounter(clicks: Int, onClick: () -&gt; Unit) {
    Button(onClick = onClick) {
        Text("Recomposition will occur when the button gets clicked and test is displayed on the screen")
    }
}
</pre>
<p>在本文中，您将了解更多关于Jetpack合成以及什么是重组的内容:</p>

<h2 id="jetpack-compose">什么是Jetpack Compose？</h2>
<p>每个开发者都想创造出脱颖而出的应用。然而，有这么多的应用程序争夺注意力，想出一些新的和令人兴奋的东西可能会很棘手。这就是像Android Jetpack Compose这样的框架的用武之地！</p>
<p>Android Jetpack是一个模块化库的集合，可以使您的应用程序更智能、更高效、更具吸引力。这些库建立在新的Android架构组件之上，因此它们旨在协同工作，以便更容易地构建高质量的应用程序。</p>
<p>Jetpack Compose包含几个API，有助于使您的应用程序更快、更智能、更吸引用户，同时减少您需要编写的代码量。</p>
<p>在创建用户界面时，Jetpack很有帮助。它是一个工具包，为您提供构建原生UI的功能。它给你:</p>
<ul>
<li>用户界面设计工具</li>
<li>科特林原料药</li>
<li>开发加速功能</li>
</ul>
<h2 id="benefits-jetpack-compose">使用Jetpack Compose的好处</h2>
<p>以下是使用Jetpack Compose的好处:</p>
<h3 id="reduce-boilerplate-code">用工具减少样板代码</h3>
<p>使用Android Jetpack Compose的第一个也是最重要的好处是它减少了样板代码。在应用开发的前几周，你写的很多代码都是重复的。</p>
<p>Jetpack Compose toolkit有几种方法可以帮助减少样板代码。它使用预先编写的代码，您可以通过配置将这些代码放入您的项目中。您还可以使用可视化工具来构建您的应用程序。一个例子是可视化视图编辑器工具。该工具允许您可视化地创建应用程序布局，而不是手动编写代码来这样做。如果你不太熟悉Android布局，这很有帮助。</p>
<h3 id="write-less-code">使用各种代码示例和API编写更少的代码</h3>
<p>Android Jetpack附带了许多代码示例和API，旨在更容易地编写更少的代码，同时仍能生成高质量的应用程序。这些API还使处理常见问题变得更加容易，比如管理状态和管理网络连接。它们还使得利用最新的Android创新来创建应用程序变得更加容易。</p>
<h3 id="adaptive-layout">适应性布局</h3>
<p>Jetpack Compose具有灵活和自适应的布局，使您可以在不同的设备上以不同的兼容性构建Android应用程序。</p>
<p>Jetpack Compose Wear为开发人员提供了用于构建智能手表应用程序的UI工具和功能，而Jetpack Compose Mobile则提供了用于构建移动应用程序的UI工具。Jetpack Compose Wear和Jetpack Compose Mobile<a href="https://developer.android.com/training/wearables/compose">相似，只有一些差异</a>。这意味着你将使用你用来构建移动应用的大部分知识和代码来构建Wear OS应用。</p>
<h3 id="use-jetpack-compose">您应该使用Jetpack Compose的其他原因:</h3>
<ul>
<li>它是广泛的，并迎合Android Wear操作系统，可折叠，平板电脑，chromeOS。当它适应不同的屏幕时，它是有反应的</li>
<li>Jetpack最大限度地减少了耦合，这使得修改代码变得困难，并且优化了内聚性，这使得互操作性变得更加容易</li>
<li>使用Jetpack Compose，您不必同时使用Kotlin和XML。你只需要关注科特林的文件</li>
</ul>
<h2 id="composables-recomposition-jetpack-compose">Jetpack Compose中的composables和recomposition是什么？</h2>
<p>在Jetpack Compose中，composable是一个UI函数。一组可组合体以及它们与每个可组合体的关联方式被称为组合。当组成结构和关系发生变化时，这个过程称为重组。</p>
<p>重组的一个例子是当用户通过UI输入错误的输入时，Jetpack Compose通过添加悲伤的动画或提示用户重置密码来响应。在重组之前，有了<code>invalidate()</code>方法。</p>
<p>重组很重要，因为它消除了每当输入改变时调用所有函数的需要。状态变量用于触发重组。重组在Jetpack Compose中是必不可少的，因为Kotlin文件的优先级高于XML文件。</p>
<p>许多Android开发人员将重组过程比作一个甜甜圈，以简化其工作方式；一个甜甜圈的中心有一个洞，这被视为范围。这个作用域用来显示重组是如何忽略作用域之外的函数的。</p>
<p>此外，重组不以任何特定的顺序或层次结构执行。下面是一个可组合的示例，当用户更改汽车型号时，它将进入重组阶段:</p>
<pre class="language-kotlin hljs">@Composable
fun CarSelector(
    model: String,
    names: List&lt;String&gt;,
    onNameClicked: (String) -&gt; Unit
) {
    Column {
        Text(model, style = MaterialTheme.typography.h5)
        Divider()

           }
}
</pre>
<p>可组合有以下几个阶段:</p>
<ol>
<li>可组合进入组合过程</li>
<li>可组合的内容通过重组过程进行修改</li>
<li>可组合物离开组合物</li>
</ol>
<p>与活动生命周期相比，这个生命周期没有那么复杂。一个composable可以被一个或多个方法多次调用。这将导致在一个组合中创建多个实例。将使用调用站点对可组合的实例进行排序和组织。如果从同一调用时间多次调用composable，Jetpack Compose将很难对调用进行排序。</p>
<p>Jetpack使用一种称为间隙缓冲区的数据结构，它可以有效地存储数据并提高处理重组的性能。在重新组合期间，在第一次组合期间没有被调用的可组合组件也可以被调用，而那些在第一次组合期间被调用的可组合组件只有在状态改变时才会改变。在重组过程中，可以按任意顺序调用Composables。</p>
<h2 id="recomposition-jetpack-compose">为什么重组在Jetpack撰写中很重要？</h2>
<p>改变整个活动消耗更多的资源和电池百分比。这就是为什么重新呈现只改变了状态的组件很重要。</p>
<p>Jetpack Compose中的重组侧重于更新已更改的元素。它能够做到这一点是因为它跟踪可组合状态。当存储的状态改变时，将触发重组。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p>有时，在重组过程中，许多组件必须更改。为了保持同步，Jetpack Compose并行运行重组以优化性能。</p>
<p>重组是为了在用户输入改变时保持UI最新。因此，如果用户在应用程序进行重组时更改了输入，compose将取消正在进行的重组，并开始一个新的重组，该重组将根据新的用户输入调整UI。</p>
<p>更新可组合组件时，不要使用setter。相反，使用新数据调用可组合的。此外，在使用composables时，执行繁重的任务(如阅读首选项)也很重要。</p>
<h2 id="conclusion">结论</h2>
<p>Jetpack Compose通过消除对XML文件的需求并引入更多的Kotlin文件，无疑改善了开发人员的世界。这意味着开发人员不必花费更多的时间来掌握XML和创建难以调试的意大利面条式代码。</p>
<p>此外，诸如<a href="https://android-developers.googleblog.com/2022/05/whats-new-in-jetpack-compose.html#:~:text=features%20and%20improvements-,Lazy%20Layouts,-Lazy%20layouts%20continue"> l </a> <a href="https://android-developers.googleblog.com/2022/05/whats-new-in-jetpack-compose.html#:~:text=features%20and%20improvements-,Lazy%20Layouts,-Lazy%20layouts%20continue"> azy布局</a>和重组等功能大大改善了Android应用程序。重组必须被理解为能够构建响应性应用程序。用户不想知道你的应用性能为什么滞后。因此，使用Jetpack Compose来提高应用程序的性能和感觉非常重要。</p><div class="code-block code-block-32">
<div class="blog-plug inline-plug kotlin-plug"><h2>LogRocket :即时重现你的安卓应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/kotlin-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/b5ae4bd0ecde7aa9d5288746416d5e18.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-plug_android-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-plug_android-1.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/b5ae4bd0ecde7aa9d5288746416d5e18.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-native-plug_android-1.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/kotlin-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款Android监控解决方案，可以帮助您即时重现问题，确定bug的优先级，并了解您的Android应用程序的性能。</p><p>LogRocket还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的Android应用程序— <a class="signup" href="hhttps://lp.logrocket.com/blg/kotlin-signup" target="_blank" rel="noopener noreferrer">免费试用LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>
 
 </div>    
</body>
</html>