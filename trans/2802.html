<html>
<head>
<title>Client-side routing in React with React Location - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React 中的客户端路由与 React Location - LogRocket 博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/client-side-routing-react-react-location/#0001-01-01">https://blog.logrocket.com/client-side-routing-react-react-location/#0001-01-01</a></blockquote><div><article class="article-post">
<p>路由是单页面应用程序(SPAs)的一个重要方面，但是因为 React 没有提供路由解决方案，React 开发人员必须集成第三方库来将路由实现到他们的应用程序中。</p>
<p>有几个可用的路由库，例如<a href="https://reactrouter.com/" target="_blank" rel="noopener"> React Router </a>，这是用于服务器端或客户端 React 应用程序的最流行的库之一。尽管 React Router 是用于路由的首选库，但它有一些限制，例如:</p>
<ul>
<li>基于搜索的路线匹配</li>
<li>路由数据缓存</li>
<li>路径加载器预取</li>
</ul>
<p>为了解决这些问题，<a href="https://react-query.tanstack.com/" target="_blank" rel="noopener"> React Query </a>的创建者 Tanner Linsley 开发了一个名为<a href="https://react-location.tanstack.com/" target="_blank" rel="noopener"> React Location </a>的新路由库，其中包括一些简洁的功能，使 React 开发者的生活更加轻松。</p>
<h2>什么是反应位置？</h2>
<p>React Location 是 React 应用程序的一个强大的企业级路由工具。React Location 是作为 React Router v6 beta 版本的包装器构建的，该版本修补了一些限制，但它已经发展成为一个成熟的路由解决方案。</p>
<p>React Location 提供了其他路由解决方案中没有的异步功能:</p>
<ul>
<li>基于承诺的数据加载器</li>
<li>异步路径加载器</li>
<li>基于阈值的待定路由元素</li>
<li>后期渲染异步加载程序 API</li>
</ul>
<p>React Location 的灵感来自全栈 React 框架，如 Next.js 和 Remix，它们带有内置路由，并提供了数据加载器和搜索参数等概念。</p>
<h2>使用 React Location 的好处</h2>
<p>React Location 引入了一些非常有用的独特功能，我将在下面详细介绍。</p>
<h3>数据加载器</h3>
<p>React Location 提供了一种在渲染每条路线之前执行异步函数的新方法。您可以使用这种方法通过 Axios、fetch 等工具获取数据。，以便在呈现组件之前数据可用。</p>
<p>在传统的应用程序中，您需要在加载路线或使用生命周期方法钩子(如<code>componentDidmount</code>或 useEffect)呈现组件后获取数据。数据加载器将延迟加载路由，直到异步函数执行。</p>
<h3>反应位置开发工具</h3>
<p>与 React Router 或任何其他 React 路由库不同，React Location 提供了<a href="https://react-location.tanstack.com/tools/devtools" target="_blank" rel="noopener"> Devtools </a>，使您能够可视化应用程序幕后发生的事情。此外，这对于调试您的应用程序非常有帮助。要启用 React Location Devtools，请安装插件并将组件添加到 React 组件树中。</p>
<h3>代码拆分</h3>
<p>用 React Location 实现代码拆分相对容易。首先，您需要传递一个 React 组件的动态导入作为元素，并为该组件定义一个加载器。</p>
<p>使用 react-router，您需要安装额外的插件，如<a href="https://babeljs.io/docs/en/babel-plugin-syntax-dynamic-import" target="_blank" rel="noopener">babel/plugin-syntax-dynamic-import</a>和<a href="https://www.npmjs.com/package/@loadable/component?activeTab=versions" target="_blank" rel="noopener"> loadable-components </a>或使用 React experimental <a href="https://reactjs.org/docs/concurrent-mode-suspense.html" target="_blank" rel="noopener">悬念</a>来实现代码拆分。</p>
<h3>搜索参数</h3>
<p>React Location 使我们能够在 URL 中存储状态，从而释放了 URL 搜索参数的威力。React Location 提供了匹配、使用和操作 URL 搜索参数的能力。因此，这些 URL 更易于共享，可以加入书签，并且更加一致。</p>
<p>搜索参数使用 JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="noopener"> JSON </a> API ( <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse" target="_blank" rel="noopener">JSON.parse</a></code>和<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" target="_blank" rel="noopener">JSON.stringify</a></code>)，这在处理 URL 查询参数中的复杂值和对象时很方便。React Location 还允许您使用类似于<a href="https://github.com/Sage/jsurl" target="_blank" rel="noopener"> JSURL </a>的插件或自定义方法(用于<code>stringifySearch</code>和解析搜索 API 方法)来扩展搜索参数功能。</p>
<p>即使您使用一个插件或默认的搜索参数实现，React Location 也将保证搜索参数表现为存储在应用程序内存中的不可变对象。</p>
<h3>嵌套路由</h3>
<p>定义嵌套路由非常清晰，易于维护。</p>
<h3>路线元素</h3>
<p>定义路线和数据加载器后，可以根据加载器或路线的状态呈现页面。React Location 允许您通过以下方式处理或呈现页面:</p>
<ol>
<li>当你的路线匹配时，这将呈现你需要呈现的默认组件</li>
<li>当你的路线或你的数据加载器有错误时，这允许你渲染一个组件</li>
<li><code>pendingElement</code>:这允许您在数据加载器运行时呈现一个组件，使其非常适合呈现加载页面或加载器。它还提供了更多的属性，允许您定义需要呈现挂起状态组件多长时间</li>
</ol>
<h2>探索 React 位置 API</h2>
<p>让我们深入 React 位置 API。如果您熟悉 React 路由器，您会发现 React Location 的大多数 API 看起来都非常相似。</p>
<p><code><a href="https://react-location.tanstack.com/docs/api#router" target="_blank" rel="noopener">Router</a></code>是根提供者组件，其行为类似于 React 路由器中的提供者组件。<code><a href="https://react-location.tanstack.com/docs/api#link" target="_blank" rel="noopener">Link</a></code>的行为类似于 React 路由器的<code>link</code> API，但内置了更多功能，如更新搜索参数和哈希的能力。它还支持“在新标签页中打开”和“在新窗口中打开”等事件，并有一个<code>active</code>道具，显示<code>link</code>处于活动状态。</p>
<p><code><a href="https://react-location.tanstack.com/docs/api#navigate" target="_blank" rel="noopener">Navigate</a></code>将在渲染时导航到路线，<code><a href="https://react-location.tanstack.com/docs/api#usenavigate" target="_blank" rel="noopener">useNavigate</a></code>的行为类似于 React Router 中的<code>useNavigate</code> API 方法，使您能够以编程方式导航您的应用程序。</p>
<p>接下来，<code><a href="https://react-location.tanstack.com/docs/api#userouter" target="_blank" rel="noopener">useRouter</a></code>是一个钩子，用于访问父组件的状态或<code>&lt;Route&gt;</code>。它返回位置的当前转换状态或位置的下一个转换状态。</p>
<p><code><a href="https://react-location.tanstack.com/docs/api#usematchroute" target="_blank" rel="noopener">useMatchRoute</a></code>返回当前或待定路线的相对和绝对路径。如果路径匹配，它将返回一个路径为<code>params</code>的对象。这有助于查找特定的深层路线匹配，以及导航发生时特定路线是下一个待定位置。<code><a href="https://react-location.tanstack.com/docs/api#usematch" target="_blank" rel="noopener">useMatch</a></code>返回已匹配的最近路线，用于获取路线参数、路线数据和下一个子匹配。</p>
<p><code><a href="https://react-location.tanstack.com/docs/api#usesearch" target="_blank" rel="noopener">useSearch</a></code>允许您访问应用程序当前路线的搜索参数和状态。首先，您需要通过使用<code>MakeGenerics</code> API 方法声明一个 JSON 对象来定义您需要收集的信息。然后，在 React 组件中，可以使用 JSON 的<code>useSearch</code>来收集细节。这个通用对象是不可变的，所以我们可以用它来检测搜索参数的变化。</p>
<p><code><a href="https://react-location.tanstack.com/docs/api#useresolvepath" target="_blank" rel="noopener">useResolvePath</a></code>提供了一个函数，我们可以用它来检查相对于调用它的路由的路径(返回名称)。使用这个钩子，您可以检索当前、先前、子或父路由名称的名称。</p>
<p>最后，对于有表单的页面，您可能需要<a href="https://react-location.tanstack.com/docs/api#useprompt" target="_blank" rel="noopener"> <code>usePrompt</code> </a>，因为它允许您以编程方式向用户提示一个对话框，就像用户在提交表单之前开始路由到另一个路由一样。</p>
<h2>React 定位的最佳工具和插件</h2>
<p>React Location 为您提供了使用多个插件的灵活性，因此您可以扩展其功能。以下是一些‌plugins，在使用 React Location 时可能会派上用场。</p>
<ul>
<li><a href="https://www.npmjs.com/package/react-location-simple-cache" target="_blank" rel="noopener"> React Location Simple Cache </a>为您提供了缓存路径的数据加载器值的功能，因此，如果您在相同的路径中移动，它将维护一个缓存并减少加载时间。这个插件还提供了处理缓存的特性，比如获取策略和手动缓存失效</li>
<li>React Location Devtools 是你可以用这个插件启用的最好的和最独特的特性之一，因为它帮助你可视化 React Location 的所有内部工作，并使调试应用程序变得容易</li>
<li><a href="https://www.npmjs.com/package/@tanstack/react-location-jsurl" target="_blank" rel="noopener"> React Location JSURL </a>在您需要扩展搜索参数特性时非常有用。它使用了<a href="https://github.com/Sage/jsurl" target="_blank" rel="noopener"> JSURL </a>，这是 JSON 和 URL 编码(或 JSON 和 base64 编码)的一种替代方案，使用它，您可以通过 URL 查询参数轻松传递复杂的值</li>
</ul>
<h2>使用 React Location 构建应用程序</h2>
<p>让我们通过构建一个 React 应用程序来看看如何使用 React Location。我们将使用<a href="https://restcountries.com/" target="_blank" rel="noopener"> REST 国家</a> REST API。首先，让我们通过以下命令使用 create-react-app 创建一个应用程序:</p>
<pre class="language-javascript hljs">npx create-react-app react-location-router --template typescript
</pre>
<p>我们还需要其他几个库，包括<a href="https://blog.logrocket.com/using-material-ui-with-react-hook-form/" target="_blank" rel="noopener"> Material UI </a>和<a href="https://blog.logrocket.com/understanding-axios-post-requests/" target="_blank" rel="noopener"> Axios </a>来构建组件获取数据:</p>
<p><code>yarn add axios @mui/material @mui/styled-engine-sc @emotion/react @emotion/styled</code></p>
<p>让我们为我们的应用程序创建几个组件:<code><a href="https://github.com/TRomesh/react-location-routing/tree/main/src/components/card" target="_blank" rel="noopener">card</a></code>、<code><a href="https://github.com/TRomesh/react-location-routing/tree/main/src/components/form" target="_blank" rel="noopener">select</a></code>和<code><a href="https://github.com/TRomesh/react-location-routing/tree/main/src/components/navigation" target="_blank" rel="noopener">navigation(HOC)</a></code>组件，以及<a href="https://github.com/TRomesh/react-location-routing/blob/main/src/pages/Home.tsx" target="_blank" rel="noopener">本国</a>、<a href="https://github.com/TRomesh/react-location-routing/blob/main/src/pages/Countries.tsx" target="_blank" rel="noopener">国家</a>、<a href="https://github.com/TRomesh/react-location-routing/blob/main/src/pages/Country.tsx" target="_blank" rel="noopener">国家</a>组件。您可以使用提供的链接找到它们的代码示例。现在我们已经有了几个组件，让我们安装 React Location 并配置路由:</p>
<pre class="language-javascript hljs">yarn add @tanstack/react-location
</pre>
<p>现在是时候定义<code>App.tsx</code>中的路线了。</p>
<pre class="language-javascript hljs">import { Outlet, ReactLocation, Router } from "@tanstack/react-location";
import Home from "./pages/Home";
import Error from "./components/error/Error";
import Countries from "./pages/Countries";
import Country from "./pages/Country";
import Loader from "./components/loader/Loader";
import Navigation from "./components/navigation/Navigation";
import { getCountries, getCountry } from "./services";

// Set up a ReactLocation instance
const location = new ReactLocation();

function App() {
  return (
    &lt;Router
      location={location}
      routes={[
        { path: "/", element: &lt;Home /&gt; },
        {
          path: "countries",
          element: &lt;Countries /&gt;,
          loader: async () =&gt; {
              let { data } = await getCountries();
              return {
                countries: data,
              };
           },
          pendingElement: async () =&gt; &lt;Loader /&gt;,
          pendingMs: 1000 * 2, // 2 seconds
          errorElement: &lt;Error /&gt;,
          children: [
            { path: "/", element: &lt;div&gt;Select Country&lt;/div&gt; },
            {
              path: ":code",
              element: &lt;Country /&gt;,
              loader: async ({ params: { code } }) =&gt; {
                let { data } = await getCountry(code);
                return {
                  country: data,
                };
              },
              errorElement: &lt;Error /&gt;,
            },
          ],
        },
      ]}
    &gt;
      &lt;Navigation&gt;
        &lt;Outlet /&gt; {/* Start rendering router matches */}
      &lt;/Navigation&gt;
    &lt;/Router&gt;
  );
}

export default App;
</pre>
<p>您可以看到当前匹配路径的待定匹配，以及通过数据加载器提供的数据。现在，让我们访问数据加载器:</p>
<pre class="language-javascript hljs">import { MakeGenerics } from "@tanstack/react-location";

export interface Country {
  name: {
    common: string;
    official: string;
  };
  borders: string[];
  population: number;
  cca2: string;
}

export type CountryGenerics = MakeGenerics&lt;{
  LoaderData: {
    countries: Country[];
    country: Country;
  };
}&gt;;
</pre>
<p>为了访问数据，我们将使用<code>MakeGenerics</code> API 并定义 JSON 对象来检索我们想要的数据。在本例中，我们将获取的数据是一个国家数组和一个国家详细信息对象。让我们使用<code>useMatch</code>来消费组件内部的数据。</p>
<pre class="language-javascript hljs">import { useMatch } from "@tanstack/react-location";

// hook should be called inside the functional component
const { data } = useMatch&lt;CountryGenerics&gt;();
</pre>
<p>我们需要分解结构并访问属性来获取数据:</p>
<pre class="language-javascript hljs"> let { countries, country } = data;
</pre>
<p>为了便于调试，安装 react-location-devtools 插件:</p>
<pre class="language-javascript hljs">yarn add @tanstack/react-location-devtools
</pre>
<p>接下来，在<code>App.tsx</code>中配置并导入 React Location Devtools。</p>
<pre class="language-javascript hljs">import { ReactLocationDevtools } from "@tanstack/react-location-devtools";
</pre>
<p>现在添加<code>ReactLocationDevtools</code>组件:</p>
<pre class="language-javascript hljs">      &lt;Navigation&gt;
        &lt;Outlet /&gt; {/* Start rendering router matches */}
        &lt;ReactLocationDevtools /&gt; {/* enable Devtools */}
      &lt;/Navigation&gt;
</pre>
<p>打开浏览器，在屏幕的左下方可以看到一个小小的 React Location 徽标。</p>
<p><img data-attachment-id="99741" data-permalink="https://blog.logrocket.com/client-side-routing-react-react-location/react-location-logo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo.png" data-orig-size="713,117" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Location logo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo-300x49.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo.png" decoding="async" class="aligncenter size-full wp-image-99741 jetpack-lazy-image" src="../Images/7efe34435819c7c6ccf88905b6ba3af4.png" alt="React Location Logo" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo.png 713w, https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo-300x49.png 300w" data-lazy-sizes="(max-width: 713px) 100vw, 713px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="99741" data-permalink="https://blog.logrocket.com/client-side-routing-react-react-location/react-location-logo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo.png" data-orig-size="713,117" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Location logo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo-300x49.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-99741" src="../Images/7efe34435819c7c6ccf88905b6ba3af4.png" alt="React Location Logo" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo.png 713w, https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo-300x49.png 300w" sizes="(max-width: 713px) 100vw, 713px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-logo.png"/></noscript>
<p>点按它以查看路由详细信息以及调试您的应用程序有多容易。</p>
<p><img data-attachment-id="99744" data-permalink="https://blog.logrocket.com/client-side-routing-react-react-location/react-locations-devtools/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools.png" data-orig-size="730,354" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Locations devtools" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools-300x145.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools.png" decoding="async" class="aligncenter size-full wp-image-99744 jetpack-lazy-image" src="../Images/73e29cda82c6c38622fd89187447faae.png" alt="React Locations Devtools" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools-300x145.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="99744" data-permalink="https://blog.logrocket.com/client-side-routing-react-react-location/react-locations-devtools/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools.png" data-orig-size="730,354" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Locations devtools" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools-300x145.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-99744" src="../Images/73e29cda82c6c38622fd89187447faae.png" alt="React Locations Devtools" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools-300x145.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/react-locations-devtools.png"/></noscript>
<p>接下来，通过一个简单的缓存插件添加一些数据缓存。您可以使用以下命令安装它。</p>
<pre class="language-javascript hljs">yarn add @tanstack/react-location-simple-cache
</pre>
<p>现在让我们通过导入简单缓存并启动一个缓存实例来配置它。</p>
<pre class="language-javascript hljs">import { ReactLocationSimpleCache } from "@tanstack/react-location-simple-cache";

// Set up a ReactLocation SimpleCache instance
const routeCache = new ReactLocationSimpleCache();
</pre>
<p>我们还将定义缓存到期/失效时间。</p>
<pre class="language-javascript hljs">{
          path: "countries",
          element: &lt;Countries /&gt;,
          loader: routeCache.createLoader(
            async () =&gt; {
              let { data } = await getCountries();
              return {
                countries: data,
              };
            },
            {
              maxAge: 1000 * 10, // 10 seconds
            }
          ),
  …..
}
</pre>
<p>让我们看看如何浏览<code>Link</code>组件和<code>useNavigation.</code>。</p>
<p>让我们在<code>Navigation(HOC)</code>中使用<code>Link</code>组件，它将包含一个带有几个链接的导航栏。</p>
<pre class="language-javascript hljs">import React from "react";
import AppBar from "@mui/material/AppBar";
import Grid from "@mui/material/Grid";
import Toolbar from "@mui/material/Toolbar";
import { Link } from "@tanstack/react-location";

const getActiveProps = () =&gt; {
  return {
    style: {
      fontWeight: "bold",
      color: "white",
      textDecoration: "none",
    },
  };
};

const Navigation = ({
  children,
}: {
  children: React.ReactNode;
}): JSX.Element =&gt; {
  return (
    &lt;Grid container spacing={4}&gt;
      &lt;Grid item xs={12}&gt;
        &lt;AppBar position="static"&gt;
          &lt;Toolbar&gt;
            &lt;Grid container spacing={1}&gt;
              &lt;Grid item xs={1}&gt;
                &lt;Link
                  to="/"
                  getActiveProps={getActiveProps}
                  activeOptions={{ exact: true }}
                &gt;
                  Home
                &lt;/Link&gt;
              &lt;/Grid&gt;
              &lt;Grid item xs={1}&gt;
                &lt;Link to="countries" getActiveProps={getActiveProps}&gt;
                  Countries
                &lt;/Link&gt;
              &lt;/Grid&gt;
            &lt;/Grid&gt;
          &lt;/Toolbar&gt;
        &lt;/AppBar&gt;
      &lt;/Grid&gt;
      &lt;Grid item xs={12} /&gt;
      &lt;Grid item xs={12}&gt;
        {children}
      &lt;/Grid&gt;
    &lt;/Grid&gt;
  );
};

export default Navigation;
</pre>
<p>如果仔细观察，您会发现我们已经用一些样式属性定义了<code>getActiveProps </code>,帮助我们识别当前的路线。</p>
<p><img data-attachment-id="99746" data-permalink="https://blog.logrocket.com/client-side-routing-react-react-location/home-countries/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries.png" data-orig-size="369,90" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Home countries" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries.png" decoding="async" class="aligncenter size-full wp-image-99746 jetpack-lazy-image" src="../Images/adba5e66f8e950c3d42954726a44ab51.png" alt="Home Countries" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries.png 369w, https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries-300x73.png 300w" data-lazy-sizes="(max-width: 369px) 100vw, 369px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="99746" data-permalink="https://blog.logrocket.com/client-side-routing-react-react-location/home-countries/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries.png" data-orig-size="369,90" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Home countries" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-99746" src="../Images/adba5e66f8e950c3d42954726a44ab51.png" alt="Home Countries" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries.png 369w, https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries-300x73.png 300w" sizes="(max-width: 369px) 100vw, 369px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/home-countries.png"/></noscript>
<p>你可以通过这个<a href="https://github.com/TRomesh/react-location-routing" target="_blank" rel="noopener"> GitHub repo </a>来浏览完整的演示项目源代码，或者使用部署的<a href="https://react-location-routing.netlify.app/" target="_blank" rel="noopener">链接</a>来玩。</p>
<h2>React 位置与其他 React 路由解决方案</h2>
<p>React Location 和 React Router 有许多相似之处，但是 React Location 提供了许多功能，可以提供更好的开发人员体验。下面是 React Location 与<a href="https://reactrouter.com/" target="_blank" rel="noopener"> React Router </a>和<a href="https://reach.tech/router/" target="_blank" rel="noopener"> Reach Router </a>的详细功能对比:</p>
<p><img data-attachment-id="99748" data-permalink="https://blog.logrocket.com/client-side-routing-react-react-location/react-location-comparison-chart/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart.png" data-orig-size="730,548" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Location comparison chart" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart-300x225.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart.png" decoding="async" class="aligncenter size-full wp-image-99748 jetpack-lazy-image" src="../Images/f0c943276c6591cede60cda08667bfba.png" alt="React Location Comparison Chart" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart-300x225.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="99748" data-permalink="https://blog.logrocket.com/client-side-routing-react-react-location/react-location-comparison-chart/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart.png" data-orig-size="730,548" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React Location comparison chart" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart-300x225.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-99748" src="../Images/f0c943276c6591cede60cda08667bfba.png" alt="React Location Comparison Chart" srcset="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart-300x225.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/03/react-location-comparison-chart.png"/></noscript>
<h2>结论</h2>
<p>React Location 是 React 应用程序的优秀路由解决方案。React Location 具有高级搜索参数、开发工具、代码分割、路由加载器和异步路由等功能，是 React Router 的一个有价值的替代产品。</p>
<p>您可以轻松地将 React Location 与外部缓存和存储集成，如<a href="https://react-query.tanstack.com/" target="_blank" rel="noopener"> React Query </a>、<a href="https://www.apollographql.com/docs/react/" target="_blank" rel="noopener"> Apollo </a>、<a href="https://swr.vercel.app/" target="_blank" rel="noopener"> SWR </a>和<a href="https://redux-toolkit.js.org/" target="_blank" rel="noopener"> RTKQuery </a>。React Location 唯一的缺点是它还不支持 SSR 路线匹配或加载和水合，但这些功能很快就会推出。</p>
<p>React Location 当然需要 React 社区更多的关注。React Location 还有一个切槽社区，你可以在<a href="https://stackoverflow.com/questions/tagged/react-location" target="_blank" rel="noopener"> StackOverflow </a>、<a href="https://discord.com/invite/WrRKjPJ" target="_blank" rel="noopener"> Discord </a>和<a href="https://github.com/tanstack/react-location/discussions" target="_blank" rel="noopener"> GitHub discussions </a>上找到。最后，我邀请大家试用 React Location，看看路由解决方案有多棒。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产 React 应用</h2><p>调试 React 应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪 Redux 状态、自动显示 JavaScript 错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的 web 和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket 不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试 React 应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>