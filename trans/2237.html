<html>
<head>
<title>Run React Native apps on an Android emulator for macOS - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 macOS 的 Android 模拟器上运行 React 本地应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/#0001-01-01">https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/#0001-01-01</a></blockquote><div><article class="article-post">
<p>如果你是 React 原生开发者，迟早你会需要在 Mac 上运行 Android 模拟器的能力。无需在物理设备上安装应用程序，就能在本地计算机上测试应用程序，这大大加快了开发周期。</p>
<p>然而，狂热地在谷歌上搜索“macOS android 模拟器”后，你可能会发现没有多少可用的。</p>
<p>你可能知道，Android Studio 附带了一个很好的管理工具来管理你的仿真设备。可惜<em>，</em>作为 React 原生开发者，你用的不是 Android Studio。</p>
<p>更糟糕的是，Android Studio 提供了让底层仿真器工作的所有“正确”部分，就像正确版本的 Java 一样。在没有正确配置这些东西的情况下，试图让模拟器工作是行不通的，并且当它不工作时，您会得到神秘的错误消息。</p>
<p>在没有 Android Studio 的 macOS 上配置 Android 模拟器并不容易或简单。甚至官方文档都告诉你安装 Android Studio 就完事了。</p>
<p>但是，Android Studio 是一个完全成熟的 IDE，会占用你电脑上的大量空间。此外，它有很多你作为 React 原生开发者永远不会使用的功能，而且安装 Android Studio 只是为了使用模拟器，这需要很大的努力。</p>
<p>不要误解我的意思，这比我们在本文中尝试手动配置仿真器更简单直接。</p>
<p>但是，您应该在不单独安装 Android Studio 的情况下让 Android 模拟器工作，在没有 Android Studio 的过度破坏的情况下为您提供所需的确切功能。</p>
<p>如果您看到了这篇文章，那么您可能已经尝试了一段时间来使用它。</p>
<p>因此，让我们讨论一下在没有 Android Studio 的情况下运行模拟器时会遇到的一些问题，我们将如何克服这些问题，以及如何在 Android 模拟器上创建 React 应用程序。</p>
<h2>在没有 Android Studio 的情况下运行模拟器时会出现预期问题</h2>
<h3>Java 版本管理</h3>
<p>Android SDK 管理器依赖于 Java 8。这可能看起来很老，但它实际上是 Java 的长期支持(LTS)版本，并且是 Java 的 <a href="https://www.oracle.com/java/technologies/java-se-support-roadmap.html"> un </a> <a href="https://www.oracle.com/java/technologies/java-se-support-roadmap.html">直到 2030 </a>的<a href="https://www.oracle.com/java/technologies/java-se-support-roadmap.html">支持版本。</a></p>
<p>当然，你的电脑上可能有其他版本的 Java。</p>
<p>如果你在电脑上安装了多个版本的 Java，破坏了你电脑上已经安装的依赖于某个版本的 Java 的应用程序，那么你很快就会失败。</p>
<p>为了减轻这种情况，我们将安装一个 Java 版本管理器，让我们在 Java 版本之间切换。</p>
<h3>没有 GUI 可访问的安装程序</h3>
<p>我们将面临的另一个问题是缺乏一个 GUI 可访问的工具来帮助我们安装 Android 模拟器和相关的位。这意味着我们将在 Mac 终端上完成大部分安装步骤。</p>
<h3>文件夹结构</h3>
<p>最后，模拟器在启动之前依赖于特定的文件夹设置，如果文件夹没有以特定的方式设置，它就不会启动。</p>
<p>幸运的是，我已经做了研究，所以你不必做了，我已经设法把它设置好了，我们将在这篇文章中回顾如何把它分类。</p>
<h2>设置 Java 版本管理器</h2>
<p>首先安装<code>brew</code>。在没有它的情况下，在 Mac 上安装应用程序在技术上是可行的，但它让这个过程变得如此简单，很难理解你为什么不使用它。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>你可以<a href="https://brew.sh/">在这里</a>得到 t  <a href="https://brew.sh/">他包经理</a> <a href="https://brew.sh/">或者你可以在你的终端上运行以下命令在你的计算机上设置它:</a></p>
<pre class="language-javascript hljs">/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
</pre>
<p>安装完成后，就该安装<code>jenv</code>了。<code>jenv</code>让我们维护已经安装在 Mac 上的 Java 版本。为此，运行<code>brew install jenv</code>。</p>
<p>在命令完成后，我们必须告诉我们的系统去哪里找，这样它就可以使用<code>jenv</code>，所以我们需要将它添加到我们的路径中。为此，我们必须在终端中运行以下命令:</p>
<pre class="language-bash hljs">$ echo 'export PATH="$HOME/.jenv/bin:$PATH"' &gt;&gt; ~/.zshrc
$ echo 'eval "$(jenv init -)"' &gt;&gt; ~/.zshrc
</pre>
<p>这将把<code>jenv</code>可执行文件添加到我们的路径中，并在我们启动终端时运行初始化脚本。我们可以重新打开终端窗口，或者在终端运行<code>source ~/.zshrc</code>来更新会话的<code>PATH</code>变量。</p>
<p>现在，该跑<code>jenv</code>了。在终端输入<code>jenv doctor</code>并观察输出。</p>
<p><img data-attachment-id="71049" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/running-jenv-doctor/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor.png" data-orig-size="730,58" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running jenv doctor" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor-300x24.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor.png" decoding="async" class="aligncenter size-full wp-image-71049 jetpack-lazy-image" src="../Images/f0fcab0a907ab2ebf8cdd44573133722.png" alt="Running jenv doctor And Receiving Error Messages In Red" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor-300x24.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="71049" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/running-jenv-doctor/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor.png" data-orig-size="730,58" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running jenv doctor" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor-300x24.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-71049" src="../Images/f0fcab0a907ab2ebf8cdd44573133722.png" alt="Running jenv doctor And Receiving Error Messages In Red" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor-300x24.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/running-jenv-doctor.png"/></noscript>
<p>正如我们所看到的，它还没有工作，但这是意料之中的。我们还没有设置我们的 Java 安装，所以让我们现在就开始吧。</p>
<h3>设置 Java 安装</h3>
<p>我们希望安装 JDK8，因为这是与我们的 Android SDK 管理器一起工作的版本。在终端中键入以下内容:</p>
<pre class="language-javascript hljs">brew install AdoptOpenJDK/openjdk/adoptopenjdk8
</pre>
<p>安装完成后，我们想看看我们的 Mac 可以访问哪些 JDK 环境。在命令行中键入以下内容以查看:</p>
<pre class="language-javascript hljs">/usr/libexec/java_home -V
</pre>
<p>输出应该如下所示:</p>
<p><img data-attachment-id="71053" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/accessing-java-versions-mac/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac.png" data-orig-size="730,72" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Accessing Java versions Mac" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac-300x30.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac.png" decoding="async" class="aligncenter size-full wp-image-71053 jetpack-lazy-image" src="../Images/83a91bc74c46a0b60f61ab91a452f6a9.png" alt="Accessing Previously Downloaded Java Versions On Current Mac Computer" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac-300x30.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="71053" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/accessing-java-versions-mac/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac.png" data-orig-size="730,72" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Accessing Java versions Mac" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac-300x30.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-71053" src="../Images/83a91bc74c46a0b60f61ab91a452f6a9.png" alt="Accessing Previously Downloaded Java Versions On Current Mac Computer" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac-300x30.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Accessing-Java-versions-Mac.png"/></noscript>
<p>这个列表显示了我们之前在 Mac 上安装的 Java 版本(如果适用的话)，以及我们刚刚安装的新的 OpenJDK8。现在，我们必须将每个 Java JDK 添加到<code>jenv</code>中，这样它就可以为我们管理合适的 Java 版本。</p>
<p>我们可以通过键入<code>jenv add ~path to JDK~</code>并使用我们从上面的命令中获取的路径来实现。在这篇文章中，它看起来像下面这样，但是你的会有所不同:</p>
<pre class="language-javascript hljs">jenv add /Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home
jenv add /Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home
</pre>
<p>之后，我们希望将 Java 8 设置为系统范围的 Java 版本，这样我们就可以继续在我们的机器上配置 Android 模拟器。在撰写本文时，这意味着运行以下命令:</p>
<pre class="language-javascript hljs">jenv global openjdk64-1.8.0.292
</pre>
<p>注意末尾的数字可能会改变，因为有更新的 LTS 版本的 Java 8 可用。</p>
<h2>配置 Android SDK</h2>
<p>随着 Java 环境的建立，是时候配置 Android SDK 了。关闭并重新打开终端窗口，以确保我们的环境变量已经设置好。然后，运行以下命令来验证我们环境的健全性:</p>
<pre class="language-javascript hljs">jenv doctor
</pre>
<p>这将产生以下输出:</p>
<p><img data-attachment-id="71057" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/running-jenv-doctor-validate-environment/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment.png" data-orig-size="730,111" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running jenv doctor validate environment" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment-300x46.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment.png" decoding="async" class="aligncenter size-full wp-image-71057 jetpack-lazy-image" src="../Images/39b1c5577e64676d5c6d457774467c70.png" alt="Running jenv doctor To Validate The Sanity Of The Environment" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment-300x46.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="71057" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/running-jenv-doctor-validate-environment/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment.png" data-orig-size="730,111" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running jenv doctor validate environment" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment-300x46.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-71057" src="../Images/39b1c5577e64676d5c6d457774467c70.png" alt="Running jenv doctor To Validate The Sanity Of The Environment" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment-300x46.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-jenv-doctor-validate-environment.png"/></noscript>
<p>我们还必须通过键入<code>java -version</code>来检查我们的活动 Java 版本，这将给出以下输出:</p>
<p><img data-attachment-id="71059" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/running-java-version/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version.png" data-orig-size="730,87" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running java -version" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version-300x36.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version.png" decoding="async" class="aligncenter size-full wp-image-71059 jetpack-lazy-image" src="../Images/1e1ef9764c9b0f9b83ffa77a8c683790.png" alt="Running java -version To Check The" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version-300x36.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="71059" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/running-java-version/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version.png" data-orig-size="730,87" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running java -version" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version-300x36.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-71059" src="../Images/1e1ef9764c9b0f9b83ffa77a8c683790.png" alt="Running java -version To Check The" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version-300x36.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Running-java-version.png"/></noscript>
<h2>安装 Android SDK</h2>
<p>现在我们有了正确的 Java 版本，是时候安装 Android SDK 了。</p>
<p>这就是很多过时的指南告诉你安装<code>android-sdk</code> <strong> <em> *brew 包的地方。不要这样做，因为* </em> </strong>它在上游已被否决，可能随时停止工作。</p>
<p>相反，我们希望安装受支持的最新软件包<code>android-commandlinetools</code>。我们可以通过在终端中键入以下内容并按 enter 键来实现这一点:</p>
<pre class="language-javascript hljs">brew install --cask android-commandlinetools
</pre>
<p>这将把<code>sdkmanager</code>命令添加到我们的<code>PATH</code>中，我们可以通过键入<code>sdkmanager emulator</code>并按回车键来安装核心仿真器。</p>
<p>你会收到满满一页法律术语，所以一旦你和你的律师看完这些(开玩笑)，点击<code>y</code>接受相应的许可。</p>
<p><img data-attachment-id="71062" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/sdk-legalese/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese.png" data-orig-size="730,509" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SDK legalese" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese-300x209.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese.png" decoding="async" class="aligncenter size-full wp-image-71062 jetpack-lazy-image" src="../Images/94a5c6e2550d39cb47cf32bfd4e18e7c.png" alt="Android SDK Legalese To Accept Before Proceeding" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese-300x209.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="71062" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/sdk-legalese/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese.png" data-orig-size="730,509" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SDK legalese" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese-300x209.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-71062" src="../Images/94a5c6e2550d39cb47cf32bfd4e18e7c.png" alt="Android SDK Legalese To Accept Before Proceeding" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese-300x209.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/SDK-legalese.png"/></noscript>
<p>现在我们需要实际的模拟器图像本身。</p>
<h3>选择模拟器图像</h3>
<p>同样，我们会得到一整页的许可协议；点击<code>y</code>继续。这取决于你的 Mac 的架构来决定哪个模拟器映像是最好的，也就是说，在<code>x86_64</code>映像和<code>arm64-v8a</code>映像之间进行选择。</p>
<p>对于 M1 苹果电脑，请选择以下选项:</p>
<pre class="language-javascript hljs">sdkmanager "system-images;android-30;google_apis_playstore;arm64-v8a" "platform-tools" "platforms;android-30"
</pre>
<p>对于英特尔 MAC 电脑，请选择以下选项:</p>
<pre class="language-javascript hljs">sdkmanager "system-images;android-30;google_apis_playstore;x86_64" "platform-tools" "platforms;android-30"
</pre>
<p>最后，我们可以通过在打开的终端窗口中键入以下命令，基于我们刚刚下载的映像创建一个 Android 模拟器。同样，在这种情况下，使用 M1 Mac，我们使用<code>arm64-v8a</code>图像，但在英特尔 Mac 上，使用<code>x86_64</code>图像会有更好的结果。</p>
<h2>创建 Android 模拟器</h2>
<p>我们需要确定模拟器安装在哪里。我们可以通过在控制台中键入以下命令来做到这一点:</p>
<pre class="language-javascript hljs">sdkmanager emulator --verbose
</pre>
<p>这将在终端中产生以下输出</p>
<pre class="language-javascript hljs">Info: Parsing legacy package: /usr/local/share/android-commandlinetools/cmdline-tools/homebrew
Info: Parsing /usr/local/share/android-commandlinetools/emulator/package.xml
Info: Parsing /usr/local/share/android-commandlinetools/patcher/v4/package.xml
Info: Parsing /usr/local/share/android-commandlinetools/platform-tools/package.xml
Info: Parsing /usr/local/share/android-commandlinetools/platforms/android-30/package.xml
Info: Parsing /usr/local/share/android-commandlinetools/system-images/android-30/google_apis_playstore/x86_64/package.xml
Info: Parsing /usr/local/share/android-commandlinetools/tools/package.xml
[=======================================] 100% Computing updates...             
</pre>
<p>从第二行，我们可以看到模拟器安装在<code>/usr/local/share/android-commandlinetools/emulator/</code>。记住这条路径，因为我们将在本指南的后面使用它。</p>
<p>现在，我们可以通过在终端中键入以下命令来创建我们的模拟器了:</p>
<pre class="language-javascript hljs"># Set up the 'android_emulator', with device type 'pixel' 
avdmanager create avd -n android_emulator -d pixel -k "system-images;android-30;google_apis_playstore;arm64-v8a" #Intel macs should get the x86_64 image instead!

# Enable the hardware keyboard for the emulators, so typing into the emulator via your keyboard works as expected
for f in ~/.android/avd/*.avd/config.ini; do echo 'hw.keyboard=yes' &gt;&gt; "$f"; done

# Add the 'emulator' binary to the system path, so we can call it from anywhere
# This is the path that we observed in the step prior; it may be different for your system!
echo 'export PATH=$PATH:/usr/local/share/android-commandlinetools/emulator/' &gt;&gt; ~/.zshrc

# Reload the environment variables
source ~/.zshrc
</pre>
<p>你的<code>/opt/homebrew/share/android-commandlinetools/</code> <a href="https://stackoverflow.com/questions/39645178/panic-broken-avd-system-path-check-your-android-sdk-root-value">包含</a> <code><a href="https://stackoverflow.com/questions/39645178/panic-broken-avd-system-path-check-your-android-sdk-root-value">emulator</a></code> <a href="https://stackoverflow.com/questions/39645178/panic-broken-avd-system-path-check-your-android-sdk-root-value">、</a> <code><a href="https://stackoverflow.com/questions/39645178/panic-broken-avd-system-path-check-your-android-sdk-root-value">platforms</a></code> <a href="https://stackoverflow.com/questions/39645178/panic-broken-avd-system-path-check-your-android-sdk-root-value">、</a> <code><a href="https://stackoverflow.com/questions/39645178/panic-broken-avd-system-path-check-your-android-sdk-root-value">platform-tools</a></code> <a href="https://stackoverflow.com/questions/39645178/panic-broken-avd-system-path-check-your-android-sdk-root-value">、</a> <code><a href="https://stackoverflow.com/questions/39645178/panic-broken-avd-system-path-check-your-android-sdk-root-value">system-images</a></code> <a href="https://stackoverflow.com/questions/39645178/panic-broken-avd-system-path-check-your-android-sdk-root-value">文件夹</a>非常重要。如果没有它们，<code>emulator</code>二进制文件将无法启动，并显示 Android SDK 配置已损坏。</p>
<p>完成所有设置后，我们应该可以运行以下命令，Android 模拟器应该会启动:</p>
<pre class="language-javascript hljs">emulator @android_emulator
</pre>
<p><img data-attachment-id="71067" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/android-emulator-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1.png" data-orig-size="443,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Android emulator" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1-182x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1.png" decoding="async" class="aligncenter size-full wp-image-71067 jetpack-lazy-image" src="../Images/5f95879e9104bda79e5748bbb8e90159.png" alt="Final Android Emulator Homepage" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1.png 443w, https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1-182x300.png 182w" data-lazy-sizes="(max-width: 443px) 100vw, 443px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="71067" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/android-emulator-3/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1.png" data-orig-size="443,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Android emulator" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1-182x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-71067" src="../Images/5f95879e9104bda79e5748bbb8e90159.png" alt="Final Android Emulator Homepage" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1.png 443w, https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1-182x300.png 182w" sizes="(max-width: 443px) 100vw, 443px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Android-emulator-1.png"/></noscript>
<p>现在是时候将这个命令添加到 shell 脚本中，并将其放在您的桌面上或其他可以访问的地方。这样，每当你需要一个模拟器时，只需打开脚本就可以了。</p>
<h2>安装 React 本机 CLI 并设置断点</h2>
<p>根据文档，您实际上不必安装 React Native CLI。相反，如果安装了 Node，您可以使用系统上的<code>npx</code>，并运行以下命令:</p>
<pre class="language-javascript hljs">npx react-native init AwesomeProject
</pre>
<p>这将在您的计算机上配置 React Native 的正确版本，并让您开始使用一个示例项目。从这里，您可以在终端启动模拟器(如果您遵循了本指南，这意味着在您的终端中键入<code>emulator @android_emulator</code>)并在那里部署我们的示例应用程序。</p>
<p>随着模拟器的运行，我们<a href="https://blog.logrocket.com/how-to-build-ios-apps-using-react-native/">可以在我们的设备</a>上运行 React Native 应用程序。这也是在我们的代码中设置断点的好时机，因此我们可以看到变量值被设置为什么，并参与其他故障排除行为。</p>
<p>这可能会因您使用的 IDE 而异，但通常情况下，您应该能够单击行号的左侧，并为您的应用程序设置适当的断点，如下所示:</p>
<p><img data-attachment-id="71072" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/setting-breakpoints-code/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Setting-breakpoints-code.gif" data-orig-size="684,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Setting breakpoints code" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Setting-breakpoints-code-281x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Setting-breakpoints-code.gif" decoding="async" class="aligncenter size-full wp-image-71072 jetpack-lazy-image" src="../Images/0b68317199401977db9b41b01d5c4e13.png" alt="Setting Breakpoints In The Code On The Left-Hand Side, Shown With Red Dot" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Setting-breakpoints-code.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Setting-breakpoints-code.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="71072" data-permalink="https://blog.logrocket.com/run-react-native-apps-android-emulator-macos/setting-breakpoints-code/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Setting-breakpoints-code.gif" data-orig-size="684,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Setting breakpoints code" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Setting-breakpoints-code-281x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Setting-breakpoints-code.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-71072" src="../Images/0b68317199401977db9b41b01d5c4e13.png" alt="Setting Breakpoints In The Code On The Left-Hand Side, Shown With Red Dot" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Setting-breakpoints-code.gif"/></noscript>
<p>有了仿真器设置和可通过断点调试的<a href="https://blog.logrocket.com/debugging-your-app-with-react-native-debugger/"> React 原生应用，您就可以开始了！</a></p>
<h2>结论</h2>
<p>在本文中，我们配置了 Android 模拟器所需的底层组件，使其像 JDK 和 Android SDK 一样工作。我们还使用了<code>jvm</code>来配置我们的 Java 环境，因此我们可以在 Android SDK 中使用正确的 Java 版本，并且我们创建了一个快捷方式来启动我们的仿真器。</p>
<p>这样做，我们避免了在 Mac 上安装 Android Studio。这是一件好事，因为作为一名 React 原生开发者，你永远不会真正使用 Android Studio，所以你可以利用这些磁盘空间来做你真正需要的事情。</p>
<p>剩下的就是享受你新创建的 Android 模拟器了！📱👨‍💻</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>