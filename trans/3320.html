<html>
<head>
<title>How to dynamically assign properties to an object in TypeScript - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在TypeScript - LogRocket博客中为对象动态分配属性</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/#0001-01-01">https://blog.logrocket.com/dynamically-assign-properties-object-typescript/#0001-01-01</a></blockquote><div><article class="article-post">
<p>考虑下面的类型脚本代码示例:</p>
<pre class="language-typescript hljs">const organization = {}
organization.name = "Logrocket"                                                                                 
</pre>
<p>这段看似无害的代码在将<code>name</code>动态分配给<code>organization</code>对象时抛出了一个TypeScript错误。</p>
<figure id="attachment_130119" aria-describedby="caption-attachment-130119" class="wp-caption aligncenter"><img data-attachment-id="130119" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/error-thrown-dynamically-assigning-property-object/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object.png" data-orig-size="730,520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="error-thrown-dynamically-assigning-property-object" data-image-description="" data-image-caption="&lt;p&gt;An error is thrown when dynamically assigning a property to an object&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object-300x214.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object.png" decoding="async" class="size-full wp-image-130119 jetpack-lazy-image" src="../Images/a54b3c9927bb609dca4e460430497113.png" alt="An error is thrown when dynamically assigning a property to an object" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object-300x214.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="130119" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/error-thrown-dynamically-assigning-property-object/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object.png" data-orig-size="730,520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="error-thrown-dynamically-assigning-property-object" data-image-description="" data-image-caption="&lt;p&gt;An error is thrown when dynamically assigning a property to an object&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object-300x214.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object.png" decoding="async" loading="lazy" class="size-full wp-image-130119" src="../Images/a54b3c9927bb609dca4e460430497113.png" alt="An error is thrown when dynamically assigning a property to an object" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object-300x214.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/error-thrown-dynamically-assigning-property-object.png"/></noscript><figcaption id="caption-attachment-130119" class="wp-caption-text">An error is thrown when dynamically assigning a property to an object</figcaption></figure>
<p>在<a href="https://www.typescriptlang.org/play#code/MYewdgzgLgBCBOBzAhmAlgL2VN4YF4YBvAXwCgyEV0sdwA6MZAWwFMCYAiAGREXhDAA1qyicKMSVOkzZc+QsVLlK1WukUgA" target="_blank" rel="noopener">的TypeScript Playground </a>中看到这个例子。</p>
<p>困惑的来源是:看起来如此简单的东西怎么会成为打字稿中的一个问题呢？如果你是打字稿初学者，这种困惑也许是合理的。</p>
<p>TL；最重要的是，如果不能在声明时定义变量类型，可以使用<code>Record</code>实用程序类型或对象索引签名来解决这个问题。但是在这篇文章中，我们将仔细研究问题本身，并找到一个在大多数情况下都可行的解决方案。</p>
<p><em>向前跳转:</em></p>

<h2 id="understanding-problem-dynamically-assigning-properties-objects">理解为对象动态分配属性的问题</h2>
<p>一般来说，TypeScript在声明变量时确定变量的类型，这种确定的类型不会改变，也就是说，它在整个应用程序中保持不变。</p>
<p>这个规则也有例外，比如当考虑类型收缩或者使用<code>any</code>类型时，但是这是一个需要记住的一般规则。</p>
<p>在前面的例子中，<code>organization</code>对象声明如下:</p>
<pre class="language-typescript hljs">const organization = {}
</pre>
<p>没有给<code>organization</code>变量赋值显式类型，因此TypeScript根据声明推断出<code>organization</code>的类型为<code>{}</code>，即文本空对象。</p>
<p>例如，如果您添加一个类型别名，您可以浏览<code>organization</code>的类型:</p>
<pre class="language-typescript hljs">type Org = typeof organization
</pre>
<figure id="attachment_130121" aria-describedby="caption-attachment-130121" class="wp-caption aligncenter"><img data-attachment-id="130121" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/exploring-literal-object-type/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type.png" data-orig-size="730,527" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="exploring-literal-object-type" data-image-description="" data-image-caption="&lt;p&gt;Exploring the literal object type&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type.png" decoding="async" class="size-full wp-image-130121 jetpack-lazy-image" src="../Images/fc26dddd4d8c31f68149e31db2b66147.png" alt="Exploring the literal object type" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type-300x217.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="130121" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/exploring-literal-object-type/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type.png" data-orig-size="730,527" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="exploring-literal-object-type" data-image-description="" data-image-caption="&lt;p&gt;Exploring the literal object type&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type.png" decoding="async" loading="lazy" class="size-full wp-image-130121" src="../Images/fc26dddd4d8c31f68149e31db2b66147.png" alt="Exploring the literal object type" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type-300x217.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/exploring-literal-object-type.png"/></noscript><figcaption id="caption-attachment-130121" class="wp-caption-text">Exploring the literal object type</figcaption></figure>
<p>参见<a href="https://www.typescriptlang.org/play?#code/MYewdgzgLgBCBOBzAhmAlgL2VN4YF4YBvAXwCgyoBPABwFMYB5JAma+kAMziVU21xgKCFOiw5wAOjDIAtg0IAiADIhE8EMADWdKIooxDR4ydNnzFy1es3bd4xSA" target="_blank" rel="noopener">中的打字稿游乐场</a>。</p>
<p>当您试图在这个空的对象文字上引用<code>name</code>属性时:</p>
<pre class="language-typescript hljs">organization.name = ...
</pre>
<p>TypeScript大叫。</p>
<blockquote><p>类型“<code>{}</code>”上不存在属性“name”</p></blockquote>
<p>当你理解了这个问题，这个错误看起来是合适的。</p>
<p>让我们解决这个问题。</p>
<h2 id="resolving-problem">解决问题</h2>
<p>这里有许多方法可以解决TypeScript错误。让我们考虑这些:</p>
<h3 id="solution-1-explicitly-type-object-declaration-time">解决方案1:在声明时显式键入对象</h3>
<p>这是最容易理解的解决方案。在声明对象时，继续输入它。此外，给它分配所有相关的值。</p>
<pre class="language-typescript hljs">type Org = {
    name: string
}

const organization: Org = {
    name: "Logrocket"
}
</pre>
<p>请看<a href="https://www.typescriptlang.org/play?#code/FAFwngDgpgBA8gJwOYwLwwN7BjmA7AQwFsoAuGAZxAQEs8lgBfYYAYwHs8qZ3kC8aALwIgancohTosufMTIwARABl2SBO1YBrKCEVMgA" target="_blank" rel="noopener">中的打字稿操场</a>。</p>
<p>这消除了任何意外。在创建对象时，您清楚地说明了这个对象的类型，并正确地声明了所有相关的属性。</p>
<p>然而，如果对象属性必须动态添加<em/>，这并不总是可行的，这就是为什么我们都在这里。</p>
<h3 id="solution-2-use-object-index-signature">解决方案2:使用对象索引签名</h3>
<p>有时候，对象的属性确实需要在声明后添加。在这种情况下，您可以使用对象索引签名，如下所示:</p>
<pre class="language-typescript hljs">type Org = {[key: string] : string}
const organization: Org = {}
organization.name = "Logrocket"
</pre>
<p>请看<a href="https://www.typescriptlang.org/play#code/FAFwngDgpgBA8gJwOYwLwwN4G0DWUwBcMAziAgJYB2SAujEaRdQL7DADGA9paTJ8gENK5AF4CQ5bkUQp0GVsH5Iho8ZMoA6SgIC2sdACIAMpyQJO7PCAPAgA" target="_blank" rel="noopener">中的打字稿操场</a>。</p>
<p>在声明<code>organization</code>变量时，您可以将它显式地输入到下面的<code>{[key: string] : string}</code>中。</p>
<p>为了进一步解释语法，您可能习惯于具有固定属性类型的对象类型:</p>
<pre class="language-typescript hljs">type obj = {
  name: string
}
</pre>
<p>但是，你也可以用<code>name</code>来代替“变量类型”。</p>
<p>例如，如果您想在<code>obj</code>上定义任何字符串属性:</p>
<pre class="language-typescript hljs">type obj = {
 [key: string]: string
}
</pre>
<p>请注意，语法类似于在标准JavaScript中使用variable object属性的方式:</p>
<pre class="language-typescript hljs">const variable = "name" 
const obj = {
   [variable]: "Freecodecamp"
}
</pre>
<p>等效的TypeScript称为对象索引签名。此外，请注意，您可以使用其他原语键入<code>key</code>:</p>
<pre class="language-typescript hljs">// number 
type Org = {[key: number] : string}

// string 
type Org = {[key: string] : string}

//boolean
type Org = {[key: boolean] : string}
</pre>
<h3 id="solution-3-use-record-utility-type">解决方案3:使用<code>Record</code>实用程序类型</h3>
<p><a href="https://www.typescriptlang.org/docs/handbook/utility-types.html#recordkeys-type" target="_blank" rel="noopener"> <code>Record</code>实用程序类型</a>允许你压缩一个属性为<code>Keys</code>属性值为<code>Type</code>的对象类型。它有如下签名:<code>Record&lt;Keys, Type&gt;</code>。</p>
<p>在我们的例子中，<code>Keys</code>代表<code>string</code>和<code>Type</code>，<code>string</code>也是如此。这里的解决方案非常简洁，如下所示:</p>
<pre class="language-typescript hljs">type Org = Record&lt;string, string&gt;

const organization: Org = {}

organization.name = "Logrocket"
</pre>
<p>除了使用类型别名，您还可以内联类型:</p>
<pre class="language-typescript hljs">const organization: Record&lt;string, string&gt; = {}
</pre>
<figure id="attachment_130123" aria-describedby="caption-attachment-130123" class="wp-caption aligncenter"><img data-attachment-id="130123" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/using-record-utility-type/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type.png" data-orig-size="730,527" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="using-record-utility-type" data-image-description="" data-image-caption="&lt;p&gt;Using the &lt;code&gt;Record&lt;/code&gt; utility type&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type.png" decoding="async" class="size-full wp-image-130123 jetpack-lazy-image" src="../Images/efbbe72309994182baba1f83bd48366f.png" alt="Using the Record utility type" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type-300x217.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="130123" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/using-record-utility-type/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type.png" data-orig-size="730,527" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="using-record-utility-type" data-image-description="" data-image-caption="&lt;p&gt;Using the &lt;code&gt;Record&lt;/code&gt; utility type&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type-300x217.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type.png" decoding="async" loading="lazy" class="size-full wp-image-130123" src="../Images/efbbe72309994182baba1f83bd48366f.png" alt="Using the Record utility type" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type-300x217.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/using-record-utility-type.png"/></noscript><figcaption id="caption-attachment-130123" class="wp-caption-text">Using the <code>Record</code> utility type</figcaption></figure>
<p>参见<a href="https://www.typescriptlang.org/play?#code/FAFwngDgpgBA8gJwOYwLwwEpQMYHsEAmAPAM4gICWAdkgDQxmU0B8wweVZM+SAhlRQBevEBVxUAXPGRoYAbwC+bHvyEixVAHRVeAW1joARABlcSBLmwBrKCENA" target="_blank" rel="noopener">中的打字稿游乐场</a>。</p>
<h3 id="solution-4-use-map-data-type">解决方案4:使用<code>Map</code>数据类型</h3>
<p>现在，<code>Map</code>对象是与<code>object</code>完全不同的数据结构，但是为了完整起见，如果使用<code>Map</code>，就可以消除这个问题。</p>
<p>考虑使用一个<code>Map</code>对象重写的起始示例:</p>
<pre class="language-typescript hljs">// before 
const organization = {}
organization.name = "Logrocket"  

// after 
const organization = new Map()
organization.set("name","Logrocket")
</pre>
<p>有了<code>Map</code>对象，当你动态分配属性给对象:<br/> <img data-attachment-id="145865" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/map-object-no-errors/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors.png" data-orig-size="730,480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Map-object-no-errors" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors-300x197.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors.png" decoding="async" src="../Images/1926844c48566efdf993e03ec9434065.png" alt="Dark Background Typescript Playground Showing Map Object No Errors" class="aligncenter size-full wp-image-145865 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors-300x197.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors.png"/>时不会有错误</p><noscript><img data-lazy-fallback="1" data-attachment-id="145865" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/map-object-no-errors/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors.png" data-orig-size="730,480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Map-object-no-errors" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors-300x197.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors.png" decoding="async" loading="lazy" src="../Images/1926844c48566efdf993e03ec9434065.png" alt="Dark Background Typescript Playground Showing Map Object No Errors" class="aligncenter size-full wp-image-145865" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors-300x197.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-no-errors.png"/></noscript>
<p><a href="https://www.typescriptlang.org/play?#code/LAKAxg9gdgzgLgAggJwOYEMoEsBe65bQIC8CUApgO4ICy6ADgBQCUoKG2eB0AdDOXEYAiKOgC25IQBohAGQipkEMAGsBQ1iFBA">在TypeScript playground </a>看到这个。</p>
<p>乍一看，这似乎是一个很好的解决方案，但是需要注意的是您的<code>Map</code>对象是弱类型的。您可以访问一个不存在的属性，但不会收到任何警告:</p>
<pre class="language-typescript hljs">const organization = new Map()
organization.set("name","Logrocket")

// Property nothingness does not exist. No TS warnings 
const s = organization.get("nothingness")
console.log(s)
</pre>
<p><a href="https://www.typescriptlang.org/play?#code/LAKAxg9gdgzgLgAggJwOYEMoEsBe65bQIC8CUApgO4ICy6ADgBQCUoKG2eB0AdDOXEYAiKOgC25IQBohAGQipkEMAGsBQ1iFCRYiGCSRpMufISg9UA4VAhwAFliioKMGBu3QYEADbke3hUYYTVBQIA">见打字稿操场</a>。</p>
<p>这与标准对象不同。</p>
<p>默认情况下，初始化后的<code>Map</code>的键值类型为<code>any</code>——即<code>new () =&gt; Map<any any=""/></code>。因此，<code>s</code>变量的返回类型将是<code>any</code> : <br/> <img data-attachment-id="145869" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/map-object-s-variable-type-any/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any.png" data-orig-size="730,480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Map-object-s-variable-type-any" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any-300x197.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any.png" decoding="async" src="../Images/08f5669e089d3b12bdeafcfcd1334e55.png" alt="Dark Background Typescript Playground Showing Constant S With Type Any Indicated By Red Arrow" class="aligncenter size-full wp-image-145869 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any-300x197.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145869" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/map-object-s-variable-type-any/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any.png" data-orig-size="730,480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Map-object-s-variable-type-any" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any-300x197.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any.png" decoding="async" loading="lazy" src="../Images/08f5669e089d3b12bdeafcfcd1334e55.png" alt="Dark Background Typescript Playground Showing Constant S With Type Any Indicated By Red Arrow" class="aligncenter size-full wp-image-145869" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any-300x197.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-any.png"/></noscript><br/>
When using a <code>Map</code>, at the very least, I strongly suggest passing some type information upon creation. For example:
<pre class="language-typescript hljs">const organization = new Map&lt;string, string&gt;()
organization.set("name","Logrocket")
const s = organization.get("nothingness")
console.log(s)
</pre>
<p><code>s</code>仍将是未定义的，但你不会对它的代码用法感到惊讶。你现在会收到合适的类型:<br/> <img data-attachment-id="145872" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/map-object-s-variable-type-defined/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined.png" data-orig-size="730,480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Map-object-s-variable-type-defined" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined-300x197.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined.png" decoding="async" src="../Images/bc9927a996183b9965b85a604414131f.png" alt="Dark Background Typescript Playground Showing Properly Typed Map Value With Const S With Type String Undefined Indicated By Red Arrow" class="aligncenter size-full wp-image-145872 jetpack-lazy-image" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined-300x197.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145872" data-permalink="https://blog.logrocket.com/dynamically-assign-properties-object-typescript/attachment/map-object-s-variable-type-defined/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined.png" data-orig-size="730,480" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Map-object-s-variable-type-defined" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined-300x197.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined.png" decoding="async" loading="lazy" src="../Images/bc9927a996183b9965b85a604414131f.png" alt="Dark Background Typescript Playground Showing Properly Typed Map Value With Const S With Type String Undefined Indicated By Red Arrow" class="aligncenter size-full wp-image-145872" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined-300x197.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/Map-object-s-variable-type-defined.png"/></noscript><br/>
If you truly don’t know what the <code>keys</code> of the <code>Map</code> will be, you can go ahead and represent this at the type level:
<pre class="language-typescript hljs">const organization = new Map&lt;unknown, string&gt;()
</pre>
<p>如果您不确定<code>keys</code>或<code>values</code>是什么，安全起见，请在类型级别表示它:</p>
<pre class="language-typescript hljs">const organization = new Map&lt;unknown, unknown&gt;()
</pre>
<h3 id="solution-5-consider-optional-object-property">解决方案5:考虑一个可选的<code>object</code>属性</h3>
<p>此解决方案并不总是可行的，但如果您知道要动态分配的属性的名称，则可以在初始化对象时继续提供此选项，如下所示:</p>
<pre class="language-typescript hljs">const organization : {name?: string} = {}
organization.name = "Logrocket" 
</pre>
<p><a href="https://www.typescriptlang.org/play?#code/LAKAxg9gdgzgLgAggJwOYEMoEsBe65bQIBcCA3lOgLYCmA-KfMllKgL4IC85booKGbHgLQAdJVpcEAIgAyEVMghgA1jTjSECPiCA">见打字稿操场</a>。</p>
<p>如果您不喜欢使用可选属性，您可以更明确地输入，如下所示:</p>
<pre class="language-typescript hljs">const organization : {name: string | null} = {
    name: null
}
organization.name = "Logrocket"  
</pre>
<p><a href="https://www.typescriptlang.org/play?#code/LAKAxg9gdgzgLgAggJwOYEMoEsBe65bQIBcCA3lOgLYCmp8yWUqCAPglAK4A23AvggC85UAjEdqdDj26g+oUCgzY8BaADpKtIQgBEAGQipkEMAGsacXWIUggA">见打字稿操场</a>。</p>
<h2>结论</h2>
<p>除了原语，您必须处理的最常见的类型可能是对象类型。</p>
<p>在需要动态构建对象的情况下，利用<code>Record</code>实用程序类型或使用对象索引签名来定义对象上允许的属性。</p>
<p>如果你想阅读更多关于这个主题的内容，请随意查看我关于栈溢出的七个最常被问到的打字稿问题的备忘单，或者用推特给我发任何问题。干杯！</p><div class="code-block code-block-21">
<div class="blog-plug inline-plug typescript-plug"><h2><a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>:全面了解您的网络和移动应用</h2>
<a href="https://lp.logrocket.com/blg/typescript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放问题，就像问题发生在您自己的浏览器中一样。LogRocket不需要猜测错误发生的原因，也不需要向用户询问截图和日志转储，而是让您重放会话以快速了解哪里出错了。它可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。</p>
<p>除了记录Redux操作和状态，LogRocket还记录控制台日志、JavaScript错误、堆栈跟踪、带有头+正文的网络请求/响应、浏览器元数据和自定义日志。它还使用DOM来记录页面上的HTML和CSS，甚至为最复杂的单页面和移动应用程序重新创建像素级完美视频。</p>
<a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>