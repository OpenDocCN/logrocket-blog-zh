<html>
<head>
<title>Create collapsible React components with react-collapsed - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用 react-collapsed - LogRocket 博客创建可折叠的 React 组件</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/#0001-01-01">https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/#0001-01-01</a></blockquote><div><article class="article-post">
<p>现代的 React web 应用程序由选项卡、进度条、图表、可拖动元素、可折叠组件等组成。—所有这些都是由组件构建的。我们将关注可折叠组件，它有两种状态:折叠和展开。</p>
<p>当可折叠组件处于折叠状态时，通常不会显示其全部内容，但用户可以通过单击鼠标或点击屏幕来展开它，从而查看全部内容。前端开发人员使用可折叠组件来创建动作流、可编辑表单和首选项部分。</p>
<p>可折叠的设计有助于我们隐藏不直接相关的内容。例如，您可以使用一个可折叠的组件，在特定的、以设置为中心的页面上的基本设置列表之后显示更多的高级设置。</p>
<p>在本教程中，我将解释如何使用<a href="https://github.com/roginfarrer/react-collapsed" target="_blank" rel="noopener"> react-collapsed 库</a>创建可折叠组件，该库为您提供了将 react 组件转换为可折叠组件所需的所有 API。此外，我们将使用这个库作为基础来构建一个首选项页面。</p>
<h2>react-collapsed 的突出特性</h2>
<h3>定制风格的自由</h3>
<p>许多 UI 工具包，如 MUI、Bootstrap 和其他库，都提供了预构建的可折叠组件，但是这些组件带有难以定制的样式和内部元素。另一方面，react-collapsed 只提供所需的道具，并允许您实现自己的 UI。</p>
<h3>简单的基于 CSS 的动画</h3>
<p>这个库既不使用动画框架也不使用 JavaScript 来制作动画。它使用原生的基于 CSS 的动画。你可以用<a href="https://cubic-bezier.com/" target="_blank" rel="noopener">三次贝塞尔曲线</a>自由构建和使用自定义动画。</p>
<h3>简单的设置和灵活性</h3>
<p>您确实可以用最少努力将任何 React 组件转换或扩展为可折叠组件。此外，react-collapsed 公开了您需要的每个定制选项，如动画速度、动画类型、事件处理程序等。</p>
<h2>创建基本的可折叠组件</h2>
<p>创建一个新的 React 项目或打开现有的 React 项目，开始学习教程。如果您要试验一个新项目，使用下面的命令创建一个。</p>
<pre class="language-bash hljs">npx create-react-app react-collapsed-example
cd react-collapsed-example
</pre>
<p>现在，将<a href="https://www.npmjs.com/package/react-collapsed" target="_blank" rel="noopener"> react-collapsed 库</a>添加到您的项目中。</p>
<pre class="language-bash hljs">yarn add react-collapsed
# or
npm i react-collapsed
</pre>
<p>将以下代码添加到您的<code>App.js</code></p>
<pre class="language-jsx hljs">import React from 'react';
import useCollapse from 'react-collapsed';
import './App.css';
function Collapsible() {
    const { getCollapseProps, getToggleProps, isExpanded } = useCollapse();
return (
    &lt;div className="collapsible"&gt;
        &lt;div className="header" {...getToggleProps()}&gt;
            {isExpanded ? 'Collapse' : 'Expand'}
        &lt;/div&gt;
        &lt;div {...getCollapseProps()}&gt;
            &lt;div className="content"&gt;
                Now you can see the hidden content. &lt;br/&gt;&lt;br/&gt;
                Click again to hide...
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    );
}
function App() {
    return (
    &lt;Collapsible/&gt;
    );
}
export default App;
</pre>
<p>上面的代码定义了使用 react-collapsed 道具实现可折叠动画的<code>Collapsible</code>组件。这里，我们使用了<code>getToggleProps</code>函数将所需的道具添加到可点击区域。此外，我们需要使用<code>getCollapseProps</code>功能将所需的道具添加到折叠的面板中。</p>
<p>现在，将下面的 CSS 添加到<code>App.css</code></p>
<pre class="language-css hljs">.collapsible .content {
    padding: 6px;
    background-color: #eeeeee;
}
.collapsible .header {
    background-color: #dddddd;
    padding: 6px;
    cursor: pointer;
}
</pre>
<p>确保不要在添加<code>getCollapseProps</code>的元素中添加任何 CSS 填充，因为这会破坏平滑的动画。</p>
<p>现在，用<code>yarn start</code>命令运行你的应用程序。您将看到以下结果。</p>
<p><img data-attachment-id="83530" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/css-collapsible-element/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/css-collapsible-element.gif" data-orig-size="730,404" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="css-collapsible-element" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/css-collapsible-element-300x166.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/css-collapsible-element.gif" decoding="async" class="aligncenter size-full wp-image-83530 jetpack-lazy-image" src="../Images/d4dfddb5e1023fa2f7867d6ca8dc5696.png" alt="Our CSS collapsible element" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/css-collapsible-element.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/css-collapsible-element.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="83530" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/css-collapsible-element/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/css-collapsible-element.gif" data-orig-size="730,404" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="css-collapsible-element" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/css-collapsible-element-300x166.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/css-collapsible-element.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-83530" src="../Images/d4dfddb5e1023fa2f7867d6ca8dc5696.png" alt="Our CSS collapsible element" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/css-collapsible-element.gif"/></noscript>
<p>在上面的例子中，<code>getToggleProps</code>函数调用自动绑定点击事件处理程序来切换可折叠面板。但是，如果您需要对点击事件进行更多的控制，比如防止基于自定义逻辑的展开或折叠，您可以使用下面的代码手动切换面板。</p>
<pre class="language-jsx hljs">import React, { useState } from 'react';
import useCollapse from 'react-collapsed';
import './App.css';
function Collapsible() {
    const [ isExpanded, setExpanded ] = useState(false);
    const { getCollapseProps, getToggleProps } = useCollapse({ isExpanded });
function handleOnClick() {
        // Do more stuff with the click event!
        // Or, set isExpanded conditionally 
        setExpanded(!isExpanded);
    }
return (
        &lt;div className="collapsible"&gt;
            &lt;div className="header" {...getToggleProps({onClick: handleOnClick})}&gt;
                {isExpanded ? 'Collapse' : 'Expand'}
            &lt;/div&gt;
            &lt;div {...getCollapseProps()}&gt;
                &lt;div className="content"&gt;
                    Now you can see the hidden content. &lt;br/&gt;&lt;br/&gt;
                    Click again to hide...
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    );
}
function App() {
    return (
    &lt;Collapsible/&gt;
    );
}
export default App;
</pre>
<h2>自定义动画类型和速度</h2>
<p>如前所述，react-collapsed 是一个非常灵活的库——它通过<code>useCollapse</code>钩子接受各种配置参数。所以，让我们改变动画速度。将以下代码添加到<code>App.js</code>:</p>
<pre class="language-jsx hljs">import React from 'react';
import useCollapse from 'react-collapsed';
import './App.css';
function Collapsible() {
    const config = {
        duration: 2000
    };
    const { getCollapseProps, getToggleProps, isExpanded } = useCollapse(config);
return (
    &lt;div className="collapsible"&gt;
        &lt;div className="header" {...getToggleProps()}&gt;
            {isExpanded ? 'Collapse' : 'Expand'}
        &lt;/div&gt;
        &lt;div {...getCollapseProps()}&gt;
            &lt;div className="content"&gt;
                Now you can see the hidden content. &lt;br/&gt;&lt;br/&gt;
                Click again to hide...
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    );
}
function App() {
    return (
    &lt;Collapsible/&gt;
    );
}
export default App;
</pre>
<p>默认情况下，库根据内容高度计算动画持续时间。但是现在，我们让动画变慢了，如下图所示。</p>
<p><img data-attachment-id="83532" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/animation-duration-content-height/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/animation-duration-content-height.gif" data-orig-size="730,404" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="animation-duration-content-height" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/animation-duration-content-height-300x166.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/animation-duration-content-height.gif" decoding="async" class="aligncenter size-full wp-image-83532 jetpack-lazy-image" src="../Images/8fcfb6b7fcab71def04c2a25bfb0fb84.png" alt="Animation duration is based on content height, but we slowed it down" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/animation-duration-content-height.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/animation-duration-content-height.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="83532" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/animation-duration-content-height/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/animation-duration-content-height.gif" data-orig-size="730,404" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="animation-duration-content-height" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/animation-duration-content-height-300x166.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/animation-duration-content-height.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-83532" src="../Images/8fcfb6b7fcab71def04c2a25bfb0fb84.png" alt="Animation duration is based on content height, but we slowed it down" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/animation-duration-content-height.gif"/></noscript>
<p>我们还可以自定义默认的动画类型。下面的配置使用了用<a href="https://cubic-bezier.com/#.93,.12,.42,.25">三次贝塞尔曲线</a>构建的自定义 CSS 动画。用以下对象更新以前的 react-collapsed 配置。</p>
<pre class="language-javascript hljs">{
    duration: 1000,
    easing: 'cubic-bezier(.93,.12,.42,.25)'
}
</pre>
<p>现在我们可以看到一个有点不同的动画，如下所示。</p>
<p><img data-attachment-id="83537" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/difference-height-vs-time/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/difference-height-vs-time.gif" data-orig-size="730,404" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="difference-height-vs-time" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/difference-height-vs-time-300x166.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/difference-height-vs-time.gif" decoding="async" class="aligncenter size-full wp-image-83537 jetpack-lazy-image" src="../Images/cae9d92762d1826c11d8c8a004ae622b.png" alt="The expand animation sped up a bit" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/difference-height-vs-time.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/difference-height-vs-time.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="83537" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/difference-height-vs-time/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/difference-height-vs-time.gif" data-orig-size="730,404" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="difference-height-vs-time" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/difference-height-vs-time-300x166.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/difference-height-vs-time.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-83537" src="../Images/cae9d92762d1826c11d8c8a004ae622b.png" alt="The expand animation sped up a bit" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/difference-height-vs-time.gif"/></noscript>
<p>可能很难注意到这两个 gif 在高度和时间移动上的差异，但是特别是如果你将它们并排比较，并观察扩展阶段的结束，你会发现它是不同的。此外，如果在本地运行代码，这种差异可能更容易看出来。</p>
<h2>默认情况下展开组件</h2>
<p>以前的可折叠组件在我们单击标题时显示隐藏的内容。在某些场景中，我们需要默认显示隐藏的内容，并让用户根据需要折叠它。请看下面的配置对象示例。</p>
<pre class="language-javascript hljs">{
    defaultExpanded: true
}
</pre>
<p>这里，我们将<code>defaultExpanded</code>选项设置为<code>true</code>,以初始显示展开的组件。</p>
<h2>嵌套的可折叠组件</h2>
<p>可以将一个可折叠组件添加到另一个可折叠组件中。使用以下代码更新 React 应用程序，查看嵌套的可折叠组件的运行情况。</p>
<pre class="language-jsx hljs">import React from 'react';
import useCollapse from 'react-collapsed';
import './App.css';
function InnerCollapsible() {
    const { getCollapseProps, getToggleProps, isExpanded } = useCollapse();
return (
    &lt;div className="collapsible"&gt;
        &lt;div className="header" {...getToggleProps()}&gt;
            {isExpanded ? 'Collapse' : 'Expand'}
        &lt;/div&gt;
        &lt;div {...getCollapseProps()}&gt;
            &lt;div className="content"&gt;
                Now you can see the hidden content. &lt;br/&gt;&lt;br/&gt;
                Click &lt;i&gt;Collapse&lt;/i&gt; to hide this content...
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    );
}
function Collapsible() {
    const { getCollapseProps, getToggleProps, isExpanded } = useCollapse();
return (
    &lt;div className="collapsible"&gt;
        &lt;div className="header" {...getToggleProps()}&gt;
            {isExpanded ? 'Close' : 'Open'}
        &lt;/div&gt;
        &lt;div {...getCollapseProps()}&gt;
            &lt;div className="content"&gt;
                Now you can see the hidden content. &lt;br/&gt;&lt;br/&gt;
                Click &lt;i&gt;Close&lt;/i&gt; to hide everything... &lt;br/&gt;&lt;br/&gt;
                &lt;InnerCollapsible/&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    );
}
function App() {
    return (
    &lt;Collapsible/&gt;
    );
}
export default App;
</pre>
<p>这里，我们在<code>Collapsible</code>组件中创建了一个名为<code>InnerCollapsible</code>的嵌套可折叠组件，并使用了 react-collapsed 钩子中相同的 API 函数。当父组件折叠时，子组件自动保存可折叠状态。</p>
<p><img data-attachment-id="83541" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/nested-collapsible-menus/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/nested-collapsible-menus.gif" data-orig-size="730,426" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="nested-collapsible-menus" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/nested-collapsible-menus-300x175.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/nested-collapsible-menus.gif" decoding="async" class="aligncenter size-full wp-image-83541 jetpack-lazy-image" src="../Images/b2238c9130e69bd50f84c98acafc19a4.png" alt="Nested collapsible menus tutorial" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/nested-collapsible-menus.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/nested-collapsible-menus.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="83541" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/nested-collapsible-menus/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/nested-collapsible-menus.gif" data-orig-size="730,426" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="nested-collapsible-menus" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/nested-collapsible-menus-300x175.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/nested-collapsible-menus.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-83541" src="../Images/b2238c9130e69bd50f84c98acafc19a4.png" alt="Nested collapsible menus tutorial" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/nested-collapsible-menus.gif"/></noscript>
<p>您可以实现任何嵌套级别的可折叠功能。此外，您可以创建自己的可重用可折叠组件来简化上面的代码，如下所示。</p>
<pre class="language-jsx hljs">import React from 'react';
import useCollapse from 'react-collapsed';
import './App.css';
function Collapsible(props) {
    const { getCollapseProps, getToggleProps, isExpanded } = useCollapse();
return (
    &lt;div className="collapsible"&gt;
        &lt;div className="header" {...getToggleProps()}&gt;
            {isExpanded ? 'Collapse' : 'Expand'}
        &lt;/div&gt;
        &lt;div {...getCollapseProps()}&gt;
            &lt;div className="content"&gt;
                {props.children}
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    );
}
function App() {
    return (
    &lt;Collapsible&gt;
        Now you can see the hidden content. &lt;br/&gt;&lt;br/&gt;
        Click &lt;i&gt;Collapse&lt;/i&gt; to hide everything... &lt;br/&gt;&lt;br/&gt;
        &lt;Collapsible&gt;
            Now you can see the hidden content. &lt;br/&gt;&lt;br/&gt;
            Click &lt;i&gt;Collapse&lt;/i&gt; to hide this content...
        &lt;/Collapsible&gt;
    &lt;/Collapsible&gt;
    );
}
export default App;
</pre>
<p>现在我们可以将任何子元素传递到<code>Collapsible</code>组件中，因为它呈现了<code>props.children</code>。上面的代码通过在另一个<code>Collapsible</code>组件实例中呈现一个<code>Collapsible</code>组件来创建一个嵌套的可折叠组件。</p>
<p>尝试在上面的源代码中添加更多的嵌套组件，看看会发生什么！</p>
<h2>为动画设置事件处理程序</h2>
<p>react-collapsed 库为动画提供了事件处理程序支持。动画由四个步骤组成:开始展开、结束展开、开始塌陷和结束塌陷。我们可以将回调绑定到这些步骤，如下所示。</p>
<pre class="language-jsx hljs">import React from 'react';
import useCollapse from 'react-collapsed';
import './App.css';
function Collapsible(props) {
    const config = {
        duration: 2000,
        onExpandStart: () =&gt; {
            console.log('INFO: onExpandStart triggered.');
        },
        onExpandEnd: () =&gt; {
            console.log('INFO: onExpandEnd triggered.');
        },
        onCollapseStart: () =&gt; {
            console.log('INFO: onCollapseStart triggered.');
        },
        onCollapseEnd: () =&gt; {
            console.log('INFO: onCollapseEnd triggered.');
        }
    };
    const { getCollapseProps, getToggleProps, isExpanded } = useCollapse(config);
return (
    &lt;div className="collapsible"&gt;
        &lt;div className="header" {...getToggleProps()}&gt;
            {isExpanded ? 'Collapse' : 'Expand'}
        &lt;/div&gt;
        &lt;div {...getCollapseProps()}&gt;
            &lt;div className="content"&gt;
                {props.children}
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    );
}
function App() {
    return (
    &lt;Collapsible&gt;
        Now you can see the hidden content. &lt;br/&gt;&lt;br/&gt;
        Click again to hide ...
    &lt;/Collapsible&gt;
    );
}
export default App;
</pre>
<p>上面的代码在每个动画步骤将文本记录到浏览器控制台。看下面的预告。</p>
<p><img data-attachment-id="83543" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/log-text-browser-console-animation-step/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/log-text-browser-console-animation-step.gif" data-orig-size="730,465" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="log-text-browser-console-animation-step" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/log-text-browser-console-animation-step-300x191.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/log-text-browser-console-animation-step.gif" decoding="async" class="aligncenter size-full wp-image-83543 jetpack-lazy-image" src="../Images/68242a3c9767e7179815da9f955abf28.png" alt="At each animation step, text is logged to the browser console" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/log-text-browser-console-animation-step.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/log-text-browser-console-animation-step.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="83543" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/log-text-browser-console-animation-step/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/log-text-browser-console-animation-step.gif" data-orig-size="730,465" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="log-text-browser-console-animation-step" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/log-text-browser-console-animation-step-300x191.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/log-text-browser-console-animation-step.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-83543" src="../Images/68242a3c9767e7179815da9f955abf28.png" alt="At each animation step, text is logged to the browser console" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/log-text-browser-console-animation-step.gif"/></noscript>
<h2>展开和折叠期间应用样式</h2>
<p>如果您需要在动画过程中对可折叠面板应用一些样式，该怎么办？你可以通过配置对象发送一些 CSS。用下面的代码更新以前的源代码配置。</p>
<pre class="language-javascript hljs">{
    duration: 2000,
    expandStyles: {
        opacity: 0.5
    },
    collapseStyles: {
        opacity: 0.5
    }
};
</pre>
<p>您可能已经注意到，在动画过程中，可折叠面板的不透明度会降低。看下面的预告。</p>
<p><img data-attachment-id="83552" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/reduce-opacity-collapse/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/reduce-opacity-collapse.gif" data-orig-size="730,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="reduce-opacity-collapse" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/reduce-opacity-collapse-300x194.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/reduce-opacity-collapse.gif" decoding="async" class="aligncenter size-full wp-image-83552 jetpack-lazy-image" src="../Images/178fe1bd7cb3d94870f11d1229fba6aa.png" alt="The dropdown's opacity is reduced as the element is collapsed" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/reduce-opacity-collapse.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/reduce-opacity-collapse.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="83552" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/reduce-opacity-collapse/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/reduce-opacity-collapse.gif" data-orig-size="730,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="reduce-opacity-collapse" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/reduce-opacity-collapse-300x194.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/reduce-opacity-collapse.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-83552" src="../Images/178fe1bd7cb3d94870f11d1229fba6aa.png" alt="The dropdown's opacity is reduced as the element is collapsed" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/reduce-opacity-collapse.gif"/></noscript>
<h2>高级示例:创建首选项部分</h2>
<p>现在，我们已经用上面的示例代码检查了 react-collapsed 的几乎所有特性，让我们为更高级的场景编写一些代码。我们将实现一个包含几个可折叠组件的首选项页面。</p>
<p>首选项部分有三个部分:常规设置、启动配置和通知设置。</p>
<p>首先，在<code>index.html</code>文件中添加以下字体 Awesome 样式表引用；我们需要使用一些图标来表示可折叠组件的状态。</p>
<pre class="language-html hljs">&lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" /&gt;
</pre>
<p>将以下代码添加到您的<code>App.js</code>文件中。</p>
<pre class="language-jsx hljs">import React from 'react';
import useCollapse from 'react-collapsed';
import './App.css';
function Section(props) {
    const config = {
        defaultExpanded: props.defaultExpanded || false,
        collapsedHeight: props.collapsedHeight || 0
    };
    const { getCollapseProps, getToggleProps, isExpanded } = useCollapse(config);
return (
    &lt;div className="collapsible"&gt;
        &lt;div className="header" {...getToggleProps()}&gt;
            &lt;div className="title"&gt;{props.title}&lt;/div&gt;
            &lt;div className="icon"&gt;
                &lt;i className={'fas fa-chevron-circle-' + (isExpanded ? 'up' : 'down')}&gt;&lt;/i&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div {...getCollapseProps()}&gt;
            &lt;div className="content"&gt;
                {props.children}
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    );
}
function App() {
    return (
        &lt;div className="preferences"&gt;
             &lt;Section title="General" defaultExpanded="true"&gt;
                &lt;label&gt;
                    &lt;input type="checkbox"/&gt; Use dark theme
                &lt;/label&gt;
                &lt;label&gt;
                    &lt;input type="checkbox"/&gt; Use internet connection to download resources
                &lt;/label&gt;
                &lt;br/&gt;&lt;br/&gt;
            &lt;/Section&gt;
             &lt;Section title="Application Startup"&gt;
                &lt;label&gt;
                    &lt;input type="checkbox"/&gt; Open the application when you log into the computer
                &lt;/label&gt;
                &lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;
            &lt;/Section&gt;
            &lt;Section title="Notifications" collapsedHeight="32"&gt;
                &lt;i&gt;Now you can get notifications to your smart watch!&amp;nbsp;
                    &lt;a href="#"&gt;Learn more&lt;/a&gt;
                &lt;/i&gt;
                &lt;br/&gt;&lt;br/&gt;
                &lt;label&gt;
                    &lt;input type="checkbox"/&gt; Notify me task statuses via SMS
                &lt;/label&gt;
                &lt;br/&gt;&lt;br/&gt;
            &lt;/Section&gt;
       &lt;/div&gt;
    );
}
export default App;
</pre>
<p>在这里，我们创建了一个名为<code>Section</code>的可重用可折叠组件。该组件接受三个关键属性:<code>defaultExpanded</code>设置初始状态，<code>collapsedHeight</code>设置折叠高度，<code>title</code>设置标题标题。组件标题根据当前组件状态显示一个字体醒目图标。</p>
<p>现在，我们需要添加 CSS 样式来正确设置首选项部分的样式。将下面的 CSS 添加到您的<code>App.css</code>文件中。</p>
<pre class="language-css hljs">.collapsible .content {
    padding: 6px;
    background-color: rgb(240, 240, 240);
    font-size: 14px;
}
.collapsible .header {
    background-color: rgb(200, 200, 200);
    padding: 6px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    border-bottom: 2px solid rgb(220, 220, 220);
}
.collapsible .header .title {
    font-weight: 400;
}
.preferences label {
    display: block;
    padding-bottom: 4px;
}
</pre>
<p>参见下面的首选项页面，它看起来有点类似于<a href="https://getbootstrap.com/docs/4.0/components/collapse/#accordion-example" target="_blank" rel="noopener"> Bootstrap 的手风琴</a>。</p>
<p><img data-attachment-id="83556" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/collapsible-accordion-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/collapsible-accordion-demo.gif" data-orig-size="730,643" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="collapsible-accordion-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/collapsible-accordion-demo-300x264.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/collapsible-accordion-demo.gif" decoding="async" class="aligncenter size-full wp-image-83556 jetpack-lazy-image" src="../Images/18666b9d70baf89e2d19f99498089616.png" alt="Our collapsible accordion menu, similar to Bootstrap's" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/12/collapsible-accordion-demo.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/collapsible-accordion-demo.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="83556" data-permalink="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/collapsible-accordion-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/12/collapsible-accordion-demo.gif" data-orig-size="730,643" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="collapsible-accordion-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/12/collapsible-accordion-demo-300x264.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/12/collapsible-accordion-demo.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-83556" src="../Images/18666b9d70baf89e2d19f99498089616.png" alt="Our collapsible accordion menu, similar to Bootstrap's" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/12/collapsible-accordion-demo.gif"/></noscript>
<p>完整的源代码可以在我的 GitHub <a href="https://github.com/codezri/react-collapsed-example" target="_blank" rel="noopener">库</a>中找到。</p>
<h2>与其他图书馆的比较</h2>
<p>每个流行的 web UI 库都提供了可折叠的组件。Bootstrap 有<a href="https://getbootstrap.com/docs/4.0/components/collapse/" target="_blank" rel="noopener">折叠</a>，MUI 有<a href="https://material.angular.io/components/expansion/overview" target="_blank" rel="noopener">展开面板</a>，语义 UI 有<a href="https://semantic-ui.com/modules/accordion.html" target="_blank" rel="noopener">手风琴</a>。此外，许多流行的 React 库都提供了预构建的可折叠组件。例如，<a href="https://github.com/Stanko/react-animate-height" target="_blank" rel="noopener"> react-animate-height </a>提供了基于 CSS 动画的可折叠特性。</p>
<p>但是这些解决方案都没有提供一种灵活的方法来使我们自己的 React 组件可折叠。</p>
<p>react-collapsed 库给了我们一个 react 钩子，我们可以在任何组件内部使用它。您可以随心所欲地设计 UI，因为该库不提供预构建的、可定制性较差的组件。</p>
<h2>结论</h2>
<p>在本教程中，我们通过几个示例源代码了解了 react-collapsed。该库没有为我们提供预构建的可折叠组件——您必须围绕它构建自己的视觉效果——但它为我们提供了使自己的 React 组件可折叠所需的一切。</p>
<p>此外，您可以将 react-collapsed 与您喜欢的 UI 库的原子元素集成在一起。如果您已经使用了一个全功能的 UI 库，并且需要一个简单的可折叠组件，那么您可能不需要用这个库从头实现一个组件。但是，如果您需要根据特定的设计构建一个可折叠的组件，react-collapsed 是最好的解决方案。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用 LogRocket 消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款 React analytics 解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket 告诉您 React 应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS 异常、前端性能指标和用户交互。然后，LogRocket 使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的 React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试 LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>