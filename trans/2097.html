<html>
<head>
<title>Deep dive into Vue event handling - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>深入了解 Vue 事件处理- LogRocket 博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/deep-dive-vue-event-handling/#0001-01-01">https://blog.logrocket.com/deep-dive-vue-event-handling/#0001-01-01</a></blockquote><div><article class="article-post">
<p>构建动态网站时，您需要监听不同类型的事件。为了在我们的网站或 web 应用程序上驱动这些类型的交互，我们可以使用事件处理。</p>
<p>在 Vue 中处理事件有几种不同的方法，但最佳解决方案将取决于您正在收听的事件的类型、您希望对事件做出的反应以及您希望通过事件实现的目标。</p>
<p>例如，如果用户点击一个按钮，提交一个表单，或者只是移动他们的鼠标，你可以添加一个反应，比如显示一个动画或者调用一个函数。添加这些类型的事件为最终用户提供了丰富的 UX。</p>
<p>在本文中，我们将介绍在 Vue 中处理事件的基础知识，并学习如何在现实应用中应用事件处理。我们将学习如何通过监听事件、拦截事件并使用下述方法处理事件来改变或阻止元素的行为。</p>
<p>要理解本教程，你应该熟悉 JavaScript 中的<a href="https://blog.logrocket.com/how-to-dynamically-create-javascript-elements-with-event-handlers/">事件。我们开始吧！</a></p>
<h2>创建内嵌事件</h2>
<p>首先，让我们看看 Vue 中事件处理的一个常见用例，创建内联事件。通过 Vue 的原生指令<code>v-on</code>，可以监听浏览器的原生 DOM 事件。在下面的代码块中，我们将侦听按钮上的单击事件，然后更改按钮的文本:</p>
<pre>&lt;template&gt;
  &lt;div&gt;
&lt;button v-on:click='text="Clicked!"'&gt;{text}&lt;/button&gt;
&lt;/div&gt;  
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'InlineEvent',
  data: function () {
    return {
      text: "Click Me"
    }
  }
}
&lt;/script&gt;
</pre>
<p>或者，我们可以使用<code>v-on</code>指令调用一个函数来显示警告:</p>
<pre>&lt;template&gt;
  &lt;div&gt;
&lt;button v-on:click='showAlert'&gt;Show alert&lt;/button&gt;
&lt;/div&gt;  
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'InlineEvent',

  methods:{
  showAlert: ()=&gt;{
    alert("Hola, buenos dia")
  }
  }
}
&lt;/script&gt;
</pre>
<p>在上面的两个例子中，我们向 DOM 元素添加了<code>v-on</code>指令来拦截它的事件:</p>
<pre>&lt;button v-on:click="eventHandler"&gt;&lt;/button&gt;
</pre>
<p>我们还向<code>v-on</code>指令添加了一个参数，这是我们想要处理的事件的名称。在我们的例子中，参数是<code>click</code>。</p>
<p>接下来，我们将一个表达式绑定到指令，这通常是一个您想要用来处理事件的方法。我们称我们的指令为<code>eventHandler</code>，并使用了<code>v-on</code>指令的简写:</p>
<pre>&lt;button @click="eventHandler"&gt;&lt;/button&gt;
</pre>
<h3>Vue 中的常见事件</h3>
<p>在我们到目前为止的例子中，我们已经听到了发生的事件<code>onclick</code>。让我们回顾一下其他一些流行的活动类型:</p>
<h4>鼠标事件</h4>
<ul>
<li><code>onclick</code></li>
<li><code>ondragstart</code></li>
<li><code>ondrop</code></li>
<li><code>dblclick</code></li>
<li><code>onmousedown</code></li>
<li><code>onmouseup</code></li>
<li><code>mouseover</code></li>
</ul>
<h4>键盘事件</h4>
<ul>
<li><code>onkeydown</code></li>
<li><code>onkeypress</code></li>
<li><code>onkeyup</code></li>
</ul>
<h4>HTML 表单和对象事件</h4>
<ul>
<li><code>onchange</code></li>
<li><code>onsubmit</code></li>
<li><code>onreset</code></li>
<li><code>onscroll</code></li>
<li><code>onerror</code></li>
</ul>
<p>在<a href="https://vuejs.org/v2/guide/events.html?"> Vue 文档</a>中描述了更多的事件，您可以在设计您的应用程序时从中选择。您应该回顾并试验这些，以确保您的设计对用户来说尽可能直观。</p>
<h3>在<code>v-on</code>上调用元素</h3>
<p>在 Vue 中，您可以使用在元素的<code>v-on</code>指令上调用的方法，这些方法将包含复杂的逻辑，每当触发事件时都会执行这些逻辑。例如，让我们考虑一个触发的警报<code>onclick</code>:</p>
<pre>&lt;template&gt;
  &lt;div&gt;
&lt;button v-on:click='showAlert("Hello, good morning")'&gt;Show alert&lt;/button&gt;
&lt;/div&gt;  
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'InlineEvent',
  methods:{
  showAlert: (message)=&gt;{
    alert(message)
  }
  }
}
&lt;/script&gt;
</pre>
<p>在上面的代码块中，我们直接从<code>v-on</code>指令向<code>showAlert</code>方法传递消息。然而，我们可以通过向函数添加更多的上下文来改进这段代码。在下面的代码块中，我们将通过连接<code>Hello</code>和<code>showAlert</code>函数中传递的任何文本来更新<code>showAlert</code>显示的消息:</p>
<pre>&lt;template&gt;
  &lt;div&gt;
&lt;button v-on:click='showAlert("Good Morning!")'&gt;Show alert&lt;/button&gt;
&lt;/div&gt;  
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'InlineEvent',

  methods:{
  showAlert: (message)=&gt;{
    alert(`Hello, ${message}`)
  }
  }
}
&lt;/script&gt;
</pre>
<p>既然我们知道了如何截取和创建一个新事件，那么让我们来学习如何改变和阻止一个事件的默认行为。</p>
<h2>修改和阻止事件</h2>
<p>在 Vue 中，我们可以使用事件修改器来改变事件的行为或阻止默认事件。</p>
<p>例如，假设我们有一个包含按钮的表单。默认情况下，如果用户单击按钮或按 enter 键，表单将被提交，页面将被刷新。在单页面应用程序中，我们希望避免完全重载页面，所以我们将使用 AJAX 提交表单。</p>
<h3>防止默认行为</h3>
<p>为了防止事件的默认行为，我们可以调用 Vue 中的<code>.prevent</code>修饰符，它调用本机的<code>event.preventDefault()</code>方法。这一系列步骤防止事件在表单提交后重新加载页面。</p>
<p>另一方面，<code>.stop</code>修改器通过调用<code>event.stopPropagation()</code>完全停止 DOM 事件的默认行为。例如，在下面的代码中，我们在<code>v-on</code>指令的<code>submit</code>上使用了<code>.stop</code>和<code>.submit</code>修饰符:</p>
<pre>&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;Form&lt;/h2&gt;
    &lt;form
      v-on:submit.stop.prevent="log('clicked!', $event)"&gt;
      &lt;button type="Submit"&gt;
        Click Me
      &lt;/button&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'EventModifier',
  methods: {
    log(msg, event) {
      console.log(event.target.tagName, msg);
    }
  }
}
&lt;/script&gt;
</pre>
<p>这两种方法执行类似的任务，并一起使用。您可以使用<code>.prevent</code>来拦截表单的默认行为，并使用<code>.stop</code>来<a href="https://blog.logrocket.com/deep-dive-into-event-bubbling-and-capturing/">防止父元素上的事件冒泡</a>。</p>
<h3>更改默认行为</h3>
<p>要更改默认行为，让我们看看下面代码块中的例子。默认情况下，当用户点击<code>Click Me</code>链接时，他们会看到一个警告。然后，谷歌将在一个新的标签页中打开:</p>
<pre>&lt;a href = "http://www.google.com" v-on:click = "alert('Hola, buenos dias')"&gt;Click Me&lt;/a&gt;
</pre>
<p>然而，如果我们不想在显示警告后打开链接，我们可以使用<code>.prevent</code>修饰符，如下所示:</p>
<pre>&lt;a href = "http://www.google.com" v-on:click.prevent = "alert('Hola, buenos dias')"&gt;Click Me&lt;/a&gt;
</pre>
<p><code>.prevent</code>修饰符阻止链接打开，只执行分配给标签的方法。现在，单击该按钮将发送一条警告消息，而无需打开链接。</p>
<h3>其他事件修饰符</h3>
<p>在我们的例子中，我们在 Vue 中使用了<code>.prevent</code>修饰符。让我们看看其他几个流行的修改器及其功能:</p>
<ul>
<li><code>.self</code>:仅当<code>event.target</code>是元素本身时触发事件</li>
<li><code>.once</code>:防止事件执行多次</li>
<li><code>.keyup</code>:监听键盘事件</li>
<li><code>.capture</code>:在处理触发事件的元素之前，处理以内部元素为目标的事件</li>
</ul>
<h3>关键事件修饰符</h3>
<p>Vue 中的按键事件修改器为聆听键盘提供了广泛的支持。例如，我们可以使用按键修饰符来监听特定按键被按下的事件。注意，有多个单词的键名通常用 kebab 大小写。</p>
<p>在下面的例子中，我们正在监听<code>enter</code>键事件:</p>
<pre>&lt;input type = "text" v-on:keyup.enter = "alert('Hola, buenos dias!')" /&gt;
</pre>
<p>当上面的输入元素被聚焦时，按下 enter 按钮将触发警告功能。</p>
<p>按键事件修改器遵循结构<code>v-on.keyevent.keyname</code>。也可以像<code>v-on.keyup.ctrl.enter</code>一样嵌套多个键名。</p>
<h2>创建自定义事件</h2>
<p>在 Vue 中，父组件可以通过 prop 属性向其子组件传递数据，但是子组件不能向父组件发送数据。但是，我们可以使用<code>$emit</code>让父组件监听子组件，并允许子组件向父组件传递数据。</p>
<p>在下面的例子中，包含父组件的<code>App.vue</code>正在监听子组件<code>Child.vue</code>:</p>
<pre>//App.vue (parent component)
&lt;template&gt;
  &lt;div&gt;
    &lt;child @show-alert="updateAlert"&gt; &lt;/child&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import Child from "@/components/Child.vue";
export default {
  components: {
    Child,
  },
  methods: {
    updateAlert(item) {
      alert(item);
    },
  },
};
&lt;/script&gt;

//Child.vue (child component)

&lt;template&gt;
  &lt;div&gt;
    &lt;button class="Button" @click="emitAlert('Hello world')"&gt;Show alert&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  methods: {
    emitAlert(item) {
      this.$emit("show-alert", item);
    },
    updateAlert(item) {
      alert(item);
    },
  },
};
&lt;/script&gt;
</pre>
<h2>结论</h2>
<p>尽管事件处理看起来很简单，但是不正确或不完整的事件处理程序可能会使您的代码混乱，甚至会破坏您的应用程序。在本教程中，我们学习了在 Vue 应用程序中处理事件的几种不同方法。</p>
<p>我们介绍了如何使用<code>v-on</code>指令添加内联事件，并回顾了一些可以用来定制应用程序的不同类型的事件。我们还学习了如何使用修饰符来防止或改变事件的默认行为。最后，我们讲述了如何使用<code>$emit</code>改变子组件和父组件之间的通信。</p>
<p> </p>
<p> </p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的 Vue 应用</h2><p>调试 Vue.js 应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的 Vue 突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的 DVR，记录你的 Vue 应用程序中发生的一切，包括网络请求、JavaScript 错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex 插件将 Vuex 突变记录到 LogRocket 控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试 Vue 应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>