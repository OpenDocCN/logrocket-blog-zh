<html>
<head>
<title>Advanced guide to the CSS toggle() pseudo-class </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>CSS toggle()伪类高级指南</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/advanced-guide-css-toggle-pseudo-class/#0001-01-01">https://blog.logrocket.com/advanced-guide-css-toggle-pseudo-class/#0001-01-01</a></blockquote><div><article class="article-post">
<p>2022年4月中旬，Chromium宣布它将开始与CSS Toggles兼容的原型开发，这是一个新的CSS功能，目前<a href="https://tabatkins.github.io/css-toggle/">只作为非官方草案</a>提供。</p>
<p>CSS Toggles是一种声明性机制，用于将“可切换值”与元素相关联，以及设置和修改该值。您还可以在CSS中的选择器中使用CSS切换来选择一个元素，以便设置样式或添加交互性。</p>
<p>草案中包含了<code>toggle()</code>，这是一个功能性的伪类，可以根据切换状态选择元素。在本文中，我们将探索目前对这个即将到来的CSS特性的了解，包括它令人兴奋的地方和它的一些潜在用例。</p>
<p>向前跳:</p>

<p>请注意，因为CSS <code>toggle()</code>目前仍然是一个非官方的草案，我们对这个伪类的了解可能会改变。</p>
<h2 id="why-css-toggle-exciting-upcoming-feature">为什么CSS <code>toggle()</code>是一个令人兴奋的新特性</h2>
<p>在<code>toggle()</code>之前，你只能利用内置的浏览器状态来设计元素或者增加交互性。例如，checkbox输入有<code>:checked</code>，这是一个与表单输入相关的内置浏览器状态，一旦选中，您可以使用它来更改输入的外观。</p>
<p>使用<code>toggle()</code>，您可以在任何元素上创建自己的定制状态，并为不同的状态定义样式变化。该规范还附带了诸如<code>toggle-visibility</code>和<code>toggle-group</code>这样的属性，这两个属性对于构建标签和折叠这样的公开窗口小部件特别有用。</p>
<p>让我们看一些例子。</p>
<h2 id="using-toggle-select-element-toggle-state">使用<code>toggle()</code>根据柠檬的切换状态选择柠檬</h2>
<p>你可以在CSS中用<code>toggle-root</code>属性定义一个元素的状态，并描述该状态如何根据用户与<code>toggle-trigger</code>属性的交互而改变。然后，您可以使用<code>toggle()</code>伪类让元素响应状态变化。</p>
<p>考虑以下按钮:</p>
<pre class="language-html hljs">&lt;div&gt;
    &lt;button&gt;TOGGLE ME!&lt;/button&gt;
&lt;/div&gt;

&lt;div&gt;
    &lt;p&gt;Demo for &lt;em&gt;&lt;a href="https://blog.logrocket.com" target"_top"&gt;https://blog.logrocket.com&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
</pre>
<p>我们希望按钮有两种可切换状态——尽管你可以有两种以上的状态。每个状态都有一组与之关联的给定样式。</p>
<p>下面的例子展示了使用CSS <code>toggle()</code>伪类实现这一点的简单方法。我们在HTML根元素中注册toggle，将按钮定义为toggle activator，然后描述当toggle切换时应该发生什么:</p>
<pre class="language-css hljs">html {
  toggle-root: switch;
}

button {
  toggle-trigger: switch;
  background-color: black;
  color: white;
}

html:toggle(switch) button {
  background-color: white;
  color: black;
}
</pre>
<p>使用上面的CSS，当通过单击按钮改变切换值时，我们只需将按钮的背景和文本颜色分别改为白色和黑色。下面是这种行为的演示:</p>
<p class="codepen" data-height="500" data-theme-id="0" data-default-tab="result" data-user="kingsleyubah" data-slug-hash="ExRKGMm" data-pen-title="“Toggle">请看<a href="https://codepen.io"> CodePen </a>上金斯利乌巴(<a href="https://codepen.io/kingsleyubah">@金斯利乌巴</a> ) <br/>的笔<a href="https://codepen.io/kingsleyubah/pen/ExRKGMm">拨动按钮演示</a>。</p>
<p/>
<p>如果你想让你的按钮看起来更动态，看看我们的指南<a href="https://blog.logrocket.com/css-transitions-animating-hamburger-menu-button/">用CSS </a>制作按钮动画。</p>
<p>注意，一个元素既可以是切换根，也可以是切换触发器。在这种情况下，使用<code>toggle</code>速记属性。以下示例演示了这种情况:</p>
<pre class="language-css hljs">li {
  toggle: check self
}

li:toggle(check) {
  color: silver;
  text-decoration: line-through;
}
</pre>
<p>这里，列表项同时是切换根和触发器。因此，当单击一个项目时，我们将文本颜色更改为银色，并在其中划一条线:</p>
<p class="codepen" data-height="500" data-theme-id="0" data-default-tab="result" data-user="kingsleyubah" data-slug-hash="MWXyKpY" data-pen-title="“Toggle">请看<a href="https://codepen.io"> CodePen </a>上金斯利乌巴(<a href="https://codepen.io/kingsleyubah">@金斯利乌巴</a> ) <br/>的笔<a href="https://codepen.io/kingsleyubah/pen/MWXyKpY">切换列表项目演示</a>。</p>
<p/>
<p>接下来，我们来看看切换可见性。</p>
<h2 id="using-toggle-visibility-elements">使用<code>toggle-visibility</code>切换元素的可见性</h2>
<p>使用<code>toggle-visibility</code>属性，您可以构建不同种类的扩展器——<a href="https://blog.logrocket.com/create-collapsible-react-components-react-collapsed/">可折叠组件，如</a>选项卡、折叠、弹出窗口以及详细或摘要小部件——而无需编写一行JavaScript代码。此属性允许元素自动将其显示绑定到特定切换的状态。</p>
<p>使用<code>toggle-visibility</code>也可以<a href="https://blog.logrocket.com/a-guide-to-improving-web-accessibility-with-css/">提供额外的可访问性优势</a>，允许未呈现的内容在搜索或访问时具有页面查找、基于哈希的导航或tab键顺序等功能。</p>
<p>让我们考虑下面的描述列表:</p>
<pre class="language-html hljs">&lt;dl class="accordion"&gt;
  &lt;dt&gt;What is HTML?
  &lt;dd&gt;Hyper Text Markup Language is the standard markup language for documents intended to be viewed in a web browser
  &lt;dt&gt;What is CSS?
  &lt;dd&gt;
Cascading Style Sheets is used to describe the appearance of a document wtitten in HTML or some other markup language
&lt;/dl&gt;
</pre>
<p>默认情况下，描述<code>&lt;dd&gt;</code>是隐藏的。我们只希望在相应的标题被点击时展开描述。下面是添加该效果的CSS:</p>
<pre class="language-css hljs">.accordion &gt; dt {
  background-color: black;
  margin-bottom: 10px;
  padding: 5px 5px;
  width: 120px;
  color: white;
  toggle: show;
  }
  .accordion &gt; dd {
    margin-bottom: 10px;
    toggle-visibility: toggle show;
  }
</pre>
<p>这是这种行为的演示:</p>
<p class="codepen" data-height="500" data-theme-id="0" data-default-tab="result" data-user="kingsleyubah" data-slug-hash="qBKZZrM" data-pen-title="Demo of toggle-visibility effect">请看<a href="https://codepen.io"> CodePen </a>上金斯利乌巴(<a href="https://codepen.io/kingsleyubah">@金斯利乌巴</a> ) <br/>的切换可见效果的笔<a href="https://codepen.io/kingsleyubah/pen/qBKZZrM">演示。</a></p>
<p/>
<p>您还可以使用这个CSS伪类创建切换组。接下来让我们来看看。</p>
<h2 id="using-toggle-group-exclusive-toggles">使用<code>toggle-group</code>对互斥开关进行分组</h2>
<p>如果有多个切换，可以使用toggle-group属性将它们组合在一起。请记住，该组中一次只能有一个切换处于活动状态。这类似于HTML单选按钮的行为，其中不能同时选中两个按钮。</p>
<p>考虑到这种行为，您可以使用切换组来描述具有多个互斥内容分支的模式，这意味着一次只能显示其中一个分支。两个例子是标签和<a href="https://blog.logrocket.com/making-dropdown-menus-css/">折叠或下拉菜单</a>。</p>
<p>考虑下面的HTML:</p>
<pre class="language-html hljs">&lt;div&gt;
  &lt;button&gt;tab one&lt;/button&gt;
  &lt;p&gt;tab one content&lt;/p&gt;
  &lt;button&gt;tab two&lt;/button&gt;
  &lt;p&gt;tab two content&lt;/p&gt;
  &lt;button&gt;tab three&lt;/button&gt;
  &lt;p&gt;tab three content&lt;/p&gt;
&lt;/div&gt;
</pre>
<p>假设在给定时间三个段落中只有一个要显示，我们可以使用切换来定义独占或分组行为:</p>
<pre class="language-css hljs">div {
  /* Set group on a common ancestor */
  toggle-group: tab;
}

button {
  /* Creates sticky tabs and declares itself a toggle activator */  
  toggle: tab 1 group sticky;
}

button:first-of-type {
  /* The first tab is active by default */
  toggle: tab 1 at 1 group sticky;
}

button:toggle(tab) {
  /* Specify how you want the active
  tab/button to look */
}

p {
  /* Visibility of paragraph is 
  linked to toggle state */
  toggle-visibility: toggle tab;
}
</pre>
<p>在上面的CSS中，每个段落的可见性依赖于它的激活器——在这个例子中，是它各自的按钮——并且一次只能出现一个段落。默认情况下，第一段是可见的。</p>
<h2 id="other-features-css-toggle-pseudo-class">CSS <code>toggle()</code>伪类的其他特性</h2>
<p>除了我们提到的基本例子之外，草案还有很多内容。以下是一些需要记住的其他行为:</p>
<ul>
<li>一个切换根可以包含多个切换</li>
<li>在一个切换中可能有多个活动状态</li>
<li>默认情况下，切换状态设置为非活动状态，但这可以被覆盖</li>
<li>你也可以用一组单词来表示状态，而不仅仅是数字</li>
<li>粘性切换总是活跃的，因为总是至少有一个活跃的项目</li>
<li>正在考虑带转换的状态机</li>
</ul>
<p>再次提醒，请记住CSS <code>toggle()</code>目前仍然只是一个非正式的草案。这些行为可能会随着时间的推移而更新或改变。</p>
<h2 id="conclusion">结论</h2>
<p>当在web浏览器上完全实现时，CSS开关对于CSS作者来说将是一个非常有用的工具。</p>
<p>这是一个非常强大的功能，无疑会使向HTML元素添加交互性的过程变得更加容易。当然，正确掌握整个语法需要时间，但这是值得的。</p>
<p>关于这项新功能，您有什么问题吗？请在下面的评论中告诉我。</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>你的前端是否占用了用户的CPU？</h2><p>随着web前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端CPU使用、内存使用等感兴趣，</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>.</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用的DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><p>现代化您调试web和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>