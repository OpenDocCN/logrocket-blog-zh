<html>
<head>
<title>Handling authentication in Vue.js using Vuex, Vue Router, and Auth0 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用 Vuex、Vue 路由器和 Auth0 - LogRocket 博客处理 Vue.js 中的认证</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/#0001-01-01">https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/#0001-01-01</a></blockquote><div><article class="article-post">
<p>身份验证是大多数现代 web 应用程序所需的安全性的关键要素。如果遭到破坏，它会将用户的数据暴露给不该暴露的人，从而给用户带来安全风险。许多现代 web 应用程序使用<a href="https://auth0.com/" target="_blank" rel="noopener"> Auth0 </a>，这是一个易于实现、适应性强的认证和授权平台，而不是从头开始处理认证。</p>
<p>Auth0 目前提供了一个<a href="https://github.com/auth0/auth0-spa-js" target="_blank" rel="noopener"> SPA SDK </a>来处理 Vue 内的认证。然后，一个已经在文档中可用的 Vue 插件<a href="https://auth0.com/docs/quickstart/spa/vuejs?framed=1&amp;sq=1#configure-auth0" target="_blank" rel="noopener">包装了 SDK 的功能，这反过来提供了一个高级 API 抽象来处理认证实现的许多较小的细节。</a></p>
<p>在本教程中，您将学习如何使用 Auth0、传统 Vuex 和 Vue 路由器来实现认证，而不是像上面解释的那样使用插件和 SDK。最后，您将使用 Vue 和 Auth0 构建一个功能认证服务，并使用这些相同的过程在您选择的任何 web 应用程序中实现认证。我们开始吧！</p>
<h2>安装 Vue CLI</h2>
<p>我们将使用 Vue CLI 启动项目。如果您的系统上已经安装了 Vue CLI，您可以<a href="#setting-up-auth0">跳到下一节</a>。</p>
<p>首先，您需要在系统上安装 Vue CLI。您可以使用以下命令进行全局安装:</p>
<pre>npm install -g @vue/cli
</pre>
<p>我们现在可以使用 Vue CLI 来创建我们的项目。使用以下命令创建一个新项目:</p>
<pre>vue create vue-sample-auth0
</pre>
<p>您将被要求选择一个预设。选择<code>Manually select features</code>，然后选择<code>Babel</code>、<code>Vuex</code>、<code>Router</code>和<code>Linter/Formatter</code>。</p>
<p>还会询问您是否要将<code>History mode</code>用于路由器—选择<code>Yes</code>。你可以选择任何你想要的棉绒，但在本教程中，我将使用 ESLint 和更漂亮。</p>
<p>创建项目后，导航到新项目文件夹:</p>
<pre>cd vue-sample-auth0
</pre>
<p>然后启动服务器:</p>
<pre>npm run serve
</pre>
<p>一旦服务器启动，您就可以打开浏览器查看它。您应该看到这个:</p>
<p><img data-attachment-id="51779" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/welcome-to-your-vuejs-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app.png" data-orig-size="730,729" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="welcome-to-your-vuejs-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app-300x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app.png" decoding="async" class="aligncenter wp-image-51779 size-full jetpack-lazy-image" src="../Images/48cb4ef5438a07eef538c2dc0523c482.png" alt="Vue welcome screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app-300x300.png 300w, https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app-150x150.png?crop=1 150w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="51779" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/welcome-to-your-vuejs-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app.png" data-orig-size="730,729" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="welcome-to-your-vuejs-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app-300x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app.png" decoding="async" loading="lazy" class="aligncenter wp-image-51779 size-full" src="../Images/48cb4ef5438a07eef538c2dc0523c482.png" alt="Vue welcome screen" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app-300x300.png 300w, https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app-150x150.png?crop=1 150w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/welcome-to-your-vuejs-app.png"/></noscript>
<h2 id="setting-up-auth0">正在设置 Auth0</h2>
<p>我们现在将安装<a href="https://www.npmjs.com/package/auth0-js" target="_blank" rel="noopener"> Auth0 的库</a>来处理客户端的认证:</p>
<pre>npm i auth0-js
</pre>
<p>要开始使用 Auth0 ，您需要注册，创建一个新租户，并选择您所在的地区。然后，您可以继续执行以下步骤:</p>
<ol>
<li>在仪表盘上，点击<strong>应用</strong>。<br/>T3<noscript>T5</noscript></li>
<li>点击<strong>创建应用</strong>。<br/>T3<noscript>T5</noscript></li>
<li>该模式应该会弹出，您应该选择<strong>单页面 Web 应用程序</strong>。<br/>T3<noscript>T5</noscript></li>
<li>然后，我们可以从选项中选择 Vue。<br/><img data-attachment-id="51784" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/select-vue-auth0/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0.png" data-orig-size="730,369" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="select-vue-auth0" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0.png" decoding="async" class="aligncenter size-full wp-image-51784 jetpack-lazy-image" src="../Images/aab3c07dd51cdfc82ab8c0beb96e43d3.png" alt="Select Vue in Auth0" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0-300x152.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="51784" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/select-vue-auth0/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0.png" data-orig-size="730,369" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="select-vue-auth0" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0-300x152.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-51784" src="../Images/aab3c07dd51cdfc82ab8c0beb96e43d3.png" alt="Select Vue in Auth0" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0-300x152.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/select-vue-auth0.png"/>T4】</noscript></li>
</ol>
<h2>配置您的 Auth0 设置</h2>
<p>现在您已经创建了应用程序，是时候配置设置了。</p>
<p><img data-attachment-id="51785" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/configuring-auth0-settings/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings.png" data-orig-size="730,353" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="configuring-auth0-settings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings-300x145.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings.png" decoding="async" class="aligncenter size-full wp-image-51785 jetpack-lazy-image" src="../Images/6ffca1637390e33c2328199afe4046b9.png" alt="Configuring your Auth0 Settings" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings-300x145.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="51785" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/configuring-auth0-settings/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings.png" data-orig-size="730,353" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="configuring-auth0-settings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings-300x145.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-51785" src="../Images/6ffca1637390e33c2328199afe4046b9.png" alt="Configuring your Auth0 Settings" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings-300x145.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/configuring-auth0-settings.png"/></noscript>
<p>您将在<strong>基本信息</strong>部分看到您的域名和客户端 ID。我们稍后会回到这个话题。首先，我们需要将这些值存储为环境变量，以便我们的应用程序能够工作。</p>
<p>在应用程序 URL 部分，我们需要定义这些值:</p>
<ul>
<li>允许的回拨 URL</li>
<li>允许的注销 URL</li>
<li>允许的网站来源</li>
<li>允许原产地(CORS)</li>
</ul>
<p>注意，您需要使用自己的本地 URL 来本地测试您的应用程序。</p>
<h3>允许的回拨 URL</h3>
<p>在用户成功登录后，您只需使用这些 URL 来重定向用户。我们将使用本地 URL:</p>
<pre>http://localhost:8080/authfinalize
</pre>
<p>我将在本文后面解释为什么我们将用户发送到<code>authfinalize</code>路线。</p>
<h3>允许的注销 URL</h3>
<p>这些是 Auth0 可以用来在用户注销后重定向用户的 URL。</p>
<pre>http://localhost:8080
</pre>
<p><img data-attachment-id="51790" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/allowed-logout-urls-auth0/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0.png" data-orig-size="730,313" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="allowed-logout-URLs-auth0" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0-300x129.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0.png" decoding="async" class="aligncenter size-full wp-image-51790 jetpack-lazy-image" src="../Images/523e90539c20bcef26dc3913cd083fb8.png" alt="Allowed logout URLs screen in Auth0" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0-300x129.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="51790" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/allowed-logout-urls-auth0/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0.png" data-orig-size="730,313" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="allowed-logout-URLs-auth0" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0-300x129.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-51790" src="../Images/523e90539c20bcef26dc3913cd083fb8.png" alt="Allowed logout URLs screen in Auth0" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0-300x129.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-logout-URLs-auth0.png"/></noscript>
<h3>允许的网站来源</h3>
<p>这些是唯一允许向 Auth0 发送请求的 URL。您需要添加此 URL 以防止跨源资源共享(CORS)错误。现在，我们将添加本地 URL:</p>
<pre>http://localhost:8080
</pre>
<p><img data-attachment-id="51792" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/allowed-web-origins-auth0/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0.png" data-orig-size="730,85" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="allowed-web-origins-auth0" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0-300x35.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0.png" decoding="async" class="aligncenter size-full wp-image-51792 jetpack-lazy-image" src="../Images/ce5d73d199c3b430df9b61d10b00eee4.png" alt="Allowed web origins in Auth0" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0-300x35.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="51792" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/allowed-web-origins-auth0/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0.png" data-orig-size="730,85" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="allowed-web-origins-auth0" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0-300x35.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-51792" src="../Images/ce5d73d199c3b430df9b61d10b00eee4.png" alt="Allowed web origins in Auth0" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0-300x35.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/allowed-web-origins-auth0.png"/></noscript>
<h3>允许原产地(CORS)</h3>
<p>这些是唯一允许向服务器发出任何请求的 URL。</p>
<pre>http://localhost:8080
</pre>
<p>在这里，我们必须以秒为单位设置我们的<code>id_token</code>到期时间。对于此示例站点，我们将使用 36，000 秒(10 小时):</p>
<p><img data-attachment-id="51793" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/sample-site-id-token-expiration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration.png" data-orig-size="730,145" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="sample-site-id-token-expiration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration-300x60.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration.png" decoding="async" class="aligncenter size-full wp-image-51793 jetpack-lazy-image" src="../Images/5d394a22c46fc73743eb133cec8103f9.png" alt="id_token expiration set in sample site" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration-300x60.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="51793" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/sample-site-id-token-expiration/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration.png" data-orig-size="730,145" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="sample-site-id-token-expiration" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration-300x60.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-51793" src="../Images/5d394a22c46fc73743eb133cec8103f9.png" alt="id_token expiration set in sample site" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration-300x60.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/sample-site-id-token-expiration.png"/></noscript>
<p>现在，让我们回到我们的项目文件夹，为我们的本地开发创建一个<code>.env</code>文件。添加这些环境变量:</p>
<pre>VUE_APP_AUTH0_CONFIG_RESPONSETYPE=token id_token
VUE_APP_AUTH0_CONFIG_SCOPE=openid profile email
VUE_APP_AUTH0_CONFIG_DOMAIN={{ Domain }}
VUE_APP_AUTH0_CONFIG_DOMAINURL=https://{{ Domain }}
VUE_APP_AUTH0_CONFIG_CLIENTID={{ ClientID }}
VUE_APP_DOMAINURL={{Local host URL}}
VUE_APP_DOMAINURL_REDIRECT={{ Allowed Callback URL }}
VUE_APP_EXPIRY=36000
</pre>
<p>这些变量将在我们的项目中使用。认证后将返回<code>access token</code>和<code>id_token</code>作为响应，用于验证被认证用户的身份。</p>
<p><code>Domain</code>、<code>ClientID</code>、<code>Allowed Callback URL</code>都可以在<strong>设置</strong>页面找到。我们的<code>VUE_APP_AUTH0_CONFIG_DOMAIN</code>和<code>VUE_APP_AUTH0_CONFIG_DOMAINURL</code>唯一的区别就是我们需要在域名前面加上<code>https://</code>。Vue 中的所有环境变量都必须有前缀<code>VUE_APP</code>。</p>
<h2>设置 Vuex</h2>
<p>我们将 Vuex 视为应用程序的唯一真实来源，因此它将用于在应用程序中初始化 Auth0。我们还将使用它来处理应用程序中的数据。</p>
<p>首先，我们需要将<code>auth0-js</code>导入我们的应用程序，并设置我们的<code>state</code>。在我们的<code>state</code>中，我们将初始化 Auth0 并从上面讨论的环境变量中添加我们的应用程序细节。</p>
<pre>import Vuex from "vuex";
import Vue from "vue";
import actions from "./auth/actions";
import getters from "./auth/getters";
import mutations from "./auth/mutations";
import auth0 from "auth0-js";
Vue.use(Vuex);
const state = () =&gt; ({
  userIsAuthorized: false,
  auth0: new auth0.WebAuth({
    domain: process.env.VUE_APP_AUTH0_CONFIG_DOMAIN,
    clientID: process.env.VUE_APP_AUTH0_CONFIG_CLIENTID,
    redirectUri: process.env.VUE_APP_DOMAINURL_REDIRECT,
    responseType: process.env.VUE_APP_AUTH0_CONFIG_RESPONSETYPE,
    scope: process.env.VUE_APP_AUTH0_CONFIG_SCOPE,
  }),
});
export default new Vuex.Store({
  namespaced: true,
  state,
  actions,
  getters,
  mutations,
});
</pre>
<p>我们将<code>userIsAuthorized</code>加到我们的<code>state</code>上来接受<code>boolean</code>。我们将使用它作为一个指示器来了解用户是否登录。请注意，在首次加载应用程序时，这将注册为 false。</p>
<h2>Vuex 动作</h2>
<h3><code>login</code></h3>
<p>使用 Auth0 对用户进行身份验证包括将用户发送到应用程序外部的 Auth0 门户。之后，我们将它们返回到我们的应用程序中。这个登录动作将在我们的组件中被调用来触发这个重定向。</p>
<pre>//login.js

const login = ({state}) =&gt; {
    state.auth0.authorize()

}
export default login;</pre>
<pre>//logging in within the component

&lt;template&gt;
  &lt;div class="home"&gt;
    &lt;button @click="login"&gt;Login&lt;/button&gt;
    &lt;button @click="signup"&gt;Signup&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;

export default {
  name: "Home",
  methods: {
    login() {
      this.$store.dispatch('login')
    },
    signup() {
      this.$store.dispatch('login')
    }
  }
};
&lt;/script&gt;
</pre>
<h3><code>authHandleAuthentication</code></h3>
<p>当用户返回到我们的应用程序时，<code>access token</code>和<code>id_token</code>作为响应被发送给我们。此操作设置令牌的到期时间，然后在将用户发送到安全页面或仪表板之前，在本地存储<code>access token</code>、<code>id_token</code>和到期时间。</p>
<p>该函数使用来自我们的<code>state</code>中的 Auth0 对象的<code>parseHash</code>来检查用户是否拥有<code>access token</code>和<code>id_token</code>，然后在将用户发送到仪表板之前将它们保存在本地。另一方面，如果有错误，用户会看到一个错误并被重定向回主页。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<pre>//auth0HandleAuthentication.js

import router from '../../../router/index'
const auth0HandleAuthentication = (context) =&gt; {
  context.state.auth0.parseHash((err, authResult) =&gt; {
    if (authResult &amp;&amp; authResult.accessToken &amp;&amp; authResult.idToken) {
      let expiresAt = JSON.stringify(
        (process.env.VUE_APP_EXPIRY * 1000) + new Date().getTime()
      );
      // save the tokens locally
      localStorage.setItem("access_token", authResult.accessToken);
      localStorage.setItem("id_token", authResult.idToken);
      localStorage.setItem("expires_at", expiresAt);
      router.push({ name : "dashboard"})
    }
    else if (err) {
      alert("There's is an issue with signing up", err)
      router.replace({ name: "home" })
    }
  })
};
export default auth0HandleAuthentication;
</pre>
<h3><code>logout</code></h3>
<p>我们使用<code>logout</code>按钮注销用户。用户需要回到 Auth0 的站点，才能完全退出我们的应用程序。然后，它使用我们之前添加的<code>Allowed Logout URLs</code>将它们发送回我们的应用程序。</p>
<pre>//logout.js

const logout = () =&gt; {
  localStorage.removeItem("access_token");
  localStorage.removeItem("id_token");
  localStorage.removeItem("expires_at");
  window.location.href =
    process.env.VUE_APP_AUTH0_CONFIG_DOMAINURL +
    "/v2/logout?returnTo=" +
    process.env.VUE_APP_DOMAINURL +
    "/&amp;client_id=" +
    process.env.VUE_APP_AUTH0_CONFIG_CLIENTID;
};
export default logout;
</pre>
<pre>//logging out on the dashboard page

&lt;template&gt;
  &lt;div class="hello"&gt;
    &lt;h2&gt;Here's the dashboard&lt;/h2&gt;
    &lt;button @click="logout"&gt;Logout&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'Dashboard',
  methods: {
    logout() {
      this.$store.dispatch('logout')
    }
  }
}
&lt;/script&gt;
</pre>
<h2>Vuex 突变</h2>
<p>在我们的状态中，我们将只有一个突变用于触发我们的<code>userIsAuthorized</code>指示器。</p>
<pre> const setUserIsAuthenticated = (state, replacement) =&gt; {
    state.userIsAuthorized = replacement;
}
</pre>
<h3><code>vue-router</code></h3>
<p>这是根据我们的路由保护中的特定条件触发操作和路由用户的地方。</p>
<p>用户流是直接的:</p>
<ol>
<li>用户尝试登录</li>
<li>我们将用户发送到 Auth0 登录门户进行身份验证</li>
<li>然后用<code>access token</code>、<code>id_token</code>等将它们发送回我们的应用程序(特别是<code>/authfinalize</code>页面)。</li>
<li>我们将这些令牌与到期时间一起保存在本地，并将用户重定向到安全页面</li>
</ol>
<p>在设置我们的路线时，我们将为每条路线添加<code>meta</code>对象。这将允许我们使用<code>requiresGuest</code>识别对每个人开放的路线，以及使用<code>requiresAuth</code>识别受保护的路线。</p>
<p>这些<code>meta</code>属性可以在路线位置和导航护栏上访问。</p>
<pre>import Vue from "vue";
import VueRouter from "vue-router";
import Store from "../store"
import Home from "../views/Home.vue";
import Authfinalize from "../views/Authfinalize"
import Dashboard from "../views/Dashboard"
Vue.use(VueRouter);
const routes = [
  {
    path: "/",
    name: "home",
    component: Home,
    meta : {
      requiresGuest : true,
    }
  },
  {
    path: "/dashboard",
    name: "dashboard",
    component: Dashboard,
    meta : {
      requiresAuth : true
    }
  },
  {
    path: "/authfinalize",
    name: "Authfinalize",
    component: Authfinalize,
  },
];
const router = new VueRouter({
  mode: "history",
  base: process.env.BASE_URL,
  routes,
});
router.beforeEach((to, from, next) =&gt; {
  const requiresAuth = to.matched.some((x) =&gt; x.meta.requiresAuth);
  const requiresGuest = to.matched.some((x) =&gt; x.meta.requiresGuest);
  const auth0callback = to.matched.some(record=&gt;record.path == "/authfinalize");
  let routerAuthCheck = false;  
  if(auth0callback) {
    Store.dispatch('auth0HandleAuthentication');
    next(false);
  }
  if( localStorage.getItem('access_token') &amp;&amp; localStorage.getItem('id_token') &amp;&amp; localStorage.getItem('expires_at') ){
    let expiresAt = JSON.parse(localStorage.getItem('expires_at'));
    routerAuthCheck = new Date().getTime() &lt; expiresAt;  
  }
  Store.commit('setUserIsAuthenticated', routerAuthCheck); 
  if (requiresAuth) {  
    if(routerAuthCheck){
      next();
    }
    else{
      Store.dispatch('logout');
    }
  }

  if (requiresGuest &amp;&amp; routerAuthCheck) {  
      next({ name: "dashboard" }); 
  } 
  next(); 
})

export default router;
</pre>
<p>在我们的<code>beforeEach</code> router guard 中，我们应该检查预期路由具有哪个<code>meta-object</code>,并相应地将其分配给一个<code>requiresAuth</code>或<code>requiresGuest</code>变量。如果我们导航到<code>/authfinalize</code>路径，我们也可以创建一个<code>auth0callback</code>变量。</p>
<p>然后，我们创建一个名为<code>routerAuthCheck</code>的变量，并将其赋给<code>false</code>。我们将使用这个变量来触发突变，这将改变我们之前谈到的 Vuex 中的指标。</p>
<p>第一个<code>if block</code>检查我们是否正在导航到<code>/authfinalize</code>路线，然后调用<code>auth0HandleAuthentication</code>。请注意，我们将导航到此路由的唯一时间是从 Auth0 重定向回来的时候。</p>
<p>第二个<code>if block</code>检查用户是否被认证，然后它发出一个<code>commit</code>，当用户登录时，它将我们的指示器切换到<code>true</code>，反之亦然。基本上，它检查本地存储以查看令牌和到期日期是否仍然存在。</p>
<p>然后，它进一步检查到期日期是否大于当前时间。<code>routerAuthCheck</code>将反映它是<code>true</code>还是<code>false</code>，然后它将提交到<code>setUserIsAuthenticated</code>突变，这将切换我们的应用程序指示器。</p>
<p>第三个<code>if</code> <code>block</code>检查预定路线是否需要认证(<code>requiresAuth</code>)，然后检查<code>routerAuthCheck</code>是<code>true</code>还是<code>false</code>。如果选择<code>true</code>，用户继续操作仪表板。如果<code>false</code>，用户被注销。</p>
<p>最后一个<code>if block</code>检查认证用户是否正在路由到主页(<code>requiresGuest</code>)。然后，它会自动将它们发送到仪表板。</p>
<h2>部署您的应用</h2>
<p>要部署应用程序，您需要将您的 live URL 添加到前面演示的每个设置中。用逗号分隔每个 URL。</p>
<p><img data-attachment-id="51794" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/deploying-your-app-no-urls/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls.png" data-orig-size="730,341" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="deploying-your-app-no-urls" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls-300x140.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls.png" decoding="async" class="aligncenter size-full wp-image-51794 jetpack-lazy-image" src="../Images/8286bb676a7537e5983c355feeb02c06.png" alt="Deploying your app with one URL" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls-300x140.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="51794" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/deploying-your-app-no-urls/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls.png" data-orig-size="730,341" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="deploying-your-app-no-urls" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls-300x140.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-51794" src="../Images/8286bb676a7537e5983c355feeb02c06.png" alt="Deploying your app with one URL" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls-300x140.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-no-urls.png"/></noscript>
<p><img data-attachment-id="51795" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/deploying-your-app-urls/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls.png" data-orig-size="730,336" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="deploying-your-app-urls" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls.png" decoding="async" class="aligncenter size-full wp-image-51795 jetpack-lazy-image" src="../Images/a3838aeadd967790295632d448f7fa03.png" alt="Deploying your app with multiple URLs" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="51795" data-permalink="https://blog.logrocket.com/handling-authentication-vuejs-using-vuex-vue-router-and-auth0/deploying-your-app-urls/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls.png" data-orig-size="730,336" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="deploying-your-app-urls" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-51795" src="../Images/a3838aeadd967790295632d448f7fa03.png" alt="Deploying your app with multiple URLs" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/deploying-your-app-urls.png"/></noscript>
<p>请记住，您必须创建一个新的<code>.env</code>文件，并根据您用于部署的平台，在您的代码库或您要部署到的平台中设置 live 版本的 URL。</p>
<h2>结论</h2>
<p>虽然还有其他处理认证的方法，但是像 Auth0 这样的工具可以给你时间上的优势，同时你仍然可以确定你的应用程序的安全性。你可以<a href="https://github.com/Atanda1/vue-auth0-sample" target="_blank" rel="noopener">在 GitHub </a>上查看我们的代码库，<a href="https://vue-auth-sample.netlify.app/" target="_blank" rel="noopener">在这里</a>找到演示站点。你也可以从<a href="https://auth0.com/docs/libraries/auth0js" target="_blank" rel="noopener"> Auth0 的文档</a>中了解更多。</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的 Vue 应用</h2><p>调试 Vue.js 应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的 Vue 突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的 DVR，记录你的 Vue 应用程序中发生的一切，包括网络请求、JavaScript 错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex 插件将 Vuex 突变记录到 LogRocket 控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试 Vue 应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>