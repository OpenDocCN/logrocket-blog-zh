<html>
<head>
<title>Build a Slack bot with Slack Machine </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Slack机器构建一个Slack机器人</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/slack-bot-slack-machine/#0001-01-01">https://blog.logrocket.com/slack-bot-slack-machine/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Slack是一个最初设计用于办公场所的信息程序，也已经被个人使用。根据该公司的官方声明，Slack拥有1000万每日用户和超过85，000名付费用户。</p>
<p>多年来，Slack社区一直在构建一个强大的应用程序目录。应用程序集合包含数百到数千个集成，提供了极大的灵活性来提高公司的效率。</p>
<p>Slack Machine是一个健壮的、可扩展的框架，可以帮助您将Slack工作空间发展成一个ChatOps发电站。在本指南中，我们将介绍如何设置Slack机器并实现它的一些特性。</p>
<p>向前跳:</p>

<p>当前松弛机项目文件夹包含一个文件:<code>local_settings.py</code>。该文件将保存备用机器的所有配置设置:</p>
<pre class="language-python hljs">SlackMachine(Project-folder)
|__local_settings.py    
</pre>
<h2 id="generate-tokens-connect-app-slack-machine">生成令牌将我们的应用程序连接到Slack机器</h2>
<p>连接我们的应用程序和Slack机器需要两个令牌:应用程序级令牌和bot令牌。要生成这些令牌，请导航至<a href="https://api.slack.com/apps">https://api.slack.com/apps</a>。在那里，点击<strong>创建一个应用程序。</strong></p>
<p>在弹出的窗口中，从一个应用清单 : <img data-attachment-id="140393" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/from-app-manifest/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest.png" data-orig-size="730,833" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Selecting from an app manifest" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest-263x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest.png" decoding="async" class="aligncenter size-full wp-image-140393 jetpack-lazy-image" src="../Images/d34e567ffc0e21d43815fe24f5664eb8.png" alt="Selecting From An App Manifest" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest-263x300.png 263w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest.png"/>中选择<strong/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140393" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/from-app-manifest/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest.png" data-orig-size="730,833" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Selecting from an app manifest" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest-263x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140393" src="../Images/d34e567ffc0e21d43815fe24f5664eb8.png" alt="Selecting From An App Manifest" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest-263x300.png 263w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/from-app-manifest.png"/></noscript>
<p>选择将要安装Slack bot的Slack工作区。然后，我们需要定义一个清单。清单是指示Slack应用程序如何工作的配置。点击阅读关于<a href="https://api.slack.com/reference/manifests#fields">的更多信息，了解每个字段的含义。将以下代码块添加到清单中:</a></p>
<pre class="language-python hljs">display_information:
  name: Wamaitha Slack Machine
features:
  bot_user:
    display_name: Wamaitha Slack Machine
    always_online: false
oauth_config:
  scopes:
    bot:
    - app_mentions:read
    - channels:history
    - channels:join
    - channels:read
    - chat:write
    - chat:write.public
    - emoji:read
    - groups:history
    - groups:read
    - groups:write
    - im:history
    - im:read
    - im:write
    - mpim:history
    - mpim:read
    - mpim:write
    - pins:read
    - pins:write
    - reactions:read
    - reactions:write
    - users:read
    - users:read.email
    - channels:manage
    - chat:write.customize
    - dnd:read
    - files:read
    - files:write
    - links:read
    - links:write
    - metadata.message:read
    - usergroups:read
    - usergroups:write
    - users.profile:read
    - users:write
settings:
  event_subscriptions:
    bot_events:
    - app_mention
    - channel_archive
    - channel_created
    - channel_deleted
    - channel_id_changed
    - channel_left
    - channel_rename
    - channel_unarchive
    - group_archive
    - group_deleted
    - group_left
    - group_rename
    - group_unarchive
    - member_joined_channel
    - member_left_channel
    - message.channels
    - message.groups
    - message.im
    - message.mpim
    - reaction_added
    - reaction_removed
    - team_join
    - user_change
    - user_profile_changed
    - user_status_changed
  interactivity:
    is_enabled: true
  org_deploy_enabled: false
  socket_mode_enabled: true
  token_rotation_enabled: false</pre>
<p>在<strong>审核总结&amp;创建你的app </strong>弹出窗口，点击<br/>创建:<img data-attachment-id="140400" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/creating-slack-machine-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app.png" data-orig-size="700,601" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating the Slack Machine app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app-300x258.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app.png" decoding="async" class="aligncenter size-full wp-image-140400 jetpack-lazy-image" src="../Images/8017ac011666f20112cd7efaec52442a.png" alt="Creating The Slack Machine App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app.png 700w, https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app-300x258.png 300w" data-lazy-sizes="(max-width: 700px) 100vw, 700px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140400" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/creating-slack-machine-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app.png" data-orig-size="700,601" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating the Slack Machine app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app-300x258.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140400" src="../Images/8017ac011666f20112cd7efaec52442a.png" alt="Creating The Slack Machine App" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app.png 700w, https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app-300x258.png 300w" sizes="(max-width: 700px) 100vw, 700px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-machine-app.png"/></noscript>
<p>创建完成后，在<strong>基本信息</strong>设置选项卡中，点击<strong>安装到工作区。</strong>允许对Slack应用的权限。</p>
<p>我们需要的第一个令牌是SLACK_BOT_TOKEN <em>。</em>导航到<strong> OAuth &amp;权限</strong>，将<strong> Bot用户OAuth令牌</strong>复制到<code>local_settings.py</code> : <img data-attachment-id="140409" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-bot-oauth-token/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token.png" data-orig-size="700,497" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack Bot OAuth Token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token-300x213.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token.png" decoding="async" class="aligncenter size-full wp-image-140409 jetpack-lazy-image" src="../Images/4257856c062a9b69f18eb0ca89880715.png" alt="Slack Bot OAuth Token" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token.png 700w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token-300x213.png 300w" data-lazy-sizes="(max-width: 700px) 100vw, 700px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140409" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-bot-oauth-token/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token.png" data-orig-size="700,497" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack Bot OAuth Token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token-300x213.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140409" src="../Images/4257856c062a9b69f18eb0ca89880715.png" alt="Slack Bot OAuth Token" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token.png 700w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token-300x213.png 300w" sizes="(max-width: 700px) 100vw, 700px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-oauth-token.png"/></noscript>
<p>要生成应用级令牌，请导航至<strong>基本信息</strong>，向下滚动至<strong>应用级令牌</strong>，并点击<strong>生成令牌和范围。</strong></p>
<p>在弹出窗口中，给令牌命名，点击<strong>范围</strong>下拉菜单，添加两个范围:<code>connections:write</code>和<code>authorizations:read</code>:<br/>T5】</p><noscript><img data-lazy-fallback="1" data-attachment-id="140548" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/adding-scopes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/adding-scopes.png" data-orig-size="600,550" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding scopes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/adding-scopes-300x275.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/adding-scopes.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140548" src="../Images/19b8deeeb009ce7b1eee706e86f3a6c7.png" alt="Adding Scopes" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/adding-scopes.png 600w, https://blog.logrocket.com/wp-content/uploads/2022/11/adding-scopes-300x275.png 300w" sizes="(max-width: 600px) 100vw, 600px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/adding-scopes.png"/></noscript>
<p>一旦选择了两个示波器，点击<strong>生成</strong>。弹出的应该如下图:<br/>T3</p><noscript><img data-lazy-fallback="1" data-attachment-id="140551" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/generating-slack-app-token/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/generating-slack-app-token.png" data-orig-size="500,548" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Generating Slack app token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/generating-slack-app-token-274x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/generating-slack-app-token.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140551" src="../Images/b88f44310e2d43dd019e21a9ee6a01d6.png" alt="Generating Slack App Token" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/generating-slack-app-token.png 500w, https://blog.logrocket.com/wp-content/uploads/2022/11/generating-slack-app-token-274x300.png 274w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/generating-slack-app-token.png"/></noscript>
<p>复制生成的令牌并将其作为SLACK_APP_TOKEN保存到<code>local_settings.py</code>文件<br/><code>local_settings.py</code>文件现在应该包含以下内容:</p>
<pre class="language-python hljs">SLACK_BOT_TOKEN="add_the_token_here"
SLACK_APP_TOKEN="add_token_here"</pre>
<p>如果一切顺利，应用程序级令牌选项卡应该如下所示:</p>
<p><img data-attachment-id="140557" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/finalized-app-level-tokens-tab/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab.png" data-orig-size="600,369" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Finalized app-level tokens tab" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab-300x185.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab.png" decoding="async" class="aligncenter size-full wp-image-140557 jetpack-lazy-image" src="../Images/32b744420c3871bd026ee70cb2e4ae1d.png" alt="Finalized App Level Tokens Tab" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab.png 600w, https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab-300x185.png 300w" data-lazy-sizes="(max-width: 600px) 100vw, 600px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140557" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/finalized-app-level-tokens-tab/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab.png" data-orig-size="600,369" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Finalized app-level tokens tab" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab-300x185.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140557" src="../Images/32b744420c3871bd026ee70cb2e4ae1d.png" alt="Finalized App Level Tokens Tab" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab.png 600w, https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab-300x185.png 300w" sizes="(max-width: 600px) 100vw, 600px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/finalized-app-level-tokens-tab.png"/></noscript>
<h2 id="configuring-slack">配置时差</h2>
<p>现在，前往Slack的工作区。您应该会在“应用程序”选项卡下找到添加的Slack机器:</p>
<p><img data-attachment-id="140560" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-workspace-apps-tab/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab.png" data-orig-size="500,518" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack workspace Apps tab" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab-290x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab.png" decoding="async" class="aligncenter size-full wp-image-140560 jetpack-lazy-image" src="../Images/4195bb3623320499efb6b2c66edf59b3.png" alt="Slack Workspace Apps Tab" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab.png 500w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab-290x300.png 290w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140560" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-workspace-apps-tab/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab.png" data-orig-size="500,518" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack workspace Apps tab" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab-290x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140560" src="../Images/4195bb3623320499efb6b2c66edf59b3.png" alt="Slack Workspace Apps Tab" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab.png 500w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab-290x300.png 290w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-workspace-apps-tab.png"/></noscript>
<p>建议在虚拟环境中使用Slack机器。虚拟环境排除了应用程序使用的依赖关系，而不会与系统上全局安装的依赖关系发生冲突。</p>
<h2 id="creating-virtual-environment-python">用Python创建虚拟环境</h2>
<p>我们将使用<code><a href="https://docs.python.org/3/tutorial/venv.html">venv</a></code> <a href="https://docs.python.org/3/tutorial/venv.html"> Python模块</a>来创建一个虚拟环境。该命令遵循以下结构:</p>
<pre class="language-python hljs">python -m venv name_of_environment</pre>
<p>在这种情况下，我们的虚拟环境名称将是<code>venv</code>。我们使用下面的命令创建它:</p>
<pre class="language-python hljs">python -m venv venv</pre>
<p><i>注意</i>，如果您安装了多个版本的Python，您可能需要指定应该使用哪个版本的Python<code>venv</code>。关于这个的更多信息可以在<a href="https://docs.python.org/3/library/venv.html">文档</a>中找到。</p>
<p>此时，项目文件夹结构变为:</p>
<pre class="language-python hljs">SlackMachine(Project-folder)
      |__local_settings.py    
      |__venv</pre>
<p>要激活虚拟环境，您需要运行以下命令。</p>
<p>在Windows上，运行:</p>
<pre class="language-batch hljs">venv\Scripts\activate.bat</pre>
<p><img data-attachment-id="140562" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/activating-virtual-environment-windows/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows.png" data-orig-size="500,153" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Activating the virtual environment for Windows" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows-300x92.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows.png" decoding="async" class="aligncenter size-full wp-image-140562 jetpack-lazy-image" src="../Images/5552f71e40e54b05313ecd732484fe5a.png" alt="Activating The Virtual Environment For Windows" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows.png 500w, https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows-300x92.png 300w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140562" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/activating-virtual-environment-windows/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows.png" data-orig-size="500,153" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Activating the virtual environment for Windows" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows-300x92.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140562" src="../Images/5552f71e40e54b05313ecd732484fe5a.png" alt="Activating The Virtual Environment For Windows" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows.png 500w, https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows-300x92.png 300w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/activating-virtual-environment-windows.png"/></noscript>
<p>在Linux和macOS上，运行:</p>
<pre class="language-python hljs">source tutorial-env/bin/activate</pre>
<h2 id="interacting-with-slack-machine">与松弛的机器交互</h2>
<p>现在，我们将使用<code>pip</code>安装松弛机模块。该模块允许我们与Python中的Slack API进行交互。</p>
<p>使用以下工具安装松弛机器:</p>
<pre class="language-python hljs">pip install slack-machine</pre>
<p>使用Slack机器在根文件夹上运行bot，如下所示:</p>
<p><img data-attachment-id="140589" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/running-bot-root-folder-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1.png" data-orig-size="600,253" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running the bot on the root folder" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1-300x127.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1.png" decoding="async" class="aligncenter size-full wp-image-140589 jetpack-lazy-image" src="../Images/f3ef9ed920dfea6656833eb186452c33.png" alt="Running The Bot On The Root Folder" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1.png 600w, https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1-300x127.png 300w" data-lazy-sizes="(max-width: 600px) 100vw, 600px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140589" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/running-bot-root-folder-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1.png" data-orig-size="600,253" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running the bot on the root folder" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1-300x127.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140589" src="../Images/f3ef9ed920dfea6656833eb186452c33.png" alt="Running The Bot On The Root Folder" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1.png 600w, https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1-300x127.png 300w" sizes="(max-width: 600px) 100vw, 600px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-1.png"/></noscript>
<p>一旦连接成功，返回Slack。右键点击Slack Machine app，点击<strong>查看app详情</strong>:</p>
<p><img data-attachment-id="140570" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/view-app-details/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details.png" data-orig-size="431,417" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="View app details" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details-300x290.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details.png" decoding="async" class="aligncenter size-full wp-image-140570 jetpack-lazy-image" src="../Images/72f55cb2f4fb46c0403ea08c6a2663f7.png" alt="View App Details" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details.png 431w, https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details-300x290.png 300w" data-lazy-sizes="(max-width: 431px) 100vw, 431px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140570" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/view-app-details/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details.png" data-orig-size="431,417" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="View app details" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details-300x290.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140570" src="../Images/72f55cb2f4fb46c0403ea08c6a2663f7.png" alt="View App Details" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details.png 431w, https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details-300x290.png 300w" sizes="(max-width: 431px) 100vw, 431px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/view-app-details.png"/></noscript>
<p>在弹出窗口中，将应用程序添加到频道。</p>
<p>您可以将其添加到您选择的任何频道。对于这个例子，我将它添加到#slack-machine通道。导航到该频道并向机器人发送问候消息:</p>
<p><img data-attachment-id="140580" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-bot-hello-message/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message.png" data-orig-size="600,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack bot hello message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message-300x200.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message.png" decoding="async" class="aligncenter size-full wp-image-140580 jetpack-lazy-image" src="../Images/cb9a83da22add4bede7df3fcaab694a8.png" alt="Slack Bot Hello Message" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message.png 600w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message-300x200.png 300w" data-lazy-sizes="(max-width: 600px) 100vw, 600px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140580" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-bot-hello-message/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message.png" data-orig-size="600,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack bot hello message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message-300x200.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140580" src="../Images/cb9a83da22add4bede7df3fcaab694a8.png" alt="Slack Bot Hello Message" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message.png 600w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message-300x200.png 300w" sizes="(max-width: 600px) 100vw, 600px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-hello-message.png"/></noscript>
<p>默认情况下，Slack机器加载HelloPlugin和PingPongPlugin。当机器人被问候时，HelloPlugin以“你好”或“嗨”作为回应。无论提及与否，PingPongPlugin都以“ping”或“pong”响应。</p>
<h2 id="building-custom-plugins">构建定制插件</h2>
<p>由于Slack机器的灵活性，我们可以构建自己的定制插件。为此，我们需要创建一个插件包。创建一个新的插件文件夹，并在其中创建一个<code>customPlugin.py</code>文件。</p>
<p>更新后的项目文件夹结构如下所示:</p>
<pre class="language-python hljs">SlackMachine(Project-folder)
      |__local_settings.py    
      |__venv
      |__plugins
           |__customPlugin.py

</pre>
<p>在<code>customPlugin.py</code>中，我们创建了一个包含所有自定义插件功能的类。我们的第一个功能是指示Slack应用程序生成一个爸爸笑话。完整的代码是:</p>
<pre class="language-python hljs">from machine.plugins.base import MachineBasePlugin
from machine.plugins.decorators import respond_to
import requests
import json

class OurCustomPluginClass(MachineBasePlugin):
    """
    Custom plugin class for interacting with the slack-machine
    """

    # tells a dad joke
    @respond_to(r"^Make me laugh")
    async def dad_jokes(self, msg):
        """
        Returns a dad joke and replies the joke to the user
        """
        random_dad_joke = requests.get("https://icanhazdadjoke.com/",
                                       headers={"Accept": "application/json"})
        random_dad_joke = json.loads(random_dad_joke.text)["joke"]
       
        await msg.reply(random_dad_joke)</pre>
<p><code>OurCustomPluginClass</code>从松弛的机器上伸出<code>MachineBasePlugin</code>。我们的<code>dad_joke</code>函数有<code>respond_to</code>装饰器。<code>respond_to</code>装饰器作用于提到Slack bot的消息，将特定的关键字作为正则表达式传递给装饰器。</p>
<p><code>requests</code>模块将向<code>dad_joke</code> API发出一个HTTP请求。JSON模块随Python一起安装，用于将API响应转换成JSON格式。</p>
<p>可以在终端上使用<code>pip</code>安装<code>requests</code>库:</p>
<pre class="language-python hljs">pip install requests</pre>
<p>定制插件需要包含在<code>local_settings.py</code>中来运行Slack机器。</p>
<p>在<code>local_settings.py</code>中，添加如下所示的代码:</p>
<pre class="language-python hljs">SLACK_APP_TOKEN = "xapp-"
SLACK_BOT_TOKEN = "xoxb-"

PLUGINS = ["plugins.customPlugin.OurCustomPluginClass"]</pre>
<p>然后在根文件夹中的终端上重新运行Slack Machine:</p>
<p><img data-attachment-id="140567" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/running-bot-root-folder/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder.png" data-orig-size="730,179" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running the bot on Slack Machine’s root folder" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-300x74.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder.png" decoding="async" class="aligncenter size-full wp-image-140567 jetpack-lazy-image" src="../Images/3607d8c9844f2aea4bdf78e8d862a528.png" alt="Running The Bot On Slack Machine's Root Folder" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-300x74.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140567" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/running-bot-root-folder/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder.png" data-orig-size="730,179" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Running the bot on Slack Machine’s root folder" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-300x74.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140567" src="../Images/3607d8c9844f2aea4bdf78e8d862a528.png" alt="Running The Bot On Slack Machine's Root Folder" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder-300x74.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/running-bot-root-folder.png"/></noscript>
<p>输出应该显示插件类已经被加载。</p>
<p><code>respond_to</code>装饰器要求用户用指定的关键字在Slack上提及机器人。在我们的例子中，我们需要提到机器人，然后用“逗我笑”来触发<code>dad_joke</code>函数:</p>
<p><img data-attachment-id="140592" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-bot-dad-joke-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function.png" data-orig-size="600,294" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack bot dad joke function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function.png" decoding="async" class="aligncenter size-full wp-image-140592 jetpack-lazy-image" src="../Images/e1b54e2874de7d15cb4cbaf0b4880d53.png" alt="Slack Bot Dad Joke Function" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function.png 600w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function-300x147.png 300w" data-lazy-sizes="(max-width: 600px) 100vw, 600px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140592" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-bot-dad-joke-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function.png" data-orig-size="600,294" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack bot dad joke function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140592" src="../Images/e1b54e2874de7d15cb4cbaf0b4880d53.png" alt="Slack Bot Dad Joke Function" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function.png 600w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function-300x147.png 300w" sizes="(max-width: 600px) 100vw, 600px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-bot-dad-joke-function.png"/></noscript>
<p><code>respond_to</code>装饰器也可以用来发出定制事件。事件是一种在插件之间交换数据或公开其他插件可以使用的API端点的方式。使用<code>self.emit()</code>发出事件。我们的自定义事件将收集用户电子邮件，并将其发送到电子邮件通道。</p>
<p>首先，创建一个电子邮件通道:#注册-电子邮件:</p>
<p><img data-attachment-id="140595" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/creating-slack-email-channel/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel.png" data-orig-size="700,543" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating Slack email channel" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel-300x233.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel.png" decoding="async" class="aligncenter size-full wp-image-140595 jetpack-lazy-image" src="../Images/aa3da16d57a4813dbde3ef467cfd4aa6.png" alt="Creating Slack Email Channel" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel.png 700w, https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel-300x233.png 300w" data-lazy-sizes="(max-width: 700px) 100vw, 700px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140595" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/creating-slack-email-channel/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel.png" data-orig-size="700,543" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creating Slack email channel" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel-300x233.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140595" src="../Images/aa3da16d57a4813dbde3ef467cfd4aa6.png" alt="Creating Slack Email Channel" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel.png 700w, https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel-300x233.png 300w" sizes="(max-width: 700px) 100vw, 700px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/creating-slack-email-channel.png"/></noscript>
<p>收集邮件的代码如下所示:</p>
<pre class="language-python hljs">from machine.plugins.base import MachineBasePlugin
from machine.plugins.decorators import respond_to, on, 
import requests
import json
import re


class OurCustomPluginClass(MachineBasePlugin):
   """
   Custom plugin class for interacting with the slack-machine
   """


   @respond_to(r"register (?P&lt;email&gt;.*)")
   async def register_emails(self, msg, email):
       """
       Collect registration email from user
       """

       email = email.split("|")[1][:-1]
       email_regex = "^[a-z0-9]+[\._]?[a-z0-9]+[@]\w+[.]\w{2,3}$"
       user = msg.at_sender
       if re.search(email_regex, email):
           self.emit('new_registration', email=email, user=user)
       else:
           await msg.reply_dm(f'Hey {user}, your registration email address {email} is                invalid.')

   @on("new_registration")
   async def collect_emails(self, **kwargs):
       """
         Listen for new emails
      """

       await self.say("registration-emails", f"{kwargs['user']} - {kwargs['email']}")
                      ]}")</pre>
<p><code>register_emails</code>函数发出一个事件，将电子邮件转发到#registration-emails通道。该事件还发出用户的ID和特定的电子邮件作为参数的一部分:<br/> <img data-attachment-id="140601" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-register-emails-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function.png" data-orig-size="730,157" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack register emails function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function-300x65.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function.png" decoding="async" class="aligncenter size-full wp-image-140601 jetpack-lazy-image" src="../Images/c47c906114f93fd98c0b13fc3b0fa259.png" alt="Slack Register Emails Function" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function-300x65.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140601" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-register-emails-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function.png" data-orig-size="730,157" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack register emails function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function-300x65.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140601" src="../Images/c47c906114f93fd98c0b13fc3b0fa259.png" alt="Slack Register Emails Function" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function-300x65.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-register-emails-function.png"/></noscript>
<p><img data-attachment-id="140604" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/event-emitted-register-emails-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function.png" data-orig-size="730,170" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Event emitted by register emails function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function-300x70.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function.png" decoding="async" class="aligncenter size-full wp-image-140604 jetpack-lazy-image" src="../Images/e149228c897dc1cdc0872c6366df4e05.png" alt="Event Emitted By Register Emails Function" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function-300x70.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140604" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/event-emitted-register-emails-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function.png" data-orig-size="730,170" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Event emitted by register emails function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function-300x70.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140604" src="../Images/e149228c897dc1cdc0872c6366df4e05.png" alt="Event Emitted By Register Emails Function" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function-300x70.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/event-emitted-register-emails-function.png"/></noscript>
<p>发出的事件有一个惟一的名称，在我们的例子中是<code>new-registrations</code>。为了监听<code>new-registrations</code>事件，我们需要<code>@on</code>装饰器。</p>
<p>装饰者需要注意事件名称。当发出<code>new-registrations</code>事件时，触发<code>collect_emails</code>功能。该功能将用户名和电子邮件转发到#registration-emails频道。</p>
<p>如果用户提供了无效的电子邮件地址，Slack应用程序会直接向用户发送一条消息:</p>
<p><img data-attachment-id="140606" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-direct-message/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message.png" data-orig-size="730,58" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack direct message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message-300x24.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message.png" decoding="async" class="aligncenter size-full wp-image-140606 jetpack-lazy-image" src="../Images/3c443e80c11eb519f2e630762794ebbc.png" alt="Slack Direct Message" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message-300x24.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140606" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-direct-message/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message.png" data-orig-size="730,58" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack direct message" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message-300x24.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140606" src="../Images/3c443e80c11eb519f2e630762794ebbc.png" alt="Slack Direct Message" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message-300x24.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-direct-message.png"/></noscript>
<h2 id="slack-machine-storage-capabilities">闲置机器存储能力</h2>
<p>松弛机器还提供存储功能。数据存储在内存中的键值对中，或者使用外部数据库。为了演示内存中的功能，我们将生成令牌，并让用户随意检索和删除它们。</p>
<p>这方面的代码如下所示:</p>
<pre class="language-python hljs">from machine.plugins.base import MachineBasePlugin
from machine.plugins.decorators import respond_to, on
import requests
import json
import re
import random


class OurCustomPluginClass(MachineBasePlugin):
   """
   Custom plugin class for interacting with the slack-machine
   """

   @respond_to(r"generate")
   async def gen_token(self, msg):
       """
       Generate random token
       """
       user = msg.at_sender
       token = random.randint(1, 1000)
       await self.storage.set(user, token)
       await msg.reply_dm(f"Hey {user} your generated token is {token}")

   @respond_to(r"retrieve")
   async def retrieve_token(self, msg):
       """
       Retrieve the stored token
       """
       user = msg.at_sender
       token = await self.storage.get(user)
       if token:21
           await msg.reply_dm(f"Hey {user} your token is {token}")
       else:
           await msg.say("Key not found! Generate a new token")

   @respond_to(r"delete")
   async def delete_token(self, msg):
       """
       delete tokens
       """
       user =msg.at_sender
       await self.storage.delete(user)
       await msg.say(f"data in &lt;{user}&gt; deleted!")</pre>
<p><code>MachineBasePlugin</code>类内置了内存存储功能。仍然使用<code>respond_to</code>装饰器，我们有三个函数:</p>
<ol>
<li><strong> gen_token </strong>:这个函数产生一个1到1000之间的随机令牌。使用<code>set</code>方法将令牌保存到内存数据库中。<code>set</code>方法接受两个参数:键和值。我们将用户的发送者ID设置为密钥，将生成的令牌设置为值:<img data-attachment-id="140630" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-generate-token/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token.png" data-orig-size="500,130" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack generate token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token-300x78.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token.png" decoding="async" class="aligncenter size-full wp-image-140630 jetpack-lazy-image" src="../Images/2db7e095b2b5ec76a59b087296d6005d.png" alt="Slack Generate Token" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token.png 500w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token-300x78.png 300w" data-lazy-sizes="(max-width: 500px) 100vw, 500px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="140630" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-generate-token/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token.png" data-orig-size="500,130" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack generate token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token-300x78.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140630" src="../Images/2db7e095b2b5ec76a59b087296d6005d.png" alt="Slack Generate Token" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token.png 500w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token-300x78.png 300w" sizes="(max-width: 500px) 100vw, 500px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generate-token.png"/></noscript><br/><img data-attachment-id="140634" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-generated-token/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token.png" data-orig-size="498,95" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack generated token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token-300x57.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token.png" decoding="async" class="aligncenter size-full wp-image-140634 jetpack-lazy-image" src="../Images/4a73ac216c28c0a0dbb7fb42fe5cb206.png" alt="Slack Generated Token" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token.png 498w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token-300x57.png 300w" data-lazy-sizes="(max-width: 498px) 100vw, 498px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="140634" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-generated-token/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token.png" data-orig-size="498,95" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack generated token" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token-300x57.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140634" src="../Images/4a73ac216c28c0a0dbb7fb42fe5cb206.png" alt="Slack Generated Token" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token.png 498w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token-300x57.png 300w" sizes="(max-width: 498px) 100vw, 498px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-generated-token.png"/></noscript></li>
<li><strong> retrieve_token </strong>:该函数将检查内存存储中是否有包含用户发送者ID的值。如果密钥存在，则将令牌值的私有直接消息发送给用户。否则，通知用户该键不存在:<img data-attachment-id="140637" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-retrieve-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function.png" data-orig-size="559,88" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack retrieve function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function-300x47.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function.png" decoding="async" class="aligncenter size-full wp-image-140637 jetpack-lazy-image" src="../Images/591db74135c2336cb39dc3be1cc055b0.png" alt="Slack Retrieve Function" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function.png 559w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function-300x47.png 300w" data-lazy-sizes="(max-width: 559px) 100vw, 559px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function.png"/> <noscript> <img data-lazy-fallback="1" data-attachment-id="140637" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-retrieve-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function.png" data-orig-size="559,88" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack retrieve function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function-300x47.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140637" src="../Images/591db74135c2336cb39dc3be1cc055b0.png" alt="Slack Retrieve Function" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function.png 559w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function-300x47.png 300w" sizes="(max-width: 559px) 100vw, 559px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-retrieve-function.png"/> </noscript></li>
<li><strong> delete_token </strong>:该功能删除用户存储的token: <img data-attachment-id="140641" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-delete-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function.png" data-orig-size="700,107" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack delete function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function-300x46.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function.png" decoding="async" class="aligncenter size-full wp-image-140641 jetpack-lazy-image" src="../Images/09011952eb91042a84fb5dab24897f6c.png" alt="Slack Delete Function" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function.png 700w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function-300x46.png 300w" data-lazy-sizes="(max-width: 700px) 100vw, 700px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function.png"/> <noscript> <img data-lazy-fallback="1" data-attachment-id="140641" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-delete-function/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function.png" data-orig-size="700,107" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack delete function" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function-300x46.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140641" src="../Images/09011952eb91042a84fb5dab24897f6c.png" alt="Slack Delete Function" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function.png 700w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function-300x46.png 300w" sizes="(max-width: 700px) 100vw, 700px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-delete-function.png"/> </noscript></li>
</ol>
<p><code>listen_to</code>装饰器的工作原理与<code>respond_to</code>装饰器相同，主要区别在于用户不需要提及Slack应用。</p>
<p>例如，我们可以使用下面的代码让应用程序监听帮助消息:</p>
<pre class="language-python hljs">from machine.plugins.base import MachineBasePlugin
from machine.plugins.decorators import respond_to, on, listen_to,process
import requests
import json
import re
import random


class OurCustomPluginClass(MachineBasePlugin):
   """
   Custom plugin class for interacting with the slack-machine
   """
   @listen_to(r"^help")
   async def help_details(self, msg):
       """
       something
       """
       await msg.say("Refer to the #help-channel for help")</pre>
<p><img data-attachment-id="140645" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-help-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request.png" data-orig-size="527,150" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack help request" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request-300x85.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request.png" decoding="async" class="aligncenter size-full wp-image-140645 jetpack-lazy-image" src="../Images/05e64fb9fa7dfd207f5191a95862d3e4.png" alt="Slack Help Request" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request.png 527w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request-300x85.png 300w" data-lazy-sizes="(max-width: 527px) 100vw, 527px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140645" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/slack-help-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request.png" data-orig-size="527,150" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Slack help request" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request-300x85.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140645" src="../Images/05e64fb9fa7dfd207f5191a95862d3e4.png" alt="Slack Help Request" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request.png 527w, https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request-300x85.png 300w" sizes="(max-width: 527px) 100vw, 527px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/slack-help-request.png"/></noscript>
<p>Slack将大多数与用户的交互视为事件。每当用户在Slack上执行操作时，Slack events API就会被触发。我们可以使用<code>@process</code>装饰器来监听特定的事件。装饰者接受我们想听的特定事件。</p>
<p>在下面的代码中，当用户创建新频道时，Slack应用程序将向#random channel发送通知。<a href="https://api.slack.com/events">活动的完整列表可在此处找到</a>:</p>
<pre class="language-python hljs">from machine.plugins.base import MachineBasePlugin
from machine.plugins.decorators import respond_to, on, listen_to,process
import requests
import json
import re
import random


class OurCustomPluginClass(MachineBasePlugin):
   """
   Custom plugin class for interacting with the slack-machine
   """
   @process("channel_created")
   async def check_channel_created(self):
       """
       something
       """
       await self.say("random", "We have a new channel")</pre>
<p><img data-attachment-id="140647" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/new-slack-channel/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel.png" data-orig-size="607,120" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="New Slack channel" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel-300x59.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel.png" decoding="async" class="aligncenter size-full wp-image-140647 jetpack-lazy-image" src="../Images/ec6aea05619a9ab84602dbd89db3ef4b.png" alt="New Slack Channel" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel.png 607w, https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel-300x59.png 300w" data-lazy-sizes="(max-width: 607px) 100vw, 607px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140647" data-permalink="https://blog.logrocket.com/slack-bot-slack-machine/attachment/new-slack-channel/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel.png" data-orig-size="607,120" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="New Slack channel" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel-300x59.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-140647" src="../Images/ec6aea05619a9ab84602dbd89db3ef4b.png" alt="New Slack Channel" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel.png 607w, https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel-300x59.png 300w" sizes="(max-width: 607px) 100vw, 607px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/new-slack-channel.png"/></noscript>
<h2 id="conclusion">结论</h2>
<p>在本文中，我们回顾了如何使用Slack机器构建Slack bot。在<a href="https://dondebonair.github.io/slack-machine/api/"> API文档</a>中，Slack机器被塞满了更多的功能。它的灵活性和定制能力帮助用户为特定的业务用例开发更多的应用。</p><div class="code-block code-block-4">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
 <p class="clearfix"/>
</article>

</div>    
</body>
</html>