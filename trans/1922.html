<html>
<head>
<title>Run animations in React and React Native from one codebase - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>从一个代码库运行 React 和 React Native 中的动画</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/run-animations-react-react-native-one-codebase/#0001-01-01">https://blog.logrocket.com/run-animations-react-react-native-one-codebase/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<p>动画对于应用程序的交互非常重要。它们让用户感觉与应用程序联系更紧密。</p>
<p>随着 React Native 势头越来越猛，许多产品要么是用 React Native 构建的，要么已经移植到它上面。然而，虽然网页代码在某些情况下可以在移动应用程序中重用，但一个主要问题是动画通常不能延续，因为 API 完全不同。</p>
<p>在本文中，我们将学习如何利用 react 原生文件解析和 react-spring(一个动画库)来编写一个在 React 和 React 原生中运行动画的单一代码库。</p>
<p>我们将从学习 React 原生文件解析和 react-spring 开始，然后构建一个非常基本的示例应用程序。在这个示例应用程序中，我们将编写一段代码，这段代码既可以在 React web 上运行，也可以在 React Native 移动应用程序中运行。</p>
<h2>反应本地文件解析</h2>
<p>React Native 有一个高效的文件解析系统，允许我们编写特定于平台或特定于本机的代码。它将检测文件何时具有<code>.ios.js</code>或<code>.android.js</code>扩展名，并在其他组件需要时加载相关平台(Android/iOS)文件。这样，我们可以为两个不同的平台编写两段不同的代码或组件。</p>
<p>同样，当我们创建扩展名为<code>.js</code>或<code>.native.js</code>的文件时，<code>.js</code>文件被 Node.js 和 web 获取，而<code>.native.js</code>文件被 React Native <a href="https://facebook.github.io/metro/" target="_blank" rel="noopener"> Metro bundler </a>获取。</p>
<p>这使我们能够构建易于维护的应用程序，并跨平台重用大量代码。</p>
<p>考虑以下结构的文件夹:</p>
<pre>|-TestComponent
  |-index.js
  |-index.native.js
</pre>
<p>假设我们在<code>App</code>组件中使用了<code>TestComponent</code>组件，如下所示:</p>
<pre>const App = () =&gt; (
  &lt;div&gt;
    &lt;TestComponent /&gt;
  &lt;/div&gt;
)
</pre>
<p>当为浏览器捆绑代码时，<code>TestComponent</code>的导入将从<code>index.js</code>文件导入组件。然而，如果代码是为 React Native 捆绑的，它会选择<code>index.native.js</code>。</p>
<p>我们将利用文件解析的这个方面来为两个平台编写一个动画代码。</p>
<h2>反作用弹簧</h2>
<p>React-spring 是一个基于 spring 物理学的动画库，应该可以满足你大部分 UI 相关的动画需求。它给你足够灵活的工具来自信地将你的想法投射到移动界面中。</p>
<p>React-spring 是现有的两个 React 动画库之间的桥梁:<a href="https://alligator.io/react/react-motion/" target="_blank" rel="noopener"> React Motion </a>和<a href="https://www.npmjs.com/package/react-animated-css" target="_blank" rel="noopener"> Animated </a>。它继承了 Animated 的强大插值和性能，以及 React Motion 的易用性。</p>
<p>与其他动画库相比，react-spring 的主要优势是它能够应用动画，而不依赖 react 逐帧渲染更新。动画是基于物理学的。</p>
<p>没有必要(除非您有意这样做)自定持续时间或缓动。这意味着你的动画可以无缝地处理中断和变化。结果是平滑、柔和、看起来自然的动画。</p>
<p>React-spring 也是一个跨平台的动画库。对于 web、React Native 和其他平台，它有类似的实现，但是作为不同的包。我们可以根据自己的需求选择合适的模块。然而，它们在所有平台上共享相同的 API。这有助于我们使用 react-spring 实现所有平台一个代码的目标。</p>
<p>在本文中，我们将为我们将要构建的示例应用程序使用<code>useSpring</code>钩子。<code>useSpring</code>通过覆盖值来改变动画，或者通过使用 API 传递回调函数来动态更新值，从而将值转换为动画值。</p>
<h2>构建示例应用程序</h2>
<p>让我们使用刚刚学到的上述概念，构建一个示例应用程序。这个示例应用程序将使用 React 用于 web，React Native 用于移动应用程序，react-spring 用于动画。从功能上来说，这将是一个非常简单的应用程序，其中一个文本将出现在应用程序的加载和放大，在移动应用程序和网络上。</p>
<p>然而，我们将不得不首先创建这个应用程序工作的基本构件。您可以手动配置 Metro bundler 和 webpack，或者使用现有的初学者工具包。</p>
<p>我已经用<code>expo</code>和<code>create-react-app</code>合并成单个项目。该应用程序的完整工作版本可以在<a href="https://github.com/vilvaathibanpb/React-RN-Animations.git" target="_blank" rel="noopener">这里</a>找到。</p>
<p>现在让我们看一些代码。考虑以下项目:</p>
<pre>|-src
  |-Box
    |-index.js
    |-Box.js
    |-Box.native.js
  |-Text
    |-index.js
    |-Text.js
    |-Text.native.js
  |-App.js
</pre>
<p>这里我们有两个组件:<code>Box</code>和<code>Text</code>。这两个组件都利用 React Native 中的文件解析，这使我们能够编写适用于两种平台的单个组件。</p>
<h3><code>Box</code></h3>
<p><code>Box</code>是容器组件。我们将使用<code>Box</code>作为所有其他组件或文本的容器。</p>
<p>在 web 中，我们使用<code>div</code>或<code>section</code>作为容器。然而，React Native 不支持这些元素，而是使用<code>View</code>组件作为容器。我们的目标是为所有平台编写一个代码，因此我们将创建这个<code>Box</code>组件来翻译成基于平台的<code>div</code>或<code>View</code>。</p>
<p>考虑到 React Native 的文件分辨率，我们将为<code>Box</code>组件创建两个文件:</p>

<p><code>Box.js</code>文件将被 web 平台使用，它只是一个<code>div</code>的别名。这会像这样导出<code>div</code>元素:</p>
<pre>// Box.js
export default 'div';
</pre>
<p>React 原生平台将使用<code>Box.native.js</code>文件。我们从 React Native 导入<code>View</code>组件，并从文件中导出它，如下所示:</p>
<pre>// Box.native.js
import {View} from 'react-native'
export default View
</pre>
<p>我们创建了一个通用的<code>index.js</code>文件，因此在其他文件中导入和使用<code>Box</code>组件更容易，可读性更好。如果你看到这里，我们没有明确提到<code>Box</code>是从<code>.js</code>还是<code>.native.js</code>文件导入的。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>我们让捆绑器决定，只导出<code>index.js</code>文件中的组件，这样它就可以被其他组件使用:</p>
<pre>// index.js
import Box from './Box';
export default Box
</pre>
<h3><code>Text</code></h3>
<p>组件将被用来给网络和移动应用添加文本。在 web 中，我们使用像<code>h1</code>、<code>h2</code>或<code>p</code>这样的元素来显示文本，而在 React Native 中，我们使用<code>Text</code>组件。这个<code>Text</code>组件现在将根据平台转换为<code>p</code>或<code>Text</code>。</p>
<p>我们将为<code>Text</code>组件创建两个文件:</p>

<p><code>Text.js</code>文件将被 web 平台使用，它只是<code>p</code>的别名。这会像这样导出<code>p</code>元素:</p>
<pre>// Text.js
export default 'p';
</pre>
<p>React 原生平台将使用<code>Text.native.js</code>文件。我们从 React Native 导入<code>Text</code>组件，并从下面的文件中导出它:</p>
<pre>// Text.native.js
import {Text} from 'react-native'
export default Text
</pre>
<p>像<code>Box</code>组件一样，我们也在这里创建一个通用的<code>index.js</code>文件。这使得导入和在其他文件中使用<code>Text</code>组件变得更容易，可读性更强:</p>
<pre>// index.js
import Text from './Text';
export default Text
</pre>
<p>现在我们已经有了<code>Box</code>和<code>Text</code>组件的基本构建块，我们可以继续构建示例应用程序了。</p>
<p>让我们创建一个新组件<code>App.js</code>，它将使用<code>Box</code>作为容器，使用<code>Text</code>来显示我们的标题:<code>React Spring Animation</code>。我们还可以给组件添加一些样式。</p>
<p>它应该是这样的:</p>
<pre>// App.js

import React from 'react';
import Box from './Box';
import Text from './Text';

function App() {
  return (
    &lt;Box style={{ marginTop: 50}}&gt;
      &lt;Text style={{ fontSize: 50 }}&gt;React Spring Animation&lt;/Text&gt;
    &lt;/Box&gt;
  );
}
export default App;
</pre>
<p>上面的代码为移动和 web 创建了相同的文本，您可以在下面的截图中看到。在幕后，代码在任何平台上执行之前都是捆绑在一起的。</p>
<p>当 webpack 为 web 捆绑代码时，它使用<code>Box.js</code>和<code>Text.js</code>文件，向<code>App</code>组件添加一个带有文本<code>React Spring Animation</code>的<code>div</code>元素和<code>p</code>元素，并在浏览器上运行它。</p>
<p>然而，Metro 捆绑了<code>Box.native.js</code>和<code>Text.native.js</code>文件，并将 React Native 中的<code>View</code>和<code>Text</code>组件添加到了<code>App</code>组件中。这也给移动应用带来了预期的效果。</p>
<p>到目前为止，这是我们的应用在移动和网络上的样子:<img data-attachment-id="57318" data-permalink="https://blog.logrocket.com/run-animations-react-react-native-one-codebase/react-animation-app-static-mobile/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile.png" data-orig-size="744,518" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React-animation-app-static-mobile" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile-300x209.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile.png" decoding="async" class="aligncenter wp-image-57318 size-full jetpack-lazy-image" src="../Images/3ee5b0a71cde0052b93dd47df4986bbb.png" alt="Screenshot of mobile app that says &quot;react spring animation&quot; without movement" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile.png 744w, https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile-300x209.png 300w" data-lazy-sizes="(max-width: 744px) 100vw, 744px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="57318" data-permalink="https://blog.logrocket.com/run-animations-react-react-native-one-codebase/react-animation-app-static-mobile/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile.png" data-orig-size="744,518" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React-animation-app-static-mobile" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile-300x209.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile.png" decoding="async" loading="lazy" class="aligncenter wp-image-57318 size-full" src="../Images/3ee5b0a71cde0052b93dd47df4986bbb.png" alt="Screenshot of mobile app that says &quot;react spring animation&quot; without movement" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile.png 744w, https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile-300x209.png 300w" sizes="(max-width: 744px) 100vw, 744px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-static-mobile.png"/></noscript> <img data-attachment-id="57320" data-permalink="https://blog.logrocket.com/run-animations-react-react-native-one-codebase/react-animation-app-static-web/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web.png" data-orig-size="1162,366" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-animation-app-static-web" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web-300x94.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web-1024x323.png" decoding="async" class="aligncenter wp-image-57320 size-full jetpack-lazy-image" src="../Images/39e69e9b66ce1a2ca4d048cd05af3fb2.png" alt="Screenshot of webpage that says &quot;react spring animation&quot; without movement" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web.png 1162w, https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web-300x94.png 300w, https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web-1024x323.png 1024w, https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web-768x242.png 768w" data-lazy-sizes="(max-width: 1162px) 100vw, 1162px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="57320" data-permalink="https://blog.logrocket.com/run-animations-react-react-native-one-codebase/react-animation-app-static-web/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web.png" data-orig-size="1162,366" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-animation-app-static-web" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web-300x94.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web-1024x323.png" decoding="async" loading="lazy" class="aligncenter wp-image-57320 size-full" src="../Images/39e69e9b66ce1a2ca4d048cd05af3fb2.png" alt="Screenshot of webpage that says &quot;react spring animation&quot; without movement" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web.png 1162w, https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web-300x94.png 300w, https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web-1024x323.png 1024w, https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web-768x242.png 768w" sizes="(max-width: 1162px) 100vw, 1162px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/react-animation-app-static-web.png"/></noscript>
<h2>添加动画</h2>
<p>是时候给上面的应用程序添加动画了。让我们通过增加字体大小给文本添加一个“放大”动画。</p>
<p>首先，安装<code>react-spring</code>作为项目的依赖项:</p>
<pre>npm i react-spring

yarn add react-spring
</pre>
<p>接下来，构建一个类似于<code>Box</code>和<code>Text</code>组件的<code>Animated</code>组件。这个<code>Animated</code>组件将是我们从<code>react-spring</code>库中获取所有钩子、API 和实用程序的单一来源。</p>
<p>我们将把它构造成类似于我们的<code>Box</code>和<code>Text</code>组件，从而使用基于每个平台的正确的钩子和 API。</p>
<p>React-spring 有两个我们将使用的模块:<code>react-spring</code>用于 web，而<code>react-spring/native</code>用于 React Native。在这个例子中，我们将使用<code>react-spring</code>的<code>useSpring</code>钩子来实现动画。</p>
<p>然而，我们应该为 web 从<code>react-spring</code>导入<code>useSpring</code>，为 React Native 从<code>react-spring/native</code>导入<code>useSpring</code>。因此我们不能直接使用<code>react-spring</code>。</p>
<p>考虑到这些事实，我们将构建一个<code>Animated</code>组件，它将帮助我们为多个平台编写单个动画。</p>
<p>让我们添加一个新的组件文件夹如下:</p>
<pre>|-src
  |-Animated
    |-index.js
    |-Animated.js
    |-Animated.native.js
</pre>
<h3><code>Animated</code></h3>
<p><code>Animated</code>组件将从<code>react-spring</code>提供所有需要的钩子和工具。在 web 中，我们使用来自<code>react-spring</code>的<code>useSpring</code>和<code>useTransition</code>等元素制作动画，而在 React Native 中，我们使用来自<code>react-spring/native</code>的相同钩子。</p>
<p>这个<code>Animated</code>组件将根据平台从<code>react-spring</code>或<code>react-spring/native</code>导入<code>useSpring</code>。</p>
<p>我们将为<code>Animated</code>组件创建两个文件:</p>
<ul>
<li><code>Animated.js</code></li>
<li><code>Animated.native.js</code></li>
</ul>
<p><code>Animated.js</code>文件将被 web 平台使用，将从<code>react-spring</code>导入<code>useSpring</code>和<code>animated</code>并导出；</p>
<pre>// Animated.js
export { useSpring, animated } from 'react-spring'
</pre>
<p><code>Animated.native.js</code>文件将被 React 原生平台使用，并将从<code>react-spring/native</code>导入<code>useSpring</code>和<code>animated</code>并导出；</p>
<pre>// Animated.native.js
export { useSpring, animated } from 'react-spring/native'
</pre>
<p>我们现在可以创建一个通用的<code>index.js</code>文件，它将导入和导出<code>Animated</code>组件，如<code>Box</code>和<code>Text</code>。这将使得在其他文件中导入和使用<code>Animated</code>组件变得更容易，可读性更强:</p>
<pre>// index.js
export {useSpring, animated} from './Animated'
</pre>
<p>现在，让我们使用<code>App.js</code>中的<code>Animated</code>组件来制作文本动画。</p>
<p>从<code>Animated</code>组件导入<code>useSpring</code>和<code>animated</code>:</p>
<pre>import { useSpring, animated } from './Animated';
</pre>
<p>然后，使用<code>Animated</code>功能创建一个启用动画的组件。仅当组件被<code>Animated</code>函数扩展时，才可以使用 react-spring 对其进行动画处理:</p>
<pre>const AnimatedText = animated(Text);
</pre>
<p>使用<code>useSpring</code>函数创建动画，这与 CSS 关键帧动画非常相似。</p>
<p>CSS 中的关键帧通过定义动画序列中关键帧(或路点)的样式来控制 CSS 动画序列中的中间步骤。因此，我们可以在动画的不同阶段确定元素的样式。</p>
<p><code>useSpring</code>工作原理完全相同。您可以分别使用<code>from</code>和<code>to</code>属性定义某些样式在动画开始和结束时的外观:</p>
<pre>const styles = useSpring({
    from: {
      fontSize: 10,
    },
    to: { 
      fontSize: 50,
     },
  })
</pre>
<p>最后，将<code>styles</code>传递给<code>AnimatedText</code>组件的<code>style</code>属性:</p>
<pre>&lt;AnimatedText style={{ ...styles }}&gt;React Spring Animation&lt;/AnimatedText&gt;
</pre>
<p>综上所述，<code>App.js</code>应该如下所示:</p>
<pre>import React from 'react';
import { useSpring, animated } from './Animated';
import Box from './Box';
import Text from './Text';

const AnimatedText = animated(Text)

function App() {
  const styles = useSpring({
    from: {
      fontSize: 10,
    },
    to: { 
      fontSize: 50,
     }
  })
  return (
    &lt;Box style={{ marginTop: 50}}&gt;
      &lt;AnimatedText style={{ ...styles }}&gt;React Spring Animation&lt;/AnimatedText&gt;
    &lt;/Box&gt;
  );
}
</pre>
<p>上面的代码为 web 和移动设备的文本添加了一个“放大”动画(通过 React Native)。</p>
<p>你可以在下面的 gif 图中看到它的样子:</p>
<p><img data-attachment-id="57323" data-permalink="https://blog.logrocket.com/run-animations-react-react-native-one-codebase/react-animation-app-web-animated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-web-animated.gif" data-orig-size="600,202" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React-animation-app-web-animated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-web-animated-300x101.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-web-animated.gif" decoding="async" class="wp-image-57323 size-full aligncenter jetpack-lazy-image" src="../Images/b6b577df51896572cec3c054700055c5.png" alt="gif of webpage that says &quot;react spring animation&quot; with zoom in animation" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-web-animated.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-web-animated.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="57323" data-permalink="https://blog.logrocket.com/run-animations-react-react-native-one-codebase/react-animation-app-web-animated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-web-animated.gif" data-orig-size="600,202" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React-animation-app-web-animated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-web-animated-300x101.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-web-animated.gif" decoding="async" loading="lazy" class="wp-image-57323 size-full aligncenter" src="../Images/b6b577df51896572cec3c054700055c5.png" alt="gif of webpage that says &quot;react spring animation&quot; with zoom in animation" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-app-web-animated.gif"/></noscript> <img data-attachment-id="57324" data-permalink="https://blog.logrocket.com/run-animations-react-react-native-one-codebase/react-animation-mobile-app-animated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-mobile-app-animated.gif" data-orig-size="600,445" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React-animation-mobile-app-animated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-mobile-app-animated-300x223.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-mobile-app-animated.gif" decoding="async" class="wp-image-57324 size-full aligncenter jetpack-lazy-image" src="../Images/ae6f62ba4d46646fb1612050ddf38221.png" alt="gif of mobile app that says &quot;react spring animation&quot; with zoom in animation" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-mobile-app-animated.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-mobile-app-animated.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="57324" data-permalink="https://blog.logrocket.com/run-animations-react-react-native-one-codebase/react-animation-mobile-app-animated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-mobile-app-animated.gif" data-orig-size="600,445" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React-animation-mobile-app-animated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-mobile-app-animated-300x223.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-mobile-app-animated.gif" decoding="async" loading="lazy" class="wp-image-57324 size-full aligncenter" src="../Images/ae6f62ba4d46646fb1612050ddf38221.png" alt="gif of mobile app that says &quot;react spring animation&quot; with zoom in animation" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/React-animation-mobile-app-animated.gif"/></noscript>
<h2>结论</h2>
<p>使用上述技术，我们几乎可以一次创建任何动画，并在 web 和移动平台上重用它。这使得快速原型和易于维护成为可能。它还有助于跨平台特性的一致行为。</p>
<p>不幸的是，这项技术有一个小小的警告:只有 React 和 React Native 都支持的 CSS 属性才能以这种方式制作动画。任何涉及到其他 CSS 属性的东西都应该在两个平台上保持两个版本的代码。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产 React 应用</h2><p>调试 React 应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪 Redux 状态、自动显示 JavaScript 错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的 web 和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket 不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试 React 应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>