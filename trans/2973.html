<html>
<head>
<title>Building an app with Next.js and Electron - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用 Next.js 和电子日志博客构建应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-app-next-js-electron/#0001-01-01">https://blog.logrocket.com/building-app-next-js-electron/#0001-01-01</a></blockquote><div><article class="article-post">
<p>自从 Node.js 引入以来，基本的 web 技术(HTML、CSS 和 JavaScript)已经发展得如此之快，以至于我们现在可以用它们来构建多设备/多平台的应用程序。这种大规模的开发也导致了框架和库的引入，这进一步简化了我们的工作。Next.js 和 Electron 是这个列表中的重要例子。</p>
<p>在本文中，我们将探索 Nextron，这是一个结合了 Next.js 和 Electron 强大功能的包，使我们能够以最简单、最愉快的方式创建多平台桌面应用程序。</p>
<p><em>向前跳转:</em></p>

<h2 id="prerequisites">先决条件</h2>
<p>本教程需要满足以下先决条件:</p>
<ul>
<li>熟悉 JavaScript</li>
<li>基本熟悉命令行/终端</li>
<li>以前使用 Next.js 和 Electron 的经验可能会有所帮助，但不是必需的</li>
</ul>
<h2 id="what-is-electron-js-used-for">Electron.js 是用来做什么的？</h2>
<p>Electron 是一个开源的 JavaScript 库，允许您使用 web 技术创建跨平台的桌面应用程序。在幕后，Electron 利用 Node.js 和强大的 Chromium 引擎将使用基本 web 技术创建的应用程序呈现为桌面应用程序。因此，如果你已经熟悉了创建网站的过程，你也可以用 Electron 为不同的操作系统平台创建一个桌面应用程序。</p>
<h2 id="#what-some-advantages-electron-js">Electron.js 有什么优势？</h2>
<p>电子提供了几个优点，例如:</p>
<ul>
<li>跨平台:Electron 允许您为主要的操作系统创建应用程序，如 Windows、macOS 和 Linux</li>
<li>易于使用:如果你有基本的 HTML、CSS 和 Javascript 知识，你会发现开始创建一个电子应用程序很容易</li>
<li>桌面 API:electronic 使您能够使用您已经熟悉的 web 技术轻松访问桌面/硬件 API</li>
</ul>
<p>尽管电子有许多优点，它也有一些缺点:</p>
<ul>
<li>app 大小大:Electron 用 Chromium 打包，增加了捆绑应用的大小。事实上，一句“你好，世界！”以电子形式编写的应用程序可能大于 50MB</li>
<li>性能:众所周知，电子应用程序是资源消耗大户，因为它们消耗大量的电池能量和系统内存</li>
</ul>
<p>使用两种神奇的技术，Nextron 使我们能够快速创建桌面应用程序。而且，正如您将在本教程中看到的，用 Nextron 创建桌面应用程序既简单又有趣。</p>
<h2 id="setting-up-your-nextron-project">建立你的 Nextron 项目</h2>
<p>您可以通过运行以下命令轻松创建新的 Nextron 应用程序:</p>
<pre class="language-bash hljs">npx create-nextron-app appName</pre>
<p>Nextron 还提供了各种支持 TypeScript 以及流行 CSS 框架的示例模板，如 Tailwind CSS、Ant Design、Material UI 和 Emotion。所有的<a href="https://github.com/saltyshiomix/nextron/tree/main/examples" target="_blank" rel="noopener">模板都可以在这里</a>找到，在决定为您的项目选择哪个模板之后，您可以通过在安装命令前面加上首选的示例模板和<code>--example</code>标志来安装它们。因此，如果您想使用 TypeScript 和 Tailwind 模板，您必须运行:</p>
<pre class="language-bash hljs">npx create-nextron-app appName --example with-typescript-tailwindcss</pre>
<p>运行安装命令将为我们的项目创建所有必需的文件和目录。但是，我们仍然需要使用下面的命令安装所有必需的依赖项:</p>
<pre class="language-bash hljs">npm install
# OR
yarn</pre>
<p>完成后，我们就可以开始应用程序了:</p>
<pre class="language-bash hljs">npm run dev
# OR
yarn dev</pre>
<p>这将立即为我们的应用程序打开一个新窗口，如下面的屏幕截图所示:</p>
<p><img data-attachment-id="112182" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/opening-new-window-for-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app.png" data-orig-size="512,328" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Opening new window for our application" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app-300x192.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app.png" decoding="async" class="aligncenter size-full wp-image-112182 jetpack-lazy-image" src="../Images/ca33a8a53c4562e0ef509aa2ed476171.png" alt="Opening New Window For Our Application" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app-300x192.png 300w" data-lazy-sizes="(max-width: 512px) 100vw, 512px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="112182" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/opening-new-window-for-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app.png" data-orig-size="512,328" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Opening new window for our application" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app-300x192.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-112182" src="../Images/ca33a8a53c4562e0ef509aa2ed476171.png" alt="Opening New Window For Our Application" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app-300x192.png 300w" sizes="(max-width: 512px) 100vw, 512px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/opening-new-window-for-app.png"/></noscript>
<p>您还可以关闭 dev 工具，以便能够全屏访问应用程序。</p>
<h3 id="the-file-structure-for-a-nextron-project">Nextron 项目的文件结构</h3>
<p>虽然可能会有微小的变化，主要取决于您在安装过程中选择的示例模板，但典型的 Nextron 项目的文件结构如下:</p>
<p><img data-attachment-id="112185" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/file-structure-for-typical-nextron-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project.png" data-orig-size="328,512" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="File structure for typical Nextron project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project-192x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project.png" decoding="async" class="aligncenter size-full wp-image-112185 jetpack-lazy-image" src="../Images/342678fb3d7c4c14be9c98a968884ec8.png" alt="File Structure For Typical Nextron Project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project.png 328w, https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project-192x300.png 192w" data-lazy-sizes="(max-width: 328px) 100vw, 328px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="112185" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/file-structure-for-typical-nextron-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project.png" data-orig-size="328,512" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="File structure for typical Nextron project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project-192x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-112185" src="../Images/342678fb3d7c4c14be9c98a968884ec8.png" alt="File Structure For Typical Nextron Project" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project.png 328w, https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project-192x300.png 192w" sizes="(max-width: 328px) 100vw, 328px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/file-structure-for-typical-nextron-project.png"/></noscript>
<p>您可能已经注意到，所有与 Next.js 相关的代码都位于<code>/render</code>文件夹中。您可能不熟悉的其他一些文件和目录包括:</p>
<ul>
<li><strong> <code>main/helpers</code> </strong> —该目录导出一个名为<code>createWindow</code>的模块，该模块使用 Electron 的<code>BrowserWindow</code>函数来创建我们的桌面应用窗口。我们可以在这里配置默认的应用程序窗口选项，比如它的初始大小和位置</li>
<li><strong> <code>main/background.js</code> </strong> —这个文件是初始化<code>createWindow</code>函数的地方，负责将我们的 Next.js 应用程序作为电子应用程序</li>
<li><strong> <code>resources/</code> </strong> —我们可以把桌面应用资源，比如应用图标，放在这里</li>
</ul>
<h3 id="how-nextron-works">Nextron 如何工作</h3>
<p>很容易理解 Nextron 是如何在幕后工作的。它会自动检查您的应用程序是运行在开发模式还是生产模式。如果处于开发模式，Nextron 会获取通过运行 Next.js 应用程序生成的 localhost URL，并将其作为电子应用程序。但是，如果在生产中，Nextron 会获取从 Next.js 构建中生成的静态文件并呈现它们。</p>
<h2 id="pages">页</h2>
<p>页面的功能与它们在标准 Next.js 应用程序中的功能完全相同，没有例外。为了进行试验，让我们在<code>renderer/pages</code>目录中创建一个新的<code>sample.js</code>文件，其内容如下:</p>
<pre class="language-javascript hljs">import Link from "next/link";

const sample = () =&gt; {
  return (
    &lt;&gt;
      &lt;div&gt;
        &lt;h1&gt;Hello world&lt;/h1&gt;
        &lt;p&gt;Welcome to sample page&lt;/p&gt;
        &lt;Link href="/home"&gt;
          &lt;a&gt;Go Home&lt;/a&gt;
        &lt;/Link&gt;
      &lt;/div&gt;
    &lt;/&gt;
  );
};

export default sample;</pre>
<p>并且用下面的内容更新同一目录中的默认<code>home.jsx</code>文件，以便它链接到我们的新页面:</p>
<pre class="language-javascript hljs">import Link from "next/link";

const Home = () =&gt; {
  return (
    &lt;&gt;
      &lt;h1&gt;Hello World&lt;/h1&gt;
      &lt;p&gt;Welcome to my Nextron desktop app&lt;/p&gt;
      &lt;Link href="/sample"&gt;
        &lt;a&gt;Go to sample page&lt;/a&gt;
      &lt;/Link&gt;
    &lt;/&gt;
  );
};

export default Home;</pre>
<p>我们得到了以下结果:</p>
<p><img data-attachment-id="112188" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/results-for-nextron-desktop-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/results-for-nextron-desktop-app.gif" data-orig-size="512,304" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Results for Nextron desktop application" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/results-for-nextron-desktop-app-300x178.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/results-for-nextron-desktop-app.gif" decoding="async" class="aligncenter size-full wp-image-112188 jetpack-lazy-image" src="../Images/5916e2703bdd15fee6dd897876140649.png" alt="Results For Nextron Desktop Application" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/results-for-nextron-desktop-app.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/results-for-nextron-desktop-app.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="112188" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/results-for-nextron-desktop-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/results-for-nextron-desktop-app.gif" data-orig-size="512,304" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Results for Nextron desktop application" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/results-for-nextron-desktop-app-300x178.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/results-for-nextron-desktop-app.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-112188" src="../Images/5916e2703bdd15fee6dd897876140649.png" alt="Results For Nextron Desktop Application" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/results-for-nextron-desktop-app.gif"/></noscript>
<h2 id="using-layouts">使用布局</h2>
<p>布局的操作就像在常规的 Next.js 应用程序中一样，也没有例外。例如，假设我们有一个想要在桌面应用程序的多个页面中共享的导航栏。首先，我们需要创建我们的布局文件；例如，<code>/renderer</code>目录中的新<code>layout.js</code>文件包含以下内容:</p>
<pre class="language-javascript hljs">const Layout = ({ children }) =&gt; {
  return (
    &lt;&gt;
      &lt;nav&gt;
        &lt;h2&gt;Nav Logo&lt;/h2&gt;
        {/* more navbar code here */}
      &lt;/nav&gt;
      &lt;main&gt;{children}&lt;/main&gt;
    &lt;/&gt;
  );
};

export default Layout;</pre>
<p>由于 Nextron 不自动包含<code>_app.js</code>文件，而该文件通常会与使用 create-next-app 包创建的应用程序一起提供，因此我们也必须手动创建一个文件，并包含我们的布局:</p>
<pre class="language-javascript hljs">//_app.js
import Layout from "../layout";

export default function MyApp({ Component, pageProps }) {
  return (
    &lt;Layout&gt;
      &lt;Component {...pageProps} /&gt;
    &lt;/Layout&gt;
  );
}</pre>
<p>将一点 CSS 应用到导航栏和我们之前生成的页面，我们将获得以下结果:</p>
<p><img data-attachment-id="112191" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/css-applied-to-navbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/css-applied-to-navbar.gif" data-orig-size="512,304" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="CSS applied to Navbar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/css-applied-to-navbar-300x178.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/css-applied-to-navbar.gif" decoding="async" class="aligncenter size-full wp-image-112191 jetpack-lazy-image" src="../Images/682b26925218e1398df8b2b34c0a011f.png" alt="CSS Applied To Navbar" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/css-applied-to-navbar.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/css-applied-to-navbar.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="112191" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/css-applied-to-navbar/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/css-applied-to-navbar.gif" data-orig-size="512,304" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="CSS applied to Navbar" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/css-applied-to-navbar-300x178.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/css-applied-to-navbar.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-112191" src="../Images/682b26925218e1398df8b2b34c0a011f.png" alt="CSS Applied To Navbar" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/css-applied-to-navbar.gif"/></noscript>
<h2 id="creating-new-windows">创建新窗口</h2>
<p>虽然这种用法很少见，但也可以通过编程方式创建新窗口。我们通常会使用 Electron 的<code>BrowserWindow</code>来完成这项工作，但是 Nextron 已经为我们导出了一个名为<code>createWindow</code>的辅助方法，我们可以用它来代替。</p>
<p>假设我们想在一个新窗口中打开之前创建的<code>/sample</code>页面。我们需要首先更新<code>main/background.js</code>来加入对这个新窗口的支持:</p>
<pre class="language-javascript hljs">import { app, ipcMain } from "electron";
. . .

  const mainWindow = createWindow("main", {
    width: 1000,
    height: 600,
  });
  const sampleWindow = createWindow("sample", {
    width: 700,
    height: 400,
    show: false,
  });

  if (isProd) {
    await mainWindow.loadURL("app://./home.html");
    await sampleWindow.loadURL("app://./sample.html");
  } else {
    const port = process.argv[2];
    await mainWindow.loadURL(`http://localhost:${port}/home`);
    await sampleWindow.loadURL(`http://localhost:${port}/sample`);
  }

  ipcMain.on("show-sample", () =&gt; {
    sampleWindow.show();
  });
. . .</pre>
<p>在上面提供的代码中，在创建了<code>mainWindow</code>之后，我们立即创建了另一个窗口(<code>sampleWindow</code>，将它的初始宽度和高度设置为 700×400，并将它的显示值设置为<code>false</code>，这样这个窗口在默认情况下是不可见的。并且使用电子的<code><a href="https://www.electronjs.org/docs/latest/api/ipc-main" target="_blank" rel="noopener">ipcMain event emitter</a></code>，我们正在监听一个事件<code>show-sample</code>，因此当这个事件被发出时，我们显示新的<code>sampleWindow</code>。</p>
<p>下一步将是以编程方式发出该事件，我们也可以在页面中使用 ipc 轻松做到这一点。例如在<code>render/home.jsx</code>中:</p>
<pre class="language-javascript hljs">import electron from "electron";
const ipcRenderer = electron.ipcRenderer || false;

const Home = () =&gt; {
  const openWindow = () =&gt; {
    ipcRenderer.send("show-sample");
  };

  return (
    &lt;&gt;
      &lt;h1&gt;Hello World&lt;/h1&gt;
      &lt;p&gt;Welcome to my Nextron desktop app&lt;/p&gt;
      &lt;button onClick={openWindow}&gt;Open sample page&lt;/button&gt;
    &lt;/&gt;
  );
};

export default Home;</pre>
<p>如果我们运行我们的应用程序，我们将得到以下输出:</p>
<p><img data-attachment-id="112195" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/nextron-desktop-app-with-new-window/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/nextron-desktop-app-with-new-window.gif" data-orig-size="512,359" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Nextron desktop app with new window" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/nextron-desktop-app-with-new-window-300x210.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/nextron-desktop-app-with-new-window.gif" decoding="async" class="aligncenter size-full wp-image-112195 jetpack-lazy-image" src="../Images/3aed61d7c1b2e595e41dff15f0529bac.png" alt="Nextron Desktop App With New Window" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/nextron-desktop-app-with-new-window.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/nextron-desktop-app-with-new-window.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="112195" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/nextron-desktop-app-with-new-window/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/nextron-desktop-app-with-new-window.gif" data-orig-size="512,359" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Nextron desktop app with new window" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/nextron-desktop-app-with-new-window-300x210.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/nextron-desktop-app-with-new-window.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-112195" src="../Images/3aed61d7c1b2e595e41dff15f0529bac.png" alt="Nextron Desktop App With New Window" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/nextron-desktop-app-with-new-window.gif"/></noscript>
<p>此外，我们还可以通过添加<code>target=_blank</code>属性或使用 JavaScript <code>window.open()</code>方法打开目标 URL，在新窗口中打开外部 URL。</p>
<h2 id="electron-apis">电子 API</h2>
<p>基于浏览器的 API 和电子 API 也工作得很好，您可以直接将它们导入任何页面。浏览器通知 API 就是一个例子，我们可以在如下页面中使用它:</p>
<pre class="language-javascript hljs">const showNotification = () =&gt; {
  const notificationTitle = "My Notification 🔔";

  new Notification(notificationTitle, {
    body: "This is a sample notification.",
  }).onclick = () =&gt; console.log("Notification Clicked");
};</pre>
<p>每当我们执行一个触发<code>showNotification</code>功能的动作时，我们会立即在桌面上收到一个通知。下面是一个 macOS 通知的示例:</p>
<p><img data-attachment-id="112197" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/macos-notification/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification.png" data-orig-size="512,118" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="MacOS notification" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification-300x69.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification.png" decoding="async" class="aligncenter size-full wp-image-112197 jetpack-lazy-image" src="../Images/2daa0709e65eb5242a1527eabaf5971e.png" alt="MacOS Notification" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification-300x69.png 300w" data-lazy-sizes="(max-width: 512px) 100vw, 512px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="112197" data-permalink="https://blog.logrocket.com/building-app-next-js-electron/attachment/macos-notification/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification.png" data-orig-size="512,118" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="MacOS notification" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification-300x69.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-112197" src="../Images/2daa0709e65eb5242a1527eabaf5971e.png" alt="MacOS Notification" srcset="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification.png 512w, https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification-300x69.png 300w" sizes="(max-width: 512px) 100vw, 512px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/05/macos-notification.png"/></noscript>
<p><code/></p>
<p>Nextron webpack 流程</p>
<p>Nextron 应用程序通过 Next.js 运行在两个不同的 webpack 进程上，即客户端进程和服务器进程。考虑到这一点，确定您在哪个进程中是至关重要的，特别是如果您打算使用不支持服务器端呈现的库。</p>
<h2 id="nextron-webpack-processes">您应该检查当前进程是服务器还是客户端。根据 Nextron 文档，以下是检查电子模块的推荐语法:</h2>
<p>或者，您可以利用 React 的<code>useEffect()</code>钩子和浏览器的<code>window</code>来检查您当前是否在客户端进程上，如下所示:</p>
<p>构建演示应用程序</p>
<pre class="language-javascript hljs">import electron from 'electron';

const Home = () =&gt; {
  const moduleName = electron.moduleName || false;
  if (moduleName) {
    // we can use `electron.moduleName`
  }
};

export default Home;
</pre>
<p>一旦您完成了应用程序的编码，您肯定会希望生成一个可执行文件，以便您可以与其他人共享该应用程序。Nextron 通过<a href="https://www.electron.build/" target="_blank" rel="noopener">电子生成器</a>来处理这个问题。我们可以使用下面的命令为我们的 Nextron 项目生成可执行文件:</p>
<pre class="language-javascript hljs">import { useEffect } from "react";

const Home = () =&gt; {
  useEffect(() =&gt; {
    if (typeof window === "undefined") {
      // we are on the client process.
    }
  }, []);
  return &lt;div&gt;&lt;/div&gt;;
};

export default Home;
</pre>
<h2 id="building-a-demo-app">您还可以更新您的<code>package.json</code>文件中的脚本部分，以包含其他构建选项:</h2>
<p>因此，如果我们想为 Windows 64 位生成一个可执行文件，我们将使用以下命令:</p>
<pre class="language-bash hljs">npm run build
# OR
yarn build</pre>
<p>结论</p>
<pre class="language-bash hljs">. . .
{
  "scripts": {
    "build": "nextron build",
    "build:all": "nextron build --all",
    "build:win32": "nextron build --win --ia32",
    "build:win64": "nextron build --win --x64",
    "build:mac": "nextron build --mac --x64",
    "build:linux": "nextron build --linux"
  }
}</pre>
<p>在本文中，我们研究了 Nextron，这是一个 JavaScript 包，它允许我们使用 electronic 和 Next.js 轻松创建桌面应用程序。我们研究了如何创建新页面、应用程序布局和新窗口，如何使用 Electron APIs，如何检查您所在的 webpack 进程，以及如何为您的应用程序生成可执行文件。</p>
<pre class="language-bash hljs">npm run build:win64
# OR
yarn build:64</pre>
<h2 id="conclusion"><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank"> LogRocket </a>:全面了解生产 Next.js 应用</h2>
<p>调试下一个应用程序可能会很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪状态、自动显示 JavaScript 错误、跟踪缓慢的网络请求和组件加载时间感兴趣，</p>
<div class="code-block code-block-30">
<div class="blog-plug inline-plug next-plug"><h2>. </h2><p>LogRocket 就像是网络和移动应用的 DVR，记录下你的 Next.js 应用上发生的一切。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket 还可以监控应用程序的性能，报告客户端 CPU 负载、客户端内存使用等指标。</p><a href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank">try LogRocket</a><p>LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-lazy-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/></noscript></a><a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a><p>让您调试 Next.js 应用的方式现代化— <a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p><p>The LogRocket Redux middleware package adds an extra layer of visibility into your user sessions. LogRocket logs all actions and state from your Redux stores. </p><p>Modernize how you debug your Next.js apps — <a class="signup" href="https://lp.logrocket.com/blg/nextjs-signup" target="_blank" rel="noopener noreferrer">start monitoring for free</a>.</p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>