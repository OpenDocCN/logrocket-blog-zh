<html>
<head>
<title>Build a React theme switcher app with styled-components - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用 styled-components - LogRocket 博客构建一个 React 主题切换器应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/#0001-01-01">https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/#0001-01-01</a></blockquote><div><article class="article-post">
<p>使用<a href="https://styled-components.com" target="_blank" rel="noopener">风格组件</a>中可用的包装器组件<code>ThemeProvider</code>，我们可以在 React 中快速设置多个自定义主题，并轻松地在它们之间切换。</p>
<p>为了演示这一点，我们将构建一个 React 应用程序，引用《权力的游戏》中的热门角色的话。本教程将展示如何为应用程序创建样式组件和多个主题，通过单击按钮更改主题，以及将主题保存在本地存储中。</p>
<p><em>向前跳跃</em>:</p>

<h2 id="why-use-styled-components-theme-switching">为什么使用风格化组件进行主题切换</h2>
<p>在我们进入教程之前，让我们来看看使用样式化组件进行主题切换的一些原因:</p>
<ul>
<li>完全主题化支持:<code>ThemeProvider</code>包装器组件允许我们将主题传递给渲染树中它下面的所有 React 组件</li>
<li>效率:styled-components 使用 React Context API，它提供了一个主题上下文，我们可以将主题作为道具传递给它，允许在每个组件中动态访问它——甚至是那些深度嵌套的组件</li>
<li>灵活性:在 styled-components 中创建的任何主题都可以使用<code>withTheme</code>高阶组件在其他 React 组件中访问</li>
</ul>
<p>查看<a href="https://styled-components.com/docs/advanced" target="_blank" rel="noopener">样式组件高级文档页面</a>了解更多信息。</p>
<h2 id="prerequisites">先决条件</h2>
<ul>
<li>JavaScript 和 CSS 的工作知识</li>
<li>熟悉在 React 中创建和使用组件和钩子</li>
<li>您选择的代码编辑器</li>
</ul>
<p>我们开始吧！</p>
<h2 id="setting-up-react-app">设置 React 应用程序</h2>
<p>在构建我们的应用程序之前，我们首先需要设置一个能够让我们快速开发 React 应用程序的环境。</p>
<p>通过运行以下命令开始:</p>
<pre class="language-javascript hljs">npx create-react-app theme-switching</pre>
<p>在上面的代码片段中，<code>theme-switching</code>是应用程序和文件夹的名称。</p>
<p>接下来，cd 进入应用程序:</p>
<pre class="language-javascript hljs">cd theme-switching</pre>
<p>现在，在代码编辑器中打开该文件夹。</p>
<p>接下来，通过 npm 或 Yarn 安装<code>styled-components</code>依赖项，以允许在应用程序中使用<code>styled-components</code>。</p>
<pre class="language-javascript hljs"># with npm
npm install --save styled-components

# with yarn
yarn add styled-components</pre>
<p>此时，我们可以通过删除任何不需要的文件来清理应用程序。</p>
<p>或者，我们可以替换<code>App.js</code>文件中的代码，就像这样:</p>
<pre class="language-javascript hljs">import React from 'react';

function App() {
  return (
    &lt;div className="App"&gt;
      &lt;h1&gt;Theme Switching&lt;/h1&gt;
   &lt;/div&gt;
  );
}

export default App;</pre>
<p>替换代码后，运行以下命令之一在浏览器中查看应用程序:</p>
<pre class="language-javascript hljs"># with npm
npm start

# with yarn
yarn start</pre>
<p>这可能需要一点时间来运行；完成后，启动浏览器并导航至<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>。</p>
<p>该应用程序应该如下所示:</p>
<p><img data-attachment-id="106184" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/theme-switching/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Theme switching" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching.png" decoding="async" class="aligncenter size-full wp-image-106184 jetpack-lazy-image" src="../Images/f780a256a136a3c72c0a7547eeeb6eec.png" alt="Theme Switching" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching-300x147.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="106184" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/theme-switching/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Theme switching" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-106184" src="../Images/f780a256a136a3c72c0a7547eeeb6eec.png" alt="Theme Switching" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching-300x147.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-switching.png"/></noscript>
<p>现在，让我们创建样式化的组件。</p>
<h2 id="creating-styled-components">创建样式化组件</h2>
<p>对于本教程，我们将构建一个包含以下组件的简单单页 web 应用程序:</p>
<ul>
<li>页眉</li>
<li>页脚</li>
<li>卡片上写着热门<em>权力的游戏</em>人物的话</li>
<li>主题栏，带有用于选择主题偏好设置的按钮</li>
</ul>
<p>首先，在<code>src</code>文件夹中，我们将创建一个<code>components</code>文件夹。在<code>components</code>文件夹中，我们将创建一个 s <code>tyles</code>文件夹来存放我们的样式组件。</p>
<p>接下来，我们将使用关键字<code>styled-components</code>、<code>createGlobalStyle</code>将<code>GlobalStyles</code>添加到应用程序中。</p>
<p>在<code>styles</code>文件夹中，创建一个<code>Global.js</code>文件，并添加以下内容:</p>
<pre class="language-javascript hljs">Global.js</pre>
<pre class="language-javascript hljs">import { createGlobalStyle } from "styled-components";

export const GlobalStyles = createGlobalStyle`
*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background-color: hsl(0, 0%, 100%);
  color: hsl(0, 1%, 16%);
  font-family: monospace;
  overflow-x: hidden;
}
`</pre>
<p>这段代码对应用程序中的所有元素进行了简单的重置，并为<code>body</code>元素添加了一些样式。</p>

<p>接下来，我们将为头文件<code>Header.styled.js</code>创建一个<code>styled-component</code>文件。通过在组件文件的命名约定中包含<code>.styled</code>,我们将能够容易地从常规的 React 组件中识别出样式化的组件。</p>
<p>现在，我们将从<code>styled-components</code>导入<code>styled</code>，并添加以下内容；</p>
<pre class="language-javascript hljs">Header.styled.js</pre>
<pre class="language-javascript hljs">import styled from "styled-components";

export const Header = styled.header`
  background-color: hsl(0, 0%, 93%);
  padding: 20px;
  text-align: center;
  font-weight: bold;
`;</pre>
<h3>创建页脚组件</h3>
<p>现在，我们将为页脚创建一个<code>styled-component</code>文件，步骤与创建页眉的步骤相同。</p>
<pre class="language-javascript hljs">Footer.styled.js</pre>
<pre class="language-javascript hljs">import styled from "styled-components";

export const Footer = styled.footer`
  background-color: hsl(0, 1%, 38%);
  padding: 40px 20px;
  text-align: center;
  color: hsl(0, 0%, 100%);

  a {
    color: hsl(0, 0%, 100%);
  }
`;</pre>
<p>现在，让我们回到 App.js 文件，导入<code>GlobalStyles</code>、<code>Header</code>和<code>Footer</code>样式的组件:</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">import React from 'react';
import { GlobalStyles } from "./components/styles/Global";
import { Header } from "./components/styles/Header.styled";
import { Footer } from "./components/styles/Footer.styled";

function App() {
  return (
    &lt;div className="App"&gt;
      &lt;GlobalStyles /&gt;
      &lt;Header&gt;Game of Thrones Quotes&lt;/Header&gt;
      
      &lt;Footer&gt;
          &lt;p&gt;
            Made with love by &lt;a href="http://bio.link/timonwa"&gt;Timonwa&lt;/a&gt;
          &lt;/p&gt;
        &lt;/Footer&gt;
    &lt;/div&gt;
  );
}

export default App;
</pre>
<p>当然，你可以把页脚的内容改成你的名字或者别的。</p>
<p>保存代码并刷新浏览器后，应用程序应该如下所示:</p>
<p><img data-attachment-id="106187" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/plain-theme/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Plain theme" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme.png" decoding="async" class="aligncenter size-full wp-image-106187 jetpack-lazy-image" src="../Images/276831805995eb226da0295cf41cc774.png" alt="Plain Theme" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme-300x147.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="106187" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/plain-theme/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme.png" data-orig-size="730,358" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Plain theme" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme-300x147.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-106187" src="../Images/276831805995eb226da0295cf41cc774.png" alt="Plain Theme" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme-300x147.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/plain-theme.png"/></noscript>
<h3>创建卡片组件</h3>
<p>接下来，我们将在<code>styles</code>文件夹中为卡片<code>Cards.styled.js</code>创建一个<code>styled-component</code>文件。让我们添加以下代码:</p>
<pre class="language-javascript hljs">Cards.styled.js</pre>
<pre class="language-javascript hljs">import styled from "styled-components";

export const CardsContainer = styled.section`
  margin: 50px;
`;

export const Card = styled.div`
  background-color: hsl(60, 40%, 100%);
  border: 1px solid hsl(0, 0%, 87%);
  margin-left: auto;
  margin-right: auto;
  margin-bottom: 20px;
  border-radius: 3px;
  max-width: 450px;
`;

export const CardTitle = styled.div`
  color: hsl(0, 1%, 38%);
  border-bottom: 1px solid hsl(0, 0%, 87%);
  text-align: center;
  padding: 10px;
  font-weight: bold;
`;

export const CardBody = styled.div`
  color: hsl(0, 1%, 38%);
  padding: 10px;
`;</pre>
<p>在上面的代码中，我们创建了一个<code>CardContainer</code>样式的组件，它将存放各个卡片。我们还创建了一个<code>Card</code>样式的组件，以及将在卡片中显示的卡片<code>Title</code>和卡片<code>Body</code>样式的组件。</p>
<h3>创建报价组件</h3>
<p>现在，让我们在<code>components</code>文件夹中创建一个<code>Quotes</code> React 组件。我们将把<code>Card</code>组件导入到<code>Quotes.js</code>文件中，并为<code>Quotes</code>创建卡片。</p>
<pre class="language-javascript hljs">Quotes.js</pre>
<pre class="language-javascript hljs">import React from "react";
import {
  CardsContainer,
  Card,
  CardTitle,
  CardBody,
} from "./styles/Cards.styled";

const Quotes = () =&gt; {
  return (
    &lt;CardsContainer&gt;
      &lt;Card&gt;
        &lt;CardTitle&gt;Bran Stark&lt;/CardTitle&gt;
        &lt;CardBody&gt;
          &lt;p&gt;
            I was never going to be as good a lady as you. So I had to be
            something else. I never could have survived what you survived.
          &lt;/p&gt;
        &lt;/CardBody&gt;
      &lt;/Card&gt;

      &lt;Card&gt;
        &lt;CardTitle&gt;Tyrion Lannister&lt;/CardTitle&gt;
        &lt;CardBody&gt;
          &lt;p&gt;
            It's not easy being drunk all the time. If it were easy, everyone
            would do it.
          &lt;/p&gt;
        &lt;/CardBody&gt;
      &lt;/Card&gt;

      &lt;Card&gt;
        &lt;CardTitle&gt;Jon Snow&lt;/CardTitle&gt;
        &lt;CardBody&gt;
          &lt;p&gt;
            Sometimes there is no happy choice Sam, only one less grievous than
            the others.
          &lt;/p&gt;
        &lt;/CardBody&gt;
      &lt;/Card&gt;
    &lt;/CardsContainer&gt;
  )
};

export default Quotes;</pre>
<p>现在，我们将把<code>Quotes</code> React 组件导入到<code>App.js</code>文件中，以便我们可以在浏览器中查看它:</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">import React from 'react';
import { GlobalStyles } from "./components/styles/Global";
import { Header } from "./components/styles/Header.styled";
import { Footer } from "./components/styles/Footer.styled";
import Quotes from "./components/Quotes";

function App() {
  return (
    &lt;div className="App"&gt;
      &lt;GlobalStyles /&gt;
      &lt;Header&gt;Game of Thrones Quotes&lt;/Header&gt;

      &lt;Quotes /&gt;

      &lt;Footer&gt;
          &lt;p&gt;
            Made with love by &lt;a href="http://bio.link/timonwa"&gt;Timonwa&lt;/a&gt;
          &lt;/p&gt;
        &lt;/Footer&gt;
     &lt;/div&gt;
  );
}

export default App;</pre>
<p>应用程序现在应该看起来像这样:</p>
<p><img data-attachment-id="106189" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/game-thrones-quotes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Game of Thrones quotes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes.png" decoding="async" class="aligncenter size-full wp-image-106189 jetpack-lazy-image" src="../Images/20311256bc69da2a82e0ab96e628d4a6.png" alt="Game of Thrones Quotes" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="106189" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/game-thrones-quotes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Game of Thrones quotes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-106189" src="../Images/20311256bc69da2a82e0ab96e628d4a6.png" alt="Game of Thrones Quotes" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/game-thrones-quotes.png"/></noscript>
<h3>创建按钮</h3>
<p>到目前为止，我们已经为应用程序创建了组件并添加了内容。现在，让我们为主题创建按钮和一个容纳按钮的容器。</p>
<p>在<code>styles</code>文件夹中，我们将创建一个<code>ThemeSwitching.styled.js</code>文件并包含以下内容:</p>
<pre class="language-javascript hljs">ThemeSwitching.styled.js</pre>
<pre class="language-javascript hljs">import styled from "styled-components";

export const ThemeContainer = styled.div`
  background-color: hsl(0, 0%, 100%);
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  padding: 10px;
  border-bottom: 1px solid hsl(0, 0%, 87%);
`;

export const ThemeButton = styled.button`
  margin: 0 5px;
  padding: 10px;
  font-size: 0.5rem;
  border: 1px solid hsl(0, 0%, 87%);
  border-radius: 5px;
  width: 20px;
  height: 20px;
  cursor: pointer;
  &amp;:hover {
    box-shadow: 2px 2px 2px hsl(0, 0%, 87%);
`;</pre>
<p>在上面的代码中，我们创建了一个包含所有主题按钮的<code>ThemeContainer</code>样式组件和一个用于单独主题按钮的<code>ThemeButton</code>样式组件。</p>
<p>我们还为按钮添加了一个<code>hover</code>状态。当用户悬停在一个按钮上时，它会显示一个<code>box-shadow</code>效果。</p>
<p>现在，让我们通过将以下内容添加到<code>App.js</code>文件的顶部以及其他导入来导入这些样式更改:</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">import {
  ThemeContainer,
  ThemeButton,
} from "./components/styles/ThemeSwitching.styled";</pre>
<p>在同一个文件中，我们还将在<code>Header</code> styled-component 和<code>Quotes</code> React component 之间添加以下代码片段:</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">&lt;ThemeContainer&gt;
  &lt;span&gt;Themes: &lt;/span&gt;
  &lt;ThemeButton className="light active"&gt;&lt;/ThemeButton&gt;
  &lt;ThemeButton className="dark"&gt;&lt;/ThemeButton&gt;
  &lt;ThemeButton className="blue"&gt;&lt;/ThemeButton&gt;
  &lt;ThemeButton className="green"&gt;&lt;/ThemeButton&gt;
  &lt;ThemeButton className="brown"&gt;&lt;/ThemeButton&gt;
  &lt;ThemeButton className="pink"&gt;&lt;/ThemeButton&gt;
&lt;/ThemeContainer&gt;</pre>
<p>此时，所有主题按钮都具有相同的外观:</p>
<p><img data-attachment-id="106191" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/identical-appearance/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Identical appearance" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance.png" decoding="async" class="aligncenter size-full wp-image-106191 jetpack-lazy-image" src="../Images/c48c8ef5dbcfaf446d527c66b9b2e0d1.png" alt="Identical Appearance" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="106191" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/identical-appearance/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Identical appearance" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-106191" src="../Images/c48c8ef5dbcfaf446d527c66b9b2e0d1.png" alt="Identical Appearance" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/identical-appearance.png"/></noscript>
<p>让我们为主题按钮添加不同的背景颜色来代表不同的主题。</p>
<p>我们将把以下代码添加到<code>Global.js</code>文件中:</p>
<pre class="language-javascript hljs">Global.js</pre>
<pre class="language-javascript hljs">// theme buttons color
.light {
  background-color: hsl(0, 0%, 93%);
}
.dark {
  background-color: hsl(0, 0%, 20%);
}
.blue {
  background-color: hsl(195, 53%, 79%);
}
.green {
  background-color: hsl(150, 80%, 15%);
}
.brown {
  background-color: hsl(39, 70%, 50%);
}
.pink {
  background-color: hsl(350, 100%, 88%);
}

// active theme
.active{
    border: 3px solid hsl(0, 0%, 87%);
    }</pre>
<p>现在，如下图所示，每个按钮都有不同的颜色来对应它的主题。灯光主题(当前主题)有一个浅灰色的背景和一个不同于其他按钮的边框。这是因为我们使用了<code>active</code> <code>className</code>来为当前主题指定一个实心的<code>border</code>。在本教程的后面，我们将对按钮应用功能点击，以便在按钮被切换时将<code>active</code> <code>className</code>添加到所选主题的按钮上。</p>
<p><img data-attachment-id="106193" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/theme-colors/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Theme colors" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors.png" decoding="async" class="aligncenter size-full wp-image-106193 jetpack-lazy-image" src="../Images/19b6441dcaaa921813d8d5334807e446.png" alt="Theme Colors" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="106193" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/theme-colors/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Theme colors" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-106193" src="../Images/19b6441dcaaa921813d8d5334807e446.png" alt="Theme Colors" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/theme-colors.png"/></noscript>
<p>现在让我们创建主题。</p>
<h2 id="creating-multiple-themes">创建多个主题</h2>
<p>到目前为止，我们已经为六个主题创建了按钮。每个按钮的背景颜色对应一个主题。浅色主题按钮为白色，深色主题按钮为黑色，其他主题按钮颜色与相应的主题名称相匹配:蓝色、绿色、棕色和粉色。</p>
<p>现在，是时候实际创建主题了。</p>
<p>在<code>styles</code>文件夹中，我们创建一个<code>Theme.styled.js</code>文件并添加以下内容:</p>
<pre class="language-javascript hljs">Theme.styled.js</pre>
<pre class="language-javascript hljs">export const light = {
  name: "light-theme",
  colors: {
    header: "hsl(0, 0%, 93%)",
    background: "hsl(0, 0%, 100%)",
    footer: "hsl(0, 1%, 38%)",
    text: "hsl(0, 1%, 16%)",
    quoteBgc: "hsl(60, 40%, 100%)",
    quoteTitle: "hsl(0, 1%, 38%)",
    quoteBody: "hsl(0, 1%, 38%);",
    quoteBorder: "hsl(0, 0%, 87%)",
    border: "hsl(0, 0%, 87%)",
  },
};

export const dark = {
  name: "dark-theme",
  colors: {
    header: "hsl(0, 0%, 20%)",
    background: "hsl(0, 1%, 16%)",
    footer: "hsl(0, 0%, 93%)",
    text: "hsl(0, 0%, 100%)",
    quoteBgc: "hsl(0, 0%, 35%)",
    quoteTitle: "hsl(0, 0%, 100%)",
    quoteBody: "hsl(0, 0%, 100%)",
    quoteBorder: "hsl(0, 0%, 59%)",
    border: "hsl(0, 0%, 78%)",
  },
};

export const blue = {
  name: "blue-theme",
  colors: {
    header: "hsl(195, 53%, 79%)",
    background: "hsl(194, 100%, 97%)",
    footer: "hsl(195, 52%, 28%)",
    text: "hsl(0, 1%, 16%)",
    quoteBgc: "hsl(0, 0%, 100%)",
    quoteTitle: "hsl(195, 52%, 28%)",
    quoteBody: "hsl(0, 0%, 38%)",
    quoteBorder: "hsl(0, 0%, 87%)",
    border: "hsl(0, 0%, 87%)",
  },
};

export const green = {
  name: "green-theme",
  colors: {
    header: "hsl(150, 80%, 15%)",
    background: "hsl(150, 80%, 20%)",
    footer: "hsl(150, 80%, 80%)",
    text: "hsl(150, 80%, 80%);",
    quoteBgc: "hsl(150, 60%, 60%)",
    quoteTitle: "hsl(130, 90%, 10%)",
    quoteBody: "hsl(130, 70%, 10%)",
    quoteBorder: "hsl(130, 80%, 20%)",
    border: "hsl(170, 100%, 60%)",
  },
};

export const brown = {
  name: "brown-theme",
  colors: {
    header: "hsl(39, 70%, 50%)",
    background: "hsl(37, 83%, 54%)",
    footer: "hsl(39, 50%, 20%)",
    text: "hsl(100, 0%, 20%)",
    quoteBgc: "hsl(50, 100%, 70%)",
    quoteTitle: "hsl(37, 23%, 24%)",
    quoteBody: "hsl(30, 23%, 24%)",
    quoteBorder: "hsl(50, 50%, 50%)",
    border: "rgb(224, 189, 33)",
  },
};

export const pink = {
  name: "pink-theme",
  colors: {
    header: "hsl(350, 100%, 88%)",
    background: "hsl(300, 80%, 88%)",
    footer: "hsl(300, 10%, 28%)",
    text: "hsl(300, 100%, 28%)",
    quoteBgc: "hsl(350, 50%, 78%)",
    quoteTitle: "hsl(300, 50%, 28%)",
    quoteBody: "hsl(320, 20%, 28%)",
    quoteBorder: "hsl(300, 50%, 28%)",
    border: "hsl(300, 50%, 58%)",
  },
};</pre>
<p>在上面的代码中，我们创建了六个不同的主题对象，并根据主题的颜色给每个对象命名。我们导出对象的方式与导出其他样式组件的方式相同。</p>
<p>现在我们已经创建了主题，让我们使用<code>ThemeProvider</code>将它们添加到应用程序中。</p>
<h2 id="adding-themes-themeprovider">使用<code>ThemeProvider</code>添加主题</h2>
<p>通过 React Context API 向包装器中的每个组件提供我们的主题。我们将使用<code>ThemeProvider</code>来启用主题切换。</p>
<p>首先，让我们导入<code>ThemeProvider </code>，然后将主题从<code>Theme.styled.js</code>文件导入到<code>App.js</code>文件中。</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">import { ThemeProvider } from "styled-components";
import {
  light,
  dark,
  blue,
  green,
  brown,
  pink,
} from "./components/styles/Theme.styled";</pre>
<p>现在我们已经导入了主题，让我们用<code>ThemeProvider</code>组件包装应用程序的组件。我们还将传递一个<code>theme</code>道具到<code>ThemeProvider</code>组件中。</p>
<p>这个<code>theme</code> prop 将分配给它的任何主题对象向下传递给应用程序中由<code>ThemeProvider</code>包装的每个组件和元素，允许它们访问主题对象中存在的每个属性。</p>
<p>现在，我们把<code>light</code>主题对象作为道具传递下去。</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">function App() {
  return (
    &lt;ThemeProvider theme={light}&gt;
      &lt;div className="App"&gt;
    &lt;GlobalStyles /&gt;
      &lt;Header&gt;Game of Thrones Quotes&lt;/Header&gt;
       
      &lt;ThemeContainer&gt;
        &lt;span&gt;Themes: &lt;/span&gt;
        &lt;ThemeButton className="light active"&gt;&lt;/ThemeButton&gt;
        &lt;ThemeButton className="dark"&gt;&lt;/ThemeButton&gt;
        &lt;ThemeButton className="blue"&gt;&lt;/ThemeButton&gt;
        &lt;ThemeButton className="green"&gt;&lt;/ThemeButton&gt;
        &lt;ThemeButton className="brown"&gt;&lt;/ThemeButton&gt;
        &lt;ThemeButton className="pink"&gt;&lt;/ThemeButton&gt;
       &lt;/ThemeContainer&gt;

   
      &lt;Quotes /&gt;

      &lt;Footer&gt;
          &lt;p&gt;
            Made with love by &lt;a href="http://bio.link/timonwa"&gt;Timonwa&lt;/a&gt;
          &lt;/p&gt;
        &lt;/Footer&gt;
     &lt;/div&gt;
     &lt;/ThemeProvider&gt;
  );
}</pre>
<p>现在，我们将进入每个样式化的组件，并重构代码以访问主题的颜色属性，主题当前设置为 light theme。</p>
<p>我们将首先导入<code>Theme.styled</code>组件；我将在本教程的稍后部分解释原因。</p>
<pre class="language-javascript hljs">Global.js</pre>
<pre class="language-javascript hljs">import * as theme from "./Theme.styled";</pre>
<pre class="language-javascript hljs">Global.styled.js</pre>
<pre class="language-javascript hljs">body {
  background-color: ${({ theme }) =&gt; theme.colors.background};
  color: ${({ theme }) =&gt; theme.colors.text};
  font-family: monospace;
  overflow-x: hidden;
}

// theme buttons color
.light {
  background-color: ${theme.light.colors.header};
}
.dark {
  background-color: ${theme.dark.colors.header};
}
.blue {
  background-color: ${theme.blue.colors.header};
}
.green {
  background-color: ${theme.green.colors.header};
}
.brown {
  background-color: ${theme.brown.colors.header};
}
.pink {
  background-color: ${theme.pink.colors.header};
}

// active theme
.active{
    border: 3px solid ${({ theme }) =&gt; theme.colors.border};
}</pre>
<p>在<code>body</code>样式中，我们使用一个无名函数来访问我们传入的主题的颜色属性，这个函数也接受主题作为参数。现在，如果我们将<code>theme</code>道具设置为<code>dark</code>，我们将从<code>dark</code>主题颜色属性中获取背景和文本颜色。同样的道理也适用于浅色、蓝色、绿色、棕色和粉色。</p>
<p>然而，按钮的背景颜色不是从<code>theme</code>道具中获得的，而是直接从我们导入的主题中获得的。如果我们根据传递的<code>theme</code>属性设置按钮背景颜色，那么所有六个按钮都将具有相同的背景颜色——活动(当前)主题的背景颜色。这就是为什么我们首先进口了<code>Theme.styled</code>组件</p>
<p>让我们来测试一下:</p>
<pre class="language-javascript hljs">Global.styled.js</pre>
<pre class="language-javascript hljs">// theme buttons color
.light {
  background-color: ${({ theme }) =&gt; theme.colors.header};
}
.dark {
  background-color: ${({ theme }) =&gt; theme.colors.header};
}
.blue {
  background-color: ${({ theme }) =&gt; theme.colors.header};
}
.green {
  background-color: ${({ theme }) =&gt; theme.colors.header};
}
.brown {
  background-color: ${({ theme }) =&gt; theme.colors.header};
}
.pink {
  background-color: ${({ theme }) =&gt; theme.colors.header};
}</pre>
<p>正如你所看到的，所有的主题按钮目前都有一个浅灰色的背景颜色，正如默认的<code>theme</code>属性:<code>light</code>中所指定的。</p>
<p><img data-attachment-id="106196" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/light-theme/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Light theme" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme.png" decoding="async" class="aligncenter size-full wp-image-106196 jetpack-lazy-image" src="../Images/74a419f87b091caada672a80072f9e2e.png" alt="Light Theme" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="106196" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/light-theme/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Light theme" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-106196" src="../Images/74a419f87b091caada672a80072f9e2e.png" alt="Light Theme" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/light-theme.png"/></noscript>
<p>让我们将按钮还原为正确的代码:</p>
<p><img data-attachment-id="106198" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/color-themes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Color themes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes.png" decoding="async" class="aligncenter size-full wp-image-106198 jetpack-lazy-image" src="../Images/a7c31b89a2abfd741babac19998a7898.png" alt="Color Themes" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="106198" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/color-themes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Color themes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-106198" src="../Images/a7c31b89a2abfd741babac19998a7898.png" alt="Color Themes" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes.png"/></noscript>
<p>继续我们的重构，让我们对其他样式的组件进行修改，比如<code>Header</code>、<code>Footer</code>、<code>Card</code>和<code>ThemeSwitching</code>，这样他们就可以访问我们的<code>theme</code>道具。</p>
<p>用以下内容替换现有样式属性中的相关代码:</p>
<pre class="language-javascript hljs">Header.styled.js</pre>
<pre class="language-javascript hljs">export const Header = styled.header`
  background-color: ${({ theme }) =&gt; theme.colors.header};
`;</pre>
<pre class="language-javascript hljs">Footer.styled.js</pre>
<pre class="language-javascript hljs">export const Footer = styled.footer`
  background-color: ${({ theme }) =&gt; theme.colors.footer};
  color: ${({ theme }) =&gt; theme.colors.background};

  a {
    color: ${({ theme }) =&gt; theme.colors.background};
  }
`;</pre>
<pre class="language-javascript hljs">Card.styled.js</pre>
<pre class="language-javascript hljs">export const Card = styled.div`
  background-color: ${({ theme }) =&gt; theme.colors.quoteBgc};
  border: 1px solid ${({ theme }) =&gt; theme.colors.quoteBorder};
`;

export const CardTitle = styled.div`
  color: ${({ theme }) =&gt; theme.colors.quoteTitle};
  border-bottom: 1px solid ${({ theme }) =&gt; theme.colors.quoteBorder};
`;

export const CardBody = styled.div`
  color: ${({ theme }) =&gt; theme.colors.quoteBody};
`;</pre>
<pre class="language-javascript hljs">ThemeSwitching.styled.js</pre>
<pre class="language-javascript hljs">export const ThemeContainer = styled.div`
  background-color: ${({ theme }) =&gt; theme.colors.background};
  border-bottom: 1px solid ${({ theme }) =&gt; theme.colors.border};
`;

export const ThemeButton = styled.button`
  border: 1px solid ${({ theme }) =&gt; theme.colors.border};

  &amp;:hover {
    box-shadow: 2px 2px 2px ${({ theme }) =&gt; theme.colors.border};
`;</pre>
<p>如下图所示，该应用在浏览器中看起来还是一样的。我们也可以改变<code>theme</code>道具<code> to other themes to confirm each theme has the desired appearance with the styled elements.</code></p>
<p><img data-attachment-id="106200" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/color-themes-final/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Color themes final" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final.png" decoding="async" class="aligncenter size-full wp-image-106200 jetpack-lazy-image" src="../Images/e3232877bce18595fc3caab991e03eb9.png" alt="Color Themes Final" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final-300x138.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="106200" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/color-themes-final/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final.png" data-orig-size="730,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Color themes final" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final-300x138.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-106200" src="../Images/e3232877bce18595fc3caab991e03eb9.png" alt="Color Themes Final" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final-300x138.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/color-themes-final.png"/></noscript>
<p>现在，是时候让主题按钮工作了。</p>
<h2 id="switching-themes">切换主题</h2>
<p>如果用户不能在 UI 中改变主题偏好，那么给用户一个主题偏好是没有意义的，不是吗？因此，让我们编写代码，只需点击一个按钮就可以实现主题切换。</p>
<p>我们将用<code>useState</code> React 钩子创建一个<code>selectedTheme </code>状态。这个状态最初将被设置为<code>light</code>主题对象。</p>
<p>首先，我们将把<code>useState</code>钩子导入 App.js 文件:</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">import React, { useState } from "react";</pre>
<p>然后，我们将创建状态，就像这样，就在<code>return</code>键之前:</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">function App() {
  // theme state
  const [selectedTheme, setSelectedTheme] = useState(light);
  return (</pre>
<p>接下来，我们将把<code>selectedTheme</code>作为<code>ThemeProvider</code>中的<code>theme</code>道具传入。当<code>selectedTheme</code>状态改变时，<code>theme</code>道具也会改变，导致页面更新到新的主题。</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">return (
    &lt;ThemeProvider theme={selectedTheme}&gt;
      &lt;div className="App"&gt;</pre>
<p>现在，我们将编写一个<code>HandleThemeChange</code>函数，它将在主题按钮被点击时运行。这将被添加到<code>App.js</code>文件中，就在<code>useState</code>函数的下面:</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">// function to handle user theme selection on click and save it to local storage
  const HandleThemeChange = (theme) =&gt; {
    setSelectedTheme(theme);
  };</pre>
<p>当用户点击一个按钮时，一个参数作为参数传递给<code>HandleThemeChange</code>函数(即与该按钮相关联的主题对象)。然后，<code>HandleThemeChange</code>函数将<code>selectedTheme</code>状态更改为传递的参数。</p>
<p>例如，如果用户点击<code>dark</code>主题按钮，深色主题对象将作为参数传递，并用作<code>HandleThemeChange</code>函数中的参数。该功能会将<code>selectedTheme</code>设置为<code>dark</code>。反过来，这将作为道具传递给<code>ThemeProvider</code>，用与所选主题相关的颜色属性更新浏览器中页面的外观。</p>
<p>现在，我们需要将这个功能附加到按钮上。我们将把以下内容添加到<code>App.js</code>文件中:</p>
<p>App.js</p>
<pre class="language-javascript hljs">       &lt;ThemeContainer&gt;
          &lt;span&gt;Themes: &lt;/span&gt;
          &lt;ThemeButton
            className={`light ${selectedTheme === light ? "active" : ""}`}
            onClick={() =&gt; HandleThemeChange(light)}&gt;&lt;/ThemeButton&gt;
          &lt;ThemeButton
            className={`dark ${selectedTheme === dark ? "active" : ""}`}
            onClick={() =&gt; HandleThemeChange(dark)}&gt;&lt;/ThemeButton&gt;
          &lt;ThemeButton
            className={`blue ${selectedTheme === blue ? "active" : ""}`}
            onClick={() =&gt; HandleThemeChange(blue)}&gt;&lt;/ThemeButton&gt;
          &lt;ThemeButton
            className={`green ${selectedTheme === green ? "active" : ""}`}
            onClick={() =&gt; HandleThemeChange(green)}&gt;&lt;/ThemeButton&gt;
          &lt;ThemeButton
            className={`brown ${selectedTheme === brown ? "active" : ""}`}
            onClick={() =&gt; HandleThemeChange(brown)}&gt;&lt;/ThemeButton&gt;
          &lt;ThemeButton
            className={`pink ${selectedTheme === pink ? "active" : ""}`}
            onClick={() =&gt; HandleThemeChange(pink)}&gt;&lt;/ThemeButton&gt;
        &lt;/ThemeContainer&gt;</pre>
<p>在上面的代码中，我们为每个按钮的<code>className</code>添加了一个条件三元运算符。</p>
<p>该操作符检查<code>selectedTheme</code>是否等于与按钮相关联的主题。如果是，它会向该按钮添加一个<code>active </code>类。</p>
<p>例如，由于在<code>HandleThemeChange</code>函数中运行的代码，我们的<code>selectedTheme</code>等于<code>light</code>。因此，如果我们单击<code>light</code>按钮，一个<code>active</code>类将被添加到<code>light</code>按钮，因为我们的<code>selectedTheme</code>也等于<code>light</code>。</p>
<p>您可能还记得本教程前面的内容，即<code>active</code>类为任何附加了<code>active</code>类的主题按钮添加了框阴影样式。</p>
<p>让我们看看浏览器中的应用程序，并选择一个新的主题。您会注意到页面的颜色会根据所选的主题而变化。此外，选定的主题按钮有一个方框阴影。</p>

<p>应用程序几乎完成了！我们仍然有一个关键的问题要解决，以便主题切换能够完美地执行。</p>
<p>目前，如果我们选择一个主题而不是预先选择的灯光(默认)主题，当我们重新加载页面时，页面颜色将恢复为与灯光主题相关的颜色:</p>

<p>颜色回复到默认主题，因为主题偏好没有被存储或保存在某处(即，在本地存储或缓存中)。</p>
<p>这是一个必须解决的关键问题。对于有不止一个页面的应用程序，每次用户导航到一个新页面时，主题都会恢复到默认主题。</p>
<h2 id="saving-theme-local-storage">将主题保存在本地存储中</h2>
<p>将<code>selectedTheme</code>保存在本地存储相对容易，只需要几行代码。我们将使用<code>useEffect</code> React 钩子和<code>localStorage</code>。</p>
<p>让我们更新<code>HandleThemeChange</code>函数，就像这样:</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">const HandleThemeChange = (theme) =&gt; {
    setSelectedTheme(theme);
    localStorage.setItem("current-theme", JSON.stringify(theme));
  };</pre>
<p>现在，当用户点击一个主题按钮时，<code>selectedTheme</code>状态会改变，首选主题会作为<code>current-theme</code>保存到<code>localStorage</code>中。</p>
<p>您会注意到，在将<code>theme</code>保存到<code>localStorage</code>之前，我们确实需要先将它字符串化。</p>
<p>现在，让我们创建<code>useEffect</code>钩子。这个函数应该放在代码中紧接在<code>useState</code>之后:</p>
<pre class="language-javascript hljs">App.js</pre>
<pre class="language-javascript hljs">  // theme state
  const [selectedTheme, setSelectedTheme] = useState(light);

  // react hook to get the theme selected by the user that is saved in local storage
  useEffect(() =&gt; {
    const currentTheme = JSON.parse(localStorage.getItem("current-theme"));
    if (currentTheme) {
      setSelectedTheme(currentTheme);
    }
  }, []);</pre>
<p>为了使用它，我们还需要从 React 导入这个钩子:</p>
<pre class="language-javascript hljs">import React, { useState, useEffect } from "react";</pre>
<p>当应用程序最初加载时，useEffect 检查 localStorage 以查看是否存储了当前主题。如果存储了一个当前主题，useEffect 将这个主题作为一个字符串返回，我们解析数据，将其改回 JavaScript。useEffect 还将<code>selectedTheme</code>设置为存储的主题。</p>
<p>如果 useEffect 没有找到存储在 localStorage 中的主题，那么它会将<code>selectedTheme</code>设置为默认主题(在本例中是 light 主题)。</p>
<p>如果我们选择除了 light 主题之外的任何主题并刷新页面，我们的主题首选项将保持不变，如下所示:</p>

<h2 id="overriding-themeprovider">超越<code>ThemeProvider</code></h2>
<p>有时，您可能需要为一个特定样式的组件或一组样式的组件覆盖您的<code>ThemeProvider</code>。您可以用一个新的<code>ThemeProvider</code>包装样式化的组件，并将新的主题对象传入<code>theme</code>道具，从而在<code>ThemeProvider</code>中嵌套一个<code>ThemeProvider</code>。</p>
<p>或者，您可以直接给样式化的组件一个<code>theme</code>道具并传入主题对象。还有一个选择，就是将函数作为主题道具传递给一个<code>ThemeProvider</code>。</p>
<h3 id="nesting-themeprovider">嵌套一个<code>ThemeProvider</code></h3>
<p>您可以让多个<code>ThemeProvider</code>相互嵌套。一个组件将选择并使用最近的<code>ThemeProvider</code>的主题。</p>
<p>使用这种策略，您可以同时覆盖多个样式化的组件。例如，我们的<code>Quotes</code> React 组件嵌套了我们的<code>Card</code>、<code>CardTitle</code>和<code>CardBody</code>样式的组件。</p>
<p>为了演示这一点，让我们用另一个<code>ThemeProvider</code>包装我们的<code>Quotes</code> React 组件，并将我们的一个主题传递到它的主题道具中。接下来，我们将创建并传入一个全新的主题对象，但现在我们将传入现有的<code>pink</code>主题:</p>
<p>App.js</p>
<pre class="language-javascript hljs">&lt;ThemeProvider theme={selectedTheme}&gt;
  &lt;div className="App"&gt;
    …
    &lt;ThemeProvider theme={pink}&gt;
      &lt;Quotes /&gt;
    &lt;/ThemeProvider&gt;
    &lt;Footer&gt;
      &lt;p&gt;
        Made with love by &lt;a href="http://bio.link/timonwa"&gt;Timonwa&lt;/a&gt;
      &lt;/p&gt;
    &lt;/Footer&gt;
  &lt;/div&gt;
&lt;/ThemeProvider&gt;
</pre>
<p>如你所见，即使我们从一个主题切换到另一个主题，这些<code>Quotes</code>卡片仍然保持它们的粉色主题。</p>
<p><img data-attachment-id="137978" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/nesting-a-themeprovider/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/nesting-a-themeprovider.gif" data-orig-size="453,213" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Nesting a ThemeProvider" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/nesting-a-themeprovider-300x141.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/nesting-a-themeprovider.gif" decoding="async" class="aligncenter wp-image-137978 size-full jetpack-lazy-image" src="../Images/64a7c1aed8adc59e91c2617100a937a2.png" alt="Nesting a ThemeProvider" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/nesting-a-themeprovider.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/nesting-a-themeprovider.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="137978" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/nesting-a-themeprovider/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/nesting-a-themeprovider.gif" data-orig-size="453,213" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Nesting a ThemeProvider" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/nesting-a-themeprovider-300x141.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/nesting-a-themeprovider.gif" decoding="async" loading="lazy" class="aligncenter wp-image-137978 size-full" src="../Images/64a7c1aed8adc59e91c2617100a937a2.png" alt="Nesting a ThemeProvider" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/nesting-a-themeprovider.gif"/></noscript>
<h3 id="passing-theme-directly-into-component">将主题直接传递到组件中</h3>
<p>我们也可以通过将一个<code>theme</code>属性直接传递给一个样式化的组件来覆盖<code>ThemeProvider</code>的默认样式。</p>
<p>为了演示这一点，让我们将一个带有新主题对象的<code>theme</code>道具传递给我们的<code>Footer</code>样式的组件。</p>
<p>App.js</p>
<pre class="language-javascript hljs">&lt;ThemeProvider theme={selectedTheme}&gt;
  &lt;div className="App"&gt;
    …
    &lt;ThemeProvider theme={pink}&gt;
      &lt;Quotes /&gt;
    &lt;/ThemeProvider&gt;
    &lt;Footer theme={{
        colors: {
          background: "hsl(37, 83%, 54%)",
          footer: "hsl(39, 50%, 20%)",
        },
      }}
      &gt;
      &lt;p&gt;
        Made with love by &lt;a href="http://bio.link/timonwa"&gt;Timonwa&lt;/a&gt;
      &lt;/p&gt;
    &lt;/Footer&gt;
  &lt;/div&gt;
&lt;/ThemeProvider&gt;
</pre>
<p>我们的<code>Footer</code>风格的组件现在使用<code>brown</code>主题，不像我们的<code>Quote</code>卡片，当我们在主题之间切换时，它不会改变。</p>
<p><img data-attachment-id="137980" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/passing-theme-directly-into-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-theme-directly-into-component.gif" data-orig-size="455,213" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Passing theme directly into component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-theme-directly-into-component-300x140.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-theme-directly-into-component.gif" decoding="async" class="aligncenter wp-image-137980 size-full jetpack-lazy-image" src="../Images/9b4f6939f9b5081f07da9b221890b880.png" alt="Passing Theme Directly into Component" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-theme-directly-into-component.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-theme-directly-into-component.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="137980" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/passing-theme-directly-into-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-theme-directly-into-component.gif" data-orig-size="455,213" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Passing theme directly into component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-theme-directly-into-component-300x140.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-theme-directly-into-component.gif" decoding="async" loading="lazy" class="aligncenter wp-image-137980 size-full" src="../Images/9b4f6939f9b5081f07da9b221890b880.png" alt="Passing Theme Directly into Component" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-theme-directly-into-component.gif"/></noscript>
<p><strong><em/></strong>注意，为了使这些工作，新的主题对象必须对应于被样式化的组件所使用的当前道具</p>
<h3 id="passing-functions-as-theme-props">传入函数作为<code>theme</code>道具</h3>
<p>您还可以将函数作为<code>theme</code>道具传递给<code>ThemeProvider</code>。这些函数将从父函数<code>ThemeProvider</code>接收主题作为参数。</p>
<p>例如，假设我们想要反转页脚的颜色值。我们将从在我们的<code>App.js</code>文件中的<code>HandleThemeChange</code>函数下面添加以下函数开始:</p>
<pre class="language-javascript hljs">//App.js
const invertedSelectedTheme = ({ colors }) =&gt; ({
  colors: {
    background: colors.footer,
    footer: colors.background,
  },
});
</pre>
<p>然后，我们将在我们的<code>Footer</code>样式的组件下面添加一个新的<code>ThemeProvider</code>，并且我们将在<code>ThemeProvider</code>中创建一个新的<code>Footer</code>样式的组件。这个新页脚将使我们能够看到原始页脚和反转页脚之间的差异:</p>
<pre class="language-javascript hljs">//App.js
&lt;ThemeProvider theme={invertedSelectedTheme}&gt;
  &lt;Footer&gt;
    &lt;p&gt;
     Inverted Footer
    &lt;/p&gt;
  &lt;/Footer&gt;
&lt;/ThemeProvider&gt;
</pre>
<p>这个新的<code>ThemeProvder</code>有我们的新函数<code>invertedSelectedTheme</code>，作为<code>theme</code>道具传递给它。它接收传入其父节点<code>ThemeProvider</code>的主题，父节点是<code>selectedTheme</code>。我们知道我们的主题对象是由两个对象组成的数组:<code>name</code>和<code>colors</code>。所以在我们的函数中，我们解构了我们的参数，也就是主题，只传入了<code>colors</code>。</p>
<p>Out footer 使用了<code>footer</code>和<code>background</code>颜色，我们在新函数中反转了颜色。于是当前的<code>footer</code>色变成了我们的<code>background</code>色，当前的<code>background</code>色变成了我们的<code>footer</code>色。</p>
<p>让我们在浏览器中查看更改:</p>
<p><strong> <em>注意，</em> </strong> <em>需要注意的是，直接传递给样式化组件的嵌套<code>ThemeProvider</code>或<code>theme</code>道具的主题会取消其父<code>ThemeProvider</code>的主题。这意味着您无法再次访问该父样式。因此，当你创建一个新的<code>theme</code>道具时，确保你将所有你需要的样式传递给它</em></p>
<p><img data-attachment-id="137982" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/passing-in-functions-as-theme-props/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-in-functions-as-theme-props.gif" data-orig-size="455,214" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Passing in functions as theme props" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-in-functions-as-theme-props-300x141.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-in-functions-as-theme-props.gif" decoding="async" class="aligncenter wp-image-137982 size-full jetpack-lazy-image" src="../Images/30aabcbc872a4606c3845f68b113b8d8.png" alt="Passing in Functions as Theme Props" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-in-functions-as-theme-props.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-in-functions-as-theme-props.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="137982" data-permalink="https://blog.logrocket.com/build-react-theme-switcher-app-styled-components/attachment/passing-in-functions-as-theme-props/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-in-functions-as-theme-props.gif" data-orig-size="455,214" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Passing in functions as theme props" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-in-functions-as-theme-props-300x141.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-in-functions-as-theme-props.gif" decoding="async" loading="lazy" class="aligncenter wp-image-137982 size-full" src="../Images/30aabcbc872a4606c3845f68b113b8d8.png" alt="Passing in Functions as Theme Props" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/passing-in-functions-as-theme-props.gif"/></noscript>
<h2 id="conclusion">结论</h2>
<p>styled-components 使得为 React web 应用程序创建和维护多个主题变得非常容易。</p>
<p>在本教程中，我们演示了如何使用样式化组件为以《权力的游戏》为主题的 React 应用程序构建自定义主题切换器。</p>
<p>我们展示了如何使用本地存储来保存用户的主题首选项，以便当他们重新加载页面、导航到另一个页面，甚至关闭页面或浏览器，几天后再次访问该页面时，他们的主题首选项保持不变。</p>
<p>最后，我们回顾了如何创建和传递作为主题的函数，并探讨了如何通过在<code>ThemeProvider</code>中嵌套主题提供者或者将主题直接传递给组件来覆盖当前主题。</p>
<p>在<a href="https://github.com/Timonwa/theme-switching" target="_blank" rel="noopener"> GitHub </a>上可以查看教程中使用的完整代码，在这里可以查看部署的 app <a href="theme-switching.vercel.app" target="_blank" rel="noopener">。</a></p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用 LogRocket 消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款 React analytics 解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket 告诉您 React 应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS 异常、前端性能指标和用户交互。然后，LogRocket 使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的 React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试 LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>