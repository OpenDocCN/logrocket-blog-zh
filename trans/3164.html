<html>
<head>
<title>Million: Build apps with JSX faster than React and Preact - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>百万:用 JSX 构建应用程序的速度比 React 和 Preact 还要快</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/million-js-build-apps-jsx-faster-react-preact/#0001-01-01">https://blog.logrocket.com/million-js-build-apps-jsx-faster-react-preact/#0001-01-01</a></blockquote><div><article class="article-post">
<p>React 是撰写本文时最主要的前端 web 框架，然而，它也存在一些问题，例如，膨胀的包大小会降低应用程序的性能。</p>
<p>虽然已经有许多尝试来最小化这些因素，但是新的创新寻求在已经取得的进展上进行改进。在本文中，我们将探索<a href="https://millionjs.org"> Million，一个轻量级虚拟 DOM </a>。我们还将比较 Million 与 React 和 Preact 的性能和特性。我们开始吧！</p>

<h2 id="react-common-issues">React 的常见问题</h2>
<p>React 引入了几项有用的创新，例如，一种用于表达声明性 UI 的类似 HTML 的语法，可以转换成<code>React.createElement</code>调用。React 还为我们提供了优化 DOM 更新的能力。通过创建 DOM 树的虚拟版本来跟踪实际 DOM 中的差异，我们可以将更新限制在实际发生变化的内容上。</p>
<p>然而，React 的一个问题是，您必须为每个 React 应用程序提供 React 库。这样做会增大包的大小，从而降低首次绘制的速度，或者降低 web 应用程序的初始加载速度。</p>
<p>React 在撰写本文时是 18.2 版本，由两个库组成:React，10.7kb 缩小版，和<code><a href="https://reactjs.org/docs/react-dom.html">react-dom</a></code>，131.9.kb 缩小版。对于浏览器来说，这可能是一个很大的负担，而且它甚至不包括 web 应用程序本身的实际代码。</p>
<p>另一个问题是虚拟 DOM，它可能是处理密集型的。虽然虚拟 DOM 可以在开发良好的应用程序上加速渲染，但它也会在没有使用最佳实践或使虚拟 DOM 能够有效优化的开发不良的应用程序上增加大量处理工作负载。</p>
<h2 id="speeding-things-up-preact">使用 Preact 加快速度</h2>
<p>虽然许多开发人员喜欢使用 React 的开发人员体验和生产效率，但减轻大的包大小和虚拟 DOM 工作负载是一个关键的优先事项。</p>
<p>解决这些问题的最初尝试之一是 Preact。Preact <a href="https://blog.logrocket.com/introduction-to-preact-a-smaller-faster-react-alternative-ad5532eb6d79/">创建了一个虚拟 DOM 实现</a>,它利用了 web 标准，因此需要交付的代码更少。结果实现了 3kb 的库大小，比 React 小得多，更快的虚拟 DOM，以及通过使用 HTM 标记的模板文字而不是 JSX 来避免翻译的能力。</p>
<p>Preact 在那些关心 react 的包大小和虚拟 DOM 处理的人中间变得越来越流行。事实上，它是<a href="https://fresh.deno.dev/"> Fresh </a>的本地模板库，这是 Deno 运行时的一个新的全栈 web 框架。</p>
<h2 id="compilation-next-generation-svelte-solid-million-js">编译:苗条、结实、百万的下一代</h2>
<p>另一项开发试图通过完全消除将框架运送到浏览器的需要来进一步降低包的大小和速度。这项创新包括流行的工具，如 Svelte、Solid 和，Million，所有这些工具都因其速度而越来越受欢迎。</p>
<h3>苗条的</h3>
<p>由 Rich Harris 创建的 Svelte 采用了传统的 web 模式和标准。苗条的应用程序被编译成网络标准代码，所以没有框架必须运送给最终用户。Rich Harris 最近被 Vercel 聘用，全职开发“苗条”<a href="https://blog.logrocket.com/intro-testing-sveltekit-applications/">和它的“苗条工具包”框架</a>。</p>
<h3>固体</h3>
<p>由 Ryan Carniato 创作，Solid 的灵感来自于 Knockout 这样的框架，但通过使用 JSX 带来了非常熟悉的 React 风格。</p>
<p>可靠的应用程序，如 Svelte，被编译，只有应用程序代码被发送给最终用户。Solid 的反应模型与 React 有很大的不同，所以即使你使用 JSX 语法，某些模式的表现也有很大的不同。</p>
<p>不是每次更新时都重新运行组件函数，而是将代码的一部分指定为效果，每当依赖项更新时都重新计算这些效果。Ryan Carniato 已被 Netlify 聘用，全职工作于 Solid。</p>
<h3>百万</h3>
<p>与 Solid 类似，Million 允许你使用 JSX 语法并编译你的代码，这样你给浏览器带来的东西就少多了。</p>
<p>Million 有一个精简的虚拟 DOM 实现，像 Preact 一样，用来维护一个更加一致的 API 来作出反应。与 Preact 的 3kb 虚拟 DOM 实现相比，100 万只船的容量不到 1kb。</p>
<p>Million 的 API 是开源的，允许任何人在其上构建。理论上，如果我想创建一个编译器来编译 Vue 组件，使之与百万虚拟 DOM 一起工作，我可以做到。</p>
<p>Million 在其当前版本中提供了更快的类似 React 的体验，但也为开发人员打开了大门，让他们可以在其轻薄快速的虚拟 DOM 方法之上构建新框架或扩展现有框架。让我们通过构建一个快速应用程序来看看它是如何工作的。</p>
<h2 id="settingupyourmillionapplication">设置您的百万应用程序</h2>
<p>前往这个<a href="https://github.com/aidenybai/million-react">百万模板</a>，点击<strong>使用模板</strong>在你的 GitHub 账户中创建你自己的模板副本。</p>
<p>通过运行<code>git clone &lt;github repo url&gt;</code>克隆到您的计算机上。然后，将<code>cd</code>放到新创建的文件夹中，并运行<code>npm install</code>来安装所需的依赖项。最后运行<code>npm run dev</code>运行开发服务器。</p>
<p>当您转到<code>localhost:3000</code>时，您应该会看到以下内容:</p>
<p><img data-attachment-id="125867" data-permalink="https://blog.logrocket.com/million-js-build-apps-jsx-faster-react-preact/attachment/million-react-app-template/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template.png" data-orig-size="730,435" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="million-react-app-template" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template.png" decoding="async" class="aligncenter wp-image-125867 size-full jetpack-lazy-image" src="../Images/3dae5f6cc57ce608d87af43e15924986.png" alt="Million React App Template" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template-300x179.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="125867" data-permalink="https://blog.logrocket.com/million-js-build-apps-jsx-faster-react-preact/attachment/million-react-app-template/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template.png" data-orig-size="730,435" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="million-react-app-template" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template.png" decoding="async" loading="lazy" class="aligncenter wp-image-125867 size-full" src="../Images/3dae5f6cc57ce608d87af43e15924986.png" alt="Million React App Template" srcset="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template-300x179.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/million-react-app-template.png"/></noscript>
<p>我们现在已经准备好开始开发这款价值百万的应用，这应该和使用 React 没有什么不同。</p>
<h2 id="creating-basic-counter">创建基本计数器</h2>
<p>转到您的<code>src/App.jsx</code>文件，用下面的代码替换其中的内容，这会清空屏幕:</p>
<pre>import { useState } from 'react';
import './App.css';
function App() {
  // State for the counter
  const [count, setCount] = useState(0);
  return (
    &lt;div className="App"&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>现在，让我们构建我们的传统计数器，就像我们在任何早期阶段的 React 教程中一样:</p>
<pre>import { useState } from 'react';
import './App.css';
function App() {
  // State for the counter
  const [count, setCount] = useState(0);
  // Function to increment counter
  function addCount(){
    setCount((current) =&gt; current + 1)
  }
  return (
    &lt;div className="App"&gt;
      &lt;h1&gt;{count}&lt;/h1&gt;
      &lt;button onClick={addCount}&gt;Add One&lt;/button&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>现在，您应该会在屏幕上看到以下内容:</p>
<p><img data-attachment-id="125871" data-permalink="https://blog.logrocket.com/million-js-build-apps-jsx-faster-react-preact/attachment/example-counter-application-react-million/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million.png" data-orig-size="480,364" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="example-counter-application-react-million" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million-300x228.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million.png" decoding="async" class="aligncenter wp-image-125871 size-full jetpack-lazy-image" src="../Images/d50a27afbb74680954da857306f87d27.png" alt="Example Counter Application React Million" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million.png 480w, https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million-300x228.png 300w" data-lazy-sizes="(max-width: 480px) 100vw, 480px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="125871" data-permalink="https://blog.logrocket.com/million-js-build-apps-jsx-faster-react-preact/attachment/example-counter-application-react-million/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million.png" data-orig-size="480,364" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="example-counter-application-react-million" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million-300x228.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million.png" decoding="async" loading="lazy" class="aligncenter wp-image-125871 size-full" src="../Images/d50a27afbb74680954da857306f87d27.png" alt="Example Counter Application React Million" srcset="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million.png 480w, https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million-300x228.png 300w" sizes="(max-width: 480px) 100vw, 480px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/07/example-counter-application-react-million.png"/></noscript>
<p>就是这样，您不需要对 React 中的应用程序开发做任何更改，就可以在 Million 中进行开发，但是您将受益于 Million 针对超薄捆绑包使用的更快的虚拟 DOM 实现和编译。</p>
<h2 id="conclusion">结论</h2>
<p>和 Preact 一样，Million 解决了大型 react 包和重量级虚拟 DOM 的问题，但增加了编译功能，以进一步提高速度和减少包。</p>
<p>有了 Million，我们可以享受用我们熟悉的 React 方式开发应用程序的乐趣，而不用做任何大的改动。然而，请记住<a href="https://github.com/aidenybai/million-react#limitations">一些新功能可能不会立即可用</a>。前端框架空间仍然是 web 开发空间中许多创新的中心，看到这个项目的成果是令人兴奋的。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用 LogRocket 消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款 React analytics 解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket 告诉您 React 应用程序中实际影响用户的最具影响力的 bug 和 UX 问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS 异常、前端性能指标和用户交互。然后，LogRocket 使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的 React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试 LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>