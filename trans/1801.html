<html>
<head>
<title>How to integrate PayPal payments with React Native - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何将 PayPal 支付与 React Native - LogRocket 博客集成</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/#0001-01-01">https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在 React 原生应用中添加支付接口的方法并不多。因此，许多移动开发者选择使用 PayPal SDK 构建自己的支付界面。</p>
<p>PayPal 是世界上最早也是最大的互联网支付服务之一。它在 200 个国家的可用性使其成为企业和个人的可靠支付接口。PayPal 有一个巨大的库，可以集成各种编程语言，包括 Python、Java、JavaScript、PHP 等。</p>
<p>在本教程中，我们将向您展示如何在 React Native 中使用 PayPal SDK for JavaScript 通过将 web 和本地技术相互链接来构建支付接口。</p>
<p>我们将从构建基本的<a href="https://reactnative.dev" target="_blank" rel="noopener"> React Native </a>和<a href="http://reactjs.org" target="_blank" rel="noopener"> React </a>应用开始。要继续学习，您应该已经熟悉 JavaScript、Node.js 工具，如<code>npx</code>和<code>npm</code>或<code>yarn</code>、模块和基本的 React 组件。你还需要一个 PayPal 开发者账户<a href="https://developer.paypal.com/" target="_blank" rel="noopener">来创建支付整合的凭证。</a></p>
<p>我们将使用 PayPal 的 web JavaScript 集成 API。我们将在 React 中将支付界面构建为一个单页应用程序，并将其托管在<a href="https://firebase.google.com/docs/hosting" target="_blank" rel="noopener"> Firebase Hosting </a>上。最后，我们将使用<a href="https://blog.logrocket.com/the-complete-guide-to-react-native-webview/" target="_blank" rel="noopener"> React 本地 WebView </a>来创建 React 本地应用程序和 React web 应用程序之间的链接。</p>
<h2>React 原生 PayPal 集成:基本设置</h2>
<p>首先，我们将创建一个基本的 React 本机应用程序。要创建应用程序，只需输入以下命令:</p>
<pre>$ npx react-native init myPayPalApp
</pre>
<p>我们还需要创建一个反应应用程序。要创建 web 应用程序，请输入以下命令:</p>
<pre>npx create-react-app my-paypal-web
</pre>
<p>由于这些应用程序正在初始化，我们将使用我们的 PayPal 开发人员帐户来创建新的应用程序和集成所需的凭据。</p>
<p>前往<a href="https://developer.paypal.com" target="_blank" rel="noopener">developer.paypal.com</a>并登录您的开发者账户。登录后，您将被重定向到您的控制面板，如下所示:</p>
<p><img data-attachment-id="50044" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/paypal-developers-dashboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Paypal developers dashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard.png" decoding="async" class="aligncenter size-full wp-image-50044 jetpack-lazy-image" src="../Images/f812627cd7ae37523bdffe50e1ef9f29.png" alt="Paypal Developers Dashboard" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50044" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/paypal-developers-dashboard/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Paypal developers dashboard" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50044" src="../Images/f812627cd7ae37523bdffe50e1ef9f29.png" alt="Paypal Developers Dashboard" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-developers-dashboard.png"/></noscript>
<p>您将看到一个默认的应用程序列表。对于本教程，我们将采取以下步骤来创建一个新的应用程序。</p>
<p>点击<strong>创建应用</strong>按钮。我们正在使用<a href="https://developer.paypal.com/docs/api-basics/sandbox/" target="_blank" rel="noopener"> PayPal 沙盒</a>进行测试，所以你可以根据自己的喜好随意填充。然后点击，<strong>创建 App </strong>。</p>
<p><img data-attachment-id="50045" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/create-new-app-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create new app page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page.png" decoding="async" class="aligncenter size-full wp-image-50045 jetpack-lazy-image" src="../Images/ac558b8c6961ff09534df3165eaffa74.png" alt="Create New App Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50045" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/create-new-app-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create new app page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50045" src="../Images/ac558b8c6961ff09534df3165eaffa74.png" alt="Create New App Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-app-page.png"/></noscript>
<p>创建应用程序后，您将被重定向到设置和凭据页面。你可以查看你的应用的沙盒帐户电子邮件、客户端 ID 和其他设置。客户端 ID 是我们在本教程中需要的。</p>
<p><img data-attachment-id="50046" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/my-payments-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="My payments page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page.png" decoding="async" class="aligncenter size-full wp-image-50046 jetpack-lazy-image" src="../Images/f01fe9908ebb0e6426ceb2e8b24220ee.png" alt="My Payments Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50046" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/my-payments-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="My payments page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50046" src="../Images/f01fe9908ebb0e6426ceb2e8b24220ee.png" alt="My Payments Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/my-payments-page.png"/></noscript>
<p>为了测试，我们还需要沙盒客户帐户。要创建客户账户，点击左侧导航菜单中<strong>沙箱</strong>下的<strong>账户</strong>。</p>
<p><img data-attachment-id="50047" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/sandbox-test-accounts-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sandbox test accounts page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page.png" decoding="async" class="aligncenter size-full wp-image-50047 jetpack-lazy-image" src="../Images/36386c592220b32bf5bcb1e7e3a6650c.png" alt="Sandbox Test Accounts Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50047" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/sandbox-test-accounts-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sandbox test accounts page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50047" src="../Images/36386c592220b32bf5bcb1e7e3a6650c.png" alt="Sandbox Test Accounts Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/sandbox-test-accounts-page.png"/></noscript>
<p>现在点击<strong>创建账户</strong>，然后选择<strong>美国</strong>，点击<strong>创建</strong>。</p>
<p><img data-attachment-id="50048" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/create-new-sandbox-account/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create new sandbox account" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account.png" decoding="async" class="aligncenter size-full wp-image-50048 jetpack-lazy-image" src="../Images/426c11924bf801cc955574f3b86c6ba2.png" alt="Create New Sandbox Account" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50048" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/create-new-sandbox-account/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create new sandbox account" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50048" src="../Images/426c11924bf801cc955574f3b86c6ba2.png" alt="Create New Sandbox Account" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/create-new-sandbox-account.png"/></noscript>
<p>创建帐户后，要查看用于登录测试支付网关的帐户凭证(即电子邮件和密码)，请将鼠标悬停在新创建帐户旁边的菜单按钮上，然后单击<strong>查看/编辑帐户</strong>。</p>
<p><img data-attachment-id="50050" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/view-edit-accoun/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="View edit account" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun.png" decoding="async" class="aligncenter size-full wp-image-50050 jetpack-lazy-image" src="../Images/cc9eba72b05aaf7e3fb760cb7dc12082.png" alt="View and Edit Account Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50050" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/view-edit-accoun/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="View edit account" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50050" src="../Images/cc9eba72b05aaf7e3fb760cb7dc12082.png" alt="View and Edit Account Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/view-edit-accoun.png"/></noscript>
<p>你会落在这样的地方:</p>
<p><img data-attachment-id="50051" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/account-info-modal/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Account info modal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal.png" decoding="async" class="aligncenter size-full wp-image-50051 jetpack-lazy-image" src="../Images/10ce83c5e9238100bb1eed95e5fb0131.png" alt="Account Info Modal" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50051" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/account-info-modal/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Account info modal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50051" src="../Images/10ce83c5e9238100bb1eed95e5fb0131.png" alt="Account Info Modal" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/account-info-modal.png"/></noscript>
<p>您将看到电子邮件 ID 以及系统生成的密码。您可以点击<strong>修改密码</strong>链接修改密码，也可以在支付时使用系统生成的密码登录。</p>
<p>现在我们已经完成了基本的需求，我们可以继续构建支付接口了。</p>
<h2>构建支付界面</h2>
<p>对于支付接口，我们将对上面创建的 React 项目(<code>my-paypal-web</code>)进行更改。我们将在网页上添加 PayPal 按钮，并将结果作为我们的回调。</p>
<p>从您刚刚通过 PayPal 创建的新应用程序页面(如上所示)中复制客户 ID，并将其粘贴到项目中的<code>public/index.html</code>文件的<code>&lt;head&gt;</code>中。</p>
<pre>&lt;script src="https://www.paypal.com/sdk/js?client-id=[replace-this-with-your-client-id]&amp;currency=USD"&gt;&lt;/script&gt;
</pre>
<p>您的代码应该如下所示:</p>
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;link rel="icon" href="%PUBLIC_URL%/favicon.ico" /&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
    &lt;meta name="theme-color" content="#000000" /&gt;
    &lt;meta
      name="description"
      content="Web site created using create-react-app"
    /&gt;
    &lt;link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" /&gt;
    &lt;link rel="manifest" href="%PUBLIC_URL%/manifest.json" /&gt;

    &lt;script src="https://www.paypal.com/sdk/js?client-id=AXEWcCDcoTu8Wt1Ud0ifqLZM2A4_MbgJhNaTByCizxG0yi8V4o6sccW5RgXtXNesMh7n38Rp0Cv2KN63&amp;currency=USD"&gt;&lt;/script&gt;

    &lt;title&gt;React App&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;
    &lt;div id="root"&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>在用你自己的客户端 ID 添加了这个脚本标签之后，是时候为你的应用程序创建 PayPal 按钮了。</p>
<p>编辑<code>App.js</code>文件。首先，创建一个对 PayPal 按钮的引用作为 React 组件:</p>
<pre>const PayPalButton = window.paypal.Buttons.driver("react", { React, ReactDOM });
</pre>
<p>您可以将它作为您的<code>App.js</code>组件中的一个组件。删除父组件的内容，添加<code>PayPalButton</code>即可。你的<code>App.js</code>应该是这样的:</p>
<pre>import React from "react";
import ReactDOM from "react-dom";
import "./App.css";
const PayPalButton = window.paypal.Buttons.driver("react", { React, ReactDOM });
function App() {
  function _createOrder(data, actions) {
    return actions.order.create({
      purchase_units: [
        {
          amount: {
            value: "1",
          },
        },
      ],
    });
  }
  return (
    &lt;div className="App"&gt;
      &lt;PayPalButton
        createOrder={(data, actions) =&gt; _createOrder(data, actions)}
      /&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>转到项目目录，根据您的喜好输入<code>yarn start</code>或<code>npm start</code>。React 服务器在本地主机上启动并运行后，它会自动在浏览器窗口中打开<code>localhost:3000</code>。如果没有，请从您喜欢的浏览器访问<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>。您将看到如下输出:</p>
<p><img data-attachment-id="50052" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/my-paypal-app-web-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="My Paypal app web page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page.png" decoding="async" class="aligncenter size-full wp-image-50052 jetpack-lazy-image" src="../Images/3bc1050210974190f5f87cada0be20ef.png" alt="My Paypal App Web Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50052" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/my-paypal-app-web-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="My Paypal app web page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50052" src="../Images/3bc1050210974190f5f87cada0be20ef.png" alt="My Paypal App Web Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-app-web-page.png"/></noscript>
<p>您可以随意设置页面样式；我们不会在这里讨论这个问题。你可以根据自己的喜好进行修改。</p>
<p>如果您查看代码，您会发现我们已经为<code>PayPalButton</code>定义了一个名为<code><a href="https://developer.paypal.com/docs/business/javascript-sdk/javascript-sdk-reference/#createorder" target="_blank" rel="noopener">createOrder</a></code>的 prop，这使您能够指定请求的内容。本例中主要是金额，但也可以指定币种等。</p>
<p>对于回调，我们将创建函数并将它们作为道具添加到<code>PayPalButton</code>中。首先，我们将添加<code>onApprove</code>。当 PayPal 批准订单时，将调用此函数。</p>
<p>要创建异步<code>_onApprove</code>函数:</p>
<pre>async function _onApprove(data, actions) {
    let order = await actions.order.capture();
    console.log(order);
    return order;
  }
</pre>
<p>这里，await 关键字用于获取订单的详细信息。然后，我们将<code>console.log</code>订单细节。</p>
<p>也给<code>PayPalButton</code>道具加上这个功能:</p>
<pre>&lt;PayPalButton
    createOrder={(data, actions) =&gt; _createOrder(data, actions)}
    onApprove={(data, actions) =&gt; _onApprove(data, actions)}
/&gt;
</pre>
<p>此外，我们将添加<code>onCancel</code>和<code>onError</code>属性，以便在用户取消支付或 PayPal 出现错误时获得回调。我们将只创建一个调用函数，并在两个道具上使用它:</p>
<pre>function _onError(err) {
  console.log(err);
}
</pre>
<p>您的 PayPal 按钮代码应该如下所示:</p>
<pre>&lt;PayPalButton
    createOrder={(data, actions) =&gt; _createOrder(data, actions)}
    onApprove={(data, actions) =&gt; _onApprove(data, actions)}
    onCancel={() =&gt; _onError("Canceled")}
    onError={(err) =&gt; _onError(err)}
/&gt;
</pre>
<p>添加这些内容后，您的<code>App.js</code>文件应该看起来像这样:</p>
<pre>import React from "react";
import ReactDOM from "react-dom";
import "./App.css";
const PayPalButton = window.paypal.Buttons.driver("react", { React, ReactDOM });
function App() {
  function _createOrder(data, actions) {
    return actions.order.create({
      purchase_units: [
        {
          amount: {
            value: "1",
          },
        },
      ],
    });
  }
  async function _onApprove(data, actions) {
    let order = await actions.order.capture();
    console.log(order);
    return order;
  }
  function _onError(err) {
    console.log(err);
  }
  return (
    &lt;div className="App"&gt;
      &lt;PayPalButton
        createOrder={(data, actions) =&gt; _createOrder(data, actions)}
        onApprove={(data, actions) =&gt; _onApprove(data, actions)}
        onCancel={() =&gt; _onError("Canceled")}
        onError={(err) =&gt; _onError(err)}
      /&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>我们所做的就是从用户那里创建一个$1.00 的支付请求，并记录它以查看结果。</p>
<p>要测试您的支付网关，只需点击 PayPal 按钮，输入用户凭据(即第一步中的电子邮件和密码)，然后进行支付。</p>
<p><img data-attachment-id="50053" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/enter-sandbox-account-credentials/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Enter sandbox account credentials" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials.png" decoding="async" class="aligncenter size-full wp-image-50053 jetpack-lazy-image" src="../Images/7c9aad69bb6a9c8614af9a45c31a960c.png" alt="Enter Sandbox Account Credentials" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50053" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/enter-sandbox-account-credentials/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Enter sandbox account credentials" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50053" src="../Images/7c9aad69bb6a9c8614af9a45c31a960c.png" alt="Enter Sandbox Account Credentials" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/enter-sandbox-account-credentials.png"/></noscript>
<p><img data-attachment-id="50055" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/payment-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Payment page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page.png" decoding="async" class="aligncenter size-full wp-image-50055 jetpack-lazy-image" src="../Images/e51a434618c3bff8caf8cb83b41b2b7f.png" alt="Payment Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50055" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/payment-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Payment page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50055" src="../Images/e51a434618c3bff8caf8cb83b41b2b7f.png" alt="Payment Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page.png"/></noscript>
<p>付款后，你将被重定向回你的应用程序页面。右键单击打开开发人员控制台，检查元素，然后转到控制台选项卡。您将看到您刚刚进行的虚拟支付的结果:</p>
<p><img data-attachment-id="50056" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/callback-from-payment-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Callback from payment page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page.png" decoding="async" class="aligncenter size-full wp-image-50056 jetpack-lazy-image" src="../Images/da469cfe206d4c1bee863d009558b3b2.png" alt="Callback From Payment Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50056" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/callback-from-payment-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Callback from payment page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50056" src="../Images/da469cfe206d4c1bee863d009558b3b2.png" alt="Callback From Payment Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/callback-from-payment-page.png"/></noscript>
<h2>设置 Firebase 托管</h2>
<p>因为我们使用 Firebase 来托管 React web 应用，所以从注册一个 Firebase 帐户开始。</p>
<p>拥有帐户后，点击<strong>添加项目</strong>并设置项目名称:</p>
<p><img data-attachment-id="50057" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/set-project-name/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Set project name" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name.png" decoding="async" class="aligncenter size-full wp-image-50057 jetpack-lazy-image" src="../Images/5bed28039a6eb2ca481f2bdd4c5af326.png" alt="Set Project Name" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50057" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/set-project-name/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Set project name" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50057" src="../Images/5bed28039a6eb2ca481f2bdd4c5af326.png" alt="Set Project Name" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/set-project-name.png"/></noscript>
<p>您可以选择是启用还是禁用分析:</p>
<p><img data-attachment-id="50058" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/google-analytics/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Google analytics" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics.png" decoding="async" class="aligncenter size-full wp-image-50058 jetpack-lazy-image" src="../Images/323fef0b897f1ec0ee4eaf9bf1e27b06.png" alt="Google Analytics" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50058" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/google-analytics/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Google analytics" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50058" src="../Images/323fef0b897f1ec0ee4eaf9bf1e27b06.png" alt="Google Analytics" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/google-analytics.png"/></noscript>
<p>现在你已经创建了你的 Firebase 项目，点击<strong>继续</strong>。</p>
<p><img data-attachment-id="50059" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/project-ready/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Project ready" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready.png" decoding="async" class="aligncenter size-full wp-image-50059 jetpack-lazy-image" src="../Images/e4bc376fbd3b5919bf1d871385d70112.png" alt="Project Ready" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50059" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/project-ready/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Project ready" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50059" src="../Images/e4bc376fbd3b5919bf1d871385d70112.png" alt="Project Ready" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/project-ready.png"/></noscript>
<p>要设置主机，请转到侧边栏中的主机选项卡，然后单击<strong>开始</strong>按钮。</p>
<p><img data-attachment-id="50060" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/firebase-hosting-get-started/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Firebase hosting get started" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started.png" decoding="async" class="aligncenter size-full wp-image-50060 jetpack-lazy-image" src="../Images/749b6f41872c7780001f13b3a96933bc.png" alt="Firebase Hosting Get Started" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50060" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/firebase-hosting-get-started/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Firebase hosting get started" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50060" src="../Images/749b6f41872c7780001f13b3a96933bc.png" alt="Firebase Hosting Get Started" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-hosting-get-started.png"/></noscript>
<p>打开终端窗口，在系统上安装<code>firebase-tools</code>:</p>
<pre>$ npm install -g firebase-tools
</pre>
<p>使用您的 firebase 帐户登录，这样您就可以轻松地从终端窗口连接到项目:</p>
<pre>$ firebase login
</pre>
<p>使用您的帐户授权登录。成功登录后，转到<code>my-paypal-web</code>项目目录并输入以下命令:</p>
<pre>$firebase init
</pre>
<p>使用键盘上的箭头键导航至<code>Hosting</code>。按空格键选择，然后按回车键继续。</p>
<p><img data-attachment-id="50061" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/firebase-init-hosting/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting.png" data-orig-size="730,432" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Firebase init hosting" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting-300x178.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting.png" decoding="async" class="aligncenter size-full wp-image-50061 jetpack-lazy-image" src="../Images/6d3fa10ec147b231636246045b329002.png" alt="Firebase Init Hosting" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting-300x178.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50061" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/firebase-init-hosting/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting.png" data-orig-size="730,432" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Firebase init hosting" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting-300x178.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50061" src="../Images/6d3fa10ec147b231636246045b329002.png" alt="Firebase Init Hosting" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting-300x178.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/firebase-init-hosting.png"/></noscript>
<p>因为我们已经创建了一个项目，所以我们将选择<code>Use and existing project</code>:</p>
<p><img data-attachment-id="50062" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/use-and-existing-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project.png" data-orig-size="730,437" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Use and existing project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project.png" decoding="async" class="aligncenter size-full wp-image-50062 jetpack-lazy-image" src="../Images/9544027185b298f9320bb5094b46f88d.png" alt="Use and Existing Project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project-300x180.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50062" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/use-and-existing-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project.png" data-orig-size="730,437" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Use and existing project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50062" src="../Images/9544027185b298f9320bb5094b46f88d.png" alt="Use and Existing Project" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project-300x180.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/use-and-existing-project.png"/></noscript>
<p>接下来，从列表中选择我们创建的项目，并点击 return/enter。</p>
<p><img data-attachment-id="50063" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/project-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list.png" data-orig-size="730,436" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Project list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list.png" decoding="async" class="aligncenter size-full wp-image-50063 jetpack-lazy-image" src="../Images/18c920b88b8596e371f2c3e1d6cc8643.png" alt="Project List" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/project-list-300x179.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50063" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/project-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list.png" data-orig-size="730,436" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Project list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50063" src="../Images/18c920b88b8596e371f2c3e1d6cc8643.png" alt="Project List" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/project-list-300x179.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/project-list.png"/></noscript>
<p>在下一步中，输入以下配置:</p>
<pre>=== Hosting Setup

Your public directory is the folder (relative to your project directory) that
will contain Hosting assets to be uploaded with firebase deploy. If you
have a build process for your assets, use your build's output directory.

? What do you want to use as your public directory? build
? Configure as a single-page app (rewrite all urls to /index.html)? Yes
? Set up automatic builds and deploys with GitHub? No
</pre>
<p>完成后，您会在底部看到一条成功消息:</p>
<pre>✔  Wrote build/index.html

i  Writing configuration info to firebase.json...
i  Writing project information to .firebaserc...

✔  Firebase initialization complete!
</pre>
<p>要实时推送您的 web 应用，请输入以下命令:</p>
<pre>$ yarn build
</pre>
<p>构建完成后，输入:</p>
<pre>$ firebase deploy
</pre>
<p>您将会看到一个包含托管 URL 的结果:</p>
<pre>=== Deploying to 'my-pay-web'...

i  deploying hosting
i  hosting[my-pay-web]: beginning deploy...
i  hosting[my-pay-web]: found 18 files in build
✔  hosting[my-pay-web]: file upload complete
i  hosting[my-pay-web]: finalizing version...
✔  hosting[my-pay-web]: version finalized
i  hosting[my-pay-web]: releasing new version...
✔  hosting[my-pay-web]: release complete

✔  Deploy complete!

Project Console: https://console.firebase.google.com/project/my-pay-web/overview
Hosting URL: https://my-pay-web.web.app
</pre>
<p>你可以复制主机网址并粘贴到你喜欢的浏览器中。这是我的样子:</p>
<pre>https://my-pay-web.web.app
</pre>
<p><img data-attachment-id="50064" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/my-paypal-web-running/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="My Paypal web running" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running.png" decoding="async" class="aligncenter size-full wp-image-50064 jetpack-lazy-image" src="../Images/3c7114ba100cc38ac80ab29879daa3de.png" alt="My Paypal Web Running" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50064" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/my-paypal-web-running/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="My Paypal web running" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50064" src="../Images/3c7114ba100cc38ac80ab29879daa3de.png" alt="My Paypal Web Running" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/my-paypal-web-running.png"/></noscript>
<h2>在 React Native 中构建基本 WebView</h2>
<p>如果你以前有与 React Native 一起工作的经验<a href="https://blog.logrocket.com/react-native-web-complete-tutorial/" target="_blank" rel="noopener">，那是一个加分。如果没有，官方文档会提供一个</a><a href="https://reactnative.dev/docs/environment-setup" target="_blank" rel="noopener">指南来设置你的环境</a>和安装应用程序。如果您还没有这样做，只需转到项目目录并使用以下命令安装 React Native 的 WebView 模块:</p>
<pre>yarn add react-native-webview
</pre>
<p>接下来，使用 USB 连接您的设备，并输入以下命令:</p>
<pre>npx react-native run-android
</pre>
<p>在您的设备或模拟器上成功安装应用程序后，打开<code>App.js</code>文件。删除默认的额外代码并导入 WebView 模块:</p>
<pre>import { WebView } from 'react-native-webview';
</pre>
<p>为了从 React Native 初始化支付网关，我们将创建一个按钮，以模态方式显示 web 视图，并从 web view 获得响应。我们还将创建一个<code>useState()</code>挂钩来显示和隐藏 WebView。</p>
<pre>const [showGateway, setShowGateway] = useState(false);
</pre>
<p>按钮:</p>
<pre>&lt;View style={styles.btnCon}&gt;
  &lt;TouchableOpacity
    style={styles.btn}
    onPress={() =&gt; setShowGateway(true)}&gt;
      &lt;Text style={styles.btnTxt}&gt;Pay Using PayPal&lt;/Text&gt;
  &lt;/TouchableOpacity&gt;
&lt;/View&gt;
</pre>
<p>按钮样式:</p>
<pre>  btnCon: {
    height: 45,
    width: '70%',
    elevation: 1,
    backgroundColor: '#00457C',
    borderRadius: 3,
  },
  btn: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
  },
  btnTxt: {
    color: '#fff',
    fontSize: 18,
  },
</pre>
<p>按钮输出:</p>
<p><img data-attachment-id="50065" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/paypal-button-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Paypal button output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output-485x1024.jpeg" decoding="async" class="aligncenter size-full wp-image-50065 jetpack-lazy-image" src="../Images/723004ccfd719f5c684172affc26c08b.png" alt="Paypal Button Output" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output-485x1024.jpeg 485w" data-lazy-sizes="(max-width: 606px) 100vw, 606px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50065" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/paypal-button-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Paypal button output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output-485x1024.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50065" src="../Images/723004ccfd719f5c684172affc26c08b.png" alt="Paypal Button Output" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output-485x1024.jpeg 485w" sizes="(max-width: 606px) 100vw, 606px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/paypal-button-output.jpeg"/></noscript>
<p>现在，从<code>react-native</code>导入<code>Modal</code>组件，并创建一个显示<code>google.com</code>的基本 web 视图。</p>
<p>模式和网络视图:</p>
<pre>{showGateway ? (
        &lt;Modal
          visible={showGateway}
          onDismiss={() =&gt; setShowGateway(false)}
          onRequestClose={() =&gt; setShowGateway(false)}
          animationType={"fade"}
          transparent&gt;
          &lt;View style={styles.webViewCon}&gt;
            &lt;View style={styles.wbHead}&gt;
              &lt;TouchableOpacity
                style={{padding: 13}}
                onPress={() =&gt; setShowGateway(false)}&gt;
                &lt;Feather name={'x'} size={24} /&gt;
              &lt;/TouchableOpacity&gt;
              &lt;Text
                style={{
                  flex: 1,
                  textAlign: 'center',
                  fontSize: 16,
                  fontWeight: 'bold',
                  color: '#00457C',
                }}&gt;
                PayPal GateWay
              &lt;/Text&gt;
              &lt;View style={{padding: 13}}&gt;
                &lt;ActivityIndicator size={24} color={'#00457C'} /&gt;
              &lt;/View&gt;
            &lt;/View&gt;
            &lt;WebView
              source={{uri: 'https://www.google.com'}}
              style={{flex: 1}}
            /&gt;
          &lt;/View&gt;
        &lt;/Modal&gt;
      ) : null}
</pre>
<p>我们使用来自<code><a href="https://github.com/oblador/react-native-vector-icons" target="_blank" rel="noopener">react-native-vector-icons</a></code>的<code>&lt;Feather /&gt;</code>和来自<code>react-native</code>的<code>ActivityIndicator</code>。</p>
<p>模式和 WebView 输出:</p>
<p><img data-attachment-id="50066" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/modal-webview-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Modal webview output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output-485x1024.jpeg" decoding="async" class="aligncenter size-full wp-image-50066 jetpack-lazy-image" src="../Images/7381ac42af7514589ffc5e5c636fdf24.png" alt="Modal Webview Output" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output-485x1024.jpeg 485w" data-lazy-sizes="(max-width: 606px) 100vw, 606px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50066" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/modal-webview-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Modal webview output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output-485x1024.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50066" src="../Images/7381ac42af7514589ffc5e5c636fdf24.png" alt="Modal Webview Output" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output-485x1024.jpeg 485w" sizes="(max-width: 606px) 100vw, 606px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/modal-webview-output.jpeg"/></noscript>
<p>现在，我们将在页面加载后显示/隐藏<code>ActivityIndicator</code>以从 WebView 获得回调。如果页面已经加载，我们将添加以下挂钩和道具:</p>
<pre>const [prog, setProg] = useState(false);
const [progClr, setProgClr] = useState('#000');
</pre>
<p>WebView 的道具:</p>
<pre>onLoadStart={() =&gt; {
  setProg(true);
  setProgClr('#000');
}}
onLoadProgress={() =&gt; {
  setProg(true);
  setProgClr('#00457C');
}}
onLoadEnd={() =&gt; {
  setProg(false);
}}
onLoad={() =&gt; {
  setProg(false);
}}
</pre>
<p>仅仅为了额外的 UX，这段代码根据页面的进度改变了<code>ActivityIndicator</code>的颜色。</p>
<p>您的<code>App.js</code>文件现在应该看起来像这样:</p>
<pre>import React, {useState} from 'react';
import {
  SafeAreaView,
  StyleSheet,
  Text,
  View,
  TouchableOpacity,
  Modal,
  ActivityIndicator,
} from 'react-native';
import {WebView} from 'react-native-webview';
import Feather from 'react-native-vector-icons/Feather';


const App = () =&gt; {
  const [showGateway, setShowGateway] = useState(false);
  const [prog, setProg] = useState(false);
  const [progClr, setProgClr] = useState('#000');
  return (
    &lt;SafeAreaView style={{flex: 1}}&gt;
      &lt;View style={styles.container}&gt;
        &lt;View style={styles.btnCon}&gt;
          &lt;TouchableOpacity
            style={styles.btn}
            onPress={() =&gt; setShowGateway(true)}&gt;
            &lt;Text style={styles.btnTxt}&gt;Pay Using PayPal&lt;/Text&gt;
          &lt;/TouchableOpacity&gt;
        &lt;/View&gt;
      &lt;/View&gt;
      {showGateway ? (
        &lt;Modal
          visible={showGateway}
          onDismiss={() =&gt; setShowGateway(false)}
          onRequestClose={() =&gt; setShowGateway(false)}
          animationType={"fade"}
          transparent&gt;
          &lt;View style={styles.webViewCon}&gt;
            &lt;View style={styles.wbHead}&gt;
              &lt;TouchableOpacity
                style={{padding: 13}}
                onPress={() =&gt; setShowGateway(false)}&gt;
                &lt;Feather name={'x'} size={24} /&gt;
              &lt;/TouchableOpacity&gt;
              &lt;Text
                style={{
                  flex: 1,
                  textAlign: 'center',
                  fontSize: 16,
                  fontWeight: 'bold',
                  color: '#00457C',
                }}&gt;
                PayPal GateWay
              &lt;/Text&gt;
              &lt;View style={{padding: 13, opacity: prog ? 1 : 0}}&gt;
                &lt;ActivityIndicator size={24} color={progClr} /&gt;
              &lt;/View&gt;
            &lt;/View&gt;
            &lt;WebView
              source={{uri: 'https://www.google.com'}}
              style={{flex: 1}}
              onLoadStart={() =&gt; {
                setProg(true);
                setProgClr('#000');
              }}
              onLoadProgress={() =&gt; {
                setProg(true);
                setProgClr('#00457C');
              }}
              onLoadEnd={() =&gt; {
                setProg(false);
              }}
              onLoad={() =&gt; {
                setProg(false);
              }}
            /&gt;
          &lt;/View&gt;
        &lt;/Modal&gt;
      ) : null}
    &lt;/SafeAreaView&gt;
  );
};
const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#fff',
  },
  btnCon: {
    height: 45,
    width: '70%',
    elevation: 1,
    backgroundColor: '#00457C',
    borderRadius: 3,
  },
  btn: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
  },
  btnTxt: {
    color: '#fff',
    fontSize: 18,
  },
  webViewCon: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
  },
  wbHead: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#f9f9f9',
    zIndex: 25,
    elevation: 2,
  },
});
export default App;
</pre>
<h2>使用 WebView 将 PayPal 界面连接到 React 本地应用程序</h2>
<p>为了从 WebView 页面接收数据到 React 本地应用程序，我们将使用<code>onMessage</code> prop。我们还需要向我们的 web 应用程序添加一些代码来发送所需的数据。<code>window.ReactNativeWebView.postMessage</code>方法用于将数据从 WebView 发送到我们的 React 本地应用程序。</p>
<p>对<code>_onApprove</code>和<code>_onError</code>函数进行必要的修改后，您的代码应该如下所示:</p>
<pre>async function _onApprove(data, actions) {
    let order = await actions.order.capture();
    console.log(order);
    window.ReactNativeWebView &amp;&amp;
      window.ReactNativeWebView.postMessage(JSON.stringify(order));
    return order;
}
function _onError(err) {
    console.log(err);
    let errObj = {
      err: err,
      status: "FAILED",
    };
    window.ReactNativeWebView &amp;&amp;
      window.ReactNativeWebView.postMessage(JSON.stringify(errObj));
}
</pre>
<p>我们使用<code>JSON.stringify</code>是因为 postMessage 只能接受字符串参数。</p>
<p>记得构建 web 应用程序并将其部署到 Firebase:</p>
<pre>$ yarn build
$ firebase deploy
</pre>
<p>为了获得 React 本机端的数据，我们将使用<code>onMessage</code>。创建以下函数，并将其添加到<code>onMessage</code>属性中:</p>
<pre>function onMessage(e) {
    let data = e.nativeEvent.data;
    setShowGateway(false);
    console.log(data);
  }
</pre>
<p>添加<code>onMessage</code>道具，并将源<code>uri</code>设置为你的 web app 的 URI:</p>
<pre>&lt;WebView
  source={{uri: 'https://www.google.com'}}
  onMessage={onMessage}
  ...
/&gt;
</pre>
<p>现在是测试支付网关的时候了。此时，我们正在 React 本机应用程序中记录来自<code>postMessage</code>的结果。</p>
<p>点击<strong>使用 PayPal 支付</strong>显示支付页面。输入您的凭据并付款:</p>
<p><img data-attachment-id="50067" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/payment-page-paypal-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Payment page Paypal app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app-485x1024.jpeg" decoding="async" class="aligncenter size-full wp-image-50067 jetpack-lazy-image" src="../Images/70264a5956a6f1c68db4288ed6f155cd.png" alt="Payment Page Paypal App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app-485x1024.jpeg 485w" data-lazy-sizes="(max-width: 606px) 100vw, 606px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50067" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/payment-page-paypal-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Payment page Paypal app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app-485x1024.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50067" src="../Images/70264a5956a6f1c68db4288ed6f155cd.png" alt="Payment Page Paypal App" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app-485x1024.jpeg 485w" sizes="(max-width: 606px) 100vw, 606px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-page-paypal-app.jpeg"/></noscript><br/>
<img data-attachment-id="50068" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/credentials-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Credentials page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page-485x1024.jpeg" decoding="async" class="aligncenter size-full wp-image-50068 jetpack-lazy-image" src="../Images/9863ed3fda35c80940aab14702835caf.png" alt="Credentials Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page-485x1024.jpeg 485w" data-lazy-sizes="(max-width: 606px) 100vw, 606px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page.jpeg"/><noscript><img data-lazy-fallback="1" data-attachment-id="50068" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/credentials-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Credentials page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page-485x1024.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50068" src="../Images/9863ed3fda35c80940aab14702835caf.png" alt="Credentials Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page-485x1024.jpeg 485w" sizes="(max-width: 606px) 100vw, 606px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/credentials-page.jpeg"/></noscript><br/>
<img data-attachment-id="50069" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/pay-now-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pay now page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page-485x1024.jpeg" decoding="async" class="aligncenter size-full wp-image-50069 jetpack-lazy-image" src="../Images/c9184b2eedbaaa28222b0de6200ea196.png" alt="Pay Now Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page-485x1024.jpeg 485w" data-lazy-sizes="(max-width: 606px) 100vw, 606px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page.jpeg"/><noscript><img data-lazy-fallback="1" data-attachment-id="50069" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/pay-now-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pay now page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page-485x1024.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50069" src="../Images/c9184b2eedbaaa28222b0de6200ea196.png" alt="Pay Now Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page-485x1024.jpeg 485w" sizes="(max-width: 606px) 100vw, 606px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pay-now-page.jpeg"/></noscript>
<p>付款成功(或不成功)后，您将在控制台中看到打印的结果:</p>
<p><img data-attachment-id="50070" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/payment-result-in-react-native/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native.png" data-orig-size="730,436" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Payment result in React Native" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native.png" decoding="async" class="aligncenter size-full wp-image-50070 jetpack-lazy-image" src="../Images/a905f29087cc4904dbda64b5dc7cee79.png" alt="Payment Result in React Native" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native-300x179.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50070" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/payment-result-in-react-native/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native.png" data-orig-size="730,436" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Payment result in React Native" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native-300x179.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50070" src="../Images/a905f29087cc4904dbda64b5dc7cee79.png" alt="Payment Result in React Native" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native-300x179.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-result-in-react-native.png"/></noscript>
<p>您可以通过在<code>onMessage</code>功能中添加提醒来提醒用户刚刚支付的状态:</p>
<pre>function onMessage(e) {
    ...
    let payment = JSON.parse(data);
    if (payment.status === 'COMPLETED') {
      alert('PAYMENT MADE SUCCESSFULLY!');
    } else {
      alert('PAYMENT FAILED. PLEASE TRY AGAIN.');
    }
}
</pre>
<p>以下是输出结果:</p>
<p><img data-attachment-id="50071" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/payment-success-alert/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Payment success alert" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert-485x1024.jpeg" decoding="async" class="aligncenter size-full wp-image-50071 jetpack-lazy-image" src="../Images/0952c9b7fce1fc38c7ddcebcb0c08137.png" alt="Payment Success Alert" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert-485x1024.jpeg 485w" data-lazy-sizes="(max-width: 606px) 100vw, 606px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="50071" data-permalink="https://blog.logrocket.com/how-to-integrate-paypal-payments-with-react-native/payment-success-alert/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert.jpeg" data-orig-size="606,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Payment success alert" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert-142x300.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert-485x1024.jpeg" decoding="async" loading="lazy" class="aligncenter size-full wp-image-50071" src="../Images/0952c9b7fce1fc38c7ddcebcb0c08137.png" alt="Payment Success Alert" srcset="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert.jpeg 606w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert-142x300.jpeg 142w, https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert-485x1024.jpeg 485w" sizes="(max-width: 606px) 100vw, 606px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/payment-success-alert.jpeg"/></noscript>
<p>完整代码如下。</p>
<p><code>App.js</code>(反应<code>my-paypal-web</code>):</p>
<pre>import React from "react";
import ReactDOM from "react-dom";
import "./App.css";
const PayPalButton = window.paypal.Buttons.driver("react", { React, ReactDOM });
function App() {
  function _createOrder(data, actions) {
    return actions.order.create({
      purchase_units: [
        {
          amount: {
            value: "1",
          },
        },
      ],
    });
  }
  async function _onApprove(data, actions) {
    let order = await actions.order.capture();
    console.log(order);
    window.ReactNativeWebView &amp;&amp;
      window.ReactNativeWebView.postMessage(JSON.stringify(order));
    return order;
  }
  function _onError(err) {
    console.log(err);
    let errObj = {
      err: err,
      status: "FAILED",
    };
    window.ReactNativeWebView &amp;&amp;
      window.ReactNativeWebView.postMessage(JSON.stringify(errObj));
  }
  return (
    &lt;div className="App"&gt;
      &lt;PayPalButton
        createOrder={(data, actions) =&gt; _createOrder(data, actions)}
        onApprove={(data, actions) =&gt; _onApprove(data, actions)}
        onCancel={() =&gt; _onError("CANCELED")}
        onError={(err) =&gt; _onError("ERROE")}
      /&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p><code>App.js</code>(反应原生<code>myPayPalApp</code>):</p>
<pre>import React, {useState} from 'react';
import {
  SafeAreaView,
  StyleSheet,
  Text,
  View,
  TouchableOpacity,
  Modal,
  ActivityIndicator,
} from 'react-native';
import {WebView} from 'react-native-webview';
import Feather from 'react-native-vector-icons/Feather';
const App = () =&gt; {
  const [showGateway, setShowGateway] = useState(false);
  const [prog, setProg] = useState(false);
  const [progClr, setProgClr] = useState('#000');
  function onMessage(e) {
    let data = e.nativeEvent.data;
    setShowGateway(false);
    console.log(data);
    let payment = JSON.parse(data);
    if (payment.status === 'COMPLETED') {
      alert('PAYMENT MADE SUCCESSFULLY!');
    } else {
      alert('PAYMENT FAILED. PLEASE TRY AGAIN.');
    }
  }
  return (
    &lt;SafeAreaView style={{flex: 1}}&gt;
      &lt;View style={styles.container}&gt;
        &lt;View style={styles.btnCon}&gt;
          &lt;TouchableOpacity
            style={styles.btn}
            onPress={() =&gt; setShowGateway(true)}&gt;
            &lt;Text style={styles.btnTxt}&gt;Pay Using PayPal&lt;/Text&gt;
          &lt;/TouchableOpacity&gt;
        &lt;/View&gt;
      &lt;/View&gt;
      {showGateway ? (
        &lt;Modal
          visible={showGateway}
          onDismiss={() =&gt; setShowGateway(false)}
          onRequestClose={() =&gt; setShowGateway(false)}
          animationType={'fade'}
          transparent&gt;
          &lt;View style={styles.webViewCon}&gt;
            &lt;View style={styles.wbHead}&gt;
              &lt;TouchableOpacity
                style={{padding: 13}}
                onPress={() =&gt; setShowGateway(false)}&gt;
                &lt;Feather name={'x'} size={24} /&gt;
              &lt;/TouchableOpacity&gt;
              &lt;Text
                style={{
                  flex: 1,
                  textAlign: 'center',
                  fontSize: 16,
                  fontWeight: 'bold',
                  color: '#00457C',
                }}&gt;
                PayPal GateWay
              &lt;/Text&gt;
              &lt;View style={{padding: 13, opacity: prog ? 1 : 0}}&gt;
                &lt;ActivityIndicator size={24} color={progClr} /&gt;
              &lt;/View&gt;
            &lt;/View&gt;
            &lt;WebView
              source={{uri: 'https://my-pay-web.web.app/'}}
              style={{flex: 1}}
              onLoadStart={() =&gt; {
                setProg(true);
                setProgClr('#000');
              }}
              onLoadProgress={() =&gt; {
                setProg(true);
                setProgClr('#00457C');
              }}
              onLoadEnd={() =&gt; {
                setProg(false);
              }}
              onLoad={() =&gt; {
                setProg(false);
              }}
              onMessage={onMessage}
            /&gt;
          &lt;/View&gt;
        &lt;/Modal&gt;
      ) : null}
    &lt;/SafeAreaView&gt;
  );
};
const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#fff',
  },
  btnCon: {
    height: 45,
    width: '70%',
    elevation: 1,
    backgroundColor: '#00457C',
    borderRadius: 3,
  },
  btn: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
  },
  btnTxt: {
    color: '#fff',
    fontSize: 18,
  },
  webViewCon: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
  },
  wbHead: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#f9f9f9',
    zIndex: 25,
    elevation: 2,
  },
});
export default App;
</pre>
<h2>结论</h2>
<p>如果你已经做到了这一步，那么恭喜你——你已经成功地使用 PayPal 为 React Native 设置了测试支付网关。虽然上面的代码对于基本的支付系统应该足够了，但是您可以根据自己的需要对其进行更改。也可以参考官方<a href="https://developer.paypal.com/docs/business/javascript-sdk/javascript-sdk-reference/" target="_blank" rel="noopener"> PayPal 指南</a>进一步参考。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>