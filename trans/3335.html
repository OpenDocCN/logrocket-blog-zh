<html>
<head>
<title>Building a pomodoro timer with Tauri using React and Vite - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用React和Vite - LogRocket Blog用Tauri构建番茄定时器</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-pomodoro-timer-tauri-using-react-and-vite/#0001-01-01">https://blog.logrocket.com/build-pomodoro-timer-tauri-using-react-and-vite/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Tauri是一套工具，可以让你使用前端框架构建跨平台的桌面应用。当与React和<a href="https://blog.logrocket.com/vite-3-vs-create-react-app-comparison-migration-guide/"> Vite </a>结合使用时，它可以用于为所有桌面平台构建速度极快的二进制文件。</p>
<p>开发人员可以使用Tauri编写安全、精简、快速的跨平台桌面应用程序，并使用web技术。对于许多开发人员来说，Electron 通常是这些应用的首选框架，但Tauri现在已经做好了竞争的准备。</p>
<p>在本帖中，我们将构建一个简单的番茄定时器，我邀请你按照自己的进度跟随这个教程。</p>

<h2 id="what-is-tauri">Tauri是什么？</h2>
<p>是“<a href="https://tauri.app/about/benchmarks/" target="_blank" rel="noopener">快得惊人</a>”(他们的话，不是我的；但请点击链接查看基准并自行决定),因为它使用Rust作为后端(与Node相比),生成更小的二进制文件，并且比Node更安全。</p>
<p>它使用底层操作系统提供的WebView来呈现应用程序的UI——这是应用程序二进制文件较小(与electronic相比)的原因之一。Tauri工具包中的WRY库提供了一个统一的接口来与不同操作系统提供的WebViews进行交互。WRY库使用Tao板条箱进行跨平台窗口管理。</p>
<p>Tauri将所有这些结合在一起，使开发人员能够编写强大的高性能桌面应用程序。</p>
<h2 id="prerequisites">先决条件</h2>
<p>在我们开始之前，我们需要安装一些东西。</p>
<h3 id="rust">锈</h3>
<p>要安装Rust，请打开您的终端并运行:</p>
<pre class="language-shell hljs">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
</pre>
<p>如果您使用的是Windows，请遵循这些说明<a href="https://forge.rust-lang.org/infra/other-installation-methods.html" target="_blank" rel="noopener">。</a></p>
<h3 id="npm">npm</h3>
<p>npm是节点的程序包管理器。它是与Node捆绑在一起的，所以如果您的系统上安装了Node，您很可能也安装了npm。</p>
<p>如果你没有Node，用<a href="https://brew.sh/" target="_blank" rel="noopener">自制软件</a>安装它，</p>
<pre class="language-shell hljs">brew install node
</pre>
<p>安装了npm和Rust之后，我们就可以开始使用Tauri开发应用了！</p>
<h2 id="scaffold-a-tauri-app-with-create-tauri-app">用create-tauri-app搭建Tauri应用程序</h2>
<p>既然先决条件现在已经安装好了，我们可以开始开发pomodoro timer桌面应用程序了。Tauri的人们用<a href="https://www.npmjs.com/package/create-tauri-app" target="_blank" rel="noopener"><strong>create-Tauri-app</strong></a>NPM包让搭建一个应用程序变得超级简单。</p>
<p>要开始，请运行:</p>
<pre class="language-shell hljs">npx create-tauri-app
</pre>
<p>运行此命令后，您需要输入一些信息:</p>
<ul>
<li>项目的名称</li>
<li>将在其中加载应用程序的窗口的标题</li>
<li>UI配方</li>
<li>要使用的模板</li>
</ul>
<p>对于这个教程应用程序，我用下面的，发现如下👇</p>
<ul>
<li>项目名称为<code>pomodoro</code></li>
<li>窗口标题为<code>Pomodoro Timer App</code></li>
<li>UI配方为<code>create-vite</code></li>
<li>要使用的模板<code>react-ts</code></li>
</ul>
<p><img data-attachment-id="130833" data-permalink="https://blog.logrocket.com/build-pomodoro-timer-tauri-using-react-and-vite/attachment/tauri-project-dependecies-installation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation.png" data-orig-size="730,313" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="tauri-project-dependecies-installation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation-300x129.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation.png" decoding="async" class="aligncenter wp-image-130833 size-full jetpack-lazy-image" src="../Images/16d3f0f2c60df579e28c1a10b58e6f91.png" alt="Tauri Project Dependencies Installation" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation-300x129.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="130833" data-permalink="https://blog.logrocket.com/build-pomodoro-timer-tauri-using-react-and-vite/attachment/tauri-project-dependecies-installation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation.png" data-orig-size="730,313" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="tauri-project-dependecies-installation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation-300x129.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation.png" decoding="async" loading="lazy" class="aligncenter wp-image-130833 size-full" src="../Images/16d3f0f2c60df579e28c1a10b58e6f91.png" alt="Tauri Project Dependencies Installation" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation-300x129.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/tauri-project-dependecies-installation.png"/></noscript>
<p>点击“Enter”将安装所有必需的包，并在与项目名称同名的文件夹下输出一个脚手架项目。</p>
<p>我们现在已经准备好第一次运行这个项目了！</p>
<p>要运行项目，请运行:</p>
<pre class="language-shell hljs">cd pomodoro // cding into the project folder
npm run tauri dev //running the app
</pre>
<p>这将首先启动前端服务器，然后将下载板条箱(如有必要)并编译Rust后端。一旦编译没有任何错误，应用程序将启动，你会看到这样的问候:</p>
<p><img data-attachment-id="130835" data-permalink="https://blog.logrocket.com/build-pomodoro-timer-tauri-using-react-and-vite/attachment/vite-and-react-app-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example.png" data-orig-size="730,555" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vite-and-react-app-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example-300x228.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example.png" decoding="async" class="aligncenter wp-image-130835 size-full jetpack-lazy-image" src="../Images/756afe9a43302f89b08cac64de439ccb.png" alt="Vite And React App Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example-300x228.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="130835" data-permalink="https://blog.logrocket.com/build-pomodoro-timer-tauri-using-react-and-vite/attachment/vite-and-react-app-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example.png" data-orig-size="730,555" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vite-and-react-app-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example-300x228.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example.png" decoding="async" loading="lazy" class="aligncenter wp-image-130835 size-full" src="../Images/756afe9a43302f89b08cac64de439ccb.png" alt="Vite And React App Example" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example-300x228.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/vite-and-react-app-example.png"/></noscript>
<p>项目文件夹包含许多重要的文件和文件夹。我们将在本教程中处理的两个问题是:</p>
<ul>
<li><code>src</code>文件夹</li>
<li><code>src-tauri/tauri.config.json</code>文件</li>
</ul>
<p>第一次运行应用程序需要一些时间，因为应用程序需要下载和编译必要的rust crates。</p>
<p>(注:<span>对于使用macOS进行开发的人:如果你运行命令启动应用程序，而应用程序窗口出现在全屏应用程序上，你将无法移动应用程序窗口。这是一个已知的bug，可以在这里</span> <a href="https://github.com/tauri-apps/tauri/issues/4310" target="_blank" rel="noopener">追踪</a></p>
<h2 id="building-the-frontend">构建前端</h2>
<p>我们将使用<a href="https://chakra-ui.com/" target="_blank" rel="noopener"> ChakraUI </a>作为UI组件和样式。要设置ChakraUI，请遵循他们的<a href="https://chakra-ui.com/getting-started" target="_blank" rel="noopener">入门指南</a>。</p>
<p>我们将在下面建立用户界面。</p>
<p><img data-attachment-id="130837" data-permalink="https://blog.logrocket.com/build-pomodoro-timer-tauri-using-react-and-vite/attachment/timer-app-ui-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example.png" data-orig-size="730,552" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="timer-app-ui-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example-300x227.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example.png" decoding="async" class="aligncenter wp-image-130837 size-full jetpack-lazy-image" src="../Images/3d661f59dbba591d23329cae86d94624.png" alt="Timer App UI Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example-300x227.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="130837" data-permalink="https://blog.logrocket.com/build-pomodoro-timer-tauri-using-react-and-vite/attachment/timer-app-ui-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example.png" data-orig-size="730,552" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="timer-app-ui-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example-300x227.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example.png" decoding="async" loading="lazy" class="aligncenter wp-image-130837 size-full" src="../Images/3d661f59dbba591d23329cae86d94624.png" alt="Timer App UI Example" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example-300x227.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/timer-app-ui-example.png"/></noscript>
<p>以下是我们的应用程序的要求:</p>
<ul>
<li>应该有一个“开始”和“暂停”按钮，启动和停止计时器</li>
<li>一旦计时器达到“0”，触发通知用户</li>
<li>选择间隔长度的选项，即15分钟。，30分钟。、和60分钟。</li>
<li>“重置”按钮，将计时器重置为初始值</li>
</ul>
<p>首先，前往<code>src/App.tsx</code>。</p>
<pre class="language-typescript hljs">// src/App.tsx
import { Button, Flex, Text } from "@chakra-ui/react";
import { useEffect, useState } from "react";

function App() {
  const [time, setTime] = useState(0);
  const [timerStart, setTimerStart] = useState(false);
  const buttons = [
    {
      value: 900,
      display: "15 minutes",
    },
    {
      value: 1800,
      display: "30 minutes",
    },
    {
      value: 3600,
      display: "60 minutes",
    },
  ];
  const toggleTimer = () =&gt; {
    setTimerStart(!timerStart);
  };
  useEffect(() =&gt; {
    const interval = setInterval(() =&gt; {
      if (timerStart) {
        if (time &gt; 0) {
          setTime(time - 1);
        } else if (time === 0) {
          // TODO: Send notification to user.
          clearInterval(interval);
        }
      }
    }, 1000);
    return () =&gt; clearInterval(interval);
  }, [timerStart, time]);
  return (
    &lt;div className="App" style={{ height: "100%" }}&gt;
      &lt;Flex
        background="gray.700"
        height="100%"
        alignItems="center"
        flexDirection="column"
      &gt;
        &lt;Text color="white" fontWeight="bold" marginTop="20" fontSize="35"&gt;
          Pomodoro Timer
        &lt;/Text&gt;
        &lt;Text fontWeight="bold" fontSize="7xl" color="white"&gt;
          {`${
            Math.floor(time / 60) &lt; 10
              ? `0${Math.floor(time / 60)}`
              : `${Math.floor(time / 60)}`
          }:${time % 60 &lt; 10 ? `0${time % 60}` : time % 60}`}
        &lt;/Text&gt;
        &lt;Flex&gt;
          &lt;Button
            width="7rem"
            background="tomato"
            color="white"
            onClick={toggleTimer}
          &gt;
            {!timerStart ? "Start" : "Pause"}
          &lt;/Button&gt;
          {/* TODO: Add Button to reset timer */}
        &lt;/Flex&gt;
        &lt;Flex marginTop={10}&gt;
          {buttons.map(({ value, display }) =&gt; (
            &lt;Button
              marginX={4}
              background="green.300"
              color="white"
              onClick={() =&gt; {
                setTimerStart(false);
                setTime(value);
              }}
            &gt;
              {display}
            &lt;/Button&gt;
          ))}
        &lt;/Flex&gt;
      &lt;/Flex&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>这里，我们使用ChakraUI的内置组件来设置按钮和文本的布局。<code>useEffect</code>钩子中的<code>setTimeout</code>通过每秒设置状态来驱动UI。</p>
<p>效果重新运行:</p>
<ul>
<li>当用户点击持续时间按钮时(这将设置<code>timerStart</code>和<code>time</code>状态值)</li>
<li>当用户点击开始/暂停按钮时(这将设置<code>timerStart</code>状态值)</li>
<li>每过一秒钟(<code>setTimeout</code>触发对<code>time</code>值的更新，见第29行)</li>
</ul>
<p>为了以一致的格式(mm:ss)显示时间，我们需要做一些数学运算。这当然不是完美的，但它做的工作。</p>
<p>这里有两个待办事项:</p>
<ul>
<li><strong>添加复位按钮</strong><ul>
<li>点击这个按钮，会触发一个本地对话框，要求用户确认操作</li>
</ul>
</li>
<li><strong>添加通知触发器</strong><ul>
<li>当计时器计时到0时，需要向用户发送通知</li>
</ul>
</li>
</ul>
<p>但是，在我们开始处理这些项目之前，我们需要添加我们将在<code>src-tauri/tauri.config.json</code>文件中调用的本地API。如果我们不做这一步，我们将无法触发原生元素。</p>
<p>所以，转到<code>src-tauri/tauri.config.json</code>并把这个加到<code>tauri.allowlist</code>:</p>
<pre class="language-json hljs">  "tauri": {
    "allowlist": {
      // other allowed items
      "notification": {
        "all": true
      },
      "dialog": {
        "all": true
      }
    }    
  }
</pre>
<p>(注:为了简单起见，<code>dialog</code>和<code>notification</code>都是允许的。我们可以更具体地避免不必要的访问)</p>
<h2 id="triggering-a-notification-and-adding-a-reset-timer-button">触发通知并添加重置计时器按钮</h2>
<pre class="language-typescript hljs">// src/App.tsx
import { Button, Flex, Text } from "@chakra-ui/react";
import { useEffect, useState } from "react";
+ import { sendNotification } from "@tauri-apps/api/notification";
+ import { ask } from "@tauri-apps/api/dialog";
function App() {
  const [time, setTime] = useState(0);
  const [timerStart, setTimerStart] = useState(false);
  const buttons = [
    {
      value: 900,
      display: "15 minutes",
    },
    {
      value: 1800,
      display: "30 minutes",
    },
    {
      value: 3600,
      display: "60 minutes",
    },
  ];
  const toggleTimer = () =&gt; {
    setTimerStart(!timerStart);
  };
+ const triggerResetDialog = async () =&gt; {
+   let shouldReset = await ask("Do you want to reset timer?", {
+     title: "Pomodoro Timer App",
+     type: "warning",
+   });
+   if (shouldReset) {
+     setTime(900);
+     setTimerStart(false);
+   }
+ };
  useEffect(() =&gt; {
    const interval = setInterval(() =&gt; {
      if (timerStart) {
        if (time &gt; 0) {
          setTime(time - 1);
        } else if (time === 0) {
+         sendNotification({
+           title: `Time's up!`,
+           body: `Congrats on completing a session!🎉`,
+         });
          clearInterval(interval);
        }
      }
    }, 1000);
    return () =&gt; clearInterval(interval);
  }, [timerStart, time]);
  return (
    &lt;div className="App" style={{ height: "100%" }}&gt;
      &lt;Flex
        background="gray.700"
        height="100%"
        alignItems="center"
        flexDirection="column"
      &gt;
        &lt;Text color="white" fontWeight="bold" marginTop="20" fontSize="35"&gt;
          Pomodoro Timer
        &lt;/Text&gt;
        &lt;Text fontWeight="bold" fontSize="7xl" color="white"&gt;
          {`${
            Math.floor(time / 60) &lt; 10
              ? `0${Math.floor(time / 60)}`
              : `${Math.floor(time / 60)}`
          }:${time % 60 &lt; 10 ? `0${time % 60}` : time % 60}`}
        &lt;/Text&gt;
        &lt;Flex&gt;
          &lt;Button
            width="7rem"
            background="tomato"
            color="white"
            onClick={toggleTimer}
          &gt;
            {!timerStart ? "Start" : "Pause"}
          &lt;/Button&gt;
+         &lt;Button
+           background="blue.300"
+           marginX={5}
+           onClick={triggerResetDialog}
+         &gt;
+           Reset
+         &lt;/Button&gt;
        &lt;/Flex&gt;
        &lt;Flex marginTop={10}&gt;
          {buttons.map(({ value, display }) =&gt; (
            &lt;Button
              marginX={4}
              background="green.300"
              color="white"
              onClick={() =&gt; {
                setTimerStart(false);
                setTime(value);
              }}
            &gt;
              {display}
            &lt;/Button&gt;
          ))}
        &lt;/Flex&gt;
      &lt;/Flex&gt;
    &lt;/div&gt;
  );
}
export default App;
</pre>
<p>Tauri提供了一个<a href="https://www.npmjs.com/package/@tauri-apps/api" target="_blank" rel="noopener"> JS/TS API </a>包，用于从Rust后端调用函数。必要的包已经被<code>create-tauri-app</code>实用程序安装好了，所以我们可以直接导入npm包并在我们的前端代码中使用它。</p>
<p>要触发通知:</p>
<ul>
<li>从通知模块导入<code>sendNotification</code>函数</li>
<li>调用前端代码中的函数(见第42行)。更多关于API <a href="https://tauri.app/v1/api/js/modules/notification#sendnotification" target="_blank" rel="noopener">的信息，请点击这里</a></li>
</ul>
<p>要触发对话:</p>
<ul>
<li>从对话框模块导入<code>ask</code>功能</li>
<li>调用前端代码中的函数。第一个参数是将出现在对话框中的文本(见第27行)。更多关于API <a href="https://tauri.app/v1/api/js/modules/dialog#ask" target="_blank" rel="noopener">的信息，请点击这里</a></li>
<li>因为它需要用户输入，该函数返回一个带有布尔值的承诺，所以我们可以<code>await</code>它来获得用户点击的值</li>
<li>如果用户接受，我们将时间值重置为15分钟。并且如果计时器已经在运行，则停止计时器</li>
</ul>
<p>最后，要运行应用程序，运行<code>npm run tauri dev</code>。</p>
<p><img data-attachment-id="130839" data-permalink="https://blog.logrocket.com/build-pomodoro-timer-tauri-using-react-and-vite/attachment/pomodoro-timer-final/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/pomodoro-timer-final.gif" data-orig-size="730,552" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="pomodoro-timer-final" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/pomodoro-timer-final-300x227.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/pomodoro-timer-final.gif" decoding="async" class="aligncenter wp-image-130839 size-full jetpack-lazy-image" src="../Images/1041e5e2e611b7c086a6aaea84226917.png" alt="Pomodoro Timer Final" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/pomodoro-timer-final.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/pomodoro-timer-final.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="130839" data-permalink="https://blog.logrocket.com/build-pomodoro-timer-tauri-using-react-and-vite/attachment/pomodoro-timer-final/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/pomodoro-timer-final.gif" data-orig-size="730,552" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="pomodoro-timer-final" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/pomodoro-timer-final-300x227.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/pomodoro-timer-final.gif" decoding="async" loading="lazy" class="aligncenter wp-image-130839 size-full" src="../Images/1041e5e2e611b7c086a6aaea84226917.png" alt="Pomodoro Timer Final" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/pomodoro-timer-final.gif"/></noscript>
<h2 id="building-th-eapp">构建应用程序</h2>
<p>可以通过运行以下命令来构建用于分发的应用程序:</p>
<pre class="language-shell hljs">cargo tauri build
</pre>
<p>这将构建应用程序并在<code>src-tauri/target/release</code>下创建一个二进制文件。</p>
<p>现在，app准备<a href="https://tauri.app/v1/guides/distribution/publishing/" target="_blank" rel="noopener">发布</a>！</p>
<h2 id="conclusion">结论</h2>
<p>就是这样！感谢您阅读我关于使用Tauri与Vite和React构建应用程序的演练。如果您有任何问题/建议，请随时通过Twitter <a href="https://twitter.com/rahulnpadalkar" target="_blank" rel="noopener"> @rahulnpadalkar </a>联系我。你可以在这里找到GitHub repo与<a href="https://github.com/rahulnpadalkar/PomodoroTimer" target="_blank" rel="noopener">的所有代码</a>。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">使用LogRocket消除传统反应错误报告的噪音</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>是一款React analytics解决方案，可保护您免受数百个误报错误警报的影响，只针对少数真正重要的项目。LogRocket告诉您React应用程序中实际影响用户的最具影响力的bug和UX问题。</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>自动聚合客户端错误、反应错误边界、还原状态、缓慢的组件加载时间、JS异常、前端性能指标和用户交互。然后，LogRocket使用机器学习来通知您影响大多数用户的最具影响力的问题，并提供您修复它所需的上下文。</p><p vwo-el-id="28675661060">关注重要的React bug—<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">今天就试试LogRocket】。</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>