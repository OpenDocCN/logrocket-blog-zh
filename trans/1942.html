<html>
<head>
<title>Incorporating elastic ease in CSS animations - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 CSS 动画中加入弹性易用性</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/how-to-incorporate-elastic-ease-in-css-animations/#0001-01-01">https://blog.logrocket.com/how-to-incorporate-elastic-ease-in-css-animations/#0001-01-01</a></blockquote><div><article class="article-post">
<p>作为一个创作了无数 CSS 动画的人，我一直怀念的一件事是<code>keyframes</code>和<code>transition</code>的弹性放松。是的，您可以使用 JavaScript 库和其他技巧(我们稍后会谈到)，但是，作为最纯粹的人，我已经深入到这个主题中，检查了当前的解决方案，了解了所有这些背后的数学原理，并构建了一个 CSS 弹性缓动生成器，它可以输出纯净、干净和准确的 CSS 动画代码。</p>
<h2>CSS 中的弹性缓和是什么？</h2>
<p>首先，让我们试着更好地理解物体的弹性运动。让我们看一个红球从 A 点移动到 B 点:</p>
<p>球从 A 点开始，向它的目的地 B 点移动，但是它超过了 B 点一段距离，实际上是离开了 B 点。然后，它开始减速，停止，并开始向另一个方向移动，回到 B 点。它再次超过 B 点，这一次是以更小的幅度，并继续重复这一模式，每次都减少幅度，直到最后停止。</p>
<p>这是弹性缓动在图上的样子。</p>
<p><img data-attachment-id="58223" data-permalink="https://blog.logrocket.com/how-to-incorporate-elastic-ease-in-css-animations/elastic-ease-movement-graph/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph.png" data-orig-size="730,327" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="elastic-ease-movement-graph" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph-300x134.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph.png" decoding="async" class="aligncenter size-full wp-image-58223 jetpack-lazy-image" src="../Images/adb11717c1b3f66772663011241eea77.png" alt="Shrinking Wavy Line On Line Graph Showing Value And Time" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph-300x134.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="58223" data-permalink="https://blog.logrocket.com/how-to-incorporate-elastic-ease-in-css-animations/elastic-ease-movement-graph/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph.png" data-orig-size="730,327" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="elastic-ease-movement-graph" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph-300x134.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-58223" src="../Images/adb11717c1b3f66772663011241eea77.png" alt="Shrinking Wavy Line On Line Graph Showing Value And Time" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph-300x134.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/elastic-ease-movement-graph.png"/></noscript>
<ol>
<li>球的起点</li>
<li>初始运动</li>
<li>过度拍摄目的地</li>
<li>重复这个模式</li>
<li>端点</li>
</ol>
<h2>在 JavaScript 中使用动画库</h2>
<p>如果你使用的是像<a href="https://greensock.com" target="_blank" rel="noopener">格林斯托克</a>这样的动画库，只需添加<code>ease:Elastic.easeOut</code>并继续编码。应该注意的是，虽然第三方解决方案可以帮助您克服许多障碍，但它们确实有代价——有时是字面上的——并且它们可能会影响您的加载时间、包大小等等。</p>
<h2>JavaScript 中的弹性易用性编码</h2>
<p>如果你不想(或不能)使用 JS 库，不用担心，你仍然可以用纯代码实现一个缓和函数。是的，它需要不止一行代码，但是它非常简单，并且我已经为您完成了大部分工作:</p>
<blockquote class="embedly-card" data-card-controls="1" data-card-align="center" data-card-theme="light">

<p>没有描述</p>
</blockquote>
<p>我们这里有一个简单的<code>elastic()</code>函数，它接受一个 0 到 1 之间的值(T1)，并将其转换为点的正确 X 位置(T2)。该函数还接受两个常量:影响动画持续时间的速度和运动速度。随意摆弄这些数字，看看它们是如何影响圆点的运动的。</p>
<p>当我们点击<strong>运行</strong>时，<code>dotValue</code>重置为 0，功能开始。然后它不断运行，使用<code>requestAnimationFrame</code>函数，在每次迭代中增加<code>speed</code>值，并为新值重新计算点的位置。当<code>dotValue</code>到达<code>1</code>时，它停下来。</p>
<p>至于数学，我必须承认我的数学技能远不足以正确解释那里发生的事情，但我确实从几个不同的资源中检查了这个函数的一些变体，并最终得到了这个版本，它基于 easings.net 使用的数学，加上一些小的改进。</p>
<p>在这个例子中，我使用了<code>setProperty</code>函数，它设置了一个 CSS 自定义属性来控制点的<code>left</code>位置，但是您可以很容易地使用它来控制元素的大小、不透明度、角度、颜色等等。只要确保输入值在 0 和 1 之间，并根据您的需要正确定义两个<code>const</code>即可。</p>
<p>使用 CSS <code>cubic-bezier</code>轻松实现单步弹性</p>
<h2>一个简单而神奇的解决方案是使用<code>cubic-bezier</code> ease 获得单步松紧带。为此，您可以给函数的第四个参数一个足够高的值，使动画通过其目的地，然后返回到其最终值。</h2>
<p>它不像其他解决方案那样丰富，但它不使用 JS，很简单，有时它就是您需要的全部。我已经基于这个方法创建了几个例子，你可以使用 Lea Verou 的<a href="https://cubic-bezier.com" target="_blank" rel="noopener">这个伟大的工具</a>来试验<code>cubic-bezier</code>得到你想要的精确结果。</p>
<p>没有描述</p>
<blockquote class="embedly-card" data-card-controls="1" data-card-align="center" data-card-theme="light">

<p>在 CSS 中使用关键帧以增加弹性</p>
</blockquote>
<p>实现纯 CSS 弹性轻松的另一种方法是用动画关键帧手动定义移动的每一步，以便更好地理解这种方法。让我们再看一次图表上的运动:</p>
<h2><img data-attachment-id="58224" data-permalink="https://blog.logrocket.com/how-to-incorporate-elastic-ease-in-css-animations/segments-elastic-ease-graph/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph.png" data-orig-size="730,327" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Segments elastic ease graph" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph-300x134.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph.png" decoding="async" class="aligncenter size-full wp-image-58224 jetpack-lazy-image" src="../Images/72af6e4fa32eb7c63c944b50fa58b877.png" alt="Separated Segments Of Shrinking Wavy Line On Line Graph Showing Value And Time" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph-300x134.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph.png"/></h2>
<p>在这里，你可以看到运动被分成几段，由一条垂直的虚线分开。请注意，每个片段上的运动就像我们都知道的内置 CSS 渐入渐出计时功能，因此我们可以将每个片段转换为一个关键帧，并使用纯 CSS 获得完全弹性的运动。</p>
<p>这种方法的问题是，首先需要计算每个关键帧的位置和值，这不是一件容易的事情。而且，如果你不准确，结果可能看起来不稳定和不一致。为了解决这个问题，我构建了一个简单的生成器，它可以根据您的参数为您创建关键帧。</p><noscript><img data-lazy-fallback="1" data-attachment-id="58224" data-permalink="https://blog.logrocket.com/how-to-incorporate-elastic-ease-in-css-animations/segments-elastic-ease-graph/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph.png" data-orig-size="730,327" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Segments elastic ease graph" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph-300x134.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-58224" src="../Images/72af6e4fa32eb7c63c944b50fa58b877.png" alt="Separated Segments Of Shrinking Wavy Line On Line Graph Showing Value And Time" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph-300x134.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/segments-elastic-ease-graph.png"/></noscript>
<p>为了实现最大的通用性，我们需要控制三个变量，进而控制运动的轨迹:</p>
<p><strong>步数</strong>:来回重复的次数</p>
<p><strong>减速</strong>:控制每次重复之间的关系</p>
<ul>
<li><strong>速度</strong>:设置缓动从原始路径的偏移</li>
<li>为动画创建分段大小</li>
<li>我们来分析一下。我们将从动画的步数(分段)和它们之间的减速开始。这一点很重要，因为每一步都将被转换成一个关键帧，而每一步的大小将决定关键帧的位置。</li>
</ul>
<h2>没有描述</h2>
<p>如果您移动<strong>步数</strong>滑块，您就可以控制移动的分段数。<strong>减速条</strong>设定尺寸关系。当滑块一直移到最左侧时，所有线段的大小都相同。如果滑块位于最右侧，每个片段的大小将是前一个片段的一半。请注意，如果您使用了太多具有高减速值的步骤，则最后几步可能太小而没有任何效果。</p>
<blockquote class="embedly-card" data-card-controls="1" data-card-align="center" data-card-theme="light">

<p>设定速度</p>
</blockquote>
<p>现在我们有了关键帧的位置，让我们来讨论一下值。我们会说初始值总是 0，终值总是 1。这样，我们以后可以将这些值映射到任何 CSS 属性，速度级别将决定每一步与最终值的偏差。</p>
<p>没有描述</p>
<h2>现在我们已经有了一个漂亮的弹性图，我们要完成的最后一步是添加一个持续时间滑块来设置动画的总时间，然后决定我们要制作什么动画。</h2>
<p>在这个生成器中，我添加了一些选项来制作一些常用属性的动画，比如<code>width</code>、<code>height</code>和<code>transform</code>，但是你可以很容易地调整它来制作你需要的几乎任何属性的动画。</p>
<blockquote class="embedly-card" data-card-controls="1" data-card-align="center" data-card-theme="light">

<p>更多来自 LogRocket 的精彩文章:</p>
</blockquote>
<p>使用发电机</p>
<p>没有描述</p>
<p>现在，<a href="https://codepen.io/amit_sheen/full/57c932ba5730a4d512adc8ab49059892" target="_blank" rel="noopener">全屏打开发生器</a>。使用生成器的输入来控制运动，复制输出代码，并在项目中使用它来增加动画的弹性。</p><div class="code-block code-block-54">
<hr/>
<h3>您可以根据需要编辑和更改动画。例如，如果你想让你的动画循环，你可以放下<code>animation-fill-mode</code>并添加<code>animation-iteration-count: infinite;</code>。或者，可以添加<code>animation-direction: alternate;</code>、<code>animation-delay</code>，甚至可以针对不同的属性组合两个动画。</h3>

<hr/></div>
<h2>下面是一个很酷的动画示例，它使用了由此发生器创建的关键帧:</h2>
<blockquote class="embedly-card" data-card-controls="1" data-card-align="center" data-card-theme="light">

<p>没有描述</p>
</blockquote>
<p/>
<p>结论</p>
<p>我梦想有一天 CSS 会有一个内置的弹性函数，这个生成器会变得没用。想想看，如果有一个简单的弹性函数接受这三个参数，并产生一个干净漂亮的弹性放松，该多好，就像这样:</p>
<p>在那之前，你可以随意使用这个生成器来做任何你需要的事情，如果你对如何改进这个方法有任何想法或建议，请写在评论中。谢谢！</p>
<blockquote class="embedly-card" data-card-controls="1" data-card-align="center" data-card-theme="light">

<p>你的前端是否占用了用户的 CPU？</p>
</blockquote>
<p>随着 web 前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端 CPU 使用、内存使用等感兴趣，</p>
<h2>.</h2>
<p>LogRocket 就像是网络和移动应用的 DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p>
<pre>.elasticObject {
  animation-name: goElastic;
  animation-duration: 1.5s;
  animation-timing-function: elastic(7, 1.9, 0.5);
}
</pre>
<p>现代化您调试 web 和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>Is your frontend hogging your users' CPU?</h2><p>As web frontends get increasingly complex, resource-greedy features demand more and more from the browser. If you’re interested in monitoring and tracking client-side CPU usage, memory usage, and more for all of your users in production, </p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>.</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">LogRocket</a> is like a DVR for web and mobile apps, recording everything that happens in your web app or site. Instead of guessing why problems happen, you can aggregate and report on key frontend performance metrics, replay user sessions along with application state, log network requests, and automatically surface all errors.</p><p>Modernize how you debug web and mobile apps — <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a>.</p></div>
</div>

<p class="clearfix"/>
 <p class="clearfix"/>
</article>

</div>    
</body>
</html>