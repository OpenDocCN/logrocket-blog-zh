<html>
<head>
<title>Build a blog with Astro, Vite, and MDX </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Astro、Vite和MDX创建一个博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/build-blog-astro-vite-mdx/#0001-01-01">https://blog.logrocket.com/build-blog-astro-vite-mdx/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Astro最近宣布在他们的Astro 1.0 的<a href="https://astro.build/blog/astro-1/" target="_blank" rel="noopener">版本中支持MDX和Vite 3.0，这两个重要的集成使他们在构建静态站点方面处于领先地位。Vite是对其内部引擎的升级，提供了快速的构建和更好的开发体验，MDX用于扩展Markdown功能，以满足交互式的、基于文本的内容。</a></p>
<p>在本文中，您将学习如何使用Astro和MDX构建博客。我们将涵盖:</p>

<h2 id="prerequisites">先决条件</h2>
<ul>
<li>JavaScript和/或JavaScript框架的工作知识</li>
<li>了解降价语法</li>
</ul>
<h2 id="what-is-astro">什么是阿童木？</h2>
<p>Astro是一个强大的静态网站生成器，它让你使用你熟悉和喜爱的JavaScript框架创建高性能的网站。Astro是静态优先的，具有渐进式增强，这意味着，默认情况下，它不会向浏览器发送任何JavaScript，直到需要时才发送。</p>
<h2 id="what-is-vite">Vite是什么？</h2>
<p>Vite是下一代JavaScript构建工具，它简化了前端web应用程序的构建和开发。其他流行的JavaScript构建工具，如Webpack和Rollup，解决了开发过程中资产捆绑和本地提供代码的问题。</p>
<p>然而，Vite以不同的方式处理这个问题，它利用本地浏览器es模块在浏览器中立即加载JavaScript代码。这样，无论添加到项目中的依赖项或代码数量有多少，您仍然可以获得即时的构建。</p>
<h2 id="what-is-mdx">什么是MDX？</h2>
<p>MDX 是一个工具，它让你通过利用JSX的力量来扩展降价的能力。您可以导入和使用交互式组件，如图表、警报等。您甚至可以创建可重用的MDX组件。MDX为创建书面内容开辟了新的可能性。</p>
<h2 id="astro-app-setup">Astro应用程序设置</h2>
<p>首先在终端中运行以下命令，使用Astro CLI创建一个项目:</p>
<pre class="language-bash hljs">npm create <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="cfaebcbbbda08fa3aebbaabcbb">[email protected]</a>
</pre>
<p>根据您的偏好，按照逐步终端提示完成设置。</p>
<p>完成后，<code>cd</code>进入项目目录，运行下面的命令，在<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>启动Astro dev服务器:</p>
<pre class="language-bash hljs">npm run dev
</pre>
<p>打开浏览器并导航至<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>。您应该会在屏幕上看到以下内容:</p>
<p><img data-attachment-id="138050" data-permalink="https://blog.logrocket.com/build-blog-astro-vite-mdx/attachment/astro-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Astro Homepage in the Localhost Browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage.png" decoding="async" class="aligncenter size-full wp-image-138050 jetpack-lazy-image" src="../Images/cba1d0b7986b825c176131623f6e8689.png" alt="Astro Homepage In The Localhost Browser" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage-300x187.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138050" data-permalink="https://blog.logrocket.com/build-blog-astro-vite-mdx/attachment/astro-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage.png" data-orig-size="730,456" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Astro Homepage in the Localhost Browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage-300x187.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138050" src="../Images/cba1d0b7986b825c176131623f6e8689.png" alt="Astro Homepage In The Localhost Browser" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage-300x187.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/astro-homepage.png"/></noscript>
<p>现在，根据您的软件包管理器，使用下面的命令安装MDX:</p>
<pre class="language-bash hljs"># Using NPM
npx astro add mdx
# Using Yarn
yarn astro add mdx
# Using PNPM
pnpm astro add mdx
</pre>
<p>接受所有提示，完成Astro应用程序中的集成，并重启开发服务器。</p>
<p>默认情况下，Astro支持Markdown文件，并且可以从<code>src/pages</code>文件夹中的Markdown文件(<code>.md</code>)构建路线/页面。但是通过添加MDX集成，你可以使用文件夹中的<code>.mdx</code>文件在你的应用中生成页面。</p>
<h2 id="writing-mdx-code-into-astro-app">将MDX代码写入我们的Astro应用程序</h2>
<p>MDX没有任何特殊的语法，因为它只是Markdown和JSX的组合。您可以编写JSX、Markdown、JavaScript表达式以及导入和导出语句。</p>
<p>为了体验编写MDX代码的感觉，在项目的<code>src/pages</code>目录中创建一个文件，给它起一个您想要的名字，并以<code>.mdx</code>结束文件扩展名。然后粘贴以下代码块:</p>
<pre class="language-mdx hljs">export const continents = ['Africa', 'South America', 'Asia', 'Europe']
I think 2 + 2 is {2+2}

# Math operations Test in MDX, Astro and Vite
### There are 7 continents in the world, below are a few of them listed:
&lt;ul&gt;
  {continents.map((continent) =&gt; (
    &lt;li&gt;{continent}&lt;/li&gt;
  ))}
&lt;/ul&gt;
## HTMl-JSX-Markdown Mix
&lt;div&gt;
  &gt; Some *notable* things in a block quote!
&lt;/div&gt;
</pre>
<p>当您导航到页面名称时，您应该在浏览器中看到以下输出:</p>
<p><img data-attachment-id="138052" data-permalink="https://blog.logrocket.com/build-blog-astro-vite-mdx/attachment/math-operations-test-output-mdx-astro-vite/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite.png" data-orig-size="730,508" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Math Operations Test in MDX, Astro and Vite" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite-300x209.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite.png" decoding="async" class="aligncenter size-full wp-image-138052 jetpack-lazy-image" src="../Images/09f039ffdabd74908c06a90ac327f20e.png" alt="Math Operations Test In MDX, Astro And Vite" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite-300x209.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138052" data-permalink="https://blog.logrocket.com/build-blog-astro-vite-mdx/attachment/math-operations-test-output-mdx-astro-vite/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite.png" data-orig-size="730,508" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Math Operations Test in MDX, Astro and Vite" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite-300x209.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138052" src="../Images/09f039ffdabd74908c06a90ac327f20e.png" alt="Math Operations Test In MDX, Astro And Vite" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite-300x209.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/math-operations-test-output-mdx-astro-vite.png"/></noscript>
<h2 id="creating-blog-with-mdx-astro">用MDX和Astro创建博客</h2>
<p>在本教程中，我们将使用MDX和Astro构建一个博客。</p>
<p>创建博客时，您将:</p>
<ul>
<li>使用MDX创建基于文本的内容</li>
<li>为<code>blog</code>和<code>post</code>页面创建布局</li>
<li>向MDX添加交互式组件</li>
<li>使用Astro中的<code>frontmatter</code>将数据传递给Astro布局</li>
<li>使用<code>Astro.glob()</code>方法在本地获取所有降价文件进行显示</li>
</ul>
<h3 id="creating-blog-post-layout">创建博客文章布局</h3>
<p>导航到<code>src/layouts</code>文件夹，创建一个名为<code>PostLayout.astro</code>的新布局，并粘贴以下代码:</p>
<pre class="language-astro hljs">---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

const {
  frontmatter: { title, description, pubDate, image, author },
} = Astro.props;
---
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;BaseHead title={title} description={description} /&gt;
    &lt;style&gt;
      .title {
        font-size: 2em;
        margin: 0.25em 0 0;
      }
      hr {
        border-top: 1px solid #ddd;
        margin: 1rem 0;
      }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;Header /&gt;
    &lt;main&gt;
      &lt;article&gt;
        &lt;div class="article-head"&gt;
          &lt;h1 class="title"&gt;{title}&lt;/h1&gt;
          &lt;em&gt;Written by: {author}&lt;/em&gt;
        &lt;/div&gt;
        &lt;div class="article-body"&gt;
          {image &amp;&amp; &lt;img width={720} height={360} src={image} alt="" /&gt;}
          Published on: {pubDate &amp;&amp; &lt;time&gt;{pubDate}&lt;/time&gt;}
          &lt;hr /&gt;
          &lt;slot /&gt;
        &lt;/div&gt;
      &lt;/article&gt;
    &lt;/main&gt;
    &lt;div class="footer-container"&gt;
      &lt;Footer /&gt;
    &lt;/div&gt;
    &lt;style&gt;
      html {
        min-height: 100vh;
        height: 100%;
      }
      body {
        height: 100%;
      }
      time {
        display: inline-block;
        margin-top: 10px;
      }
    &lt;/style&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>我们来分析一下上面代码块的内容。</p>
<p>首先，文件顶部有一些尚不存在的组件导入。我们将很快创建它们:</p>
<ul>
<li>组件<code>BaseHead</code>将包含布局的所有HTML <code>&lt;head&gt;&lt;/head&gt;</code>属性</li>
<li><code>Header</code>组件将在页面顶部包含导航链接，用于在路线之间切换</li>
<li>组件将包含布局的页脚</li>
<li>第37行的<code>&lt;slot/&gt;</code>组件用于将Markdown文件中的其余文本内容注入到布局中</li>
</ul>
<p>Astro为Markdown和MDX页面提供了一个<code>frontmatter</code>属性，可以用来定义描述文件的“元数据”。</p>
<p>在<code>PostLayout.astro</code>文件中，可以访问每个Markdown/MDX文件传递的<code>frontmatter</code> prop来提取文件中定义的元数据。在第8行，由<code>Astro.props</code>提供的<code>frontmatter</code>属性被析构以暴露模板的变量。</p>
<p>现在，让我们为缺失的导入组件添加代码。</p>
<p>对于下面的每个代码块，在<code>components</code>文件夹中创建相应的文件，并粘贴相应代码块中的代码:</p>
<p>对于<code>Header.astro</code>:</p>
<pre class="language-astro hljs">&lt;header&gt;
  &lt;nav&gt;
    &lt;a href="/"&gt;Home&lt;/a&gt;
    &lt;a href="/blog"&gt;Blog&lt;/a&gt;
  &lt;/nav&gt;
&lt;/header&gt;
&lt;style&gt;
  header {
    margin: 2em 4em 2em;
  }
  h2 {
    margin: 0.5em 0;
  }
&lt;/style&gt;
</pre>
<p>对于<code>Footer.astro</code>:</p>
<pre class="language-astro hljs">---
const today = new Date();
---
&lt;footer&gt;
    &amp;copy; {today.getFullYear()} YOUR NAME HERE. All rights reserved.
&lt;/footer&gt;
&lt;style&gt;
    footer {
        padding: 25px;
        text-align: center;
    }
&lt;/style&gt;
</pre>
<p>最后，对于<code>BaseHead.astro</code>:</p>
<pre class="language-astro hljs">---
// Import the global.css file here so that it is included on
// all pages through the use of the &lt;BaseHead /&gt; component.
import "../styles/global.css";

const { title, description } = Astro.props;
---
&lt;!-- Global Metadata --&gt;
&lt;meta charset="utf-8" /&gt;
&lt;meta name="viewport" content="width=device-width,initial-scale=1" /&gt;
&lt;link rel="icon" type="image/svg+xml" href="/favicon.svg" /&gt;
&lt;meta name="generator" content={Astro.generator} /&gt;
&lt;!-- Primary Meta Tags --&gt;
&lt;title&gt;{title}&lt;/title&gt;
&lt;meta name="title" content={title} /&gt;
&lt;meta name="description" content={description} /&gt;
</pre>
<p>还有一个缺失的导入:<code>../styles/global.css</code>。让我们快速创建文件并向其中添加样式。</p>
<p>在<code>src</code>文件夹中，用名为<code>global.css</code>的文件创建一个<code>styles</code>文件夹，并添加以下代码:</p>
<pre class="language-css hljs">/*
  The CSS in this style tag is based off of Bear Blog's default CSS. https://github.com/HermanMartinus/bearblog/blob/297026a877bc2ab2b3bdfbd6b9f7961c350917dd/templates/styles/blog/default.css
  License MIT: https://github.com/HermanMartinus/bearblog/blob/master/LICENSE.md
 */
body {
  font-family: Verdana, sans-serif;
  margin: auto;
  padding: 20px;
  text-align: left;
  background-color: #fff;
  word-wrap: break-word;
  overflow-wrap: break-word;
  line-height: 1.5;
  color: #444;
  width: 100%;
}
.article-head {
  margin-left: 4em;
  margin-bottom: 50px;
}
.article-body {
  max-width: 65ch;
  margin: 0 auto;
}
h1,
h2,
h3,
h4,
h5,
h6,
strong,
b {
  color: #222;
}
a {
  color: #222;
}
nav a {
  margin-right: 10px;
}
textarea {
  width: 100%;
  font-size: 16px;
}
input {
  font-size: 16px;
}
content {
  line-height: 1.6;
}
table {
  width: 100%;
}
img {
  max-width: 100%;
  height: auto;
}
code {
  padding: 2px 5px;
  background-color: #f2f2f2;
}
pre {
  padding: 1rem;
}
pre &gt; code {
  all: unset;
}
blockquote {
  border: 1px solid #999;
  color: #222;
  padding: 2px 0px 2px 20px;
  margin: 0px;
  font-style: italic;
}</pre>
<h3 id="creating-markdown-blog-post">创建降价博客文章</h3>
<p>为了测试布局，创建一个<code>.mdx</code>文件并添加一些内容。为此，导航到<code>pages</code>文件夹，创建一个<code>post</code>文件夹，添加第一篇名为<code>first-post.mdx</code>的博客文章，然后粘贴下面的代码。您可以随意调整它并更改属性值:</p>
<pre class="language-mdx hljs">---
layout: ../../layouts/PostLayout.astro
title: "Astro, Vite and MDX test"
description: "Lorem ipsum dolor sit amet"
author: "Iniubong Obonguko"
pubDate: "20 Aug, 2022"
image: "https://images.unsplash.com/photo-1664380619395-a25d867b5fb9?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;q=80&amp;w=1080"
slug: "first-post"
---
## Story about Old days
In the olden days, Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Vitae ultricies leo integer malesuada nunc vel risus commodo viverra. Adipiscing enim eu turpis egestas pretium. Euismod elementum nisi quis eleifend quam adipiscing. In hac habitasse platea dictumst vestibulum. Sagittis purus sit amet volutpat. Netus et malesuada fames ac turpis egestas. Eget magna fermentum iaculis eu non diam phasellus vestibulum lorem. Varius sit amet mattis vulputate enim. Habitasse platea dictumst quisque sagittis. Integer quis auctor elit sed vulputate mi. Dictumst quisque sagittis purus sit amet.

## Conclusion
Morbi tristique senectus et netus. Id semper risus in hendrerit gravida rutrum quisque non tellus. Habitasse platea dictumst quisque sagittis purus sit amet. Tellus molestie nunc non blandit massa. Cursus vitae congue mauris rhoncus. Accumsan tortor posuere ac ut. Fringilla urna porttitor rhoncus dolor. Elit ullamcorper dignissim cras tincidunt lobortis. In cursus turpis massa tincidunt dui ut ornare lectus. Integer feugiat scelerisque varius morbi enim nunc. Bibendum neque egestas congue quisque egestas diam. Cras ornare arcu dui vivamus arcu felis bibendum. Dignissim suspendisse in est ante in nibh mauris. Sed tempus urna et pharetra pharetra massa massa ultricies mi.
</pre>
<p><code>frontmatter</code>是定义在<br/>三重破折号(—)之间的所有元数据属性和值。</p>
<p>在<code>.mdx</code>文件的顶部定义了所有的<code>frontmatter</code>数据:</p>
<ul>
<li>属性定义了选择的布局，这是在前面的<code>PostLayout.astro</code>中创建的</li>
<li><code>frontmatter</code>中的所有其他属性包含布局用来填充页面的“元数据”</li>
<li><code>frontmatter</code>下面的其余内容被视为博客的文本内容，并被传递到布局中的<code>&lt;slot/&gt;</code>占位符中</li>
</ul>
<p>在您的浏览器上，转到<code><a href="https://localhost:3000/post/first-post" rel="nofollow">https://localhost:3000/post/first-post</a></code>，您应该会看到一个类似于下图的页面:</p>
<p><img data-attachment-id="138054" data-permalink="https://blog.logrocket.com/build-blog-astro-vite-mdx/attachment/markdown-blog-post-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/markdown-blog-post-example.gif" data-orig-size="730,371" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Example gif of markdown blog post" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/markdown-blog-post-example-300x152.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/markdown-blog-post-example.gif" decoding="async" class="aligncenter size-full wp-image-138054 jetpack-lazy-image" src="../Images/87c70dcefef02aaba2ec21fad4bbb5e9.png" alt="Example Gif Of Markdown Blog Post" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/markdown-blog-post-example.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/markdown-blog-post-example.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138054" data-permalink="https://blog.logrocket.com/build-blog-astro-vite-mdx/attachment/markdown-blog-post-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/markdown-blog-post-example.gif" data-orig-size="730,371" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Example gif of markdown blog post" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/markdown-blog-post-example-300x152.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/markdown-blog-post-example.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138054" src="../Images/87c70dcefef02aaba2ec21fad4bbb5e9.png" alt="Example Gif Of Markdown Blog Post" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/markdown-blog-post-example.gif"/></noscript>
<h3 id="adding-interactive-components-to-astro-blog">向我们的Astro博客添加交互式组件</h3>
<p>现在，我们将看看如何将支持JavaScript的交互式组件添加到我们的博客文章中。</p>
<p>为此，我们将使用一个名为<code><a href="https://www.npmjs.com/package/accessible-astro-components" target="_blank" rel="noopener">accessible-astro-components</a></code>的Astro组件库。要继续，我们首先需要安装库。通过在终端的<code>projects</code>文件夹下运行下面的代码来实现。</p>
<pre class="language-bash hljs">npm i accessible-astro-components
</pre>
<p>接下来，在<code>frontmatter</code>定义下的<code>first-post.mdx</code>文件中，导入<code>Accordion</code>和<code>AccordionItem</code>组件:</p>
<pre class="language-mdx hljs">import { Accordion, AccordionItem } from "accessible-astro-components";
</pre>
<p>现在，您可以在文件的任何地方使用<code>Accordion</code>:</p>
<pre class="language-mdx hljs">{/* first-post.mdx */}
{/* Rest of content at top */}
...
&lt;Accordion&gt;
  &lt;AccordionItem header="First Item"&gt;
    &lt;p&gt;
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto quasi
      nobis optio? Qui in quo accusantium debitis sapiente obcaecati magnam
      incidunt sit. Molestiae exercitationem quibusdam quod veritatis laboriosam
      est tenetur.
    &lt;/p&gt;
    &lt;a href="#"&gt;Tab to me!&lt;/a&gt;
  &lt;/AccordionItem&gt;
  &lt;AccordionItem header="Second Item"&gt;
    &lt;p&gt;
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto quasi
      nobis optio? Qui in quo accusantium debitis sapiente obcaecati magnam
      incidunt sit. Molestiae exercitationem quibusdam quod veritatis laboriosam
      est tenetur.
    &lt;/p&gt;
  &lt;/AccordionItem&gt;
&lt;/Accordion&gt; 
...
{/* Rest of content at bottom */}
</pre>
<p>结果是:</p>
<p><img data-attachment-id="138057" data-permalink="https://blog.logrocket.com/build-blog-astro-vite-mdx/attachment/interactive-components-astro-blog/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/interactive-components-astro-blog.gif" data-orig-size="730,371" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Result of interactive components in our Astro blog" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/interactive-components-astro-blog-300x152.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/interactive-components-astro-blog.gif" decoding="async" class="aligncenter size-full wp-image-138057 jetpack-lazy-image" src="../Images/4cb9d3533cb11e3bace265571a9bbb2b.png" alt="Result Of Interactive Components In Our Astro Blog" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/interactive-components-astro-blog.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/interactive-components-astro-blog.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138057" data-permalink="https://blog.logrocket.com/build-blog-astro-vite-mdx/attachment/interactive-components-astro-blog/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/interactive-components-astro-blog.gif" data-orig-size="730,371" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Result of interactive components in our Astro blog" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/interactive-components-astro-blog-300x152.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/interactive-components-astro-blog.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138057" src="../Images/4cb9d3533cb11e3bace265571a9bbb2b.png" alt="Result Of Interactive Components In Our Astro Blog" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/interactive-components-astro-blog.gif"/></noscript>
<blockquote><p>也可以使用专门为其他JavaScript框架制作的组件，比如VueJS、React和Svelte。你只需要首先在你的Astro应用中设置框架，然后导入想要的组件。</p></blockquote>
<p>参考<a href="https://docs.astro.build/en/core-concepts/framework-components/" target="_blank" rel="noopener">这里的官方文档</a>了解如何操作。</p>
<h3 id="create-page-in-astro-blog">在我们的Astro博客中创建一个页面</h3>
<p>我们需要一个博客页面，将在一个网格中显示所有的博客帖子。</p>
<p>但是在我们开始之前，让我们首先在<code>/Layout</code>文件夹下为博客页面创建一个布局，并将其命名为<code>BlogLayout.astro</code>。然后将以下代码粘贴到其中:</p>
<pre class="language-astro hljs">---
import Header from "../components/Header.astro";
import BaseHead from "../components/BaseHead.astro";
const { title } = Astro.props;
---
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;BaseHead
    title="Blog Page"
    description="A page to display all our blog posts"
  /&gt;
  &lt;body&gt;
    &lt;div class="layout"&gt;
      &lt;h1&gt;{title}&lt;/h1&gt;
      &lt;Header /&gt;
      &lt;main&gt;
        &lt;slot /&gt;
      &lt;/main&gt;
    &lt;/div&gt;
    &lt;style&gt;
      body {
        margin: 0;
        background-color: #fff;
        width: 100%;
      }
      .layout {
        max-width: 1280px;
        margin: 0 auto;
      }
    &lt;/style&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>接下来，转到<code>src/pages</code>文件夹，创建一个<code>blog.astro</code>文件，并粘贴以下代码:</p>
<pre class="language-astro hljs">---
import BlogLayout from "../layouts/BlogLayout.astro";
import { Card } from "accessible-astro-components";
const posts = await Astro.glob("../pages/post/**/*.mdx");
---
&lt;BlogLayout title="Blog"&gt;
  &lt;section&gt;
    &lt;div class="container"&gt;
      &lt;ul&gt;
        {
          posts.map((post) =&gt; (
            &lt;li&gt;
              &lt;Card
                url={"/post/" + post.frontmatter.slug}
                img={post.frontmatter.image}
                title={post.frontmatter.title}
                footer={post.frontmatter.author}
              &gt;
                {post.frontmatter.description}
              &lt;/Card&gt;
            &lt;/li&gt;
          ))
        }
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;/section&gt;
&lt;/BlogLayout&gt;
&lt;style lang="scss"&gt;
  ul {
    display: grid;
    grid-gap: 2rem;
    grid-template-columns: repeat(3, 1fr);
    list-style-type: none;
  }
&lt;/style&gt;
</pre>
<p>让我们分析一下上面的代码块中发生了什么:</p>
<ul>
<li>首先，<code>BlogLayout</code>被导入以用作页面的布局</li>
<li>从<code>accessible-astro-components</code>包中导入<code>Card</code>组件</li>
<li>Astro有一个<code>Astro</code>全局上下文和<code>.glob()</code>方法，可以用来将许多本地文件加载到静态站点设置中。在这种情况下，所有包含在<code>/pages/post</code>目录中的<code>.mdx</code>文件都被加载并赋给了<code>posts</code>变量</li>
<li>然后一个<code>.map</code>方法遍历<code>posts</code>变量中的值，呈现一个列表，并为<code>Card</code>组件分配必要的道具</li>
<li>在博客文件的<code>frontmatter</code>属性上定义的<code>slug</code>属性随后被用于构建卡片组件的URL</li>
</ul>
<p>在<code>pages/post</code>目录中添加一篇或两篇以上的博客文章来填充博客页面。</p>
<p>完成后，博客页面应该如下所示:</p>
<p><img data-attachment-id="138059" data-permalink="https://blog.logrocket.com/build-blog-astro-vite-mdx/attachment/result-of-astro-blog/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/result-of-astro-blog.gif" data-orig-size="730,384" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final result of Astro blog" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/result-of-astro-blog-300x158.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/result-of-astro-blog.gif" decoding="async" class="aligncenter size-full wp-image-138059 jetpack-lazy-image" src="../Images/407cd97508c58307b69690fcff7d1469.png" alt="Final Result Of Astro Blog" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/result-of-astro-blog.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/result-of-astro-blog.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="138059" data-permalink="https://blog.logrocket.com/build-blog-astro-vite-mdx/attachment/result-of-astro-blog/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/result-of-astro-blog.gif" data-orig-size="730,384" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final result of Astro blog" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/result-of-astro-blog-300x158.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/result-of-astro-blog.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-138059" src="../Images/407cd97508c58307b69690fcff7d1469.png" alt="Final Result Of Astro Blog" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/result-of-astro-blog.gif"/></noscript>
<p>瞧啊。博客现在完成了。</p>
<h2 id="conclusion">结论</h2>
<p>使用Markdown语法创建基于文本的交互式内容从未如此简单。按照这个教程，你就可以使用Astro和MDX创建一个博客了。请随意使用您自己的定制样式和额外特性来更新本教程中的代码。</p>
<p>您还可以从官方文档网站了解更多关于Astro提供的与MDX集成<a href="https://docs.astro.build/en/guides/markdown-content/" target="_blank" rel="noopener">的酷特性。</a></p>
<p>合十礼。</p><div class="code-block code-block-28">
<div class="blog-plug inline-plug js-libraries-plug"><h2>您是否添加了新的JS库来提高性能或构建新特性？如果他们反其道而行之呢？</h2><p>毫无疑问，前端变得越来越复杂。当您向应用程序添加新的JavaScript库和其他依赖项时，您将需要更多的可见性，以确保您的用户不会遇到未知的问题。</p>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放JavaScript错误，就像它们发生在您自己的浏览器中一样，这样您就可以更有效地对错误做出反应。</p><a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/></noscript></a>
<a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自Redux、Vuex和@ngrx/store的额外上下文。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket还可以监控应用的性能，报告客户端CPU负载、客户端内存使用等指标。</p><p>自信地构建— <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>