<html>
<head>
<title>Using GSAP 3 for web animation - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用 GSAP 3 制作网络动画</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-gsap-3-for-web-animation/#0001-01-01">https://blog.logrocket.com/using-gsap-3-for-web-animation/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Greensock 动画平台(GSAP)是一个易于使用的网页动画 JavaScript 库。它可以让您制作任何可以用 JavaScript 访问的东西的动画，包括 SVG、通用对象、画布等等。</p>
<h2 id="gsapforanimationanintroduction">动画 GSAP:介绍</h2>
<p>Web 动画最基本的形式是每秒尽可能多次地改变元素的属性值。GSAP 通过获取开始和结束值，然后在这两个值之间间歇过渡来创建动画效果。例如，淡出效果是通过将元素的开始和结束不透明度分别设置为 1 和 0 来实现的。结果是随着不透明度属性值从 1 过渡到 0，指定元素逐渐淡化。</p>
<p>对于那些优先考虑速度、灵活性和控制的人来说，GSAP 是网络动画库的一个很好的选择。GSAP 是一个速度极快的库(估计比 jquery 库快 20 倍)，这意味着你的 GSAP 动画不会给你的应用程序带来明显的延迟。</p>
<p>有大量的方法可供选择，GSAP 还可以让你以最理想的方式制作几乎所有 CSS 属性的动画。有了 GSAP，你可以准确地决定动画将持续多长时间以及要更改的确切属性，而不必编写可能会降低应用程序速度的高级自定义动画。</p>
<p>最后，GSAP 不依赖于任何外部库，所以没有必要安装或加载任何额外的库到你的应用程序中来开始动画。</p>
<p>在本教程中，我们将使用 GSAP 3。你可以在这里了解更多关于这个图书馆的信息。</p>
<h2 id="gettingstartedwithgsap">GSAP 入门</h2>
<p>可以通过多种方式将 GSAP 加载到您的应用程序中，但最快的方法是将 GSAP CDN 添加到您的 HTML 文件中:</p>
<pre><code>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"&gt;&lt;/script&gt;
</code></pre>
<p>或者，可以使用 npm 和 yarn 安装 GSAP。对于 npm 安装，运行:</p>
<pre><code> npm install gsap
</code></pre>
<p>对于场地安装:</p>
<pre><code>yarn add gsap
</code></pre>
<p>你也可以从 GSAP 官方网站<a href="https://greensock.com/docs/v3/Installation">这里</a>下载 zip 文件，或者从<a href="https://github.com/greensock/GSAP"> github </a>获取。</p>
<p><strong>在 GSAP 使用补间</strong> <br/>由于属性改变，补间是一个单一的运动。在 GSAP，典型的补间包含一个方法、要动画的元素、动画持续时间和一个名为<code>vars</code>的属性对象。以下是任何给定补间的基本语法:</p>
<pre><code>TweenMax.method(element, duration, vars)
</code></pre>
<p><code>TimeLine</code>是一个用于补间动画的容器，允许您实时定位动画。它可以借助不同的 GSAP 方法来实现这一点。下面是一个典型的 GSAP 时间表的例子:</p>
<pre><code>var tl = gsap.timeline();
</code></pre>
<p>然后，您可以使用任何 JavaScript 方法创建动画。在本例中，我们将使用<code>to()</code>方法，该方法确定最终值:</p>
<pre><code>tl.to(".box", {duration: 1, opacity: 0 });
</code></pre>
<p>有了这个基本的理解，我们现在可以继续学习如何使用各种 JavaScript 方法在 GSAP 创建动画。</p>
<h2 id="usinggsapmethods">使用 GSAP 方法</h2>
<p>方法是 GSAP 任何动画的关键。方法有助于定义动画目标值以及起始值。在接下来的部分，我们将讨论 GSAP 方法，从最基本的到更高级的，以及如何在你的应用程序中使用它们制作动画。</p>
<h3>到()</h3>
<p>这是用于设置给定动画的最终值的最常见的 GSAP 方法。使用此方法时，GSAP 会根据给定元素的 CSS 属性自动设置初始值。</p>
<p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="js,result" data-user="amaechi1" data-slug-hash="wvovKPX" data-pen-title="GSAP to() method">参见《笔<a href="https://codepen.io/amaechi1/pen/wvovKPX"> <br/> GSAP 到()方法</a>由伊丽莎白阿玛奇(<a href="https://codepen.io/amaechi1">@阿玛奇 1 </a> ) <br/>于<a href="https://codepen.io"> CodePen </a>。</p>
<p>来自()</p>
<h3><code>from()</code>方法最适合用于反向动画。当你设置初始 CSS 属性时，GSAP 将动画显示为默认值。例如，如果不透明度设置为 0，那么 GSAP 开始从 0 不透明度动画，直到它达到最初设置的不透明度(在我们的例子中，1)。下面是一个使用<code>from()</code>方法的动画示例。</h3>
<p>参见《笔<a href="https://codepen.io/amaechi1/pen/mdOdwYX"><br/>》GSAP 撰()法</a>伊丽莎白阿玛奇(<a href="https://codepen.io/amaechi1">@阿玛奇 1 </a> ) <br/>上<a href="https://codepen.io"> CodePen </a>。</p>
<p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="css,result" data-user="amaechi1" data-slug-hash="mdOdwYX" data-pen-title="GSAP from() method">fromTo()</p>
<p>使用<code>fromTo() method</code>，开发者能够定义给定动画的开始和结束属性。该方法的语法与上面提到的其他两种方法略有不同，因为它采用了两个不同的对象来指定起始值和结束值:</p>
<h3>见<a href="https://codepen.io/amaechi1/pen/MWbWoQR">笔<br/> GSAP fromTO()方法</a>by Elizabeth amae chi(<a href="https://codepen.io/amaechi1">@ amae chi</a>)<br/>on<a href="https://codepen.io">code Pen</a>。</h3>
<p>集合()</p>
<pre><code>gsap.fromTo(".box", {x: 20 , y: 10}, { x: 200 , y : 100, duration: 1});
</code></pre>
<p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="js,result" data-user="amaechi1" data-slug-hash="MWbWoQR" data-pen-title="GSAP fromTO() method"><code>set()</code>方法是一种零方向方法，用于设置给定元素的属性。当您想要设置稍后将使用 GSAP 制作动画的属性时，此方法非常方便。</p>
<p>从上面可以看出，带有<code>"``.box``"</code>类的元素的 x 和 y 坐标分别设置为 10 和 20。然后，您可以在以后使用已经设置的初始值来制作元素的动画。</p>
<h3> </h3>
<p>方法链式反应和基本测序</p>
<pre><code>gsap.set(".box", {x: 10 , y: 20});
</code></pre>
<p>为了实现一个更简洁的动画，其中我们确切地定义哪个动画先出现，我们需要链接<code>to()</code>方法并按照我们想要的顺序列出动画(补间动画)。</p>
<p>为此，我们将首先创建一个时间线；</p>
<h3>然后，我们可以继续将每个补间添加到已经创建的时间轴中:</h3>
<p>动画控制功能</p>
<p>动画控制功能让您完全控制动画，允许您执行暂停和反转等操作。控制功能包括<code>play()</code>、<code>pause()</code>、<code>reverse()</code>、<code>kill()</code>、<code>resume()</code>等。</p>
<pre><code>var tl = gsap.timeline({repeat: 30, repeatDelay: 1});
</code></pre>
<p>请注意，使用任何给定 GSAP 方法的动画都会返回一个补间实例。正是在这种情况下，您的动画控制功能被调用。以下面的补间实例为例:</p>
<pre>tl.add( gsap.to("#box", {duration: 1, x: 100}) );
tl.add( gsap.to("#box2", {duration: 2, x: 100 , scale: 1.1}) );
tl.add( gsap.to("#box3", {duration: 3, x: 100 , scale: 2}) );
</pre>
<h2 id="animationcontrolfunctions">请注意我们如何使用点击事件上的<code>pause()</code>函数来控制它:</h2>
<p>看笔<a href="https://codepen.io/amaechi1/pen/mdOdMGv"> <br/> GSAP 动画控</a>by Elizabeth amae chi(<a href="https://codepen.io/amaechi1">@ amae chi</a>)<br/>上<a href="https://codepen.io"> CodePen </a>。</p>
<p>GSAP 的特殊属性</p>
<pre><code>// create a reference to the animation
//
const instance = gsap.to(".box", {x: 100 , y: 100});
</code></pre>
<p>GSAP 区别对待特殊属性，如招摇和回调，以达到更好的效果。</p>
<pre><code>document.querySelector(".pause").onclick = () =&gt; instance.pause();
</code></pre>
<p class="codepen" data-height="431" data-theme-id="dark" data-default-tab="js,result" data-user="amaechi1" data-slug-hash="mdOdMGv" data-pen-title="GSAP animation control">游荡者</p>
<p>漫游器用于动画一组元素。swagger 允许您指定为组中的每个给定元素设置动画的开始时间。</p>
<h2 id="specialpropertiesingsap">更多来自 LogRocket 的精彩文章:</h2>
<p>看<a href="https://codepen.io"> CodePen </a>上伊丽莎白阿玛奇(<a href="https://codepen.io/amaechi1">@阿玛奇 1 </a> ) <br/>的笔<a href="https://codepen.io/amaechi1/pen/OJbJjKJ">GSAP 组动画昂首阔步</a>。</p>
<p>回收</p>
<h3>如果您希望在事件(如完成或更新)发生后执行特定的操作，则需要回调。一些在 GSAP 可用的回调包括:<code>onComplete</code>、<code>onStart</code>和<code>onUpdate</code>。</h3>
<p>您可以使用<code>onComplete</code>回调将一个句子记录到控制台，如下所示:</p><div class="code-block code-block-54">
<hr/>
<h3>回调也可以使用回调的<code>param</code>属性接受一个参数，如下所示；</h3>

<hr/></div>
<p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="js,result" data-user="amaechi1" data-slug-hash="OJbJjKJ" data-pen-title="GSAP group animation with swagger">属性接受函数的参数。</p>
<p>GSAP 插件</p>
<h3>GSAP 插件提供了传统 GSAP 图书馆没有的额外功能。它们包含特殊属性，这些属性稍后会动态插入到 GSAP 中。一些最流行的 GSAP 插件包括:Draggable，DrawSVGPlugin 和 MorphSVGPlugin。</h3>
<p>请注意，在使用任何 GSAP 插件之前，您需要将它注册到 GSAP 核心，如下所示:</p>
<p>可拖动的</p>
<pre><code>gsap.to(".box", {duration: 1, x:150, onComplete: tweenComplete});

function tweenComplete() {
    console.log("completed");
}
</code></pre>
<p>GSAP 可拖动插件让你用 GSAP 创建可怕的可拖动元素。该插件支持触摸，因此用户可以在平板电脑和手机上使用它。使用 Draggable，您可以使用<code>trigger</code>属性设置应用程序中应该触发拖动的确切部分。</p>
<pre><code>gsap.to(".box", {duration: 1, x: 100, onComplete: tweenComplete, onCompleteParams: ["message parameter"]});

function tweenComplete(message) {
  console.log(message);
}
</code></pre>
<p>Draggable 插件在转换后的容器上运行良好，并且可以在 SVG 上使用，效果令人印象深刻。</p>
<h2 id="gsapplugins">要开始使用 Draggable，我们可以简单地创建一个可拖动的元素，如下所示:</h2>
<p>这将允许水平和垂直拖动元素。</p>
<p>使用上面的例子，您可以为配置接受另一个参数。您可以定义拖动位置，设置 bounds 元素，并在单击元素或拖动完成时调用函数。</p>
<pre><code>gsap.registerPlugin( Draggable , MotionPathPlugin, TextPlugin);
</code></pre>
<p>在这个代码片段中，<code>inertia</code>属性用于使元素在可拖动插件中可旋转:</p>
<h3>在可拖动上捕捉</h3>
<p><code>snap</code>和<code>liveSnap</code>属性定义了在拖动后或拖动过程中，被拖动的项目应该在何时何地对齐。在这里，<code>liveSnap</code>让拖动的元素捕捉到数组中最近的点，当它在半径的 15px 以内时，用 points 属性定义:</p>
<p>你可以在这里了解更多上面<a href="https://greensock.com/docs/v3/Plugins">列出的其他插件。</a></p>
<p>GSAP 动画在反应</p>
<pre><code>Draggable.create("#draggable");
</code></pre>
<p>对于想开始使用 GSAP 的 React 开发人员，这里有一个快速指南，介绍 react.js 的不同之处</p>
<p>GSAP 装置</p>
<p>GSAP 可以通过运行以下命令来安装 npm:</p>
<pre>Draggable.create("#draggable", {
    type:"x",
    bounds: document.getElementById("container"),
    inertia: true,
    onClick: function() {
         console.log("clicked");
    },
    onDragEnd: function() {
         console.log("drag is complete");
    }
});
</pre>
<p>或者，用纱线:</p>
<h3>对于安装 GSAP 奖励插件:</h3>
<p>或者，用纱线:</p>
<pre>Draggable.create("#draggable", {
  type: "x,y",
    liveSnap: {
        points: [{x: 0, y: 0}, {x: 150, y: 0}, {x: 250, y: 50}],
        radius: 15
    }
})
</pre>
<p>GSAP 进口</p>
<h2 id="gsapanimationinreact">然后，您可以继续导入项目文件中的 GSAP:</h2>
<p>插件可以单独导入，就像这样:</p>
<h3>如前所述，记得在使用前注册你的插件:</h3>
<p> </p>
<pre>npm install gsap
</pre>
<p>创作你的第一部 GSAP 动画</p>
<pre>yarn add gsap
</pre>
<p>首先，像对待任何 React 项目一样，创建基于类的组件:</p>
<pre>npm install ./gsap-bonus.tgz
</pre>
<p>结论</p>
<pre>yarn add ./gsap-bonus.tgz</pre>
<h3>GSAP 仍然是最灵活的网络动画库之一，有了 GSAP 3，动画变得更加容易。</h3>
<p>在本教程中，你有希望了解到你不必将你的动画仅仅局限于基本元素。GSAP 提供了许多方法，使得用 JavaScript 编写动画代码变得更加容易。</p>
<pre>import { gsap } from "gsap";
</pre>
<p>您是否添加了新的 JS 库来提高性能或构建新特性？如果他们反其道而行之呢？</p>
<pre>import { PixiPlugin } from "gsap/PixiPlugin.js";
import { MotionPathPlugin } from "gsap/MotionPathPlugin.js";
</pre>
<p>毫无疑问，前端变得越来越复杂。当您向应用程序添加新的 JavaScript 库和其他依赖项时，您将需要更多的可见性，以确保您的用户不会遇到未知的问题。</p>
<pre>gsap.registerPlugin(PixiPlugin, MotionPathPlugin);
</pre>
<p>LogRocket 是一个前端应用程序监控解决方案，可以让您回放 JavaScript 错误，就像它们发生在您自己的浏览器中一样，这样您就可以更有效地对错误做出反应。</p>
<h3><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>可以与任何应用程序完美配合，不管是什么框架，并且有插件可以记录来自 Redux、Vuex 和@ngrx/store 的额外上下文。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。LogRocket 还可以监控应用的性能，报告客户端 CPU 负载、客户端内存使用等指标。</h3>
<p>自信地构建— <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p>
<pre>import React from 'react'
class App extends React.Component{
    constructor(props){
        super(props)
    }
    render(){
        return(&lt;h1&gt;hello world&lt;/h1&gt;)
    }
}
/pre&gt;
We will be using <code>ref</code> to target the specific element to be animated. Our tween will be created once our React application is mounted using the <code>componentDidMount()</code> method. The element to be animated as well as the resulting tween instance will be stored in a state.</pre>
<pre>import React from 'react'
import { gsap } from 'gsap'
class App extends React.Component{
    constructor(props){
        super(props)
        this.myElement = null;
        this.myTween = null;
    }
    componentDidMount(){
        this.myTween = gsap.to(this.myElement, 1, {x: 100, y: 100});
    }
    render(){
        return &lt;div ref={div =&gt; this.myElement = div} /&gt;
 }
}
</pre>
<h2 id="conclusion">Conclusion</h2>
<p>GSAP remains one of the most flexible libraries for web animation, and with GSAP 3, animation has become even easier.</p>
<p>In this tutorial, you’ve hopefully learned that you do not have to limit your animation to just basic elements. GSAP offers many methods make writing animation code in JavaScript that much easier.</p><div class="code-block code-block-28">
<div class="blog-plug inline-plug js-libraries-plug"><h2>Are you adding new JS libraries to improve performance or build new features? What if they’re doing the opposite?</h2><p>There’s no doubt that frontends are getting more complex. As you add new JavaScript libraries and other dependencies to your app, you’ll need more visibility to ensure your users don’t run into unknown issues.</p>
<p><a href="https://lp.logrocket.com/blg/javascript-signup">LogRocket</a> is a frontend application monitoring solution that lets you replay JavaScript errors as if they happened in your own browser so you can react to bugs more effectively. </p><a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/></noscript></a>
<a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">LogRocket</a> works perfectly with any app, regardless of framework, and has plugins to log additional context from Redux, Vuex, and @ngrx/store. Instead of guessing why problems happen, you can aggregate and report on what state your application was in when an issue occurred. LogRocket also monitors your app’s performance, reporting metrics like client CPU load, client memory usage, and more.
</p><p>Build confidently — <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a>.</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>