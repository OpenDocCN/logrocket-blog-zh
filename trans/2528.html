<html>
<head>
<title>Substrate blockchain development: Core concepts - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>衬底区块链发展:核心概念</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/substrate-blockchain-framework-core-concepts/#0001-01-01">https://blog.logrocket.com/substrate-blockchain-framework-core-concepts/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在上一篇文章中，我们了解了如何在 Rust 中<a href="https://blog.logrocket.com/how-to-build-a-blockchain-in-rust/" target="_blank" rel="noopener">实现一个基本的区块链应用程序。这个区块链应用程序的特色是功能的绝对最小子集，远不能用于生产。然而，探索如何实现核心区块链概念以及它们在 Rust 中的样子是一个很好的练习。</a></p>
<p>下一步是探索如何建立一个实际的，真实世界的区块链。我们不会从头开始构建它——那将远远超出一篇文章的范围。相反，我们将利用<a href="https://substrate.io/" target="_blank" rel="noopener">衬底区块链框架</a>来完成这项任务。</p>
<p>但是在您开始使用 Substrate 构建和定制您自己的区块链之前，理解使该框架起作用的核心概念是很重要的。本教程的目的是帮助您了解什么是基质，什么不是基质，它是如何构成的，以及它在塑造快速扩张的区块链发展景观中的作用。</p>
<p>我们将详细介绍以下内容:</p>

<p>对于这个框架的巨大范围，我们只能希望触及其表面，但目标是为您提供采取下一步所需的所有背景和资源。我希望这个指南能帮助你应对当你第一次开始探索区块链发展世界时，你将会接触到的大量新思想。</p>
<p>我们开始吧！</p>
<h2 id="what-is-a-blockchain-framework">什么是区块链框架？</h2>
<p>简单来说，什么是区块链框架？本质上，<a href="https://blog.logrocket.com/top-blockchain-development-frameworks/" target="_blank" rel="noopener">区块链框架</a>是一个(巨大的)工具和库的集合，用于构建一个完整的、可运行的、安全的、功能完整的(尽管是基本的)区块链。</p>
<p>区块链框架承担了大部分繁重的工作，涉及到:</p>
<ul>
<li><a href="https://blog.logrocket.com/guide-blockchain-consensus-protocols/" target="_blank" rel="noopener">共识</a></li>
<li><a href="https://blog.logrocket.com/libp2p-tutorial-build-a-peer-to-peer-app-in-rust/" target="_blank" rel="noopener"> P2P 联网</a></li>
<li>账户管理</li>
<li>基本区块链逻辑(块、事务等。)</li>
<li>与区块链交互的客户端</li>
</ul>
<h2 id="what-is-substrate">什么是基质？</h2>
<p>Substrate 可以被描述为一个区块链框架——具体来说，是一个用于构建定制区块链的框架。这些区块链可以完全自主运行，这意味着它们不依赖任何外部技术来运行。</p>
<p>然而，Substrate 背后的公司<a href="https://www.parity.io/" target="_blank" rel="noopener"> Parity </a>(由<a href="https://ethereum.org/en/" target="_blank" rel="noopener">以太坊</a>联合创始人加文·伍德共同创建)也建立了<a href="https://polkadot.network/" target="_blank" rel="noopener">波尔卡多特</a>网络。Polkadot 本质上是一个分散的、基于协议的区块链平台，用于实现安全的跨区块链通信。</p>
<p>这意味着 Polkadot 可以用作区块链之间的一种桥梁，负责链之间的通信层，并使不同区块链之间的交互成为可能(甚至是以太坊和比特币等系统)。这代表着在实现 web 3——一个基于区块链的去中心化版本的互联网——的愿景方面取得了重大进展。</p>
<p>由于它们是由同一批人开发的，Substrate 对与 Polkadot 的集成提供了一流的支持，因此您用 Substrate 创建的任何区块链都可以无缝地连接到 Polkadot。</p>
<p>Substrate 还提供<a href="https://docs.substrate.io/v3/runtime/upgrades/" target="_blank" rel="noopener">无分叉运行时升级</a> —升级区块链的状态转换功能而不触发硬分叉的能力。</p>
<p>当然，由于提供了大量的代码，Substrate 附带了大量的<a href="https://docs.substrate.io/v3/getting-started/overview/" target="_blank" rel="noopener">文档</a>和<a href="https://docs.substrate.io/tutorials/v3/" target="_blank" rel="noopener">教程</a>来帮助你入门。</p>
<h2 id="is-substrate-customizable">基底可定制吗？</h2>
<p>如果你以前使用过大规模的 web 框架，区块链框架则完全不同。活动部分的范围、数量、相关概念和扩展点只是在不同的尺度上。</p>
<p>一个更好的比较可能是一个完全成熟的游戏引擎(想想 Unity ),它为你肯定会需要的所有东西提供了一个基本的实现，并且为你提供了很多你可能需要的扩展点。</p>
<p>当然，这意味着在架构方面已经做出了一些决定，你将无法轻易改变。根据您的用例，您可能需要更多的可定制性，框架可能会以某种方式限制这一点。这是标准的权衡:区块链框架节省了您的时间，但牺牲了一些您必须忍受的东西。</p>
<p>然而，正如我们将在下面更详细地探讨的那样，Substrate 在这方面提供了一些灵活性，使您能够在几个阶段在更大的技术自由度和开发简易性之间进行选择。</p>
<p>基板的后端是建立在生锈。它(以及奇偶校验的大部分功能)也是完全开源的。因此，你不仅可以使用 Substrate，还可以通过贡献和分叉它的一部分来定制你自己的需求，从而改进它。</p>
<h2 id="how-does-substrate-work">底物是如何工作的？</h2>
<p>现在我们知道了什么是 Substrate，让我们对框架、它的活动部分以及我们可以用来创建定制区块链的扩展点有一个高层次的概述。</p>
<p>因为我们在这里处理的是一个分散的对等系统，所以我们讨论的基本单元是一个节点。这是我们的区块链运行的地方。</p>
<p>该节点在客户端内部运行，并提供系统运行所需的所有基本组件，如 p2p 网络、区块链存储、块处理和一致性逻辑，以及从外部与区块链交互的能力。</p>
<p>当我们开始一个新的基板项目时，我们有三个选项可供选择:</p>
<ul>
<li>衬底节点</li>
<li>基底框架</li>
<li>衬底核心</li>
</ul>
<p>让我们更详细地探讨每个选项。</p>
<h3 id="substrate-node">衬底节点</h3>
<p>我们将从基底节点开始。这是我们可以开始的最高水平；它提供了最多的预构建功能和最少的技术自由度。它是完全可运行的，包括所有基本组件的默认实现，如帐户管理、特权访问、共识。诸如此类。我们可以定制链的起源块(即初始状态)来开始。</p>
<p>在这里，我们可以运行节点，熟悉 Substrate 提供的开箱即用的功能，并通过与运行的区块链交互来熟悉状态。另一种完成同样任务的方法是使用<a href="https://docs.substrate.io/playground/" target="_blank" rel="noopener"> Substrate Playground </a>，在这里你可以检查后端和前端模板来熟悉它们。</p>
<p>然而，一旦我们准备好真正构建我们自己的区块链，我们最好再低一层，使用 FRAME。</p>
<h3 id="substrate-frame">基底框架</h3>
<p>FRAME(模块化实体的运行时聚合框架)是一个从现有库构建底层运行时的框架，具有高度的自由度来确定我们的区块链逻辑。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>我们本质上是从 Substrate 的预建<a href="https://github.com/substrate-developer-hub/substrate-node-template" target="_blank" rel="noopener">节点模板</a>开始，并可以添加所谓的托盘——Substrate 对库模块的名称——来定制和扩展我们的链。在这个抽象层次上，我们还能够完全定制区块链的逻辑、状态和数据类型。这当然是大多数旨在接近底层的基本定制项目在易于开发和技术自由之间平衡两个世界的最佳之处。</p>
<p>从这一点出发，我们必须投入最少的时间来设置我们的区块链，并可以完全专注于我们自己的定制。我们仍然必须接受一些默认设置，或者更确切地说，当它们可以配置时，但是如果我们从根本上想要以不同的方式做事，我们可以从核心开始再低一步。</p>
<h3 id="substrate-core">衬底核心</h3>
<p>Substrate Core 本质上意味着我们可以以任何我们想要的方式实现我们的运行时，只要它以 WebAssembly 为目标，并且遵守 Substrate 块创建的基本法则。然后，我们可以使用这个运行时并在衬底节点中运行它。</p>
<p>这种方法当然需要最多的工作和最高级别的难度，但它也带来了最高程度的技术自由，同时仍然能够在基底生态系统中无缝地工作。</p>
<p>说到 Substrate 的生态系统，有一个活跃的开发者社区在他们自己的项目中使用 Substrate，他们中的许多人通过共享他们自己的托盘为生态系统做出了贡献。</p>
<p>您可以通过使用<a href="https://substratemarketplace.com/" target="_blank" rel="noopener">基板市场</a>等网站或任何有<a href="https://crates.io/" target="_blank" rel="noopener">铁锈箱的地方</a>找到托盘，因为基板托盘本质上是独立的铁锈库，您可以将其集成到您的基板项目中，并根据需要进行配置。与任何其他库一样，建议首先审计代码，并意识到依赖外部代码与编写自己的代码之间的权衡。</p>
<p>在玩了一会儿预构建的节点后，我们应该把重点放在 FRAME 上，学习如何通过在基底模板节点上构建来构建一个自定义的区块链。这也是我们将在本文后面看到的许多精彩教程的起点。</p>
<p>接下来，我们将回顾一下构成区块链的一些核心概念，为我们粗略的描述添加一些色彩。</p>
<h2 id="core-concepts-of-substrate-blockchain-development">衬底区块链开发的核心概念</h2>
<p>为了更深入地理解 Substrate，我们将探索该框架的一些核心概念。</p>
<p>旅程从运行时开始，它是定制区块链的核心部分。然后，我们将查看共识和存储—我们的区块链位于何处，以及所有节点如何就哪个是正确的达成一致。</p>
<p>我们将通过触及外部因素、交易和执行来结束我们的考察，包括如何与区块链互动，这种互动看起来像什么，以及它如何成为我们区块链国家的一部分。</p>
<h3 id="runtime">运行时间</h3>
<p>基于底层的应用程序的运行时是项目的核心和灵魂。它描述了链上可能出现的状态以及逻辑，这指导区块链如何从一个状态进入下一个状态。</p>
<p>在 Substrate 中，运行时也称为状态转移函数。你可以把整个区块链想象成一个国家机器。运行时定义了从一种状态进入下一种状态的规则。这意味着运行时是绝对重要的，事实上，在实现您的自定义区块链时，您将花费大部分时间。</p>
<p>Substrate 本身坚持在定制运行时尽可能开放的原则。有一些接口是任何运行时都必须兼容的，但是除此之外，你有充分的技术和创造性的自由来实现你认为应该实现的东西。</p>
<p>此外，如上所述，您可以使用 FRAME 来组合现有的模块(托盘)。这包括与 Substrate 一起运送的 50 多个托盘，以及由第三方开发人员提供的用于构建您的运行时的托盘。</p>
<p>属于运行时类别的功能的一些示例包括构建新块、集成来自链外的数据以及处理帐户到实际使用的加密原语背后的逻辑。</p>
<p>从长远来看，了解运行时开发及其方方面面对于成功使用 Substrate 至关重要。</p>
<h3 id="consensus-and-accounts">共识和账户</h3>
<p>因为区块链系统是对等的，并且(通常)由多个节点组成，节点之间没有任何层次结构，所以存在就正确状态达成一致的固有问题。</p>
<p>如果网络中的多个参与者试图对状态进行更改，则这些事务的有效性和顺序可能会有所不同，这取决于您在网络中的位置(即，您收到更改通知的时间)。这可能会导致网络不同部分之间的冲突，需要快速安全地解决这些冲突，以便网络能够继续运行。</p>
<p>区块链系统正是为此目的使用共识引擎。这些引擎实现了定义状态转换需要如何发生(保证它是确定性的)以及如何解决冲突的规则。这涉及到块创建、终结性(即知道事务何时完成)以及竞争状态之间的分叉选择/冲突解决。</p>
<p>Substrate 已经提供了一些<a href="https://docs.substrate.io/v3/advanced/consensus/#consensus-in-substrate" target="_blank" rel="noopener">共识选项</a>,但是也可以根据您的具体需求推出您自己的选项，或者混合、匹配和扩展现有的解决方案。</p>
<p>至于账户——网络参与者的概念——Substrate 也涵盖了我们。和区块链系统一样，一个账户由一个或一组公钥/私钥对组成。</p>
<p>除了非常基本的帐户处理之外，Substrate 还为具有不同用例的帐户提供了可能性。</p>
<p>有隐藏键和控制键的概念。Substrate 中的隐藏密钥或密钥对定义了一个隐藏帐户，您可以在其中保存大量资金。在这里，密钥的安全性非常非常重要，应该离线保存。你几乎不应该使用隐藏账户直接与连锁店互动。</p>
<p>当您的用例需要与链频繁交互时，使用控制器帐户。它们可以由存储键指定为代理。这些账户用于直接互动，只需要足够的资金支付交易费用。钥匙仍然需要保护，但由于他们控制的资金较少，赌注并没有那么高。</p>
<p>在<a href="https://docs.substrate.io/v3/concepts/account-abstractions/" target="_blank" rel="noopener">官方文档</a>中阅读关于 Substrate 中现有帐户和会话实现的更多信息。当然，也可以扩展或替换这些部件。</p>
<h3 id="extrinsics-and-transactions">外部和交易</h3>
<p>在区块链中，有外在和内在——链外发生的事情和链内发生的事情。</p>
<p>外在因素对于从外部与区块链的状态进行交互是必要的——例如，向状态中加入一些新的信息或者做出改变。事实上，区块链中的一个块包含一个头和一个 extrinsics 数组——来自链外的信息。</p>
<p>例如，假设我们有一个自定义的基底区块链，我们从哲学文本中收集引用。如果我想添加一个我刚刚读过的新的很酷的报价，我会使用我的自定义实现的<code>add_quote</code>外部——把它想象成一个函数，我用一个字符串调用它——并通过创建一个签名的事务来执行它，根据函数的定义的<a href="https://docs.substrate.io/v3/concepts/weight/" target="_blank" rel="noopener">权重</a>发送必要的事务费。</p>
<p>这表明我确实希望将这条信息添加到区块链中——所有节点之间的共享状态。如果我的交易有效，并且我有足够的资金支付交易费用，它将被添加到一个块中(基于一些定义的排序和一些其他规则)。如果该块有效并被接受，它将被添加到区块链中并执行，从而将我的新报价添加到分布式分类帐中。</p>
<p>幸运的是，Substrate 实现了成功执行这种舞蹈的机制，因此我们可以简单地依赖它进行自定义扩展，在需要的地方进行更改。</p>
<p>外部事务、事务和执行模型通常对 Substrate 和区块链的内部工作非常重要。你可以在<a href="https://docs.substrate.io/v3/concepts/account-abstractions/" target="_blank" rel="noopener">官方文件</a>中进一步挖掘。</p>
<p>这只是 Substrate 中核心概念的一小部分，但是它应该给你一个大概的概念，如果你想弄清楚某些功能是否已经存在，或者你必须自己完全推出它，你应该去哪里找。</p>
<p>在这一点上，对于大多数标准的区块链相关技术，有一个很好的机会基板有一个或多个实现或托盘，以满足您的需求。在某种程度上，您将不得不在这些抽象之上进行构建。</p>
<p>在这些情况下，不要盲目地使用现有的模块和算法，您可能想要更深入地了解您所依赖的东西。这仍然比你自己从头开始理解和实现一切要少得多——特别是如果你想正确地做的话。</p>
<h2 id="documentation-and-further-reading">文档和进一步阅读</h2>
<p>至此，我们已经讨论了什么是底层，它是如何构成的，以及系统背后的核心概念。从现在开始，你能从哪里开始真正地使用 Substrate，甚至开始实现你自己的真正的区块链项目呢？</p>
<p>幸运的是，Substrate 有很棒的教程，即使是绝对的初学者，也涵盖了从<a href="https://docs.substrate.io/v3/getting-started/installation/" target="_blank" rel="noopener">安装</a>，到你的<a href="https://docs.substrate.io/tutorials/v3/create-your-first-substrate-chain/" target="_blank" rel="noopener">第一次运行 Substrate 区块链</a>，再到一个<a href="https://docs.substrate.io/tutorials/v3/kitties/pt1/" target="_blank" rel="noopener">全，定制的区块链例子</a>的每一个步骤。</p>
<p>为了填补这个空白，你可能在浏览完这些教程后仍然会有，也有一些针对特定主题的有用的<a href="https://docs.substrate.io/how-to-guides/v3/" target="_blank" rel="noopener">操作指南</a>。</p>
<p>另一个很好的学习方法是看看人们在 Substrate 上构建的许多开源项目。</p>
<p>祝你潜水和学习愉快！</p>
<h2 id="conclusion">结论</h2>
<p>在本教程中，我们看了一下衬底区块链框架，它来自哪里，它是如何构造的，以及如何深入其中。</p>
<p>Substrate 已经发展了一段时间，并且已经非常成熟。为建设区块链创建一个强大的框架所需的工作量是惊人的，更不用说让初学者能够学习并实现他们的目标了，到目前为止，奇偶校验团队已经做了出色的工作。</p>
<p>显然还有很多工作要做，像 Substrate 这样的项目永远不会完成或完美。但我非常期待看到许多与区块链相关的酷项目在不久的将来出现，其中许多可能基于 Substrate，或者至少受到 Substrate 的启发。</p><div class="code-block code-block-26">
<div class="blog-plug inline-plug blockchain-plug"><h2>加入像 Bitso 和 Coinsquare 这样的组织，他们使用 LogRocket 主动监控他们的 Web3 应用</h2><p>影响用户在您的应用中激活和交易的能力的客户端问题会极大地影响您的底线。如果您对监控 UX 问题、自动显示 JavaScript 错误、跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a target="_blank" href="https://lp.logrocket.com/blg/web3-signup">try LogRocket</a><p>.</p><a class="signup" href="https://lp.logrocket.com/blg/web3-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/web3-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用的 DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><p>现代化您调试 web 和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/web3-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>