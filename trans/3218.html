<html>
<head>
<title>How to do interaction testing with React 18 and Storybook - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何用React 18和Storybook - LogRocket博客做交互测试</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/interaction-testing-react-storybook/#0001-01-01">https://blog.logrocket.com/interaction-testing-react-storybook/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在本文中，我们将重点测试使用React 18和Storybook时组件的交互。在我们开始之前，你可能想要阅读这篇来自Chak顺宇的介绍性文章，它探索了React 18的新API，以及宣布React 18 的博客文章<a href="https://reactjs.org/blog/2022/03/29/react-v18.html" target="_blank" rel="noopener">，它提供了对React 18的新的、选择加入的并发渲染能力的深入见解。</a></p>

<h2 id="what-is-interaction-testing">什么是交互测试？</h2>
<p>交互测试包括测试React组件内的交互。这些测试模拟应用程序中的用户操作，例如通过单击按钮或输入输入组件与组件进行交互，以及此类交互后应用程序的行为。</p>
<p>在现代应用程序中，组件承担了比以前更多的责任，因为开发人员已经开始在组件中包含数据获取操作和状态管理工具等内容。通过交互测试，我们可以更有效地验证应用程序用户界面的功能。</p>
<h2 id="how-does-storybook-help-interaction-testing">故事书如何帮助交互测试？</h2>
<p>Storybook是一个开源工具，可以让你独立地构建UI组件和页面。它允许您为组件构建文档，这使得组件易于重用，并允许对它们进行可视化测试，这有助于防止错误。</p>
<p>要开始使用Storybook，我们需要在现有项目的根目录下运行Storybook CLI。在本例中，我们的项目是一个React应用程序，使用<a href="https://blog.logrocket.com/tag/create-react-app" target="_blank" rel="noopener"> Create React App </a>创建。</p>
<p>运行下面的命令，引导React应用程序并添加一个故事。</p>
<p>创建React应用程序:</p>
<pre class="language-bash hljs">npx create-react-app reactstorybook -template typescript
yarn start</pre>
<p>打开另一个终端窗口，初始化我们项目根目录下的Storybook。</p>
<pre class="language-bash hljs">npx storybook init
yarn storybook</pre>
<p>初始化完成后，Storybook应该在本地启动并输出一个地址。根据计算机的配置，故事书环境可能会在浏览器中自动打开。</p>
<p id="gdcalert1"><img data-attachment-id="126625" data-permalink="https://blog.logrocket.com/interaction-testing-react-storybook/attachment/welcome-storybook/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook.png" data-orig-size="730,156" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Welcome to storybook" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook-300x64.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook.png" decoding="async" class="aligncenter size-full wp-image-126625 jetpack-lazy-image" src="../Images/7f3063dc2f9e3c4e417efb16f519c13b.png" alt="Welcome to Storybook introduction" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook-300x64.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126625" data-permalink="https://blog.logrocket.com/interaction-testing-react-storybook/attachment/welcome-storybook/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook.png" data-orig-size="730,156" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Welcome to storybook" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook-300x64.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126625" src="../Images/7f3063dc2f9e3c4e417efb16f519c13b.png" alt="Welcome to Storybook introduction" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook-300x64.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/welcome-storybook.png"/></noscript>
<p>故事是接受一组参数的组件，这些参数描述了如何呈现组件。它本质上捕获了UI组件的呈现状态。</p>
<p>在我们的Create React应用程序中初始化Storybook后，Storybook创建示例组件，演示可以用Storybook构建的组件类型，即按钮、标题和页面。</p>
<p>示例组件概述了Storybook如何管理不同故事的状态。Storybook UI上显示的按钮组件的故事可以在我们的代码编辑器中找到。</p>
<p>在React应用程序的根目录中，打开终端窗口并输入以下命令来查看按钮组件的代码及其故事。</p>
<pre class="language-bash hljs">code src/stories/Button.stories.tsx 
code src/stories/Button.tsx</pre>
<p>Storybook中的故事的一个关键重要性是使开发人员能够跟踪UI在发生变化时的外观。这有助于防止<a href="https://blog.logrocket.com/automated-visual-regression-testing-with-jest/" target="_blank" rel="noopener">意外回归</a>，Timothy Vernon在他的帖子中对此进行了更多的讨论，该帖子为开发人员提供了使用Jest处理视觉回归的测试策略。</p>
<h2 id="methods-testing-components-storybook">故事书中组件的测试方法</h2>
<p>Storybook提供了一个独立测试组件的环境。测试已经写好的故事是很重要的，因为它有助于随着时间的推移防止UI错误。</p>
<p>Storybook附带了各种工具，可以测试UI、模拟数据或依赖关系，甚至模拟网络请求。<a href="https://storybook.js.org/docs/react/writing-tests/test-runner" target="_blank" rel="noopener">测试转轮</a>就是这样的工具之一。它使开发人员能够自动测试整本故事书并捕捉破碎的故事。</p>
<p>当使用Storybook进行测试时，开发人员可以使用各种测试方法。</p>
<h3>视觉回归测试</h3>
<p>视觉回归测试有助于捕捉UI外观中的错误。它的工作原理是截取每个故事的截图，然后进行比较，找出变化。Storybook非常适合运行可视化测试，因为每个故事都是一个测试规范。</p>
<p>视觉回归测试不应该与快照测试混淆，因为快照是通过将每个故事的渲染标记与已知基线进行比较来工作的。快照测试不如视觉回归测试准确，因为它们比较的是HTML的blobs，而不是显示给用户的内容。这可能导致误报，因为代码变化不会产生视觉变化。</p>
<h3>可访问性测试</h3>
<p>质量保证专家依靠易访问性测试来捕捉应用程序开发过程中出现的易访问性变化。可访问性测试依赖于<a href="https://www.w3.org/WAI/standards-guidelines/wcag/" target="_blank" rel="noopener"> Web内容可访问性指南</a> (WCAG)规则来审核呈现的DOM。如果呈现的DOM中的元素不符合WCAG规则，就会抛出可访问性违规。</p>
<p>Storybook为使用<a href="https://storybook.js.org/addons/@storybook/addon-a11y"> a11y附加组件</a>测试应用程序的可访问性<a href="https://blog.logrocket.com/testing-accessibility-storybook/" target="_blank" rel="noopener">提供了一个非常方便的工具。</a></p>
<h2 id="how-perform-interaction-testing-react">如何在React 18中用故事书进行交互测试</h2>
<p>现在，是时候看看Storybook和React 18的交互测试是如何工作的了。</p>
<p>如前所述，交互测试测试与React组件的交互。在交互测试中，目标是假装成用户，这涉及到诸如打字和点击按钮之类的动作，并确保收到预期的输出。</p>
<p>React组件的主要目标是在给定一组道具的情况下呈现UI，但也有一些复杂的组件跟踪应用程序状态。</p>
<p>Storybook版本中包含的<code>play</code>函数会在故事加载后立即执行。<code>play</code>函数是测试我们组件的关键；通过<code>play</code>功能，你可以模拟用户的行为。然后可以使用<a href="https://storybook.js.org/docs/react/writing-tests/test-runner" target="_blank" rel="noopener">测试运行器</a>来确认组件是否正确渲染，并检查与<code>play</code>函数的交互测试是否通过。</p>
<p>要做到这一点，您需要安装两个关键包:</p>

<p>在我们项目的根目录下打开终端，安装列出的包。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<pre class="language-bash hljs">yarn add -dev @storybook/testing-library @storybook/jest @storybook/test-runner <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7c16190f083c4e4b">[email protected]</a></pre>
<p>如果你使用的是旧版本的故事书，检查你的<code>package.json</code>以确认<code>@storybook/addon-interactions</code>包在<code>devDependencies</code>中可用。如果不是，安装带有<code>--dev </code>标志的包，因为它是在Storybook中设置交互测试不可或缺的。</p>
<h3 id="how-update-storybook-configuration">如何使用interactions附加组件更新您的故事书配置</h3>
<pre class="language-javascript hljs">module.exports = {
  stories: ["../src/**/*.stories.mdx", "../src/**/*<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="bc92cfc8d3ced5d9cf92fc">[email protected]</a>(js|jsx|ts|tsx)"],
  addons: [
    "@storybook/addon-links",
    "@storybook/addon-essentials",
    "@storybook/addon-interactions", // Addon has to be registered
    "@storybook/preset-create-react-app",
  ],
  features: {
    interactionsDebugger: true, // enable playback controls
  },
  framework: "@storybook/react",
  core: {
    builder: "@storybook/builder-webpack5",
  },
};
</pre>
<h2 id="creating-interaction-test-play-function">用Storybook和<code>play</code>函数创建一个交互测试</h2>
<p><code>play</code>函数保存测试的逻辑，并连接到我们想要测试的故事。让我们看看如何用Storybook和<code>play</code>函数设置一个交互测试。</p>
<p>我们依靠<code>@storybook/testing-library</code>和<code>@storybook/jest</code>包来帮助解决这个问题。</p>
<h3 id="create-storybook-component">创建故事书组件</h3>
<p>为了体验幕后发生的事情，我们将创建一个具有两种状态的表单组件:</p>
<ol>
<li>表单没有输入的一种状态</li>
<li>一种状态由<code>play</code>函数处理，使用交互来填充输入</li>
</ol>
<p>在<code>stories</code>目录下，创建文件<code>Form.tsx</code>和<code>Form.stories.tsx</code>。</p>
<pre class="language-bash hljs">touch src/stories/Form.tsx
touch src/stories/form.css
touch src/stories/Form.stories.tsx</pre>
<p>是我们的第一个组成部分。在该文件中，粘贴以下代码:</p>
<pre class="language-javascript hljs">import React from "react";
import { Button } from "./Button";
import "./form.css";

interface FormProps {
  placeholder?: string;
  label?: string;
  name?: string;
}

export const Form = ({
  placeholder = "Enter your email",
  ...props
}: FormProps) =&gt; {
  const [details, setDetails] = React.useState(false);

  const onClick = () =&gt; {
    setDetails(true);
  };

  return (
    &lt;div className="form-wrapper"&gt;
      &lt;input
        autoComplete="off"
        placeholder="Enter your email address"
        className={"storybook-input"}
        name="email"
        aria-label="email"
        id="email"
        data-testid="email"
        {...props}
      /&gt;
      &lt;input
        autoComplete="off"
        placeholder="Enter your password"
        className={"storybook-input"}
        name="password"
        id="password"
        data-testid="password"
        {...props}
      /&gt;
      &lt;Button label="Submit" onClick={() =&gt; onClick()} /&gt;
      {details === true ? (
        &lt;p&gt;
          Get ready to experience great development experience with storybook
        &lt;/p&gt;
      ) : (
        ""
      )}
    &lt;/div&gt;
  );
};
</pre>
<p>创建我们的CSS文件。</p>
<pre class="language-bash hljs">code src/stories/form.css</pre>
<pre class="language-css hljs">.form-wrapper {
  padding: 5rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  width: 30%;
}
</pre>
<h3 id="creating-component-initial-state">创建组件的初始状态</h3>
<p>现在，父表单已经设置好了，是时候创建组件的初始状态了。让我们从设置一个故事来设置表单的初始状态开始。</p>
<pre class="language-bash hljs">code src/stories/Form.stories.tsx</pre>
<pre class="language-javascript hljs">import React from "react";
import { ComponentStory, ComponentMeta } from "@storybook/react";
import { within, userEvent } from "@storybook/testing-library";
import { expect } from "@storybook/jest";
import { Form } from "./Form";

export default {
  title: "Example/Form",
  component: Form,
} as ComponentMeta&lt;typeof Form&gt;;

const Template: ComponentStory&lt;typeof Form&gt; = (args) =&gt; &lt;Form {...args} /&gt;;

export const EmptyForm = Template.bind({});

export const InputedForm = Template.bind({});
</pre>
<p>在上面的代码块中，我们故事的基础部分已经构建好了。</p>
<p id="gdcalert2"><img data-attachment-id="126627" data-permalink="https://blog.logrocket.com/interaction-testing-react-storybook/attachment/storybook-empty-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form.png" data-orig-size="730,509" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Empty form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form-300x209.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form.png" decoding="async" class="aligncenter wp-image-126627 size-full jetpack-lazy-image" src="../Images/00232f47f1341904cc0cef26e3adc6a8.png" alt="Storybook empty form with no interactions" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form-300x209.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126627" data-permalink="https://blog.logrocket.com/interaction-testing-react-storybook/attachment/storybook-empty-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form.png" data-orig-size="730,509" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Empty form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form-300x209.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form.png" decoding="async" loading="lazy" class="aligncenter wp-image-126627 size-full" src="../Images/00232f47f1341904cc0cef26e3adc6a8.png" alt="Storybook empty form with no interactions" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form-300x209.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/storybook-empty-form.png"/></noscript>
<h3 id="adding-play-function">添加<code>play</code>功能</h3>
<p>是时候设置在故事渲染完成后运行的<code>play</code>函数了。使用<code>play</code>功能，可以测试用户工作流。</p>
<pre class="language-javascript hljs">// the play function comes into use
InputedForm.play = async ({ canvasElement }) =&gt; {
  // start querying the component from its root element
  const canvas = within(canvasElement);

  // the key part, where the interactions are defined
  // Simulate interactions with the component
  await userEvent.type(canvas.getByTestId("email"), "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0d6978684d68606c6461236e6260">[email protected]</a>");

  await userEvent.type(canvas.getByTestId("password"), "a-due-password");

  await userEvent.click(canvas.getByRole("button"));

  // assert DOM structure
  await expect(
    canvas.getByText(
      "Get ready to experience great development experience with storybook"
    )
  ).toBeInTheDocument();
};
</pre>
<p>使用上面的代码块，我们已经建立了交互测试。模拟用户与组件的交互，即填写表单和提交表单。</p>
<p>我们将依靠<code>test-runner </code>来确认组件是否正确渲染。更新您的<code>package.json</code>脚本来启用测试运行程序。</p>
<pre class="language-json hljs">  "scripts": {
    "test-storybook": "test-storybook",
  },
</pre>
<p>使用以下命令运行测试运行程序。</p>
<pre class="language-bash hljs">yarn test-storybook</pre>
<p id="gdcalert3"><img data-attachment-id="126629" data-permalink="https://blog.logrocket.com/interaction-testing-react-storybook/attachment/yarn-run-test/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182.png" data-orig-size="730,243" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Yarn test" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182-300x100.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182.png" decoding="async" class="aligncenter size-full wp-image-126629 jetpack-lazy-image" src="../Images/769391c5afdf7258eb19a652ceaad3dc.png" alt="Passes all yarn tests" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182-300x100.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126629" data-permalink="https://blog.logrocket.com/interaction-testing-react-storybook/attachment/yarn-run-test/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182.png" data-orig-size="730,243" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Yarn test" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182-300x100.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126629" src="../Images/769391c5afdf7258eb19a652ceaad3dc.png" alt="Passes all yarn tests" srcset="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182-300x100.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/yarn-run-test-e1659466464182.png"/></noscript>
<p>确认通过测试后，我们可以导航到包含故事书UI组件的浏览器窗口，观察交互测试的运行情况。</p>
<p id="gdcalert4"><img data-attachment-id="126636" data-permalink="https://blog.logrocket.com/interaction-testing-react-storybook/attachment/interaction-test-storybook/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/interaction-test-storybook.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Browser interaction test" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/interaction-test-storybook-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/interaction-test-storybook.gif" decoding="async" class="aligncenter size-full wp-image-126636 jetpack-lazy-image" src="../Images/f4ae8f34e7b5f42988aeb1181ef1c35d.png" alt="Interaction test in browser" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/08/interaction-test-storybook.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/interaction-test-storybook.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="126636" data-permalink="https://blog.logrocket.com/interaction-testing-react-storybook/attachment/interaction-test-storybook/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/08/interaction-test-storybook.gif" data-orig-size="730,411" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Browser interaction test" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/08/interaction-test-storybook-300x169.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/08/interaction-test-storybook.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-126636" src="../Images/f4ae8f34e7b5f42988aeb1181ef1c35d.png" alt="Interaction test in browser" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/08/interaction-test-storybook.gif"/></noscript>
<p>故事书中的交互测试类似于测试图书馆的用户事件API。如果您使用用户事件API，您将获得使用<code><a href="https://testing-library.com/docs/dom-testing-library/api-events#fireevent" target="_blank" rel="noopener">fireEvent</a></code>方法执行浏览器交互的高级模拟的能力。</p>
<h2>结论</h2>
<p>构建复杂的ui可能是一项困难的活动，尤其是在多个团队成员之间进行开发的时候。但是用Storybook构建ui，非常重视构建小的原子组件，意味着可以更有效地测试组件。</p>
<p>视觉测试是Storybook擅长的一个领域，有了新的交互测试工具，我们可以很容易地看到Storybook生态系统已经变得多么强大。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</h2><p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
 </article>

</div>    
</body>
</html>