<html>
<head>
<title>Integrating Flask and Flutter apps - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>整合Flask和Flutter应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/integrating-flask-flutter-apps/#0001-01-01">https://blog.logrocket.com/integrating-flask-flutter-apps/#0001-01-01</a></blockquote><div><article class="article-post">
<p>在构建全栈应用时，通常会将前端和后端分开。在大多数情况下，这些实现中的每一个都是使用不同的前端和后端服务框架编写的，并且托管在单独的远程服务器上。</p>
<p>为了让这些服务执行整体业务功能，它们之间必须有一些通信，比如以REST、SOAP、GraphQL等常用机制的形式。</p>
<p>Flutter是Google创建的一个开源的跨平台工具。它用于开发交互式、反应式和自适应的前端应用程序(桌面、web和移动)，这些应用程序可以使用一个代码库在多个操作系统上运行。Flask是一个开源的、初学者友好的Python框架，适合用轻量级代码库构建整体的微服务后端应用程序。</p>
<p>使用一个基本的待办事项应用程序，本教程将演示如何将你的前端Flutter应用程序与Flask后端服务集成。应用程序将从前端向RESTful后端发送HTTP请求，以在本地或远程服务器上执行定制操作。</p>
<p><em>向前跳转:</em></p>

<h2 id="prerequisites">先决条件</h2>
<ul>
<li><a href="https://www.python.org/downloads/" target="_blank" rel="noopener">Python</a>≥3版安装在你的机器上</li>
<li><a href="https://flask.palletsprojects.com/en/2.2.x/" target="_blank" rel="noopener">烧瓶</a>和Python的工作知识</li>
<li>CLIs的中级知识</li>
<li>安装在您机器上的<a href="https://docs.flutter.dev/" target="_blank" rel="noopener">颤振</a>和<a href="https://docs.flutter.dev/get-started/install" target="_blank" rel="noopener">颤振SDK </a>的基础知识</li>
<li>构建和使用REST APIs的工作知识</li>
<li>任何合适的IDE或文本编辑器。我将使用<a href="https://code.visualstudio.com/" target="_blank" rel="noopener"> VS代码</a>来构建Flask服务，并为Flutter应用程序使用<a href="https://developer.android.com/studio" target="_blank" rel="noopener"> Android Studio </a></li>
<li>用于测试烧瓶API的Postman API平台</li>
</ul>
<h2 id="project-overview">项目概述</h2>
<p><img data-attachment-id="134954" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/flutter-flask-interaction/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction.png" data-orig-size="730,396" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="chart-flutter-flask-interaction" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction.png" decoding="async" class="wp-image-134954 size-full aligncenter jetpack-lazy-image" src="../Images/b0473a11788e09b27775e9c9c8fe14a0.png" alt="A chart of the interaction between flutter and flask." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction-300x163.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="134954" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/flutter-flask-interaction/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction.png" data-orig-size="730,396" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="chart-flutter-flask-interaction" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction.png" decoding="async" loading="lazy" class="wp-image-134954 size-full aligncenter" src="../Images/b0473a11788e09b27775e9c9c8fe14a0.png" alt="A chart of the interaction between flutter and flask." srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction-300x163.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/flutter-flask-interaction.png"/></noscript>
<p>Flutter应用程序将作为前端组件，用户将与它交互以创建、执行和删除待办任务。在应用程序启动时，Flutter应用程序将自动向Flask服务器发送HTTP <code>GET</code>请求，以获取存储在数据库中的所有创建的任务。对于创建、执行和删除操作，用户将通过单击相应的按钮显式触发对Flask服务器的请求。</p>
<p>虽然这些功能可以只使用Flutter应用程序而不需要后端服务来实现，但这里的目的是使用Flutter和Flask作为案例研究来演示您通常如何执行前端-后端集成。</p>
<p>Flask应用程序执行的操作将与待办任务所在的数据库进行交互。Flask-SQLAlchemy ，一个用于将<a href="https://www.sqlalchemy.org/" target="_blank" rel="noopener"> SQLAlchemy </a>与Flask轻松集成的库，将管理数据库操作。<a href="https://flask-marshmallow.readthedocs.io/en/latest/" target="_blank" rel="noopener"> Flask-Marshmallow </a>和<a href="https://marshmallow-sqlalchemy.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener"> Marshmallow-SQLAlchemy </a>包将负责序列化和反序列化Python对象。</p>
<p>该应用程序中涉及的流程可以应用于任何其他全栈集成，只要它遵守构建和使用API的REST架构。也就是说，您可以使用任何其他web框架构建您的后端服务，并向Flutter应用程序公开端点，反之亦然。</p>
<h2 id="building-flash-backend-service">构建Flask后端服务</h2>
<p>让我们从构建后端服务开始。在您的终端中运行以下命令来设置Flask应用程序:</p>
<pre class="language-bash hljs">mkdir flask_todo
cd flask_todo</pre>
<p>第一步是使用以下命令为应用程序创建并激活虚拟环境:</p>
<pre class="language-bash hljs">pip install pipenv
pipenv shell</pre>
<p>上面的命令通过创建一个<code>Pipfile</code>来激活您的虚拟环境，该文件包含您将在应用程序中安装的所有包和依赖项。</p>
<p>接下来，安装Flask框架以及构建和运行应用程序所必需的依赖项。</p>
<pre class="language-bash hljs">pipenv install flask flask-sqlalchemy flask-marshmallow marshmallow-sqlalchemy</pre>
<p>成功安装框架和依赖项后，您的<code>Pipfile</code>应该类似于下图:</p>
<p><img data-attachment-id="134967" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/framework-dependencies-pipfile-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1.png" data-orig-size="730,561" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="framework-dependencies-pipfile" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1-300x231.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1.png" decoding="async" class="wp-image-134967 size-full aligncenter jetpack-lazy-image" src="../Images/0277b9d5524d214eea6b35c613141143.png" alt="Framework and dependencies pipfile" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1-300x231.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="134967" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/framework-dependencies-pipfile-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1.png" data-orig-size="730,561" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="framework-dependencies-pipfile" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1-300x231.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1.png" decoding="async" loading="lazy" class="wp-image-134967 size-full aligncenter" src="../Images/0277b9d5524d214eea6b35c613141143.png" alt="Framework and dependencies pipfile" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1-300x231.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/framework-dependencies-pipfile-1.png"/></noscript>
<h3 id="initialize-flask-app-configure-database">初始化Flask应用程序并配置数据库</h3>
<p>创建一个名为<code>main.py</code>的Python文件，并按如下顺序将以下代码添加到代码中:</p>
<pre class="language-python hljs">from flask import Flask, request, jsonify
from flask_sqlalchemy import SQLAlchemy
from flask_marshmallow import Marshmallow
import os

app = Flask(__name__)
basedir = os.path.abspath(os.path.dirname(__file__))

app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///' + os.path.join(basedir, 'db.sqlite')


# suppress SQLALCHEMY_TRACK_MODIFICATIONS warning
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False

db = SQLAlchemy(app)
ma = Marshmallow(app)</pre>
<p>上面的代码片段设置并初始化Flask应用程序及其数据库配置。<code>basedir</code>变量代表根目录，您将在其中创建一个名为<code>db.sqlite</code>的文件。<code>db</code>和<code>ma</code>变量分别代表被初始化的<code>SQLAlchemy</code>和<code>Marshmallow</code>对象。</p>
<h3 id="todo-model-scheme"><code>Todo</code>模型和模式</h3>
<p>下面是<code>Todo</code>模型、模式创建和初始化的代码片段:</p>
<pre class="language-python hljs">class TodoItem(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100))
    is_executed = db.Column(db.Boolean)

    def __init__(self, name, is_executed):
        self.name = name
        self.is_executed = is_executed


# Todo schema
class TodoSchema(ma.Schema):
    class Meta:
        fields = ('id', 'name', 'is_executed')


# Initialize schema
todo_schema = TodoSchema()
todos_schema = TodoSchema(many=True)</pre>
<p>每个<code>TodoItem</code>实体都有一个ID、一个名称和一个由<code>is_executed</code>属性表示的执行状态。已经执行或完成的任务或待办事项的<code>is_executed</code>值为<code>True</code>，否则为<code>False</code>。</p>
<p>在任何时间点，您要么在单个<code>TodoItem</code>实体上执行操作，要么在多个实体上执行操作。<code>todo_schema</code>处理单个实体，而<code>todos_schema</code>处理使用<code>many=True</code>参数声明的多个实体。</p>
<h3 id="database-creation">数据库创建</h3>
<p>通过在终端中运行<code>python</code>命令打开Python shell。这将把CLI切换到Python shell，在这里您将编写下面的Python脚本来创建数据库，如下所示:</p>
<pre class="language-python hljs">from main import db
db.create_all()
exit()</pre>
<ul>
<li><code>from main import db</code>:导入用<code>main.py</code>文件中的<code>db</code>变量初始化的SQLAlchemy对象</li>
<li><code>db.create_all()</code>:创建SQLite数据库。运行此方法后，您会注意到在项目根文件夹中自动创建了一个包含编码内容的<code>db.sqlite</code>文件</li>
<li><code>exit()</code>:退出Python外壳</li>
</ul>
<p>以下是上述过程的直观表示:</p>
<p><img data-attachment-id="134959" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/database-creation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation.png" data-orig-size="730,104" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="database-creation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation-300x43.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation.png" decoding="async" class="wp-image-134959 size-full aligncenter jetpack-lazy-image" src="../Images/1364ca64cb824298e4d87cc88fa41364.png" alt="Visual representation of the database creation" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation-300x43.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="134959" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/database-creation/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation.png" data-orig-size="730,104" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="database-creation" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation-300x43.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation.png" decoding="async" loading="lazy" class="wp-image-134959 size-full aligncenter" src="../Images/1364ca64cb824298e4d87cc88fa41364.png" alt="Visual representation of the database creation" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation-300x43.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/database-creation.png"/></noscript>
<h3 id="add-to-do-api">添加待办事项API</h3>
<p>为Flutter应用程序创建一个端点，以触发向数据库添加新的待办任务。</p>
<pre class="language-python hljs">@app.route('/todo', methods=['POST'])
def add_todo():
    name = request.json['name']
    is_executed = request.json['is_executed']

    new_todo_item = TodoItem(name, is_executed)
    db.session.add(new_todo_item)
    db.session.commit()

    return todo_schema.jsonify(new_todo_item)</pre>
<p>上述端点接收到一个<code>POST</code>请求，并期待一个带有<code>name</code>和<code>is_executed</code>键以及它们各自的值的JSON有效负载。使用从位于<code>main.py</code>文件顶部的Flask导入的<code>request</code>包，将<code>name</code>和<code>is_executed</code>键的值分别提取到<code>name</code>和<code>is_executed</code>变量中。然后创建一个新的<code>TodoItem</code>对象并保存到数据库。端点返回新创建的实体的JSON对象。</p>
<p>要验证端点是否按预期工作，请将以下内容添加到文件末尾:</p>
<pre class="language-python hljs">if __name__ == '__main__':
    app.run(debug=True)</pre>
<p>然后使用以下命令从您的终端运行该应用程序:</p>
<pre class="language-bash hljs">python main.py</pre>
<p>默认情况下，应用程序将在端口5000上运行，如下所示:</p>
<p><img data-attachment-id="134964" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/application-run-port-5000-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1.png" data-orig-size="730,134" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="application-run-port-5000" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1-300x55.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1.png" decoding="async" class="wp-image-134964 size-full aligncenter jetpack-lazy-image" src="../Images/41acd84343b060d0ee9a6a5a8c9e4b29.png" alt="Application run on port 5000" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1-300x55.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="134964" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/application-run-port-5000-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1.png" data-orig-size="730,134" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="application-run-port-5000" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1-300x55.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1.png" decoding="async" loading="lazy" class="wp-image-134964 size-full aligncenter" src="../Images/41acd84343b060d0ee9a6a5a8c9e4b29.png" alt="Application run on port 5000" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1-300x55.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/application-run-port-5000-1.png"/></noscript>
<p>通过向<code>localhost:5000/todo</code>发送POST请求，继续从Postman测试端点。</p>
<h3 id="all-to-dos-api"><img data-attachment-id="134974" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/endpoint-test-postman-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1.png" data-orig-size="730,471" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="endpoint-test-postman" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1.png" decoding="async" class="wp-image-134974 size-full aligncenter jetpack-lazy-image" src="../Images/1158c07ebbc2ec5edb49d1ebacdb2c38.png" alt="Endpoint test in postman" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1-300x194.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="134974" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/endpoint-test-postman-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1.png" data-orig-size="730,471" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="endpoint-test-postman" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1-300x194.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1.png" decoding="async" loading="lazy" class="wp-image-134974 size-full aligncenter" src="../Images/1158c07ebbc2ec5edb49d1ebacdb2c38.png" alt="Endpoint test in postman" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1-300x194.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-test-postman-1.png"/>T3】</noscript></h3>
<h3 id="get-to-dos-api">获取所有待办事项API</h3>
<p>下面的端点通过<code>/todo</code>路径接收一个<code>GET</code>请求，并负责获取所有已经在数据库中创建的<code>TodoItem</code>实体。</p>
<pre class="language-python hljs">@app.route('/todo', methods=['GET'])
def get_todos():
    all_todos = TodoItem.query.all()
    result = todos_schema.dump(all_todos)

    return jsonify(result)</pre>
<p><img data-attachment-id="134976" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/get-request-todo-path/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path.png" data-orig-size="730,462" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="get-request-todo-path" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path-300x190.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path.png" decoding="async" class="wp-image-134976 size-full aligncenter jetpack-lazy-image" src="../Images/ce11427e996b908f72f4075a16d5bbf5.png" alt="GET request through the TODO path" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path-300x190.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="134976" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/get-request-todo-path/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path.png" data-orig-size="730,462" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="get-request-todo-path" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path-300x190.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path.png" decoding="async" loading="lazy" class="wp-image-134976 size-full aligncenter" src="../Images/ce11427e996b908f72f4075a16d5bbf5.png" alt="GET request through the TODO path" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path-300x190.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/get-request-todo-path.png"/></noscript>
<h3 id="execute-to-do-api">执行待办事项API</h3>
<pre class="language-python hljs">@app.route('/todo/&lt;id&gt;', methods=['PUT', 'PATCH'])
def execute_todo(id):
    todo = TodoItem.query.get(id)

    todo.is_executed = not todo.is_executed
    db.session.commit()

    return todo_schema.jsonify(todo)</pre>
<p>端点通过一个从数据库获取实体的<code>PUT</code>或<code>PATCH</code>请求接收<code>TodoItem</code>的ID。然后，端点将<code>is_executed</code>属性的当前值转换为其相反的值，然后再将其保存到数据库中——也就是说，如果其当前值为<code>True</code>，则将其转换为<code>False</code>，反之亦然。</p>
<p><img data-attachment-id="134987" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/endpoint-convert-is-executed-property/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property.png" data-orig-size="730,348" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="endpoint-convert-is-executed-property" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property-300x143.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property.png" decoding="async" class="wp-image-134987 size-full aligncenter jetpack-lazy-image" src="../Images/4dd71eeac155d81edb8152e10ee20042.png" alt="The endpoint converting the is_executed current value." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property-300x143.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="134987" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/endpoint-convert-is-executed-property/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property.png" data-orig-size="730,348" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="endpoint-convert-is-executed-property" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property-300x143.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property.png" decoding="async" loading="lazy" class="wp-image-134987 size-full aligncenter" src="../Images/4dd71eeac155d81edb8152e10ee20042.png" alt="The endpoint converting the is_executed current value." srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property-300x143.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/endpoint-convert-is-executed-property.png"/></noscript>
<h3 id="delete-to-do-api">删除待办事项API</h3>
<p>下面是从数据库中删除一个<code>TodoItem</code>的端点:</p>
<pre class="language-python hljs">@app.route('/todo/&lt;id&gt;', methods=['DELETE'])
def delete_todo(id):
    todo_to_delete = TodoItem.query.get(id)
    db.session.delete(todo_to_delete)
    db.session.commit()

    return todo_schema.jsonify(todo_to_delete)</pre>
<p>端点通过一个从数据库获取实体的<code>DELETE</code>请求来接收<code>TodoItem</code>的ID，并从数据库中删除项目。</p>
<p><img data-attachment-id="135023" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/deleting-todo-api-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database.png" data-orig-size="730,374" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="deleting-todo-api-database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database-300x154.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database.png" decoding="async" class="wp-image-135023 size-full aligncenter jetpack-lazy-image" src="../Images/907317eec62e52fd6f605888d7a9bf0b.png" alt="Deleting a TODO api from the database" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database-300x154.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135023" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/deleting-todo-api-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database.png" data-orig-size="730,374" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="deleting-todo-api-database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database-300x154.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database.png" decoding="async" loading="lazy" class="wp-image-135023 size-full aligncenter" src="../Images/907317eec62e52fd6f605888d7a9bf0b.png" alt="Deleting a TODO api from the database" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database-300x154.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/deleting-todo-api-database.png"/></noscript>
<h2 id="integrating-flutter-app-flask-backend-service">集成Flutter应用程序和Flask后端服务</h2>
<p>通过在终端中运行以下命令，继续创建Flutter应用程序:</p>
<pre class="language-bash hljs">flutter create flutter_todo</pre>
<p>安装以下依赖项:</p>
<ul>
<li><a href="https://pub.dev/packages/http" target="_blank" rel="noopener"> HTTP </a>:这个包实现了Flutter app和Flask服务之间的网络通信</li>
<li><a href="https://pub.dev/packages/provider" target="_blank" rel="noopener">提供者</a>:这个包管理应用程序的状态。除了<a href="https://pub.dev/packages/provider" target="_blank" rel="noopener">的文档</a>，你还可以在这里了解提供商状态管理包<a href="https://blog.logrocket.com/quick-guide-provider-flutter-state-management/" target="_blank" rel="noopener"/></li>
</ul>
<pre class="language-bash hljs">flutter pub add http

flutter pub add provider</pre>
<h3 id="building-model">构建模型</h3>
<p>创建一个名为<code>todo_item</code>的Dart文件，并将下面的代码片段添加到该文件中:</p>
<pre class="language-dart hljs">class TodoItem{
  dynamic id;
  String itemName;
  bool isExecuted;

  TodoItem({this.id, required this.itemName, required this.isExecuted});
}</pre>
<p>上面声明的类的属性类似于我们之前在Flask应用程序中创建的<code>TodoItem</code>的属性。每个颤动<code>TodoItem</code>对象的属性值将显示在屏幕上。</p>
<h3 id="state-management-communicating-flask-app">状态管理和与Flask应用程序通信</h3>
<p>创建另一个名为<code>todo_provider</code>的Dart文件，并向其中添加以下代码:</p>
<pre class="language-dart hljs">import 'dart:convert';

import 'package:flutter/material.dart';
import 'package:todo/models/todo_item.dart';
import 'package:http/http.dart' as http;

class TodoProvider with ChangeNotifier{
  List&lt;TodoItem&gt; _items = [];
  final url = 'http://localhost:5000/todo';

  List&lt;TodoItem&gt; get items {
    return [..._items];
  }

  Future&lt;void&gt; addTodo(String task) async {
      if(task.isEmpty){
      return;
    }

    Map&lt;String, dynamic&gt; request = {"name": task, "is_executed": false};
    final headers = {'Content-Type': 'application/json'};
    final response = await http.post(Uri.parse(url), headers: headers, body: json.encode(request));
    Map&lt;String, dynamic&gt; responsePayload = json.decode(response.body);
    final todo = TodoItem(
        id: responsePayload["id"],
        itemName: responsePayload["name"],</pre>
<p><a href="https://dart.dev/codelabs/async-await" target="_blank" rel="noopener">异步<code>addTodo</code>方法</a>接收要创建的任务的名称，并使用该值构建请求有效负载，用于向Flask服务添加新的<code>TodoItem</code>。回想一下，创建新待办事项的Flask端点需要一个<code>POST</code>请求和一个带有键<code>name</code>和<code>is_executed</code>的请求体。请求中的<code>is_executed</code>键的值被设置为<code>false</code>，因为默认情况下，新创建的待办事项不应被执行，除非用户通过执行端点明确触发。<code>json.encode</code>操作将<code>request</code>映射格式化为一个JSON主体，以便它与Flask服务器期望的格式和结构兼容。</p>
<p><strong>注意</strong>:如果你从模拟器运行应用程序，将基本URL从<code>localhost</code>替换为<code>10.0.2.2</code>。也就是说，<code>url</code>变量的值应该是<code><a href="http://10.0.2.2:5000/todo" rel="nofollow">http://10.0.2.2:5000/todo</a></code>。这是因为模拟器上的<code>localhost</code>没有指向<code>127.0.0.1</code>；这可能会导致您的应用程序在从模拟器向本地服务器发送HTTP请求时失败。来自Flask服务器的响应正文包含以下格式的JSON正文:</p>
<pre class="language-json hljs">{
    "id": 1,
    "is_executed": false,
    "name": "buy food"
}</pre>
<p>服务器自动为新创建的<code>TodoItem</code>创建一个ID，并将其作为响应主体的一部分返回。JSON主体的值被解组到Flutter <code>TodoItem</code>对象中，并添加到<code>_items</code>列表中。来自<a href="https://api.flutter.dev/flutter/foundation/ChangeNotifier-class.html" target="_blank" rel="noopener"> <code>ChangeNotifier</code>类</a>的<code>notifyListeners()</code>方法通知所有监听器关于新<code>TodoItem</code>添加的应用程序状态。</p>
<p>下面是从后端获取所有<code>TodoItem</code>实体的实现:</p>
<pre class="language-dart hljs"> Future&lt;void&gt; get getTodos async {
    var response;
    try{
      response = await http.get(Uri.parse(url));
      List&lt;dynamic&gt; body = json.decode(response.body);
      _items = body.map((e) =&gt; TodoItem(
          id: e['id'],
          itemName: e['name'],
          isExecuted: e['is_executed']
      )
      ).toList();
    }catch(e){
      print(e);
    }

    notifyListeners();
  }</pre>
<p>上面的<code>getTodos</code>方法异步地向后端服务器发送一个<code>GET</code>请求，以获取所有创建的<code>TodoItem</code>实体作为一个JSON列表。然后，它遍历响应体，将值解组到<code>TodoItem</code>对象中。</p>
<pre class="language-dart hljs">Future&lt;void&gt; deleteTodo(int todoId) async {
    var response;
    try{
      response = await http.delete(Uri.parse("$url/$todoId"));
      final body = json.decode(response.body);
      _items.removeWhere((element) =&gt; element.id == body["id"]);
    }catch(e){
      print(e);
    }
    notifyListeners();
  }</pre>
<p><code>deleteTodo</code>方法负责删除数据库和Flutter app中的<code>TodoItem</code>实体。它通过以预期的格式向后端API发出HTTP <code>DELETE</code>请求来执行这个操作。响应正文包含已删除项目的JSON有效负载。使用该项目的ID，该对象也在<code>_items</code>列表中被识别并移除。</p>
<p>最后，下面的<code>executeTask</code>方法期待<code>TodoItem</code>的ID，并向期待此请求的Flask端点发送一个<code>PATCH</code>请求。服务器执行该任务，如本教程的Flask API部分所述，然后它返回一个响应体，该响应体包含已执行的<code>TodoItem</code>，其<code>is_executed</code>属性的值被翻转。也就是说，如果<code>TodoItem</code>在向服务器发送请求之前有一个<code>false</code>的<code>is_executed</code>值，它将返回一个<code>true</code>值，反之亦然。</p>
<pre class="language-dart hljs"> Future&lt;void&gt; executeTask(int todoId) async {
    try{
        final response = await http.patch(Uri.parse("$url/$todoId"));
        Map&lt;String, dynamic&gt; responsePayload = json.decode(response.body);
        _items.forEach((element) =&gt; {
        if(element.id == responsePayload["id"]){
            element.isExecuted = responsePayload["is_executed"]
        }
        });
    }catch(e){
      print(e);
    }
    notifyListeners();
  }</pre>

<p>创建一个<code>tasks.dart</code>文件，并在该文件中添加以下代码:</p>
<pre class="language-dart hljs">import 'package:flutter/material.dart';
import 'package:provider/provider.dart';

import '../providers/todo_provider.dart';

class TasksWidget extends StatefulWidget {
  const TasksWidget({Key? key}) : super(key: key);

  @override
  State&lt;TasksWidget&gt; createState() =&gt; _TasksWidgetState();
}

class _TasksWidgetState extends State&lt;TasksWidget&gt; {
  TextEditingController newTaskController = TextEditingController();

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.all(20.0),
      child: Column(
        children: [
          Row(
            children: [
              Expanded(
                child: TextFormField(
                  controller: newTaskController,
                  decoration: InputDecoration(
                    labelText: 'New Task',
                    border: OutlineInputBorder(),
                  ),
                ),
              ),
              SizedBox(width: 10,),
              ElevatedButton(
                  style: ButtonStyle(
                      backgroundColor: MaterialStateProperty.all(Colors.amberAccent),
                      foregroundColor: MaterialStateProperty.all(Colors.purple)
                  ),
                  child: Text("Add"),
                  onPressed: () {
                    Provider.of&lt;TodoProvider&gt;(context, listen: false).addTodo(newTaskController.text);
newTaskController.clear();
                  }
              )
            ],
          ),
          FutureBuilder(
            future: Provider.of&lt;TodoProvider&gt;(context, listen: false).getTodos,
            builder: (ctx, snapshot) =&gt;
            snapshot.connection state == ConnectionState.waiting
                ? Center(child: CircularProgressIndicator())
                :
            Consumer&lt;TodoProvider&gt;(
              child: Center(
                heightFactor: MediaQuery.of(context).size.height * 0.03,
                child: const Text('You have no tasks.', style: TextStyle(fontSize: 18),),
              ),
              builder: (ctx, todoProvider, child) =&gt; todoProvider.items.isEmpty
                  ?  child as Widget
                  : Padding(
                padding: const EdgeInsets.only(top: 20),
                child: Container(
                  height: MediaQuery.of(context).size.height * 0.6,
                  child: ListView.builder(
                      itemCount: todoProvider.items.length,
                      itemBuilder: (ctx, i) =&gt; Padding(
                        padding: const EdgeInsets.only(bottom: 10.0),
                        child: ListTile(
                          tileColor: Colors.black12,
                          leading: Checkbox(
                              value: todoProvider.items[i].isExecuted,
                              activeColor: Colors.purple,
                              onChanged:(newValue) {
                                Provider.of&lt;TodoProvider&gt;(context, listen: false).executeTask(todoProvider.items[i].id);
                              }
                          ),
                          title: Text(todoProvider.items[i].itemName),
                          trailing: IconButton(
                              icon: Icon(Icons.delete, color: Colors.red),
                              onPressed: ()  {
                                Provider.of&lt;TodoProvider&gt;(context, listen: false).deleteTodo(todoProvider.items[i].id);
                              }
                          ) ,
                          onTap: () {},
                        ),
                      )
                  ),
                ),
              ),
            ),
          )
        ],
      ),
    );
  }
}</pre>
<p><code>TaskWidget</code>类是一个有状态的小部件，负责构建用户将与之交互的应用程序的界面和小部件。小部件通过调用<code>TodoProvider</code>类的<code>addTodo</code>方法和已创建任务的<code>ListView</code>,使<code>TextInputField</code>接收新任务的值，<code>ElevatedButton</code>提交输入值。</p>
<p><img data-attachment-id="135030" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/submitting-input-value-taskwidget-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1.png" data-orig-size="730,136" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="submitting-input-value-taskwidget" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1-300x56.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1.png" decoding="async" class="wp-image-135030 size-full aligncenter jetpack-lazy-image" src="../Images/9f2f1e25e725179edfeac6e1ec87aad9.png" alt="Submitting an input value with taskwidget" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1-300x56.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135030" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/submitting-input-value-taskwidget-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1.png" data-orig-size="730,136" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="submitting-input-value-taskwidget" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1-300x56.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1.png" decoding="async" loading="lazy" class="wp-image-135030 size-full aligncenter" src="../Images/9f2f1e25e725179edfeac6e1ec87aad9.png" alt="Submitting an input value with taskwidget" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1-300x56.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/submitting-input-value-taskwidget-1.png"/></noscript>
<p>当小部件构建时，它通过调用<code>TodoProvider</code>类中的<code>getTodos</code>方法获取数据库中所有创建的项目。屏幕上的每个任务都是一个<code>ListTile</code>，其中包含一个复选框、任务名称和一个删除图标。每次点击复选框都会调用<code>TodoProvider</code>执行方法来改变后端服务器和Flutter应用程序中的<code>TodoItem</code>对象的<code>isExecuted</code>值。点击删除图标调用<code>deleteTodo</code>方法来删除选中的任务。</p>
<p><img data-attachment-id="135039" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/delete-icon/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon.png" data-orig-size="730,161" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="delete-icon" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon-300x66.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon.png" decoding="async" class="wp-image-135039 size-full aligncenter jetpack-lazy-image" src="../Images/d5a1403820be736bddc7ceaef6d94f6d.png" alt="The delete icon." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon-300x66.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135039" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/delete-icon/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon.png" data-orig-size="730,161" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="delete-icon" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon-300x66.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon.png" decoding="async" loading="lazy" class="wp-image-135039 size-full aligncenter" src="../Images/d5a1403820be736bddc7ceaef6d94f6d.png" alt="The delete icon." srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon-300x66.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/delete-icon.png"/></noscript>
<p><img data-attachment-id="135041" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/selecting-delete-icon/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon.png" data-orig-size="730,148" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="selecting-delete-icon" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon-300x61.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon.png" decoding="async" class="wp-image-135041 size-full aligncenter jetpack-lazy-image" src="../Images/19d15e824e349136bb5b435692c1a42b.png" alt="Selecting the delete icon" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon-300x61.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135041" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/selecting-delete-icon/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon.png" data-orig-size="730,148" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="selecting-delete-icon" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon-300x61.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon.png" decoding="async" loading="lazy" class="wp-image-135041 size-full aligncenter" src="../Images/19d15e824e349136bb5b435692c1a42b.png" alt="Selecting the delete icon" srcset="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon-300x61.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/selecting-delete-icon.png"/></noscript>
<p>下面是作为应用程序入口点的<code>main.dart</code>文件的内容:</p>
<pre class="language-dart hljs">import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:todo/providers/todo_provider.dart';
import 'package:todo/widgets/tasks.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return ChangeNotifierProvider.value(
        value: TodoProvider(),
      child: MaterialApp(
      debugShowCheckedModeBanner: false,
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.purple,
      ),
      home: const MyHomePage(title: 'Todo app'),
    )
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({super.key, required this.title});
  final String title;

  @override
  State&lt;MyHomePage&gt; createState() =&gt; _MyHomePageState();
}

class _MyHomePageState extends State&lt;MyHomePage&gt; {

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      resizeToAvoidBottomInset: false,
      appBar: AppBar(
        title: Text(widget.title),
        centerTitle: true,
      ),
      body: TasksWidget(),
    );
  }
}</pre>
<h2><img data-attachment-id="135044" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/gif-deleting-todos/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/gif-deleting-todos.gif" data-orig-size="730,1561" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="gif-deleting-todos" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/gif-deleting-todos-140x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/gif-deleting-todos-479x1024.gif" decoding="async" class="wp-image-135044 size-full aligncenter jetpack-lazy-image" src="../Images/f20b9ace8c84b62931b36a0fdabcf0f0.png" alt="Gif of deleting Todos." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/09/gif-deleting-todos.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/gif-deleting-todos.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="135044" data-permalink="https://blog.logrocket.com/integrating-flask-flutter-apps/attachment/gif-deleting-todos/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/09/gif-deleting-todos.gif" data-orig-size="730,1561" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="gif-deleting-todos" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/09/gif-deleting-todos-140x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/09/gif-deleting-todos-479x1024.gif" decoding="async" loading="lazy" class="wp-image-135044 size-full aligncenter" src="../Images/f20b9ace8c84b62931b36a0fdabcf0f0.png" alt="Gif of deleting Todos." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/09/gif-deleting-todos.gif"/>T3】</noscript></h2>
<h2>结论</h2>
<p>根据所选择的网络通信机制，在不同的前端和后端框架中，集成前端应用程序和后端服务的过程非常相似。本教程演示了如何通过Restful API架构将前端的Flutter应用程序与后端的Flask服务集成在一起。这里采用的HTTP通信概念可以应用于您可能选择的其他前端和后端框架。</p>
<p>你可以在<a href="https://github.com/olu-damilare/flutter-todo" target="_blank" rel="noopener">这个报告</a>中查看Flutter应用的代码库，这里是Flask服务的<a href="https://github.com/olu-damilare/flask-todo" target="_blank" rel="noopener">代码。</a></p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>