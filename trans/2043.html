<html>
<head>
<title>Managing app permissions in React Native - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在 React Native - LogRocket 博客中管理应用权限</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/react-native-permissions/#0001-01-01">https://blog.logrocket.com/react-native-permissions/#0001-01-01</a></blockquote><div><article class="article-post">
<p>当您开发具有高级功能的移动应用程序时，您很可能需要获得用户的许可。</p>
<p>为了保护用户，应用程序不应该能够直接访问用户的摄像头、麦克风、位置等等。我们需要通过获取许可来捕获和存储照片、音频和视频，从而尊重用户隐私。</p>
<p>让我们来看看脸书允许拍照的例子。你对这些警报很熟悉，对吧？</p>
<p><img data-attachment-id="62959" data-permalink="https://blog.logrocket.com/react-native-permissions/fb-camera-access-permission/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission.png" data-orig-size="577,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="FB camera access permission" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission-300x201.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission.png" decoding="async" class="size-full wp-image-62959 aligncenter jetpack-lazy-image" src="../Images/f217a009e071fd4ca537809ace1d9385.png" alt="FB Camera Access Permission" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission.png 577w, https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission-300x201.png 300w" data-lazy-sizes="(max-width: 577px) 100vw, 577px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="62959" data-permalink="https://blog.logrocket.com/react-native-permissions/fb-camera-access-permission/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission.png" data-orig-size="577,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="FB camera access permission" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission-300x201.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission.png" decoding="async" loading="lazy" class="size-full wp-image-62959 aligncenter" src="../Images/f217a009e071fd4ca537809ace1d9385.png" alt="FB Camera Access Permission" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission.png 577w, https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission-300x201.png 300w" sizes="(max-width: 577px) 100vw, 577px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-access-permission.png"/></noscript>
<p>为了能够完整地展示您的应用程序，您的用户必须给予许可。但是如果用户否认了呢？正如您可能猜到的，您无法提供该功能。所以权限是必不可少的。</p>
<p>如果我们正在开发一个照片编辑应用程序呢？解决方案很简单:我们需要获得他们的许可来访问他们的数据。在本文中，我们将深入探讨权限，以及如何通过使用 zoontek 的<a href="https://github.com/zoontek/react-native-permissions"> react-native-permissions 库</a>在 React Native 中获取权限。</p>
<h2>反应本地权限库🐝</h2>
<p>可惜 React Native 不支持获取权限。幸运的是，我们可以使用一个流行的第三方库:Mathieu Acthernoene 的 react-native-permissions 库。</p>
<p>让我们假设我们想要请求照相机许可。这些步骤很容易做到。</p>
<p>💡首先，确保将该库添加到项目中:</p>
<pre>$ npm install --save react-native-permissions
--or--
$ yarn add react-native-permissions
</pre>
<p>然后，确保通过在文件顶部写入来导入库，在那里您将处理这些权限:</p>
<pre>import * as permissions from 'react-native-permissions';
// you may also import just the functions or constants that you will use from this library
import {request, PERMISSIONS} from 'react-native-permissions';
</pre>
<h3>iOS 设备的 react-native-权限</h3>
<ul>
<li>确保将所有需要的权限添加到应用程序的<code>Podfile</code>中，并运行以下命令:<pre>pod install</pre><ul>
<li>CocoaPods 是 Swift 和 Objective-C Cocoa 项目的依赖管理器。<code>Podfile</code>是描述一个或多个 Xcode 项目的目标依赖关系的规范。运行<code>pod install</code>有助于安装依赖项。你可以<a href="https://cocoapods.org">在这里查看 CocoaPods 阅读更多</a>。</li>
</ul>
</li>
</ul>
<p>→在我们的例子中，我们将添加</p>
<pre>pod 'Permission-Camera', :path =&gt; "#{permissions_path}/Camera"
</pre>
<p>到<code>Podfile</code>并运行<code>pod install</code>。</p>
<ul>
<li>用所需的权限使用描述更新<code>Info.plist</code>。你可以通过两种方式实现这一点；选择适合自己的。</li>
</ul>
<h4>选项 1: Xcode</h4>
<ul>
<li>打开信息部分</li>
<li>添加新行</li>
<li>从选项中选择您希望作为密钥的权限</li>
<li>向该键添加值</li>
</ul>
<p>→在我们的例子中，我们将选择<strong>隐私–相机使用说明。</strong></p>
<p><img data-attachment-id="62969" data-permalink="https://blog.logrocket.com/react-native-permissions/xcode-privacy-camera-usage-description/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/xcode-privacy-camera-usage-description-e1628718096419.png" data-orig-size="730,675" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Xcode privacy camera usage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/xcode-privacy-camera-usage-description-300x277.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/xcode-privacy-camera-usage-description-1024x947.png" decoding="async" class="wp-image-62969 size-full aligncenter jetpack-lazy-image" src="../Images/32bc2e77bea831e022a460ef1e7a3741.png" alt="Xcode Privacy Camera Usage" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/xcode-privacy-camera-usage-description-e1628718096419.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/xcode-privacy-camera-usage-description-e1628718096419.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="62969" data-permalink="https://blog.logrocket.com/react-native-permissions/xcode-privacy-camera-usage-description/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/xcode-privacy-camera-usage-description-e1628718096419.png" data-orig-size="730,675" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Xcode privacy camera usage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/xcode-privacy-camera-usage-description-300x277.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/xcode-privacy-camera-usage-description-1024x947.png" decoding="async" loading="lazy" class="wp-image-62969 size-full aligncenter" src="../Images/32bc2e77bea831e022a460ef1e7a3741.png" alt="Xcode Privacy Camera Usage" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/xcode-privacy-camera-usage-description-e1628718096419.png"/></noscript>
<h4>选项 2:文本编辑器</h4>
<ul>
<li>打开<code>Info.plist</code>文件</li>
<li>从下面复制键和字符串值并粘贴该文件</li>
<li>根据需要更新字符串值:</li>
</ul>
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
    &lt;plist version="1.0"&gt;
    &lt;dict&gt;     
      &lt;!-- 🚨 Keep only the permissions used in your app 🚨 --&gt;
      &lt;key&gt;NSAppleMusicUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSBluetoothAlwaysUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSBluetoothPeripheralUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSCalendarsUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSCameraUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSContactsUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSFaceIDUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSLocationAlwaysAndWhenInUseUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSLocationAlwaysUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSLocationTemporaryUsageDescriptionDictionary&lt;/key&gt;
      &lt;dict&gt;
        &lt;key&gt;YOUR-PURPOSE-KEY&lt;/key&gt;
        &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;/dict&gt;
      &lt;key&gt;NSLocationWhenInUseUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSMotionUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSPhotoLibraryUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSPhotoLibraryAddUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSRemindersUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSSpeechRecognitionUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSSiriUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;
      &lt;key&gt;NSUserTrackingUsageDescription&lt;/key&gt;
      &lt;string&gt;YOUR TEXT&lt;/string&gt;

      &lt;!-- … --&gt;
    &lt;/dict&gt;
    &lt;/plist&gt;
</pre>
<p>→在我们的例子中，如下所示:</p>
<pre>&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;
    &lt;string&gt;YOUR TEXT&lt;/string&gt;
</pre>
<p>🌞第一个选项中的值部分和第二个选项中的<code>&lt;string&gt;</code>部分对应于警报消息中的文本。</p>
<p>让我们回忆一下脸书照相机许可警报。描述部分是您在此处作为值给出的文本:</p>
<p><img data-attachment-id="62961" data-permalink="https://blog.logrocket.com/react-native-permissions/fb-camera-permission-text/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text.jpeg" data-orig-size="577,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="FB camera permission text" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text-300x201.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text.jpeg" decoding="async" class="size-full wp-image-62961 aligncenter jetpack-lazy-image" src="../Images/bda3f2ea0e492a4323773e37e265406a.png" alt="FB Camera Permission Text" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text.jpeg 577w, https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text-300x201.jpeg 300w" data-lazy-sizes="(max-width: 577px) 100vw, 577px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text.jpeg?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text.jpeg"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="62961" data-permalink="https://blog.logrocket.com/react-native-permissions/fb-camera-permission-text/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text.jpeg" data-orig-size="577,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="FB camera permission text" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text-300x201.jpeg" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text.jpeg" decoding="async" loading="lazy" class="size-full wp-image-62961 aligncenter" src="../Images/bda3f2ea0e492a4323773e37e265406a.png" alt="FB Camera Permission Text" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text.jpeg 577w, https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text-300x201.jpeg 300w" sizes="(max-width: 577px) 100vw, 577px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/fb-camera-permission-text.jpeg"/></noscript>
<p>→在我们的例子中，我只是将“Camera”赋予值，这里看起来是这样的:</p>
<p><img data-attachment-id="62967" data-permalink="https://blog.logrocket.com/react-native-permissions/rn-permission-text-body/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body.png" data-orig-size="536,318" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN permission text body" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body-300x178.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body.png" decoding="async" class="size-full wp-image-62967 aligncenter jetpack-lazy-image" src="../Images/119753b504564e019b96359d4b1e2a72.png" alt="RN Permission Text Body" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body.png 536w, https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body-300x178.png 300w" data-lazy-sizes="(max-width: 536px) 100vw, 536px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="62967" data-permalink="https://blog.logrocket.com/react-native-permissions/rn-permission-text-body/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body.png" data-orig-size="536,318" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="RN permission text body" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body-300x178.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body.png" decoding="async" loading="lazy" class="size-full wp-image-62967 aligncenter" src="../Images/119753b504564e019b96359d4b1e2a72.png" alt="RN Permission Text Body" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body.png 536w, https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body-300x178.png 300w" sizes="(max-width: 536px) 100vw, 536px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/rn-permission-text-body.png"/></noscript>
<h3>Android 的 react-native-权限</h3>
<ul>
<li>将所有需要的权限添加到应用程序的<code>android/app/src/main/AndroidManifest.xml</code>文件中:</li>
</ul>
<pre>&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.myawesomeapp"&gt;
      &lt;!-- 🚨 Keep only the permissions used in your app 🚨 --&gt;
      &lt;uses-permission android:name="android.permission.ACCEPT_HANDOVER" /&gt;
      &lt;uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" /&gt;
      &lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /&gt;
      &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /&gt;
      &lt;uses-permission android:name="android.permission.ACTIVITY_RECOGNITION" /&gt;
      &lt;uses-permission android:name="android.permission.ANSWER_PHONE_CALLS" /&gt;
      &lt;uses-permission android:name="android.permission.BODY_SENSORS" /&gt;
      &lt;uses-permission android:name="android.permission.CALL_PHONE" /&gt;
      &lt;uses-permission android:name="android.permission.CAMERA" /&gt;
      &lt;uses-permission android:name="android.permission.GET_ACCOUNTS" /&gt;
      &lt;uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" /&gt;
      &lt;uses-permission android:name="android.permission.READ_CALENDAR" /&gt;
      &lt;uses-permission android:name="android.permission.READ_CALL_LOG" /&gt;
      &lt;uses-permission android:name="android.permission.READ_CONTACTS" /&gt;
      &lt;uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /&gt;
      &lt;uses-permission android:name="android.permission.READ_PHONE_NUMBERS" /&gt;
      &lt;uses-permission android:name="android.permission.READ_PHONE_STATE" /&gt;
      &lt;uses-permission android:name="android.permission.READ_SMS" /&gt;
      &lt;uses-permission android:name="android.permission.RECEIVE_MMS" /&gt;
      &lt;uses-permission android:name="android.permission.RECEIVE_SMS" /&gt;
      &lt;uses-permission android:name="android.permission.RECEIVE_WAP_PUSH" /&gt;
      &lt;uses-permission android:name="android.permission.RECORD_AUDIO" /&gt;
      &lt;uses-permission android:name="android.permission.SEND_SMS" /&gt;
      &lt;uses-permission android:name="android.permission.USE_SIP" /&gt;
      &lt;uses-permission android:name="android.permission.WRITE_CALENDAR" /&gt;
      &lt;uses-permission android:name="android.permission.WRITE_CALL_LOG" /&gt;
      &lt;uses-permission android:name="android.permission.WRITE_CONTACTS" /&gt;
      &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /&gt;
      &lt;uses-permission android:name="com.android.voicemail.permission.ADD_VOICEMAIL" /&gt;
   
      &lt;!-- … --&gt;

&lt;/manifest&gt;
</pre>
<p>→在我们的例子中，我们只需要向<code>AndroidManifest.xml</code>文件添加摄像机许可:</p>
<pre>&lt;uses-permission android:name="android.permission.CAMERA" /&gt; 
</pre>
<h3>请求权限:返回类型</h3>
<pre>request(Platform.OS === 'ios' ? PERMISSIONS.IOS.CAMERA : PERMISSIONS.ANDROID.CAMERA).then((result) =&gt; {
        setPermissionResult(result)
        console.log(result)
      });
</pre>
<p>返回类型和含义如下:</p>
<p><img data-attachment-id="62965" data-permalink="https://blog.logrocket.com/react-native-permissions/permission-return-types-meanings/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/permission-return-types-meanings-e1628718189110.png" data-orig-size="730,252" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Permission return types and meanings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/permission-return-types-meanings-300x104.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/permission-return-types-meanings-1024x354.png" decoding="async" class="wp-image-62965 size-full aligncenter jetpack-lazy-image" src="../Images/25e52bba4cd9b52f180385f856938e91.png" alt="Permission Return Types and Meanings" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/permission-return-types-meanings-e1628718189110.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/permission-return-types-meanings-e1628718189110.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="62965" data-permalink="https://blog.logrocket.com/react-native-permissions/permission-return-types-meanings/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/permission-return-types-meanings-e1628718189110.png" data-orig-size="730,252" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Permission return types and meanings" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/permission-return-types-meanings-300x104.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/permission-return-types-meanings-1024x354.png" decoding="async" loading="lazy" class="wp-image-62965 size-full aligncenter" src="../Images/25e52bba4cd9b52f180385f856938e91.png" alt="Permission Return Types and Meanings" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/permission-return-types-meanings-e1628718189110.png"/></noscript>
<p>该流程因操作系统而异。这里有 iOS 和 Android 的权限流程图，取自本库的文档。</p>
<p><img data-attachment-id="62963" data-permalink="https://blog.logrocket.com/react-native-permissions/ios-permissions-flow/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/ios-permissions-flow-e1628718295120.png" data-orig-size="335,491" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="iOS permission flow" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/ios-permissions-flow-e1628718284332-205x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/ios-permissions-flow-942x1024.png" decoding="async" class="wp-image-62963 size-full aligncenter jetpack-lazy-image" src="../Images/bceeef2d09f3deeaa245ecba65b33d8b.png" alt="iOS Permission Flow" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/ios-permissions-flow-e1628718247302.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/ios-permissions-flow-e1628718247302.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="62963" data-permalink="https://blog.logrocket.com/react-native-permissions/ios-permissions-flow/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/ios-permissions-flow-e1628718295120.png" data-orig-size="335,491" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="iOS permission flow" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/ios-permissions-flow-e1628718284332-205x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/ios-permissions-flow-942x1024.png" decoding="async" loading="lazy" class="wp-image-62963 size-full aligncenter" src="../Images/bceeef2d09f3deeaa245ecba65b33d8b.png" alt="iOS Permission Flow" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/ios-permissions-flow-e1628718247302.png"/></noscript><img data-attachment-id="62957" data-permalink="https://blog.logrocket.com/react-native-permissions/android-permissions-flow/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/android-permissions-flow-e1628718346214.png" data-orig-size="730,786" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Android permissions flow" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/android-permissions-flow-278x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/android-permissions-flow-950x1024.png" decoding="async" class="wp-image-62957 size-full aligncenter jetpack-lazy-image" src="../Images/12b523b3db8bf2c67efd7e489f6df566.png" alt="Android Permission Flow" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/android-permissions-flow-e1628718346214.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/android-permissions-flow-e1628718346214.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="62957" data-permalink="https://blog.logrocket.com/react-native-permissions/android-permissions-flow/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/android-permissions-flow-e1628718346214.png" data-orig-size="730,786" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Android permissions flow" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/android-permissions-flow-278x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/android-permissions-flow-950x1024.png" decoding="async" loading="lazy" class="wp-image-62957 size-full aligncenter" src="../Images/12b523b3db8bf2c67efd7e489f6df566.png" alt="Android Permission Flow" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/android-permissions-flow-e1628718346214.png"/></noscript>
<h3>最终产品</h3>
<p>瞧啊。您已经准备好运行您的代码了！基本上就是这样！</p>
<p>您可能仍然会遇到一些问题，比如您的设备可能不支持该功能，或者版本无效。我的建议是:查找解决方案的第一个地方应该是库的文档。</p>
<p>在写这篇文章时，我构建了一个包含摄像头和麦克风权限的 React 本地应用程序示例。它显示许可的结果和对结果的解释。</p>
<p>您可以使用它，查看结果类型，并观察结果何时返回。您可以先批准它，然后在“设置”中更改权限，打开应用程序，看看会发生什么。用它来更好地理解！</p>
<p>当您为特定场合编码时，您也可以使用该示例进行测试。除了使用示例，您还可以查看源代码，如果您有任何问题，可以与我的进行比较！</p>
<p><span class="embed-youtube"> <iframe loading="lazy" class="youtube-player" src="https://www.youtube.com/embed/Ktny9_Tc5l4?version=3&amp;rel=1&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;fs=1&amp;hl=en-US&amp;autohide=2&amp;wmode=transparent" allowfullscreen="true" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation">视频</iframe> </span></p>
<p>当我即将完成我的示例项目时，我发现 zoontek 也为此制作了一个示例应用程序，就像我的一样，但包括了所有权限！你可以在这里查看 zoontek 的示例应用。</p>
<h2>配置权限的要点👩🏻‍💻</h2>
<h3>许可外观</h3>
<p>请记住，如果您回答了一个权限请求，它将不会再次请求该权限。如果您希望它再次出现，请删除并安装该应用程序。</p>
<p>如果您只想更改结果，您可以在仪器的设置中进行更改。</p>
<p>在 iOS 中，用户必须明确授予每个应用程序访问摄像头和麦克风的权限。在您的应用程序可以首次使用捕捉系统之前，操作系统会显示一个警告，要求用户授予您的应用程序访问相机的权限。它们会记住用户对该警告的反应，因此它不会在每次访问用户的相机时重新出现。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自 LogRocket 的精彩文章:</h3>

<hr/></div>
<p>用户可以在 iOS 的<strong>设置</strong> &gt; <strong>隐私</strong>中更改你的应用的权限设置，或者在 Android 的<br/> <strong>设置</strong> &gt; <strong>应用</strong> &gt; <strong>【你的应用名称】</strong> &gt; <strong>权限</strong>。</p>
<h3>危险的权限</h3>
<p>以前在 Android 开发中，每个权限都必须添加到<code>AndroidManifest.xml</code>文件中。它们被称为安装时权限，在谷歌 Play 商店安装时被请求。</p>
<p>从 Android 6.0 (API 23)开始，危险的权限，也就是运行时权限的概念出现了，这些权限变得有必要在运行时而不是安装时询问。运行时权限是应用程序运行时出现的警告对话框。</p>
<p>让我们检查 Instagram 的权限。当我们在谷歌 Play 商店上查看 Instagram 时，我们看到一堆权限。</p>
<p><img data-attachment-id="99888" data-permalink="https://blog.logrocket.com/react-native-permissions/instagram-permissions/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions.png" data-orig-size="730,463" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Instagram permissions" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-300x190.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions.png" decoding="async" class="size-full wp-image-99888 aligncenter jetpack-lazy-image" src="../Images/6723487356441a751930da0e55965842.png" alt="Instagram Permissions" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-300x190.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="99888" data-permalink="https://blog.logrocket.com/react-native-permissions/instagram-permissions/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions.png" data-orig-size="730,463" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Instagram permissions" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-300x190.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions.png" decoding="async" loading="lazy" class="size-full wp-image-99888 aligncenter" src="../Images/6723487356441a751930da0e55965842.png" alt="Instagram Permissions" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-300x190.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions.png"/></noscript>
<p>用户的相机、联系人、位置、麦克风、电话和存储器都是他们的敏感信息。因此，它们是危险的权限。所以，在 Android 6.0 及以后的版本中，用户在使用 app 时看到的是运行时权限；这里，是 Instagram。</p>
<p>当用户试图发布照片或视频时，屏幕上会出现运行时权限对话框。</p>
<p><img data-attachment-id="99890" data-permalink="https://blog.logrocket.com/react-native-permissions/instagram-permissions-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request.png" data-orig-size="564,360" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Instagram permissions request" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request-300x191.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request.png" decoding="async" class="size-full wp-image-99890 aligncenter jetpack-lazy-image" src="../Images/00f1da8fd150deedbbbc7401e97b123d.png" alt="Instagram Permissions Request" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request.png 564w, https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request-300x191.png 300w" data-lazy-sizes="(max-width: 564px) 100vw, 564px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="99890" data-permalink="https://blog.logrocket.com/react-native-permissions/instagram-permissions-request/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request.png" data-orig-size="564,360" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Instagram permissions request" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request-300x191.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request.png" decoding="async" loading="lazy" class="size-full wp-image-99890 aligncenter" src="../Images/00f1da8fd150deedbbbc7401e97b123d.png" alt="Instagram Permissions Request" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request.png 564w, https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request-300x191.png 300w" sizes="(max-width: 564px) 100vw, 564px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-permissions-request.png"/></noscript>
<p>同样，当用户试图在 Instagram 上拍摄照片或视频时，这些权限就会出现。</p>
<p><img data-attachment-id="99897" data-permalink="https://blog.logrocket.com/react-native-permissions/instagram-runtime-permissions/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions.png" data-orig-size="730,270" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Instagram runtime permissions" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions-300x111.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions.png" decoding="async" class="size-full wp-image-99897 aligncenter jetpack-lazy-image" src="../Images/a205d4b6e98252929708dafa4a0e0e0a.png" alt="Instagram Runtime Permissions" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions-300x111.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="99897" data-permalink="https://blog.logrocket.com/react-native-permissions/instagram-runtime-permissions/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions.png" data-orig-size="730,270" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Instagram runtime permissions" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions-300x111.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions.png" decoding="async" loading="lazy" class="size-full wp-image-99897 aligncenter" src="../Images/a205d4b6e98252929708dafa4a0e0e0a.png" alt="Instagram Runtime Permissions" srcset="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions-300x111.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/08/instagram-runtime-permissions.png"/></noscript>
<h3>Android 11 权限更新</h3>
<p>在 Android 生态系统中，Android 11 带来了一些变化:</p>
<ul>
<li>如果您的应用程序请求与摄像机、麦克风或位置相关的权限，权限对话框会包括“仅这一次”选项。如果选中它，您的应用程序将一次性获得权限。它被称为“一次性许可”第二次打开应用程序时，权限对话框再次出现</li>
<li>如果您的应用程序已经几个月没有使用，系统会自动重置用户授予该应用程序的敏感运行时权限</li>
</ul>
<p>要了解更多信息，<a href="https://developer.android.com/about/versions/11/privacy/permissions">请查看 Android 11 的更新</a>。</p>
<h3>iOS 14.5:应用追踪透明度</h3>
<p>对于 iOS 14.5、iPadOS 14.5 和 tvOS 14.5 及更高版本，开发者需要征得用户的许可，才能在其他公司拥有的应用和网站上跟踪他们。这个库的最大特点之一是它是最新的。您可以使用 react-native-permissions 添加一个<a href="https://developer.apple.com/documentation/apptrackingtransparency">AppTrackingTransparency</a>(ATT)提示和请求。请记住，只有版本 14.5 或更高版本的 iOS 设备才能请求此功能。</p>
<h2>何时请求权限以获得最佳用户体验👩🏻‍🎨</h2>
<p>在应用程序启动时请求许可，或者在你需要的特定时间请求许可，仍然是一个用户体验的争论。没有答案；有意见。</p>
<p>我的建议是当你需要它的时候问一问。作为一个用户，看到 onboarding 中的所有权限会让我害怕，大多数时候我不会给出完整的权限。正如我以前说过的，这是有争议的。选择适合自己的。</p>
<h2>结论</h2>
<p>我们已经介绍了权限的概念，以及如何通过使用 react-native-permissions 在 React Native 中获得权限。我给了你在你的许可之旅中可能需要的关键点，比如 Android 11 和 iOS 14.5 的变化。您可以<a href="https://github.com/iremkaraoglu/ReactNative-Permissions-Example">在这个 GitHub 库</a>中找到我的示例项目。</p>
<p>我希望你喜欢这篇文章，并且你的用户有充分的权限从你的应用程序特性中获益！如果您有任何反馈，请随时联系我们。下次再见，保重！☘️</p>
<h2>参考</h2>

<p><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p><p>Start proactively monitoring your React Native apps — <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">try LogRocket for free</a>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>