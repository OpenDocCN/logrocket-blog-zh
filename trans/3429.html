<html>
<head>
<title>Build and deploy a web app with OneDev - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用OneDev - LogRocket博客构建和部署web应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-deploying-react-web-app-onedev/#0001-01-01">https://blog.logrocket.com/building-deploying-react-web-app-onedev/#0001-01-01</a></blockquote><div><article class="article-post">
<p>使用云服务存储、构建和部署代码已经变得无处不在。你有<a href="https://blog.logrocket.com/8-ways-deploy-react-app-free/" target="_blank" rel="noopener">许多选项可以从</a>中选择。如果您想从自己的服务器进行构建和部署，那么选项会变得更加有限。当然，您可以自己安装和配置多种工具，但很难重建GitHub、GitLab和其他流行的云服务提供商提供的丰富的开发人员生态系统。这就是<a href="https://code.onedev.io" target="_blank" rel="noopener"> OneDev </a>可以帮忙的地方。</p>
<p><img data-attachment-id="135319" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/onedev/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev.png" data-orig-size="730,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="OneDev" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-300x188.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev.png" decoding="async" class="aligncenter size-full wp-image-135319 jetpack-lazy-image" src="../Images/62f4c7d402e5fc9d69598fa1af7940f5.png" alt="OneDev" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-300x188.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135319" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/onedev/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev.png" data-orig-size="730,457" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="OneDev" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-300x188.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135319" src="../Images/62f4c7d402e5fc9d69598fa1af7940f5.png" alt="OneDev" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-300x188.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev.png"/></noscript>
<p>OneDev是一个一体化的开源DevOps系统，您可以将其托管在自己的服务器上。它包括开发人员在流行的DevOps平台上已经习惯的一些最常见的功能，包括:</p>
<ul>
<li>基于Git的源代码控制，包括拉请求、代码比较工具和注释功能</li>
<li>问题跟踪系统，包括可视化问题的板</li>
<li>运行构建和部署作业的自动化作业系统</li>
</ul>
<p>在本文中，我们将从React web开发人员的角度探索OneDev。我们将设置一个新的OneDev实例，将React web应用源代码推送到它，并设置一些构建和部署作业来部署到<a href="https://azure.microsoft.com/en-us/products/app-service/" target="_blank" rel="noopener"> Azure应用服务</a>。</p>
<p><em>向前跳转:</em></p>

<h2 id="prerequisites">先决条件</h2>
<p>要跟随本教程，您需要以下内容:</p>

<h2 id="set-up-onedev">设置OneDev</h2>
<p>官方的OneDev <a href="https://code.onedev.io/projects/162/files/main/pages/installation-guide.md" target="_blank" rel="noopener">安装指南</a>描述了如何将OneDev设置为独立的Docker容器、Kubernetes集群中的节点或者直接安装到服务器上而不使用容器技术。</p>
<p>最简单的入门方法是将OneDev作为独立的Docker容器运行。事实上，下面的Docker compose文件就像运行一个命令一样简单:</p>
<pre class="language-javascript hljs">version: '3.8'
services:
  onedev:
    image: 1dev/server
    ports:
      - 6610:6610
      - 6611:6611
    volumes:
      # allow Docker to communicate with host
      - /var/run/docker.sock:/var/run/docker.sock
      - onedev_data:/opt/onedev
volumes:
  onedev_data:
</pre>
<p>这个Docker编写文件示例为您处理了一些事情:</p>
<ul>
<li>公开所需的端口</li>
<li>确保OneDev容器中安装的Docker可以与本地系统上安装的Docker通信</li>
<li>将所有OneDev数据存储在一个名为<code>onedev_data</code>的持久卷中，以便在重启容器时不会丢失数据</li>
</ul>
<p>将样本Docker合成文件保存到系统上的<code>docker-compose.yml</code>。然后，在同一文件夹中打开一个新的命令shell，并运行以下命令以分离模式启动容器:</p>
<pre class="language-javascript hljs">docker compose up -d
</pre>
<p>容器启动后，在浏览器中的<a href="http://localhost:6610" rel="nofollow"> http://localhost:6610 </a>访问OneDev。您可能需要等待几分钟，以便OneDev在浏览器中加载之前进行初始化。您首先会看到的是服务器设置屏幕；它将引导您完成初始设置。</p>
<p><img data-attachment-id="135321" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/server-setup-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen.png" data-orig-size="559,927" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Server setup screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen-181x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen.png" decoding="async" class="aligncenter size-full wp-image-135321 jetpack-lazy-image" src="../Images/008678643c7c84a470ad759a1525f2d9.png" alt="Server Setup Screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen.png 559w, https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen-181x300.png 181w" data-lazy-sizes="(max-width: 559px) 100vw, 559px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135321" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/server-setup-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen.png" data-orig-size="559,927" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Server setup screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen-181x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135321" src="../Images/008678643c7c84a470ad759a1525f2d9.png" alt="Server Setup Screen" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen.png 559w, https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen-181x300.png 181w" sizes="(max-width: 559px) 100vw, 559px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/server-setup-screen.png"/></noscript>
<p>完成服务器设置屏幕中的字段。在第二个屏幕上，保留默认的服务器URL。OneDev将在服务器设置完成后要求您验证您的电子邮件地址，因此请确保使用真实的电子邮件地址。</p>
<p>OneDev有自己内置的身份验证和用户存储。如果您删除Docker容器和卷，您的帐户和数据将会丢失。如果您不想使用内置的用户存储，可以在管理区域设置外部身份验证源。</p>
<p>花几分钟时间探索OneDev用户界面。在左侧，您会发现一个导航菜单，提供对大多数功能的访问。在右上角，您会发现一个菜单，其中有各种用户特定的选项。</p>
<h2 id="create-a-project">创建项目</h2>
<p>在开始在OneDev中工作之前，您需要创建一个项目。一个项目包含一个Git存储库，一个问题跟踪器，以及一个或多个自动化(构建)作业。</p>
<p>要创建一个新项目，点击左侧导航菜单中的<strong>项目</strong>，然后点击<strong> + </strong>(添加)按钮:</p>
<p><img data-attachment-id="135323" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/create-new-onedev-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project.png" data-orig-size="730,154" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create new OneDev project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project-300x63.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project.png" decoding="async" class="aligncenter size-full wp-image-135323 jetpack-lazy-image" src="../Images/1573fbe4e092d56515a46a88cd11705d.png" alt="Create New OneDev Project" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project-300x63.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135323" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/create-new-onedev-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project.png" data-orig-size="730,154" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create new OneDev project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project-300x63.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135323" src="../Images/1573fbe4e092d56515a46a88cd11705d.png" alt="Create New OneDev Project" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project-300x63.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/create-new-onedev-project.png"/></noscript>
<p>为你的项目指定一个<strong>名称</strong>和<strong>描述</strong>。将所有其他选项保留为默认选项:</p>
<p><img data-attachment-id="135325" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/create-project-details/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details.png" data-orig-size="730,725" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create project details" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details-300x298.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details.png" decoding="async" class="aligncenter size-full wp-image-135325 jetpack-lazy-image" src="../Images/fb17602c13f42080276cd589b312d9bd.png" alt="Create Project Details" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details-300x298.png 300w, https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details-150x150.png?crop=1 150w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135325" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/create-project-details/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details.png" data-orig-size="730,725" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create project details" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details-300x298.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135325" src="../Images/fb17602c13f42080276cd589b312d9bd.png" alt="Create Project Details" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details-300x298.png 300w, https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details-150x150.png?crop=1 150w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/create-project-details.png"/></noscript>
<p>现在您有了一个项目，您将需要一些代码来工作。</p>
<h2 id="create-a-sample-react-app">创建一个示例React应用程序</h2>
<p>为了简单起见，使用<code>create-react-app</code>生成一个新的React web应用程序示例:</p>
<pre class="language-javascript hljs">npx create-react-app hello-onedev
</pre>
<p>为了让事情更有趣一点，用下面的代码替换<code>src/App.js</code>的内容:</p>
<pre class="language-javascript hljs">import './App.css';

export default function App() {
  return (
    &lt;div className="App"&gt;
      &lt;svg version="1.1" baseProfile="tiny" x="0px" y="0px" width="200px" height="200px" viewBox="-0.5 0.5 42 42"&gt;
      &lt;path d="M22.5,6.5c0-2.31-0.439-3-3-3h-16c-2.56,0-3,0.69-3,3v29c0,2.5,0.62,3,3,3h10v-2l9-8V6.5z M5.5,8.5h12v24h-12V8.5z
        M12.5,36.5h-3v-2h3V36.5z M26.061,28.109L18.05,35.4c-1.04,1.108-2.7,2.01-1.16,3.898c1.28,1.57,2.969,0.12,3.93-0.898l7.99-7.41
        L26.061,28.109z M38.109,25.061l-2.27,1.959l-1.91-1.97L34.8,22.9l-2.14-2.682c0,0-4.16-3.31-9.36-0.05
        c2.341-0.109,4.58,1.181,6.2,4.021l-2.189,2.121l2.75,2.629l1.799-1.619l2.201,1.93L32.3,30.93l2.14,2.16l5.761-5.58L38.109,25.061z
        "/&gt;
      &lt;/svg&gt;
      &lt;h1&gt;Built and deployed with OneDev&lt;/h1&gt;
    &lt;/div&gt;
  );
};
</pre>
<p>删除<code>src/App.test.js</code>文件以避免测试失败。</p>
<p><code>create-react-app</code>命令初始化了一个本地Git存储库。不要忘记提交您刚才所做的更改:</p>
<pre class="language-javascript hljs">git add *
git commit -m "make things interesting"
</pre>
<p>使用<code>npm start</code>运行您的应用程序，以确认它按预期运行。您应该会看到下面的图标和消息:</p>
<p><img data-attachment-id="135327" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/react-app-running-locally/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally.png" data-orig-size="730,385" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React app running locally" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally-300x158.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally.png" decoding="async" class="aligncenter size-full wp-image-135327 jetpack-lazy-image" src="../Images/ce742c6b23598ea4bdddd588ffbbce71.png" alt="React App Running Locally" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally-300x158.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135327" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/react-app-running-locally/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally.png" data-orig-size="730,385" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="React app running locally" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally-300x158.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135327" src="../Images/ce742c6b23598ea4bdddd588ffbbce71.png" alt="React App Running Locally" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally-300x158.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/react-app-running-locally.png"/></noscript>
<h2 id="push-your-code">推动你的代码</h2>
<p>OneDev包括一个全功能的Git服务器。要向它推送代码，您需要将OneDev作为远程设备添加到您的本地存储库中。</p>
<p>导航到您之前创建的项目。点击<strong>推送一个现有的存储库</strong>，并针对您的本地存储库运行所示的命令。当在<code>git push</code>上提示输入凭据时，使用您刚刚创建的OneDev帐户。</p>
<p><img data-attachment-id="135329" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/pushing-to-remote-git-repository/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository.png" data-orig-size="730,548" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pushing to remote git repository" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository-300x225.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository.png" decoding="async" class="aligncenter size-full wp-image-135329 jetpack-lazy-image" src="../Images/7e98f70258e8b05a5725970aecdbc614.png" alt="Pushing to Remote Git Repository" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository-300x225.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135329" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/pushing-to-remote-git-repository/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository.png" data-orig-size="730,548" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pushing to remote git repository" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository-300x225.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135329" src="../Images/7e98f70258e8b05a5725970aecdbc614.png" alt="Pushing to Remote Git Repository" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository-300x225.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/pushing-to-remote-git-repository.png"/></noscript>
<p>重新加载页面以在OneDev中查看您的代码。尽管您的代码现在位于OneDev容器中，但出于备份目的，您可能仍想考虑将其推到一个备用的远程位置。例如，您可以添加第二个远程Git存储库，将您的代码推送到GitHub。</p>
<h2 id="create-a-job-to-build-and-test-your-code">创建一个作业来构建和测试您的代码</h2>
<p>OneDev有一个内置的自动化作业引擎，允许您定义作业并将它们链接在一起。作业在名为<code>.onedev-buildspec.yml</code>的构建规范文件中定义，该文件存储在Git存储库的根目录中。您可以将该文件作为代码进行编辑，但是使用内置的构建规范编辑器要容易得多。</p>
<p>如果您的Git存储库不包含构建规范文件，OneDev将提示您创建一个。为此，点击<strong>添加。onedev-buildspec.yml </strong>:</p>
<p><img data-attachment-id="135331" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/prompt-create-build-spec-file/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file.png" data-orig-size="690,212" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Prompt create build spec file" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file-300x92.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file.png" decoding="async" class="aligncenter size-full wp-image-135331 jetpack-lazy-image" src="../Images/9e9e8b45df583dccd82833fb349036d7.png" alt="Prompt Create Build Spec File" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file.png 690w, https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file-300x92.png 300w" data-lazy-sizes="(max-width: 690px) 100vw, 690px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135331" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/prompt-create-build-spec-file/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file.png" data-orig-size="690,212" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Prompt create build spec file" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file-300x92.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135331" src="../Images/9e9e8b45df583dccd82833fb349036d7.png" alt="Prompt Create Build Spec File" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file.png 690w, https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file-300x92.png 300w" sizes="(max-width: 690px) 100vw, 690px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/prompt-create-build-spec-file.png"/></noscript>
<p>点击<strong>作业</strong>选项卡上的<strong> + </strong>(添加)按钮，添加一个新作业。命名作业<code>Build</code>。</p>
<p>作业包含在作业工作空间中执行的一系列步骤。添加以下三个步骤来检查代码、构建和测试代码，并发布一个构建工件，以便它可以被后续的部署作业部署。</p>
<ol>
<li>添加一个名为<code>checkout</code>的<strong>结帐代码</strong>步骤。将所有其他选项保留为默认选项:</li>
</ol>
<p><img data-attachment-id="135333" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/adding-checkout-step/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step.png" data-orig-size="730,901" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding checkout step" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step-243x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step.png" decoding="async" class="aligncenter size-full wp-image-135333 jetpack-lazy-image" src="../Images/0eb914e5081dfab18683fe950bca7bb2.png" alt="Adding Checkout Step" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step-243x300.png 243w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135333" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/adding-checkout-step/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step.png" data-orig-size="730,901" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Adding checkout step" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step-243x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135333" src="../Images/0eb914e5081dfab18683fe950bca7bb2.png" alt="Adding Checkout Step" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step-243x300.png 243w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/adding-checkout-step.png"/></noscript>
<ol>
<li>添加一个<strong>执行命令</strong>的步骤，命名为<code>build &amp; test</code>。将图像属性设置为<code>node:current-alpine</code>，并将命令设置为:</li>
</ol>
<pre class="language-javascript hljs">npm install
export CI=TRUE
npx react-scripts build
npx react-scripts test --passWithNoTests
</pre>
<p><img data-attachment-id="135335" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/add-build-test-step/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step.png" data-orig-size="730,991" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add build test step" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step-221x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step.png" decoding="async" class="aligncenter size-full wp-image-135335 jetpack-lazy-image" src="../Images/7334e392de7ffe27547eb27b03657ca3.png" alt="Add Build Test Step" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step-221x300.png 221w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135335" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/add-build-test-step/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step.png" data-orig-size="730,991" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add build test step" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step-221x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135335" src="../Images/7334e392de7ffe27547eb27b03657ca3.png" alt="Add Build Test Step" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step-221x300.png 221w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/add-build-test-step.png"/></noscript>
<p>这一步将基于Node.js映像创建一个新的Docker容器，并在容器内执行构建。</p>
<ol>
<li>添加一个<strong>发布工件</strong>的步骤，命名为<code>publish</code>。将<strong>工件</strong>属性设置为<code>build/</code>(这是上一步的构建输出所在的位置)。这些工件将在构建规范中对未来的工作可用:</li>
</ol>
<p><img data-attachment-id="135337" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/add-publish-step/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step.png" data-orig-size="730,656" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add publish step" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step-300x270.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step.png" decoding="async" class="aligncenter size-full wp-image-135337 jetpack-lazy-image" src="../Images/bfd29bba9d6fc5025bee3cd7d2b0dc67.png" alt="Add Publish Step" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step-300x270.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135337" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/add-publish-step/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step.png" data-orig-size="730,656" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add publish step" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step-300x270.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135337" src="../Images/bfd29bba9d6fc5025bee3cd7d2b0dc67.png" alt="Add Publish Step" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step-300x270.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/add-publish-step.png"/></noscript>
<p>现在您已经指定了所有的步骤，您需要告诉OneDev这个作业应该何时运行。</p>
<p>在<strong>参数&amp;触发器</strong>部分下，添加一个新的分支更新触发器。将所有选项保留为默认值。每次将提交推送到任何分支时，都会触发此作业。</p>
<p>到目前为止，您的工作应该是这样的:</p>
<p><img data-attachment-id="135339" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/onedev-build-job/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job.png" data-orig-size="730,760" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="OneDev build job" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job-288x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job.png" decoding="async" class="aligncenter size-full wp-image-135339 jetpack-lazy-image" src="../Images/9de447b5f74eaad957946447dedbac27.png" alt="OneDev Build Job" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job-288x300.png 288w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135339" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/onedev-build-job/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job.png" data-orig-size="730,760" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="OneDev build job" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job-288x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135339" src="../Images/9de447b5f74eaad957946447dedbac27.png" alt="OneDev Build Job" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job-288x300.png 288w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/onedev-build-job.png"/></noscript>
<p>点击<strong>保存</strong>按钮，提交所有配置，在当前选择的分支上构建规范文件。提交后，作业将开始运行。</p>
<p>几分钟后，作业应该会成功完成:</p>
<p><img data-attachment-id="135341" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/successful-build-indicator/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator.png" data-orig-size="554,134" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Successful build indicator" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator.png" decoding="async" class="aligncenter size-full wp-image-135341 jetpack-lazy-image" src="../Images/2f08151871c35c296d9be35dd5a3aea4.png" alt="Successful Build Indicator" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator.png 554w, https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator-300x73.png 300w" data-lazy-sizes="(max-width: 554px) 100vw, 554px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135341" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/successful-build-indicator/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator.png" data-orig-size="554,134" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Successful build indicator" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator-300x73.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135341" src="../Images/2f08151871c35c296d9be35dd5a3aea4.png" alt="Successful Build Indicator" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator.png 554w, https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator-300x73.png 300w" sizes="(max-width: 554px) 100vw, 554px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/successful-build-indicator.png"/></noscript>
<p>点按绿色勾号以查看构件。然后点击<strong>工件</strong>标签查看发布的工件:</p>
<p><img data-attachment-id="135343" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/published-artifacts/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts.png" data-orig-size="730,560" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Published artifacts" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts-300x230.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts.png" decoding="async" class="aligncenter size-full wp-image-135343 jetpack-lazy-image" src="../Images/933d79aad5661e8ed7971562b6a8019a.png" alt="Published Artifacts" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts-300x230.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135343" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/published-artifacts/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts.png" data-orig-size="730,560" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Published artifacts" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts-300x230.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135343" src="../Images/933d79aad5661e8ed7971562b6a8019a.png" alt="Published Artifacts" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts-300x230.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/published-artifacts.png"/></noscript>
<p>太好了！您在OneDev中运行了一个成功的构建作业。让我们更进一步，设置一个部署作业。</p>
<h2 id="create-a-job-to-deploy-your-code">创建一个作业来部署代码</h2>
<p>接下来，我们将演示如何使用Azure CLI将您的应用程序部署到Azure；我们将提供所有需要的Azure CLI命令和脚本。</p>
<p><strong> <em>注意，</em> </strong> <em>由这些脚本部署的Azure资源是免费的，但是，如前所述，您需要有一个免费的Azure帐户</em></p>
<p>部署作业将获取构建作业生成的工件，并使用Azure CLI将它们部署到Azure App服务。您将为您的部署作业创建并使用服务主体来登录您的Azure帐户。</p>
<p>从安全的角度来看，我们遵循最小特权访问的原则。您可以将服务主体上的权限限制为部署作业绝对需要的权限。</p>
<p>在Bash窗口中运行以下命令来创建一个新的服务主体。您需要指定自己的Azure订阅ID。此命令需要Azure CLI的本地安装。或者，按照这些指令在Azure门户中创建一个服务主体:</p>
<pre class="language-javascript hljs"># log in to your Azure account
az login

# set the ID of the Azure subscription to use
SUBSCRIPTION_ID="a123b456-7cde-8fgh-901234i5678j"

# create the service principal
MSYS_NO_PATHCONV=1 az ad sp create-for-rbac -n onedev-azure-cd --role Contributor --scopes /subscriptions/$SUBSCRIPTION_ID
</pre>
<p>从命令输出中复制<code>appId</code>、<code>password</code>和<code>tenant</code>的值。你很快就会需要这些。</p>
<p>在左侧导航中导航到<strong>代码&gt; </strong> <strong>文件</strong>。打开<code>.onedev-buildspec.yml</code>并点击<strong>编辑</strong>按钮打开构建规范编辑器:</p>
<p><img data-attachment-id="135345" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/build-spec-editor/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor.png" data-orig-size="730,186" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Build spec editor" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor-300x76.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor.png" decoding="async" class="aligncenter size-full wp-image-135345 jetpack-lazy-image" src="../Images/f066456b2f7fe4ba16c70a9acaefbb21.png" alt="Build Spec Editor" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor-300x76.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135345" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/build-spec-editor/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor.png" data-orig-size="730,186" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Build spec editor" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor-300x76.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135345" src="../Images/f066456b2f7fe4ba16c70a9acaefbb21.png" alt="Build Spec Editor" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor-300x76.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/build-spec-editor.png"/></noscript>
<p>使用<strong> + </strong>(添加)按钮添加一个名为<code>Deploy</code>的新任务。然后，使用以下设置向作业添加一个步骤:</p>
<ol>
<li>将步骤<strong>类型</strong>设置为<code>Execute Command</code></li>
<li>将步骤<strong>名称</strong>设置为<code>deploy to Azure</code></li>
<li>选择<strong>下入容器</strong>选项，将<strong>图像</strong>设置为<code>mcr.microsoft.com/azure-cli</code>；此步骤将在安装了Microsoft Azure CLI的容器中执行</li>
<li>Add the below script to the <strong>Commands</strong> field, but make the following changes to the script:
<ol>
<li>   <ul>
<li>在第2-4行，指定您先前创建的服务主体的详细信息</li>
<li>第7行，指定两到三个字符来使你的Azure资源名称全球唯一</li>
</ul>
</li>
</ol>
<pre class="language-javascript hljs"># fill in your service principal details:
APPID='YOUR_APP_ID'
PASSWORD='YOUR_PASSWORD'
TENANT='YOUR_TENANT_ID'

# Azure resource configuration
UNIQUE_SUFFIX='abc'
RESOURCEGROUPNAME='onedev'
LOCATION='eastus'
APPSERVICEPLANNAME="onedev-react-asp-$UNIQUE_SUFFIX"
APPNAME="onedev-react-app-$UNIQUE_SUFFIX"

# Login with service principal
az login --service-principal -u $APPID -p $PASSWORD --tenant $TENANT

# Create resource group if it doesn't exist
if [ $(az group exists --name $RESOURCEGROUPNAME) = false ]; then
    az group create --name $RESOURCEGROUPNAME --location $LOCATION
else
        echo "Resource group exists already: $RESOURCEGROUPNAME"
fi

# Create app service if it doesn't exist
appServicePlans=$(az appservice plan list -g $RESOURCEGROUPNAME --query "[?name=='$APPSERVICEPLANNAME']")
if [ $appServicePlans = "[]" ]; then 
        az appservice plan create -n $APPSERVICEPLANNAME -g $RESOURCEGROUPNAME --sku F1
else
         echo "App service plan exists already: $APPSERVICEPLANNAME"
fi

# Create app if it doesn't exist
webapps=$(az webapp list -g $RESOURCEGROUPNAME --query "[?name=='$APPNAME']")
if [ $webapps = "[]" ]; then
         az webapp create -n $APPNAME -p $APPSERVICEPLANNAME -g $RESOURCEGROUPNAME
else
        echo "App service exists already: $APPNAME"
fi

# Deploy React app
(cd ./build &amp;&amp; zip -r ../app.zip .)
az webapp deploy -g $RESOURCEGROUPNAME -n $APPNAME --src-path app.zip</pre>
<p>这个脚本将使用您的服务主体登录Azure(第14行)，创建所有需要的资源(第17-37行)，创建包含您的React构建工件的zip存档(第40行)，并部署它(第41行)</p></li>
<li>在生成作业上添加新的作业依赖项。将所有其他字段保留为默认值。为<strong>工件保留默认值以检索</strong>属性，以确保构建作业中发布的所有工件都可以用于该作业:</li>
</ol>
<p><img data-attachment-id="135347" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/add-dependency-on-build/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build.png" data-orig-size="723,1009" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add dependency on build" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build-215x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build.png" decoding="async" class="aligncenter size-full wp-image-135347 jetpack-lazy-image" src="../Images/76579fc870b673750c7ba33a1290746e.png" alt="Add Dependency on Build" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build.png 723w, https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build-215x300.png 215w" data-lazy-sizes="(max-width: 723px) 100vw, 723px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135347" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/add-dependency-on-build/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build.png" data-orig-size="723,1009" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add dependency on build" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build-215x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135347" src="../Images/76579fc870b673750c7ba33a1290746e.png" alt="Add Dependency on Build" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build.png 723w, https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build-215x300.png 215w" sizes="(max-width: 723px) 100vw, 723px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/add-dependency-on-build.png"/></noscript>
<p>最后，您可以将所有其他选项保留为默认选项。</p>
<p>你的工作应该是这样的:</p>
<p><img data-attachment-id="135349" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/deploy-job/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job.png" data-orig-size="730,619" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Deploy job" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-300x254.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job.png" decoding="async" class="aligncenter size-full wp-image-135349 jetpack-lazy-image" src="../Images/e301362270c50e2b9abb9af4887349a0.png" alt="Deploy Job" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-300x254.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135349" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/deploy-job/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job.png" data-orig-size="730,619" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Deploy job" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-300x254.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135349" src="../Images/e301362270c50e2b9abb9af4887349a0.png" alt="Deploy Job" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-300x254.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job.png"/></noscript>
<p>点击<strong>保存</strong>按钮提交对构建规范文件的更改。</p>
<p>因为您没有在部署作业上指定触发器，所以它还不会运行。要解决这个问题，重新打开构建规范编辑器并点击<strong>构建</strong>任务来编辑它。</p>
<p>在<strong> More Settings </strong>部分下，添加一个新的Post Build操作来运行部署作业，但是带有一个<strong>条件</strong>来限制它只对Git存储库的主分支进行修改。构建后操作应该如下所示:</p>
<p><img data-attachment-id="135351" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/post-build-action/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action.png" data-orig-size="723,702" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Post build action" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action-300x291.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action.png" decoding="async" class="aligncenter size-full wp-image-135351 jetpack-lazy-image" src="../Images/37af40db5a1cd08e6c156ca0b2cab22e.png" alt="Post Build Action" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action.png 723w, https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action-300x291.png 300w" data-lazy-sizes="(max-width: 723px) 100vw, 723px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135351" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/post-build-action/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action.png" data-orig-size="723,702" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Post build action" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action-300x291.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135351" src="../Images/37af40db5a1cd08e6c156ca0b2cab22e.png" alt="Post Build Action" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action.png 723w, https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action-300x291.png 300w" sizes="(max-width: 723px) 100vw, 723px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/post-build-action.png"/></noscript>
<p>再次保存并提交对构建规范文件的更改。</p>
<p>几分钟后，您的构建和部署作业应该会成功完成。要查看作业输出，请单击左侧导航栏中的<strong>构建</strong>。要查看部署作业的输出，请在build列下单击其构建名称，在本例中为<strong> HelloOneDev#4 </strong>:</p>
<p><img data-attachment-id="135353" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/open-deploy-job/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job.png" data-orig-size="730,254" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Open deploy job" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job-300x104.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job.png" decoding="async" class="aligncenter size-full wp-image-135353 jetpack-lazy-image" src="../Images/2faf6e99ef2ed0dd92b6d74a486ce702.png" alt="Open Deploy Job" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job-300x104.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135353" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/open-deploy-job/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job.png" data-orig-size="730,254" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Open deploy job" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job-300x104.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135353" src="../Images/2faf6e99ef2ed0dd92b6d74a486ce702.png" alt="Open Deploy Job" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job-300x104.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/open-deploy-job.png"/></noscript>
<p>然后，向下滚动到<strong>日志</strong>选项卡的底部，查看指示Azure部署成功的输出:</p>
<p><img data-attachment-id="135355" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/deploy-job-log-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output.png" data-orig-size="730,389" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Deploy job log output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output-300x160.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output.png" decoding="async" class="aligncenter size-full wp-image-135355 jetpack-lazy-image" src="../Images/5e3156277144acdee2e5510acf1f6ae6.png" alt="Deploy Job Log Output" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output-300x160.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="135355" data-permalink="https://blog.logrocket.com/building-deploying-react-web-app-onedev/attachment/deploy-job-log-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output.png" data-orig-size="730,389" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Deploy job log output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output-300x160.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-135355" src="../Images/5e3156277144acdee2e5510acf1f6ae6.png" alt="Deploy Job Log Output" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output-300x160.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/deploy-job-log-output.png"/></noscript>
<p>现在，您的React应用已经部署到Azure应用服务，您可以在浏览器中查看它。默认网站URL将是<code><a href="https://APPNAME.azurewebsites.net" rel="nofollow">https://APPNAME.azurewebsites.net</a></code>，其中<code>APPNAME</code>是部署作业中使用的Azure CLI脚本的第11行的值。</p>
<p>当您准备好清理由部署作业创建的Azure资源时，在Bash窗口中运行以下Azure CLI命令:</p>
<pre class="language-javascript hljs">az group delete -g $RESOURCEGROUPNAME --yes
az ad sp delete --id $APPID
</pre>
<h2 id="whats-next">下一步是什么？</h2>
<p>可以对构建和部署工作进行大量的改进。例如，在部署作业中硬编码Azure服务主体密码意味着它将作为纯文本存储在GitHub repo的构建规范文件中。相反，您应该<a href="https://code.onedev.io/projects/162/files/main/pages/build-spec-secret.md" target="_blank" rel="noopener">创建一个作业秘密</a>来将密码安全地存储在项目设置中，并在构建规范文件中引用它。</p>
<p>在本文中，我们在OneDev中为React web应用程序设置了一个简单的构建、测试和部署工作流，但是还有更多的可能性。您可以将各种类型的步骤和作业组合在一起，形成更复杂的CI/CD工作流。</p>
<p>请务必查看OneDev在<a href="https://github.com/theonedev/onedev" target="_blank" rel="noopener"> GitHub </a>或<a href="https://code.onedev.io/projects/162/files" target="_blank" rel="noopener">公司网站</a>上的官方文档，获取更多灵感。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产React应用</h2><p>调试React应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪Redux状态、自动显示JavaScript错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的web和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux中间件包为您的用户会话增加了一层额外的可见性。LogRocket记录Redux存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试React应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>