<html>
<head>
<title>Using PostCSS with Media Queries Level 4 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用 PostCSS 与媒体查询级别 4 -日志火箭博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-postcss-media-queries-level4/#0001-01-01">https://blog.logrocket.com/using-postcss-media-queries-level4/#0001-01-01</a></blockquote><div><article class="article-post">
<p>媒体查询为开发人员提供了一种强大的方式，无论用户设备的类型或大小如何，都可以为网站访问者提供最佳的 web 体验。例如，媒体查询可用于根据设备的屏幕大小自动调整文档或其元素的样式。</p>
<p>PostCSS JavaScript 插件可以用来有效地实现媒体查询。这个工具使开发人员能够编写 CSS 前处理器或后处理器。PostCSS 可以处理各种各样的任务，如林挺 CSS，转换未来的 CSS 语法，显示内嵌图像，支持混合和变量。开发需求可能因项目而异，但幸运的是，有几个<a href="https://www.postcss.parts" target="_blank" rel="noopener"> PostCSS 插件</a>可用。</p>
<p>在本文中，我们将回顾媒体查询级别 4 中的几个可用功能。我们将使用 PostCSS 来演示每个特性的实现。在撰写本报告时，<a href="https://blog.logrocket.com/new-media-queries-you-need-to-know/" target="_blank" rel="noopener">第 5 级媒体问询仍在起草中</a>。</p>
<p>我们将在整篇文章中使用<a href="https://codepen.io/" target="_blank" rel="noopener"> Codepen </a>来演示例子。这个在线代码编辑器允许我们保持简单，随时查看我们的输出，并避免使用任何类型的 CSS 或 JavaScript 框架。</p>
<p>我们开始吧！</p>
<h2 id="setting-up-postcss-for-codepen">为 Codepen 设置 PostCSS</h2>
<p>如果您没有 Codepen 帐户，您可以在这里创建一个<a href="https://codepen.io/accounts/signup/user/free">。</a></p>
<p>要为 Codepen 演示设置 PostCSS，请遵循以下五个步骤:</p>
<ol>
<li>点击工具条上的<strong>笔</strong>创建一个新笔。<br/>T3<noscript>T5</noscript></li>
<li>点击<strong>设置</strong>按钮打开本模态:<br/> <img data-attachment-id="86942" data-permalink="https://blog.logrocket.com/using-postcss-media-queries-level4/codepen-settings-modal/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal.png" data-orig-size="457,56" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Codepen settings modal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal.png" decoding="async" class="aligncenter wp-image-86942 size-full jetpack-lazy-image" src="../Images/b97616517585cdab4a3aa0f826a57741.png" alt="Codepen Settings Modal" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal.png 457w, https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal-300x37.png 300w" data-lazy-sizes="(max-width: 457px) 100vw, 457px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal.png"/> <noscript> <img data-lazy-fallback="1" data-attachment-id="86942" data-permalink="https://blog.logrocket.com/using-postcss-media-queries-level4/codepen-settings-modal/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal.png" data-orig-size="457,56" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Codepen settings modal" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal-300x37.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal.png" decoding="async" loading="lazy" class="aligncenter wp-image-86942 size-full" src="../Images/b97616517585cdab4a3aa0f826a57741.png" alt="Codepen Settings Modal" srcset="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal.png 457w, https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal-300x37.png 300w" sizes="(max-width: 457px) 100vw, 457px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/01/codepen-settings-modal.png"/> </noscript></li>
<li>从侧边栏选择<strong> CSS </strong>显示不同的 CSS 设置。</li>
<li>从<strong> CSS </strong> <strong>预处理器</strong>下拉菜单中，选择<strong> PostCSS </strong>。在<strong> CSS 基础</strong>下，选择<strong>规格化</strong>。然后在<strong>供应商</strong> <strong>前缀</strong>下，选择<strong>自动前缀</strong>。<br/> <img data-attachment-id="86944" data-permalink="https://blog.logrocket.com/using-postcss-media-queries-level4/css-preprocessor/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor.png" data-orig-size="690,309" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="CSS preprocessor" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor-300x134.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor.png" decoding="async" class="aligncenter wp-image-86944 size-full jetpack-lazy-image" src="../Images/7172596d5e6f30611f2ee0062dce2e80.png" alt="CSS Preprocessor" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor.png 690w, https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor-300x134.png 300w" data-lazy-sizes="(max-width: 690px) 100vw, 690px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor.png"/> <noscript> <img data-lazy-fallback="1" data-attachment-id="86944" data-permalink="https://blog.logrocket.com/using-postcss-media-queries-level4/css-preprocessor/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor.png" data-orig-size="690,309" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="CSS preprocessor" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor-300x134.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor.png" decoding="async" loading="lazy" class="aligncenter wp-image-86944 size-full" src="../Images/7172596d5e6f30611f2ee0062dce2e80.png" alt="CSS Preprocessor" srcset="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor.png 690w, https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor-300x134.png 300w" sizes="(max-width: 690px) 100vw, 690px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/01/css-preprocessor.png"/> </noscript></li>
</ol>
<p>Autoprefixer 是一个 PostCSS 插件，它使用来自<a href="https://caniuse.com"> Can I </a> <a href="https://caniuse.com" target="_blank" rel="noopener"> Use </a>的值，不需要编写供应商前缀。这节省了时间，并有助于保持代码的整洁。</p>
<p>点击<strong>需要一个附加组件吗？</strong>modal 右上角的徽章，显示可用的 PostCSS 插件列表。在整个教程中，我们将把其中几个直接添加到代码中:</p>
<p><img data-attachment-id="86946" data-permalink="https://blog.logrocket.com/using-postcss-media-queries-level4/postcss-plugins-menu/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu.png" data-orig-size="480,245" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="PostCSS  plugins menu" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu.png" decoding="async" class="aligncenter wp-image-86946 size-full jetpack-lazy-image" src="../Images/30ed9569083bda91eee064ad7e06298c.png" alt="PostCSS Plugins Menu" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu.png 480w, https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu-300x153.png 300w" data-lazy-sizes="(max-width: 480px) 100vw, 480px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="86946" data-permalink="https://blog.logrocket.com/using-postcss-media-queries-level4/postcss-plugins-menu/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu.png" data-orig-size="480,245" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="PostCSS  plugins menu" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu-300x153.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu.png" decoding="async" loading="lazy" class="aligncenter wp-image-86946 size-full" src="../Images/30ed9569083bda91eee064ad7e06298c.png" alt="PostCSS Plugins Menu" srcset="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu.png 480w, https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu-300x153.png 300w" sizes="(max-width: 480px) 100vw, 480px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/01/postcss-plugins-menu.png"/></noscript>
<ol start="5">
<li>选择<strong>保存&amp;关闭</strong>。</li>
</ol>
<h2 id="implementing-media-queries-level4-features-with-postcss">使用 PostCSS 实现媒体查询第 4 级功能</h2>
<p>现在，让我们探索一些最有趣的媒体查询 4 级功能。当我们回顾每个特性时，我们将看看用 PostCSS 插件编写的示例代码。</p>
<h3 id="pointer"><code>pointer</code></h3>
<p><code>pointer</code>媒体功能对于检查鼠标或触摸屏等指点设备的存在和准确性非常有用。它还可以用于根据用户设备中的指针类型编写媒体查询。</p>
<p><code>pointer</code>有三个值可用:<code>none</code>、<code>coarse</code>和<code>fine</code>。</p>
<p>以下代码使用<code>postcss-custom-media</code>插件在检测到<code>coarse</code>(或不太精确的)指针类型时放大单选按钮和复选框:</p>
<pre class="language-javascript hljs">@use postcss-custom-media;

@custom-media --pointer-check (pointer: coarse);

@media (--pointer-check) {
    input[type="checkbox"], input[type="radio"] {
    min-width:30px;
    min-height:40px;
    background:transparent;
  }
}
</pre>
<h3 id="range"><code>range</code></h3>
<p><code>range</code>媒体功能使我们能够根据用户设备调整显示，这些设备在特定维度上处于指定的最小值和最大值范围内。</p>
<p>以下代码使用<code>postcss-media-minmax</code>插件在指定的<code>width</code>范围内为用户设备屏幕更改<code>display</code>的样式:</p>
<pre class="language-javascript hljs">@use postcss-media-minmax;

@media screen and (500px &lt;= width &lt;= 1200px) {
  .bar {
    display: block;
  }
}
</pre>
<h3 id="color"><code>color</code></h3>
<p><code>color</code>媒体功能使我们能够测试视觉设备的每种颜色成分(红色、绿色和蓝色)的位数。单色设备的值为零。</p>
<p>以下代码使用<code>postcss-media-minmax</code>插件为每个颜色分量至少有<code>8</code>位的用户设备显示指定的样式:</p>
<pre class="language-javascript hljs">/* This media query expresses that a style sheet applies to color devices with at least 8 bits per color component */

@use postcss-media-minmax;

@media (color &gt;= 8) { … }
</pre>
<h3 id="resolution"><code>resolution</code></h3>
<p><code>resolution</code>媒体功能允许我们检查任何输出设备的像素密度。这使我们能够在向用户呈现内容的同时管理显示质量。</p>
<p>以下代码使用<code>postcss-media-minmax</code>插件根据用户输出设备的像素密度调整文本<code>resolution</code>:</p>
<pre class="language-javascript hljs">@use postcss-media-minmax;

@custom-media --exact-resolution (resolution: 150dpi);
@custom-media --min-resolution (min-resolution: 72dpi);
@custom-media --max-resolution (max-resolution: 300dpi);

/* Exact resolution */
@media (--exact-resolution) {
  p {
    color: red;
  }
}

/* Minimum resolution */
@media (--min-resolution) {
  p {
    text-decoration: underline;
  }
}

/* Maximum resolution */
@media (--max-resolution) {
  p {
    background: yellow;
  }
}
</pre>
<h3 id="hover"><code>hover</code></h3>
<p>媒体查询为我们提供了一个本地 CSS 解决方案，用于测试用户设备上的触摸支持。它检查用户的主要输入设备是否可以悬停在 HTML 元素上。</p>
<p>例如，下面的代码使用<code>postcss-custom-media</code>插件来显示一个<code>hover</code>激活的下拉菜单，仅当该功能在用户的设备上可用时。</p>
<pre class="language-javascript hljs">@use postcss-custom-media;

@custom-media --hover-check (hover);

@media ((--hover-check)) {
  .menu &gt; li        {display:inline-block;}
  .menu ul          {display:none; position:absolute;}
  .menu li:hover ul {display:block; list-style:none; padding:0;}
  /* ... */
}
</pre>
<p>媒体查询级别 4 还允许使用逻辑运算符，如<code>and</code>、<code>not</code>和<code>only</code>。在上面的例子中，使用<code>not</code>会否定媒体特性。换句话说，<code>not(--hover-check)</code>只会匹配缺乏悬停功能的可视设备。</p>
<h3 id="update"><code>update</code></h3>
<p>当我们想要评估用户的输出设备修改呈现内容外观的能力时，CSS <code>update</code>媒体特性就派上了用场。这个特性特别有助于根据用户的输出设备来确定 web 内容所需的功能类型。</p>
<p><code>update</code>媒体特征接受三个值:<code>none</code>、<code>slow</code>和<code>fast</code>。</p>
<p>例如，考虑一个在悬停时带有下划线链接的网页。如果页面被下载或打印，将这些链接显示为下划线可能会有所帮助。</p>
<p>下面的代码使用<code>postcss-custom-media</code>插件来检查悬停时带下划线的链接，然后总是用<code>underline</code>来显示它们:</p>
<pre class="language-javascript hljs">@use postcss-custom-media;

@custom-media --update-check (update);

@media (--update-check) {
  a { text-decoration: none; }
  a:hover, a:focus { text-decoration: underline; }
}

/* In non-updating output devices, the links are always underlined. */
</pre>
<h2 id="conclusion">结论</h2>
<p>在本文中，我们介绍了如何将 PostCSS 与媒体查询级别 4 中可用的<code>pointer</code>、<code>range</code>、<code>color</code>、<code>resolution</code>、<code>hover</code>和<code>update</code>特性结合使用。PostCSS 是增强 CSS 工作流的有用工具。它的速度快得令人难以置信，它的命名语法也大大简化了，这要归功于一个庞大的可用插件生态系统。</p>
<p>查看<a href="https://github.com/postcss/postcss" target="_blank" rel="noopener"> PostCSS 文档</a>以获得更多信息，帮助您驾驭 PostCSS 的力量。有关第 4 级附加媒体查询功能的详细信息可在其<a href="https://www.w3.org/TR/mediaqueries-4/" target="_blank" rel="noopener">文档</a>和<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media" target="_blank" rel="noopener"> MDN </a>中找到。</p><div class="code-block code-block-25">
<div class="blog-plug inline-plug css-plug"><h2>你的前端是否占用了用户的 CPU？</h2><p>随着 web 前端变得越来越复杂，资源贪婪的特性对浏览器的要求越来越高。如果您对监控和跟踪生产环境中所有用户的客户端 CPU 使用情况、内存使用情况等感兴趣，</p><a target="_blank" href="https://lp.logrocket.com/blg/css-signup">try LogRocket</a><p>.</p><a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/dacb06c713aec161ffeaffae5bd048cd.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/cpu-memory-usage.png"/></noscript></a><a href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用的 DVR，记录你的网络应用或网站上发生的一切。您可以汇总和报告关键的前端性能指标，重放用户会话和应用程序状态，记录网络请求，并自动显示所有错误，而不是猜测问题发生的原因。</p><p>现代化您调试 web 和移动应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/css-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>