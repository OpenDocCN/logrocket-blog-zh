<html>
<head>
<title>The ultimate guide to authentication in Vue.js with Supabase - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Vue.js 中使用 Supabase 进行身份验证的终极指南- LogRocket 博客</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/ultimate-guide-authentication-vue-js-supabase/#0001-01-01">https://blog.logrocket.com/ultimate-guide-authentication-vue-js-supabase/#0001-01-01</a></blockquote><div><article class="article-post">
<h2>介绍</h2>
<p>身份验证是当今 web 应用程序中的一个重要特性，但是许多开发人员很难设置它。令人欣慰的是，有一些服务和图书馆可以帮助我们摆脱这个沉重的负担。</p>
<p>今天我们将讨论如何使用 Supabase 在 Vue.js 应用程序中处理用户认证。Supabase 将作为一个具有登录和注册功能的应用程序的后端认证，以及一个只能通过有效凭据访问的私人路由。</p>
<h2>什么是 Supabase？</h2>
<p>Supabase 通常被描述为 Firebase 的开源替代方案。它提供了 Firebase 的一些关键特性，其中之一包括用户认证和管理。</p>
<p>Supabase 为不同的外部身份认证提供者(如密码、电话号码)和身份认证提供者(如 Google、Twitter、脸书和 Github)提供支持。</p>
<h2>设置 Vue.js</h2>
<p>首先，我们将使用<a href="https://blog.logrocket.com/getting-started-with-the-new-vue-cli-3-43bcbe1ae759/" target="_blank" rel="noopener"> Vue CLI </a>快速搭建一个新项目。通过运行以下命令，可以全局安装 CLI:</p>
<pre>npm install -g @vue/cli
# OR
yarn global add @vue/cli
</pre>
<p>接下来，运行以下命令创建一个 Vue 项目:</p>
<pre>vue create supabase-auth
</pre>
<p>系统会提示您选择一个预设；选择手动选择特征的选项。<br/>一旦到达，选择<strong>路由器</strong>和<strong> Vuex </strong>并点击<strong>进入</strong>，然后选择<strong> Vue 版本 3.x </strong>，因为我们将使用新的组合 API。最后，在所有其他选项上点击<strong>回车</strong>，准备好你的 Vue 应用。</p>
<h2>建立超级数据库</h2>
<p>首先，你必须通过访问<a href="https://app.supabase.io/api/login" target="_blank" rel="noopener"> Supabase 登录页面</a>创建一个帐户，然后使用你的 Github 帐户登录。</p>
<p>登录仪表板后，点击<strong>新项目</strong>按钮创建您的第一个项目。您应该会看到以下模式弹出:</p>
<p><img data-attachment-id="60150" data-permalink="https://blog.logrocket.com/ultimate-guide-authentication-vue-js-supabase/supabase-create-new-project-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project.png" data-orig-size="700,536" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Supabase-create-new-project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project-300x230.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project.png" decoding="async" class="size-full wp-image-60150 aligncenter jetpack-lazy-image" src="../Images/1902525959cd6c78aee95dca1da10027.png" alt="Screenshot of supabase create new project screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project.png 700w, https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project-300x230.png 300w" data-lazy-sizes="(max-width: 700px) 100vw, 700px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="60150" data-permalink="https://blog.logrocket.com/ultimate-guide-authentication-vue-js-supabase/supabase-create-new-project-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project.png" data-orig-size="700,536" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Supabase-create-new-project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project-300x230.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project.png" decoding="async" loading="lazy" class="size-full wp-image-60150 aligncenter" src="../Images/1902525959cd6c78aee95dca1da10027.png" alt="Screenshot of supabase create new project screen" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project.png 700w, https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project-300x230.png 300w" sizes="(max-width: 700px) 100vw, 700px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-create-new-project.png"/></noscript>
<p>为您的项目选择一个名称、一个数据库密码和一个靠近您的地区。项目完全创建需要一些时间。</p>
<p>完成后，进入<strong>设置</strong>，然后进入<strong> API </strong>，复制 URL 和匿名公共 API 密钥:</p>
<p><img data-attachment-id="60151" data-permalink="https://blog.logrocket.com/ultimate-guide-authentication-vue-js-supabase/supabase-config-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen.png" data-orig-size="878,565" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Supabase-config-screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen-300x193.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen.png" decoding="async" class="aligncenter wp-image-60151 jetpack-lazy-image" src="../Images/1f5ad61edb47af89ec7cf9e5e9a22ac9.png" alt="Screenshot of Supabase config screen" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen.png 878w, https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen-300x193.png 300w, https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen-768x494.png 768w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="60151" data-permalink="https://blog.logrocket.com/ultimate-guide-authentication-vue-js-supabase/supabase-config-screen/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen.png" data-orig-size="878,565" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Supabase-config-screen" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen-300x193.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen.png" decoding="async" loading="lazy" class="aligncenter wp-image-60151" src="../Images/1f5ad61edb47af89ec7cf9e5e9a22ac9.png" alt="Screenshot of Supabase config screen" srcset="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen.png 878w, https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen-300x193.png 300w, https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen-768x494.png 768w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/07/Supabase-config-screen.png"/></noscript>
<p>在项目的根目录下创建一个<code>.env.local</code>文件，并将凭证保存在其中，如下所示:</p>
<pre>VUE_APP_SUPABASE_URL=YOUR_SUPABSE_URL
VUE_APP_SUPABASE_PUBLIC_KEY=YOUR_SUPABSE_PUBLIC_KEY
</pre>
<h2>设置 Supabase 客户端库</h2>
<p>运行以下命令安装 Supabase 客户端库:</p>
<pre>yarn add @supabase/supabase-js
</pre>
<p>接下来，我们必须通过在我们的<code>src</code>目录中创建一个<code>supabase.js</code>文件并粘贴以下代码来初始化 Supabase:</p>
<pre> import { createClient } from '@supabase/supabase-js'

 const supabaseUrl = process.env.VUE_APP_SUPABASE_URL
 const supabaseAnonKey = process.env.VUE_APP_SUPABASE_KEY

 export const supabase = createClient(supabaseUrl, supabaseAnonKey)
</pre>
<h2>创建我们的页面</h2>
<p>现在让我们创建一些 Vue 组件页面来处理我们项目的注册和登录功能，以及一个仪表板页面。</p>
<p>在本教程中，为了避免混淆我们的 HTML 标记，我们不会对我们的应用程序进行样式化，但是您可以随时选择自己喜欢的样式。</p>
<p>下面是我们的<code>SignIn</code>页面的标记:</p>
<pre>&lt;!-- src/views/SignIn.vue --&gt;
 &lt;template&gt;
  &lt;div&gt;
      &lt;h1&gt;Login Page&lt;/h1&gt;
      &lt;form @submit.prevent="signIn"&gt;
        &lt;input
          class="inputField"
          type="email"
          placeholder="Your email"
          v-model="form.email"
        /&gt;
        &lt;input
          class="inputField"
          type="password"
          placeholder="Your Password"
          v-model="form.password"
        /&gt;
        &lt;button type="submit"&gt;Sign In&lt;/button&gt;
      &lt;/form&gt;
      &lt;p&gt;
        Don't have an account? 
        &lt;router-link to="/sign-up"&gt;Sign Up&lt;/router-link&gt;
      &lt;/p&gt;
    &lt;/div&gt;
&lt;/template&gt;
</pre>
<p>现在让我们为我们的<code>SignUp</code>页面做标记:</p>
<pre>&lt;!-- src/views/SignUp.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
      &lt;h1&gt;SignUp Page&lt;/h1&gt;
      &lt;form @submit.prevent="signUp"&gt;
        &lt;input
          class="inputField"
          type="email"
          placeholder="Your email"
          v-model="form.email"
        /&gt;
        &lt;input
          class="inputField"
          type="password"
          placeholder="Your Password"
          v-model="form.password"
        /&gt;
        &lt;button type="submit"&gt;Sign Up&lt;/button&gt;
      &lt;/form&gt;
      &lt;p&gt;
        Already have an account? 
        &lt;router-link to="/sign-in"&gt;Log in&lt;/router-link&gt;
      &lt;/p&gt;
    &lt;/div&gt;
&lt;/template&gt;
</pre>
<p>最后，我们的<code>Dashboard</code>页面:</p>
<pre>&lt;!-- src/views/Dashboard.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;Welcome to our Dashboard Page&lt;/h1&gt;
    &lt;button @click.prevent="signOut"&gt;Sign out&lt;/button&gt;
    &lt;p&gt;Welcome: {{ userEmail }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;
</pre>
<h2>使用 Vue 路由器设置路由</h2>
<p>现在我们已经创建了我们的页面，我们需要设置路线，以便我们可以在它们之间移动。为此，我们将使用<a href="https://blog.logrocket.com/router-options-compared/" target="_blank" rel="noopener"> Vue 路由器。</a></p>
<p>让我们在路由器文件中为不同的页面声明路由，如下所示:</p>
<pre>// router/index.js
import { createRouter, createWebHistory } from 'vue-router';
function loadPage(view) {
  return () =&gt;
    import(
      /* webpackChunkName: "view-[request]" */ `@/views/${view}.vue`
    );
}
const routes = [
  {
    path: '/',
    name: 'Dashboard',
    component: loadPage("Dashboard"),
    meta: {
      requiresAuth: true,
    }
  },
  {
    path: '/sign-up',
    name: 'SignUp',
    component: loadPage("SignUp")
  },
  {
    path: '/sign-in',
    name: 'SignIn',
    component: loadPage("SignIn")
  },
]
const router = createRouter({
  history: createWebHistory(process.env.BASE_URL),
  routes
})

router.beforeEach((to, from, next) =&gt; {
  // get current user info
  const currentUser = supabase.auth.user();
  const requiresAuth = to.matched.some
  (record =&gt; record.meta.requiresAuth);

  if(requiresAuth &amp;&amp; !currentUser) next('sign-in');
  else if(!requiresAuth &amp;&amp; currentUser) next("/");
  else next();
})

export default router
</pre>
<p>第一个路由中的<code>meta</code>对象用于保存关于该路由的额外信息。它有一个名为<code>requiresAuth</code>的属性，该属性被设置为<code>true</code>，我们将使用该属性来防止未经授权的用户访问该路由。</p>
<p>从第 34 行到第 42 行，我们正在设置一个被称为<a href="https://router.vuejs.org/guide/advanced/navigation-guards.html" target="_blank" rel="noopener">导航保护</a>的东西。</p>
<p>代码中发生的事情是检查确定某个路由是否需要身份验证，以及用户当前是否登录。如果该路线需要认证，并且没有人登录，则用户被重定向到<code>sign-in</code>路线。但是，如果路由需要身份验证，并且有用户登录，则用户会被重定向到仪表板专用路由。</p>
<h2>设置 Vuex</h2>
<p>Vuex 是 Vue 应用中的一个工具，用于存储我们应用中所有组件可访问的数据。它有自己的一套规则，确保存储的数据可以相应地更改和更新。</p>
<p>我们将把组件的所有逻辑存储在 Vuex 中。</p>
<p>使用 Vuex 的一个注意事项是，一旦页面被重新加载，所有存储的数据都会重置。为了解决这个问题，我们将使用<a href="https://www.npmjs.com/package/vuex-persistedstate" target="_blank" rel="noopener"> vuex-persistedstate </a>。这个包有助于保存存储在 Vuex 中的数据，即使在页面重新加载之后。</p>
<p>在终端中输入以下内容以安装 vuex-persistedstate:</p>
<pre>yarn add vuex-persistedstate
#OR
npm install --save vuex-persistedstate
</pre>
<h3>配置我们的 Vuex 商店</h3>
<p>在这里，我们正在配置<code>vuex-persistedstate</code>，然后导入 Supabase 和 Vue 路由器。我们将需要他们来创建我们的 Vuex 商店活动:</p>
<pre>import { createStore } from 'vuex'
import createPersistedState from "vuex-persistedstate";
import router from '../router';
import { supabase } from "../supabase";

// Create store
export default createStore({
  state:{},
  mutations:{},
  actions:{},
  plugins: [createPersistedState()]
});
</pre>
<h3>将数据存储在<code>State</code>中</h3>
<p>我们的 Vuex 存储中的<code>state</code>对象是实际存储数据的对象。在这里，我们可以定义数据的默认值:</p>
<pre>state: {
  user:null
};
</pre>
<p>在我们的<code>state</code>对象中，我们将<code>user</code>的默认值设置为<code>null</code>，因为这是用户没有登录到我们的应用程序时的值。</p>
<h3>通过突变改变状态</h3>
<p>突变是我们改变 Vuex 存储中的<code>state</code>对象的唯一方法。</p>
<p>一个变异接受<code>state</code>和一个来自提交它的动作的值，如下所示:</p>
<pre>  mutations: {
    setUser(state, payload) {
      state.user = payload;
    },
  },
</pre>
<p>当这个突变被提交时，它将我们的<code>user</code>状态的默认值更改为传递给它的任何值。</p>
<h3>使用<code>Actions</code>提交突变</h3>
<p><code>actions</code>对象包含可用于提交突变的函数，以改变我们的应用程序的状态。动作也可以分派其他动作。对于我们的示例应用程序，我们将使用三种不同的操作:注册、登录和注销。</p>
<h4>注册行动</h4>
<p>我们的<code>signUpAction</code>动作接收表单数据，然后调用 Supabase 注册函数。该函数接收收集的表单数据，对其进行验证，并在满足所有要求的情况下创建一个新用户:</p>
<pre>  async signUpAction({dispatch}, form) {
      try {
        const { error } = await supabase.auth.signUp({
          email: form.email,
          password: form.password,
        });
        if (error) throw error;
        alert("You've been registered successfully");
        await dispatch("signInAction", form)
      } catch (error) {
        alert(error.error_description || error.message);
      }
    },
</pre>
<p>一旦创建了用户，就会弹出一个带有成功消息的警报，然后调度<code>signInAction</code>动作。<code>singInAction</code>接收我们的表单数据并记录我们新注册的用户，这样他们就可以访问私有的仪表板路径。如果在任何时候失败，就会弹出一个错误警告。</p>
<h4>行动中签名</h4>
<p><code>signInAction</code>动作还接收用户填写的表单数据。它将该数据传递给我们的 Supabase <code>signIn</code>函数，该函数根据我们的用户表验证该数据，以检查该用户是否存在。如果是，用户登录并重定向到专用仪表板路由。</p>
<p>接下来，我们提交<code>setUser</code>变异，它将我们的<code>user</code>状态的值设置为当前登录用户的电子邮件:</p>
<pre>  async signInAction({ commit }, form) {
    try {
      const { error, user } = await supabase.auth.signIn({
        email: form.email,
        password: form.password,
      });
      if (error) throw error;
      alert("You've Signed In successfully");
      await router.push('/')
      commit('setUser', user.email)
    } catch (error) {
      alert(error.error_description || error.message);
    }
  },
</pre>
<h4>注销操作</h4>
<p>我们的<code>signOutAction</code>动作调用 Supabase <code>signOut</code>函数，将我们的<code>user</code>状态的值重置回 null，然后将用户重定向回登录页面:</p>
<pre>  async signOutAction({ commit }) {
    try {
      const { error } = await supabase.auth.signOut();
      if (error) throw error;
      commit('setUser', null)
      alert("You've been logged Out successfully");
      await router.push("/sign-in");
    } catch (error) {
      alert(error.error_description || error.message);
    }
  },
</pre>
<p>最后，您的 Vuex 商店应该是这样的:</p>
<pre>// src/store/index.js
import { createStore } from 'vuex'
import createPersistedState from "vuex-persistedstate";
import router from '../router';
import { supabase } from "../supabase";
export default createStore({
  state: {
    user: null,
  },
  mutations: {
    setUser(state, payload) {
      state.user = payload;
    },
  },
  actions: {
    async signInAction({ commit }, form) {
      try {
        const { error, user } = await supabase.auth.signIn({
          email: form.email,
          password: form.password,
        });
        if (error) throw error;
        alert("You've Signed In successfully");
        await router.push('/')
        commit('setUser', user.email)
      } catch (error) {
        alert(error.error_description || error.message);
      }
    },
    async signUpAction({dispatch}, form) {
      try {
        const { error} = await supabase.auth.signUp({
          email: form.email,
          password: form.password,
        });
        if (error) throw error;
        alert("You've been registered successfully");
        await dispatch("signInAction", form)
      } catch (error) {
        alert(error.error_description || error.message);
      }
    },
    async signOutAction({ commit }) {
      try {
        const { error } = await supabase.auth.signOut();
        if (error) throw error;
        commit('setUser', null)
        alert("You've been logged Out successfully");
        await router.push("/sign-in");
      } catch (error) {
        alert(error.error_description || error.message);
      }
    },
  },
  modules: {
  },
  plugins: [createPersistedState()],
})
</pre>
<h2>向组件添加逻辑</h2>
<p>是时候让我们倒回去一点，通过添加一些逻辑来使我们不久前创建的组件完全起作用了。</p>
<p>让我们从我们的<code>SignUp</code>组件开始:</p>
<pre>&lt;!-- src/views/SignUp.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
   &lt;!-- Our markup goes here --&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { reactive } from "vue";
import { useStore } from "vuex";
export default {
  setup() {
    // wrap data gotten from form input in vue's reactive object
    const form = reactive({
      email: "",
      password: "",
    });
    //create new store instance
    const store = useStore();
    const signUp = () =&gt; {
      // dispatch the signup action to register new user
      store.dispatch("signUpAction", form);
    };
    return {
      form,
      signUp,
    };
  },
};
&lt;/script&gt;
</pre>
<p>现在，让我们给我们的<code>SignIn</code>组件添加逻辑。<code>SignIn</code>和<code>SignUp</code>组件相似；唯一的区别是调用了<code>signIn</code>函数而不是<code>signUp</code>函数:</p>
<pre>&lt;!-- src/views/SignIn.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
   &lt;!-- Our markup goes here --&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { reactive } from "vue";
import { useStore } from "vuex";
export default {
  setup() {
    // wrap data gotten from form input in vue's reactive object
    const form = reactive({
      email: "",
      password: "",
    });
    //create new store instance
    const store = useStore();
    const signUp = () =&gt; {
      // dispatch the sign in action to Log in the user
      store.dispatch("signInAction", form);
    };
    return {
      form,
      signIn,
    };
  },
};
&lt;/script&gt;
</pre>
<p>让我们也向<code>Dashboard</code>组件添加逻辑，以便我们的登录用户可以在他们需要时注销:</p>
<pre>&lt;!-- src/views/Dashboard.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;Welcome to our Dashboard Page&lt;/h1&gt;
    &lt;button @click.prevent="signOut"&gt;Sign out&lt;/button&gt;
    &lt;p&gt;Welocome: {{ userEmail }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { useStore } from "vuex";
import { computed } from "vue";
export default {
  setup() {
    //create store instance
    const store = useStore();
    // Fetches email of logged in user from state
    const userEmail = computed(() =&gt; store.state.user);
     const signOut = () =&gt; {
      // dispatch the sign out action to log user out
      store.dispatch("signOutAction");
    };
    return {
      signOut,
      userEmail,
    };
  },
};
&lt;/script&gt;
</pre>
<p>这就包含了让我们的组件启动并运行所需的所有逻辑。</p>
<h2>结论</h2>
<p>在本教程中，我们回顾了如何使用 Supabase 和 Vue 执行用户身份验证。我们还学习了如何通过新的组合 API 在我们的 Vue 应用中使用 Vuex 和 Vue 路由器。</p>
<p>如果您想立即投入使用，可以在<a href="https://github.com/codiini/supabase-auth" target="_blank" rel="noopener">这里</a>找到本教程的完整源代码。</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>像用户一样体验您的 Vue 应用</h2><p>调试 Vue.js 应用程序可能会很困难，尤其是当用户会话期间有几十个(如果不是几百个)突变时。如果您对监视和跟踪生产中所有用户的 Vue 突变感兴趣，</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket 就像是网络和移动应用程序的 DVR，记录你的 Vue 应用程序中发生的一切，包括网络请求、JavaScript 错误、性能问题等等。您可以汇总并报告问题发生时应用程序的状态，而不是猜测问题发生的原因。</p><p>LogRocket Vuex 插件将 Vuex 突变记录到 LogRocket 控制台，为您提供导致错误的环境，以及出现问题时应用程序的状态。</p><p>现代化您调试 Vue 应用的方式- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">开始免费监控</a>。</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>