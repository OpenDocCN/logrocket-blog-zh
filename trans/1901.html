<html>
<head>
<title>Building an application with React and Nx - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用 React 和 Nx - LogRocket 博客构建应用程序</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/building-an-application-with-react-and-nx/#0001-01-01">https://blog.logrocket.com/building-an-application-with-react-and-nx/#0001-01-01</a></blockquote><div><article class="article-post">
 <p>构建工具对于任何 web 开发人员来说都是宝贵的资产。目前，许多优秀的构建工具可用于所有领先的 JavaScript 框架。Nx 是一个构建框架，允许你构建 monorepos 和 scaffold full 应用程序，这是最近越来越受欢迎的一个例子。</p>
<p>Nx 自动化了开发人员在构建应用程序时通常必须手动执行的许多步骤。它包括计算缓存、依赖图和构建自动化等特性，还包括一个与 Cypress 集成的<a href="https://nx.dev/latest/angular/cypress/overview">插件。</a></p>
<p>在这篇文章中，我们将使用 Nx 和 React 构建一个简单的待办事项列表应用程序。要跟进，请查看我在 GitHub 上的<a href="https://github.com/andrewevans0102/getting-started-with-nx-and-react">示例项目。</a></p>
<p>我们开始吧！</p>
<h2 id="settingupaworkspace">设置工作空间</h2>
<p>首先，您需要创建一个 Nx 工作空间。您可以通过运行以下代码使用<code>npx</code>来实现这一点:</p>
<pre>npx <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a4c7d6c1c5d0c189cadc89d3cbd6cfd7d4c5c7c1e4c8c5d0c1d7d0">[email protected]</a>
</pre>
<p>也可以<a href="https://www.npmjs.com/package/nx">全局安装 Nx</a>。</p>
<p>当 CLI 运行时，它会创建一个工作区，该工作区基本上是项目的容器。当我们完成后，这个容器将成为一个 monorepo。</p>
<p><img data-attachment-id="56201" data-permalink="https://blog.logrocket.com/building-an-application-with-react-and-nx/nx-cli-runs-container-monorepo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo.png" data-orig-size="730,245" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="nx-cli-runs-container-monorepo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo-300x101.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo.png" decoding="async" class="aligncenter wp-image-56201 size-full jetpack-lazy-image" src="../Images/52c0be4075e94502e03fe2fd36e08652.png" alt="Nx Cli Runs Container Monorepo" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo-300x101.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="56201" data-permalink="https://blog.logrocket.com/building-an-application-with-react-and-nx/nx-cli-runs-container-monorepo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo.png" data-orig-size="730,245" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="nx-cli-runs-container-monorepo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo-300x101.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo.png" decoding="async" loading="lazy" class="aligncenter wp-image-56201 size-full" src="../Images/52c0be4075e94502e03fe2fd36e08652.png" alt="Nx Cli Runs Container Monorepo" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo-300x101.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-cli-runs-container-monorepo.png"/></noscript>
<p>在搭建出项目的主要框架之前，CLI 会询问您一系列问题。我们正在构建一个 React 应用程序，因此文件结构看起来像下面的代码块:</p>
<pre>├── README.md
├── apps
│   ├── first-project
│   └── first-project-e2e
├── babel.config.json
├── jest.config.js
├── jest.preset.js
├── libs
├── nx.json
├── package-lock.json
├── package.json
├── tools
│   ├── generators
│   └── tsconfig.tools.json
├── tsconfig.base.json
└── workspace.json
</pre>
<p>文件结构包括一个有两个文件夹的<code>apps</code>目录。一个是项目本身，另一个是用 Cypress 运行<a href="https://blog.logrocket.com/how-to-write-useful-end-to-end-tests-with-cypress/">端到端测试。</a></p>
<p>现在您已经有了一个搭建好的应用程序，您可以使用<code>npx nx serve first-project</code>来运行它。</p>
<p>您将收到以下输出:</p>
<p><img data-attachment-id="56202" data-permalink="https://blog.logrocket.com/building-an-application-with-react-and-nx/nx-first-project-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage.png" data-orig-size="730,462" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="nx-first-project-homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage-300x190.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage.png" decoding="async" class="aligncenter wp-image-56202 size-full jetpack-lazy-image" src="../Images/ba270c37d00a0258fcf9ae20fb2bc8a1.png" alt="Nx First Project Homepage" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage-300x190.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="56202" data-permalink="https://blog.logrocket.com/building-an-application-with-react-and-nx/nx-first-project-homepage/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage.png" data-orig-size="730,462" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="nx-first-project-homepage" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage-300x190.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage.png" decoding="async" loading="lazy" class="aligncenter wp-image-56202 size-full" src="../Images/ba270c37d00a0258fcf9ae20fb2bc8a1.png" alt="Nx First Project Homepage" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage-300x190.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-first-project-homepage.png"/></noscript>
<h2 id="creatinganapi">创建 API</h2>
<p>让我们在 React 项目旁边创建一个 API，我们可以用它来执行任何 REST 调用。Nx 的一个很酷的特性是它能够在一个命令中添加一个 API 到你的项目中。</p>
<p>我们将使用 Express 创建一个<a href="https://nx.dev/latest/react/tutorial/05-add-node-app#add-express-plugin-to-your-workspace"> API。首先，您需要用 Nx CLI 安装<code>express</code>插件:</a></p>
<pre>npm install --save-dev @nrwl/express
</pre>
<p>现在，您可以使用以下命令创建 API:</p>
<pre>npx nx g @nrwl/express:app api --frontendProject=first-project
</pre>
<p>文件夹结构应该类似于下面的代码:</p>
<pre>├── README.md
├── apps
│   ├── api
│   ├── first-project
│   └── first-project-e2e
├── babel.config.json
├── jest.config.js
├── jest.preset.js
├── libs
├── nx.json
├── package-lock.json
├── package.json
├── tools
│   ├── generators
│   └── tsconfig.tools.json
├── tsconfig.base.json
└── workspace.json
</pre>
<h2 id="scaffoldingtheapplication">搭建应用程序</h2>
<p>现在我们已经有了构建模块，让我们看看到目前为止我们已经构建了什么！如果您查看<code>apps</code>文件夹，您会看到以下代码:</p>
<pre>├── api
│   ├── jest.config.js
│   ├── src
│   │   ├── app
│   │   ├── assets
│   │   ├── environments
│   │   └── main.ts
│   ├── tsconfig.app.json
│   ├── tsconfig.json
│   └── tsconfig.spec.json
├── first-project
│   ├── jest.config.js
│   ├── proxy.conf.json
│   ├── src
│   │   ├── app
│   │   ├── assets
│   │   ├── environments
│   │   ├── favicon.ico
│   │   ├── index.html
│   │   ├── main.tsx
│   │   ├── polyfills.ts
│   │   └── styles.scss
│   ├── tsconfig.app.json
│   ├── tsconfig.json
│   └── tsconfig.spec.json
└── first-project-e2e
    ├── cypress.json
    ├── src
    │   ├── fixtures
    │   ├── integration
    │   ├── plugins
    │   └── support
    ├── tsconfig.e2e.json
    └── tsconfig.json
</pre>
<p><code>api</code>项目是用<code>main.ts</code>搭建的全 Express app，一个<code>entrypoint</code>文件:</p>
<pre>/**
 * This is not a production server yet!
 * This is only a minimal backend to get started.
 */
import * as express from 'express';
const app = express();
app.get('/api', (req, res) =&gt; {
  res.send({ message: 'Welcome to api!' });
});
const port = process.env.port || 3333;
const server = app.listen(port, () =&gt; {
  console.log(`Listening at http://localhost:${port}/api`);
});
server.on('error', console.error);
</pre>
<p>进入<code>first-project</code>文件夹。您将看到 React 应用程序采用传统的文件夹结构构建，常见于<code>assets</code>、<code>styles</code>、<code>index</code>、<code>main</code>和<code>app</code>文件中:</p>
<pre>import { StrictMode } from 'react';
import * as ReactDOM from 'react-dom';
import App from './app/app';
ReactDOM.render(
  &lt;StrictMode&gt;
    &lt;App /&gt;
  &lt;/StrictMode&gt;,
  document.getElementById('root')
);
</pre>
<p>最后，如果您查看<code>first-project-e2e</code>文件夹，您会看到 Cypress 项目具有任何 Cypress 测试套件的传统结构:</p>
<pre>├── cypress.json
├── src
│   ├── fixtures
│   ├── integration
│   ├── plugins
│   └── support
├── tsconfig.e2e.json
└── tsconfig.json
</pre>
<h2 id="callingtheapi">调用 API</h2>
<p>到目前为止，我们已经构建了一个脚手架应用程序。现在，让我们添加一个显示 CLI 运行的功能！我打算用 React 和 Nx 构建一个简单的<a href="https://nx.dev/latest/react/tutorial/01-create-application">待办应用。</a></p>
<p>首先，将下面的代码复制到<code>apps/first-project/src/app/app.tsx</code>文件夹中:</p>
<pre>import React, { useState } from 'react';
interface Todo {
  title: string;
}
export const App = () =&gt; {
  const [todos, setTodos] = useState&lt;Todo[]&gt;([
    { title: 'Todo 1' },
    { title: 'Todo 2' },
  ]);
  function addTodo() {
    setTodos([
      ...todos,
      {
        title: `New todo ${Math.floor(Math.random() * 1000)}`,
      },
    ]);
  }
  return (
    &lt;&gt;
      &lt;h1&gt;Todos&lt;/h1&gt;
      &lt;ul&gt;
        {todos.map((t) =&gt; (
          &lt;li className={'todo'}&gt;{t.title}&lt;/li&gt;
        ))}
      &lt;/ul&gt;
      &lt;button id={'add-todo'} onClick={addTodo}&gt;
        Add Todo
      &lt;/button&gt;
    &lt;/&gt;
  );
};
export default App;
</pre>
<p>如果您从项目根目录运行<code>npm run start</code>,您将看到以下内容:</p>
<p><img data-attachment-id="56204" data-permalink="https://blog.logrocket.com/building-an-application-with-react-and-nx/npm-run-start-project-root/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root.png" data-orig-size="636,478" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="npm-run-start-project-root" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root-300x225.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root.png" decoding="async" class="aligncenter wp-image-56204 size-full jetpack-lazy-image" src="../Images/b4cf39fe60b3cbeebfff109265d702bb.png" alt="Npm Run Start Project Root" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root.png 636w, https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root-300x225.png 300w" data-lazy-sizes="(max-width: 636px) 100vw, 636px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="56204" data-permalink="https://blog.logrocket.com/building-an-application-with-react-and-nx/npm-run-start-project-root/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root.png" data-orig-size="636,478" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="npm-run-start-project-root" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root-300x225.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root.png" decoding="async" loading="lazy" class="aligncenter wp-image-56204 size-full" src="../Images/b4cf39fe60b3cbeebfff109265d702bb.png" alt="Npm Run Start Project Root" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root.png 636w, https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root-300x225.png 300w" sizes="(max-width: 636px) 100vw, 636px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/npm-run-start-project-root.png"/></noscript>
<p>到目前为止，一切顺利！我们可以通过集成对 API 项目的调用来改进我们的代码。首先，创建一个名为<code>apps/api/src/app/todos.ts</code>的文件，并向其中添加以下代码:</p>
<pre>import { Express } from 'express';

interface Todo {
  title: string;
}

const todos: Todo[] = [{ title: 'Todo 1' }, { title: 'Todo 2' }];

export function addTodoRoutes(app: Express) {
  app.get('/api/todos', (req, resp) =&gt; resp.send(todos));
  app.post('/api/addTodo', (req, resp) =&gt; {
    const newTodo = {
      title: `New todo ${Math.floor(Math.random() * 1000)}`,
    };
    todos.push(newTodo);
    resp.send(newTodo);
  });
}
</pre>
<p>上面的代码创建了我们的 API 需要的许多路线。现在，我们将通过修改<code>apps/api/src/main.ts</code>文件向我们的 API 注册路由，如下所示:</p>
<pre>import * as express from 'express';
import { addTodoRoutes } from './app/todos';
const app = express();
app.get('/api', (req, res) =&gt; {
  res.send({ message: 'Welcome to api!' });
});
addTodoRoutes(app);
const port = process.env.port || 3333;
const server = app.listen(port, () =&gt; {
  console.log(`Listening at http://localhost:${port}/api`);
});
server.on('error', console.error);
</pre>
<p>运行<code>npx nx serve api</code>并点击<code><a href="http://localhost:3333/api/todos" rel="nofollow">http://localhost:3333/api/todos</a></code>。您将看到以下内容:</p>
<pre>[{"title":"Todo 1"},{"title":"Todo 2"}]
</pre>
<p>现在，让我们从我们的应用程序调用 API。我们将设置一个代理，以便 React 应用程序的 API 调用直接调用 API。</p>
<p>查看项目根目录下的<code>workspace.json</code>文件，在这里可以找到整个应用程序的配置。</p>
<p>接下来，我们需要在我们的<code>first-project</code> React 应用程序的<code>serve</code>目标中定位<code>proxyConfig</code>，它应该看起来像下面的代码块:</p>
<pre>{
  "serve": {
    "builder": "@nrwl/web:dev-server",
    "options": {
      "buildTarget": "first-project:build",
      "proxyConfig": "apps/first-project/proxy.conf.json"
    },
    "configurations": {
      "production": {
        "buildTarget": "first-projects:build:production"
      }
    }
  }
}
</pre>
<p>在<code>apps/first-project/proxy.conf.json</code>的<code>proxyConifg</code>设置处打开文件，并添加以下代码。它将代理所有 API 调用来调用您的 API 项目:</p>
<pre>{
  "/api": {
    "target": "http://localhost:3333",
    "secure": false
  }
}
</pre>
<p>现在，如果我们修改<code>first-rproject</code>文件夹中的<code>main.ts</code>文件，我们可以调用 API，而不是使用我们最初设置的本地状态。修改<code>apps/first-project/src/app/app.tsx</code>,看起来像下面的代码块:</p>
<pre>import React, { useEffect, useState } from 'react';

interface Todo {
  title: string;
}

const App = () =&gt; {
  const [todos, setTodos] = useState&lt;Todo[]&gt;([]);

  useEffect(() =&gt; {
    fetch('/api/todos')
      .then((_) =&gt; _.json())
      .then(setTodos);
  }, []);

  function addTodo() {
    fetch('/api/addTodo', {
      method: 'POST',
      body: '',
    })
      .then((_) =&gt; _.json())
      .then((newTodo) =&gt; {
        setTodos([...todos, newTodo]);
      });
  }

  return (
    &lt;&gt;
      &lt;h1&gt;Todos&lt;/h1&gt;
      &lt;ul&gt;
        {todos.map((t) =&gt; (
          &lt;li className={'todo'}&gt;{t.title}&lt;/li&gt;
        ))}
      &lt;/ul&gt;
      &lt;button id={'add-todo'} onClick={addTodo}&gt;
        Add Todo
      &lt;/button&gt;
    &lt;/&gt;
  );
};

export default App;
</pre>
<p>现在，我们的 React 应用程序正在调用 API，而不是依赖于本地状态。</p>
<p>让我们运行 API 和<code>frontendProject</code>！可以用<code>npx nx serve first-project</code>和<code>npx nx serve api</code>。你也可以使用一个 npm 包，比如同时使用<a href="https://www.npmjs.com/package/concurrently"/>和<code><a href="https://www.npmjs.com/package/start-server-and-test">start-server-and-test</a></code>，来使用脚本自动运行 API。</p>
<p><img data-attachment-id="56206" data-permalink="https://blog.logrocket.com/building-an-application-with-react-and-nx/nx-xpm-run-api-frontendproject-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page.png" data-orig-size="730,388" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="nx-xpm-run-api-frontendproject-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page-300x159.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page.png" decoding="async" class="aligncenter wp-image-56206 size-full jetpack-lazy-image" src="../Images/13186fd3591839ca25c30701f45e1350.png" alt="Nx Npm Run Api Frontendproject Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page-300x159.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="56206" data-permalink="https://blog.logrocket.com/building-an-application-with-react-and-nx/nx-xpm-run-api-frontendproject-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page.png" data-orig-size="730,388" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="nx-xpm-run-api-frontendproject-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page-300x159.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page.png" decoding="async" loading="lazy" class="aligncenter wp-image-56206 size-full" src="../Images/13186fd3591839ca25c30701f45e1350.png" alt="Nx Npm Run Api Frontendproject Page" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page-300x159.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/nx-xpm-run-api-frontendproject-page.png"/></noscript>
<h2 id="testingwithcypress">用柏树测试</h2>
<p>如前所述，Nx 在搭建应用程序时内置了<a href="https://blog.logrocket.com/cypress-io-the-selenium-killer/"> Cypress </a>测试。</p>
<p>要查看运行中的测试，修改位于<code>apps/first-project-e2e/src/support/app.po.ts</code>的测试文件，使其包含以下内容:</p>
<pre>export const getTodos = () =&gt; cy.get('li.todo');
export const getAddTodoButton = () =&gt; cy.get('button#add-todo');
</pre>
<p>现在，修改位于<code>apps/first-project-e2e/src/integration/app.spec.ts</code>的文件，使其看起来像下面的代码:</p>
<pre>import { getAddTodoButton, getTodos } from '../support/app.po';

describe('TodoApps', () =&gt; {
  beforeEach(() =&gt; cy.visit('/'));

  it('should display todos', () =&gt; {
    getTodos().should((t) =&gt; expect(t.length).equal(2));
    getAddTodoButton().click();
    getTodos().should((t) =&gt; expect(t.length).equal(3));
  });
});
</pre>
<p>运行<code>npx nx e2e first-project-e2e --watch</code>查看您的测试运行情况！</p>
<h2 id="additionalnxfeatures">Nx 的其他特性</h2>
<p>Nx CLI 有许多功能超出了我们到目前为止所介绍的内容。其中最有用的是为你的项目生成依赖图的能力，这通过数据可视化简化了复杂的项目。我们简单的待办事项应用程序不需要这个，但是看到都一样很酷！</p>
<p>首先运行以下代码:</p>
<pre><code>npx nx dep-graph
</code></pre>
<p>您将收到类似下图的输出:</p>
<p><img data-attachment-id="56207" data-permalink="https://blog.logrocket.com/building-an-application-with-react-and-nx/generate-dependency-graph-nx/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx.png" data-orig-size="730,446" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="generate-dependency-graph-nx" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx-300x183.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx.png" decoding="async" class="aligncenter wp-image-56207 size-full jetpack-lazy-image" src="../Images/5c0a23e2bec9db9c74565a56910730cf.png" alt="Generate Dependency Graph Nx" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx-300x183.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="56207" data-permalink="https://blog.logrocket.com/building-an-application-with-react-and-nx/generate-dependency-graph-nx/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx.png" data-orig-size="730,446" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="generate-dependency-graph-nx" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx-300x183.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx.png" decoding="async" loading="lazy" class="aligncenter wp-image-56207 size-full" src="../Images/5c0a23e2bec9db9c74565a56910730cf.png" alt="Generate Dependency Graph Nx" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx-300x183.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/generate-dependency-graph-nx.png"/></noscript>
<p>另一个非常酷的功能是 Nx 能够检测变化，并且只重建受项目最新修改影响的部分。下面是一些利用这个特性的示例命令，它们来自于<a href="https://nx.dev/latest/react/core-concepts/affected"> Nx 文档</a>。</p>
<pre>nx affected:apps # prints affected apps
nx affected:libs # prints affected libs
nx affected:build # builds affected apps and libs
nx affected:lint # lints affected apps and libs
nx affected:test # tests affected apps and libs
nx affected:e2e # e2e tests affected apps
</pre>
<p>最后，Nx 允许你<a href="https://nx.dev/latest/react/tutorial/08-create-libs">创建库</a>和<a href="https://nx.dev/latest/react/tutorial/10-computation-caching">计算缓存</a>来提高性能。我强烈推荐阅读更多关于这些和其他特性的内容！</p>
<h2 id="nextsteps">后续步骤</h2>
<p>在本教程中，我们通过搭建一个简单的待办应用程序，讲述了使用 React 和 Nx 的基础知识。我们项目的下一步是构建资产并部署它们。Nx 可以自动构建小型项目，也可以通过企业应用程序扩展到<a href="https://nx.dev/latest/react/guides/monorepo-nx-enterprise#using-nx-at-enterprises.">大型项目。</a></p>
<p>我希望你喜欢阅读这篇文章！我希望它已经启发了你去看看 Nx，并与 React 一起使用。我强烈建议查看 Nx 文档并阅读他们的一些指南以获取更多信息。</p>
<p>在<a href="https://www.andrewevans.dev/"> andrewevans.dev </a>上关注我，在<a href="https://twitter.com/AndrewEvans0102"> @AndrewEvans0102 </a>的 Twitter 上与我联系。</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:全面了解您的生产 React 应用</h2><p>调试 React 应用程序可能很困难，尤其是当用户遇到难以重现的问题时。如果您对监视和跟踪 Redux 状态、自动显示 JavaScript 错误以及跟踪缓慢的网络请求和组件加载时间感兴趣，</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket 结合了会话回放、产品分析和错误跟踪，使软件团队能够创建理想的 web 和移动产品体验。这对你来说意味着什么？</p>
<p>LogRocket 不是猜测错误发生的原因，也不是要求用户提供截图和日志转储，而是让您回放问题，就像它们发生在您自己的浏览器中一样，以快速了解哪里出错了。</p>
<p>不再有嘈杂的警报。智能错误跟踪允许您对问题进行分类，然后从中学习。获得有影响的用户问题的通知，而不是误报。警报越少，有用的信号越多。</p>
<p vwo-el-id="28675660750">LogRocket Redux 中间件包为您的用户会话增加了一层额外的可见性。LogRocket 记录 Redux 存储中的所有操作和状态。</p>
<p vwo-el-id="28675661060">现代化您调试 React 应用的方式— <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">开始免费监控</a>。</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>