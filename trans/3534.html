<html>
<head>
<title>Using FastAPI inside Docker containers </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在Docker容器中使用FastAPI</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/using-fastapi-inside-docker-containers/#0001-01-01">https://blog.logrocket.com/using-fastapi-inside-docker-containers/#0001-01-01</a></blockquote><div><article class="article-post">
<p>FastAPI是一个基于标准Python类型提示的web框架，用于构建Python 3.6以上版本的API。让FastAPI脱颖而出的是它对现代Python、高性能和易用性的关注。但是，您可能想知道Docker容器是如何进入FastAPI对话的。</p>
<p>假设您正在构建一个REST API，并且需要使用PostgreSQL、Redis、Celery、RabbitMQ和一系列其他依赖项。您遇到的第一个问题是在您的机器上配置所有这些依赖项。这个设置过程可能会很麻烦，但是，还有一个更紧迫的问题。</p>
<p>如果您在Linux上开发，而您的同事在Windows上开发，该怎么办？你必须记住，一些在Linux上运行良好的依赖项在Windows上并不运行良好。即使您设法通过了开发阶段，如果您的开发环境与您的部署环境不一致怎么办？所有这些问题归结到一点，便携性。</p>
<p>为了使您的项目更具可移植性，您可以在安装了项目代码和所有依赖项的隔离环境中进行开发，这正是Docker containers所做的。</p>
<p>Docker不是FastAPI独有的；无论使用什么语言或框架，我们都可以使用Docker来容器化大多数项目。在本文中，我们将学习如何用Docker封装FastAPI应用程序。</p>
<h2 id="prerequisites">先决条件</h2>
<ul>
<li>熟悉Python和FastAPI的基础知识</li>
<li>熟悉Docker的基础知识</li>
<li>python≥3.7版</li>
<li>Python <a href="https://pypi.org/project/pip/"> Pip </a>，包管理器</li>
<li>安装在您机器上的Docker </li>
</ul>
<h2 id="tableofcontents">目录</h2>

<h2 id="setting-up-development-environment">设置我们的开发环境</h2>
<p>让我们创建一个基本的FastAPI应用程序，它有一个返回用户列表的端点。</p>
<p>要创建虚拟环境，请在Unix和macOS上运行<code>python3 -m venv env-name</code>或在Windows上运行<code>python -m venv env-name</code>。将<code>env-name</code>替换为您为虚拟环境选择的名称。</p>
<p>要激活虚拟环境，在Unix和macOS上运行<code>source env-name/bin/activate</code>或在Windows上运行<code>.\\env-name\\Scripts\\activate</code>。</p>
<p>在您想要启动项目的目录中，运行<code>mkdir demo_app</code>，这将在该目录中创建一个名为<code>demo_app</code>的新文件夹:</p>
<ul>
<li>运行<code>cd demo_app</code></li>
<li>运行<code>pip install fastapi[all]</code></li>
<li>运行<code>pip freeze &gt; requirements.txt</code>在<code>demo_app</code>文件夹中创建一个需求文件，包含所有已安装的依赖项</li>
</ul>
<h2 id="adding-python-code">添加Python代码</h2>
<p>在您选择的IDE中启动<code>demo_app</code>文件夹。创建一个名为<code>demo_app/\[main.py\](&lt;<a href="http://main.py&amp;gt" rel="nofollow">http://main.py&amp;gt</a>;)</code>的文件，并将下面的代码片段添加到<code>main.py</code>文件中:</p>
<pre class="language-python hljs">from fastapi import FastAPI

app = FastAPI()

@app.get("/")
async def root():
    return {"message": "Hello World"}

@app.get("/users")
async def users():
    users = [
        {
            "name": "Mars Kule",
            "age": 25,
            "city": "Lagos, Nigeria"
        },

        {
            "name": "Mercury Lume",
            "age": 23,
            "city": "Abuja, Nigeria"
        },

         {
            "name": "Jupiter Dume",
            "age": 30,
            "city": "Kaduna, Nigeria"
        }
    ]

    return users
</pre>
<p>我们创建了两个端点，一个返回“Hello，World！”第二个是<code>/users</code>，返回一个虚拟用户列表。接下来，运行<code>uvicorn main:app --reload</code>启动您的FastAPI应用程序。</p>
<p>将浏览器指向<code>[http://127.0.0.1:8000](&lt;<a href="http://127.0.0.1:8000/&amp;gt" rel="nofollow">http://127.0.0.1:8000/&amp;gt</a>;)/docs</code>。您应该会看到我们刚刚添加的两个端点:</p>
<p><img data-attachment-id="139408" data-permalink="https://blog.logrocket.com/using-fastapi-inside-docker-containers/attachment/fast-api-default-endpoints/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints.png" data-orig-size="730,236" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="fast-api-default-endpoints" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints-300x97.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints.png" decoding="async" class="aligncenter wp-image-139408 size-full jetpack-lazy-image" src="../Images/d5ff3a72391a7b77d0481f68409a7a71.png" alt="Fast API Default Endpoints" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints-300x97.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139408" data-permalink="https://blog.logrocket.com/using-fastapi-inside-docker-containers/attachment/fast-api-default-endpoints/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints.png" data-orig-size="730,236" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="fast-api-default-endpoints" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints-300x97.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints.png" decoding="async" loading="lazy" class="aligncenter wp-image-139408 size-full" src="../Images/d5ff3a72391a7b77d0481f68409a7a71.png" alt="Fast API Default Endpoints" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints-300x97.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/fast-api-default-endpoints.png"/></noscript>
<p>要测试端点，请将浏览器指向<code>\[http://127.0.0.1:8000\](&lt;<a href="http://127.0.0.1:8000/&amp;gt" rel="nofollow">http://127.0.0.1:8000/&amp;gt</a>;)/users</code>。它应该返回用户的虚拟列表，如下图所示:</p>
<p><img data-attachment-id="139411" data-permalink="https://blog.logrocket.com/using-fastapi-inside-docker-containers/attachment/test-fastapi-endpoint-dummy-user-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list.png" data-orig-size="730,125" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="test-fastapi-endpoint-dummy-user-list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list-300x51.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list.png" decoding="async" class="aligncenter wp-image-139411 size-full jetpack-lazy-image" src="../Images/6f7171f2970c0b42d78437e4c8b0819d.png" alt="Test Fastapi Endpoint Dummy User List" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list-300x51.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139411" data-permalink="https://blog.logrocket.com/using-fastapi-inside-docker-containers/attachment/test-fastapi-endpoint-dummy-user-list/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list.png" data-orig-size="730,125" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="test-fastapi-endpoint-dummy-user-list" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list-300x51.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list.png" decoding="async" loading="lazy" class="aligncenter wp-image-139411 size-full" src="../Images/6f7171f2970c0b42d78437e4c8b0819d.png" alt="Test Fastapi Endpoint Dummy User List" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list-300x51.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/test-fastapi-endpoint-dummy-user-list.png"/></noscript>
<p>现在，<a href="https://blog.logrocket.com/building-a-graphql-server-with-fastapi/">我们有了一个基本的FastAPI应用程序</a>，但是为了改善开发体验，我们可以消除创建虚拟环境和手动安装项目依赖项的需要。这种优化将处理安装哪些依赖项，在哪里安装，以及在将我们的项目移植到其他平台时如何安装。让我们来学习如何使用Docker实现这一点。</p>
<h2 id="dockerizing-fastapi-application">归档我们的FastAPI应用程序</h2>
<p>通过在Docker容器中运行项目，我们可以消除创建虚拟环境和手动安装项目依赖项的需要。</p>
<h2 id="docker-container">码头集装箱</h2>
<p>你可以把Docker容器想象成一台运行在另一台计算机上的小型计算机。本质上，Docker容器只是某台机器上的一个隔离环境，其中包含项目的代码及其依赖项。</p>
<p>当我们将FastAPI应用程序容器化或停靠化时，我们实际上是在创建一个轻量级的虚拟盒子，其中安装了项目的依赖项，并配置了FastAPI代码来运行。因此，任何拥有我们的虚拟机器的人都可以运行我们的应用程序，而不必处理低级别的项目配置逻辑。</p>
<p>最重要的是，我们可以简单地将这个虚拟盒子上传到我们的登台或生产服务器，使我们的应用程序上线，而不必添加大量的配置。</p>
<h2 id="docker-image">Docker图像</h2>
<p>在我们的例子中，我们与其他人共享或部署到我们的服务器上的不是容器或虚拟盒子本身，而是创建容器的手册。你可能已经知道这本手册的Docker图像。</p>
<p>Docker图像包含构建容器的分步说明。在构建步骤中，容器从图像旋转而来。但是，为了<a href="https://blog.logrocket.com/node-js-docker-improve-dx-docker-compose/#dockerize-app-docker-multi-stage-build">创建Docker映像</a>，我们首先需要编写一个Docker文件。</p>
<p>要容器化我们的FastAPI应用程序，我们需要遵循三个步骤:</p>
<ol>
<li>写一个文档</li>
<li>从我们的Docker文件构建Docker图像</li>
<li>从我们构建的Docker映像中旋转出一个容器</li>
</ol>
<p>让我们进一步探索每一步。</p>
<h2 id="writing-our-dockerfile">写我们的文档</h2>
<p>创建一个<code>demo_app/Dockerfile</code>文件，并添加下面的代码片段:</p>
<pre class="language-python hljs">FROM python:3-slim-buster

RUN mkdir /code

WORKDIR /code

COPY requirements.txt .

RUN pip install -r requirements.txt

COPY . .

CMD ["uvicorn", "main:app", "--host=0.0.0.0", "--port=80"]
</pre>
<p>我们用一组指令填充Docker文件，Docker守护进程在发出命令时将按照时间顺序构建我们的映像。</p>
<p>当您安装Docker时，它会自动安装Docker客户端，该客户端在您的终端和Docker守护进程中接受Docker命令。可以把Docker守护进程看作是Docker的后端，它是处理Docker客户端收到的命令的主要实体。</p>
<p>让我们弄清楚上面docker文件中的每个命令是什么意思。<code>FROM</code>指令将官方Python镜像设置为基础。它指示Docker守护进程在现有映像的基础上构建我们的映像。Docker采用这种分层方法来增强可重用性。</p>
<p><code>RUN mkdir /code</code>在构建时在映像中创建一个<code>code</code>目录，并最终在创建时创建容器。</p><div class="code-block code-block-54">
<hr/>
<h3>更多来自LogRocket的精彩文章:</h3>

<hr/></div>
<p><code>WORKDIR</code>指令将默认工作目录设置为新创建的<code>/code</code>目录。该工作目录将适用于任何后续的<code>COPY</code>、<code>ADD</code>、<code>RUN</code>和<code>CMD</code>指令。</p>
<p>第一条<code>COPY</code>指令将<code>requirements.txt</code>文件添加到当前工作目录。<code>RUN</code>指令执行<code>pip install -r requirements.txt</code>命令。这个命令将在我们的容器中安装需求文件中列出的依赖项。</p>
<p>第二条<code>COPY</code>指令将主机文件系统的当前目录<code>.</code>中的剩余内容复制到映像中的工作目录<code>.</code>，最终复制到容器中。最后，<code>CMD</code>指令设置运行发布在<code>port 8080</code>上的应用服务器的命令。</p>
<h2 id="building-docker-image-dockerfile">从我们的Docker文件构建Docker映像</h2>
<p>在终端中转到您的<code>demo_app</code>目录，然后运行以下命令:</p>
<pre class="language-python hljs">docker image build --tag demo-app-image .
</pre>
<p>为了构建我们的映像，Docker守护进程需要一些信息。首先，它需要使用<code>Dockerfile</code>的名称。如果没有通过，Docker会在工作目录中查找名为<code>Dockerfile</code>的文件。如果您将文件命名为除了<code>Dockerfile</code>之外的任何名称，那么您必须使用<code>--file</code>选项来传递文件名:</p>
<pre class="language-python hljs">docker image build --file custom-docker-file-name --tag demo-app-image
</pre>
<p>Docker还需要构建上下文。构建上下文是Docker在构建过程中可以访问的目录。在我们的例子中，我们用<code>.</code>指定当前工作目录作为构建上下文。</p>
<p>如果映像构建成功，您应该会得到类似下图的输出:</p>
<p><img data-attachment-id="139413" data-permalink="https://blog.logrocket.com/using-fastapi-inside-docker-containers/attachment/image-build-successful-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output.png" data-orig-size="730,233" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-build-successful-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output-300x96.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output.png" decoding="async" class="aligncenter wp-image-139413 size-full jetpack-lazy-image" src="../Images/647d883b823f86a58fac35383a7dd674.png" alt="Image Build Successful Output" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output-300x96.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139413" data-permalink="https://blog.logrocket.com/using-fastapi-inside-docker-containers/attachment/image-build-successful-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output.png" data-orig-size="730,233" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-build-successful-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output-300x96.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output.png" decoding="async" loading="lazy" class="aligncenter wp-image-139413 size-full" src="../Images/647d883b823f86a58fac35383a7dd674.png" alt="Image Build Successful Output" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output-300x96.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/image-build-successful-output.png"/></noscript>
<p>此时，您的机器上应该有一个名为<code>demo-app-image</code>的图像。您可以运行<code>docker image ls</code>命令来查看您已经创建或从注册表中提取到本地机器的所有图像的列表。</p>
<h2 id="running-container-docker-image">从我们的Docker映像运行容器</h2>
<p>运行下面的命令从我们的<code>demo-app-image</code>开始旋转容器:</p>
<pre class="language-python hljs">docker container run --publish 80:80 --name demo-app-container demo-app-image
</pre>
<p><code>--name</code>选项基于<code>demo-app-image</code>创建一个名为<code>demo-app-container</code>的容器。<code>--publish</code>选项将来自本地机器上<code>port 8080</code>的请求转发给容器中的<code>port 8080</code>。</p>
<p>如果该命令有效，您应该在终端中获得以下输出:</p>
<p><img data-attachment-id="139416" data-permalink="https://blog.logrocket.com/using-fastapi-inside-docker-containers/attachment/command-works-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output.png" data-orig-size="730,57" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="command-works-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output-300x23.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output.png" decoding="async" class="aligncenter wp-image-139416 size-full jetpack-lazy-image" src="../Images/fc8f330a919f534bb2e589ba873bbef4.png" alt="Command Works Output" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output-300x23.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="139416" data-permalink="https://blog.logrocket.com/using-fastapi-inside-docker-containers/attachment/command-works-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output.png" data-orig-size="730,57" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="command-works-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output-300x23.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output.png" decoding="async" loading="lazy" class="aligncenter wp-image-139416 size-full" src="../Images/fc8f330a919f534bb2e589ba873bbef4.png" alt="Command Works Output" srcset="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output-300x23.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/10/command-works-output.png"/></noscript>
<p>您可以将浏览器指向<code>[http://localhost:80/docs](<a href="http://localhost/docs" rel="nofollow">http://localhost/docs</a>)</code>来访问文档页面。您还可以测试<code>/users</code>端点。就是这样！</p>
<h2 id="next-steps">后续步骤</h2>
<p>Docker容器使我们的项目更易于移植。请记住，我们与其他人共享或推到我们的部署环境中的不是容器本身，而是图像。通常，我们通过将图像发布到像<a href="https://hub.docker.com/"> Docker Hub </a>这样的公共注册表来共享图像。</p>
<p>然而，我们并不总是希望我们的图像公开。在这种情况下，我们可以将other文件与项目代码一起推送，并让团队的其他成员构建映像并在他们那端运行容器。</p>
<h2 id="conclusion">结论</h2>
<p>在本文中，我们学习了如何简化FastAPI项目的本地设置，或者使用Docker容器部署到一个临时或生产环境。</p>
<p>从根本上说，Docker容器创建了一个类似虚拟盒子的隔离环境，将我们的应用程序代码与其依赖项捆绑在一起。因此，在任何地方部署我们的应用程序都更加容易，而不必担心特定于平台的不一致性。</p>
<p>要用Docker封装FastAPI应用程序或任何应用程序，首先，我们需要向项目添加一个Docker文件，从Docker文件构建一个映像，并从映像运行一个容器。虽然Docker是最流行的集装箱化技术，但它不是唯一的。</p><div class="code-block code-block-4">
<div class="blog-plug base-cta"><h2>使用<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>消除传统错误报告的干扰</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一个数字体验分析解决方案，它可以保护您免受数百个假阳性错误警报的影响，只针对几个真正重要的项目。LogRocket会告诉您应用程序中实际影响用户的最具影响力的bug和UX问题。</p>
<p>然后，使用具有深层技术遥测的会话重放来确切地查看用户看到了什么以及是什么导致了问题，就像你在他们身后看一样。</p>
<p>LogRocket自动聚合客户端错误、JS异常、前端性能指标和用户交互。然后LogRocket使用机器学习来告诉你哪些问题正在影响大多数用户，并提供你需要修复它的上下文。</p>
<p>关注重要的bug—<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">今天就试试LogRocket】。</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>