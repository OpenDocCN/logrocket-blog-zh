<html>
<head>
<title>React Native Gesture Handler: Swipe, long-press, and more - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React 原生手势处理程序:滑动、长按和更多日志</h1>
<blockquote>原文：<a href="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/#0001-01-01">https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/#0001-01-01</a></blockquote><div><article class="article-post">
<p>现在大多数应用程序都允许用户通过滑动、双击、挤压、长按等方式与关键组件进行交互。当在您的移动应用程序中正确实施时，手势可以为您的用户提供迷人、自然和直观的体验。事实上，你可以用手势代替大多数可见的控件，比如按钮和图标点击。</p>
<p>有几个包可以用来在 React 本机应用程序中实现手势。最受欢迎和推荐的库是<code><a href="https://www.npmjs.com/package/react-native-gesture-handler" target="_blank" rel="noopener">react-native-gesture-handler</a></code>。该库公开了特定于平台(即 Android 和 iOS)的本机触摸和手势，以进行本机反应。</p>
<p>虽然 React Native 中的手势可以使用内置的<a href="https://reactnative.dev/docs/gesture-responder-system" target="_blank" rel="noopener">手势响应系统</a>来处理，但这种实现有一些限制，因为它运行在 JavaScript 线程上。因此，每次执行手势事件时，它都会通过 React 本机桥将数据发送到接口，这可能会导致性能下降。</p>
<p><a href="https://docs.swmansion.com/react-native-gesture-handler/" target="_blank" rel="noopener"> React Native 手势处理程序</a>使您能够在 React Native 中实现高性能手势，因为它运行在本机线程中，并遵循特定于平台的行为，这反过来会带来更好的性能。</p>
<p>React 原生手势处理程序库附带了许多有用的手势，包括:</p>
<ul>
<li><code>PanGestureHandler</code></li>
<li><code>TapGestureHandler</code></li>
<li><code>LongPressGestureHandler</code></li>
<li><code>PinchGestureHandler</code></li>
</ul>
<p>除了上述手势，我们还将演示如何实现拉至刷新、可滑动和双击手势。</p>
<h2>初始化新的世博会应用程序</h2>
<p>我们将从初始化一个新的 Expo 应用程序开始。如果您的计算机上还没有安装 Expo，请运行以下命令:</p>
<pre># installing expo CLI globally
npm install --global expo-cli
</pre>
<p>要创建新的 Expo 应用程序，请在您的终端上运行以下命令</p>
<pre># Create a project named react-native-gestures

expo init react-native-gestures
</pre>
<p>导航到您的项目目录，运行以下命令启动您的应用程序:</p>
<pre>expo start
</pre>
<p>按<code>i</code>在<a href="https://docs.expo.io/workflow/ios-simulator/" target="_blank" rel="noopener"> iOS 模拟器</a>中打开，或者按<code>a</code>在<a href="https://docs.expo.io/workflow/android-studio-emulator/" target="_blank" rel="noopener"> Android 模拟器或连接设备</a>中打开。确保您的模拟器或仿真器已经设置好了。</p>
<p>现在让我们开始在 React 本地应用中实现和管理手势。</p>
<h2>平移手势</h2>
<p>为了使用<code><a href="https://www.npmjs.com/package/react-native-gesture-handler" target="_blank" rel="noopener">react-native-gesture-handler</a></code>库在 React Native 中实现平移手势，我们将使用<code>PanGestureHandler</code>。<code>PanGestureHandler</code>是一个连续的手势处理器，当用户平移(拖动)一个元素时，它生成手势事件流。</p>
<p>要开始使用<code>PanGestureHandler</code>，我们必须从我们之前安装的<code>react-native-gesture-handler</code>库导入它:</p>
<pre>import { PanGestureHandler } from 'react-native-gesture-handler';
</pre>
<p>接下来，我们需要用之前导入的<code>PanGestureHandler</code>组件包装我们想要应用平移手势的元素:</p>
<pre>// in your return block
&lt;PanGestureHandler&gt;
  &lt;View style={styles.square}/&gt;
&lt;/PanGestureHandler&gt;
</pre>
<p>为了让事情四处移动，我们需要使用名为<code>onGestureEvent</code>的基本手势处理程序道具，并向其传递一个回调函数。</p>
<p>让我们创建一个函数，稍后我们将把它传递给<code>onGestureEvent</code>:</p>
<pre>// dont't forget to import Animated from react native
onPanGestureEvent = Animated.event(
    [
      {
        nativeEvent: {
          translationX: this.translateX,
          translationY: this.translateY,
        },
      },
    ],
    { useNativeDriver: true }
  );
</pre>
<p>注意，我们在这里使用了一个类组件。</p>
<p>让我们将刚刚创建的函数传递给<code>PanGestureHandler</code>组件中的<code>onGestureEvent</code> prop。</p>
<pre>&lt;PanGestureHandler onGestureEvent={this.onPanGestureEvent}&gt; &lt;/PanGestureHandler&gt;
</pre>
<p>因为我们想让我们的<code>View</code>组件具有动画效果，所以让我们用<code>Animated.View</code>替换它，并在我们的<code>transform</code>数组中添加<code>translateX</code>和<code>translateY</code>属性来指定平移手势沿 X 和 Y 轴的平移。</p>
<pre>  &lt;Animated.View
            style={[
              styles.square,
              {
                transform: [
                  {
                    translateX: this.translateX,
                  },
                  {
                    translateY: this.translateY,
                  },
                ],
              },
            ]}
          /&gt;
</pre>
<figure id="attachment_50004" aria-describedby="caption-attachment-50004" class="wp-caption aligncenter"><img data-attachment-id="50004" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/pan-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pan-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pan gesture" data-image-description="" data-image-caption="&lt;p&gt;Pan Gesture in React Native.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pan-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pan-gesture.gif" decoding="async" class="size-full wp-image-50004 jetpack-lazy-image" src="../Images/24c2649390a930504618cb1aed3953a9.png" alt="Pan Gesture" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pan-gesture.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pan-gesture.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="50004" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/pan-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pan-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pan gesture" data-image-description="" data-image-caption="&lt;p&gt;Pan Gesture in React Native.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pan-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pan-gesture.gif" decoding="async" loading="lazy" class="size-full wp-image-50004" src="../Images/24c2649390a930504618cb1aed3953a9.png" alt="Pan Gesture" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pan-gesture.gif"/></noscript><figcaption id="caption-attachment-50004" class="wp-caption-text">Pan Gesture in React Native.</figcaption></figure>
<p>以下是使用 React 本机手势处理程序创建平移手势的完整代码:</p>
<pre>import React, { Component } from 'react';
import { StatusBar } from 'expo-status-bar';
import { PanGestureHandler } from 'react-native-gesture-handler';
import { Animated, StyleSheet, Text } from 'react-native';
export default class PanGesture extends Component {
  translateX = new Animated.Value(0);
  translateY = new Animated.Value(0);
  onPanGestureEvent = Animated.event(
    [
      {
        nativeEvent: {
          translationX: this.translateX,
          translationY: this.translateY,
        },
      },
    ],
    { useNativeDriver: true }
  );
  render() {
    return (
      &lt;&gt;
        &lt;Text&gt;Pan Gesture Handler&lt;/Text&gt;
        &lt;PanGestureHandler onGestureEvent={this.onPanGestureEvent}&gt;
          &lt;Animated.View
            style={[
              styles.square,
              {
                transform: [
                  {
                    translateX: this.translateX,
                  },
                  {
                    translateY: this.translateY,
                  },
                ],
              },
            ]}
          /&gt;
        &lt;/PanGestureHandler&gt;
        &lt;StatusBar style="auto" /&gt;
      &lt;/&gt;
    );
  }
}
const styles = StyleSheet.create({
  square: {
    width: 150,
    height: 150,
    backgroundColor: '#28b5b5',
    marginTop: 22,
  },
});
</pre>
<h2><code>TapGestureHandler</code></h2>
<p>使用<code>TapGestureHandler</code>，我们可以实现单击和双击手势。让我们从单击手势开始，然后转到双击手势。</p>
<h3>单击手势</h3>
<figure id="attachment_50006" aria-describedby="caption-attachment-50006" class="wp-caption aligncenter"><img data-attachment-id="50006" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/single-tap-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/single-tap-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Single tap gesture" data-image-description="" data-image-caption="&lt;p&gt;Single tap gesture with TapGestureHandler using React Native Gesture Handler.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/single-tap-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/single-tap-gesture.gif" decoding="async" class="size-full wp-image-50006 jetpack-lazy-image" src="../Images/7bc3f864c7d13f2ae6b1a48429a81420.png" alt="Single Tap Gesture" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/single-tap-gesture.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/single-tap-gesture.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="50006" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/single-tap-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/single-tap-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Single tap gesture" data-image-description="" data-image-caption="&lt;p&gt;Single tap gesture with TapGestureHandler using React Native Gesture Handler.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/single-tap-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/single-tap-gesture.gif" decoding="async" loading="lazy" class="size-full wp-image-50006" src="../Images/7bc3f864c7d13f2ae6b1a48429a81420.png" alt="Single Tap Gesture" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/single-tap-gesture.gif"/></noscript><figcaption id="caption-attachment-50006" class="wp-caption-text">Single-tap gesture with <code>TapGestureHandler</code> using React Native Gesture Handler.</figcaption></figure>
<p>我们将使用<code>TapGestureHandler</code>组件实现单击手势。注意我们添加了<code>onHandlerStateChange</code>道具并传递了一个函数:</p>
<pre>import { View, StyleSheet, Text } from 'react-native';
import { TapGestureHandler, State } from 'react-native-gesture-handler';

export default function TapGesture() {

  const onSingleTapEvent = (event) =&gt; {
    if (event.nativeEvent.state === State.ACTIVE) {
      alert('Hey single tap!');
    }
  };

  return (
    &lt;&gt;
      &lt;Text&gt;Double and Single Tap Gesture Handler&lt;/Text&gt;
      &lt;TapGestureHandler
        onHandlerStateChange={onSingleTapEvent}
        waitFor={doubleTapRef}
      &gt;
        &lt;View style={styles.square} /&gt;
      &lt;/TapGestureHandler&gt;
    &lt;/&gt;
  );
}
</pre>
<h3>双击</h3>
<figure id="attachment_50007" aria-describedby="caption-attachment-50007" class="wp-caption aligncenter"><img data-attachment-id="50007" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/double-tap-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-tap-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Double-tap gesture" data-image-description="" data-image-caption="&lt;p&gt;Double tap gesture with TapGestureHandler using React Native Gesture Handler.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-tap-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-tap-gesture.gif" decoding="async" class="size-full wp-image-50007 jetpack-lazy-image" src="../Images/564da1a1b2f3cdf790887314feb51f28.png" alt="Double-tap Gesture" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/double-tap-gesture.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/double-tap-gesture.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="50007" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/double-tap-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-tap-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Double-tap gesture" data-image-description="" data-image-caption="&lt;p&gt;Double tap gesture with TapGestureHandler using React Native Gesture Handler.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-tap-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-tap-gesture.gif" decoding="async" loading="lazy" class="size-full wp-image-50007" src="../Images/564da1a1b2f3cdf790887314feb51f28.png" alt="Double-tap Gesture" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/double-tap-gesture.gif"/></noscript><figcaption id="caption-attachment-50007" class="wp-caption-text">Double-tap gesture with <code>TapGestureHandler</code> using React Native Gesture Handler.</figcaption></figure>
<p>单击和双击手势实现的主要区别是<code>numberOfTaps</code>道具，它被传递给<code>TapGestureHandler</code>组件。注意，我们将<code>2</code>传递给<code>numberOfTaps</code>来指定我们想要触发<code>onHandlerStateChange</code>事件回调:</p>
<pre>import React, { useRef, useState } from 'react';
import { View, StyleSheet, Text } from 'react-native';
import { TapGestureHandler, State } from 'react-native-gesture-handler';

export default function TapGesture() {

  const [likeColour, setLikeColour] = useState('#28b5b5');
  const doubleTapRef = useRef(null);

  const onDoubleTapEvent = (event) =&gt; {
    if (event.nativeEvent.state === State.ACTIVE) {
      likeColour === '#28b5b5'
        ? setLikeColour('red')
        : setLikeColour('#28b5b5');
    }
  };
  const styles = StyleSheet.create({
    square: {
      width: 150,
      height: 150,
      backgroundColor: likeColour,
      marginTop: 22,
      marginBottom: 22,
    },
  });
  return (
    &lt;&gt;
      &lt;Text&gt;Double and Single Tap Gesture Handler&lt;/Text&gt;
        &lt;TapGestureHandler
          ref={doubleTapRef}
          onHandlerStateChange={onDoubleTapEvent}
          numberOfTaps={2}
        &gt;
          &lt;View style={styles.square} /&gt;
      &lt;/TapGestureHandler&gt;
    &lt;/&gt;
  );
}
</pre>
<p>注意，我们在这里使用了一个功能组件，因为我们使用了<code>useRef</code>钩子。</p>
<h3>在一个组件中实现单击和双击</h3>
<figure id="attachment_50009" aria-describedby="caption-attachment-50009" class="wp-caption aligncenter"><img data-attachment-id="50009" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/double-single-tap-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-single-tap-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Double- and single-tap gestures" data-image-description="" data-image-caption="&lt;p&gt;Double and single tap gesture with TapGestureHandler using React Native Gesture Handler.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-single-tap-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-single-tap-gesture.gif" decoding="async" class="size-full wp-image-50009 jetpack-lazy-image" src="../Images/b8985d48594d36830bbf5612d1893bbc.png" alt="Double- and Single-tap Gestures" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/double-single-tap-gesture.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/double-single-tap-gesture.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="50009" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/double-single-tap-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-single-tap-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Double- and single-tap gestures" data-image-description="" data-image-caption="&lt;p&gt;Double and single tap gesture with TapGestureHandler using React Native Gesture Handler.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-single-tap-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/double-single-tap-gesture.gif" decoding="async" loading="lazy" class="size-full wp-image-50009" src="../Images/b8985d48594d36830bbf5612d1893bbc.png" alt="Double- and Single-tap Gestures" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/double-single-tap-gesture.gif"/></noscript><figcaption id="caption-attachment-50009" class="wp-caption-text">Double and single tap gesture with <code>TapGestureHandler</code> using React Native Gesture Handler.</figcaption></figure>
<p>使用<code>TapGestureHandler</code>，我们可以实现一个手势，其中一个事件在单击时调用，另一个事件在双击时调用。LinkedIn 移动应用程序就是一个很好的例子，点击一下就可以打开帖子，双击就可以为帖子点赞。</p>
<pre>import React, { useRef, useState } from 'react';
import { View, StyleSheet, Text } from 'react-native';
import { TapGestureHandler, State } from 'react-native-gesture-handler';

export default function TapGesture() {

  const [likeColour, setLikeColour] = useState('#28b5b5');
  const doubleTapRef = useRef(null);

  const onSingleTapEvent = (event) =&gt; {
    if (event.nativeEvent.state === State.ACTIVE) {
      alert('Hey single');
    }
  };

  const onDoubleTapEvent = (event) =&gt; {
    if (event.nativeEvent.state === State.ACTIVE) {
      likeColour === '#28b5b5'
        ? setLikeColour('red')
        : setLikeColour('#28b5b5');
    }
  };

  const styles = StyleSheet.create({
    square: {
      width: 150,
      height: 150,
      backgroundColor: likeColour,
      marginTop: 22,
      marginBottom: 22,
    },
  });

  return (
    &lt;&gt;
      &lt;Text&gt;Double and Single Tap Gesture Handler&lt;/Text&gt;
      &lt;TapGestureHandler
        onHandlerStateChange={onSingleTapEvent}
        waitFor={doubleTapRef}
      &gt;
        &lt;TapGestureHandler
          ref={doubleTapRef}
          onHandlerStateChange={onDoubleTapEvent}
          numberOfTaps={2}
        &gt;
          &lt;View style={styles.square} /&gt;
        &lt;/TapGestureHandler&gt;
      &lt;/TapGestureHandler&gt;
    &lt;/&gt;
  );
}
</pre>
<p>为了实现这一点，我们需要将<code>waitFor={doubleTapRef}</code>添加到单击<code>TapGestureHandler</code>组件中。当<code>doubleTapRef</code>为真时，on <code>onSingleTapEvent</code>不会被调用。</p>
<h2>可旋转的手势</h2>
<figure id="attachment_50010" aria-describedby="caption-attachment-50010" class="wp-caption aligncenter"><img data-attachment-id="50010" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/swipable-gestures/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/swipable-gestures.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Swipeable gestures" data-image-description="" data-image-caption="&lt;p&gt;Swipeable gestures with Swipeable component using React Native Gesture Handle.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/swipable-gestures-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/swipable-gestures.gif" decoding="async" class="size-full wp-image-50010 jetpack-lazy-image" src="../Images/37879a85d0880dc66c11691eb0d9430f.png" alt="Swipeable Gestures" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/swipable-gestures.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/swipable-gestures.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="50010" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/swipable-gestures/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/swipable-gestures.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Swipeable gestures" data-image-description="" data-image-caption="&lt;p&gt;Swipeable gestures with Swipeable component using React Native Gesture Handle.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/swipable-gestures-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/swipable-gestures.gif" decoding="async" loading="lazy" class="size-full wp-image-50010" src="../Images/37879a85d0880dc66c11691eb0d9430f.png" alt="Swipeable Gestures" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/swipable-gestures.gif"/></noscript><figcaption id="caption-attachment-50010" class="wp-caption-text">Swipeable gestures with <code>Swipeable</code> component using React Native Gesture Handle.</figcaption></figure>
<p>为了演示如何实现可滑动手势，让我们创建一个项目列表，用户可以在其中向右或向左滑动，并调用某些事件或方法。</p>
<p>让我们创建一个平面列表组件，并将我们的数据传递给<code>data</code> props:</p>
<pre>&lt;FlatList
          data={todoList}
          keyExtractor={(item) =&gt; item.id}
          renderItem={({ item }) =&gt; &lt;ListItem {...item} /&gt;}
          ItemSeparatorComponent={() =&gt; &lt;Separator /&gt;}
        /&gt;
</pre>
<p>请注意，<code>renderItem</code> props 正在返回一个<code>ListItem</code>组件。这代表了我们的待办事项列表，如上面的演示所示。</p>
<p>现在让我们创建我们的<code>ListItem</code>组件，并使其可切换。</p>
<p>首先，从<code>react-native-gesture-handler</code>包中导入<code>Swipeable</code>组件:</p>
<pre>import Swipeable from 'react-native-gesture-handler/Swipeable';
</pre>
<p>接下来，用我们之前导入的<code>Swipeable</code>组件包装<code>View</code>和<code>Text</code>组件。有了这个，我们的组件就可以切换了。但是在真实的场景中，您可能希望在用户向左或向右滑动时调用某种事件或函数。</p>
<p>要渲染左边的容器，使用<code>renderLeftActions</code>道具并传入一个组件。要渲染右边的容器，使用<code>renderRightActions</code>道具。</p>
<p>向左滑动时，我们有<code>delete</code>容器，向右滑动时，我们有<code>bookmark</code>容器。<code>renderLeftActions</code>和<code>renderRightActions</code>道具让这成为可能。</p>
<p><code>onSwipeableRightOpen</code> props 接受一个方法，当从右到左的可滑动手势完成时，即当右动作面板打开时，调用该方法。<code>onSwipeableLeftOpen</code> props 接受一个方法，该方法在左侧操作面板打开时被调用。</p>
<pre>const ListItem = ({ text }) =&gt; (
  &lt;Swipeable
    renderLeftActions={LeftSwipeActions}
    renderRightActions={rightSwipeActions}
    onSwipeableRightOpen={swipeFromRightOpen}
    onSwipeableLeftOpen={swipeFromLeftOpen}
  &gt;
    &lt;View
      style={{
        paddingHorizontal: 30,
        paddingVertical: 20,
        backgroundColor: 'white',
      }}
    &gt;
      &lt;Text style={{ fontSize: 24 }} style={{ fontSize: 20 }}&gt;
        {text}
      &lt;/Text&gt;
    &lt;/View&gt;
  &lt;/Swipeable&gt;
);
</pre>
<p>以下是可滑动手势的完整代码:</p>
<pre>import React from 'react';
import {
  SafeAreaView,
  StyleSheet,
  View,
  Text,
  StatusBar,
  FlatList,
} from 'react-native';
import Swipeable from 'react-native-gesture-handler/Swipeable';
const todoList = [
  { id: '1', text: 'Learn JavaScript' },
  { id: '2', text: 'Learn React' },
  { id: '3', text: 'Learn TypeScript' },
];
const Separator = () =&gt; &lt;View style={styles.itemSeparator} /&gt;;
const LeftSwipeActions = () =&gt; {
  return (
    &lt;View
      style={{ flex: 1, backgroundColor: '#ccffbd', justifyContent: 'center' }}
    &gt;
      &lt;Text
        style={{
          color: '#40394a',
          paddingHorizontal: 10,
          fontWeight: '600',
          paddingHorizontal: 30,
          paddingVertical: 20,
        }}
      &gt;
        Bookmark
      &lt;/Text&gt;
    &lt;/View&gt;
  );
};
const rightSwipeActions = () =&gt; {
  return (
    &lt;View
      style={{
        backgroundColor: '#ff8303',
        justifyContent: 'center',
        alignItems: 'flex-end',
      }}
    &gt;
      &lt;Text
        style={{
          color: '#1b1a17',
          paddingHorizontal: 10,
          fontWeight: '600',
          paddingHorizontal: 30,
          paddingVertical: 20,
        }}
      &gt;
        Delete
      &lt;/Text&gt;
    &lt;/View&gt;
  );
};
const swipeFromLeftOpen = () =&gt; {
  alert('Swipe from left');
};
const swipeFromRightOpen = () =&gt; {
  alert('Swipe from right');
};
const ListItem = ({ text }) =&gt; (
  &lt;Swipeable
    renderLeftActions={LeftSwipeActions}
    renderRightActions={rightSwipeActions}
    onSwipeableRightOpen={swipeFromRightOpen}
    onSwipeableLeftOpen={swipeFromLeftOpen}
  &gt;
    &lt;View
      style={{
        paddingHorizontal: 30,
        paddingVertical: 20,
        backgroundColor: 'white',
      }}
    &gt;
      &lt;Text style={{ fontSize: 24 }} style={{ fontSize: 20 }}&gt;
        {text}
      &lt;/Text&gt;
    &lt;/View&gt;
  &lt;/Swipeable&gt;
);
const SwipeGesture = () =&gt; {
  return (
    &lt;&gt;
      &lt;StatusBar /&gt;
      &lt;SafeAreaView style={styles.container}&gt;
        &lt;Text style={{ textAlign: 'center', marginVertical: 20 }}&gt;
          Swipe right or left
        &lt;/Text&gt;
        &lt;FlatList
          data={todoList}
          keyExtractor={(item) =&gt; item.id}
          renderItem={({ item }) =&gt; &lt;ListItem {...item} /&gt;}
          ItemSeparatorComponent={() =&gt; &lt;Separator /&gt;}
        /&gt;
      &lt;/SafeAreaView&gt;
    &lt;/&gt;
  );
};
const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  itemSeparator: {
    flex: 1,
    height: 1,
    backgroundColor: '#444',
  },
});
export default SwipeGesture;
</pre>
<h2>按住/长按手势</h2>
<figure id="attachment_50011" aria-describedby="caption-attachment-50011" class="wp-caption aligncenter"><img data-attachment-id="50011" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/hold-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/hold-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Hold gesture" data-image-description="" data-image-caption="&lt;p&gt;Long press / hold gestures with LongPressGestureHandler using React Native Gesture Handle.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/hold-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/hold-gesture.gif" decoding="async" class="size-full wp-image-50011 jetpack-lazy-image" src="../Images/e80d1ea35ef8bb98847d52c163f8e265.png" alt="Hold Gesture" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/hold-gesture.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/hold-gesture.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="50011" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/hold-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/hold-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Hold gesture" data-image-description="" data-image-caption="&lt;p&gt;Long press / hold gestures with LongPressGestureHandler using React Native Gesture Handle.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/hold-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/hold-gesture.gif" decoding="async" loading="lazy" class="size-full wp-image-50011" src="../Images/e80d1ea35ef8bb98847d52c163f8e265.png" alt="Hold Gesture" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/hold-gesture.gif"/></noscript><figcaption id="caption-attachment-50011" class="wp-caption-text">Long press / hold gestures with <code>LongPressGestureHandler</code> using React Native Gesture Handle.</figcaption></figure>
<p>使用 React 本机手势处理程序，实现长按/保持手势非常简单。</p>
<p>基本上，我们需要用从<code>react-native-gesture-handler</code>导入的<code>LongPressGestureHandler</code>包装我们想要实现手势的 React 原生组件，然后添加<code>onHandlerStateChange</code>道具，当用户按住组件一段给定的时间时，就会触发一个方法。为了指定长按的持续时间，我们传入了<code>minDurationMs</code>，它接受一个以毫秒表示的数字。</p>
<p>下面是上面演示的代码:</p>
<pre>import React from 'react';
import { View, StyleSheet } from 'react-native';
import { LongPressGestureHandler, State } from 'react-native-gesture-handler';

export default function LongPressGesture() {
  const onLongPress = (event) =&gt; {
    if (event.nativeEvent.state === State.ACTIVE) {
      alert("I've been pressed for 800 milliseconds");
    }
  };

  return (
    &lt;LongPressGestureHandler
      onHandlerStateChange={onLongPress}
      minDurationMs={800}
    &gt;
      &lt;View style={styles.box} /&gt;
    &lt;/LongPressGestureHandler&gt;
  );
}
const styles = StyleSheet.create({
  box: {
    width: 150,
    height: 150,
    backgroundColor: '#28b5b5',
    marginTop: 22,
    marginBottom: 22,
  },
});
</pre>
<h2>双指缩放</h2>
<p>顾名思义，这是一个连续的手势，可以跟踪两个手指之间的距离，并使用这些信息来缩放您的内容。</p>
<pre>render() {
    return (
      &lt;PinchGestureHandler
        onGestureEvent={this.onPinchGestureEvent}
        onHandlerStateChange={this.onPinchHandlerStateChange}
      &gt;
        &lt;Animated.View
          style={[
            styles.pinchableImage,
            {
              transform: [{ perspective: 1 }, { scale: this.scale }],
            },
          ]}
        &gt;&lt;/Animated.View&gt;
      &lt;/PinchGestureHandler&gt;
    );
  }
</pre>
<figure id="attachment_50012" aria-describedby="caption-attachment-50012" class="wp-caption aligncenter"><img data-attachment-id="50012" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/pinch-zoom-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pinch-zoom-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pinch-to-zoom gesture" data-image-description="" data-image-caption="&lt;p&gt;Pinch to zoom gestures with PinchGestureHandler using React Native Gesture Handle.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pinch-zoom-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pinch-zoom-gesture.gif" decoding="async" class="size-full wp-image-50012 jetpack-lazy-image" src="../Images/5da246b303bff7589ede9cf0a329f332.png" alt="Pinch-to-zoom Gesture" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pinch-zoom-gesture.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pinch-zoom-gesture.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="50012" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/pinch-zoom-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pinch-zoom-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pinch-to-zoom gesture" data-image-description="" data-image-caption="&lt;p&gt;Pinch to zoom gestures with PinchGestureHandler using React Native Gesture Handle.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pinch-zoom-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pinch-zoom-gesture.gif" decoding="async" loading="lazy" class="size-full wp-image-50012" src="../Images/5da246b303bff7589ede9cf0a329f332.png" alt="Pinch-to-zoom Gesture" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pinch-zoom-gesture.gif"/></noscript><figcaption id="caption-attachment-50012" class="wp-caption-text">Pinch to zoom gestures with <code>PinchGestureHandler</code> using React Native Gesture Handle.</figcaption></figure>
<p>为了完成这项工作，我们需要将<code>onGestureEvent</code>道具添加到我们的<code>PinchGestureHandler</code>中，然后在我们的<code>transform</code>数组中设置<code>{ scale: this.scale }</code>对象:</p>
<pre>import React, { Component } from 'react';
import { View, Image, StyleSheet, Animated } from 'react-native';
import { PinchGestureHandler, State } from 'react-native-gesture-handler';
export default class PinchToZoom extends Component {
  baseScale = new Animated.Value(1);
  pinchScale = new Animated.Value(1);
  scale = Animated.multiply(this.baseScale, this.pinchScale);
  lastScale = 1;
  onPinchGestureEvent = Animated.event(
    [{ nativeEvent: { scale: this.pinchScale } }],
    { useNativeDriver: true }
  );
  onPinchHandlerStateChange = (event) =&gt; {
    if (event.nativeEvent.oldState === State.ACTIVE) {
      this.lastScale *= event.nativeEvent.scale;
      this.baseScale.setValue(this.lastScale);
      this.pinchScale.setValue(1);
    }
  };
  render() {
    return (
      &lt;PinchGestureHandler
        onGestureEvent={this.onPinchGestureEvent}
        onHandlerStateChange={this.onPinchHandlerStateChange}
      &gt;
        &lt;Animated.View
          style={[
            styles.pinchableImage,
            {
              transform: [{ perspective: 1 }, { scale: this.scale }],
            },
          ]}
        &gt;&lt;/Animated.View&gt;
      &lt;/PinchGestureHandler&gt;
    );
  }
}
const styles = StyleSheet.create({
  pinchableImage: {
    width: 250,
    height: 250,
    backgroundColor: '#28b5b5',
    marginTop: 22,
    marginBottom: 22,
  },
});
</pre>
<h2>拉至刷新</h2>
<p>要在 React Native 中实现拉刷新，不需要外部库。只需添加<code>onRefresh</code>属性，它接受<code>FlatList</code>组件中的一个函数，并将<code>refreshing</code>属性设置为布尔值。</p>
<pre>// at the top of your component
  const [refreshing, setrefreshing] = useState(false);

&lt;FlatList
        data={data}
        renderItem={renderItem}
        keyExtractor={(item) =&gt; item.id}
        refreshing={refreshing}
        onRefresh={onRefresh}
      /&gt;
</pre>
<p>默认情况下，我们将<code>refreshing</code>设置为<code>false</code>，然后，当调用<code>onRefresh</code>方法时，我们使用<code>setrefreshing</code>将<code>refreshing</code>状态设置为<code>true</code>:</p>
<figure id="attachment_50013" aria-describedby="caption-attachment-50013" class="wp-caption aligncenter"><img data-attachment-id="50013" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/pull-refresh-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pull-refresh-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pull-to-refresh gesture" data-image-description="" data-image-caption="&lt;p&gt;Pull-to-refresh gesture demo in React Native.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pull-refresh-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pull-refresh-gesture.gif" decoding="async" class="size-full wp-image-50013 jetpack-lazy-image" src="../Images/5eab89cddc87a13c315c98b07a31a34c.png" alt="Pull-to-refresh Gesture" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pull-refresh-gesture.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pull-refresh-gesture.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="50013" data-permalink="https://blog.logrocket.com/react-native-gesture-handler-swipe-long-press-and-more/pull-refresh-gesture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pull-refresh-gesture.gif" data-orig-size="296,640" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Pull-to-refresh gesture" data-image-description="" data-image-caption="&lt;p&gt;Pull-to-refresh gesture demo in React Native.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pull-refresh-gesture-139x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/05/pull-refresh-gesture.gif" decoding="async" loading="lazy" class="size-full wp-image-50013" src="../Images/5eab89cddc87a13c315c98b07a31a34c.png" alt="Pull-to-refresh Gesture" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/05/pull-refresh-gesture.gif"/></noscript><figcaption id="caption-attachment-50013" class="wp-caption-text">Pull-to-refresh gesture demo in React Native.</figcaption></figure>
<p>下面是上面演示的完整代码:</p>
<pre>import React, { useState } from 'react';
import {
  SafeAreaView,
  View,
  FlatList,
  StyleSheet,
  Text,
  StatusBar,
} from 'react-native';
const DATA = [
  {
    id: '1',
    title: 'Take coffee',
  },
  {
    id: '2',
    title: 'Write some code',
  },
  {
    id: '3',
    title: 'Take the test',
  },
  {
    id: '4',
    title: 'Excercise',
  },
];
const Item = ({ title }) =&gt; (
  &lt;View style={styles.item}&gt;
    &lt;Text style={styles.title}&gt;{title}&lt;/Text&gt;
  &lt;/View&gt;
);
export default function PullToRefresh() {
  const [refreshing, setrefreshing] = useState(false);
  const [data, setdata] = useState(DATA);
  const onRefresh = () =&gt; {
    setrefreshing(true);
    setTimeout(() =&gt; {
      setdata((data) =&gt; [
        ...data,
        {
          id: '57878',
          title: 'Take a walk in the park',
        },
      ]);
      setrefreshing(false);
    }, 2000);
  };
  const renderItem = ({ item }) =&gt; &lt;Item title={item.title} /&gt;;
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;FlatList
        data={data}
        renderItem={renderItem}
        keyExtractor={(item) =&gt; item.id}
        refreshing={refreshing}
        onRefresh={onRefresh}
      /&gt;
    &lt;/SafeAreaView&gt;
  );
}
const styles = StyleSheet.create({
  container: {
    flex: 1,
    marginTop: StatusBar.currentHeight || 0,
  },
  item: {
    backgroundColor: '#fad586',
    padding: 20,
    marginVertical: 8,
    marginHorizontal: 16,
  },
  title: {
    fontSize: 20,
  },
});
</pre>
<h2>结论</h2>
<p>在 React Native 中实现手势可以帮助改善用户体验，让用户感觉你的应用很自然。</p>
<p>在本教程中，我们介绍了 React 原生应用中手势的实现和管理，包括可滑动、平移、双击和单击、缩放等。</p>
<p>这个演示的所有代码都可以在<a href="https://github.com/ejirocodes/react-native-gesture-management" target="_blank" rel="noopener"> GitHub </a>上获得。</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:即时重现 React 原生应用中的问题。</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>是一款 React 原生监控解决方案，可帮助您即时重现问题、确定 bug 的优先级并了解 React 原生应用的性能。</p><p>LogRocket 还可以向你展示用户是如何与你的应用程序互动的，从而帮助你提高转化率和产品使用率。LogRocket 的产品分析功能揭示了用户不完成特定流程或不采用新功能的原因。</p><p>开始主动监控您的 React 原生应用— <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">免费试用 LogRocket】。</a></p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>